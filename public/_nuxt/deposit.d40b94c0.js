import{_ as _t}from"./back.9d1ce4bd.js";import{_ as Bt,a as Ft}from"./token-warning-modal.d457274b.js";import{_ as jt}from"./swap-setting.c7bd8d1e.js";import{u as co,c as kn,a as Et}from"./sha256.821d24cb.js";import{u as nn,c as fo,D as h,a as Ln,d as Ae,b as on,n as An,e as Fe,t as Tn,g as qn,p as nt,s as xo,f as Po,h as tt}from"./pool.a2909811.js";import{a as vo,r as g,y as hn,C as Wt,m as D,D as fe,b as Rn,e as po,o as r,f as c,h as a,v as u,i as re,z as me,c as se,x as C,p as Fo,k as jo,q as Cn,t as ao,j as Oe,I as ct,E as vt,w as Ne,S as pt,u as ae,B as Mn,G as Dt,H as at,F as No,s as en,J as mt,M as ft,K as gt,l as Ht,L as Nn,N as zt}from"./entry.616ec980.js";import{i as He}from"./import-icon.de3e6c66.js";import{_ as Xt}from"./assets-card.4aff1360.js";import{s as bn,m as Vt,l as Kt,b as Zt,a as Gt,_ as it,c as rt,d as Jt}from"./icon-Add-Liquidity_2x.2d898413.js";import{_ as Qt,a as Yt,b as xt,c as ea}from"./new-add-or-create.1dad434c.js";import{_ as oa}from"./network-tips.4eefc753.js";/* empty css              *//* empty css              */import{_ as na}from"./apr-tab.d2439c5a.js";import{_ as ta}from"./token-warning.f353e2ce.js";import{_ as aa}from"./apr-tips.00a68d4f.js";/* empty css              */import{p as ia}from"./precision.9d58cda5.js";import{_ as ra}from"./coin-select.4d6cd718.js";import{_ as la}from"./status-block.81d08357.js";import{_ as bt}from"./icon-arrow_2x.948aedb2.js";import{_ as kt}from"./icon-arrow_2x.4ffddb8e.js";/* empty css              */import{u as sa}from"./notifi.2941b81e.js";import{_ as ht}from"./icon-selected_3x.09e9a6f0.js";/* empty css              *//* empty css              */import"./index.4ff35a55.js";import"./img-no-Positions_2x.04d026d4.js";import"./useWhale.5d451f8d.js";import"./index.7126b0be.js";const ua=vo({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,n){const _=g(!1),F=g(null),B=g(0),Z=g(20),z=nn(),ne=co(),W=g(!1);hn(()=>{}),Wt(()=>{clearInterval(F.value)});const H=()=>{F.value=setInterval(()=>{var $;W.value||B.value<Z.value&&(B.value+=1,B.value===Z.value&&(($=e==null?void 0:e.poolInfo)!=null&&$.poolAddress&&z.updateCurrentPools(e.poolInfo.poolAddress,ne.chainName),B.value=0))},1e3)},X=D(()=>ne.slippage),V=()=>{n.emit("clearAll")},ee=()=>{B.value=0,n.emit("clickRefresh")};fe(()=>e.poolInfo,$=>{$&&!F.value&&H()},{immediate:!0});const he=Rn();return{clickRefresh:ee,isShowSwapSetting:_,countdown:B,autoRefreshTime:Z,slippage:X,clearAll:V,checkNullObj:fo,router:he}}});const da=e=>(Fo("data-v-f484e6e0"),e=e(),jo(),e),ca={class:"title"},va={class:"left"},pa=da(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),ma={class:"deposit-progress"};function fa(e,n,_,F,B,Z){var W,H;const z=Bt,ne=jt;return r(),c("div",ca,[a("div",va,[a("span",null,u(e.poolInfo?e.$t("common.concentratedLiquidity"):(H=(W=e.$route)==null?void 0:W.query)!=null&&H.action?e.$t("newAdd.createClmmPool"):e.$t("common.concentratedLiquidity")),1)]),a("div",{class:me(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[a("div",{class:"slippage-icon",onClick:n[0]||(n[0]=X=>e.isShowSwapSetting=!0)},[pa,a("span",null,u(e.slippage)+"%",1)]),a("div",ma,[re(z,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])],2),e.isShowSwapSetting?(r(),se(ne,{key:0,onOnClose:n[1]||(n[1]=X=>e.isShowSwapSetting=!1)})):C("",!0)])}const ga=po(ua,[["render",fa],["__scopeId","data-v-f484e6e0"]]);const ba=vo({props:{coinIcon:{type:String,default:""},coin:{type:Object,default:()=>({})}},setup(e){const n=co(),_=D(()=>n),F=g(""),B=g(""),Z=g(""),z=nn(),ne=D(()=>z);fe(()=>[e.coin,ne.value.tokensObj],([H,X])=>{var V;H?(B.value=X&&X[H.address]&&((V=X[H.address])==null?void 0:V.labels),F.value=H.name,Z.value=H.symbol):(B.value="",F.value="",Z.value="")},{immediate:!0,deep:!0});const W=D(()=>{var H,X,V;return e.coinIcon||((V=(X=ne==null?void 0:ne.value)==null?void 0:X.tokensObj[(H=e.coin)==null?void 0:H.address])==null?void 0:V.logo_url)||(_.value.theme==="default"?He("/image/coins/unknown.png"):He("/image/coins/sui-unknown.png"))});return{store:_,importIcon:He,coinName:F,coinLabels:B,coinSymbol:Z,currentIcon:W}}}),ka=e=>(Fo("data-v-d0bce36a"),e=e(),jo(),e),ha={class:"coin-block"},Ca={class:"coin-info"},ya={class:"symbol"},wa={key:0,class:"name"},Pa={key:0,class:"label"},Ia=ka(()=>a("div",null,[a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon_on"})])],-1));function $a(e,n,_,F,B,Z){const z=Cn("image");return r(),c("div",ha,[a("div",null,[ao(a("img",null,null,512),[[z,e.currentIcon]]),a("div",Ca,[a("div",ya,u(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinName?(r(),c("div",wa,[Oe(u(e.coin.name)+" ",1),e.store.theme=="default"?(r(),c("span",Pa,u(e.coinLabels?`(${e.coinLabels})`:""),1)):C("",!0)])):C("",!0)])]),Ia])}const Sa=po(ba,[["render",$a],["__scopeId","data-v-d0bce36a"]]),Ta=vo({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})},showfromCoinLock:{type:Boolean,default:!1},showtoCoinLock:{type:Boolean,default:!1}},setup(){const e=co();return{storeIndex:D(()=>e)}}});const Na={class:"create-pool-lock"},Aa={key:0,src:Qt,alt:""},qa={key:1,src:Yt,alt:""};function La(e,n,_,F,B,Z){return r(),c("div",Na,[a("div",null,[e.storeIndex.theme=="default"?(r(),c("img",Aa)):(r(),c("img",qa))])])}const Ra=po(Ta,[["render",La],["__scopeId","data-v-5d070e17"]]),Ma=vo({props:{clickClear:{type:Boolean,default:!1},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},intPrice:{type:String,default:""}},setup(e,n){const _=g("");return{inpValue:_,changecurrentPrice:B=>{const Z=new RegExp("[^\\d-]*(\\d*(?:\\.\\d*)?).*$");B.target.value=B.target.value.replace(Z,"$1"),_.value=B.target.value,n.emit("changecurrentPrice",_.value)}}}});const Ua={class:"set-init-price"},Oa={class:"init-price-tips"};function _a(e,n,_,F,B,Z){var ne,W,H,X;const z=ct;return r(),c("div",Ua,[re(z,{type:"text",placeholder:"0.0",value:e.intPrice,disabled:!((W=(ne=e.$route)==null?void 0:ne.query)!=null&&W.fee),onChange:e.changecurrentPrice},null,8,["value","disabled","onChange"]),a("div",Oa,u((H=e.toCoin)==null?void 0:H.symbol)+" per "+u((X=e.fromCoin)==null?void 0:X.symbol),1)])}const Ba=po(Ma,[["render",_a],["__scopeId","data-v-9e71be9e"]]),Fa=-443636;function lt(e,n){const _=ja(e),F=(_-Fa)%n;return F>n/2?_-F+n:_-F}const Ct=new h("1.0001");function ja(e){return e.log(Ct).toDP(0,h.ROUND_HALF_UP).toNumber()}function st(e){return Ct.pow(e)}const Ea=vo({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},emits:["onInput"],setup(e,n){const _=g(""),F=g("");let B=g(""),Z=g("");const z=vt(),ne=co(),W=D(()=>ne),H=D(()=>W.value.chainName?Ln(W.value.chainName):{}),X=()=>{if(!(Number.isNaN(_.value)||Number(_.value)!==0&&!_.value||!e.poolInfo.tickSpacing))try{const m=lt(new h(_.value.toString()),Number($.value.tickSpacing)),j=st(m+Number($.value.tickSpacing));if(e.pType=="Min"&&Number(j.toString())>=Number(Z.value.toString()))return;const y=j.toString();n.emit("onInput",y)}catch{n.emit("onInput","")}},V=()=>{try{if(Number.isNaN(_.value)||!_.value||!e.poolInfo.tickSpacing)return;const m=lt(new h(_.value),Number($.value.tickSpacing)),j=st(m-Number($.value.tickSpacing)),y=j.toString();if(e.pType=="Max"&&Number(j)<=Number(B.value))return;n.emit("onInput",y)}catch{n.emit("onInput","")}},ee=m=>{let j=m.toString().replace(/[^\d.]/g,"");const y=/^\d+(\.\d+)?$/;j.split(".").length>2&&!y.exec(j)&&(j=j.substr(0,j.length-1)),F.value=String(j)},he=m=>{var J,we,Le,pe;const{TickUtil:j,TickMath:y,getNearestTickByTick:b}=H.value,i=m.target.value;let p;if(i==="0"){p=-443636,n.emit("onInput","0");return}else{const E=y.priceToTickIndex(new h(i),(J=$.value.token_a)==null?void 0:J.decimals,(we=$.value.token_b)==null?void 0:we.decimals);p=b(Number(E),Number($.value.tickSpacing))}const O=y.tickIndexToPrice(new h(p),(Le=$.value.token_a)==null?void 0:Le.decimals,(pe=$.value.token_b)==null?void 0:pe.decimals);n.emit("onInput",O.toString())};fe(()=>e.defaultMinPrice,(m,j)=>{m!==j&&(B.value=e.defaultMinPrice)},{immediate:!0}),fe(()=>e.defaultMaxPrice,(m,j)=>{m!==j&&(Z.value=e.defaultMaxPrice)},{immediate:!0}),fe(()=>F.value,m=>{},{immediate:!0}),fe(()=>[e.inputValue,z.query.action],([m])=>{if(m&&m!=="0"&&m!=="∞"){_.value=m;const y=m.toString().split(".")[1];F.value=m!=="0"&&m!=="∞"&&y&&y.length>6?Ae(m.toString(),6):m.toString()}else(m=="0"||m=="∞"||z.query.action)&&(F.value=m)},{immediate:!0});const $=g({});fe(()=>e.poolInfo,(m,j)=>{m&&($.value=m)},{immediate:!0});const _e=g("");return fe(()=>e.currentPriceTab,m=>{_e.value=m},{immediate:!0}),{addPrice:X,minusPrice:V,oValue:F,changeValue:ee,isDisabled:_e,route:z,onBlur:he}}});const Wa={class:"set-price-item"},Da={class:"title"},Ha={class:"input-box"},za={class:"minus-btn"},Xa=["disabled"],Va={class:"plus-btn"};function Ka(e,n,_,F,B,Z){const z=ct,ne=pt;return r(),c("div",Wa,[a("div",Da,u(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),re(ne,{loading:e.loading,active:"",paragraph:!1},{default:Ne(()=>[a("div",Ha,[a("a",za,[a("div",{class:me(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:n[0]||(n[0]=(...W)=>e.minusPrice&&e.minusPrice(...W))},null,10,Xa)]),re(z,{id:"pValu",value:e.oValue,"onUpdate:value":n[1]||(n[1]=W=>e.oValue=W),disabled:e.route.query.action&&!e.intPrice,autocomplete:"off",placeholder:"0",onChange:n[2]||(n[2]=W=>e.changeValue(W.target.value)),onBlur:n[3]||(n[3]=W=>e.onBlur(W))},null,8,["value","disabled"]),a("a",Va,[a("div",{class:me(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"addDis":"add"),onClick:n[4]||(n[4]=(...W)=>e.addPrice&&e.addPrice(...W))},null,2)])])]),_:1},8,["loading"]),a("p",{class:me(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},u(e.toCoin&&e.toCoin.symbol)+" per "+u(e.fromCoin&&e.fromCoin.symbol),3)])}const ut=po(Ea,[["render",Ka],["__scopeId","data-v-782725c6"]]),Za=vo({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},setup(e,n){let _=g(""),F=g(""),B=g(),Z=g(!1),z=g(!1);const ne=g({}),W=co(),H=D(()=>W);hn(()=>{_.value=e.min,F.value=e.max}),fe(()=>e.currentPriceTab,(m,j)=>{m!==j&&(B.value=e.currentPriceTab)},{immediate:!0}),fe(()=>e.min,(m,j)=>{m!==j&&(_.value=m)}),fe(()=>e.max,(m,j)=>{m!==j&&(F.value=m)}),fe(()=>e.poolInfo,(m,j)=>{m&&(ne.value=m)},{immediate:!0});const X=g("");fe(()=>e.intPrice,m=>{X.value=m},{immediate:!0,deep:!0});const V=m=>{_.value=m,n.emit("onChangeMinPrice",m)},ee=m=>{F.value=m,n.emit("onChangeMaxPrice",m)};fe(Z,(m,j)=>{m!==j&&n.emit("onChangeFullRange",m)});const he=()=>{_.value=e.defaultMinPrice,F.value=e.defaultMaxPrice,z.value=!1,Z.value=!1},$=()=>{z.value=!1,_.value="0",F.value="∞"};return fe(Z,(m,j)=>{m!==j&&n.emit("onChangeFullRange",m)}),{store:H,changeMinPrice:V,changeMaxPrice:ee,importIcon:He,resetPrice:he,changeShowUnderStand:()=>{Z.value=!Z.value,Z.value?z.value=!0:he(),z.value||(_.value=e.defaultMinPrice,F.value=e.defaultMaxPrice)},showUnderStand:z,minPrice:_,maxPrice:F,understand:$,isRadio:Z,initPirce:X}}});const Ga={class:"set-price"},Ja={class:"card-container"},Qa={key:0,class:"card"},Ya=["src"],xa={key:1,class:"understand"},ei={class:"left"},oi={class:"right"};function ni(e,n,_,F,B,Z){const z=ut,ne=ut,W=Mn;return r(),c("div",Ga,[a("div",Ja,[e.showUnderStand?(r(),c("div",xa,[a("div",ei,[a("p",null,u(e.$t("common.lowerEfficiency")),1),a("p",null,u(e.$t("common.lowerEfficiencyTips")),1)]),a("div",oi,[re(W,{onClick:e.understand},{default:Ne(()=>[Oe(u(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(r(),c("div",Qa,[re(z,{value:e.minPrice,"onUpdate:value":n[0]||(n[0]=H=>e.minPrice=H),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,"int-price":e.initPirce,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","int-price","onOnInput","onAddValue","onDelValue"]),re(ne,{value:e.maxPrice,"onUpdate:value":n[1]||(n[1]=H=>e.maxPrice=H),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"int-price":e.initPirce,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","int-price","current-price-tab","onOnInput","onAddValue","onDelValue"]),a("img",{src:("importIcon"in e?e.importIcon:ae(He))("/image/lmg-line@2x.png"),alt:""},null,8,Ya)]))])])}const ti=po(Za,[["render",ni],["__scopeId","data-v-d07618c3"]]);function dt(e,n,_){const F=new h(10).pow(n-_);return new h(1.0001).pow(e).mul(F)}const ai=vo({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""}},setup(e,n){const _=g(1),F=g(""),B=g(""),Z=D(()=>{var i,p,O;return V.sqrtPriceX64ToPrice((i=e.poolInfo)==null?void 0:i.current_sqrt_price,(p=e.poolInfo)==null?void 0:p.coinA.decimals,(O=e.poolInfo)==null?void 0:O.coinB.decimals).toString()}),z=D(()=>{let i=0;return e.direction?i=(Number(e.minPrice)/Number(Z.value)-1)*100:i=(Number(e.minPrice)/Number(1/Number(Z.value))-1)*100,i=i>0&&i<.1?.1:i,i=i<0&&i>-.1?-.1:i,i}),ne=D(()=>{let i=0;return e.direction?i=(Number(e.maxPrice)/Number(Z.value)-1)*100:i=(Number(e.maxPrice)/Number(1/Number(Z.value))-1)*100,i=i>0&&i<.1?.1:i,i=i<0&&i>-.1?-.1:i,i}),W=co(),H=D(()=>W),X=D(()=>H.value.chainName?Ln(H.value.chainName):{}),{TickMath:V,getNearestTickByTick:ee}=X.value,he=()=>{const i=_.value/2;_.value=i,m(e.poolInfo,i)},$=()=>{const i=_.value*2;_.value=i,m(e.poolInfo,i)},_e=(i=[])=>{let p=6;const O=Math.abs(Number(i[0])-Number(i[i.length-1]));return O>=6?p=0:O>=1?p=1:O>=.1?p=2:O>=.01?p=3:O>=.001?p=4:O>=1e-4?p=5:O>=1e-5?p=6:O>=1e-6?p=7:O>=1e-7&&(p=8),p},m=(i,p=1)=>{if(i&&i.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const O=Number(e.poolInfo.current_tick_index);let J=O+100*p,we=O-100*p,Le,pe;if(e.maxPrice==="∞")pe=X.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?pe=V.priceToTickIndex(new h(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):pe=V.priceToTickIndex(new h(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{pe=443636}if(e.minPrice==="0")Le=X.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?Le=V.priceToTickIndex(new h(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):Le=V.priceToTickIndex(new h(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{Le=-443636}let E=0;if(e.currentPriceTab!=="full range"){if(O>=Le&&O<=pe){const oe=O-Le,R=pe-O;E=Math.max(Math.abs(oe),Math.abs(R))}else O<Le?E=Math.abs(pe-O):E=Math.abs(O-Le);J=O+E+100*p,we=O-E-100*p}else{const oe=(Math.abs(O)>5e3,2e4);J=O+oe*p,we=O-oe*p}we<-443636&&(we=-443636),J>443636&&(J=443636);const le=new h(i.liquidity).div(Math.pow(10,8)).toString(),G=e.tickList,ie=[],De=[];let Q={};for(let oe=0;oe<G.length;oe++){if(Q=G[oe],Q.index<=O&&Q.index>=we){if(ie.length<1&&oe!==0){const R=G[oe-1];ie.unshift({...R,index:we})}ie.unshift(Q)}else if(Q.index>O&&Q.index<=J&&(De.push(Q),ie.length<1&&oe!==0)){const R=G[oe-1];ie.push({...R,index:we})}if(Q.index>J){const R=G[oe];if(De.push({...R,index:J}),ie.length<1&&oe!==0){const Io=G[oe-1];ie.push({...Io,index:we})}break}}let $e="0";for(let oe=ie.length-1;oe>=0;oe--)$e=new h($e).plus(new h(ie[oe].liquidityNet.toString()).div(Math.pow(10,8))).toString(),ie[oe].liquityAmount=$e;let ge=le;for(let oe=0;oe<De.length;oe++)ge=new h(ge).plus(new h(De[oe].liquidityNet.toString()).div(Math.pow(10,8))).toString(),De[oe].liquityAmount=ge;let Me=[];const ue=G&&G.length>0?{index:O,liquityAmount:Number(le)}:{index:O,liquityAmount:0};(ie.length>0||De.length>0)&&(Me=[...ie.reverse(),ue,...De],e.direction||(Me=Me.reverse()));const Ve=[];G.forEach(oe=>{Ve.push({...oe,liquidityGross:oe.liquidityGross.toString(),liquidityNet:oe.liquidityNet.toString()})}),y(Me,we,J,Le,pe,O)}};let j=g(!1);hn(()=>{document.body.clientWidth<750?j.value=!1:j.value=!0,window.onresize=()=>{document.body.clientWidth<750?j.value=!1:j.value=!0,m(e.poolInfo,_.value)}});const y=(i,p,O,J,we,Le)=>{let pe,E;e.direction?(pe=e.before7dContractPriceLowest&&Number(e.before7dContractPriceLowest)>0?V.priceToTickIndex(new h(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",E=e.before7dContractPriceHighest&&Number(e.before7dContractPriceHighest)>0?V.priceToTickIndex(new h(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(pe=e.before7dContractPriceLowest&&Number(e.before7dContractPriceLowest)>0?V.priceToTickIndex(new h(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",E=e.before7dContractPriceHighest&&Number(e.before7dContractPriceHighest)>0?V.priceToTickIndex(new h(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const le={top:30,right:35,bottom:20,left:55};let G,ie;j.value?(G=460-le.left-le.right,ie=205-le.top-le.bottom):(G=340-le.left-le.right,ie=205-le.top-le.bottom);const De=O-p,Q=parseInt(String(De/4));let $e=[p+Q/4,p+Q,p+2*Q,O-Q,O-Q/4];const ge=p,Me=O,ue=G/(Me-ge);e.currentPriceTab==="full range"&&($e=[p,p+2*Q,O]);const Ve=$e.map(M=>e.direction?dt(M,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new h(1).div(dt(M,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),oe=_e(Ve);bn("#chart").selectAll("*").remove();const R=bn("#chart").attr("width",G+le.left+le.right).attr("height",ie+le.top+le.bottom).append("g").attr("transform",`translate(${le.left},${le.right})`),Io=Vt(i,function(M){return Number(Math.abs(M.liquityAmount))})||0,N=Kt().range([0,ie]).domain([Io,0]);Zt().rangeRound([0,G]).padding(.1);const Ao=R.append("g").attr("id","barsBox").selectAll("rect").data(i).enter().append("rect");H.value.theme=="default"?Ao.attr("x",function(M,I){return I===0?0:e.direction?Math.abs(M.index-ge)*ue:Math.abs(Me-M.index)*ue}).attr("y",function(M,I){return e.direction?I===i.length-1?0:N(M.liquityAmount):I===i.length-1?0:N(i[I+1].liquityAmount)}).attr("width",function(M,I){return I===0&&i.length===1&&M.liquityAmount>0?G:(e.direction,I!==i.length-1?Math.abs(i[I+1].index-M.index)*ue:0)}).attr("height",function(M,I){return I===0&&i.length===1&&M.liquityAmount>0?ie:e.direction?I===i.length-1?0:ie-N(M.liquityAmount):I===i.length-1?0:ie-N(i[I+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):Ao.attr("x",function(M,I){return I===0?0:e.direction?Math.abs(M.index-ge)*ue:Math.abs(Me-M.index)*ue}).attr("y",function(M,I){return e.direction?I===i.length-1?0:N(Math.abs(M.liquityAmount)):I===i.length-1?0:N(Math.abs(i[I+1].liquityAmount))}).attr("width",function(M,I){return I===0&&i.length===1&&M.liquityAmount>0?G:(e.direction,I!==i.length-1?Math.abs(i[I+1].index-M.index)*ue:0)}).attr("height",function(M,I){if(I===0&&i.length===1&&M.liquityAmount>0)return ie;if(e.direction)return I===i.length-1?0:Number(M.liquityAmount)?ie-N(Math.abs(M.liquityAmount)):0;{if(I===i.length-1)return 0;const oo=ie-N(Math.abs(i[I+1].liquityAmount));return Number(i[I+1].liquityAmount)?oo:0}}).attr("fill","#407497").attr("class","bars").attr("stroke-width",1).attr("stroke","#407497");const qo=R.append("g");qo.append("line").attr("x1",0).attr("y1",155).attr("x2",G).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const $o=qo.append("g");let So=0;if(e.direction){for(let M=0;M<$e.length;M++){const I=Ae(Ve[M],oe)||"0";Ve.push(I);const oo=Math.abs($e[M]-ge)*ue;let Ue=0;for(let Ce=0;Ce<I.length;Ce++)I[Ce]==="1"?Ue+=4.02:I[Ce]==="."?Ue+=2.64:I[Ce]==="7"?Ue+=5.48:Ue+=6;$o.append("text").text(I).attr("x",oo-Ue/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}So=Math.abs(Le-ge)*ue}else{for(let M=$e.length-1;M>=0;M--){const I=Ae(Ve[M],oe)||0;Ve.push(I);const oo=Math.abs($e[M]-Me)*ue;let Ue=0;for(let Ce=0;Ce<I.length;Ce++)I[Ce]==="1"?Ue+=4.02:I[Ce]==="."?Ue+=2.64:I[Ce]==="7"?Ue+=5.48:Ue+=6;$o.append("text").text(I).attr("x",oo-Ue/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}So=Math.abs(Le-Me)*ue}(H.value.theme=="default"?R.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):R.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+So+", 0)");let eo,ze,go,bo;e.direction?(eo=J<ge?-100:parseInt(String(Math.abs(J-ge)*ue)),ze=we<ge?-100:parseInt(String(Math.abs(we-ge)*ue)),go=pe<ge?-100:Math.abs(pe-ge)*ue,bo=E<ge?-100:Math.abs(E-ge)*ue):(ze=J<ge?-100:Math.abs(Me-J)*ue,eo=we<ge?-100:Math.abs(Me-we)*ue,bo=pe<ge?-100:Math.abs(Me-pe)*ue,go=E<ge?-100:Math.abs(Me-E)*ue),e.minPrice==="0"&&(eo=0),e.maxPrice==="∞"&&(ze=G),j.value?F.value=G-eo+60+"px":F.value=G-eo+52+"px",B.value=ze+74+"px",pe&&go<G&&R.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+go+", 0)"),E&&bo<G&&R.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+bo+", 0)");const Je=R.append("g").attr("id","left-handle"),je=R.append("g").attr("id","right-handle");H.value.theme=="default"?(Je.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Je.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),Je.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),Je.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),je.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),je.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),je.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),je.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(Je.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Je.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),Je.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),Je.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),je.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),je.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),je.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),je.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),Je.attr("transform","translate("+eo+", 0)"),je.attr("transform","translate("+ze+", 0)");const Lo=Gt().extent([[0,0],[G,ie]]).handleSize(30).on("end",Eo);R.append("g").attr("class","brush").call(Lo).call(Lo.move,[eo,ze]);function Eo(M){if(!M.sourceEvent||!M.selection)return;Je.attr("transform","translate("+M.selection[0]+", 0)"),je.attr("transform","translate("+M.selection[1]+", 0)"),j.value?F.value=G-M.selection[0]+60+"px":F.value=G-M.selection[0]+52+"px",B.value=M.selection[1]+74+"px";let I,oo,Ue=0,Ce=0;e.direction?(Ue=ee(parseInt(String(M.selection[0]/ue+ge)),Number(e.poolInfo.tickSpacing)),I=V.tickIndexToPrice(Ue,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),Ce=ee(parseInt(String(M.selection[1]/ue+ge)),Number(e.poolInfo.tickSpacing)),oo=V.tickIndexToPrice(Ce,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()):(Ce=ee(Me-M.selection[0]/ue,Number(e.poolInfo.tickSpacing)),I=1/V.tickIndexToPrice(Ce,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),Ue=ee(Me-M.selection[1]/ue,Number(e.poolInfo.tickSpacing)),oo=1/V.tickIndexToPrice(Ue,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),n.emit("onChangeMinPrice",String(Ae(String(I),6))),n.emit("onChangeMaxPrice",String(Ae(String(oo),6)))}H.value.theme=="default"?bn(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):bn(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632")};g(""),fe(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab],([i,p,O,J])=>{i&&p&&O&&m(i,_.value)},{immediate:!0});const b=g(!0);return fe(()=>e.chartLoading,(i,p)=>{i!==p&&(b.value=i)},{immediate:!0,deep:!0}),{store:H,loading:b,zoomOut:he,zoomIn:$,rangeSizeLower:z,rangeSizeUpper:ne,rangeSizeLowerPosition:F,rangeSizeUpperPosition:B,decimalFormat:on,numberformat:An}}});const ii=e=>(Fo("data-v-beaf2b95"),e=e(),jo(),e),ri={class:"chart-box"},li={class:"chart"},si={class:"zoom"},ui=ii(()=>a("svg",{id:"chart"},null,-1));function di(e,n,_,F,B,Z){return r(),c("div",ri,[ao(a("div",li,[a("div",si,[a("div",{class:"amplification",onClick:n[0]||(n[0]=(...z)=>e.zoomOut&&e.zoomOut(...z))}),a("div",{class:"narrow",onClick:n[1]||(n[1]=(...z)=>e.zoomIn&&e.zoomIn(...z))})]),e.currentPriceTab!=="full range"?(r(),c("div",{key:0,class:"range-size range-size-lower",style:at({right:e.rangeSizeLowerPosition})},u(("numberformat"in e?e.numberformat:ae(An))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):C("",!0),e.currentPriceTab!=="full range"?(r(),c("div",{key:1,class:"range-size range-size-upper",style:at({left:e.rangeSizeUpperPosition})},u(("numberformat"in e?e.numberformat:ae(An))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):C("",!0),ui],512),[[Dt,!e.loading]])])}const ci=po(ai,[["render",di],["__scopeId","data-v-beaf2b95"]]),vi=vo({props:{poolInfo:{type:Object,default:()=>({})},aprRewardsParameter:{type:Number,default:30},label:{type:Boolean,default:!0}},setup(e,n){const _=g(""),F=g(""),B=g(""),Z=co(),z=D(()=>Z),ne=nn(),W=D(()=>ne),H=(b,i)=>b&&i?ia.plus(Tn(b),Tn(i)):b>0?b:0,X=b=>{let i=0;return b&&b.forEach(p=>{i+=Tn(String(p))}),String(i)},V=g([]),ee=g([]),he=g(""),$=g(""),_e=g(!0);fe(()=>[z.value.newTopPoolsObj,e.poolInfo,W.value.tokensObj,e.aprRewardsParameter],async([b,i,p])=>{var O;if(b&&i&&p){const J=b[i==null?void 0:i.poolAddress];if(J){_.value=J&&J.apr_7day&&J.apr_7day.replace("%","")||"0",$.value=X(J&&J.rewarder_apr),he.value=H(J&&J.apr_7day,J&&X(J.rewarder_apr)),F.value=Fe(J.tvl_in_usd,2),B.value=Fe(J.vol_in_usd_24h,2);const we=i&&e.poolInfo.rewarder_infos||[],Le=[];for(let E=0;E<we.length;E++){const le=we[E];if(p[le.coinAddress]){const G=p[le.coinAddress].decimals,ie=on(le.emissionsEveryDay/Math.pow(10,G),4),De=Number(ie)>0?Fe(ie):ie,Q=on(Number(ie)*((O=W.value.RATES[le.coinAddress])==null?void 0:O.price),4);Le.push({...le,logoUrl:p[le.coinAddress].logoURI,day:De,dayUSD:Q,symbol:p[le.coinAddress].symbol,rewarder_display:i&&i[`rewarder_display${E+1}`]?i[`rewarder_display${E+1}`]:!1})}}V.value=Le.filter(E=>E.rewarder_display);const pe=[];Le.forEach((E,le)=>{p[E.coinAddress]&&pe.push({...E,symbol:p[E.coinAddress].symbol,rewarderApr:J.rewarder_apr[le]&&J.rewarder_apr[le].replace("%","")})}),ee.value=pe.filter(E=>E.rewarder_display)}else _.value="0",F.value="--",B.value="--",he.value=="0";_e.value=!1}},{immediate:!0,deep:!0});const m=()=>{n.emit("reviseValue")},j=b=>{var i;return(b==null?void 0:b.logoURI)||(b==null?void 0:b.logo_url)||((i=W.value.tokensObj[b==null?void 0:b.address])==null?void 0:i.logo_url)||(z.value.theme==="default"?He("/image/coins/unknown.png"):He("/image/coins/sui-unknown.png"))};return{tokensWarningObj:D(()=>W.value.tokensWarningObj),rewarderInfo:V,rewarderArr:ee,rewardApr:he,rewardAprList:$,apr:_,liquidityTvl:F,vol24:B,addCommom:Fe,reviseValue:m,loading:_e,getCoinIcon:j,store:Z}}});const yn=e=>(Fo("data-v-5035ed5d"),e=e(),jo(),e),pi={key:0,class:"pool-info"},mi=yn(()=>a("use",{"xlink:href":"#icon-icon_on"},null,-1)),fi=[mi],gi={key:0,class:"info-block-container"},bi={class:"info-block"},ki={class:"coin-tips"},hi={class:"left"},Ci={alt:""},yi={class:"address"},wi=yn(()=>a("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Pi=[wi],Ii={class:"info-block"},$i={class:"coin-tips"},Si={class:"left"},Ti={alt:""},Ni={class:"address"},Ai=yn(()=>a("use",{"xlink:href":"#icon-icon-copy"},null,-1)),qi=[Ai],Li={class:"info-block"},Ri={class:"leabl"},Mi={class:"text"},Ui={class:"apr-hover-content"},Oi={class:"info-block"},_i={class:"leabl"},Bi={class:"text"},Fi={class:"info-block"},ji={class:"leabl"},Ei={class:"text"},Wi={class:"info-block"},Di={class:"leabl"},Hi={class:"text"},zi={key:1,class:"pool-rewards-info"},Xi={class:"rewards-list-all"},Vi=yn(()=>a("div",{class:"icon-sign"},null,-1)),Ki={alt:""},Zi={class:"rewards-value"};function Gi(e,n,_,F,B,Z){const z=ta,ne=aa,W=mt,H=Cn("image");return e.poolInfo?(r(),c("div",pi,[e.loading?(r(),se(W,{key:1})):(r(),c(No,{key:0},[a("div",{class:me(e.label?"pool-info-border pool-info-title":"pool-info-title")},[Oe(u(e.$t("newAdd.poolInfo"))+" ",1),(r(),c("svg",{class:me(e.label?"show-icon icon":"icon"),"aria-hidden":"true",onClick:n[0]||(n[0]=X=>e.reviseValue())},fi,2))],2),e.label?(r(),c("div",gi,[a("div",bi,[a("div",ki,[a("div",hi,[ao(a("img",Ci,null,512),[[H,e.getCoinIcon(e.poolInfo.needReverse?e.poolInfo.token_b:e.poolInfo.token_a)]]),a("div",yi,u(e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address),1),re(z,{address:e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address,"style-params":{width:"12px",height:"12px",left:"10px",bottom:"0px"}},null,8,["address"]),(r(),c("svg",{class:"icon","aria-hidden":"true",onClick:n[1]||(n[1]=X=>e.store.copy(e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address))},Pi))])])]),a("div",Ii,[a("div",$i,[a("div",Si,[ao(a("img",Ti,null,512),[[H,e.getCoinIcon(e.poolInfo.needReverse?e.poolInfo.token_a:e.poolInfo.token_b)]]),a("div",Ni,u(e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address),1),re(z,{address:e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address,"style-params":{width:"12px",height:"12px",left:"10px",bottom:"0px"}},null,8,["address"]),(r(),c("svg",{class:"icon","aria-hidden":"true",onClick:n[2]||(n[2]=X=>e.store.copy(e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address))},qi))])])]),a("div",Li,[a("div",Ri,u(e.$t("common.apr")),1),a("div",Mi,[Oe(u(e.poolInfo.is_display_rewarder?e.rewardApr>0&&e.rewardApr<.01?"<0.01":("addCommom"in e?e.addCommom:ae(Fe))(e.rewardApr,2):e.apr>0&&e.apr<.01?"<0.01":("addCommom"in e?e.addCommom:ae(Fe))(e.apr,2))+"% ",1),a("div",Ui,[re(ne,{"l-item":{apr:e.apr,aprTotal:e.rewardApr,rewarder_apr:e.rewardAprList,is_display_rewarder:e.poolInfo.is_display_rewarder},"rewarder-info":e.rewarderArr},null,8,["l-item","rewarder-info"])])])]),a("div",Oi,[a("div",_i,u(e.$t("common.liquidity")),1),a("div",Bi,"$"+u(e.liquidityTvl),1)]),a("div",Fi,[a("div",ji,u(e.$t("common.volume24h")),1),a("div",Ei,"$"+u(e.vol24),1)]),a("div",Wi,[a("div",Di,u(e.$t("newAdd.tickSpacing")),1),a("div",Hi,u(e.poolInfo&&e.poolInfo.tick_spacing),1)])])):C("",!0),e.poolInfo.is_display_rewarder&&e.label&&e.rewarderInfo&&e.rewarderInfo.length>0?(r(),c("div",zi,[Oe(u("Farming Rewards")+" "),a("div",Xi,[(r(!0),c(No,null,en(e.rewarderInfo,X=>(r(),c("div",{key:X,class:me(["rewards-list",X.day==0?"rewards-none":""])},[Vi,ao(a("img",Ki,null,512),[[H,X.logoUrl]]),a("div",Zi,[a("p",null,u(X.day)+" "+u(X.symbol)+" / "+u(e.$t("newAdd.day"))+" ",1)])],2))),128))])])):C("",!0)],64))])):C("",!0)}const Ji=po(vi,[["render",Gi],["__scopeId","data-v-5035ed5d"]]),Qi=vo({components:{Modal:ft},props:{poolInfo:{type:Object,required:!0}},setup(e){const n=g({}),_=co(),F=D(()=>_),B=D(()=>F.value.chainName),Z=D(()=>kn[B.value]);let z=g(!0);const ne=nn(),W=D(()=>ne),H=Rn(),X=D(()=>e.poolInfo.needReverse);return fe(()=>W.value.currentPositionInfo,ee=>{ee&&(n.value=ee)},{immediate:!0}),{getExplorerUrl:qn,addCommom:Fe,router:H,pools:W,positionInfo:n,decimalFormat:on,rateChange:z,config:Z,importIcon:He,store:F,chainName:B,checkNullObj:fo,needReverse:X,getCoinIcon:ee=>{var he;return(ee==null?void 0:ee.logoURI)||(ee==null?void 0:ee.logo_url)||((he=W.value.tokensObj[ee==null?void 0:ee.address])==null?void 0:he.logo_url)||(F.value.theme==="default"?He("/image/coins/unknown.png"):He("/image/coins/sui-unknown.png"))},decimalUi:Ae}}});const wn=e=>(Fo("data-v-a2edb48c"),e=e(),jo(),e),Yi=wn(()=>a("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),xi={class:"rejected-container"},er={class:"coin-pair"},or=wn(()=>a("use",{"xlink:href":"#icon-icon-copy"},null,-1)),nr=[or],tr=["href"],ar=wn(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-jump"})],-1)),ir=[ar],rr={class:"coin-pair"},lr={class:"fee"},sr={class:"status"},ur={class:"min-and-max"},dr={key:0},cr={class:"text"},vr={key:0,src:bt,alt:""},pr={key:1,src:kt,alt:""},mr={class:"text"},fr={key:1},gr={class:"text"},br={key:0,src:bt,alt:""},kr={key:1,src:kt,alt:""},hr={class:"text"},Cr=wn(()=>a("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),yr=[Cr];function wr(e,n,_,F,B,Z){const z=pt,ne=la,W=Mn,H=gt("Modal"),X=Cn("image");return r(),se(H,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:n[3]||(n[3]=V=>e.$emit("onClose"))},{closeIcon:Ne(()=>[Yi]),default:Ne(()=>[a("div",xi,[re(z,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ne(()=>[a("div",er,[Oe(u(e.positionInfo.tokenName)+" ",1),(r(),c("svg",{class:"icon","aria-hidden":"true",onClick:n[0]||(n[0]=V=>e.store.copy(e.positionInfo.nftHash))},nr)),a("a",{href:e.chainName==="Aptos"?("getExplorerUrl"in e?e.getExplorerUrl:ae(qn))("nftAddress",e.positionInfo.nftHash):("getExplorerUrl"in e?e.getExplorerUrl:ae(qn))("nftAddress",e.positionInfo.pos_object_id),target:"_blank"},ir,8,tr)])]),_:1},8,["loading"]),a("div",{class:me(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[re(z,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ne(()=>{var V,ee,he,$,_e,m,j,y,b,i,p,O;return[a("div",rr,[a("div",null,[ao(a("img",null,null,512),[[X,e.getCoinIcon(e.needReverse?(ee=e.positionInfo)==null?void 0:ee.token_b:(V=e.positionInfo)==null?void 0:V.token_a)]]),ao(a("img",null,null,512),[[X,e.getCoinIcon(e.needReverse?($=e.positionInfo)==null?void 0:$.token_a:(he=e.positionInfo)==null?void 0:he.token_b)]])]),a("span",null,u(e.needReverse?(y=(j=e.positionInfo)==null?void 0:j.token_b)==null?void 0:y.symbol:(m=(_e=e.positionInfo)==null?void 0:_e.token_a)==null?void 0:m.symbol)+" - "+u(e.needReverse?(O=(p=e.positionInfo)==null?void 0:p.token_a)==null?void 0:O.symbol:(i=(b=e.positionInfo)==null?void 0:b.token_b)==null?void 0:i.symbol),1)]),a("div",lr,u(e.$t("common.fee"))+" "+u(e.positionInfo.fee*100)+"%",1)]}),_:1},8,["loading"])],2),a("div",sr,[re(ne,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),re(z,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ne(()=>{var V,ee,he,$,_e,m,j,y;return[a("div",ur,[(e.needReverse?!e.rateChange:e.rateChange)?(r(),c("div",dr,[a("div",cr,u(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(String(e.positionInfo&&e.positionInfo.minPrice),6))),1),e.store.theme=="default"?(r(),c("img",vr)):(r(),c("img",pr)),a("div",mr,u(e.positionInfo&&e.positionInfo.maxPrice.indexOf("∞")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(String(e.positionInfo&&e.positionInfo.maxPrice),6)))+" "+u((ee=(V=e.positionInfo)==null?void 0:V.token_b)==null?void 0:ee.symbol)+" per "+u(($=(he=e.positionInfo)==null?void 0:he.token_a)==null?void 0:$.symbol),1)])):(r(),c("div",fr,[a("div",gr,u(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(String(1/Number(e.positionInfo&&e.positionInfo.maxPrice)),6))),1),e.store.theme=="default"?(r(),c("img",br)):(r(),c("img",kr)),a("div",hr,u(e.positionInfo&&e.positionInfo.maxPrice.indexOf("∞")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(String(1/Number(e.positionInfo&&e.positionInfo.minPrice)),6)))+" "+u((m=(_e=e.positionInfo)==null?void 0:_e.token_a)==null?void 0:m.symbol)+" per "+u((y=(j=e.positionInfo)==null?void 0:j.token_b)==null?void 0:y.symbol),1)])),(r(),c("svg",{class:"icon-change","aria-hidden":"true",onClick:n[1]||(n[1]=b=>e.rateChange=!e.rateChange)},yr))])]}),_:1},8,["loading"])]),re(W,{disabled:("checkNullObj"in e?e.checkNullObj:ae(fo))(e.positionInfo),onClick:n[2]||(n[2]=V=>e.router.push(`/new-position-detail?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}&pos=${e.positionInfo.pos_object_id}`))},{default:Ne(()=>[Oe(u(e.$t("newAdd.viewDetail")),1)]),_:1},8,["disabled"])]),_:1},8,["title"])}const Pr=po(Qi,[["render",wr],["__scopeId","data-v-a2edb48c"]]),Ir=vo({components:{Modal:ft},setup(){const e=co(),n=D(()=>e);return{importIcon:He,store:n}}}),$r=""+new URL("img-Creat-success_2x.b6f0a395.png",import.meta.url).href,Sr=""+new URL("img-Creat-success.9734ad6f.png",import.meta.url).href;const Tr=e=>(Fo("data-v-d7a9ceb3"),e=e(),jo(),e),Nr=Tr(()=>a("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ar={class:"create-success-container"},qr={key:0,src:$r,alt:""},Lr={key:1,src:Sr,alt:""},Rr={class:"waiting-title"};function Mr(e,n,_,F,B,Z){const z=gt("Modal");return r(),se(z,{visible:!0,class:"",centered:"",title:"",width:"400px",footer:null,onCancel:n[0]||(n[0]=ne=>e.$emit("onClose"))},{closeIcon:Ne(()=>[Nr]),default:Ne(()=>[a("div",Ar,[e.store.theme=="default"?(r(),c("img",qr)):(r(),c("img",Lr)),a("p",Rr,u(e.$t("newAdd.createPoolSuccessText")),1)])]),_:1})}const Ur=po(Ir,[["render",Mr],["__scopeId","data-v-d7a9ceb3"]]),Or={1e-4:2,5e-4:10,.002:60,.006:200},_r={1e-4:2,5e-4:10,.0025:60,.01:200},Br=vo({setup(){let e=g(!1);const{t:n,locale:_}=Ht(),F=Et(),B=D(()=>F),Z=co(),z=g(0),ne=g(!1),W=g(!1),H=g(!1),X=g("fromCoin"),V=g(""),ee=g(""),he=g(!1),$=g(!0),_e=g(!1),m=g(!0),j=g(!1),y=g(""),b=g(""),i=g(""),p=g(""),O=g(""),J=g(""),we=g(!1),Le=g(!1),pe=g(!1),E=g(""),le=g(0),G=g(!0),ie=g(!1),De=g([]),Q=g(""),$e=g(30),ge=g("30D"),Me=g("Estimated APR"),ue=g([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),Ve=g(!0),oe=co(),R=D(()=>oe),Io=D(()=>{var o;return!!((o=v==null?void 0:v.query)!=null&&o.action&&(!l.value||!s.value||!E.value))}),N=D(()=>R.value.chainName?Ln(R.value.chainName):{}),ro=D(()=>{var o;return(o=R.value)==null?void 0:o.filterCreatePoolCoin}),Ao=o=>{Ye.updateCurrentPools(A.value.poolAddress,R.value.chainName),ge.value=o.time,$e.value=o.num},qo=()=>{Ve.value=!Ve.value},$o=g([]),So=()=>{z.value=0,v.query.action!=="create-pool"&&v.query.actions!=="new-position"&&(Qo(),uo(),Ye.updateCurrentPools(A.value.poolAddress,R.value.chainName)),Ye.setPoolConfigList(gn.value,R.value.filterCoinsObj)},Ko=D(()=>Number(i.value)>0&&Number(p.value)>0&&Number(i.value)>Number(p.value)),eo=o=>{_e.value=o,i.value="0",p.value="∞"},ze=D(()=>{if(q.value.poolConfigList&&l.value&&s.value){const o=q.value.poolConfigList.filter(d=>{var k,P,w,T;return d.token_a.address.toUpperCase()===((k=l.value.address)==null?void 0:k.toUpperCase())&&d.token_b.address.toUpperCase()===((P=s.value.address)==null?void 0:P.toUpperCase())||d.token_b.address.toUpperCase()===((w=l.value.address)==null?void 0:w.toUpperCase())&&d.token_a.address.toUpperCase()===((T=s.value.address)==null?void 0:T.toUpperCase())}),t=[];return o.forEach(d=>{t.push(Number(d.fee))}),t}else return[]}),go=o=>{const t={};let d=new h(0);o.forEach(U=>{d=d.add(new h(U.object.liquidity))});const k=[];let P=new h(0);o.forEach(U=>{const L=new h(U.object.liquidity),K=L.gt(0)?new h(L).div(d).mul(100).toString():0,Y=xo(K,2);P=P.plus(Y);const x=Y.split(".");k.push({value:Y,int:x[0],decimal:x[1],fee:U.fee})});let w=new h(100).minus(P).toNumber();const T=k.sort((U,L)=>Number(L.decimal)-Number(U.decimal));if(w)for(let U=0;U<T.length&&w;U++)T[U].value=new h(T[U].value).plus(.01).toString(),w=new h(w).minus(.01).toNumber();return o.forEach(U=>{var K;const L=(K=T.find(Y=>U.fee===Y.fee))==null?void 0:K.value;t[U.fee]={rateText:(L>0&&L<.01?"<0.01":L==0?0:xo(L,2))+"% select",rate:L}}),t},bo=D(()=>{if(q.value.poolConfigList&&l.value&&s.value){const o=q.value.poolConfigList.filter(d=>{var w,T,U,L;const k=d.coin_a_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":d.coin_a_address,P=d.coin_b_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":d.coin_b_address;return k.toUpperCase()===((w=l.value.address)==null?void 0:w.toUpperCase())&&P.toUpperCase()===((T=s.value.address)==null?void 0:T.toUpperCase())||P.toUpperCase()===((U=l.value.address)==null?void 0:U.toUpperCase())&&k.toUpperCase()===((L=s.value.address)==null?void 0:L.toUpperCase())});return go(o)}}),Je=D(()=>[{label:.01+"% "+n("common.feeTier"),title:.01+"% ",fee:1e-4,text:n("newAdd.bestVeryStablePairs")},{label:.05+"% "+n("common.feeTier"),title:.05+"% ",fee:5e-4,text:n("newAdd.bestStablePairs")},R.value.chainName=="Aptos"?{label:.2+"% "+n("common.feeTier"),title:.2+"% ",fee:.002,text:n("newAdd.bestMostPairs")}:{label:.25+"% "+n("common.feeTier"),title:.25+"% ",fee:.0025,text:n("newAdd.bestMostPairs")},R.value.chainName=="Aptos"?{label:.6+"% "+n("common.feeTier"),title:.6+"% ",fee:.006,text:n("newAdd.besteExoticPairs")}:{label:"1% "+n("common.feeTier"),title:"1% ",fee:.01,text:n("newAdd.besteExoticPairs")}]),je=D(()=>Z.slippage),Lo=D(()=>!l.value||!s.value),Eo=D(()=>{var o,t;return!!(!y.value&&!b.value||Number(y.value)>Number(Ke.value)||Number(b.value)>Number(Ze.value)||M.value!==n("button.addLiquidity")&&M.value!==n("newAdd.preview")||A.value&&A.value&&A.value.is_pause||(o=v==null?void 0:v.query)!=null&&o.action&&!S.value&&!((t=S.value)!=null&&t.currentPrice)||Number(y.value)<=0&&Number(b.value)<=0||!be.value&&Number(y.value)==0||!ke.value&&Number(b.value)==0||pe.value)}),M=D(()=>{var o,t;return A.value&&A.value.is_pause?"Pool Closed":!l.value||!s.value?n("modal.selectTokenModalTitle"):gn.value=="Sui"&&!ze.value.includes(1e-4)&&!ze.value.includes(5e-4)&&!ze.value.includes(.0025)&&!ze.value.includes(.01)&&!ro.value[l==null?void 0:l.value.address]&&!ro.value[(o=s.value)==null?void 0:o.address]?"Invalid Pool":(v.query.action||v.query.actions)&&!E.value&&kn[R.value.chainName].hasCreatePool?"Select fee tier":Lo.value?n("modal.selectTokenModalTitle"):!kn[R.value.chainName].hasCreatePool&&!A.value?n("button.poolNotFound"):Number(y.value)>Number(Ke.value)?n("button.insufficientBalance",{name:l.value.symbol}):Number(b.value)>Number(Ze.value)?n("button.insufficientBalance",{name:s.value.symbol}):j.value?n("modal.selectTokenModalTitle"):!A.value&&l.value&&s.value&&((t=v==null?void 0:v.query)==null?void 0:t.action)=="create-pool"?n("newAdd.preview"):!Number(y.value)&&!Number(b.value)?n("button.enterAmount"):p.value!=="∞"&&Number(i.value)>=Number(p.value)?n("newAdd.invalidRange"):n("button.addLiquidity")}),I=D(()=>{var o,t,d;return!A.value||fo(R.value.addressHistTokens)||!R.value.addressHistTokens[(o=A.value)==null?void 0:o.poolAddress]?null:Object.fromEntries((d=R.value.addressHistTokens[(t=A.value)==null?void 0:t.poolAddress])==null?void 0:d.data.map(k=>[k.key,k.value]))}),oo=D(()=>$.value?I.value&&Ae($e.value==7?I.value.before_7_d_contract_price_lowest:$e.value==24?I.value.before_24_h_contract_price_lowest:I.value.before_30_d_contract_price_lowest,6)||0:I.value&&Ae(new h(1).div($e.value==7?I.value.before_7_d_contract_price_highest:$e.value==24?I.value.before_24_h_contract_price_highest:I.value.before_30_d_contract_price_highest).toString(),6)||0),Ue=D(()=>$.value?I.value&&Ae($e.value==7?I.value.before_7_d_contract_price_highest:$e.value==24?I.value.before_24_h_contract_price_highest:I.value.before_30_d_contract_price_highest,6)||0:(I.value&&Ae(1/Number($e.value==7?I.value.before_7_d_contract_price_lowest:$e.value==24?I.value.before_24_h_contract_price_lowest:I.value.before_30_d_contract_price_lowest),6))==1/0?0:I.value&&Ae(1/Number($e.value==7?I.value.before_7_d_contract_price_lowest:$e.value==24?I.value.before_24_h_contract_price_lowest:I.value.before_30_d_contract_price_lowest),6)||0),Ce=Rn(),l=g(),s=g();hn(()=>{document.body.clientWidth<750?(Ve.value=!1,e.value=!1):(Ve.value=!0,e.value=!0)});const tn=o=>{var t,d;if((t=A.value)==null||t.token_a.decimals,(d=A.value)==null||d.token_b.decimals,v.query.action&&_o.value&&o!==i.value){$n();return}o!==i.value&&Q.value=="full range"?vn({key:"custom",...to.value.custom}):(Q.value!=="full range"&&Q.value!=="custom"&&(Q.value="custom"),i.value=o)},an=o=>{if(v.query.action&&_o.value&&o!==p.value){$n();return}o!==p.value&&Q.value=="full range"?vn({key:"custom",...to.value.custom}):(Q.value!=="full range"&&Q.value!=="custom"&&(Q.value="custom"),p.value=o)},rn=()=>{var t;if(v.query.action)$.value=!$.value,S.value&&fn(Ae(new h(1).div(S.value.currentPrice).toString(),(t=s==null?void 0:s.value)==null?void 0:t.decimals));else if(G.value=!0,G.value=!1,$.value=!$.value,i.value!==""&&p.value!==""&&i.value!=="0"&&p.value!=="∞"){const d=i.value,k=p.value;i.value=new h(1).div(k).toString(),p.value=new h(1).div(d).toString();const P=O.value,w=J.value;O.value=new h(1).div(w).toString(),J.value=new h(1).div(P).toString(),ie.value=!1}const o=l.value;l.value=s.value,s.value=o,m.value?y.value=b.value:b.value=y.value};fe([i,p],([o,t])=>{Number(o)!==0&&Number(t)!==0&&uo(),t!=="∞"&&Number(o)!==0&&Number(t)!==0&&Number(o)>=Number(t)?pe.value=!0:pe.value=!1,Number(o)==0&&Number(t)==0&&Ee.value&&(pe.value=!0)});const Ro=g(!1),Mo=g(!1),ln=o=>{var t,d,k,P,w,T,U,L,K;X.value=o,o==="fromCoin"?(V.value=((t=s.value)==null?void 0:t.address)||"",ee.value=v.query.action=="create-pool"||v.query.actions=="new-position"||!A.value?(d=l.value)==null?void 0:d.address:A.value.needReverse?A.value.token_b.address:A.value.token_a.address,((k=v==null?void 0:v.query)==null?void 0:k.action)=="create-pool"&&((P=v==null?void 0:v.query)==null?void 0:P.from)==="pool"?Mo.value=!0:Mo.value=!1,Ro.value=!1):(V.value=((w=l.value)==null?void 0:w.address)||"",ee.value=v.query.action=="create-pool"||v.query.actions=="new-position"||!A.value?(T=s.value)==null?void 0:T.address:A.value.needReverse?A.value.token_a.address:A.value.token_b.address,((U=v==null?void 0:v.query)==null?void 0:U.action)=="create-pool"&&((L=v==null?void 0:v.query)==null?void 0:L.from)==="pool"&&!ro[(K=l.value)==null?void 0:K.address]?Ro.value=!0:Ro.value=!1,Mo.value=!1),he.value=!0},Se=g(null),Te=g(null),Zo=g({}),Go=g({}),sn=o=>{var k,P,w,T;j.value=!1;const t=A.value?A.value.needReverse?A.value.token_b:A.value.token_a:Se.value,d=A.value?A.value.needReverse?A.value.token_a:A.value.token_b:Te.value;X.value==="fromCoin"?(((k=l.value)==null?void 0:k.address)===(t==null?void 0:t.address)||!((P=l.value)!=null&&P.address)?(s.value&&o.address.toLowerCase()===(s==null?void 0:s.value.address.toLowerCase())&&(s.value=null,Te.value=null,E.value=""),l.value=o):(l.value&&o.address.toLowerCase()===(l==null?void 0:l.value.address.toLowerCase())&&(l.value=null,Se.value=null,E.value=""),s.value=o),Se.value=o,v.query.action||(v.query.fee="")):(((w=s.value)==null?void 0:w.address)===(d==null?void 0:d.address)||!((T=s.value)!=null&&T.address)?(l.value&&o.address.toLowerCase()===(l==null?void 0:l.value.address.toLowerCase())&&(l.value=null,Se.value=null,E.value=""),s.value=o):(s.value&&o.address.toLowerCase()===(s==null?void 0:s.value.address.toLowerCase())&&(s.value=null,Te.value=null,E.value=""),l.value=o),Te.value=o,v.query.action||(v.query.fee="")),fn(""),he.value=!1},un=o=>{o==="fromCoin"?(m.value=!0,R.value.chainName==="Aptos"?y.value=Number(Ke.value)>0?l.value.symbol=="APT"?new h(Number(Ke.value)).sub(new h(.1)).lt(new h(0))?"0":new h(Number(Ke.value)).sub(new h(.1)).toString():String(Ke.value):"":y.value=Number(Ke.value)>0?l.value.symbol=="SUI"?new h(Number(Ke.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(Ke.value)).sub(new h(.05)).toString():String(Ke.value):""):(m.value=!1,R.value.chainName==="Aptos"?b.value=Number(Ze.value)>0?s.value.symbol=="APT"?new h(Number(Ze.value)).sub(new h(.1)).lt(new h(0))?"0":new h(Number(Ze.value)).sub(new h(.1)).toString():String(Ze.value):"":b.value=Number(Ze.value)>0?s.value.symbol=="SUI"?new h(Number(Ze.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(Ze.value)).sub(new h(.05)).toString():String(Ze.value):"")},dn=o=>{o==="fromCoin"?(m.value=!0,y.value=Number(Ke.value)>0?xo(new h(Number(Ke.value)).div(2).toString(),l.value.decimals).toString():""):(m.value=!1,b.value=Number(Ze.value)>0?xo(new h(Number(Ze.value)).div(2).toString(),s.value.decimals).toString():"")};fe(y,(o,t)=>{o==""&&m.value&&(b.value=""),o&&m.value&&uo()}),fe(b,(o,t)=>{o==""&&!m.value&&(y.value=""),o&&!m.value&&uo()});const cn=()=>{l.value=null,s.value=null,i.value="0",p.value="0",y.value="",b.value="",j.value=!0,E.value="",we.value=!1,be.value=!0,ke.value=!0,G.value=!1},lo=g(!1),{setIsShowSuccess:ko,setIsShowRejected:ho,setIsShowWaiting:Qe,setTransactionDesc:Wo,setTransactionTxid:Co,setPositiomNum:Do}=Z,v=vt(),Ye=nn(),To=D(()=>kn[R.value.chainName].hasCreatePool);fe(()=>[E.value,v.query.action,l.value,s.value,v.query.actions,To.value],([o,t,d,k,P,w])=>{!o&&(t=="create-pool"||P=="new-position")&&d&&k&&w?(we.value=!0,G.value=!1):(!d||!k)&&(we.value=!1)},{immediate:!0});const q=D(()=>Ye);fe(()=>q.value.tokens,async o=>{if(o&&o.length>0){const t=o;if(v&&v.query&&v.query.tokena&&v.query.tokena){const d=await N.value.getTokenBySymbol(t,v.query.tokena);l.value=d,Se.value=d}if(v&&v.query&&v.query.tokenb&&v.query.tokenb){const d=await N.value.getTokenBySymbol(t,v.query.tokenb);s.value=d,Te.value=d}}},{immediate:!0});const yo=g({}),be=g(!1),ke=g(!1),Ho=g(),zo=g(),Ee=g(),so=g(),uo=async()=>{var Re,ve,xe,Be,ye,We;if(!i.value&&!p.value)return!1;if(!y.value&&!b.value&&!i.value&&!p.value)return;const o=A.value?A.value:S.value;if(fo(o))return;const{TickUtil:t,TickMath:d,getNearestTickByTick:k}=N.value,P=o==null?void 0:o.token_a.decimals,w=o==null?void 0:o.token_b.decimals;let T,U,L,K,Y,x,de,Pe,ce=o.current_tick_index,te;if(o.token_a.address.toLowerCase()===l.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===s.value.address.toLowerCase()?te=!0:te=!1,i.value==="0"&&p.value==="∞")L=t.getMinIndex(Number(o.tickSpacing)),K=t.getMaxIndex(Number(o.tickSpacing)),Y=d.tickIndexToSqrtPriceX64(L),x=d.tickIndexToSqrtPriceX64(K);else if(Q.value=="custom"||v.query.action){te?(T=Number(i.value),U=Number(p.value)):(T=new h(1).div(p.value).toString(),U=new h(1).div(i.value).toString());try{de=T==0?-443636:d.priceToTickIndex(new h(T),P,w)}catch{de=-443636}try{Pe=d.priceToTickIndex(new h(U),P,w)}catch{Pe=443636}L=k(de,Number(o.tickSpacing)),K=k(Pe,Number(o.tickSpacing)),Y=d.priceToSqrtPriceX64(new h(T),P,w);try{x=d.priceToSqrtPriceX64(new h(U),P,w)}catch{U===1/0&&(x=d.tickIndexToSqrtPriceX64(t.getMaxIndex(Number(o.tickSpacing))))}}else L=(Re=to.value[Q.value])==null?void 0:Re.lower,K=(ve=to.value[Q.value])==null?void 0:ve.upper,Y=d.tickIndexToSqrtPriceX64(L),x=d.tickIndexToSqrtPriceX64(K);if(p.value!=="∞"&&L>=K){be.value=!0,y.value="",ke.value=!0,b.value="";return}if(p.value==="∞"||ce>=L&&ce<=K){be.value=!1,ke.value=!1;let qe;if(y.value||b.value){if(m.value){const wo=new h(y.value).mul(Math.pow(10,l.value.decimals)).toString();qe=new Po(wo)}else{const wo=new h(b.value).mul(Math.pow(10,s.value.decimals)).toString();qe=new Po(wo)}const{liquidityAmount:Ie,tokenMaxA:no,tokenMaxB:Ge,tokenMaxAOrigin:Xe,tokenMaxBOrigin:mo}=N.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:o.token_a,tokenB:o.token_b,lowerTick:L,upperTick:K,coinAmount:qe,iscoinA:te?m.value:!m.value,roundUp:!0,slippage:Number(je.value)/100,curSqrtPrice:new Po(o.current_sqrt_price)});yo.value={liquidityAmount:Ie,tokenMaxA:no,tokenMaxB:Ge,tokenMaxAOrigin:Xe,tokenMaxBOrigin:mo},te?m.value?b.value=Number(Ge)>0?Ge:"":y.value=Number(no)>0?no:"":m.value?b.value=no:y.value=Ge}}else if(ce>K){if(te?y.value="":b.value="",be.value=te,ke.value=!te,(xe=v==null?void 0:v.query)!=null&&xe.action&&(be.value=!0,ke.value=!0),y.value||b.value){let qe;if(te){const Ie=new h(b.value).mul(Math.pow(10,(Be=s.value)==null?void 0:Be.decimals)).toString();qe=new Po(Ie),yo.value={liquidityAmount:N.value.estimateLiquidityForCoinB(Y,x,qe),tokenMaxA:0,tokenMaxB:b.value}}else{const Ie=new h(y.value).mul(Math.pow(10,(ye=l.value)==null?void 0:ye.decimals)).toString();qe=new Po(Ie),yo.value={liquidityAmount:N.value.estimateLiquidityForCoinB(Y,x,qe),tokenMaxA:0,tokenMaxB:y.value}}}}else if(ce<L){if(be.value=!te,ke.value=te,(We=v==null?void 0:v.query)!=null&&We.action&&(be.value=!0,ke.value=!0),te?b.value="":y.value="",y.value||b.value){let qe;if(te){const Ie=new h(y.value).mul(Math.pow(10,l.value.decimals)).toString();qe=new Po(Ie),yo.value={liquidityAmount:N.value.estimateLiquidityForCoinA(Y,x,qe),tokenMaxA:y.value,tokenMaxB:0}}else{const Ie=new h(b.value).mul(Math.pow(10,s.value.decimals)).toString();qe=new Po(Ie),yo.value={liquidityAmount:N.value.estimateLiquidityForCoinA(Y,x,qe),tokenMaxA:b.value,tokenMaxB:0}}}}else be.value=!0,y.value="",ke.value=!0,b.value=""},Uo=g(0);fe(()=>{var o;return(o=v.query)==null?void 0:o.fee},o=>{o&&(Uo.value=o,E.value=Number(o)*100+"% "+n("common.feeTier"))},{immediate:!0,deep:!0});const Jo=D(()=>{var P,w,T;const o=(P=v==null?void 0:v.query)==null?void 0:P.fee,t=(w=v==null?void 0:v.query)==null?void 0:w.tokena,d=(T=v==null?void 0:v.query)==null?void 0:T.tokenb;let k=null;for(let U=0;U<q.value.poolConfigList.length;U++){const L=q.value.poolConfigList[U];!t||!d?k={}:(L.token_a.address.toUpperCase()===(t==null?void 0:t.toUpperCase())&&L.token_b.address.toUpperCase()===(d==null?void 0:d.toUpperCase())||L.token_b.address.toUpperCase()===(t==null?void 0:t.toUpperCase())&&L.token_a.address.toUpperCase()===(d==null?void 0:d.toUpperCase()))&&(k=L)}return k}),A=D(()=>{var t,d,k,P,w,T,U,L,K,Y,x,de,Pe;const o=(t=v==null?void 0:v.query)==null?void 0:t.fee;if(l.value&&s.value){let ce=null;if(o)for(const Re in q.value.poolsObj){const ve=q.value.poolsObj[Re];(ve.token_a.address.toUpperCase()===((k=(d=l==null?void 0:l.value)==null?void 0:d.address)==null?void 0:k.toUpperCase())&&ve.token_b.address.toUpperCase()===((w=(P=s==null?void 0:s.value)==null?void 0:P.address)==null?void 0:w.toUpperCase())&&Number(ve.fee)==Number(Uo.value)||ve.token_b.address.toUpperCase()===((T=l==null?void 0:l.value.address)==null?void 0:T.toUpperCase())&&ve.token_a.address.toUpperCase()===((L=(U=s==null?void 0:s.value)==null?void 0:U.address)==null?void 0:L.toUpperCase())&&Number(ve.fee)==Number(Uo.value))&&(ce=ve)}const te=[];if(!((K=v==null?void 0:v.query)!=null&&K.action)&&(!o||!ce)){for(const Re in q.value.poolsObj){const ve=q.value.poolsObj[Re];(ve.token_a.address.toUpperCase()===((Y=l==null?void 0:l.value.address)==null?void 0:Y.toUpperCase())&&ve.token_b.address.toUpperCase()===((x=s.value.address)==null?void 0:x.toUpperCase())||ve.token_b.address.toUpperCase()===((de=l==null?void 0:l.value.address)==null?void 0:de.toUpperCase())&&ve.token_a.address.toUpperCase()===((Pe=s.value.address)==null?void 0:Pe.toUpperCase()))&&te.push(ve)}te&&te.length>0&&(ce=te.sort((Re,ve)=>{const xe=Re.coinAmountA+Re.coinAmountB;return ve.coinAmountA+ve.coinAmountB-xe})[0])}return ce&&!fo(ce)?ce:null}return null}),f=D(()=>{var k,P;const o=(k=l==null?void 0:l.value)==null?void 0:k.address,t=(P=s==null?void 0:s.value)==null?void 0:P.address;let d=null;for(let w=0;w<q.value.poolConfigList.length;w++){const T=q.value.poolConfigList[w];!o||!t?d={}:(T.token_a.address.toUpperCase()===(o==null?void 0:o.toUpperCase())&&T.token_b.address.toUpperCase()===(t==null?void 0:t.toUpperCase())||T.token_b.address.toUpperCase()===(o==null?void 0:o.toUpperCase())&&T.token_a.address.toUpperCase()===(t==null?void 0:t.toUpperCase()))&&(d=T)}return d});fe(()=>[Jo.value,A.value,q.value.recommendRangesObj],(o,t)=>{var d,k,P,w,T;o[0]&&!o[1]&&o[2]&&!fo(o[2])&&(!t||o[0]&&((d=o[0])==null?void 0:d.address)!==t[0]&&((k=t[0])!=null&&k.address))&&(P=o[0])!=null&&P.address&&!((w=v==null?void 0:v.query)!=null&&w.action)&&Ye.setSinglePool(o[0],o[2][(T=o[0])==null?void 0:T.address],R.value.chainName)},{immediate:!0,deep:!0});const to=g({}),Oo=async(o,t)=>{var d,k,P,w;if(o){const{TickMath:T,getNearestTickByTick:U}=N.value;t&&(G.value=!0,be.value=!1,ke.value=!1),o.token_a.address.toLowerCase()===l.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===s.value.address.toLowerCase()?$.value=!0:$.value=!1,ie.value=!0;const L=o.token_a.decimals,K=o.token_b.decimals;E.value=o.fee*100+"% "+n("common.feeTier");const Y=o.current_tick_index;Ee.value=T.sqrtPriceX64ToPrice(o.current_sqrt_price,L,K).toString(),so.value=new h(1).div(new h(Ee.value)).toString();const x=await N.value.getTicks(o);if(De.value=x?N.value.getTickDataFromUrlData(x):[],t){let de=q.value.poolPriceConfigObj&&q.value.poolPriceConfigObj[o.address]&&q.value.poolPriceConfigObj[o.address].recommend_ranges||{};const Pe=q.value.poolPriceConfigObj&&q.value.poolPriceConfigObj[o.address]&&q.value.poolPriceConfigObj[o.address].type||"",ce=Y-Number(Pe=="unstable"?Number(o.tickSpacing)*2:Number(o.tickSpacing)*3),te=Y+Number(Pe=="unstable"?Number(o.tickSpacing)*2:Number(o.tickSpacing)*3),Re=(k=(d=A==null?void 0:A.value)==null?void 0:d.token_a)==null?void 0:k.decimals,ve=(w=(P=A==null?void 0:A.value)==null?void 0:P.token_b)==null?void 0:w.decimals,xe=N.value.TickMath.tickIndexToPrice(ce,Re,ve).toString(),Be=N.value.TickMath.tickIndexToPrice(te,Re,ve).toString();de["full range"]={lower:-443636,upper:443636},de.custom={lower:ce,upper:te,minPrice:xe,maxPrice:Be};const ye=[];for(let We in de)de[We]&&ye.push({...de[We],key:We});$o.value=ye,Pe?o.isSelfBuilt?Q.value="custom":Pe=="stable"?Q.value="suggested":Q.value="passive":Q.value="custom",to.value=de,vn({key:Q.value,...de[Q.value]})}G.value=!1}else G.value=!1},Xo=D(()=>Ye.getPoolInfoSuccess);fe(()=>A.value,(o,t)=>{var d,k,P,w,T,U,L,K,Y,x,de,Pe;o&&o.current_sqrt_price?((!t||o.poolAddress!==t.poolAddress||o.current_sqrt_price!==t.current_sqrt_price)&&Oo(o,!t||o.poolAddress!==t.poolAddress),(v==null?void 0:v.name)=="deposit"&&Ce.push(`/deposit?poolAddress=${o==null?void 0:o.address}&tokena=${(d=l==null?void 0:l.value)==null?void 0:d.address}&tokenb=${(k=s==null?void 0:s.value)==null?void 0:k.address}&fee=${o==null?void 0:o.fee}`)):((P=v==null?void 0:v.query)==null?void 0:P.actions)=="new-position"||(!f.value&&To.value&&((w=l==null?void 0:l.value)!=null&&w.address||(T=s==null?void 0:s.value)!=null&&T.address)?(E.value="",i.value="0",p.value="∞",be.value=!1,ke.value=!1,G.value=!1,Ee.value="",so.value="",(v==null?void 0:v.name)=="deposit"&&Ce.push(`/deposit?action=create-pool&tokena=${(U=l==null?void 0:l.value)==null?void 0:U.address}&tokenb=${(L=s==null?void 0:s.value)==null?void 0:L.address}&from=${(K=v==null?void 0:v.query)==null?void 0:K.from}`)):To.value&&!o&&!((Y=v==null?void 0:v.query)!=null&&Y.action)&&Xo.value&&!Jo.value?(E.value="",i.value="0",p.value="∞",be.value=!1,ke.value=!1,G.value=!1,Ee.value="",so.value="",(v==null?void 0:v.name)=="deposit"&&Ce.push(`/deposit?action=create-pool&tokena=${(x=l==null?void 0:l.value)==null?void 0:x.address}&tokenb=${(de=s==null?void 0:s.value)==null?void 0:de.address}&from=${(Pe=v==null?void 0:v.query)==null?void 0:Pe.from}`)):(be.value=!1,ke.value=!1,G.value=!1,Ee.value="",so.value=""))},{immediate:!0});const Ke=D(()=>B.value.assets&&l.value&&B.value.assets[l.value.address]?nt(B.value.assets[l.value.address].balance,l.value.decimals):"0"),Ze=D(()=>B.value.assets&&s.value&&B.value.assets[s.value.address]?nt(B.value.assets[s.value.address].balance,s.value.decimals):"0"),Qo=async()=>{const o=await N.value.getTicks(A.value),t=o?N.value.getTickDataFromUrlData(o):[];De.value=t},Pn=sa(),Vo=D(()=>q.value.currentPositionInfo),Pt=async o=>{var Y,x,de,Pe,ce,te,Re,ve,xe,Be;lo.value=!1,q.value.currentPositionInfo={},Co(""),Wo(n("tips.increaseLiquiditySuccess",{from:be.value?"":`${y.value} ${(Y=l.value)==null?void 0:Y.symbol}`,and:!be.value&&!ke.value?"and":"",to:ke.value?"":`${b.value} ${(x=s.value)==null?void 0:x.symbol}`})),Qe(!0);const t=$.value?m.value:!m.value;let d,k,P,w,T,U;const L=A.value.token_a.decimals,K=A.value.token_b.decimals;if(i.value==="0"&&p.value==="∞")P=N.value.TickUtil.getMinIndex(Number(A.value.tickSpacing)),w=N.value.TickUtil.getMaxIndex(Number(A.value.tickSpacing));else if(Q.value=="custom"){$.value?(d=Number(i.value),k=Number(p.value)):(d=new h(1).div(p.value).toString(),k=new h(1).div(i.value).toString());try{T=d==0?N.value.TickUtil.getMinIndex(Number(A.value.tickSpacing)):N.value.TickMath.priceToTickIndex(new h(d),L,K)}catch{T=N.value.TickUtil.getMinIndex(Number(A.value.tickSpacing))}try{U=N.value.TickMath.priceToTickIndex(new h(k),L,K)}catch{U=N.value.TickUtil.getMaxIndex(Number(A.value.tickSpacing))}P=N.value.getNearestTickByTick(T,Number(A.value.tickSpacing)),w=N.value.getNearestTickByTick(U,Number(A.value.tickSpacing))}else P=to.value[Q.value].lower,w=to.value[Q.value].upper;try{const ye=await N.value.getAddLiquidityTransactionPayload({pool:{poolAddress:A.value.poolAddress,token_a:A.value.token_a,token_b:A.value.token_b},amount:m.value?y.value:b.value,fix_amount_a:t,tick_lower:P,tick_upper:w,index:0,slippage:Number(je.value)/100,roundUp:!0,collect_fee:!1,curSqrtPrice:new Po(A.value.current_sqrt_price)});let We;if(R.value.chainName==="Aptos")We=await B.value.currentWallet.signAndSubmitTransaction(ye);else{const qe=await B.value.currentWallet.signAndExecuteTransactionBlock(ye);We=N.value.handleTx(qe)}if(We&&We.hash){Co(We.hash),Qe(!1),ko(!0);const qe=Un();let Ie;A.value.needReverse?A.value.token_a.address.toLowerCase()===l.value.address.toLowerCase()&&A.value.token_b.address.toLowerCase()===s.value.address.toLowerCase()?Ie=!1:Ie=!0:A.value.token_a.address.toLowerCase()===l.value.address.toLowerCase()&&A.value.token_b.address.toLowerCase()===s.value.address.toLowerCase()?Ie=!0:Ie=!1;const no={title:"Supplied",desc:n("tips.addLiquiditySuccessText",{from:be.value?"":`${y.value} ${(de=l.value)==null?void 0:de.symbol}`,and:!be.value&&!ke.value?"and":"",to:ke.value?"":`${b.value} ${(Pe=s.value)==null?void 0:Pe.symbol}`}),hash:We.hash,tit:"Position Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:Ie?(ce=l.value)==null?void 0:ce.address:(te=s.value)==null?void 0:te.address,numa:Ie?y.value:b.value,logoa:Ie?q.value.tokensObj&&l.value&&l.value.address&&q.value.tokensObj[l.value.address]&&q.value.tokensObj[l.value.address].logoURI:q.value.tokensObj&&s.value&&s.value.address&&q.value.tokensObj[s.value.address]&&q.value.tokensObj[s.value.address].logoURI,tokenb:Ie?(ve=s.value)==null?void 0:ve.address:(Re=l.value)==null?void 0:Re.address,numb:Ie?b.value:y.value,logob:Ie?q.value.tokensObj&&s.value&&s.value.address&&q.value.tokensObj[s.value.address]&&q.value.tokensObj[s.value.address].logoURI:q.value.tokensObj&&l.value&&l.value.address&&q.value.tokensObj[l.value.address]&&q.value.tokensObj[l.value.address].logoURI},text:`Deopsit ${be.value?"":`${y.value} ${(xe=l.value)==null?void 0:xe.symbol}`} ${!be.value&&!ke.value?"and":""} ${ke.value?"":`${b.value} ${(Be=s.value)==null?void 0:Be.symbol}`}`};R.value.chainName!=="Aptos"&&(no.res=We.res),N.value.showTransitionPending(no);const Ge=await N.value.watchTransaction(no,!0);if(Ge.status){if(ko(!1),q.value.setCurrentPositionLoading(!0),W.value=!0,R.value.chainName==="Aptos"){if(await q.value.setCurrentPositionInfo(Ge.nftInfo[0].data.id.creator,Ge.nftInfo[0].data.id.collection,Ge.nftInfo[0].data.name,R.value.chainName),o)try{await Pn.subscribePosition({pool_address:Vo.value.poolAddress,position_index:Vo.value.index},Vo.value.nftHash)}catch{}}else{const Xe=Ge.nftInfo,mo=await tt(2e3);if(await q.value.setCurrentPositionInfo(Xe==null?void 0:Xe.pool,"","",R.value.chainName,Xe==null?void 0:Xe.position),await tt(1e3),o)try{await Pn.subscribePosition({pool_address:Vo.value.poolAddress,position_index:Vo.value.index},Vo.value.nftHash)}catch{}}setTimeout(()=>{Ye.updateCurrentPools(A.value.poolAddress,R.value.chainName),N.value.getAccount(B.value.address)},3e3),setTimeout(async()=>{Qo()},3e3)}Do()}else Qe(!1),ho(!0);y.value="",b.value=""}catch{y.value="",b.value="",Qe(!1),ho(!0)}},It=o=>{switch(o){case"active":return n("newAdd.activeTips");case"passive":return n("newAdd.passiveTips");case"full range":return n("newAdd.fullRangTips");case"suggested":return n("newAdd.suggestedTips");case"custom":return n("newAdd.customTips")}},$t=o=>{switch(o){case"suggested":return n("newAdd.suggested");case"active":return n("newAdd.active");case"passive":return n("newAdd.conservative");case"full range":return n("newAdd.fullRange");case"custom":return n("newAdd.custom")}},vn=o=>{Q.value=o.key.toLowerCase();const t=A.value.token_a.decimals,d=A.value.token_b.decimals,{lower:k,upper:P}=o,w=N.value.TickMath.tickIndexToPrice(k,t,d).toString(),T=N.value.TickMath.tickIndexToPrice(P,t,d).toString();if(o.key=="full range"){Ho.value=k,zo.value=P,eo(!0),uo();return}$.value?(O.value=String(w),i.value=String(w),J.value=String(T),p.value=String(T),Ho.value=k,zo.value=P,uo()):(O.value=String(1/Number(T)),i.value=String(1/Number(T)),J.value=String(1/Number(w)),p.value=String(1/Number(w)),Ho.value=N.value.TickMath.priceToTickIndex(new h(1/Number(T)),t,d),zo.value=N.value.TickMath.priceToTickIndex(new h(1/Number(w)),t,d),uo())},St=D(()=>q.value.tokensObj&&l.value.address&&q.value.tokensObj[l.value.address]&&q.value.tokensObj[l.value.address].logoURI),Tt=D(()=>q.value.tokensObj&&s.value.address&&q.value.tokensObj[s.value.address]&&q.value.tokensObj[s.value.address].logoURI),Un=()=>{var d,k,P,w,T,U,L,K;let o=null;const t=q.value.poolConfigList;for(let Y=0;Y<t.length;Y++){const x=t[Y];if(x.token_a.address.toUpperCase()===((k=(d=l==null?void 0:l.value)==null?void 0:d.address)==null?void 0:k.toUpperCase())&&x.token_b.address.toUpperCase()===((w=(P=s==null?void 0:s.value)==null?void 0:P.address)==null?void 0:w.toUpperCase())||x.token_b.address.toUpperCase()===((U=(T=l==null?void 0:l.value)==null?void 0:T.address)==null?void 0:U.toUpperCase())&&x.token_a.address.toUpperCase()===((K=(L=s==null?void 0:s.value)==null?void 0:L.address)==null?void 0:K.toUpperCase())){o=x;break}}return o},Nt=o=>{var d,k,P,w,T,U,L,K,Y,x;const t=Un();if(t&&(Se.value=t.needReverse?t==null?void 0:t.token_b:t==null?void 0:t.token_a,Te.value=t.needReverse?t==null?void 0:t.token_a:t==null?void 0:t.token_b,l.value=t.needReverse?t==null?void 0:t.token_b:t==null?void 0:t.token_a,s.value=t.needReverse?t==null?void 0:t.token_a:t==null?void 0:t.token_b,$.value=l.value.address===((d=t==null?void 0:t.token_a)==null?void 0:d.address)),ze.value.includes(o.fee))E.value=o.label,Uo.value=o.fee,Ce.push(`/deposit?tokena=${t?t.needReverse?(P=t==null?void 0:t.token_b)==null?void 0:P.address:(k=t==null?void 0:t.token_a)==null?void 0:k.address:$.value?l.value.address:s.value.address}&tokenb=${t?t.needReverse?(T=t==null?void 0:t.token_a)==null?void 0:T.address:(w=t==null?void 0:t.token_b)==null?void 0:w.address:$.value?s.value.address:l.value.address}&fee=${o.fee}`);else{if(R.value.chainName!=="Aptos"&&!ro.value[l.value.address]&&!ro.value[s.value.address])return;E.value=o.label,A.value&&(i.value="",p.value=""),y.value="",b.value="",Ee.value="",so.value="",i.value="",p.value="",pn.value="",mn.value="",Ce.push(`/deposit?action=create-pool&tokena=${t?t.needReverse?(L=t==null?void 0:t.token_b)==null?void 0:L.address:(U=t==null?void 0:t.token_a)==null?void 0:U.address:$.value?l.value.address:s.value.address}&tokenb=${t?t.needReverse?(Y=t==null?void 0:t.token_a)==null?void 0:Y.address:(K=t==null?void 0:t.token_b)==null?void 0:K.address:$.value?s.value.address:l.value.address}&fee=${o.fee}&from=${(x=v==null?void 0:v.query)==null?void 0:x.from}`)}},At=g(!1),qt=()=>{A.value,lo.value=!0},S=g(null),pn=g(""),mn=g(""),fn=o=>{var U,L,K,Y,x,de,Pe,ce,te,Re,ve,xe;if(o?(pn.value=o,Ee.value=o,so.value=o,mn.value=new h(1).div(new h(o)).toString(),G.value=!1):(pn.value="",Ee.value="",so.value="",mn.value=""),!((U=Se.value)!=null&&U.address)||!((L=Te.value)!=null&&L.address))return;let t=!1;const d=q.value.poolConfigList;let k=null;for(let Be=0;Be<d.length;Be++){const ye=d[Be];if(ye.token_a.address.toUpperCase()===((Y=(K=Se==null?void 0:Se.value)==null?void 0:K.address)==null?void 0:Y.toUpperCase())&&ye.token_b.address.toUpperCase()===((de=(x=Te==null?void 0:Te.value)==null?void 0:x.address)==null?void 0:de.toUpperCase())){t=ye.needReverse,k=ye;break}else if(ye.token_b.address.toUpperCase()===((ce=(Pe=Se==null?void 0:Se.value)==null?void 0:Pe.address)==null?void 0:ce.toUpperCase())&&ye.token_a.address.toUpperCase()===((Re=(te=Te==null?void 0:Te.value)==null?void 0:te.address)==null?void 0:Re.toUpperCase())){t=ye.needReverse,k=ye;break}}let P=!1;N.value.getIsSortedSymbols((ve=Se.value)==null?void 0:ve.address,(xe=Te.value)==null?void 0:xe.address)&&(P=!0);let w;P&&!$.value?w=!0:P&&$.value||!P&&$.value?w=!1:w=!0;const T=R.value.chainName=="Aptos"?Or:_r;if(l.value&&s.value&&o){const Be=k?k==null?void 0:k.token_a.decimals:P?Te.value.decimals:Se.value.decimals,ye=k?k==null?void 0:k.token_b.decimals:P?Se.value.decimals:Te.value.decimals,We=o&&N.value.TickMath.priceToSqrtPriceX64(w?new h(1/o):new h(o),Be,ye),qe=o&&N.value.TickMath.priceToSqrtPriceX64(new h(1).div(o),l.value.decimals,s.value.decimals),Ie=N.value.TickMath.priceToTickIndex(w?new h(1).div(o):new h(o),Be,ye),no=Ie-T[v.query.fee]*5,Ge=Ie+T[v.query.fee]*5,Xe=N.value.TickMath.tickIndexToPrice(no,Be,ye).toString(),mo=N.value.TickMath.tickIndexToPrice(Ge,Be,ye).toString();_o.value?(i.value="0",p.value="∞"):w?(i.value=String(1/mo),p.value=String(1/Xe),O.value=String(1/mo),J.value=String(1/Xe)):(i.value=Xe,p.value=mo,O.value=Xe,J.value=mo);const wo={token_a:k?k.token_a:P?Te.value:Se.value,token_b:k?k.token_b:P?Se.value:Te.value,isCreate:!0,tickSpacing:T[v.query.fee],currentPrice:o,current_sqrt_price:We,tick_lower:no,tick_upper:Ge,current_tick_index:Ie,currentPriceReverse:on(String(1/o),6),reverse_current_sqrt_price:qe,needReverse:t,fee:v.query.fee};S.value=wo,uo()}else S.value=null,i.value="",p.value=""},Lt=async()=>{var K,Y,x,de;if(R.value.chainName!=="Aptos"){On();return}lo.value=!1;let o,t,d,k,P,w;const T=Se.value.decimals,U=Te.value.decimals;Co(""),Wo(n("tips.increaseLiquiditySuccess",{from:be.value?"":`${y.value} ${(K=l.value)==null?void 0:K.symbol}`,and:!be.value&&!ke.value?"and":"",to:ke.value?"":`${b.value} ${(Y=s.value)==null?void 0:Y.symbol}`})),Qe(!0),i.value==="0"&&p.value==="∞"?(d=N.value.TickUtil.getMinIndex(Number(S.value.tickSpacing)),k=N.value.TickUtil.getMaxIndex(Number(S.value.tickSpacing))):($.value?(o=Number(i.value),t=Number(p.value)):(o=1/Number(p.value),t=1/Number(i.value)),P=o==0?-443636:N.value.TickMath.priceToTickIndex(new h(o),T,U),w=N.value.TickMath.priceToTickIndex(new h(t),T,U),d=N.value.getNearestTickByTick(P,Number(S.value.tickSpacing)),k=N.value.getNearestTickByTick(w,Number(S.value.tickSpacing)));const L=$.value?m.value:!m.value;try{const Pe=await N.value.getCreatPoolTransactionPayload({coinTypeA:Se.value.address,coinTypeB:Te.value.address,tick_spacing:Number(S.value.tickSpacing),initialize_sqrt_price:new Po(S.value.current_sqrt_price),uri:"",current_tick_index:S.value.current_tick_index,max_amount_a:$.value?y.value:b.value,max_amount_b:$.value?b.value:y.value,tick_lower:d,tick_upper:k,slippage:Number(je.value)/100,decimalsA:T,decimalsB:U,fix_amount_a:L,liquidityInput:yo.value});let ce;if(R.value.chainName==="Aptos")ce=await B.value.currentWallet.signAndSubmitTransaction(Pe);else{const te=await B.value.currentWallet.signAndExecuteTransactionBlock(Pe);ce=N.value.handleTx(te)}if(ce&&ce.hash){Co(ce.hash),Qe(!1),ko(!0);const te={title:"Created pool",desc:"Pool created successfully ",hash:ce.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(x=l.value)==null?void 0:x.address}`,numa:be.value?"":`- ${y.value}`,logoa:q.value.tokensObj&&l.value&&l.value.address&&q.value.tokensObj[l.value.address]&&q.value.tokensObj[l.value.address].logoURI,tokenb:`${(de=s.value)==null?void 0:de.address}`,numb:ke.value?"":`- ${b.value}`,logob:q.value.tokensObj&&s.value&&s.value.address&&q.value.tokensObj[s.value.address]&&q.value.tokensObj[s.value.address].logoURI},text:"Pool created successfully"};R.value.chainName!=="Aptos"&&(te.res=ce.res),N.value.showTransitionPending(te),(await N.value.watchTransaction(te,!0)).status&&(ko(!1),ne.value=!0,setTimeout(()=>{Ye.setPoolConfigList(R.value.chainName,R.value.filterCoinsObj),N.value.getAccount(B.value.address)},1e3)),Do()}else Qe(!1),ho(!0);y.value="",b.value=""}catch{Ye.setPoolConfigList(R.value.chainName,R.value.filterCoinsObj),lo.value=!1,y.value="",b.value="",Qe(!1),ho(!0)}},On=async()=>{var Pe,ce,te,Re,ve,xe,Be,ye,We,qe,Ie,no,Ge,Xe,mo,wo,Bn,Fn,jn,En,Wn,Dn,Hn,zn,Xn,Vn,Kn,Zn,Gn,Jn,Qn,Yn,xn,et,ot;lo.value=!1;let o=!1;N.value.getIsSortedSymbols(Se.value.address,Te.value.address)&&(o=!0),Co("");const t=be.value?"":`${y.value} ${(Pe=l.value)==null?void 0:Pe.symbol}`,d=ke.value?"":`${b.value} ${(ce=s.value)==null?void 0:ce.symbol}`;Wo(n("tips.increaseLiquiditySuccess",{from:!o&&!((te=S==null?void 0:S.value)!=null&&te.needReverse)||o&&((Re=S==null?void 0:S.value)!=null&&Re.needReverse)?t:d,and:!be.value&&!ke.value?"and":"",to:!o&&!((ve=S==null?void 0:S.value)!=null&&ve.needReverse)||o&&((xe=S==null?void 0:S.value)!=null&&xe.needReverse)?d:t})),Qe(!0);let k="",P="",w="",T="",U="",L="",K=0,Y=0,x=!1,de;if(o||(Be=S==null?void 0:S.value)!=null&&Be.needReverse){const Bo=o&&!((ye=S==null?void 0:S.value)!=null&&ye.needReverse);k=Bo?(no=(Ie=S==null?void 0:S.value)==null?void 0:Ie.token_b)==null?void 0:no.address:(qe=(We=S==null?void 0:S.value)==null?void 0:We.token_a)==null?void 0:qe.address,P=Bo?(wo=(mo=S==null?void 0:S.value)==null?void 0:mo.token_a)==null?void 0:wo.address:(Xe=(Ge=S==null?void 0:S.value)==null?void 0:Ge.token_b)==null?void 0:Xe.address,w=Bo?(En=(jn=S==null?void 0:S.value)==null?void 0:jn.token_b)==null?void 0:En.decimals:(Fn=(Bn=S==null?void 0:S.value)==null?void 0:Bn.token_a)==null?void 0:Fn.decimals,T=Bo?(zn=(Hn=S==null?void 0:S.value)==null?void 0:Hn.token_a)==null?void 0:zn.decimals:(Dn=(Wn=S==null?void 0:S.value)==null?void 0:Wn.token_b)==null?void 0:Dn.decimals,(Xn=S==null?void 0:S.value)!=null&&Xn.needReverse?(U=$.value?y.value:b.value,L=$.value?b.value:y.value,K=$.value?Number(i.value):1/Number(p.value),Y=$.value?Number(p.value):1/Number(i.value),x=$.value?m.value:!m.value,de=$.value?Ee.value:1/Number(Ee.value)):(U=$.value?b.value:y.value,L=$.value?y.value:b.value,K=$.value?1/Number(p.value):Number(i.value),Y=$.value?1/Number(i.value):Number(p.value),x=$.value?!m.value:m.value,de=$.value?1/Number(Ee.value):Ee.value)}else k=(Kn=(Vn=S==null?void 0:S.value)==null?void 0:Vn.token_a)==null?void 0:Kn.address,P=(Gn=(Zn=S==null?void 0:S.value)==null?void 0:Zn.token_b)==null?void 0:Gn.address,w=(Qn=(Jn=S==null?void 0:S.value)==null?void 0:Jn.token_a)==null?void 0:Qn.decimals,T=(xn=(Yn=S==null?void 0:S.value)==null?void 0:Yn.token_b)==null?void 0:xn.decimals,U=$.value?y.value:b.value,L=$.value?b.value:y.value,K=$.value?Number(i.value):1/Number(p.value),Y=$.value?Number(p.value):1/Number(i.value),x=$.value?m.value:!m.value,de=$.value?Ee.value:1/Number(Ee.value);try{const Bo=await N.value.getCreatPoolTransactionPayload({coinTypeA:k,coinTypeB:P,decimalsA:w,decimalsB:T,amountA:U,amountB:L,minPrice:i.value=="0"&&p.value=="∞"?"0":K,maxPrice:i.value=="0"&&p.value=="∞"?"∞":Y,fix_amount_a:x,tick_spacing:Number(S.value.tickSpacing),slippage:Number(je.value)/100,price:de}),Ot=await B.value.currentWallet.signAndExecuteTransactionBlock(Bo),Yo=N.value.handleTx(Ot);if(Yo&&Yo.hash){Co(Yo.hash),Qe(!1),ko(!0);const Sn={title:"Created pool",desc:"Pool created successfully ",hash:Yo.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(et=l.value)==null?void 0:et.address}`,numa:be.value?"":`- ${y.value}`,logoa:q.value.tokensObj&&l.value&&l.value.address&&q.value.tokensObj[l.value.address]&&q.value.tokensObj[l.value.address].logoURI,tokenb:`${(ot=s.value)==null?void 0:ot.address}`,numb:ke.value?"":`- ${b.value}`,logob:q.value.tokensObj&&s.value&&s.value.address&&q.value.tokensObj[s.value.address]&&q.value.tokensObj[s.value.address].logoURI},text:"Pool created successfully"};R.value.chainName!=="Aptos"&&(Sn.res=Yo.res),N.value.showTransitionPending(Sn),(await N.value.watchTransaction(Sn,!0)).status&&(ko(!1),ne.value=!0,setTimeout(()=>{Ye.setPoolConfigList(R.value.chainName,R.value.filterCoinsObj),N.value.getAccount(B.value.address)},1e3)),Do()}else Qe(!1),ho(!0);y.value="",b.value=""}catch{lo.value=!1,Ye.setPoolConfigList(R.value.chainName,R.value.filterCoinsObj),y.value="",b.value="",Qe(!1),ho(!0)}},Rt=D(()=>{var o,t,d,k,P,w;return((o=l.value)==null?void 0:o.isSelfBuilt)||((t=s.value)==null?void 0:t.isSelfBuilt)||((k=q.value.tokensObj[(d=l.value)==null?void 0:d.address])==null?void 0:k.isSelfBuilt)||((w=q.value.tokensObj[(P=s.value)==null?void 0:P.address])==null?void 0:w.isSelfBuilt)}),Mt=o=>{var t;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((t=q.value.tokensObj[o==null?void 0:o.address])==null?void 0:t.logo_url)||(R.value.theme==="default"?He("/image/coins/unknown.png"):He("/image/coins/sui-unknown.png"))},In=(o,t)=>{const d=localStorage.getItem(o.address);q.value.tokensObj&&q.value.tokensObj[o.address]&&q.value.tokensObj[o.address].isSelfBuilt&&!d&&(t=="fromCoin"&&(Zo.value=o),t=="toCoin"&&(Go.value=o),_n.value=!0)};fe(()=>[l.value,s.value],([o,t])=>{o&&!fo(o)&&In(o,"fromCoin"),t&&!fo(t)&&In(t,"toCoin")},{immediate:!0});const _n=g(!1),Ut=()=>{gn.value!=="Aptos"?Ce.push("/pool/list"):Ce.push("/pools")},gn=D(()=>R.value.chainName);fe(()=>[R.value.chainName,R.value.filterCoinsObj],([o,t])=>{o&&t&&Ye.setPoolConfigList(o,t)},{immediate:!0}),fe(()=>[ze.value,ro.value,l.value,s.value,To.value],([o,t,d,k,P])=>{P&&o&&t&&!o.includes(1e-4)&&!o.includes(5e-4)&&!o.includes(.0025)&&!o.includes(.01)&&!t[d==null?void 0:d.address]&&!t[k==null?void 0:k.address]&&(E.value="")},{immediate:!0});const _o=g(!0),$n=()=>{eo(!_o.value),_o.value=!_o.value,fn(S.value.currentPrice)};return{isFullRange:_o,clickFullRange:$n,warningToCoin:Go,warningFromCoin:Zo,getTokenSource:In,closeTokenWarning:Ut,isShowTokenWarning:_n,chainName:gn,hasCreatePool:To,isCreateSuccess:ne,intPriceReverse:mn,isShowMask:Io,isPc:e,intPrice:pn,createPoolToCoin:Te,createPoolFromCoin:Se,getPoolInfoSuccess:Xo,toCreatePool:Lt,createPoolInfo:S,changecurrentPrice:fn,isShowCreatePoolModal:At,addOrCreate:qt,halfBtnSelect:dn,selectFee:Nt,isViewDetail:W,addCommom:Fe,decimalUi:Ae,fromCoinUrl:St,toCoinUrl:Tt,t:n,wallet:B,toAdd:Pt,chartLoading:G,currentTick:le,tickList:De,poolInfo:A,storeIndex:R,importIcon:He,addLiquidityBtnText:M,slippage:je,countdown:z,loading:H,fromCoin:l,toCoin:s,openCoinSelect:ln,onCoinSelect:sn,existingCoins:V,lastSelectCoin:ee,currentCoinKey:X,showCoinSelect:he,fromCoinAmount:y,toCoinAmount:b,maxBtnSelect:un,fixedFromCoin:m,isShowLiquidityModal:lo,direct:$,toggle:rn,edit:we,inputValue:E,feeTierList:Je,minPrice:i,maxPrice:p,invalidPriceRange:Ko,defaultMinPrice:O,defaultMaxPrice:J,priceRangeChangeMin:tn,priceRangeChangeMax:an,toFullRange:eo,clearAll:cn,clickClear:j,positionError:pe,positionTips:Le,router:Ce,clickRefresh:So,fromCoinBlance:Ke,toCoinBlance:Ze,showToCoinLock:ke,showFromCoinLock:be,currentPriceReverse:so,currentPrice:Ee,getPirceText:It,currentPriceTab:Q,currentPriceTabList:$o,getPirceKey:$t,priceTab:vn,aprRewardsParameter:$e,aprRewardsDateList:ue,aprTab:Ao,reviseValue:qo,label:Ve,aprTitle:Me,isCreatePool:ze,before7dContractPriceLowest:oo,before7dContractPriceHighest:Ue,aprRewardsTime:ge,addLiquidityBtnDisabled:Eo,checkNullObj:fo,sFixD:xo,toCreateSuiPool:On,isSelfBuilt:Rt,getCoinIcon:Mt,isCreatePoolToCoin:Ro,isCreatePoolFromCoin:Mo,filterCreatePoolCoin:ro,poolTvl:bo}}}),yt=""+new URL("img-no-data_2x.e925467a.png",import.meta.url).href,wt=""+new URL("img-no-data_2x.8bc9afa2.png",import.meta.url).href;const io=e=>(Fo("data-v-d1ba06ea"),e=e(),jo(),e),Fr={class:"pools-container"},jr={key:0,class:"content pc-content"},Er={class:"content-left"},Wr={class:"content-left-bg"},Dr={class:"content-left-title"},Hr={key:0,class:"pool-warning"},zr={class:"coin-select"},Xr={key:0,class:"icon","aria-hidden":"true"},Vr=io(()=>a("use",{"xlink:href":"#icon-edit"},null,-1)),Kr=[Vr],Zr={key:0,class:"fee-container"},Gr=["onClick"],Jr={key:0,class:"icon fee-disabled","aria-hidden":"true"},Qr=io(()=>a("use",{"xlink:href":"#icon-icon-disable"},null,-1)),Yr=[Qr],xr={key:1},el={key:2},ol={key:0},nl={key:1,class:"text-active"},tl={class:"deposit-title"},al={class:"card-container"},il={class:"card-item"},rl={class:"card-item"},ll={key:0,class:"icon","aria-hidden":"true"},sl=io(()=>a("use",{"xlink:href":"#icon-icon-add"},null,-1)),ul=[sl],dl={class:"pc-network"},cl={class:"content-right"},vl={key:0,class:"initPrice-mask"},pl={class:"content-right-title"},ml=io(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1)),fl={class:"content-right-bg"},gl={key:1,class:"price-tab"},bl=["onClick"],kl={key:2,class:"create-pool-tips"},hl={key:3,class:"set-price-range"},Cl={class:"radio"},yl={key:0,src:ht},wl=io(()=>a("span",null,"Full Range",-1)),Pl={key:0},Il={key:1,class:"coin"},$l={key:2,class:"coin"},Sl={key:3,class:"no-price"},Tl={alt:""},Nl={alt:""},Al={key:6,class:"position-tips"},ql={alt:""},Ll={class:"tips"},Rl={key:7,class:"position-tips"},Ml={alt:""},Ul={class:"error"},Ol={key:8,class:"d3-chart-box"},_l={key:9,class:"day-7-price-range"},Bl=io(()=>a("i",null,null,-1)),Fl={class:"gray"},jl={key:11,class:"create-pool-tips"},El={key:12,class:"create-pool-warning"},Wl={key:1,class:"no-data"},Dl={key:0,src:yt,alt:""},Hl={key:1,src:wt,alt:""},zl={key:1,class:"content h5-content"},Xl={class:"content-left"},Vl={class:"content-left-bg"},Kl={class:"content-left-title"},Zl={key:0,class:"pool-warning"},Gl={class:"coin-select"},Jl={key:0,class:"icon","aria-hidden":"true"},Ql=io(()=>a("use",{"xlink:href":"#icon-edit"},null,-1)),Yl=[Ql],xl={key:0,class:"fee-container"},es=["onClick"],os={key:0},ns={key:1},ts={key:0},as={key:1,class:"text-active"},is={class:"content-right"},rs={key:0,class:"initPrice-mask"},ls={class:"content-right-title"},ss=io(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1)),us={class:"content-right-bg"},ds={key:1,class:"price-tab"},cs=["onClick"],vs={key:2,class:"create-pool-tips"},ps={key:3,class:"set-price-range"},ms={class:"radio"},fs={key:0,src:ht},gs=io(()=>a("span",null,"Full Range",-1)),bs={key:0},ks={key:1,class:"coin"},hs={key:2,class:"coin"},Cs={key:3,class:"no-price"},ys={alt:""},ws={alt:""},Ps={key:6,class:"position-tips"},Is=["src"],$s={class:"tips"},Ss={key:7,class:"position-tips"},Ts=["src"],Ns={class:"error"},As={key:8,class:"d3-chart-box"},qs={key:9,class:"day-7-price-range"},Ls=io(()=>a("i",null,null,-1)),Rs={class:"gray"},Ms={key:11,class:"create-pool-tips"},Us={key:1,class:"no-data"},Os={key:0,src:yt,alt:""},_s={key:1,src:wt,alt:""},Bs={key:0,class:"icon","aria-hidden":"true"},Fs=io(()=>a("use",{"xlink:href":"#icon-icon-add"},null,-1)),js=[Fs],Es={class:"pc-network"},Ws={class:"new-right"},Ds={class:"deposit-title"},Hs={class:"card-container"},zs={class:"card-item"},Xs={class:"card-item"},Vs={key:0,class:"icon","aria-hidden":"true"},Ks=io(()=>a("use",{"xlink:href":"#icon-icon-add"},null,-1)),Zs=[Ks],Gs={class:"h5-network"};function Js(e,n,_,F,B,Z){var le,G,ie,De,Q,$e,ge,Me,ue,Ve,oe,R,Io,N,ro,Ao,qo,$o,So,Ko,eo,ze,go,bo,Je,je,Lo,Eo,M,I,oo,Ue,Ce,l,s,tn,an,rn,Ro,Mo,ln,Se,Te,Zo,Go,sn,un,dn,cn,lo,ko,ho,Qe,Wo,Co,Do,v,Ye,To,q,yo,be,ke,Ho,zo,Ee,so,uo,Uo,Jo,A;const z=_t,ne=ga,W=zt,H=Sa,X=Xt,V=Jt,ee=Ra,he=xt,$=Mn,_e=oa,m=Ba,j=ti,y=ci,b=mt,i=na,p=Ji,O=ra,J=Pr,we=Ur,Le=Ft,pe=ea,E=Cn("image");return r(),c("div",Fr,[re(z,{url:e.storeIndex.theme=="default"?"/pools":"/pool/list"},null,8,["url"]),re(ne,{"pool-info":e.poolInfo,onClearAll:e.clearAll,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClearAll","onClickRefresh"]),e.isPc?(r(),c("div",jr,[a("div",Er,[a("div",Wr,[a("div",Dr,[Oe(u(e.$t("common.selectPool"))+" ",1),re(W,{placement:"bottom","arrow-point-at-center":""},{title:Ne(()=>[a("span",null,u(e.t("newAdd.poolWarning")),1)]),default:Ne(()=>[e.isSelfBuilt?(r(),c("div",Hr)):C("",!0)]),_:1})]),a("div",zr,[re(H,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.logoURI:e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.symbol:e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b:e.poolInfo.token_a:e.createPoolFromCoin,onClick:n[0]||(n[0]=f=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),re(H,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.logoURI:e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.symbol:e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a:e.poolInfo.token_b:e.createPoolToCoin,onClick:n[1]||(n[1]=f=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),a("div",{class:me(["pool-fee",e.edit?"pool-fee-edit":""])},[a("div",{class:"pool-fee-header",onClick:n[2]||(n[2]=f=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[a("span",{class:me(e.inputValue?"":"fee-span")},u(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(r(),c("svg",Xr,Kr)):C("",!0)]),e.edit?(r(),c("div",Zr,[(r(!0),c(No,null,en(e.feeTierList,(f,to)=>{var Oo,Xo,Ke,Ze,Qo;return r(),c("div",{key:to,class:me(["fee-item",[e.inputValue&&e.inputValue==f.label?"fee-item-active":"",e.isCreatePool.includes(f.fee)&&e.$route.query.action?" pool-created":" pool-not-created",e.chainName!=="Aptos"&&!e.isCreatePool.includes(f.fee)&&!e.filterCreatePoolCoin[(Oo=e.fromCoin)==null?void 0:Oo.address]&&!e.filterCreatePoolCoin[(Xo=e.toCoin)==null?void 0:Xo.address]?"disabled":""]]),onClick:Nn(Pn=>e.selectFee(f),["stop"])},[e.chainName!=="Aptos"&&!e.isCreatePool.includes(f.fee)&&!e.filterCreatePoolCoin[(Ke=e.fromCoin)==null?void 0:Ke.address]&&!e.filterCreatePoolCoin[(Ze=e.toCoin)==null?void 0:Ze.address]?(r(),c("svg",Jr,Yr)):C("",!0),e.$route.query.action=="create-pool"?(r(),c("div",xr,[a("p",null,u(f.title),1),a("p",{class:me(e.isCreatePool&&e.isCreatePool.includes(f.fee)?"text-default":"text-theme")},u(e.isCreatePool&&e.isCreatePool.includes(f.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(r(),c("div",el,[a("p",{class:me(e.isCreatePool&&e.isCreatePool.includes(f.fee)?"text-active":"text-default")},u(f.title),3),e.isCreatePool&&!e.isCreatePool.includes(f.fee)?(r(),c("p",ol,u(e.$t("newAdd.notCreated")),1)):C("",!0),e.isCreatePool&&e.isCreatePool.includes(f.fee)?(r(),c("p",nl,u(e.poolTvl&&e.poolTvl[f.fee]&&((Qo=e.poolTvl[f.fee])==null?void 0:Qo.rateText)),1)):C("",!0)])),a("span",null,u(f.text),1)],10,Gr)}),128))])):C("",!0)],2),a("div",tl,u(e.$t("newAdd.depositAmounts")),1),a("div",al,[a("div",il,[re(X,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[3]||(n[3]=f=>e.fromCoinAmount=f),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[4]||(n[4]=f=>e.maxBtnSelect("fromCoin")),onOnHalf:n[5]||(n[5]=f=>e.halfBtnSelect("fromCoin")),onOnInput:n[6]||(n[6]=f=>{e.fromCoinAmount=f,e.fixedFromCoin=!0}),onOnSelect:n[7]||(n[7]=f=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&e.$route.query.action!=="create-pool"?(r(),se(V,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):C("",!0)]),a("div",rl,[re(X,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[8]||(n[8]=f=>e.toCoinAmount=f),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[9]||(n[9]=f=>e.maxBtnSelect("toCoin")),onOnHalf:n[10]||(n[10]=f=>e.halfBtnSelect("toCoin")),onOnInput:n[11]||(n[11]=f=>{e.toCoinAmount=f,e.fixedFromCoin=!1}),onOnSelect:n[12]||(n[12]=f=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&e.$route.query.action!=="create-pool"?(r(),se(V,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):C("",!0)]),((G=(le=e.$route)==null?void 0:le.query)==null?void 0:G.action)=="create-pool"&&(e.showToCoinLock||e.showFromCoinLock||!e.filterCreatePoolCoin[(ie=e.fromCoin)==null?void 0:ie.address]&&!e.filterCreatePoolCoin[(De=e.toCoin)==null?void 0:De.address])?(r(),se(ee,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):C("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(r(),c("img",{key:1,class:"add",src:it,alt:"",onClick:n[13]||(n[13]=(...f)=>e.toggle&&e.toggle(...f))})):C("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(r(),c("img",{key:2,class:"add",src:rt,alt:"",onClick:n[14]||(n[14]=(...f)=>e.toggle&&e.toggle(...f))})):C("",!0)]),e.poolInfo?(r(),se(he,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):C("",!0)]),re($,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:n[15]||(n[15]=f=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ne(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")&&e.wallet.connected?(r(),c("svg",ll,ul)):C("",!0),a("span",null,u(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),a("div",dl,[re(_e)])]),a("div",cl,[e.isShowMask?(r(),c("div",vl)):C("",!0),a("div",pl,[Oe(u((Q=e.$route)!=null&&Q.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(r(),se(W,{key:0,placement:"bottom","arrow-point-at-center":""},{title:Ne(()=>[a("span",null,u(e.$t("newAdd.selectRangeTips")),1)]),default:Ne(()=>[ml]),_:1})):C("",!0)]),a("div",fl,[!((ge=($e=e.$route)==null?void 0:$e.query)!=null&&ge.action)&&e.poolInfo||(ue=(Me=e.$route)==null?void 0:Me.query)!=null&&ue.action?(r(),c(No,{key:0},[(oe=(Ve=e.$route)==null?void 0:Ve.query)!=null&&oe.action&&!e.poolInfo?(r(),se(m,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):C("",!0),e.poolInfo?(r(),c("div",gl,[(r(!0),c(No,null,en(e.currentPriceTabList,f=>(r(),c("div",{key:f,class:me(["price-item",{"price-item-active":f.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:to=>e.priceTab(f)},[re(W,{placement:"bottom","arrow-point-at-center":""},{title:Ne(()=>[a("span",null,u(e.getPirceText(f.key)),1)]),default:Ne(()=>[Oe(" "+u(e.getPirceKey(f.key)),1)]),_:2},1024)],10,bl))),128))])):C("",!0),(Io=(R=e.$route)==null?void 0:R.query)!=null&&Io.action&&!e.poolInfo?(r(),c("div",kl,u(e.$t("newAdd.createPoolInitialText")),1)):C("",!0),!e.poolInfo&&((ro=(N=e.$route)==null?void 0:N.query)!=null&&ro.action)?(r(),c("div",hl,[a("div",null,u(e.$t("common.setPriceRange")),1),a("div",null,[a("div",{class:me(["tab-item",e.isFullRange?"tab-item-active tab-item-farms-active":""]),onClick:n[16]||(n[16]=Nn(f=>e.clickFullRange(),["stop"]))},[a("div",Cl,[e.isFullRange&&e.chainName=="Sui"?(r(),c("img",yl)):C("",!0)]),wl],2)])])):C("",!0),e.poolInfo||(qo=(Ao=e.$route)==null?void 0:Ao.query)!=null&&qo.action?(r(),c("div",{key:4,class:me(["current-price",(So=($o=e.$route)==null?void 0:$o.query)!=null&&So.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(r(),c("span",Pl,u(e.$t("common.currentPrice")),1)):C("",!0),e.fromCoin&&e.toCoin&&e.direct?(r(),c("div",Il,[a("span",null,u(e.$t("common.currentPrice")),1),Oe(" "+u(e.currentPrice===""?"--":("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(e.currentPrice,6)))+" "+u((Ko=e.toCoin)==null?void 0:Ko.symbol)+" per "+u((eo=e.fromCoin)==null?void 0:eo.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(r(),c("div",$l,[a("span",null,u(e.$t("common.currentPrice")),1),Oe(" "+u(e.currentPriceReverse===""?"--":("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(e.currentPriceReverse,6)))+" "+u((ze=e.toCoin)==null?void 0:ze.symbol)+" per "+u((go=e.fromCoin)==null?void 0:go.symbol),1)])):(r(),c("div",Sl,"0.0")),e.fromCoin&&e.toCoin?(r(),c("div",{key:4,class:me(e.poolInfo&&((bo=e.poolInfo)!=null&&bo.needReverse)||e.createPoolInfo&&((Je=e.createPoolInfo)!=null&&Je.needReverse)?"toggle reverse":"toggle")},[a("div",{class:me(e.direct?"item active-item":"item"),onClick:n[17]||(n[17]=f=>e.direct?"":e.toggle())},[ao(a("img",Tl,null,512),[[E,e.getCoinIcon(e.direct?e.fromCoin:e.toCoin)]]),Oe(" "+u(e.direct?(je=e.fromCoin)==null?void 0:je.symbol:(Lo=e.toCoin)==null?void 0:Lo.symbol),1)],2),a("div",{class:me(e.direct?"item ":"item active-item"),onClick:n[18]||(n[18]=f=>e.direct?e.toggle():"")},[ao(a("img",Nl,null,512),[[E,e.getCoinIcon(e.direct?e.toCoin:e.fromCoin)]]),Oe(" "+u(e.direct?(Eo=e.toCoin)==null?void 0:Eo.symbol:(M=e.fromCoin)==null?void 0:M.symbol),1)],2)],2)):C("",!0)],2)):C("",!0),e.poolInfo||(oo=(I=e.$route)==null?void 0:I.query)!=null&&oo.action?(r(),se(j,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,"int-price":e.intPrice,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","int-price","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):C("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(r(),c("div",Al,[ao(a("img",ql,null,512),[[E,("importIcon"in e?e.importIcon:ae(He))("/image/icon-tips@2x.png")]]),a("p",Ll,u(e.$t("tips.positionTips")),1)])):C("",!0),e.positionError&&(e.poolInfo||(Ce=(Ue=e.$route)==null?void 0:Ue.query)!=null&&Ce.action)&&(Number(e.minPrice)||Number(e.maxPrice))?(r(),c("div",Rl,[ao(a("img",Ml,null,512),[[E,("importIcon"in e?e.importIcon:ae(He))("/image/icon-tips-error@2x.png")]]),a("p",Ul,u(e.$t("tips.positionError")),1)])):C("",!0),e.fromCoin&&e.toCoin&&e.poolInfo&&((l=e.poolInfo)!=null&&l.current_sqrt_price)?(r(),c("div",Ol,[e.fromCoin&&e.toCoin&&e.poolInfo?(r(),se(y,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):C("",!0),e.chartLoading?(r(),se(b,{key:1})):C("",!0)])):C("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(r(),c("div",_l,[Bl,a("span",Fl,u(e.aprRewardsTime)+" Price Range",1),a("span",null,u(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(e.before7dContractPriceLowest,6)))+" - "+u(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(e.before7dContractPriceHighest,6))),1)])):C("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(r(),se(i,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):C("",!0),(tn=(s=e.$route)==null?void 0:s.query)!=null&&tn.action&&!e.poolInfo&&!e.showFromCoinLock&&!e.showToCoinLock?(r(),c("div",jl,u(e.$t("newAdd.createPoolText")),1)):C("",!0),((rn=(an=e.$route)==null?void 0:an.query)==null?void 0:rn.action)=="create-pool"&&(e.showFromCoinLock||e.showToCoinLock)&&Number(e.maxPrice)>Number(e.minPrice)?(r(),c("div",El," To create a new pool, the initial price you set must be within your price range. ")):C("",!0)],64)):(r(),c("div",Wl,[e.storeIndex.theme=="default"?(r(),c("img",Dl)):(r(),c("img",Hl)),a("p",null,u(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&e.$route.query.action!=="create-pool"?(r(),se(p,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):C("",!0)])])):C("",!0),e.isPc?C("",!0):(r(),c("div",zl,[a("div",Xl,[a("div",Vl,[a("div",Kl,[Oe(u(e.$t("common.selectPool"))+" ",1),re(W,{placement:"bottom","arrow-point-at-center":""},{title:Ne(()=>[a("span",null,u(e.t("newAdd.poolWarning")),1)]),default:Ne(()=>[e.poolInfo&&e.isSelfBuilt?(r(),c("div",Zl)):C("",!0)]),_:1})]),a("div",Gl,[re(H,{"coin-icon":e.poolInfo?e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.token_a:e.createPoolFromCoin,onClick:n[19]||(n[19]=f=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),re(H,{"coin-icon":e.poolInfo?e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.token_b:e.createPoolToCoin,onClick:n[20]||(n[20]=f=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),a("div",{class:me(["pool-fee",e.edit?"pool-fee-edit":""])},[a("div",{class:"pool-fee-header",onClick:n[21]||(n[21]=f=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[a("span",{class:me(e.inputValue?"":"fee-span")},u(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(r(),c("svg",Jl,Yl)):C("",!0)]),e.edit?(r(),c("div",xl,[e.getPoolInfoSuccess?(r(!0),c(No,{key:1},en(e.feeTierList,(f,to)=>{var Oo;return r(),c("div",{key:to,class:me(["fee-item",[e.inputValue&&e.inputValue==f.label?"fee-item-active":"",e.isCreatePool&&e.isCreatePool.length>0&&e.isCreatePool.includes(f.fee)&&e.$route.query.action?" pool-created":" pool-not-created"]]),onClick:Xo=>e.selectFee(f)},[e.$route.query.action=="create-pool"?(r(),c("div",os,[a("p",null,u(f.title),1),a("p",{class:me(e.isCreatePool.includes(f.fee)?"text-default":"text-theme")},u(e.isCreatePool.includes(f.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(r(),c("div",ns,[a("p",{class:me(e.isCreatePool.includes(f.fee)?"text-active":"text-default")},u(f.title),3),e.isCreatePool&&!e.isCreatePool.includes(f.fee)?(r(),c("p",ts,u(e.$t("newAdd.notCreated")),1)):C("",!0),e.isCreatePool&&e.isCreatePool.includes(f.fee)?(r(),c("p",as,u(e.poolTvl&&e.poolTvl[f.fee]&&((Oo=e.poolTvl[f.fee])==null?void 0:Oo.rateText)),1)):C("",!0)])),a("span",null,u(f.text),1)],10,es)}),128)):(r(),se(b,{key:0}))])):C("",!0)],2)]),a("div",is,[e.isShowMask?(r(),c("div",rs)):C("",!0),a("div",ls,[Oe(u((Ro=e.$route)!=null&&Ro.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(r(),se(W,{key:0,placement:"bottom","arrow-point-at-center":""},{title:Ne(()=>[a("span",null,u(e.$t("newAdd.selectRangeTips")),1)]),default:Ne(()=>[ss]),_:1})):C("",!0)]),a("div",us,[!((ln=(Mo=e.$route)==null?void 0:Mo.query)!=null&&ln.action)&&e.poolInfo||(Te=(Se=e.$route)==null?void 0:Se.query)!=null&&Te.action?(r(),c(No,{key:0},[(Go=(Zo=e.$route)==null?void 0:Zo.query)!=null&&Go.action&&!e.poolInfo?(r(),se(m,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):C("",!0),e.poolInfo?(r(),c("div",ds,[(r(!0),c(No,null,en(e.currentPriceTabList,f=>(r(),c("div",{key:f,class:me(["price-item",{"price-item-active":f.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:to=>e.priceTab(f)},[re(W,{placement:"bottom","arrow-point-at-center":""},{title:Ne(()=>[a("span",null,u(e.getPirceText(f.key)),1)]),default:Ne(()=>[Oe(" "+u(e.getPirceKey(f.key)),1)]),_:2},1024)],10,cs))),128))])):C("",!0),(un=(sn=e.$route)==null?void 0:sn.query)!=null&&un.action&&!e.poolInfo?(r(),c("div",vs,u(e.$t("newAdd.createPoolInitialText")),1)):C("",!0),!e.poolInfo&&((cn=(dn=e.$route)==null?void 0:dn.query)!=null&&cn.action)?(r(),c("div",ps,[a("div",null,u(e.$t("common.setPriceRange")),1),a("div",null,[a("div",{class:me(["tab-item",e.isFullRange?"tab-item-active tab-item-farms-active":""]),onClick:n[22]||(n[22]=Nn(f=>e.clickFullRange(),["stop"]))},[a("div",ms,[e.isFullRange&&e.chainName=="Sui"?(r(),c("img",fs)):C("",!0)]),gs],2)])])):C("",!0),e.poolInfo||(ko=(lo=e.$route)==null?void 0:lo.query)!=null&&ko.action?(r(),c("div",{key:4,class:me(["current-price",(Qe=(ho=e.$route)==null?void 0:ho.query)!=null&&Qe.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(r(),c("span",bs,u(e.$t("common.currentPrice")),1)):C("",!0),e.fromCoin&&e.toCoin&&e.direct?(r(),c("div",ks,[a("span",null,u(e.$t("common.currentPrice")),1),Oe(" "+u(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(e.currentPrice,6)))+" "+u((Wo=e.toCoin)==null?void 0:Wo.symbol)+" per "+u((Co=e.fromCoin)==null?void 0:Co.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(r(),c("div",hs,[a("span",null,u(e.$t("common.currentPrice")),1),Oe(" "+u(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(e.currentPriceReverse,6)))+" "+u((Do=e.toCoin)==null?void 0:Do.symbol)+" per "+u((v=e.fromCoin)==null?void 0:v.symbol),1)])):(r(),c("div",Cs,"0.0")),e.fromCoin&&e.toCoin?(r(),c("div",{key:4,class:me(e.poolInfo&&((Ye=e.poolInfo)!=null&&Ye.needReverse)||e.createPoolInfo&&((To=e.createPoolInfo)!=null&&To.needReverse)?"toggle reverse":"toggle")},[a("div",{class:me(e.direct?"item active-item":"item"),onClick:n[23]||(n[23]=f=>e.direct?"":e.toggle())},[ao(a("img",ys,null,512),[[E,e.getCoinIcon(e.direct?e.fromCoin:e.toCoin)]]),Oe(" "+u(e.direct?(q=e.fromCoin)==null?void 0:q.symbol:(yo=e.toCoin)==null?void 0:yo.symbol),1)],2),a("div",{class:me(e.direct?"item ":"item active-item"),onClick:n[24]||(n[24]=f=>e.direct?e.toggle():"")},[ao(a("img",ws,null,512),[[E,e.getCoinIcon(e.direct?e.toCoin:e.fromCoin)]]),Oe(" "+u(e.direct?(be=e.toCoin)==null?void 0:be.symbol:(ke=e.fromCoin)==null?void 0:ke.symbol),1)],2)],2)):C("",!0)],2)):C("",!0),e.poolInfo||(zo=(Ho=e.$route)==null?void 0:Ho.query)!=null&&zo.action?(r(),se(j,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):C("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(r(),c("div",Ps,[a("img",{src:("importIcon"in e?e.importIcon:ae(He))("/image/icon-tips@2x.png"),alt:""},null,8,Is),a("p",$s,u(e.$t("tips.positionTips")),1)])):C("",!0),e.positionError&&(e.poolInfo||(so=(Ee=e.$route)==null?void 0:Ee.query)!=null&&so.action)?(r(),c("div",Ss,[a("img",{src:("importIcon"in e?e.importIcon:ae(He))("/image/icon-tips-error@2x.png"),alt:""},null,8,Ts),a("p",Ns,u(e.$t("tips.positionError")),1)])):C("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(r(),c("div",As,[e.fromCoin&&e.toCoin&&e.poolInfo?(r(),se(y,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):C("",!0),e.chartLoading?(r(),se(b,{key:1})):C("",!0)])):C("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(r(),c("div",qs,[Ls,a("span",Rs,u(e.aprRewardsTime)+" Price Range",1),a("span",null,u(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(e.before7dContractPriceLowest,6)))+" - "+u(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(e.before7dContractPriceHighest,6))),1)])):C("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(r(),se(i,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):C("",!0),(Uo=(uo=e.$route)==null?void 0:uo.query)!=null&&Uo.action&&!e.poolInfo?(r(),c("div",Ms,u(e.$t("newAdd.createPoolText")),1)):C("",!0)],64)):(r(),c("div",Us,[e.storeIndex.theme=="default"?(r(),c("img",Os)):(r(),c("img",_s)),a("p",null,u(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&!e.isSelfBuilt?(r(),se(p,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):C("",!0)]),re($,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:n[25]||(n[25]=f=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ne(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")?(r(),c("svg",Bs,js)):C("",!0),a("span",null,u(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),a("div",Es,[re(_e)])]),a("div",Ws,[a("div",Ds,u(e.$t("newAdd.depositAmounts")),1),a("div",Hs,[a("div",zs,[re(X,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[26]||(n[26]=f=>e.fromCoinAmount=f),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[27]||(n[27]=f=>e.maxBtnSelect("fromCoin")),onOnHalf:n[28]||(n[28]=f=>e.halfBtnSelect("fromCoin")),onOnInput:n[29]||(n[29]=f=>{e.fromCoinAmount=f,e.fixedFromCoin=!0}),onOnSelect:n[30]||(n[30]=f=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(r(),se(V,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):C("",!0)]),a("div",Xs,[re(X,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[31]||(n[31]=f=>e.toCoinAmount=f),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[32]||(n[32]=f=>e.maxBtnSelect("toCoin")),onOnHalf:n[33]||(n[33]=f=>e.halfBtnSelect("toCoin")),onOnInput:n[34]||(n[34]=f=>{e.toCoinAmount=f,e.fixedFromCoin=!1}),onOnSelect:n[35]||(n[35]=f=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(r(),se(V,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):C("",!0)]),(A=(Jo=e.$route)==null?void 0:Jo.query)!=null&&A.action&&!e.poolInfo&&(!e.createPoolInfo||!e.createPoolInfo.currentPrice)?(r(),se(ee,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):C("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(r(),c("img",{key:1,class:"add",src:it,alt:"",onClick:n[36]||(n[36]=(...f)=>e.toggle&&e.toggle(...f))})):C("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(r(),c("img",{key:2,class:"add",src:rt,alt:"",onClick:n[37]||(n[37]=(...f)=>e.toggle&&e.toggle(...f))})):C("",!0)]),e.poolInfo||e.createPoolInfo?(r(),se(he,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):C("",!0)])])),re($,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn h5-btn",onClick:n[38]||(n[38]=f=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ne(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")?(r(),c("svg",Vs,Zs)):C("",!0),a("span",null,u(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),a("div",Gs,[re(_e)]),e.showCoinSelect?(r(),se(O,{key:2,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"is-create-pool-to-coin":e.isCreatePoolToCoin,"is-create-pool-from-coin":e.isCreatePoolFromCoin,onOnSelect:e.onCoinSelect,onOnClose:n[39]||(n[39]=f=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","is-create-pool-to-coin","is-create-pool-from-coin","onOnSelect"])):C("",!0),e.isViewDetail?(r(),se(J,{key:3,"pool-info":e.poolInfo,onOnClose:n[40]||(n[40]=f=>e.isViewDetail=!1)},null,8,["pool-info"])):C("",!0),e.isCreateSuccess?(r(),se(we,{key:4,onOnClose:n[41]||(n[41]=f=>e.isCreateSuccess=!1)})):C("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(r(),se(Le,{key:5,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:n[42]||(n[42]=f=>e.isShowTokenWarning=!1)},null,8,["from-coin","to-coin","onClose"])):C("",!0),e.isShowLiquidityModal?(r(),se(pe,{key:6,"pool-info":e.poolInfo||e.createPoolInfo,title:e.$route.query.action=="create-pool"?e.$t("newAdd.preview"):e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direct,"is-increase":!1,onCreatePool:e.toCreatePool,onToAdd:e.toAdd,onOnClose:n[43]||(n[43]=f=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onCreatePool","onToAdd"])):C("",!0)])}const Au=po(Br,[["render",Js],["__scopeId","data-v-d1ba06ea"]]);export{Au as default};
