import{_ as pr}from"./back.00792879.js";import{_ as vr}from"./refresh-icon.95e6291d.js";import{_ as gr,a as yr}from"./swap-setting.0554e324.js";import{a as ze,r as S,b as qt,e as Ke,f as Pn,h as br,i as Q,j as Pt,k as He,o as A,l as T,m as f,t as C,c as me,p as W,q as ht,s as pt,w as le,v as Qt,x as Sn,y as Yt,z as di,D as F,B as Qe,A as ke,C as se,E as he,F as dt,G as lo,I as uo,H as Je,J as Se,S as co,K as Nn,L as mt,M as wr,N as _r,O as kr,P as Pi,Q as Tt,R as zn,T as Zn,U as fo,V as mo,W as ho,X as Cr,Y as po,Z as vo,$ as $r,a0 as Si,a1 as an,a2 as Ni}from"./entry.7c6f9548.js";import{_ as Ar,a as Ir}from"./coin-select.d75450cf.js";import{_ as go,a as yo,b as Pr}from"./add-liquidity.d536834e.js";/* empty css              */import"./index.da37c42c.js";import{_ as Sr}from"./apr-tab.bb5625e9.js";import{_ as Nr}from"./apr-tips.a23565dc.js";import{p as Tr}from"./precision.1cd464a0.js";import{_ as Mr}from"./status-block.7d2d8d19.js";import{_ as mi,a as hi}from"./icon-arrow_2x.db44c7c5.js";import{_ as bo}from"./coin-pair-name.54787c64.js";import"./img-no-Positions_2x.e41c0467.js";import"./index.29fc8e68.js";const Er=ze({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,t){const n=S(!1),i=S(null),o=S(0),r=S(20),a=qt(),s=Ke(),l=S(!1);Pn(()=>{e.poolInfo&&u()}),br(()=>{clearInterval(i.value)});const u=()=>{i.value=setInterval(()=>{var d;l.value||o.value<r.value&&(o.value+=1,o.value===r.value&&((d=e==null?void 0:e.poolInfo)!=null&&d.poolAddress&&a.updateCurrentPools(e.poolInfo.poolAddress,s.chainName),o.value=0))},2e4)},c=Q(()=>s.slippage);return{isShowSwapSetting:n,countdown:o,autoRefreshTime:r,slippage:c,clearAll:()=>{t.emit("clearAll")},checkNullObj:Pt}}});const Rr=e=>(ht("data-v-d7adee94"),e=e(),pt(),e),Lr={class:"title"},qr={class:"left"},Fr={class:"right title-right"},Br=Rr(()=>f("svg",{class:"icon","aria-hidden":"true"},[f("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1));function Or(e,t,n,i,o,r){var l;const a=vr,s=gr;return A(),T("div",Lr,[f("div",qr,[f("span",null,C((l=e.$route)!=null&&l.query.action?e.$t("newAdd.createClmmPool"):e.$t("common.concentratedLiquidity")),1)]),f("div",Fr,[f("div",{class:"slippage-icon",onClick:t[0]||(t[0]=u=>e.isShowSwapSetting=!0)},[Br,f("span",null,C(e.slippage)+"%",1)]),e.poolInfo?(A(),me(a,{key:0,loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:t[1]||(t[1]=u=>e.clickRefresh())},null,8,["loading","auto-refresh-time","countdown"])):W("",!0)]),e.isShowSwapSetting?(A(),me(s,{key:0,onOnClose:t[2]||(t[2]=u=>e.isShowSwapSetting=!1)})):W("",!0)])}const Ur=He(Er,[["render",Or],["__scopeId","data-v-d7adee94"]]);const xr=ze({props:{coinIcon:{type:String,default:""},coin:{type:Object,default:()=>({})}},setup(e){const t=Ke(),n=Q(()=>t),i=S(""),o=S(""),r=S(""),a=qt();return Q(()=>a),le(()=>[e.coin],([s])=>{s?(o.value=(s==null?void 0:s.labels)&&(s==null?void 0:s.labels),i.value=s.name,r.value=s.symbol):(o.value="",i.value="",r.value="")},{immediate:!0,deep:!0}),{store:n,importIcon:Qt,coinName:i,coinLabels:o,coinSymbol:r}}}),Dr=e=>(ht("data-v-41d2d913"),e=e(),pt(),e),zr={class:"coin-block"},Hr=["src"],Xr={class:"coin-info"},Vr={class:"symbol"},Kr={key:0,class:"name"},Yr=Dr(()=>f("div",null,[f("svg",{class:"icon","aria-hidden":"true"},[f("use",{"xlink:href":"#icon-icon_on"})])],-1));function Wr(e,t,n,i,o,r){return A(),T("div",zr,[f("div",null,[f("img",{src:e.coinIcon?e.coinIcon:e.store.theme=="default"?e.importIcon("/image/coins/unknown.png"):e.importIcon("/image/coins/sui-unknown.png")},null,8,Hr),f("div",Xr,[f("div",Vr,C(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinName?(A(),T("div",Kr,C(e.coinName)+" "+C(e.coinLabels?`(${e.coinLabels})`:""),1)):W("",!0)])]),Yr])}const jr=He(xr,[["render",Wr],["__scopeId","data-v-41d2d913"]]),Gr=ze({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})}},setup(){const e=Ke();return{storeIndex:Q(()=>e)}}});const Qr={class:"unilateral"},Jr={key:0,src:go,alt:""},Zr={key:1,src:yo,alt:""},ea={key:2};function ta(e,t,n,i,o,r){return A(),T("div",Qr,[f("div",null,[e.storeIndex.theme=="default"?(A(),T("img",Jr)):(A(),T("img",Zr)),e.fromCoin&&e.toCoin&&e.poolInfo?(A(),T("p",ea,C(e.$t("tips.marketprice")),1)):W("",!0)])])}const na=He(Gr,[["render",ta],["__scopeId","data-v-159ba678"]]),ia=ze({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})},showfromCoinLock:{type:Boolean,default:!1},showtoCoinLock:{type:Boolean,default:!1}},setup(){const e=Ke();return{storeIndex:Q(()=>e)}}});const oa={class:"create-pool-lock"},ra={key:0,src:go,alt:""},aa={key:1,src:yo,alt:""};function sa(e,t,n,i,o,r){return A(),T("div",oa,[f("div",null,[e.storeIndex.theme=="default"?(A(),T("img",ra)):(A(),T("img",aa))])])}const la=He(ia,[["render",sa],["__scopeId","data-v-d1ea9947"]]),ua=ze({props:{minPrice:{type:String,default:""},maxPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},slippage:{type:Number,default:0},currentPrice:{type:Number,default:0},currentPriceReverse:{type:Number,default:0},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""}},setup(e){const t=S(""),n=S(""),i=Ke(),o=Q(()=>i),r=Q(()=>o.value.chainName?di(o.value.chainName):{}),a=Sn(),s=async()=>{var Y;if(!e.minPrice&&!e.maxPrice)return;const{TickUtil:d,TickMath:y,getNearestTickByTick:$}=r.value,N=e.poolInfo.token_a.decimals,h=e.poolInfo.token_b.decimals;let g,_,b,p,I,M,J,B=1,X=1;const z=e.poolInfo.current_tick_index,P=e.poolInfo.priceConfigObj;if(e.poolInfo.token_a.address.toLowerCase()===e.fromCoin.address.toLowerCase()&&e.poolInfo.token_b.address.toLowerCase()===e.toCoin.address.toLowerCase()?J=!0:J=!1,e.minPrice==="0"&&e.maxPrice==="\u221E"?(b=d.getMinIndex(e.poolInfo.tickSpacing),p=d.getMaxIndex(e.poolInfo.tickSpacing),y.tickIndexToSqrtPriceX64(b),y.tickIndexToSqrtPriceX64(p)):e.currentPriceTab=="Custom"||((Y=a==null?void 0:a.query)==null?void 0:Y.action)?(J?(g=Number(e.minPrice),_=Number(e.maxPrice)):(g=1/Number(e.maxPrice),_=1/Number(e.minPrice)),I=y.priceToTickIndex(new F(g),N,h),M=y.priceToTickIndex(new F(_),N,h),g==0&&(I=-443630),b=I,p=M,y.priceToSqrtPriceX64(new F(g),N,h),y.priceToSqrtPriceX64(new F(_),N,h)):(b=P&&P[e.currentPriceTab]&&P[e.currentPriceTab].lower,p=P&&P[e.currentPriceTab]&&P[e.currentPriceTab].upper,y.tickIndexToSqrtPriceX64(b),y.tickIndexToSqrtPriceX64(p)),e.maxPrice==="\u221E"||z>b&&z<p){let j;if(e.fixedFromCoin){const H=new F(1).mul(Math.pow(10,e.fromCoin.decimals)).toString();j=new Qe(H)}else{const H=new F(1).mul(Math.pow(10,e.toCoin.decimals)).toString();j=new Qe(H)}const{tokenMaxA:U,tokenMaxB:E}=await r.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:e.poolInfo.token_a,tokenB:e.poolInfo.token_b,lowerTick:b,upperTick:p,coinAmount:j,iscoinA:J?e.fixedFromCoin:!e.fixedFromCoin,roundUp:!0,slippage:Number(e.slippage)/100,curSqrtPrice:new Qe(e.poolInfo.current_sqrt_price)});J?e.fixedFromCoin?X=Number(E)>0?E:"":B=Number(U)>0?U:"":e.fixedFromCoin?X=U:B=E}else z>=p?J?(X=1,B=0):(B=1,X=0):z<=b&&(J?(X=0,B=1):(X=1,B=0));const V=B?Number(B):0,O=X?Number(X):0,L=O+Number(J?V*e.currentPrice:V*e.currentPriceReverse),te=((J?e.currentPrice*V:e.currentPriceReverse*V)/L*100).toFixed(0),G=(O/L*100).toFixed(0);t.value=te,n.value=G};le(()=>[e.poolInfo,e.minPrice,e.maxPrice],([d,y,$])=>{y&&$&&d&&!Pt(d)?s():(t.value="",n.value="")},{immediate:!0,deep:!0});let l={};const u=qt(),c=Q(()=>u);le(()=>c.value.RATES,d=>{d&&(l=d)},{immediate:!0});const m=Q(()=>{const d=Yt(Number(e.fromCoinAmount)*Number(l&&l[e.fromCoin.address]&&l[e.fromCoin.address].price),2),y=Yt(Number(e.toCoinAmount)*Number(l&&l[e.toCoin.address]&&l[e.toCoin.address].price),2);return d!=="--"&&y!=="--"?Number(d)+Number(y):"--"});return{fromCoinRatio:t,toCoinRatio:n,totalAmount:m,fixD:Yt}}});const ca=e=>(ht("data-v-b63cfaf6"),e=e(),pt(),e),fa={class:"deposit-ratio"},da={class:"lebal"},ma=ca(()=>f("svg",{class:"icon","aria-hidden":"true"},[f("use",{"xlink:href":"#icon-icon-information"})],-1)),ha={class:"text"},pa={key:0,class:"deposit-ratio totalAmount"},va={class:"lebal"},ga={class:"text"};function ya(e,t,n,i,o,r){const a=lo;return A(),T(dt,null,[f("div",fa,[f("div",da,[ke(C(e.$t("newAdd.depositRatio"))+" ",1),se(a,{placement:"bottom","arrow-point-at-center":""},{title:he(()=>[f("span",null,C(e.$t("newAdd.depositRatioTips")),1)]),default:he(()=>[ma]),_:1})]),f("div",ha,C(e.fromCoinRatio!=="--"?e.fromCoinRatio+"%":"--")+" "+C(e.fromCoinRatio!=="--"?e.fromCoin&&e.fromCoin.symbol:"")+" / "+C(e.toCoinRatio!=="--"?e.toCoinRatio+"%":"--")+" "+C(e.toCoinRatio!=="--"?e.toCoin&&e.toCoin.symbol:""),1)]),e.fromCoinAmount&&e.toCoinAmount?(A(),T("div",pa,[f("div",va,C(e.$t("newAdd.totalAmount")),1),f("div",ga,"$"+C(e.fixD(e.totalAmount,2)),1)])):W("",!0)],64)}const ba=He(ua,[["render",ya],["__scopeId","data-v-b63cfaf6"]]),wa=ze({props:{clickClear:{type:Boolean,default:!1},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})}},setup(e,t){const n=S("");return le(()=>e.clickClear,o=>{o&&(n.value="",t.emit("changecurrentPrice",""))},{immediate:!0}),{inpValue:n,changecurrentPrice:o=>{o.target.value=o.target.value.replace(/[^\d-]*(\d*(?:\.\d{0,8})?).*$/g,"$1"),n.value=o.target.value,t.emit("changecurrentPrice",o.target.value)}}}});const _a={class:"set-init-price"},ka={class:"init-price-tips"};function Ca(e,t,n,i,o,r){var s,l,u,c;const a=uo;return A(),T("div",_a,[se(a,{type:"text",placeholder:"0.0",value:e.inpValue,"onUpdate:value":t[0]||(t[0]=m=>e.inpValue=m),disabled:!((l=(s=e.$route)==null?void 0:s.query)!=null&&l.fee),onChange:e.changecurrentPrice},null,8,["value","disabled","onChange"]),f("div",ka,C((u=e.toCoin)==null?void 0:u.symbol)+" per "+C((c=e.fromCoin)==null?void 0:c.symbol),1)])}const $a=He(wa,[["render",Ca],["__scopeId","data-v-b572c017"]]),Aa=-443630;function Hn(e,t){const n=Ia(e),i=(n-Aa)%t;return i>t/2?n-i+t:n-i}const wo=new F("1.0001");function Ia(e){return e.log(wo).toDP(0,F.ROUND_HALF_UP).toNumber()}function Xn(e){return wo.pow(e)}const Pa=ze({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1}},emits:["onInput"],setup(e,t){const n=S(""),i=S("");let o=S(""),r=S("");const a=Sn(),s=()=>{if(Number.isNaN(n.value)||Number(n.value)!==0&&!n.value||!e.poolInfo.tickSpacing)return;const y=Hn(new F(n.value.toString()),Number(m.value.tickSpacing)),$=Xn(y+Number(m.value.tickSpacing));if(e.pType=="Min"&&Number($.toString())>=Number(r.value.toString()))return;const N=$.toString();t.emit("onInput",N)},l=()=>{if(Number.isNaN(n.value)||!n.value||!e.poolInfo.tickSpacing)return;const y=Hn(new F(n.value),Number(m.value.tickSpacing)),$=Xn(y-Number(m.value.tickSpacing)),N=$.toString();e.pType=="Max"&&Number($)<=Number(o.value)||t.emit("onInput",N)},u=y=>{let $=y.toString().replace(/[^\d.]/g,"");const N=/^\d+(\.\d+)?$/;$.split(".").length>2&&!N.exec($)&&($=$.substr(0,$.length-1)),i.value=$,(Je($,6)>0||String($)=="0")&&t.emit("onInput",$.toString())},c=y=>{const $=Hn(new F(y),Number(m.value.tickSpacing)),N=Xn($);t.emit("onInput",N.toString())};le(()=>e.defaultMinPrice,(y,$)=>{y!==$&&(o.value=e.defaultMinPrice)},{immediate:!0}),le(()=>e.defaultMaxPrice,(y,$)=>{y!==$&&(r.value=e.defaultMaxPrice)},{immediate:!0}),le(()=>e.inputValue,y=>{if(y&&y!=="0"&&y!=="\u221E"){n.value=y;const N=y.toString().split(".")[1];i.value=y!=="0"&&y!=="\u221E"&&N&&N.length>6?Je(y.toString(),6):y.toString()}else(y=="0"||y=="\u221E")&&(i.value=y)},{immediate:!0});const m=S({});le(()=>e.poolInfo,(y,$)=>{y&&(m.value=y)},{immediate:!0});const d=S("");return le(()=>e.currentPriceTab,y=>{d.value=y},{immediate:!0}),{addPrice:s,minusPrice:l,oValue:i,changeValue:u,isDisabled:d,route:a,onBlur:c}}});const Sa={class:"set-price-item"},Na={class:"title"},Ta={class:"input-box"},Ma={key:0,class:"minus-btn"},Ea=["disabled"],Ra={key:1,class:"plus-btn"};function La(e,t,n,i,o,r){const a=uo,s=co;return A(),T("div",Sa,[f("div",Na,C(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),se(s,{loading:e.loading,active:"",paragraph:!1},{default:he(()=>{var l,u,c,m;return[f("div",Ta,[e.isDisabled=="Custom"||((u=(l=e.$route)==null?void 0:l.query)==null?void 0:u.action)?(A(),T("a",Ma,[f("div",{class:Se(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:t[0]||(t[0]=(...d)=>e.minusPrice&&e.minusPrice(...d))},null,10,Ea)])):W("",!0),se(a,{id:"pValu",value:e.oValue,"onUpdate:value":t[1]||(t[1]=d=>e.oValue=d),disabled:e.isDisabled!=="Custom"&&!e.route.query.action,autocomplete:"off",placeholder:"0",onChange:t[2]||(t[2]=d=>e.changeValue(d.target.value)),onBlur:t[3]||(t[3]=d=>e.onBlur(d.target.value))},null,8,["value","disabled"]),e.isDisabled=="Custom"||((m=(c=e.$route)==null?void 0:c.query)==null?void 0:m.action)?(A(),T("a",Ra,[f("div",{class:Se(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"addDis":"add"),onClick:t[4]||(t[4]=(...d)=>e.addPrice&&e.addPrice(...d))},null,2)])):W("",!0)])]}),_:1},8,["loading"]),f("p",{class:Se(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},C(e.toCoin&&e.toCoin.symbol)+" per "+C(e.fromCoin&&e.fromCoin.symbol),3)])}const Ti=He(Pa,[["render",La],["__scopeId","data-v-75230be1"]]),qa=ze({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1}},setup(e,t){let n=S(""),i=S(""),o=S(),r=S(!1),a=S(!1);const s=S({}),l=Ke(),u=Q(()=>l);Pn(()=>{n.value=e.min,i.value=e.max}),le(()=>e.currentPriceTab,(N,h)=>{N!==h&&(o.value=e.currentPriceTab)},{immediate:!0}),le(()=>e.min,(N,h)=>{N!==h&&(n.value=N)}),le(()=>e.max,(N,h)=>{N!==h&&(i.value=N)}),le(()=>e.poolInfo,(N,h)=>{N&&(s.value=N)},{immediate:!0});const c=N=>{n.value=N,t.emit("onChangeMinPrice",N)},m=N=>{i.value=N,t.emit("onChangeMaxPrice",N)};le(r,(N,h)=>{N!==h&&t.emit("onChangeFullRange",N)});const d=()=>{n.value=e.defaultMinPrice,i.value=e.defaultMaxPrice,a.value=!1,r.value=!1},y=()=>{a.value=!1,n.value="0",i.value="\u221E"};return le(r,(N,h)=>{N!==h&&t.emit("onChangeFullRange",N)}),{store:u,changeMinPrice:c,changeMaxPrice:m,importIcon:Qt,resetPrice:d,changeShowUnderStand:()=>{r.value=!r.value,r.value?a.value=!0:d(),a.value||(n.value=e.defaultMinPrice,i.value=e.defaultMaxPrice)},showUnderStand:a,minPrice:n,maxPrice:i,understand:y,isRadio:r}}});const Fa={class:"set-price"},Ba={class:"card-container"},Oa={key:0,class:"card"},Ua=["src"],xa={key:1,class:"understand"},Da={class:"left"},za={class:"right"};function Ha(e,t,n,i,o,r){const a=Ti,s=Ti,l=Nn;return A(),T("div",Fa,[f("div",Ba,[e.showUnderStand?(A(),T("div",xa,[f("div",Da,[f("p",null,C(e.$t("common.lowerEfficiency")),1),f("p",null,C(e.$t("common.lowerEfficiencyTips")),1)]),f("div",za,[se(l,{onClick:e.understand},{default:he(()=>[ke(C(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(A(),T("div",Oa,[se(a,{value:e.minPrice,"onUpdate:value":t[0]||(t[0]=u=>e.minPrice=u),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","onOnInput","onAddValue","onDelValue"]),se(s,{value:e.maxPrice,"onUpdate:value":t[1]||(t[1]=u=>e.maxPrice=u),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","onOnInput","onAddValue","onDelValue"]),f("img",{src:e.importIcon("/image/lmg-line@2x.png"),alt:""},null,8,Ua)]))])])}const Xa=He(qa,[["render",Ha],["__scopeId","data-v-c2ba1b54"]]);function fn(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Va(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _o(e){let t,n,i;e.length!==2?(t=fn,n=(s,l)=>fn(e(s),l),i=(s,l)=>e(s)-l):(t=e===fn||e===Va?e:Ka,n=e,i=e);function o(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const m=u+c>>>1;n(s[m],l)<0?u=m+1:c=m}while(u<c)}return u}function r(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const m=u+c>>>1;n(s[m],l)<=0?u=m+1:c=m}while(u<c)}return u}function a(s,l,u=0,c=s.length){const m=o(s,l,u,c-1);return m>u&&i(s[m-1],l)>-i(s[m],l)?m-1:m}return{left:o,center:a,right:r}}function Ka(){return 0}function Ya(e){return e===null?NaN:+e}const Wa=_o(fn),ja=Wa.right;_o(Ya).center;const Ga=ja;class Mi extends Map{constructor(t,n=Za){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,o]of t)this.set(i,o)}get(t){return super.get(Ei(this,t))}has(t){return super.has(Ei(this,t))}set(t,n){return super.set(Qa(this,t),n)}delete(t){return super.delete(Ja(this,t))}}function Ei({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function Qa({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function Ja({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function Za(e){return e!==null&&typeof e=="object"?e.valueOf():e}const es=Math.sqrt(50),ts=Math.sqrt(10),ns=Math.sqrt(2);function vn(e,t,n){const i=(t-e)/Math.max(0,n),o=Math.floor(Math.log10(i)),r=i/Math.pow(10,o),a=r>=es?10:r>=ts?5:r>=ns?2:1;let s,l,u;return o<0?(u=Math.pow(10,-o)/a,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,o)*a,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?vn(e,t,n*2):[s,l,u]}function is(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[o,r,a]=i?vn(t,e,n):vn(e,t,n);if(!(r>=o))return[];const s=r-o+1,l=new Array(s);if(i)if(a<0)for(let u=0;u<s;++u)l[u]=(r-u)/-a;else for(let u=0;u<s;++u)l[u]=(r-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(o+u)/-a;else for(let u=0;u<s;++u)l[u]=(o+u)*a;return l}function ei(e,t,n){return t=+t,e=+e,n=+n,vn(e,t,n)[2]}function os(e,t,n){t=+t,e=+e,n=+n;const i=t<e,o=i?ei(t,e,n):ei(e,t,n);return(i?-1:1)*(o<0?1/-o:o)}function rs(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o)}return n}function as(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var i=-1,o=Math.max(0,Math.ceil((t-e)/n))|0,r=new Array(o);++i<o;)r[i]=e+i*n;return r}var ss={value:()=>{}};function pi(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new dn(n)}function dn(e){this._=e}function ls(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}dn.prototype=pi.prototype={constructor:dn,on:function(e,t){var n=this._,i=ls(e+"",n),o,r=-1,a=i.length;if(arguments.length<2){for(;++r<a;)if((o=(e=i[r]).type)&&(o=us(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<a;)if(o=(e=i[r]).type)n[o]=Ri(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Ri(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new dn(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,r;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)}};function us(e,t){for(var n=0,i=e.length,o;n<i;++n)if((o=e[n]).name===t)return o.value}function Ri(e,t,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=ss,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var ti="http://www.w3.org/1999/xhtml";const Li={svg:"http://www.w3.org/2000/svg",xhtml:ti,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Tn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Li.hasOwnProperty(t)?{space:Li[t],local:e}:e}function cs(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ti&&t.documentElement.namespaceURI===ti?t.createElement(e):t.createElementNS(n,e)}}function fs(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ko(e){var t=Tn(e);return(t.local?fs:cs)(t)}function ds(){}function vi(e){return e==null?ds:function(){return this.querySelector(e)}}function ms(e){typeof e!="function"&&(e=vi(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var r=t[o],a=r.length,s=i[o]=new Array(a),l,u,c=0;c<a;++c)(l=r[c])&&(u=e.call(l,l.__data__,c,r))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new De(i,this._parents)}function hs(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ps(){return[]}function Co(e){return e==null?ps:function(){return this.querySelectorAll(e)}}function vs(e){return function(){return hs(e.apply(this,arguments))}}function gs(e){typeof e=="function"?e=vs(e):e=Co(e);for(var t=this._groups,n=t.length,i=[],o=[],r=0;r<n;++r)for(var a=t[r],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(i.push(e.call(l,l.__data__,u,a)),o.push(l));return new De(i,o)}function $o(e){return function(){return this.matches(e)}}function Ao(e){return function(t){return t.matches(e)}}var ys=Array.prototype.find;function bs(e){return function(){return ys.call(this.children,e)}}function ws(){return this.firstElementChild}function _s(e){return this.select(e==null?ws:bs(typeof e=="function"?e:Ao(e)))}var ks=Array.prototype.filter;function Cs(){return Array.from(this.children)}function $s(e){return function(){return ks.call(this.children,e)}}function As(e){return this.selectAll(e==null?Cs:$s(typeof e=="function"?e:Ao(e)))}function Is(e){typeof e!="function"&&(e=$o(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var r=t[o],a=r.length,s=i[o]=[],l,u=0;u<a;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&s.push(l);return new De(i,this._parents)}function Io(e){return new Array(e.length)}function Ps(){return new De(this._enter||this._groups.map(Io),this._parents)}function gn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}gn.prototype={constructor:gn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ss(e){return function(){return e}}function Ns(e,t,n,i,o,r){for(var a=0,s,l=t.length,u=r.length;a<u;++a)(s=t[a])?(s.__data__=r[a],i[a]=s):n[a]=new gn(e,r[a]);for(;a<l;++a)(s=t[a])&&(o[a]=s)}function Ts(e,t,n,i,o,r,a){var s,l,u=new Map,c=t.length,m=r.length,d=new Array(c),y;for(s=0;s<c;++s)(l=t[s])&&(d[s]=y=a.call(l,l.__data__,s,t)+"",u.has(y)?o[s]=l:u.set(y,l));for(s=0;s<m;++s)y=a.call(e,r[s],s,r)+"",(l=u.get(y))?(i[s]=l,l.__data__=r[s],u.delete(y)):n[s]=new gn(e,r[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(d[s])===l&&(o[s]=l)}function Ms(e){return e.__data__}function Es(e,t){if(!arguments.length)return Array.from(this,Ms);var n=t?Ts:Ns,i=this._parents,o=this._groups;typeof e!="function"&&(e=Ss(e));for(var r=o.length,a=new Array(r),s=new Array(r),l=new Array(r),u=0;u<r;++u){var c=i[u],m=o[u],d=m.length,y=Rs(e.call(c,c&&c.__data__,u,i)),$=y.length,N=s[u]=new Array($),h=a[u]=new Array($),g=l[u]=new Array(d);n(c,m,N,h,g,y,t);for(var _=0,b=0,p,I;_<$;++_)if(p=N[_]){for(_>=b&&(b=_+1);!(I=h[b])&&++b<$;);p._next=I||null}}return a=new De(a,i),a._enter=s,a._exit=l,a}function Rs(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ls(){return new De(this._exit||this._groups.map(Io),this._parents)}function qs(e,t,n){var i=this.enter(),o=this,r=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?r.remove():n(r),i&&o?i.merge(o).order():o}function Fs(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,o=n.length,r=i.length,a=Math.min(o,r),s=new Array(o),l=0;l<a;++l)for(var u=n[l],c=i[l],m=u.length,d=s[l]=new Array(m),y,$=0;$<m;++$)(y=u[$]||c[$])&&(d[$]=y);for(;l<o;++l)s[l]=n[l];return new De(s,this._parents)}function Bs(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],o=i.length-1,r=i[o],a;--o>=0;)(a=i[o])&&(r&&a.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(a,r),r=a);return this}function Os(e){e||(e=Us);function t(m,d){return m&&d?e(m.__data__,d.__data__):!m-!d}for(var n=this._groups,i=n.length,o=new Array(i),r=0;r<i;++r){for(var a=n[r],s=a.length,l=o[r]=new Array(s),u,c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(t)}return new De(o,this._parents).order()}function Us(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function xs(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ds(){return Array.from(this)}function zs(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,r=i.length;o<r;++o){var a=i[o];if(a)return a}return null}function Hs(){let e=0;for(const t of this)++e;return e}function Xs(){return!this.node()}function Vs(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var o=t[n],r=0,a=o.length,s;r<a;++r)(s=o[r])&&e.call(s,s.__data__,r,o);return this}function Ks(e){return function(){this.removeAttribute(e)}}function Ys(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ws(e,t){return function(){this.setAttribute(e,t)}}function js(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Gs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Qs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Js(e,t){var n=Tn(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?Ys:Ks:typeof t=="function"?n.local?Qs:Gs:n.local?js:Ws)(n,t))}function Po(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Zs(e){return function(){this.style.removeProperty(e)}}function el(e,t,n){return function(){this.style.setProperty(e,t,n)}}function tl(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function nl(e,t,n){return arguments.length>1?this.each((t==null?Zs:typeof t=="function"?tl:el)(e,t,n==null?"":n)):Et(this.node(),e)}function Et(e,t){return e.style.getPropertyValue(t)||Po(e).getComputedStyle(e,null).getPropertyValue(t)}function il(e){return function(){delete this[e]}}function ol(e,t){return function(){this[e]=t}}function rl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function al(e,t){return arguments.length>1?this.each((t==null?il:typeof t=="function"?rl:ol)(e,t)):this.node()[e]}function So(e){return e.trim().split(/^|\s+/)}function gi(e){return e.classList||new No(e)}function No(e){this._node=e,this._names=So(e.getAttribute("class")||"")}No.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function To(e,t){for(var n=gi(e),i=-1,o=t.length;++i<o;)n.add(t[i])}function Mo(e,t){for(var n=gi(e),i=-1,o=t.length;++i<o;)n.remove(t[i])}function sl(e){return function(){To(this,e)}}function ll(e){return function(){Mo(this,e)}}function ul(e,t){return function(){(t.apply(this,arguments)?To:Mo)(this,e)}}function cl(e,t){var n=So(e+"");if(arguments.length<2){for(var i=gi(this.node()),o=-1,r=n.length;++o<r;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?ul:t?sl:ll)(n,t))}function fl(){this.textContent=""}function dl(e){return function(){this.textContent=e}}function ml(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function hl(e){return arguments.length?this.each(e==null?fl:(typeof e=="function"?ml:dl)(e)):this.node().textContent}function pl(){this.innerHTML=""}function vl(e){return function(){this.innerHTML=e}}function gl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function yl(e){return arguments.length?this.each(e==null?pl:(typeof e=="function"?gl:vl)(e)):this.node().innerHTML}function bl(){this.nextSibling&&this.parentNode.appendChild(this)}function wl(){return this.each(bl)}function _l(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function kl(){return this.each(_l)}function Cl(e){var t=typeof e=="function"?e:ko(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function $l(){return null}function Al(e,t){var n=typeof e=="function"?e:ko(e),i=t==null?$l:typeof t=="function"?t:vi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Il(){var e=this.parentNode;e&&e.removeChild(this)}function Pl(){return this.each(Il)}function Sl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Nl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Tl(e){return this.select(e?Nl:Sl)}function Ml(e){return arguments.length?this.property("__data__",e):this.node().__data__}function El(e){return function(t){e.call(this,t,this.__data__)}}function Rl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Ll(e){return function(){var t=this.__on;if(!!t){for(var n=0,i=-1,o=t.length,r;n<o;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++i]=r;++i?t.length=i:delete this.__on}}}function ql(e,t,n){return function(){var i=this.__on,o,r=El(t);if(i){for(var a=0,s=i.length;a<s;++a)if((o=i[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),o.value=t;return}}this.addEventListener(e.type,r,n),o={type:e.type,name:e.name,value:t,listener:r,options:n},i?i.push(o):this.__on=[o]}}function Fl(e,t,n){var i=Rl(e+""),o,r=i.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(o=0,c=s[l];o<r;++o)if((a=i[o]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?ql:Ll,o=0;o<r;++o)this.each(s(i[o],t,n));return this}function Eo(e,t,n){var i=Po(e),o=i.CustomEvent;typeof o=="function"?o=new o(t,n):(o=i.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Bl(e,t){return function(){return Eo(this,e,t)}}function Ol(e,t){return function(){return Eo(this,e,t.apply(this,arguments))}}function Ul(e,t){return this.each((typeof t=="function"?Ol:Bl)(e,t))}function*xl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,r=i.length,a;o<r;++o)(a=i[o])&&(yield a)}var Ro=[null];function De(e,t){this._groups=e,this._parents=t}function Jt(){return new De([[document.documentElement]],Ro)}function Dl(){return this}De.prototype=Jt.prototype={constructor:De,select:ms,selectAll:gs,selectChild:_s,selectChildren:As,filter:Is,data:Es,enter:Ps,exit:Ls,join:qs,merge:Fs,selection:Dl,order:Bs,sort:Os,call:xs,nodes:Ds,node:zs,size:Hs,empty:Xs,each:Vs,attr:Js,style:nl,property:al,classed:cl,text:hl,html:yl,raise:wl,lower:kl,append:Cl,insert:Al,remove:Pl,clone:Tl,datum:Ml,on:Fl,dispatch:Ul,[Symbol.iterator]:xl};function et(e){return typeof e=="string"?new De([[document.querySelector(e)]],[document.documentElement]):new De([[e]],Ro)}function zl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function qi(e,t){if(e=zl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const ni={capture:!0,passive:!1};function ii(e){e.preventDefault(),e.stopImmediatePropagation()}function Hl(e){var t=e.document.documentElement,n=et(e).on("dragstart.drag",ii,ni);"onselectstart"in t?n.on("selectstart.drag",ii,ni):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Xl(e,t){var n=e.document.documentElement,i=et(e).on("dragstart.drag",null);t&&(i.on("click.drag",ii,ni),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function yi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Lo(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Zt(){}var Wt=.7,yn=1/Wt,Mt="\\s*([+-]?\\d+)\\s*",jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vl=/^#([0-9a-f]{3,8})$/,Kl=new RegExp(`^rgb\\(${Mt},${Mt},${Mt}\\)$`),Yl=new RegExp(`^rgb\\(${ot},${ot},${ot}\\)$`),Wl=new RegExp(`^rgba\\(${Mt},${Mt},${Mt},${jt}\\)$`),jl=new RegExp(`^rgba\\(${ot},${ot},${ot},${jt}\\)$`),Gl=new RegExp(`^hsl\\(${jt},${ot},${ot}\\)$`),Ql=new RegExp(`^hsla\\(${jt},${ot},${ot},${jt}\\)$`),Fi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yi(Zt,_t,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Bi,formatHex:Bi,formatHex8:Jl,formatHsl:Zl,formatRgb:Oi,toString:Oi});function Bi(){return this.rgb().formatHex()}function Jl(){return this.rgb().formatHex8()}function Zl(){return qo(this).formatHsl()}function Oi(){return this.rgb().formatRgb()}function _t(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Vl.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ui(t):n===3?new Fe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?sn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?sn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Kl.exec(e))?new Fe(t[1],t[2],t[3],1):(t=Yl.exec(e))?new Fe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Wl.exec(e))?sn(t[1],t[2],t[3],t[4]):(t=jl.exec(e))?sn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Gl.exec(e))?zi(t[1],t[2]/100,t[3]/100,1):(t=Ql.exec(e))?zi(t[1],t[2]/100,t[3]/100,t[4]):Fi.hasOwnProperty(e)?Ui(Fi[e]):e==="transparent"?new Fe(NaN,NaN,NaN,0):null}function Ui(e){return new Fe(e>>16&255,e>>8&255,e&255,1)}function sn(e,t,n,i){return i<=0&&(e=t=n=NaN),new Fe(e,t,n,i)}function eu(e){return e instanceof Zt||(e=_t(e)),e?(e=e.rgb(),new Fe(e.r,e.g,e.b,e.opacity)):new Fe}function oi(e,t,n,i){return arguments.length===1?eu(e):new Fe(e,t,n,i==null?1:i)}function Fe(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}yi(Fe,oi,Lo(Zt,{brighter(e){return e=e==null?yn:Math.pow(yn,e),new Fe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Wt:Math.pow(Wt,e),new Fe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fe(wt(this.r),wt(this.g),wt(this.b),bn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xi,formatHex:xi,formatHex8:tu,formatRgb:Di,toString:Di}));function xi(){return`#${bt(this.r)}${bt(this.g)}${bt(this.b)}`}function tu(){return`#${bt(this.r)}${bt(this.g)}${bt(this.b)}${bt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Di(){const e=bn(this.opacity);return`${e===1?"rgb(":"rgba("}${wt(this.r)}, ${wt(this.g)}, ${wt(this.b)}${e===1?")":`, ${e})`}`}function bn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function bt(e){return e=wt(e),(e<16?"0":"")+e.toString(16)}function zi(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tt(e,t,n,i)}function qo(e){if(e instanceof tt)return new tt(e.h,e.s,e.l,e.opacity);if(e instanceof Zt||(e=_t(e)),!e)return new tt;if(e instanceof tt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),r=Math.max(t,n,i),a=NaN,s=r-o,l=(r+o)/2;return s?(t===r?a=(n-i)/s+(n<i)*6:n===r?a=(i-t)/s+2:a=(t-n)/s+4,s/=l<.5?r+o:2-r-o,a*=60):s=l>0&&l<1?0:a,new tt(a,s,l,e.opacity)}function nu(e,t,n,i){return arguments.length===1?qo(e):new tt(e,t,n,i==null?1:i)}function tt(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}yi(tt,nu,Lo(Zt,{brighter(e){return e=e==null?yn:Math.pow(yn,e),new tt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Wt:Math.pow(Wt,e),new tt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,o=2*n-i;return new Fe(Vn(e>=240?e-240:e+120,o,i),Vn(e,o,i),Vn(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new tt(Hi(this.h),ln(this.s),ln(this.l),bn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=bn(this.opacity);return`${e===1?"hsl(":"hsla("}${Hi(this.h)}, ${ln(this.s)*100}%, ${ln(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Hi(e){return e=(e||0)%360,e<0?e+360:e}function ln(e){return Math.max(0,Math.min(1,e||0))}function Vn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const bi=e=>()=>e;function iu(e,t){return function(n){return e+n*t}}function ou(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function ru(e){return(e=+e)==1?Fo:function(t,n){return n-t?ou(t,n,e):bi(isNaN(t)?n:t)}}function Fo(e,t){var n=t-e;return n?iu(e,n):bi(isNaN(e)?t:e)}const wn=function e(t){var n=ru(t);function i(o,r){var a=n((o=oi(o)).r,(r=oi(r)).r),s=n(o.g,r.g),l=n(o.b,r.b),u=Fo(o.opacity,r.opacity);return function(c){return o.r=a(c),o.g=s(c),o.b=l(c),o.opacity=u(c),o+""}}return i.gamma=e,i}(1);function au(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),o;return function(r){for(o=0;o<n;++o)i[o]=e[o]*(1-r)+t[o]*r;return i}}function su(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function lu(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,o=new Array(i),r=new Array(n),a;for(a=0;a<i;++a)o[a]=Mn(e[a],t[a]);for(;a<n;++a)r[a]=t[a];return function(s){for(a=0;a<i;++a)r[a]=o[a](s);return r}}function uu(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Ze(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function cu(e,t){var n={},i={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=Mn(e[o],t[o]):i[o]=t[o];return function(r){for(o in n)i[o]=n[o](r);return i}}var ri=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kn=new RegExp(ri.source,"g");function fu(e){return function(){return e}}function du(e){return function(t){return e(t)+""}}function Bo(e,t){var n=ri.lastIndex=Kn.lastIndex=0,i,o,r,a=-1,s=[],l=[];for(e=e+"",t=t+"";(i=ri.exec(e))&&(o=Kn.exec(t));)(r=o.index)>n&&(r=t.slice(n,r),s[a]?s[a]+=r:s[++a]=r),(i=i[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,l.push({i:a,x:Ze(i,o)})),n=Kn.lastIndex;return n<t.length&&(r=t.slice(n),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?du(l[0].x):fu(t):(t=l.length,function(u){for(var c=0,m;c<t;++c)s[(m=l[c]).i]=m.x(u);return s.join("")})}function Mn(e,t){var n=typeof t,i;return t==null||n==="boolean"?bi(t):(n==="number"?Ze:n==="string"?(i=_t(t))?(t=i,wn):Bo:t instanceof _t?wn:t instanceof Date?uu:su(t)?au:Array.isArray(t)?lu:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?cu:Ze)(e,t)}function mu(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Xi=180/Math.PI,ai={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Oo(e,t,n,i,o,r){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),e*i<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:o,translateY:r,rotate:Math.atan2(t,e)*Xi,skewX:Math.atan(l)*Xi,scaleX:a,scaleY:s}}var un;function hu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ai:Oo(t.a,t.b,t.c,t.d,t.e,t.f)}function pu(e){return e==null||(un||(un=document.createElementNS("http://www.w3.org/2000/svg","g")),un.setAttribute("transform",e),!(e=un.transform.baseVal.consolidate()))?ai:(e=e.matrix,Oo(e.a,e.b,e.c,e.d,e.e,e.f))}function Uo(e,t,n,i){function o(u){return u.length?u.pop()+" ":""}function r(u,c,m,d,y,$){if(u!==m||c!==d){var N=y.push("translate(",null,t,null,n);$.push({i:N-4,x:Ze(u,m)},{i:N-2,x:Ze(c,d)})}else(m||d)&&y.push("translate("+m+t+d+n)}function a(u,c,m,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:m.push(o(m)+"rotate(",null,i)-2,x:Ze(u,c)})):c&&m.push(o(m)+"rotate("+c+i)}function s(u,c,m,d){u!==c?d.push({i:m.push(o(m)+"skewX(",null,i)-2,x:Ze(u,c)}):c&&m.push(o(m)+"skewX("+c+i)}function l(u,c,m,d,y,$){if(u!==m||c!==d){var N=y.push(o(y)+"scale(",null,",",null,")");$.push({i:N-4,x:Ze(u,m)},{i:N-2,x:Ze(c,d)})}else(m!==1||d!==1)&&y.push(o(y)+"scale("+m+","+d+")")}return function(u,c){var m=[],d=[];return u=e(u),c=e(c),r(u.translateX,u.translateY,c.translateX,c.translateY,m,d),a(u.rotate,c.rotate,m,d),s(u.skewX,c.skewX,m,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,m,d),u=c=null,function(y){for(var $=-1,N=d.length,h;++$<N;)m[(h=d[$]).i]=h.x(y);return m.join("")}}}var vu=Uo(hu,"px, ","px)","deg)"),gu=Uo(pu,", ",")",")"),Rt=0,Vt=0,Xt=0,xo=1e3,_n,Kt,kn=0,kt=0,En=0,Gt=typeof performance=="object"&&performance.now?performance:Date,Do=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function wi(){return kt||(Do(yu),kt=Gt.now()+En)}function yu(){kt=0}function Cn(){this._call=this._time=this._next=null}Cn.prototype=zo.prototype={constructor:Cn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?wi():+n)+(t==null?0:+t),!this._next&&Kt!==this&&(Kt?Kt._next=this:_n=this,Kt=this),this._call=e,this._time=n,si()},stop:function(){this._call&&(this._call=null,this._time=1/0,si())}};function zo(e,t,n){var i=new Cn;return i.restart(e,t,n),i}function bu(){wi(),++Rt;for(var e=_n,t;e;)(t=kt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Rt}function Vi(){kt=(kn=Gt.now())+En,Rt=Vt=0;try{bu()}finally{Rt=0,_u(),kt=0}}function wu(){var e=Gt.now(),t=e-kn;t>xo&&(En-=t,kn=e)}function _u(){for(var e,t=_n,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:_n=n);Kt=e,si(i)}function si(e){if(!Rt){Vt&&(Vt=clearTimeout(Vt));var t=e-kt;t>24?(e<1/0&&(Vt=setTimeout(Vi,e-Gt.now()-En)),Xt&&(Xt=clearInterval(Xt))):(Xt||(kn=Gt.now(),Xt=setInterval(wu,xo)),Rt=1,Do(Vi))}}function Ki(e,t,n){var i=new Cn;return t=t==null?0:+t,i.restart(o=>{i.stop(),e(o+t)},t,n),i}var ku=pi("start","end","cancel","interrupt"),Cu=[],Ho=0,Yi=1,li=2,mn=3,Wi=4,ui=5,hn=6;function Rn(e,t,n,i,o,r){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;$u(e,n,{name:t,index:i,group:o,on:ku,tween:Cu,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Ho})}function _i(e,t){var n=nt(e,t);if(n.state>Ho)throw new Error("too late; already scheduled");return n}function rt(e,t){var n=nt(e,t);if(n.state>mn)throw new Error("too late; already running");return n}function nt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function $u(e,t,n){var i=e.__transition,o;i[t]=n,n.timer=zo(r,0,n.time);function r(u){n.state=Yi,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,m,d,y;if(n.state!==Yi)return l();for(c in i)if(y=i[c],y.name===n.name){if(y.state===mn)return Ki(a);y.state===Wi?(y.state=hn,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete i[c]):+c<t&&(y.state=hn,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete i[c])}if(Ki(function(){n.state===mn&&(n.state=Wi,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=li,n.on.call("start",e,e.__data__,n.index,n.group),n.state===li){for(n.state=mn,o=new Array(d=n.tween.length),c=0,m=-1;c<d;++c)(y=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++m]=y);o.length=m+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=ui,1),m=-1,d=o.length;++m<d;)o[m].call(e,c);n.state===ui&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=hn,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function ci(e,t){var n=e.__transition,i,o,r=!0,a;if(!!n){t=t==null?null:t+"";for(a in n){if((i=n[a]).name!==t){r=!1;continue}o=i.state>li&&i.state<ui,i.state=hn,i.timer.stop(),i.on.call(o?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[a]}r&&delete e.__transition}}function Au(e){return this.each(function(){ci(this,e)})}function Iu(e,t){var n,i;return function(){var o=rt(this,e),r=o.tween;if(r!==n){i=n=r;for(var a=0,s=i.length;a<s;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}o.tween=i}}function Pu(e,t,n){var i,o;if(typeof n!="function")throw new Error;return function(){var r=rt(this,e),a=r.tween;if(a!==i){o=(i=a).slice();for(var s={name:t,value:n},l=0,u=o.length;l<u;++l)if(o[l].name===t){o[l]=s;break}l===u&&o.push(s)}r.tween=o}}function Su(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=nt(this.node(),n).tween,o=0,r=i.length,a;o<r;++o)if((a=i[o]).name===e)return a.value;return null}return this.each((t==null?Iu:Pu)(n,e,t))}function ki(e,t,n){var i=e._id;return e.each(function(){var o=rt(this,i);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return nt(o,i).value[t]}}function Xo(e,t){var n;return(typeof t=="number"?Ze:t instanceof _t?wn:(n=_t(t))?(t=n,wn):Bo)(e,t)}function Nu(e){return function(){this.removeAttribute(e)}}function Tu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Mu(e,t,n){var i,o=n+"",r;return function(){var a=this.getAttribute(e);return a===o?null:a===i?r:r=t(i=a,n)}}function Eu(e,t,n){var i,o=n+"",r;return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===i?r:r=t(i=a,n)}}function Ru(e,t,n){var i,o,r;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===i&&l===o?r:(o=l,r=t(i=a,s)))}}function Lu(e,t,n){var i,o,r;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===i&&l===o?r:(o=l,r=t(i=a,s)))}}function qu(e,t){var n=Tn(e),i=n==="transform"?gu:Xo;return this.attrTween(e,typeof t=="function"?(n.local?Lu:Ru)(n,i,ki(this,"attr."+e,t)):t==null?(n.local?Tu:Nu)(n):(n.local?Eu:Mu)(n,i,t))}function Fu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Bu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ou(e,t){var n,i;function o(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&Bu(e,r)),n}return o._value=t,o}function Uu(e,t){var n,i;function o(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&Fu(e,r)),n}return o._value=t,o}function xu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Tn(e);return this.tween(n,(i.local?Ou:Uu)(i,t))}function Du(e,t){return function(){_i(this,e).delay=+t.apply(this,arguments)}}function zu(e,t){return t=+t,function(){_i(this,e).delay=t}}function Hu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Du:zu)(t,e)):nt(this.node(),t).delay}function Xu(e,t){return function(){rt(this,e).duration=+t.apply(this,arguments)}}function Vu(e,t){return t=+t,function(){rt(this,e).duration=t}}function Ku(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Xu:Vu)(t,e)):nt(this.node(),t).duration}function Yu(e,t){if(typeof t!="function")throw new Error;return function(){rt(this,e).ease=t}}function Wu(e){var t=this._id;return arguments.length?this.each(Yu(t,e)):nt(this.node(),t).ease}function ju(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;rt(this,e).ease=n}}function Gu(e){if(typeof e!="function")throw new Error;return this.each(ju(this._id,e))}function Qu(e){typeof e!="function"&&(e=$o(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var r=t[o],a=r.length,s=i[o]=[],l,u=0;u<a;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&s.push(l);return new ct(i,this._parents,this._name,this._id)}function Ju(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,o=n.length,r=Math.min(i,o),a=new Array(i),s=0;s<r;++s)for(var l=t[s],u=n[s],c=l.length,m=a[s]=new Array(c),d,y=0;y<c;++y)(d=l[y]||u[y])&&(m[y]=d);for(;s<i;++s)a[s]=t[s];return new ct(a,this._parents,this._name,this._id)}function Zu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ec(e,t,n){var i,o,r=Zu(t)?_i:rt;return function(){var a=r(this,e),s=a.on;s!==i&&(o=(i=s).copy()).on(t,n),a.on=o}}function tc(e,t){var n=this._id;return arguments.length<2?nt(this.node(),n).on.on(e):this.each(ec(n,e,t))}function nc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function ic(){return this.on("end.remove",nc(this._id))}function oc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=vi(e));for(var i=this._groups,o=i.length,r=new Array(o),a=0;a<o;++a)for(var s=i[a],l=s.length,u=r[a]=new Array(l),c,m,d=0;d<l;++d)(c=s[d])&&(m=e.call(c,c.__data__,d,s))&&("__data__"in c&&(m.__data__=c.__data__),u[d]=m,Rn(u[d],t,n,d,u,nt(c,n)));return new ct(r,this._parents,t,n)}function rc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Co(e));for(var i=this._groups,o=i.length,r=[],a=[],s=0;s<o;++s)for(var l=i[s],u=l.length,c,m=0;m<u;++m)if(c=l[m]){for(var d=e.call(c,c.__data__,m,l),y,$=nt(c,n),N=0,h=d.length;N<h;++N)(y=d[N])&&Rn(y,t,n,N,d,$);r.push(d),a.push(c)}return new ct(r,a,t,n)}var ac=Jt.prototype.constructor;function sc(){return new ac(this._groups,this._parents)}function lc(e,t){var n,i,o;return function(){var r=Et(this,e),a=(this.style.removeProperty(e),Et(this,e));return r===a?null:r===n&&a===i?o:o=t(n=r,i=a)}}function Vo(e){return function(){this.style.removeProperty(e)}}function uc(e,t,n){var i,o=n+"",r;return function(){var a=Et(this,e);return a===o?null:a===i?r:r=t(i=a,n)}}function cc(e,t,n){var i,o,r;return function(){var a=Et(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),Et(this,e))),a===l?null:a===i&&l===o?r:(o=l,r=t(i=a,s))}}function fc(e,t){var n,i,o,r="style."+t,a="end."+r,s;return function(){var l=rt(this,e),u=l.on,c=l.value[r]==null?s||(s=Vo(t)):void 0;(u!==n||o!==c)&&(i=(n=u).copy()).on(a,o=c),l.on=i}}function dc(e,t,n){var i=(e+="")=="transform"?vu:Xo;return t==null?this.styleTween(e,lc(e,i)).on("end.style."+e,Vo(e)):typeof t=="function"?this.styleTween(e,cc(e,i,ki(this,"style."+e,t))).each(fc(this._id,e)):this.styleTween(e,uc(e,i,t),n).on("end.style."+e,null)}function mc(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function hc(e,t,n){var i,o;function r(){var a=t.apply(this,arguments);return a!==o&&(i=(o=a)&&mc(e,a,n)),i}return r._value=t,r}function pc(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,hc(e,t,n==null?"":n))}function vc(e){return function(){this.textContent=e}}function gc(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function yc(e){return this.tween("text",typeof e=="function"?gc(ki(this,"text",e)):vc(e==null?"":e+""))}function bc(e){return function(t){this.textContent=e.call(this,t)}}function wc(e){var t,n;function i(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&bc(o)),t}return i._value=e,i}function _c(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,wc(e))}function kc(){for(var e=this._name,t=this._id,n=Ko(),i=this._groups,o=i.length,r=0;r<o;++r)for(var a=i[r],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var c=nt(l,t);Rn(l,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ct(i,this._parents,e,n)}function Cc(){var e,t,n=this,i=n._id,o=n.size();return new Promise(function(r,a){var s={value:a},l={value:function(){--o===0&&r()}};n.each(function(){var u=rt(this,i),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),o===0&&r()})}var $c=0;function ct(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Ko(){return++$c}var lt=Jt.prototype;ct.prototype={constructor:ct,select:oc,selectAll:rc,selectChild:lt.selectChild,selectChildren:lt.selectChildren,filter:Qu,merge:Ju,selection:sc,transition:kc,call:lt.call,nodes:lt.nodes,node:lt.node,size:lt.size,empty:lt.empty,each:lt.each,on:tc,attr:qu,attrTween:xu,style:dc,styleTween:pc,text:yc,textTween:_c,remove:ic,tween:Su,delay:Hu,duration:Ku,ease:Wu,easeVarying:Gu,end:Cc,[Symbol.iterator]:lt[Symbol.iterator]};function Ac(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ic={time:null,delay:0,duration:250,ease:Ac};function Pc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Sc(e){var t,n;e instanceof ct?(t=e._id,e=e._name):(t=Ko(),(n=Ic).time=wi(),e=e==null?null:e+"");for(var i=this._groups,o=i.length,r=0;r<o;++r)for(var a=i[r],s=a.length,l,u=0;u<s;++u)(l=a[u])&&Rn(l,e,t,u,a,n||Pc(l,t));return new ct(i,this._parents,e,t)}Jt.prototype.interrupt=Au;Jt.prototype.transition=Sc;const Yn=e=>()=>e;function Nc(e,{sourceEvent:t,target:n,selection:i,mode:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Tc(e){e.stopImmediatePropagation()}function Wn(e){e.preventDefault(),e.stopImmediatePropagation()}var ji={name:"drag"},jn={name:"space"},At={name:"handle"},It={name:"center"};const{abs:Gi,max:Ie,min:Pe}=Math;function Qi(e){return[+e[0],+e[1]]}function Ji(e){return[Qi(e[0]),Qi(e[1])]}var pn={name:"x",handles:["w","e"].map($n),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Gn={name:"y",handles:["n","s"].map($n),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},ut={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},eo={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Mc={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ec={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function $n(e){return{type:e}}function Rc(e){return!e.ctrlKey&&!e.button}function Lc(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function qc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qn(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Fc(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Bc(){return Oc(pn)}function Oc(e){var t=Lc,n=Rc,i=qc,o=!0,r=pi("start","brush","end"),a=6,s;function l(h){var g=h.property("__brush",N).selectAll(".overlay").data([$n("overlay")]);g.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ut.overlay).merge(g).each(function(){var b=Qn(this).extent;et(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),h.selectAll(".selection").data([$n("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ut.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var _=h.selectAll(".handle").data(e.handles,function(b){return b.type});_.exit().remove(),_.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return ut[b.type]}),h.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(i).on("touchstart.brush",d).on("touchmove.brush",y).on("touchend.brush touchcancel.brush",$).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(h,g,_){h.tween?h.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,p=b.__brush,I=c(b,arguments),M=p.selection,J=e.input(typeof g=="function"?g.apply(this,arguments):g,p.extent),B=Mn(M,J);function X(z){p.selection=z===1&&J===null?null:B(z),u.call(b),I.brush()}return M!==null&&J!==null?X:X(1)}):h.each(function(){var b=this,p=arguments,I=b.__brush,M=e.input(typeof g=="function"?g.apply(b,p):g,I.extent),J=c(b,p).beforestart();ci(b),I.selection=M===null?null:M,u.call(b),J.start(_).brush(_).end(_)})},l.clear=function(h,g){l.move(h,null,g)};function u(){var h=et(this),g=Qn(this).selection;g?(h.selectAll(".selection").style("display",null).attr("x",g[0][0]).attr("y",g[0][1]).attr("width",g[1][0]-g[0][0]).attr("height",g[1][1]-g[0][1]),h.selectAll(".handle").style("display",null).attr("x",function(_){return _.type[_.type.length-1]==="e"?g[1][0]-a/2:g[0][0]-a/2}).attr("y",function(_){return _.type[0]==="s"?g[1][1]-a/2:g[0][1]-a/2}).attr("width",function(_){return _.type==="n"||_.type==="s"?g[1][0]-g[0][0]+a:a}).attr("height",function(_){return _.type==="e"||_.type==="w"?g[1][1]-g[0][1]+a:a})):h.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(h,g,_){var b=h.__brush.emitter;return b&&(!_||!b.clean)?b:new m(h,g,_)}function m(h,g,_){this.that=h,this.args=g,this.state=h.__brush,this.active=0,this.clean=_}m.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(h,g){return this.starting?(this.starting=!1,this.emit("start",h,g)):this.emit("brush",h),this},brush:function(h,g){return this.emit("brush",h,g),this},end:function(h,g){return--this.active===0&&(delete this.state.emitter,this.emit("end",h,g)),this},emit:function(h,g,_){var b=et(this.that).datum();r.call(h,this.that,new Nc(h,{sourceEvent:g,target:l,selection:e.output(this.state.selection),mode:_,dispatch:r}),b)}};function d(h){if(s&&!h.touches||!n.apply(this,arguments))return;var g=this,_=h.target.__data__.type,b=(o&&h.metaKey?_="overlay":_)==="selection"?ji:o&&h.altKey?It:At,p=e===Gn?null:Mc[_],I=e===pn?null:Ec[_],M=Qn(g),J=M.extent,B=M.selection,X=J[0][0],z,P,V=J[0][1],O,L,te=J[1][0],G,Y,j=J[1][1],U,E,H=0,R=0,ge,Ye=p&&I&&o&&h.shiftKey,pe,it,de=Array.from(h.touches||[h],x=>{const ae=x.identifier;return x=qi(x,g),x.point0=x.slice(),x.identifier=ae,x});ci(g);var Ee=c(g,arguments,!0).beforestart();if(_==="overlay"){B&&(ge=!0);const x=[de[0],de[1]||de[0]];M.selection=B=[[z=e===Gn?X:Pe(x[0][0],x[1][0]),O=e===pn?V:Pe(x[0][1],x[1][1])],[G=e===Gn?te:Ie(x[0][0],x[1][0]),U=e===pn?j:Ie(x[0][1],x[1][1])]],de.length>1&&ve(h)}else z=B[0][0],O=B[0][1],G=B[1][0],U=B[1][1];P=z,L=O,Y=G,E=U;var We=et(g).attr("pointer-events","none"),Re=We.selectAll(".overlay").attr("cursor",ut[_]);if(h.touches)Ee.moved=Ne,Ee.ended=Le;else{var je=et(h.view).on("mousemove.brush",Ne,!0).on("mouseup.brush",Le,!0);o&&je.on("keydown.brush",oe,!0).on("keyup.brush",ye,!0),Hl(h.view)}u.call(g),Ee.start(h,b.name);function Ne(x){for(const ae of x.changedTouches||[x])for(const q of de)q.identifier===ae.identifier&&(q.cur=qi(ae,g));if(Ye&&!pe&&!it&&de.length===1){const ae=de[0];Gi(ae.cur[0]-ae[0])>Gi(ae.cur[1]-ae[1])?it=!0:pe=!0}for(const ae of de)ae.cur&&(ae[0]=ae.cur[0],ae[1]=ae.cur[1]);ge=!0,Wn(x),ve(x)}function ve(x){const ae=de[0],q=ae.point0;var w;switch(H=ae[0]-q[0],R=ae[1]-q[1],b){case jn:case ji:{p&&(H=Ie(X-z,Pe(te-G,H)),P=z+H,Y=G+H),I&&(R=Ie(V-O,Pe(j-U,R)),L=O+R,E=U+R);break}case At:{de[1]?(p&&(P=Ie(X,Pe(te,de[0][0])),Y=Ie(X,Pe(te,de[1][0])),p=1),I&&(L=Ie(V,Pe(j,de[0][1])),E=Ie(V,Pe(j,de[1][1])),I=1)):(p<0?(H=Ie(X-z,Pe(te-z,H)),P=z+H,Y=G):p>0&&(H=Ie(X-G,Pe(te-G,H)),P=z,Y=G+H),I<0?(R=Ie(V-O,Pe(j-O,R)),L=O+R,E=U):I>0&&(R=Ie(V-U,Pe(j-U,R)),L=O,E=U+R));break}case It:{p&&(P=Ie(X,Pe(te,z-H*p)),Y=Ie(X,Pe(te,G+H*p))),I&&(L=Ie(V,Pe(j,O-R*I)),E=Ie(V,Pe(j,U+R*I)));break}}Y<P&&(p*=-1,w=z,z=G,G=w,w=P,P=Y,Y=w,_ in Zi&&Re.attr("cursor",ut[_=Zi[_]])),E<L&&(I*=-1,w=O,O=U,U=w,w=L,L=E,E=w,_ in eo&&Re.attr("cursor",ut[_=eo[_]])),M.selection&&(B=M.selection),pe&&(P=B[0][0],Y=B[1][0]),it&&(L=B[0][1],E=B[1][1]),(B[0][0]!==P||B[0][1]!==L||B[1][0]!==Y||B[1][1]!==E)&&(M.selection=[[P,L],[Y,E]],u.call(g),Ee.brush(x,b.name))}function Le(x){if(Tc(x),x.touches){if(x.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else Xl(x.view,ge),je.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);We.attr("pointer-events","all"),Re.attr("cursor",ut.overlay),M.selection&&(B=M.selection),Fc(B)&&(M.selection=null,u.call(g)),Ee.end(x,b.name)}function oe(x){switch(x.keyCode){case 16:{Ye=p&&I;break}case 18:{b===At&&(p&&(G=Y-H*p,z=P+H*p),I&&(U=E-R*I,O=L+R*I),b=It,ve(x));break}case 32:{(b===At||b===It)&&(p<0?G=Y-H:p>0&&(z=P-H),I<0?U=E-R:I>0&&(O=L-R),b=jn,Re.attr("cursor",ut.selection),ve(x));break}default:return}Wn(x)}function ye(x){switch(x.keyCode){case 16:{Ye&&(pe=it=Ye=!1,ve(x));break}case 18:{b===It&&(p<0?G=Y:p>0&&(z=P),I<0?U=E:I>0&&(O=L),b=At,ve(x));break}case 32:{b===jn&&(x.altKey?(p&&(G=Y-H*p,z=P+H*p),I&&(U=E-R*I,O=L+R*I),b=It):(p<0?G=Y:p>0&&(z=P),I<0?U=E:I>0&&(O=L),b=At),Re.attr("cursor",ut[_]),ve(x));break}default:return}Wn(x)}}function y(h){c(this,arguments).moved(h)}function $(h){c(this,arguments).ended(h)}function N(){var h=this.__brush||{selection:null};return h.extent=Ji(t.apply(this,arguments)),h.dim=e,h}return l.extent=function(h){return arguments.length?(t=typeof h=="function"?h:Yn(Ji(h)),l):t},l.filter=function(h){return arguments.length?(n=typeof h=="function"?h:Yn(!!h),l):n},l.touchable=function(h){return arguments.length?(i=typeof h=="function"?h:Yn(!!h),l):i},l.handleSize=function(h){return arguments.length?(a=+h,l):a},l.keyModifiers=function(h){return arguments.length?(o=!!h,l):o},l.on=function(){var h=r.on.apply(r,arguments);return h===r?l:h},l}function Uc(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function An(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Lt(e){return e=An(Math.abs(e)),e?e[1]:NaN}function xc(e,t){return function(n,i){for(var o=n.length,r=[],a=0,s=e[0],l=0;o>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),r.push(n.substring(o-=s,o+s)),!((l+=s+1)>i));)s=e[a=(a+1)%e.length];return r.reverse().join(t)}}function Dc(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var zc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function In(e){if(!(t=zc.exec(e)))throw new Error("invalid format: "+e);var t;return new Ci({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}In.prototype=Ci.prototype;function Ci(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ci.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Hc(e){e:for(var t=e.length,n=1,i=-1,o;n<t;++n)switch(e[n]){case".":i=o=n;break;case"0":i===0&&(i=n),o=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(o+1):e}var Yo;function Xc(e,t){var n=An(e,t);if(!n)return e+"";var i=n[0],o=n[1],r=o-(Yo=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,a=i.length;return r===a?i:r>a?i+new Array(r-a+1).join("0"):r>0?i.slice(0,r)+"."+i.slice(r):"0."+new Array(1-r).join("0")+An(e,Math.max(0,t+r-1))[0]}function to(e,t){var n=An(e,t);if(!n)return e+"";var i=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}const no={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Uc,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>to(e*100,t),r:to,s:Xc,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function io(e){return e}var oo=Array.prototype.map,ro=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Vc(e){var t=e.grouping===void 0||e.thousands===void 0?io:xc(oo.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",r=e.numerals===void 0?io:Dc(oo.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(m){m=In(m);var d=m.fill,y=m.align,$=m.sign,N=m.symbol,h=m.zero,g=m.width,_=m.comma,b=m.precision,p=m.trim,I=m.type;I==="n"?(_=!0,I="g"):no[I]||(b===void 0&&(b=12),p=!0,I="g"),(h||d==="0"&&y==="=")&&(h=!0,d="0",y="=");var M=N==="$"?n:N==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",J=N==="$"?i:/[%p]/.test(I)?a:"",B=no[I],X=/[defgprs%]/.test(I);b=b===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function z(P){var V=M,O=J,L,te,G;if(I==="c")O=B(P)+O,P="";else{P=+P;var Y=P<0||1/P<0;if(P=isNaN(P)?l:B(Math.abs(P),b),p&&(P=Hc(P)),Y&&+P==0&&$!=="+"&&(Y=!1),V=(Y?$==="("?$:s:$==="-"||$==="("?"":$)+V,O=(I==="s"?ro[8+Yo/3]:"")+O+(Y&&$==="("?")":""),X){for(L=-1,te=P.length;++L<te;)if(G=P.charCodeAt(L),48>G||G>57){O=(G===46?o+P.slice(L+1):P.slice(L))+O,P=P.slice(0,L);break}}}_&&!h&&(P=t(P,1/0));var j=V.length+P.length+O.length,U=j<g?new Array(g-j+1).join(d):"";switch(_&&h&&(P=t(U+P,U.length?g-O.length:1/0),U=""),y){case"<":P=V+P+O+U;break;case"=":P=V+U+P+O;break;case"^":P=U.slice(0,j=U.length>>1)+V+P+O+U.slice(j);break;default:P=U+V+P+O;break}return r(P)}return z.toString=function(){return m+""},z}function c(m,d){var y=u((m=In(m),m.type="f",m)),$=Math.max(-8,Math.min(8,Math.floor(Lt(d)/3)))*3,N=Math.pow(10,-$),h=ro[8+$/3];return function(g){return y(N*g)+h}}return{format:u,formatPrefix:c}}var cn,Wo,jo;Kc({thousands:",",grouping:[3],currency:["$",""]});function Kc(e){return cn=Vc(e),Wo=cn.format,jo=cn.formatPrefix,cn}function Yc(e){return Math.max(0,-Lt(Math.abs(e)))}function Wc(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lt(t)/3)))*3-Lt(Math.abs(e)))}function jc(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Lt(t)-Lt(e))+1}function $i(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const ao=Symbol("implicit");function Go(){var e=new Mi,t=[],n=[],i=ao;function o(r){let a=e.get(r);if(a===void 0){if(i!==ao)return i;e.set(r,a=t.push(r)-1)}return n[a%n.length]}return o.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new Mi;for(const a of r)e.has(a)||e.set(a,t.push(a)-1);return o},o.range=function(r){return arguments.length?(n=Array.from(r),o):n.slice()},o.unknown=function(r){return arguments.length?(i=r,o):i},o.copy=function(){return Go(t,n).unknown(i)},$i.apply(o,arguments),o}function Qo(){var e=Go().unknown(void 0),t=e.domain,n=e.range,i=0,o=1,r,a,s=!1,l=0,u=0,c=.5;delete e.unknown;function m(){var d=t().length,y=o<i,$=y?o:i,N=y?i:o;r=(N-$)/Math.max(1,d-l+u*2),s&&(r=Math.floor(r)),$+=(N-$-r*(d-l))*c,a=r*(1-l),s&&($=Math.round($),a=Math.round(a));var h=as(d).map(function(g){return $+r*g});return n(y?h.reverse():h)}return e.domain=function(d){return arguments.length?(t(d),m()):t()},e.range=function(d){return arguments.length?([i,o]=d,i=+i,o=+o,m()):[i,o]},e.rangeRound=function(d){return[i,o]=d,i=+i,o=+o,s=!0,m()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(d){return arguments.length?(s=!!d,m()):s},e.padding=function(d){return arguments.length?(l=Math.min(1,u=+d),m()):l},e.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),m()):l},e.paddingOuter=function(d){return arguments.length?(u=+d,m()):u},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),m()):c},e.copy=function(){return Qo(t(),[i,o]).round(s).paddingInner(l).paddingOuter(u).align(c)},$i.apply(m(),arguments)}function Gc(e){return function(){return e}}function Qc(e){return+e}var so=[0,1];function St(e){return e}function fi(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Gc(isNaN(t)?NaN:.5)}function Jc(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function Zc(e,t,n){var i=e[0],o=e[1],r=t[0],a=t[1];return o<i?(i=fi(o,i),r=n(a,r)):(i=fi(i,o),r=n(r,a)),function(s){return r(i(s))}}function ef(e,t,n){var i=Math.min(e.length,t.length)-1,o=new Array(i),r=new Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<i;)o[a]=fi(e[a],e[a+1]),r[a]=n(t[a],t[a+1]);return function(s){var l=Ga(e,s,1,i)-1;return r[l](o[l](s))}}function tf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function nf(){var e=so,t=so,n=Mn,i,o,r,a=St,s,l,u;function c(){var d=Math.min(e.length,t.length);return a!==St&&(a=Jc(e[0],e[d-1])),s=d>2?ef:Zc,l=u=null,m}function m(d){return d==null||isNaN(d=+d)?r:(l||(l=s(e.map(i),t,n)))(i(a(d)))}return m.invert=function(d){return a(o((u||(u=s(t,e.map(i),Ze)))(d)))},m.domain=function(d){return arguments.length?(e=Array.from(d,Qc),c()):e.slice()},m.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},m.rangeRound=function(d){return t=Array.from(d),n=mu,c()},m.clamp=function(d){return arguments.length?(a=d?!0:St,c()):a!==St},m.interpolate=function(d){return arguments.length?(n=d,c()):n},m.unknown=function(d){return arguments.length?(r=d,m):r},function(d,y){return i=d,o=y,c()}}function of(){return nf()(St,St)}function rf(e,t,n,i){var o=os(e,t,n),r;switch(i=In(i==null?",f":i),i.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(r=Wc(o,a))&&(i.precision=r),jo(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(r=jc(o,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=r-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(r=Yc(o))&&(i.precision=r-(i.type==="%")*2);break}}return Wo(i)}function af(e){var t=e.domain;return e.ticks=function(n){var i=t();return is(i[0],i[i.length-1],n==null?10:n)},e.tickFormat=function(n,i){var o=t();return rf(o[0],o[o.length-1],n==null?10:n,i)},e.nice=function(n){n==null&&(n=10);var i=t(),o=0,r=i.length-1,a=i[o],s=i[r],l,u,c=10;for(s<a&&(u=a,a=s,s=u,u=o,o=r,r=u);c-- >0;){if(u=ei(a,s,n),u===l)return i[o]=a,i[r]=s,t(i);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function Jo(){var e=of();return e.copy=function(){return tf(e,Jo())},$i.apply(e,arguments),af(e)}function Nt(e,t,n){this.k=e,this.x=t,this.y=n}Nt.prototype={constructor:Nt,scale:function(e){return e===1?this:new Nt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Nt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Nt(1,0,0);Nt.prototype;function Jn(e,t,n){const i=new F(10).pow(t-n);return new F(1.0001).pow(e).mul(i)}const sf=ze({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""}},setup(e,t){const n=S(1),i=S(""),o=S(""),r=Q(()=>{var p,I,M;return m.sqrtPriceX64ToPrice((p=e.poolInfo)==null?void 0:p.current_sqrt_price,(I=e.poolInfo)==null?void 0:I.coinA.decimals,(M=e.poolInfo)==null?void 0:M.coinB.decimals).toString()}),a=Q(()=>{let p=0;return e.direction?p=(Number(e.minPrice)/Number(r.value)-1)*100:p=(Number(e.minPrice)/Number(1/Number(r.value))-1)*100,p=p>0&&p<.1?.1:p,p=p<0&&p>-.1?-.1:p,p}),s=Q(()=>{let p=0;return e.direction?p=(Number(e.maxPrice)/Number(r.value)-1)*100:p=(Number(e.maxPrice)/Number(1/Number(r.value))-1)*100,p=p>0&&p<.1?.1:p,p=p<0&&p>-.1?-.1:p,p}),l=Ke(),u=Q(()=>l),c=Q(()=>u.value.chainName?di(u.value.chainName):{}),{TickMath:m,getNearestTickByTick:d}=c.value,y=()=>{const p=n.value/2;n.value=p,h(e.poolInfo,p)},$=()=>{const p=n.value*2;n.value=p,h(e.poolInfo,p)},N=(p=[])=>{let I=6;const M=Math.abs(Number(p[0])-Number(p[p.length-1]));return M>=6?I=0:M>=1?I=1:M>=.1?I=2:M>=.01?I=3:M>=.001?I=4:M>=1e-4?I=5:M>=1e-5?I=6:M>=1e-6?I=7:M>=1e-7&&(I=8),I},h=(p,I=1)=>{if(p&&p.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const M=Number(e.poolInfo.current_tick_index);let J=M+100*I,B=M-100*I,X,z;e.maxPrice==="\u221E"?z=0:e.direction?z=m.priceToTickIndex(new F(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):z=m.priceToTickIndex(new F(1/Number(e.minPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals),e.minPrice==="0"?X=0:e.direction?X=m.priceToTickIndex(new F(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):X=m.priceToTickIndex(new F(1/Number(e.maxPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals);let P=0;if(M>=X&&M<=z){const E=M-X,H=z-M;P=Math.max(Math.abs(E),Math.abs(H))}else M<X?P=Math.abs(z-M):P=Math.abs(M-X);J=M+P+100*I,B=M-P-100*I;const V=Number(p.liquidity)/Math.pow(10,6),O=e.tickList,L=[],te=[];let G={};for(let E=0;E<O.length;E++)G=O[E],G.index<=M&&G.index>=B?L.unshift(G):G.index>M&&G.index<=J&&te.push(G);let Y=Number(V);for(let E=0;E<L.length;E++)L[E].liquityAmount=Y-Number(L[E].liquidityGross.toString()/Math.pow(10,6));let j=Number(V);for(let E=0;E<te.length;E++)te[E].liquityAmount=j-Number(te[E].liquidityGross.toString()/Math.pow(10,6));let U=[];U=[...L.reverse(),{index:M,liquityAmount:Number(V)},...te],e.direction||(U=U.reverse()),_(U,B,J,X,z,M)}};let g=S(!1);Pn(()=>{document.body.clientWidth<750?g.value=!1:g.value=!0,window.onresize=()=>{document.body.clientWidth<750?g.value=!1:g.value=!0,h(e.poolInfo,n.value)}});const _=(p,I,M,J,B,X)=>{let z,P;e.direction?(z=e.before7dContractPriceLowest?m.priceToTickIndex(new F(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",P=e.before7dContractPriceHighest?m.priceToTickIndex(new F(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(z=e.before7dContractPriceLowest?m.priceToTickIndex(new F(1/Number(e.before7dContractPriceLowest)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",P=e.before7dContractPriceHighest?m.priceToTickIndex(new F(1/Number(e.before7dContractPriceHighest)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const V={top:30,right:35,bottom:20,left:55};let O,L;g.value?(O=460-V.left-V.right,L=205-V.top-V.bottom):(O=340-V.left-V.right,L=205-V.top-V.bottom);const te=M-I,G=parseInt(String(te/4));let Y=[I,I+G,I+2*G,M-G,M];const j=Y[0]-(Y[1]-Y[0])/3,U=Y[4]+(Y[4]-Y[3])/3,E=O/(U-j);e.currentPriceTab==="Full Range"&&(Y=[I,I+2*G,M]);const H=Y.map(w=>e.direction?Jn(w,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():1/Jn(w,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),R=N(H);et("#chart").selectAll("*").remove();const ge=et("#chart").attr("width",O+V.left+V.right).attr("height",L+V.top+V.bottom).append("g").attr("transform",`translate(${V.left},${V.right})`),Ye=rs(p,function(w){return Number(w.liquityAmount)})||0,pe=Jo().range([0,L]).domain([Ye,0]);Qo().rangeRound([0,O]).padding(.1);const de=ge.append("g").attr("id","barsBox").selectAll("rect").data(p).enter().append("rect");u.value.theme=="default"?de.attr("x",function(w,k){return k===0?0:e.direction?Math.abs(p[k-1].index-j)*E:Math.abs(U-p[k-1].index)*E}).attr("y",function(w,k){return k===0?0:e.direction?pe(p[k-1].liquityAmount):pe(w.liquityAmount)}).attr("width",function(w,k){return k===0&&p.length===1&&w.liquityAmount>0?O:k===0?0:e.direction?Math.abs(w.index-p[k-1].index)*E:Math.abs(p[k-1].index-w.index)*E}).attr("height",function(w,k){return k===0&&p.length===1&&w.liquityAmount>0?L:k===0?0:e.direction?L-pe(p[k-1].liquityAmount):L-pe(w.liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):de.attr("x",function(w,k){return k===0?0:e.direction?Math.abs(p[k-1].index-j)*E:Math.abs(U-p[k-1].index)*E}).attr("y",function(w,k){return k===0?0:e.direction?pe(p[k-1].liquityAmount):pe(w.liquityAmount)}).attr("width",function(w,k){return k===0&&p.length===1&&w.liquityAmount>0?O:k===0?0:e.direction?Math.abs(w.index-p[k-1].index)*E:Math.abs(p[k-1].index-w.index)*E}).attr("height",function(w,k){return k===0&&p.length===1&&w.liquityAmount>0?L:k===0?0:e.direction?L-pe(p[k-1].liquityAmount):L-pe(w.liquityAmount)}).attr("fill","#407497").attr("class","bars");const Ee=ge.append("g");Ee.append("line").attr("x1",0).attr("y1",155).attr("x2",O).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const We=Ee.append("g");let Re=0;if(e.direction){for(let w=0;w<Y.length;w++){const k=Je(H[w],R)||"0";H.push(k);const Xe=Math.abs(Y[w]-j)*E;let qe=0;for(let Be=0;Be<k.length;Be++)k[Be]==="1"?qe+=4.02:k[Be]==="."?qe+=2.64:k[Be]==="7"?qe+=5.48:qe+=6;We.append("text").text(k).attr("x",Xe-qe/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}Re=Math.abs(X-j)*E}else{for(let w=Y.length-1;w>=0;w--){const k=mt(String(1/Jn(Y[w],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),6)||"0";H.push(k);const Xe=Math.abs(Y[w]-U)*E;let qe=0;for(let Be=0;Be<k.length;Be++)k[Be]==="1"?qe+=4.02:k[Be]==="."?qe+=2.64:k[Be]==="7"?qe+=5.48:qe+=6;We.append("text").text(k).attr("x",Xe-qe/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}Re=Math.abs(X-U)*E}(u.value.theme=="default"?ge.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):ge.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+Re+", 0)");let Ne,ve,Le,oe;e.direction?(Ne=J<j?-100:Math.abs(J-j)*E,ve=B<j?-100:Math.abs(B-j)*E,Le=z<j?-100:Math.abs(z-j)*E,oe=P<j?-100:Math.abs(P-j)*E):(ve=J<j?-100:Math.abs(U-J)*E,Ne=B<j?-100:Math.abs(U-B)*E,oe=z<j?-100:Math.abs(U-z)*E,Le=P<j?-100:Math.abs(U-P)*E),e.minPrice==="0"&&(Ne=0),e.maxPrice==="\u221E"&&(ve=O),g.value?i.value=O-Ne+60+"px":i.value=O-Ne+52+"px",o.value=ve+74+"px",z&&Le<O&&ge.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+Le+", 0)"),P&&oe<O&&ge.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+oe+", 0)");const ye=ge.append("g").attr("id","left-handle"),x=ge.append("g").attr("id","right-handle");u.value.theme=="default"?(ye.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),ye.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),ye.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),ye.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),x.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),x.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),x.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),x.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(ye.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),ye.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),ye.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),ye.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),x.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),x.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),x.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),x.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),ye.attr("transform","translate("+Ne+", 0)"),x.attr("transform","translate("+ve+", 0)");const ae=Bc().extent([[0,0],[O,L]]).handleSize(30).on("end",q);ge.append("g").attr("class","brush").call(ae).call(ae.move,[Ne,ve]);function q(w){if(!w.sourceEvent||!w.selection)return;i.value=w.selection[0]+"px",o.value=w.selection[1]+74+"px",ye.attr("transform","translate("+w.selection[0]+", 0)"),x.attr("transform","translate("+w.selection[1]+", 0)");let k,Xe;e.direction?(k=m.tickIndexToPrice(w.selection[0]/E+j,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),Xe=m.tickIndexToPrice(w.selection[1]/E+j,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()):(k=1/m.tickIndexToPrice(U-w.selection[0]/E,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),Xe=1/m.tickIndexToPrice(U-w.selection[1]/E,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),t.emit("onChangeMinPrice",String(Je(String(k),6))),t.emit("onChangeMaxPrice",String(Je(String(Xe),6)))}u.value.theme=="default"?et(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):et(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632")};S(""),le(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab],([p,I,M,J])=>{p&&I&&M&&(M=="\u221E"||Number(M)>Number(I))&&h(p,n.value)},{immediate:!0});const b=S(!0);return le(()=>e.chartLoading,(p,I)=>{p!==I&&(b.value=p)},{immediate:!0,deep:!0}),{store:u,loading:b,zoomOut:y,zoomIn:$,rangeSizeLower:a,rangeSizeUpper:s,rangeSizeLowerPosition:i,rangeSizeUpperPosition:o,decimalFormat:mt,numberformat:wr}}});const lf=e=>(ht("data-v-0be03fe0"),e=e(),pt(),e),uf={class:"chart-box"},cf={class:"chart"},ff={class:"zoom"},df=lf(()=>f("svg",{id:"chart"},null,-1)),mf={key:2,class:"not-select-mask"};function hf(e,t,n,i,o,r){return A(),T("div",uf,[_r(f("div",cf,[f("div",ff,[f("div",{class:"amplification",onClick:t[0]||(t[0]=(...a)=>e.zoomOut&&e.zoomOut(...a))}),f("div",{class:"narrow",onClick:t[1]||(t[1]=(...a)=>e.zoomIn&&e.zoomIn(...a))})]),e.currentPriceTab!=="Full Range"&&e.tickList.length>0?(A(),T("div",{key:0,class:"range-size range-size-lower",style:Pi({right:e.rangeSizeLowerPosition})},C(e.numberformat(e.rangeSizeLower.toFixed(1),1))+"% ",5)):W("",!0),e.currentPriceTab!=="Full Range"&&e.tickList.length>0?(A(),T("div",{key:1,class:"range-size range-size-upper",style:Pi({left:e.rangeSizeUpperPosition})},C(e.numberformat(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):W("",!0),df,e.currentPriceTab!=="Custom"?(A(),T("div",mf)):W("",!0)],512),[[kr,!e.loading]])])}const pf=He(sf,[["render",hf],["__scopeId","data-v-0be03fe0"]]),vf=ze({props:{poolInfo:{type:Object,default:()=>({})},aprRewardsParameter:{type:Number,default:30},label:{type:Boolean,default:!0}},setup(e,t){const n=S(""),i=S(""),o=S(""),r=Ke(),a=Q(()=>r),s=qt(),l=Q(()=>s),u=(g,_)=>g&&_?Yt(Tr.plus(zn(g),zn(_)),2)+"%":g,c=g=>{let _=0;return g&&g.forEach(b=>{_+=zn(String(b))}),String(Yt(String(_),2))},m=S([]),d=S([]),y=S(""),$=S(""),N=S(!0);return le(()=>[a.value.newTopPoolsObj,e.poolInfo,l.value.newTokenObj,e.aprRewardsParameter],async([g,_,b])=>{if(g&&_&&g[_.poolAddress]&&b){const p=g[_.poolAddress];n.value=p&&p.apr_7day,$.value=c(p&&p.rewarder_apr),y.value=u(p&&p.apr_7day,p&&c(p.rewarder_apr)),i.value=Tt(p.tvl_in_usd,2),o.value=Tt(p.vol_in_usd_24h,2);const I=_&&e.poolInfo.rewarder_infos||[],M=[];I.forEach((B,X)=>{const z=b[B.coinAddress].decimals,P=mt(B.emissionsEveryDay/Math.pow(10,z),4),V=mt(Number(P)*l.value.RATES[B.coinAddress].price,4);M.push({...B,logoUrl:b[B.coinAddress].logoURI,day:P,dayUSD:V,symbol:b[B.coinAddress].symbol,rewarder_display:_&&_[`rewarder_display${X+1}`]?_[`rewarder_display${X+1}`]:!1})}),m.value=M.filter(B=>B.rewarder_display);const J=[];M.forEach((B,X)=>{J.push({...B,symbol:b[B.coinAddress].symbol,rewarderApr:p.rewarder_apr[X]})}),d.value=J.filter(B=>B.rewarder_display),N.value=!1}},{immediate:!0,deep:!0}),{rewarderInfo:m,rewarderArr:d,rewardApr:y,rewardAprList:$,apr:n,liquidityTvl:i,vol24:o,addCommom:Tt,reviseValue:()=>{t.emit("reviseValue")},loading:N}}});const Zo=e=>(ht("data-v-20d3c6e1"),e=e(),pt(),e),gf={key:0,class:"pool-info"},yf=Zo(()=>f("use",{"xlink:href":"#icon-icon_on"},null,-1)),bf=[yf],wf={key:0,class:"info-block-container"},_f={class:"info-block"},kf={class:"leabl"},Cf={class:"text"},$f={class:"apr-hover-content"},Af={class:"info-block"},If={class:"leabl"},Pf={class:"text"},Sf={class:"info-block"},Nf={class:"leabl"},Tf={class:"text"},Mf={class:"info-block"},Ef={class:"leabl"},Rf={class:"text"},Lf={key:1,class:"pool-rewards-info"},qf={class:"rewards-list-all"},Ff=Zo(()=>f("div",{class:"icon-sign"},null,-1)),Bf=["src"],Of={class:"rewards-value"};function Uf(e,t,n,i,o,r){const a=Nr,s=fo;return e.poolInfo?(A(),T("div",gf,[e.loading?(A(),me(s,{key:1})):(A(),T(dt,{key:0},[f("div",{class:Se(e.label?"pool-info-border pool-info-title":"pool-info-title")},[ke(C(e.$t("newAdd.poolInfo"))+" ",1),(A(),T("svg",{class:Se(e.label?"show-icon icon":"icon"),"aria-hidden":"true",onClick:t[0]||(t[0]=l=>e.reviseValue())},bf,2))],2),e.label?(A(),T("div",wf,[f("div",_f,[f("div",kf,C(e.$t("common.apr")),1),f("div",Cf,[ke(C(e.poolInfo.is_display_rewarder?e.addCommom(e.rewardApr.substring(0,e.rewardApr.length-1),2):e.addCommom(e.apr.substring(0,e.apr.length-1),2))+"% ",1),f("div",$f,[se(a,{"l-item":{apr:e.apr,aprTotal:e.rewardApr,rewarder_apr:e.rewardAprList,is_display_rewarder:e.poolInfo.is_display_rewarder},"rewarder-info":e.rewarderArr},null,8,["l-item","rewarder-info"])])])]),f("div",Af,[f("div",If,C(e.$t("common.liquidity")),1),f("div",Pf,"$"+C(e.liquidityTvl),1)]),f("div",Sf,[f("div",Nf,C(e.$t("common.volume24h")),1),f("div",Tf,"$"+C(e.vol24),1)]),f("div",Mf,[f("div",Ef,C(e.$t("newAdd.tickSpacing")),1),f("div",Rf,C(e.poolInfo&&e.poolInfo.tick_spacing),1)])])):W("",!0),e.poolInfo.is_display_rewarder&&e.label&&e.rewarderInfo&&e.rewarderInfo.length>0?(A(),T("div",Lf,[ke(C("Farming Bonus")+" "),f("div",qf,[(A(!0),T(dt,null,Zn(e.rewarderInfo,l=>(A(),T("div",{key:l,class:Se(["rewards-list",l.day==0?"rewards-none":""])},[Ff,f("img",{src:l.logoUrl,alt:""},null,8,Bf),f("div",Of,[f("p",null,C(l.day)+" "+C(l.symbol)+" / "+C(e.$t("newAdd.day"))+" ",1)])],2))),128))])])):W("",!0)],64))])):W("",!0)}const xf=He(vf,[["render",Uf],["__scopeId","data-v-20d3c6e1"]]),Df=ze({components:{Modal:mo},props:{},setup(){const e=S({}),t=Ke(),n=Q(()=>t),i=Q(()=>n.value.chainName),o=Q(()=>Cr[i.value]);let r=S(!0);const a=qt(),s=Q(()=>a),l=ho();return le(()=>s.value.currentPositionInfo,u=>{u&&(e.value=u)}),{addCommom:Tt,router:l,pools:s,positionInfo:e,decimalFormat:mt,rateChange:r,config:o,importIcon:Qt,store:n,chainName:i}}});const en=e=>(ht("data-v-6889798c"),e=e(),pt(),e),zf=en(()=>f("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[f("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Hf={class:"rejected-container"},Xf={class:"coin-pair"},Vf=en(()=>f("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Kf=[Vf],Yf=["href"],Wf=en(()=>f("svg",{class:"icon","aria-hidden":"true"},[f("use",{"xlink:href":"#icon-icon-jump"})],-1)),jf=[Wf],Gf=["href"],Qf=en(()=>f("svg",{class:"icon","aria-hidden":"true"},[f("use",{"xlink:href":"#icon-icon-jump"})],-1)),Jf=[Qf],Zf={class:"coin-pair"},ed=["src"],td=["src"],nd={class:"fee"},id={class:"status"},od={class:"min-and-max"},rd={key:0},ad={class:"text"},sd={key:0,src:mi,alt:""},ld={key:1,src:hi,alt:""},ud={class:"text"},cd={key:1},fd={class:"text"},dd={key:0,src:mi,alt:""},md={key:1,src:hi,alt:""},hd={class:"text"},pd=en(()=>f("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),vd=[pd];function gd(e,t,n,i,o,r){const a=co,s=Mr,l=Nn,u=po("Modal");return A(),me(u,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:t[3]||(t[3]=c=>e.$emit("onClose"))},{closeIcon:he(()=>[zf]),default:he(()=>[f("div",Hf,[se(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:he(()=>[f("div",Xf,[ke(C(e.positionInfo.tokenName)+" ",1),(A(),T("svg",{class:"icon","aria-hidden":"true",onClick:t[0]||(t[0]=c=>e.store.copy(e.positionInfo.nftHash))},Kf)),e.chainName==="Aptos"?(A(),T("a",{key:0,href:`${e.config.explorerUrl}/token/${e.positionInfo.nftHash}/0?network=${e.config.network}`,target:"_blank"},jf,8,Yf)):(A(),T("a",{key:1,href:`${e.config.explorerUrl}/object/${e.positionInfo.pos_object_id}?network=${e.config.network}`,target:"_blank"},Jf,8,Gf))])]),_:1},8,["loading"]),f("div",{class:Se(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[se(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:he(()=>[f("div",Zf,[f("div",null,[f("img",{src:e.fromCoinUrl||e.positionInfo.token_a.logoURI||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,ed),f("img",{src:e.toCoinUrl||e.positionInfo.token_b.logoURI||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,td)]),f("span",null,C(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" - "+C(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)]),f("div",nd,C(e.$t("common.fee"))+" "+C(e.positionInfo.fee)+"%",1)]),_:1},8,["loading"])],2),f("div",id,[se(s,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),se(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:he(()=>[f("div",od,[e.rateChange?(A(),T("div",rd,[f("div",ad,C(e.addCommom(e.decimalFormat(String(e.positionInfo&&e.positionInfo.minPrice),6),6)),1),e.store.theme=="default"?(A(),T("img",sd)):(A(),T("img",ld)),f("div",ud,C(e.positionInfo&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.addCommom(e.decimalFormat(String(e.positionInfo&&e.positionInfo.maxPrice),6),6))+" "+C(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol)+" per "+C(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol),1)])):(A(),T("div",cd,[f("div",fd,C(e.addCommom(e.decimalFormat(String(1/Number(e.positionInfo&&e.positionInfo.maxPrice)),6),6)),1),e.store.theme=="default"?(A(),T("img",dd)):(A(),T("img",md)),f("div",hd,C(e.positionInfo&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.addCommom(e.decimalFormat(String(1/Number(e.positionInfo&&e.positionInfo.minPrice)),6),6))+" "+C(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" per "+C(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)])),(A(),T("svg",{class:"icon-change","aria-hidden":"true",onClick:t[1]||(t[1]=c=>e.rateChange=!e.rateChange)},vd))])]),_:1},8,["loading"])]),se(l,{onClick:t[2]||(t[2]=c=>e.router.push(`/position-detail/1?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}&pos=${e.positionInfo.pos_object_id}`))},{default:he(()=>[ke(C(e.$t("newAdd.viewDetail")),1)]),_:1})]),_:1},8,["title"])}const yd=He(Df,[["render",gd],["__scopeId","data-v-6889798c"]]),bd=ze({components:{Modal:mo,CoinPairName:bo},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},currentPrice:{type:String,default:""}},setup(e,t){const{t:n}=vo(),i=Sn(),o=Ke(),r=Q(()=>o);return{t:n,route:i,decimalFormat:mt,addCommom:Tt,store:r,createPool:()=>{t.emit("createPool")},importIcon:Qt}}});const Ln=e=>(ht("data-v-492a0efb"),e=e(),pt(),e),wd=Ln(()=>f("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[f("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),_d={class:"create-pool-content"},kd={class:"top"},Cd={class:"coin-pair-box"},$d={class:"induction info"},Ad={class:"item"},Id={class:"induction-text"},Pd={class:"induction-value"},Sd={class:"item"},Nd=Ln(()=>f("span",{class:"induction-text"},"Initial price",-1)),Td={class:"induction-value"},Md={class:"item"},Ed=Ln(()=>f("span",{class:"induction-text"},"Price range",-1)),Rd={class:"induction-value"},Ld={class:"min-and-max"},qd={class:"text"},Fd={key:0,src:mi,alt:""},Bd={key:1,src:hi,alt:""},Od={class:"text"},Ud={class:"deposit-amount"},xd=Ln(()=>f("div",{class:"deposit-amount-title"},"Deposit amount",-1)),Dd={class:"bottom"},zd=["src"],Hd=["src"];function Xd(e,t,n,i,o,r){const a=bo,s=Nn,l=po("Modal");return A(),me(l,{width:"440px",visible:!0,footer:null,title:e.$t("button.addLiquidity"),class:"add-liquidity-modal",onCancel:t[0]||(t[0]=u=>e.$emit("onClose"))},{closeIcon:he(()=>[wd]),default:he(()=>{var u,c;return[f("div",_d,[f("div",kd,[f("div",Cd,[se(a,{"from-coin":e.fromCoin,"to-coin":e.toCoin},null,8,["from-coin","to-coin"])]),f("div",$d,[f("div",Ad,[f("span",Id,C(e.$t("common.feeTier")),1),f("span",Pd,C(((c=(u=e.route)==null?void 0:u.query)==null?void 0:c.fee)*100)+" %",1)]),f("div",Sd,[Nd,f("span",Td,C(e.currentPrice)+" "+C(e.fromCoin.symbol)+" per "+C(e.toCoin.symbol),1)]),f("div",Md,[Ed,f("span",Rd,[f("div",Ld,[f("div",qd,C(e.addCommom(e.decimalFormat(e.minPrice,6),6)),1),e.store.theme=="default"?(A(),T("img",Fd)):(A(),T("img",Bd)),f("div",Od,C(e.maxPrice&&String(e.maxPrice).indexOf("+")>-1?"\u221E":e.addCommom(e.decimalFormat(e.maxPrice,6),6)),1)])])])])]),f("div",Ud,[xd,f("div",Dd,[f("div",null,[f("img",{src:e.fromCoin.logo_url?e.fromCoin.logo_url:e.store.theme=="default"?e.importIcon("/image/coins/unknown.png"):e.importIcon("/image/coins/sui-unknown.png")},null,8,zd),f("p",null,C(e.fromCoinAmount),1),f("span",null,C(e.fromCoin.symbol),1)]),f("div",null,[f("img",{src:e.toCoin.logo_url?e.toCoin.logo_url:e.store.theme=="default"?e.importIcon("/image/coins/unknown.png"):e.importIcon("/image/coins/sui-unknown.png")},null,8,Hd),f("p",null,C(e.toCoinAmount),1),f("span",null,C(e.toCoin.symbol),1)])])])]),se(s,{class:"big-btn liquidity-btn",onClick:e.createPool},{default:he(()=>[ke(" Create and Add Liquidity ")]),_:1},8,["onClick"])]}),_:1},8,["title"])}const Vd=He(bd,[["render",Xd],["__scopeId","data-v-492a0efb"]]),Kd=ze({setup(){const{t:e,locale:t}=vo(),n=$r(),i=Q(()=>n),o=Ke(),r=S(0),a=S(!1),s=S(!1),l=S("fromCoin"),u=S(""),c=S(""),m=S(!1),d=S(!0),y=S(!1),$=S(!0),N=S(!1),h=S(""),g=S(""),_=S(""),b=S(""),p=S(""),I=S(""),M=S(!1),J=S(!1),B=S(!1),X=S(""),z=S(0),P=S(!0),V=S(!1),O=S([]),L=S(""),te=S(30),G=S("30D"),Y=S("Estimated APR"),j=S([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),U=S(!0),E=Ke(),H=Q(()=>E),R=Q(()=>H.value.chainName?di(H.value.chainName):{}),ge=v=>{Ft.updateCurrentPools(Z.value.poolAddress,H.value.chainName),G.value=v.time,te.value=v.num},Ye=()=>{U.value=!U.value},pe=S([]),it=()=>{r.value=0,Ft.updateCurrentPools(Z.value.poolAddress,H.value.chainName),ft()},de=Q(()=>Number(_.value)>0&&Number(b.value)>0&&Number(_.value)>Number(b.value)),Ee=v=>{y.value=v,_.value="0",b.value="\u221E"},We=Q(()=>{if(be.value.pools&&q.value&&w.value){const v=Object.values(be.value.poolsObj).filter(K=>{var ee,ne,ie,re;return K.token_a.address.toUpperCase()===((ee=q.value.address)==null?void 0:ee.toUpperCase())&&K.token_b.address.toUpperCase()===((ne=w.value.address)==null?void 0:ne.toUpperCase())||K.token_b.address.toUpperCase()===((ie=q.value.address)==null?void 0:ie.toUpperCase())&&K.token_a.address.toUpperCase()===((re=w.value.address)==null?void 0:re.toUpperCase())}),D=[];return v.forEach(K=>{D.push(K.fee/100)}),D}}),Re=Q(()=>[{label:.01+"% "+e("common.feeTier"),title:.01+"% ",fee:1e-4,text:"Best for very stable pairs."},{label:.05+"% "+e("common.feeTier"),title:.05+"% ",fee:5e-4,text:"Best for stable pairs."},{label:.2+"% "+e("common.feeTier"),title:.2+"% ",fee:.002,text:"Best for most pairs."},{label:.6+"% "+e("common.feeTier"),title:.6+"% ",fee:.006,text:"Best for exotic pairs."}]),je=Q(()=>o.slippage),Ne=Q(()=>!q.value||!w.value),ve=Q(()=>{var v,D;return!!(!h.value&&!g.value||Number(h.value)>Number(Oe.value)||Number(g.value)>Number(Ue.value)||Le.value!==e("button.addLiquidity")&&Le.value!==e("newAdd.preview")||Z.value&&Z.value&&Z.value.is_pause||((v=ce==null?void 0:ce.query)==null?void 0:v.action)&&!Ve.value&&!((D=Ve.value)!=null&&D.currentPrice))}),Le=Q(()=>{var v;return Z.value&&Z.value.is_pause?"Pool Closed":!Z.value&&q.value&&w.value?e("button.poolNotFound"):Number(h.value)>Number(Oe.value)?e("button.insufficientBalance",{name:q.value.symbol}):Number(g.value)>Number(Ue.value)?e("button.insufficientBalance",{name:w.value.symbol}):N.value||Ne.value?e("modal.selectTokenModalTitle"):!Z.value&&q.value&&w.value&&((v=ce==null?void 0:ce.query)==null?void 0:v.action)?e("newAdd.preview"):b.value!=="\u221E"&&Number(_.value)>=Number(b.value)?e("newAdd.invalidRange"):!Number(h.value)&&!Number(g.value)?e("button.enterAmount"):e("button.addLiquidity")}),oe=Q(()=>{var v,D,K;return!Z.value||Pt(H.value.addressHistTokens)||!H.value.addressHistTokens[(v=Z.value)==null?void 0:v.poolAddress]?null:Object.fromEntries((K=H.value.addressHistTokens[(D=Z.value)==null?void 0:D.poolAddress])==null?void 0:K.data.map(ee=>[ee.key,ee.value]))}),ye=Q(()=>d.value?oe.value&&Je(Number(te.value==7?oe.value.before_7_d_contract_price_lowest:te.value==24?oe.value.before_24_h_contract_price_lowest:oe.value.before_30_d_contract_price_lowest),6)||0:oe.value&&Je(1/Number(te.value==7?oe.value.before_7_d_contract_price_highest:te.value==24?oe.value.before_24_h_contract_price_highest:oe.value.before_30_d_contract_price_highest),6)||0),x=Q(()=>d.value?oe.value&&Je(Number(te.value==7?oe.value.before_7_d_contract_price_highest:te.value==24?oe.value.before_24_h_contract_price_highest:oe.value.before_30_d_contract_price_highest),6)||0:(oe.value&&Je(1/Number(te.value==7?oe.value.before_7_d_contract_price_lowest:te.value==24?oe.value.before_24_h_contract_price_lowest:oe.value.before_30_d_contract_price_lowest),6))==1/0?0:oe.value&&Je(1/Number(te.value==7?oe.value.before_7_d_contract_price_lowest:te.value==24?oe.value.before_24_h_contract_price_lowest:oe.value.before_30_d_contract_price_lowest),6)||0),ae=ho(),q=S(),w=S();Pn(()=>{document.body.clientWidth<750?U.value=!1:U.value=!0});const k=v=>{_.value=v},Xe=v=>{b.value=v},qe=()=>{P.value=!0;const v=q.value;if(q.value=w.value,w.value=v,d.value=!d.value,h.value=g.value,P.value=!1,_.value!==""&&b.value!==""&&_.value!=="0"&&b.value!=="\u221E"){const D=_.value,K=b.value;(!V.value||!d.value)&&(_.value=String(1/Number(K)),b.value=String(1/Number(D)));const ee=p.value,ne=I.value;p.value=String(1/Number(ne)),I.value=String(1/Number(ee)),V.value=!1}};le([_,b],([v,D])=>{Number(v)!==0&&Number(D)!==0&&ft(),Z.value&&D!=="\u221E"&&Number(v)!==0&&Number(D)!==0&&Number(v)>=Number(D)?B.value=!0:B.value=!1});const Be=v=>{var D,K,ee,ne;l.value=v,v==="fromCoin"?(u.value=((D=w.value)==null?void 0:D.address)||"",c.value=((K=q.value)==null?void 0:K.address)||""):(u.value=((ee=q.value)==null?void 0:ee.address)||"",c.value=((ne=w.value)==null?void 0:ne.address)||""),m.value=!0},er=v=>{N.value=!1,l.value==="fromCoin"?(w.value&&v.address.toLowerCase()===(w==null?void 0:w.value.address.toLowerCase())&&(w.value=null),q.value=v):(q.value&&v.address.toLowerCase()===(q==null?void 0:q.value.address.toLowerCase())&&(q.value=null),w.value=v),m.value=!1},tr=v=>{v==="fromCoin"?($.value=!0,H.value.chainName==="Aptos"?h.value=Number(Oe.value)>0?q.value.symbol=="APT"?new F(Number(Oe.value)).sub(new F(.1)).lt(new F(0))?"0":new F(Number(Oe.value)).sub(new F(.1)).toString():String(Oe.value):"":h.value=Number(Oe.value)>0?q.value.symbol=="SUI"?new F(Number(Oe.value)).sub(new F(1e-4)).lt(new F(0))?"0":new F(Number(Oe.value)).sub(new F(1e-4)).toString():String(Oe.value):""):($.value=!1,H.value.chainName==="Aptos"?g.value=Number(Ue.value)>0?w.value.symbol=="APT"?new F(Number(Ue.value)).sub(new F(.1)).lt(new F(0))?"0":new F(Number(Ue.value)).sub(new F(.1)).toString():String(Ue.value):"":g.value=Number(Ue.value)>0?w.value.symbol=="SUI"?new F(Number(Ue.value)).sub(new F(1e-4)).lt(new F(0))?"0":new F(Number(Ue.value)).sub(new F(1e-4)).toString():String(Ue.value):"")},nr=v=>{v==="fromCoin"?($.value=!0,h.value=Number(Oe.value)>0?Si(new F(Number(Oe.value)).div(2).toString(),q.value.decimals).toString():""):($.value=!1,g.value=Number(Ue.value)>0?Si(new F(Number(Ue.value)).div(2).toString(),w.value.decimals).toString():"")};le(h,(v,D)=>{v==""&&$.value&&(g.value=""),v&&$.value&&ft()}),le(g,(v,D)=>{v==""&&!$.value&&(h.value=""),v&&!$.value&&ft()});const ir=()=>{q.value=null,w.value=null,_.value="0",b.value="0",h.value="",g.value="",N.value=!0,X.value="",M.value=!1,Te.value=!0,Me.value=!0,P.value=!1},Fn=S(!1),{setIsShowSuccess:tn,setIsShowRejected:nn,setIsShowWaiting:vt,setTransactionDesc:or,setTransactionTxid:Bn,setPositiomNum:Ai}=o,ce=Sn(),Ft=qt(),be=Q(()=>Ft);le(()=>[be.value.tokens,be.value.chinaTokens],([v,D])=>{if(v&&D){const K=Object.fromEntries(v.concat(D).map(ee=>[ee.address,ee]));ce&&ce.query&&ce.query.tokena?q.value=an(K,ce.query.tokena):q.value=an(K,"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT"),ce&&ce.query&&ce.query.tokenb?w.value=an(K,ce.query.tokenb):w.value=an(K,"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDC")}},{immediate:!0});const Ct=S({}),Te=S(!1),Me=S(!1),On=S(),Un=S(),Bt=S(),on=S(),ft=async()=>{var xt,Dt,zt,Ht;if(!_.value&&!b.value)return!1;if(!h.value&&!g.value&&!_.value&&!b.value)return;const v=Z.value?Z.value:Ve.value;if(Pt(v))return;const{TickUtil:D,TickMath:K,getNearestTickByTick:ee}=R.value,ne=v==null?void 0:v.token_a.decimals,ie=v==null?void 0:v.token_b.decimals;let re,ue,fe,we,_e,Ce,at,Ot,gt=v.current_tick_index;const Ut=v.priceConfigObj;let $e;if(v.token_a.address.toLowerCase()===q.value.address.toLowerCase()&&v.token_b.address.toLowerCase()===w.value.address.toLowerCase()?$e=!0:$e=!1,_.value==="0"&&b.value==="\u221E"?(fe=D.getMinIndex(Number(v.tickSpacing)),we=D.getMaxIndex(Number(v.tickSpacing)),_e=K.tickIndexToSqrtPriceX64(fe),Ce=K.tickIndexToSqrtPriceX64(we)):L.value=="Custom"||ce.query.action?($e?(re=Number(_.value),ue=Number(b.value)):(re=1/Number(b.value),ue=1/Number(_.value)),at=re==0?-443630:K.priceToTickIndex(new F(re),ne,ie),Ot=K.priceToTickIndex(new F(ue),ne,ie),fe=ee(at,Number(v.tickSpacing)),we=ee(Ot,Number(v.tickSpacing)),_e=K.priceToSqrtPriceX64(new F(re),ne,ie),Ce=K.priceToSqrtPriceX64(new F(ue),ne,ie)):(fe=(xt=Ut[L.value])==null?void 0:xt.lower,we=(Dt=Ut[L.value])==null?void 0:Dt.upper,_e=K.tickIndexToSqrtPriceX64(fe),Ce=K.tickIndexToSqrtPriceX64(we)),b.value!=="\u221E"&&fe>=we){Te.value=!0,h.value="",Me.value=!0,g.value="";return}if(b.value==="\u221E"||gt>fe&&gt<we){Te.value=!1,Me.value=!1;let Ae;if(h.value||g.value){if($.value){const $t=new F(h.value).mul(Math.pow(10,q.value.decimals)).toString();Ae=new Qe($t)}else{const $t=new F(g.value).mul(Math.pow(10,w.value.decimals)).toString();Ae=new Qe($t)}const{liquidityAmount:xe,tokenMaxA:Ge,tokenMaxB:st,tokenMaxAOrigin:yt,tokenMaxBOrigin:rn}=R.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:v.token_a,tokenB:v.token_b,lowerTick:fe,upperTick:we,coinAmount:Ae,iscoinA:$e?$.value:!$.value,roundUp:!0,slippage:Number(je.value)/100,curSqrtPrice:new Qe(v.current_sqrt_price)});Ct.value={liquidityAmount:xe,tokenMaxA:Ge,tokenMaxB:st,tokenMaxAOrigin:yt,tokenMaxBOrigin:rn},$e?$.value?g.value=Number(st)>0?st:"":h.value=Number(Ge)>0?Ge:"":$.value?g.value=Ge:h.value=st}}else if(gt>=we){if($e?h.value="":g.value="",Te.value=$e,Me.value=!$e,h.value||g.value){let Ae;if($e){const xe=new F(g.value).mul(Math.pow(10,(zt=w.value)==null?void 0:zt.decimals)).toString();Ae=new Qe(xe),Ct.value={liquidityAmount:R.value.estimateLiquidityForCoinB(_e,Ce,Ae),tokenMaxA:0,tokenMaxB:g.value}}else{const xe=new F(h.value).mul(Math.pow(10,(Ht=q.value)==null?void 0:Ht.decimals)).toString();Ae=new Qe(xe),Ct.value={liquidityAmount:R.value.estimateLiquidityForCoinB(_e,Ce,Ae),tokenMaxA:0,tokenMaxB:h.value}}}}else if(gt<=fe){if(Te.value=!$e,Me.value=$e,$e?g.value="":h.value="",h.value||g.value){let Ae;if($e){const xe=new F(h.value).mul(Math.pow(10,q.value.decimals)).toString();Ae=new Qe(xe),Ct.value={liquidityAmount:R.value.estimateLiquidityForCoinA(_e,Ce,Ae),tokenMaxA:h.value,tokenMaxB:0}}else{const xe=new F(g.value).mul(Math.pow(10,w.value.decimals)).toString();Ae=new Qe(xe),Ct.value={liquidityAmount:R.value.estimateLiquidityForCoinA(_e,Ce,Ae),tokenMaxA:g.value,tokenMaxB:0}}}}else Te.value=!0,h.value="",Me.value=!0,g.value=""},xn=S(0);le(()=>ce.query,v=>{v&&v.fee&&(xn.value=v.fee,X.value=Number(v.fee)*100+"% "+e("common.feeTier"))},{immediate:!0,deep:!0});const Z=Q(()=>{var v,D,K,ee,ne;if((v=ce==null?void 0:ce.query)==null||v.fee,be.value.newTokenObj&&q.value&&w.value){let ie=null;for(const re in be.value.poolsObj){const ue=be.value.poolsObj[re];(ue.token_a.address.toUpperCase()===((D=q.value.address)==null?void 0:D.toUpperCase())&&ue.token_b.address.toUpperCase()===((K=w.value.address)==null?void 0:K.toUpperCase())||ue.token_b.address.toUpperCase()===((ee=q.value.address)==null?void 0:ee.toUpperCase())&&ue.token_a.address.toUpperCase()===((ne=w.value.address)==null?void 0:ne.toUpperCase()))&&(ie=ue)}return ie&&!Pt(ie)?ie:null}return null}),rr=S({}),ar=async(v,D)=>{if(v){const{TickMath:K,getNearestTickByTick:ee}=R.value;D&&(P.value=!0),v.token_a.address.toLowerCase()===q.value.address.toLowerCase()&&v.token_b.address.toLowerCase()===w.value.address.toLowerCase()?d.value=!0:d.value=!1,V.value=!0;const ne=v.token_a.decimals,ie=v.token_b.decimals;Te.value=!1,Me.value=!1,X.value=v.fee+"% "+e("common.feeTier");const re=v.current_tick_index;Bt.value=K.sqrtPriceX64ToPrice(v.current_sqrt_price,ne,ie).toString(),on.value=String(1/Bt.value);const ue=await R.value.getTicks(v);if(O.value=ue?R.value.getTickDataFromUrlData(ue):[],D){let fe=v.priceConfigObj;const we=re-Number(Z.value.type=="unstable"?Number(Z.value.tickSpacing)*2:Number(Z.value.tickSpacing)*3),_e=re+Number(Z.value.type=="unstable"?Number(Z.value.tickSpacing)*2:Number(Z.value.tickSpacing)*3);fe["Full Range"]={lower:-443630,upper:443630},fe.Custom={lower:we,upper:_e};const Ce=[];for(let at in fe)Ce.push({...fe[at],key:at});pe.value=Ce,v.type?v.isSelfBuilt?L.value="Custom":v.type=="stable"?L.value="suggested":L.value="passive":L.value="Custom",rr.value=fe,Ii({key:L.value,...fe[L.value]})}P.value=!1}else P.value=!1},sr=Q(()=>Ft.getPoolInfoSuccess);le(()=>Z.value,(v,D)=>{v?(!D||v.poolAddress!==D.poolAddress||v.current_sqrt_price!==D.current_sqrt_price)&&ar(v,!D||v.poolAddress!==D.poolAddress):(_.value="0",b.value="0",h.value="",g.value="",X.value="",M.value=!1,Te.value=!1,Me.value=!1,P.value=!1,Bt.value="",on.value="")},{immediate:!0});const Oe=Q(()=>i.value.assets&&q.value&&i.value.assets[q.value.address]?Ni(i.value.assets[q.value.address].balance,q.value.decimals):"0"),Ue=Q(()=>i.value.assets&&w.value&&i.value.assets[w.value.address]?Ni(i.value.assets[w.value.address].balance,w.value.decimals):"0"),lr=async()=>{var _e,Ce,at,Ot,gt,Ut,$e,xt,Dt,zt,Ht,Ae;Fn.value=!1,be.value.currentPositionInfo={},Bn(""),or(e("tips.increaseLiquiditySuccess",{from:Te.value?"":`${h.value} ${(_e=q.value)==null?void 0:_e.symbol}`,and:!Te.value&&!Me.value?"and":"",to:Me.value?"":`${g.value} ${(Ce=w.value)==null?void 0:Ce.symbol}`})),vt(!0);const v=d.value?$.value:!$.value,D=Z.value.priceConfigObj;let K,ee,ne,ie,re,ue;const fe=Z.value.token_a.decimals,we=Z.value.token_b.decimals;_.value==="0"&&b.value==="\u221E"?(ne=R.value.TickUtil.getMinIndex(Number(Z.value.tickSpacing)),ie=R.value.TickUtil.getMaxIndex(Number(Z.value.tickSpacing))):L.value=="Custom"?(d.value?(K=Number(_.value),ee=Number(b.value)):(K=1/Number(b.value),ee=1/Number(_.value)),re=K==0?-443630:R.value.TickMath.priceToTickIndex(new F(K),fe,we),ue=R.value.TickMath.priceToTickIndex(new F(ee),fe,we),ne=R.value.getNearestTickByTick(re,Number(Z.value.tickSpacing)),ie=R.value.getNearestTickByTick(ue,Number(Z.value.tickSpacing))):(ne=D[L.value].lower,ie=D[L.value].upper);try{const xe=await R.value.getAddLiquidityTransactionPayload({pool:{poolAddress:Z.value.poolAddress,token_a:Z.value.token_a,token_b:Z.value.token_b},amount:$.value?h.value:g.value,fix_amount_a:v,tick_lower:ne,tick_upper:ie,index:0,slippage:Number(je.value)/100,roundUp:!0});let Ge;if(H.value.chainName==="Aptos")Ge=await i.value.currentWallet.signAndSubmitTransaction(xe);else{const st=await i.value.currentWallet.signAndExecuteTransaction(xe);Ge=R.value.handleTx(st)}if(Ge&&Ge.hash){Bn(Ge.hash),vt(!1),tn(!0);const st={title:e("button.addLiquidity"),desc:e("tips.addLiquiditySuccessText",{from:Te.value?"":`${h.value} ${(at=q.value)==null?void 0:at.symbol}`,and:!Te.value&&!Me.value?"and":"",to:Me.value?"":`${g.value} ${(Ot=w.value)==null?void 0:Ot.symbol}`}),hash:Ge.hash,tit:`Opened Position: ${Z.value.symbol}`,text:`Deopsit ${Te.value?"":`${h.value} ${(gt=q.value)==null?void 0:gt.symbol}`} ${!Te.value&&!Me.value?"and":""} ${Me.value?"":`${g.value} ${(Ut=w.value)==null?void 0:Ut.symbol}`}`};R.value.showTransitionPending(st);const yt=await R.value.watchTransaction(st,!0);if(yt.status){if(tn(!1),be.value.setCurrentPositionLoading(!0),H.value.chainName==="Aptos")be.value.setCurrentPositionInfo(yt.nftInfo[0].data.id.creator,yt.nftInfo[0].data.id.collection,yt.nftInfo[0].data.name,H.value.chainName);else{const rn=yt.nftInfo.filter($t=>$t.moveEvent&&$t.moveEvent.type.includes("OpenPositionEvent"));be.value.setCurrentPositionInfo((Dt=(xt=($e=rn[0])==null?void 0:$e.moveEvent)==null?void 0:xt.fields)==null?void 0:Dt.pool,"","",H.value.chainName,(Ae=(Ht=(zt=rn[0])==null?void 0:zt.moveEvent)==null?void 0:Ht.fields)==null?void 0:Ae.position)}a.value=!0,setTimeout(()=>{Ft.updateCurrentPools(Z.value.poolAddress,H.value.chainName),R.value.getAccount(i.value.address)},1e3)}Ai()}else vt(!1),nn(!0);h.value="",g.value=""}catch{h.value="",g.value="",vt(!1),nn(!0)}},ur=v=>{switch(v){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"Full Range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"Custom":return e("newAdd.customTips")}},cr=v=>{switch(v){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"Full Range":return e("newAdd.fullRange");case"Custom":return e("newAdd.custom")}},Ii=v=>{L.value=v.key;const D=Z.value.token_a.decimals,K=Z.value.token_b.decimals,{lower:ee,upper:ne}=v,ie=R.value.TickMath.tickIndexToPrice(ee,D,K).toString(),re=R.value.TickMath.tickIndexToPrice(ne,D,K).toString();if(v.key=="Full Range"){On.value=ee,Un.value=ne,Ee(!0),ft();return}d.value?(p.value=String(ie),_.value=String(ie),I.value=String(re),b.value=String(re),On.value=ee,Un.value=ne,ft()):(p.value=String(1/Number(re)),_.value=String(1/Number(re)),I.value=String(1/Number(ie)),b.value=String(1/Number(ie)),On.value=R.value.TickMath.priceToTickIndex(new F(1/Number(re)),D,K),Un.value=R.value.TickMath.priceToTickIndex(new F(1/Number(ie)),D,K),ft())},fr=Q(()=>be.value.newTokenObj&&q.value.address&&be.value.newTokenObj[q.value.address]&&be.value.newTokenObj[q.value.address].logoURI),dr=Q(()=>be.value.newTokenObj&&w.value.address&&be.value.newTokenObj[w.value.address]&&be.value.newTokenObj[w.value.address].logoURI),mr=v=>{We.value.includes(v.fee)?(X.value=v.label,xn.value=v.fee,ae.push(`/deposit?tokena=${q.value.address}&tokenb=${w.value.address}&fee=${v.fee}`),_.value="0",b.value="0"):(X.value=v.label,xn.value=v.fee,ae.push(`/deposit?action=create-pool&tokena=${q.value.address}&tokenb=${w.value.address}&fee=${v.fee}`))},Dn=S(!1),hr=()=>{Z.value?Fn.value=!0:Dn.value=!0},Ve=S(null);return{getPoolInfoSuccess:sr,toCreatePool:async()=>{Dn.value=!1;let v,D,K,ee,ne,ie;const re=q.value.decimals,ue=w.value.decimals;_.value==="0"&&b.value==="\u221E"?(K=R.value.TickUtil.getMinIndex(Number(Ve.value.tickSpacing)),ee=R.value.TickUtil.getMaxIndex(Number(Ve.value.tickSpacing))):(d.value?(v=Number(_.value),D=Number(b.value)):(v=1/Number(b.value),D=1/Number(_.value)),ne=v==0?-443630:R.value.TickMath.priceToTickIndex(new F(v),re,ue),ie=R.value.TickMath.priceToTickIndex(new F(D),re,ue),K=R.value.getNearestTickByTick(ne,Number(Ve.value.tickSpacing)),ee=R.value.getNearestTickByTick(ie,Number(Ve.value.tickSpacing)));const fe=d.value?$.value:!$.value;try{const we=await R.value.getCreatPoolTransactionPayload({coinTypeA:q.value.address,coinTypeB:w.value.address,tick_spacing:Number(Ve.value.tickSpacing),initialize_sqrt_price:new Qe(Ve.value.current_sqrt_price),uri:"",max_amount_a:h.value,max_amount_b:g.value,tick_lower:K,tick_upper:ee,slippage:Number(je.value)/100,decimalsA:re,decimalsB:ue,fix_amount_a:fe,liquidityInput:Ct.value});let _e=await i.value.currentWallet.signAndSubmitTransaction(we);if(_e&&_e.hash){Bn(_e.hash),vt(!1),tn(!0);const Ce={title:"Pool created successfully",desc:"Pool created successfully ",hash:_e.hash,tit:"Pool created successfully",text:"Pool created successfully"};R.value.showTransitionPending(Ce),(await R.value.watchTransaction(Ce,!0)).status&&(tn(!1),setTimeout(()=>{R.value.setPoolConfigList(H.value.chainName),R.value.getAccount(i.value.address)},1e3)),Ai()}else vt(!1),nn(!0);h.value="",g.value=""}catch{h.value="",g.value="",vt(!1),nn(!0)}},createPoolInfo:Ve,changecurrentPrice:v=>{const D={1e-4:2,5e-4:10,.002:60,.006:200};if(q.value&&w.value&&v){const K=v&&R.value.TickMath.priceToSqrtPriceX64(new F(v),q.value.decimals,w.value.decimals),ee=q.value.decimals,ne=w.value.decimals,ie=R.value.TickMath.priceToTickIndex(new F(v),ee,ne,D[ce.query.fee]),re=ie-D[ce.query.fee]*5,ue=ie+D[ce.query.fee]*5;_.value=R.value.TickMath.tickIndexToPrice(re,ee,ne).toString(),b.value=R.value.TickMath.tickIndexToPrice(ue,ee,ne).toString(),p.value=R.value.TickMath.tickIndexToPrice(re,ee,ne),I.value=R.value.TickMath.tickIndexToPrice(ue,ee,ne);const fe={token_a:q.value,token_b:w.value,isCreate:!0,tickSpacing:D[ce.query.fee],currentPrice:v,current_sqrt_price:K,tick_lower:re,tick_upper:ue,current_tick_index:ie,currentPriceReverse:mt(String(1/v),6)};Bt.value=v,on.value=mt(String(1/v),6),Ve.value=fe,ft()}else Ve.value=null},isShowCreatePoolModal:Dn,addOrCreate:hr,halfBtnSelect:nr,selectFee:mr,isViewDetail:a,addCommom:Tt,decimalUi:Je,fromCoinUrl:fr,toCoinUrl:dr,t:e,wallet:i,toAdd:lr,chartLoading:P,currentTick:z,tickList:O,poolInfo:Z,storeIndex:H,importIcon:Qt,addLiquidityBtnText:Le,slippage:je,countdown:r,loading:s,fromCoin:q,toCoin:w,openCoinSelect:Be,onCoinSelect:er,existingCoins:u,lastSelectCoin:c,currentCoinKey:l,showCoinSelect:m,fromCoinAmount:h,toCoinAmount:g,maxBtnSelect:tr,fixedFromCoin:$,isShowLiquidityModal:Fn,direct:d,toggle:qe,edit:M,inputValue:X,feeTierList:Re,minPrice:_,maxPrice:b,invalidPriceRange:de,defaultMinPrice:p,defaultMaxPrice:I,priceRangeChangeMin:k,priceRangeChangeMax:Xe,toFullRange:Ee,clearAll:ir,clickClear:N,positionError:B,positionTips:J,router:ae,clickRefresh:it,fromCoinBlance:Oe,toCoinBlance:Ue,showToCoinLock:Me,showFromCoinLock:Te,currentPriceReverse:on,currentPrice:Bt,getPirceText:ur,currentPriceTab:L,currentPriceTabList:pe,getPirceKey:cr,priceTab:Ii,aprRewardsParameter:te,aprRewardsDateList:j,aprTab:ge,reviseValue:Ye,label:U,aprTitle:Y,isCreatePool:We,before7dContractPriceLowest:ye,before7dContractPriceHighest:x,aprRewardsTime:G,addLiquidityBtnDisabled:ve,checkNullObj:Pt}}}),Yd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAJFBMVEVHcEwlW04mW04oXlEmW04SHx4jR0B2/9wQFBMVJyVk17szaV2jJaSaAAAABHRSTlMA8K8m/cUwkQAAAL5JREFUSMdjYMAKmBWFDBgIAUMXF2GCilQy2pyQ+Swu2EBHhyNIkgnIdMCjyCUUCMJgilxDMUFKRpsblBmCU9EUFxdPgooiU9ymElSEBEYVDR1FkaumElYUVp46qmjAFTGruE0lqMgQkaGnpYFAdvk2MJ2JpEgFUTQsL0cGVUiKRKCFDLGKiLKOKIdTGASjSYWWiogqMEYL1lFFWJoRTgYEFU0Bt6QIKEoBt6SwN43QWlJEKSKx4UZ+ExDUmAQAo9rc9CAs4WAAAAAASUVORK5CYII=",Wd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAeUExURUdwTANNcARNcAdKcgEdMQRNcBM8V3bI/2Gq2ihWdudYHvAAAAAEdFJOUwDwryb9xTCRAAAAuklEQVRIx2NgwAqYFYUMGAgBw9BQYYKKVFPcgpD5rKHYgItLIEiSCcgMwKMIiFxcXGGKQlwwQWqKWxiU6YpTEdCEEIKKXFLDXAgrQjJ0VNHQUdRBhCK38pRRRQOuiFk1jLAiQ0SGdksDgczyaWA6BUmRKqJoaC9HBhVIikShhQyxioiyjiiHUxgEo0mFloqIKjBGC9ZRRViaEUEGBBW5gltSBBSFgltS2JtGaC0pohSR2HAjvwkIakwCANqYbmgtLE7YAAAAAElFTkSuQmCC",jd=""+new URL("img-no-data_2x.e925467a.png",import.meta.url).href,Gd=""+new URL("img-no-data_2x.8bc9afa2.png",import.meta.url).href;const qn=e=>(ht("data-v-7df0715a"),e=e(),pt(),e),Qd={class:"pools-container"},Jd={class:"content"},Zd={class:"content-left"},em={class:"content-left-bg"},tm={class:"content-left-title"},nm={key:0,class:"pool-warning"},im={class:"coin-select"},om={class:"pool-fee-header"},rm={key:0,class:"fee-container"},am=["onClick"],sm={key:0},lm={key:1},um={class:"deposit-title"},cm={class:"card-container"},fm={class:"card-item"},dm={class:"card-item"},mm={key:0,class:"icon","aria-hidden":"true"},hm=qn(()=>f("use",{"xlink:href":"#icon-icon-add"},null,-1)),pm=[hm],vm={class:"pc-network"},gm={class:"content-right"},ym={class:"content-right-title"},bm=qn(()=>f("svg",{class:"icon","aria-hidden":"true"},[f("use",{"xlink:href":"#icon-icon-information"})],-1)),wm={class:"content-right-bg"},_m={key:1,class:"price-tab"},km=["onClick"],Cm={key:2,class:"set-price-range"},$m={key:0},Am={key:1,class:"coin"},Im={key:2,class:"coin"},Pm={key:3,class:"no-price"},Sm={key:4,class:"toggle"},Nm=["src"],Tm=["src"],Mm={key:5,class:"position-tips"},Em=["src"],Rm={class:"tips"},Lm={key:6,class:"position-tips"},qm=["src"],Fm={class:"error"},Bm={key:7,class:"d3-chart-box"},Om={key:8,class:"day-7-price-range"},Um=qn(()=>f("i",null,null,-1)),xm={class:"gray"},Dm={key:10,class:"create-pool-tips"},zm={key:1,class:"no-data"},Hm={key:0,src:jd,alt:""},Xm={key:1,src:Gd,alt:""},Vm={key:0,class:"icon","aria-hidden":"true"},Km=qn(()=>f("use",{"xlink:href":"#icon-icon-add"},null,-1)),Ym=[Km],Wm={class:"h5-network"};function jm(e,t,n,i,o,r){var z,P,V,O,L,te,G,Y,j,U,E,H,R,ge,Ye,pe,it,de,Ee,We,Re,je,Ne,ve,Le,oe,ye,x,ae,q,w;const a=pr,s=Ur,l=lo,u=jr,c=fo,m=Ar,d=na,y=la,$=ba,N=Nn,h=yr,g=$a,_=Xa,b=pf,p=Sr,I=xf,M=Ir,J=Pr,B=yd,X=Vd;return A(),T("div",Qd,[se(a),se(s,{"pool-info":e.poolInfo,onClearAll:e.clearAll},null,8,["pool-info","onClearAll"]),f("div",Jd,[f("div",Zd,[f("div",em,[f("div",tm,[ke(C(e.$t("common.selectPool"))+" ",1),se(l,{placement:"bottom","arrow-point-at-center":""},{title:he(()=>[f("span",null,C(e.t("newAdd.poolWarning")),1)]),default:he(()=>[e.poolInfo&&e.poolInfo.isSelfBuilt?(A(),T("div",nm)):W("",!0)]),_:1})]),f("div",im,[se(u,{"coin-icon":e.fromCoin?e.fromCoin.logoURI:"","coin-name":e.fromCoin&&e.fromCoin.symbol,coin:e.fromCoin,onClick:t[0]||(t[0]=k=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),se(u,{"coin-icon":e.toCoin?e.toCoin.logoURI:"","coin-name":e.toCoin&&e.toCoin.symbol,coin:e.toCoin,onClick:t[1]||(t[1]=k=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),f("div",{class:Se(["pool-fee",e.edit?"pool-fee-edit":""])},[f("div",om,[f("span",{class:Se(e.inputValue?"":"fee-span")},C(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3)]),e.edit?(A(),T("div",rm,[e.getPoolInfoSuccess?(A(!0),T(dt,{key:1},Zn(e.feeTierList,(k,Xe)=>(A(),T("div",{key:Xe,class:Se(["fee-item",[e.inputValue.includes(k.label)?"fee-item-active":"",e.isCreatePool.includes(k.fee)&&e.$route.query.action?" pool-created":" pool-not-created"]]),onClick:qe=>e.selectFee(k)},[e.$route.query.action?(A(),T("div",sm,[f("p",null,C(k.title),1),f("p",{class:Se(e.isCreatePool.includes(k.fee)?"text-default":"text-theme")},C(e.isCreatePool.includes(k.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(A(),T("div",lm,[f("p",{class:Se(e.isCreatePool.includes(k.fee)?"text-active":"text-default")},C(k.title),3),f("p",null,C(e.isCreatePool.includes(k.fee)?"":e.$t("newAdd.notCreated")),1)])),f("span",null,C(k.text),1)],10,am))),128)):(A(),me(c,{key:0}))])):W("",!0)],2),f("div",um,C(e.$t("newAdd.depositAmounts")),1),f("div",cm,[f("div",fm,[se(m,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[2]||(t[2]=k=>e.fromCoinAmount=k),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[3]||(t[3]=k=>e.maxBtnSelect("fromCoin")),onOnHalf:t[4]||(t[4]=k=>e.halfBtnSelect("fromCoin")),onOnInput:t[5]||(t[5]=k=>{e.fromCoinAmount=k,e.fixedFromCoin=!0}),onOnSelect:t[6]||(t[6]=k=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(A(),me(d,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):W("",!0)]),f("div",dm,[se(m,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[7]||(t[7]=k=>e.toCoinAmount=k),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[8]||(t[8]=k=>e.maxBtnSelect("toCoin")),onOnHalf:t[9]||(t[9]=k=>e.halfBtnSelect("toCoin")),onOnInput:t[10]||(t[10]=k=>{e.toCoinAmount=k,e.fixedFromCoin=!1}),onOnSelect:t[11]||(t[11]=k=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(A(),me(d,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):W("",!0)]),((P=(z=e.$route)==null?void 0:z.query)==null?void 0:P.action)&&!e.poolInfo&&(!e.createPoolInfo||!e.createPoolInfo.currentPrice)?(A(),me(y,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showfromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):W("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(A(),T("img",{key:1,class:"add",src:Yd,alt:"",onClick:t[12]||(t[12]=(...k)=>e.toggle&&e.toggle(...k))})):W("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(A(),T("img",{key:2,class:"add",src:Wd,alt:"",onClick:t[13]||(t[13]=(...k)=>e.toggle&&e.toggle(...k))})):W("",!0)]),e.poolInfo||e.createPoolInfo?(A(),me($,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):W("",!0)]),se(N,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:t[14]||(t[14]=k=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:he(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")?(A(),T("svg",mm,pm)):W("",!0),f("span",null,C(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),f("div",vm,[se(h)])]),f("div",gm,[f("div",ym,[ke(C((V=e.$route)!=null&&V.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(A(),me(l,{key:0,placement:"bottom","arrow-point-at-center":""},{title:he(()=>[f("span",null,C(e.$t("newAdd.selectRangeTips")),1)]),default:he(()=>[bm]),_:1})):W("",!0)]),f("div",wm,[!((L=(O=e.$route)==null?void 0:O.query)!=null&&L.action)&&e.poolInfo||((G=(te=e.$route)==null?void 0:te.query)==null?void 0:G.action)?(A(),T(dt,{key:0},[((j=(Y=e.$route)==null?void 0:Y.query)==null?void 0:j.action)&&!e.poolInfo?(A(),me(g,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","onChangecurrentPrice"])):W("",!0),e.poolInfo?(A(),T("div",_m,[(A(!0),T(dt,null,Zn(e.currentPriceTabList,k=>(A(),T("div",{key:k,class:Se(["price-item",{"price-item-active":k.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:Xe=>e.priceTab(k)},[se(l,{placement:"bottom","arrow-point-at-center":""},{title:he(()=>[f("span",null,C(e.getPirceText(k.key)),1)]),default:he(()=>[ke(" "+C(e.getPirceKey(k.key)),1)]),_:2},1024)],10,km))),128))])):W("",!0),(E=(U=e.$route)==null?void 0:U.query)!=null&&E.action?(A(),T("div",Cm,C(e.$t("common.setPriceRange")),1)):W("",!0),e.poolInfo||((R=(H=e.$route)==null?void 0:H.query)==null?void 0:R.action)?(A(),T("div",{key:3,class:Se(["current-price",((Ye=(ge=e.$route)==null?void 0:ge.query)==null?void 0:Ye.action)&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(A(),T("span",$m,C(e.$t("common.currentPrice")),1)):W("",!0),e.fromCoin&&e.toCoin&&e.direct?(A(),T("div",Am,[f("span",null,C(e.$t("common.currentPrice")),1),ke(" "+C(e.decimalUi(e.currentPrice,6))+" ",1),(it=(pe=e.$route)==null?void 0:pe.query)!=null&&it.action?W("",!0):(A(),T(dt,{key:0},[ke(C((de=e.toCoin)==null?void 0:de.symbol)+" per "+C((Ee=e.fromCoin)==null?void 0:Ee.symbol),1)],64))])):e.fromCoin&&e.toCoin&&!e.direct?(A(),T("div",Im,[f("span",null,C(e.$t("common.currentPrice")),1),ke(" "+C(e.decimalUi(e.currentPriceReverse,6))+" ",1),(Re=(We=e.$route)==null?void 0:We.query)!=null&&Re.action?W("",!0):(A(),T(dt,{key:0},[ke(C((je=e.toCoin)==null?void 0:je.symbol)+" per "+C((Ne=e.fromCoin)==null?void 0:Ne.symbol),1)],64))])):(A(),T("div",Pm,"0.0")),e.fromCoin&&e.toCoin?(A(),T("div",Sm,[f("div",{class:Se(e.direct?"item active-item":"item"),onClick:t[15]||(t[15]=k=>e.direct?"":e.toggle())},[f("img",{src:e.direct?e.fromCoin.logoURI:e.toCoin.logoURI,alt:""},null,8,Nm),ke(" "+C(e.direct?(ve=e.fromCoin)==null?void 0:ve.symbol:(Le=e.toCoin)==null?void 0:Le.symbol),1)],2),f("div",{class:Se(e.direct?"item ":"item active-item"),onClick:t[16]||(t[16]=k=>e.direct?e.toggle():"")},[f("img",{src:e.direct?e.toCoin.logoURI:e.fromCoin.logoURI,alt:""},null,8,Tm),ke(" "+C(e.direct?(oe=e.toCoin)==null?void 0:oe.symbol:(ye=e.fromCoin)==null?void 0:ye.symbol),1)],2)])):W("",!0)],2)):W("",!0),e.poolInfo||((ae=(x=e.$route)==null?void 0:x.query)==null?void 0:ae.action)?(A(),me(_,{key:4,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):W("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(A(),T("div",Mm,[f("img",{src:e.importIcon("/image/icon-tips@2x.png"),alt:""},null,8,Em),f("p",Rm,C(e.$t("tips.positionTips")),1)])):W("",!0),e.positionError&&e.poolInfo?(A(),T("div",Lm,[f("img",{src:e.importIcon("/image/icon-tips-error@2x.png"),alt:""},null,8,qm),f("p",Fm,C(e.$t("tips.positionError")),1)])):W("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(A(),T("div",Bm,[e.fromCoin&&e.toCoin&&e.poolInfo?(A(),me(b,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):W("",!0),e.chartLoading?(A(),me(c,{key:1})):W("",!0)])):W("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(A(),T("div",Om,[Um,f("span",xm,C(e.aprRewardsTime)+" Price Range",1),f("span",null,C(e.before7dContractPriceLowest)+" - "+C(e.before7dContractPriceHighest),1)])):W("",!0),e.poolInfo&&!e.poolInfo.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.poolInfo.isSelfBuilt&&e.maxPrice=="\u221E"?(A(),me(p,{key:9,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):W("",!0),((w=(q=e.$route)==null?void 0:q.query)==null?void 0:w.action)&&!e.poolInfo?(A(),T("div",Dm,C(e.$t("newAdd.createPoolText")),1)):W("",!0)],64)):(A(),T("div",zm,[e.storeIndex.theme=="default"?(A(),T("img",Hm)):(A(),T("img",Xm)),f("p",null,C(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&!e.poolInfo.isSelfBuilt?(A(),me(I,{key:0,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):W("",!0)])]),se(N,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn h5-btn",onClick:t[17]||(t[17]=k=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:he(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")?(A(),T("svg",Vm,Ym)):W("",!0),f("span",null,C(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),f("div",Wm,[se(h)]),e.showCoinSelect?(A(),me(M,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:t[18]||(t[18]=k=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):W("",!0),e.isShowLiquidityModal?(A(),me(J,{key:1,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"pool-info":e.poolInfo,onToAdd:e.toAdd,onOnClose:t[19]||(t[19]=k=>e.isShowLiquidityModal=!1)},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","min-price","max-price","current-price","current-price-reverse","pool-info","onToAdd"])):W("",!0),e.isViewDetail?(A(),me(B,{key:2,onOnClose:t[20]||(t[20]=k=>e.isViewDetail=!1)})):W("",!0),e.isShowCreatePoolModal&&e.fromCoin&&e.toCoin?(A(),me(X,{key:3,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price":e.createPoolInfo.currentPrice,onOnClose:t[21]||(t[21]=k=>e.isShowCreatePoolModal=!1),onCreatePool:e.toCreatePool},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","min-price","max-price","current-price","onCreatePool"])):W("",!0)])}const hh=He(Kd,[["render",jm],["__scopeId","data-v-7df0715a"]]);export{hh as default};
