var Fb=Object.defineProperty;var Gb=(e,t,n)=>t in e?Fb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Le=(e,t,n)=>(Gb(e,typeof t!="symbol"?t+"":t,n),n);import{eW as eh,T as Yo,L as _t,U as Rr,eX as Wb,eQ as Ia,eY as Vb,eR as Fo,eZ as _f,eS as ay,f as o0,e_ as jl,e$ as Kb,K as Xb}from"./entry.844dbd3c.js";const Zb="pro",Jb={pro:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0x4fb259302630bf727f1b489e0597131fe4d8ccba12074bb7fedba3886c008945",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://alpha.cetus.zone",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!1},Sui:{fullRpcUrl:"https://fullnode.testnet.sui.io",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet-ex.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet_router:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"0x9dac946be53cf3dd137fa9289a23ecf146f8b87f3eb1a91cc323c93cdd26f8b3",config:{coin_registry_id:"0x2cc70e515a70f3f953363febbab5e01027a25fc01b729d9de29df3db326cc302",pool_registry_id:"0xfd15ad9a6493fc3ff6b2fc922daeda50bba3df760fda32e53382b7f8dbcbc133",coin_list_owner:"0x44682678136f8e8b5a4ffbf9fe06a940b0ccbc9d46d9ae1a68aef2332c2e9cf1",pool_list_owner:"0x494262448a7b8d07e6f00980b67f07a18432a5587d898c27651d18daa4c4c33f"}},clmm:{clmm_display:"0xb7e7513751376aed2e21b267ef6edebe806a27c979870d3575658dd443ac4248",clmm_router:"0x5b77ec28a4077acb46e27e2421aa36b6bbdbe14b4165bc8a7024f10f0fde6112",config:{pools_id:"0x67679ae85ea0f39f5c211330bb830f68aeccfbd0085f47f80fc27bef981cc678",global_config_id:"0x28565a057d74e4c20d502002bdef5ecf8ff99e1bd9fc4dd11fe549c858ee99d7",global_vault_id:"0x6d582d2fa147214d50a0e537084859403e96a3b4554e962d5e993ad5761251f4"}},launchpad:{ido_display:"0x983e7e23e5febcdc703249eeb2bbc88ead8590928dfd4b37386ce958244a595c",ido_router:"0x983e7e23e5febcdc703249eeb2bbc88ead8590928dfd4b37386ce958244a595c",lock_display:"0x2be1314d0ca4c12400e4c48c58854b430a4a3c57fc5a45792926755c6a560d9e",lock_router:"0x2be1314d0ca4c12400e4c48c58854b430a4a3c57fc5a45792926755c6a560d9e",config:{pools_id:"0x5f7b271f5f21c16532440161c4a8fa8247f43c8e6054fcfa75cb4ad7b207d60a",admin_cap_id:"0x094f16cf0a37b38f6429416a30c8ef1a5f1a80286b460e8917e9d1d9252d48ba",config_cap_id:"0xe94fe811f1bef8cef1e323e95c8514c81d0a11c4765434762adb5480584aa051",lock_manager_id:"0xded40f6b0ffebeaece53ead5c5547891da6988fc2f3fe0ba998182c01ca646fd"}},xwhale:{xwhale_display:"0x02d4ebbd89ec4e9c2c32680e22a6361006656b13f8cd506323cffa55b6254d33",xwhale_router:"0x02d4ebbd89ec4e9c2c32680e22a6361006656b13f8cd506323cffa55b6254d33",dividends_display:"0xe260b05f240d3920e60c63a194629f1b5a9b360c59fad2acb27c0d98394f2e58",dividends_router:"0xe260b05f240d3920e60c63a194629f1b5a9b360c59fad2acb27c0d98394f2e58",booster_display:"",booster_router:"",whale_faucet:"0x0ac4240fe7e1d45a5996cb82d5269517951788482707ed28bee92dfa29c357d2",config:{xwhale_manager_id:"0x6634aca8126ba9636d5239e3f1f7d26ceea607b329dd09014425e444aca4dcdd",lock_manager_id:"0xa6f43b6ee8f710501d4bd9df076ce5ae9354056db9c2f4e513bfc653c789c998",dividend_manager_id:"0x16da531c80dd37a2f4f8c1374f474f6158253b88fb1ed44c5653b03b06d3dfd6"}},hasCreatePool:!1,hasNotifi:!1}},pre:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!0},Sui:{fullRpcUrl:"https://fullnode.testnet.sui.io",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet-ex.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet_router:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"0x9dac946be53cf3dd137fa9289a23ecf146f8b87f3eb1a91cc323c93cdd26f8b3",config:{coin_registry_id:"0x2cc70e515a70f3f953363febbab5e01027a25fc01b729d9de29df3db326cc302",pool_registry_id:"0xfd15ad9a6493fc3ff6b2fc922daeda50bba3df760fda32e53382b7f8dbcbc133",coin_list_owner:"0x44682678136f8e8b5a4ffbf9fe06a940b0ccbc9d46d9ae1a68aef2332c2e9cf1",pool_list_owner:"0x494262448a7b8d07e6f00980b67f07a18432a5587d898c27651d18daa4c4c33f"}},clmm:{clmm_display:"0xb7e7513751376aed2e21b267ef6edebe806a27c979870d3575658dd443ac4248",clmm_router:"0x5b77ec28a4077acb46e27e2421aa36b6bbdbe14b4165bc8a7024f10f0fde6112",config:{pools_id:"0x67679ae85ea0f39f5c211330bb830f68aeccfbd0085f47f80fc27bef981cc678",global_config_id:"0x28565a057d74e4c20d502002bdef5ecf8ff99e1bd9fc4dd11fe549c858ee99d7",global_vault_id:"0x6d582d2fa147214d50a0e537084859403e96a3b4554e962d5e993ad5761251f4"}},launchpad:{ido_display:"0x983e7e23e5febcdc703249eeb2bbc88ead8590928dfd4b37386ce958244a595c",ido_router:"0x983e7e23e5febcdc703249eeb2bbc88ead8590928dfd4b37386ce958244a595c",lock_display:"0x2be1314d0ca4c12400e4c48c58854b430a4a3c57fc5a45792926755c6a560d9e",lock_router:"0x2be1314d0ca4c12400e4c48c58854b430a4a3c57fc5a45792926755c6a560d9e",config:{pools_id:"0x5f7b271f5f21c16532440161c4a8fa8247f43c8e6054fcfa75cb4ad7b207d60a",admin_cap_id:"0x094f16cf0a37b38f6429416a30c8ef1a5f1a80286b460e8917e9d1d9252d48ba",config_cap_id:"0xe94fe811f1bef8cef1e323e95c8514c81d0a11c4765434762adb5480584aa051",lock_manager_id:"0xded40f6b0ffebeaece53ead5c5547891da6988fc2f3fe0ba998182c01ca646fd"}},xwhale:{xwhale_display:"0x02d4ebbd89ec4e9c2c32680e22a6361006656b13f8cd506323cffa55b6254d33",xwhale_router:"0x02d4ebbd89ec4e9c2c32680e22a6361006656b13f8cd506323cffa55b6254d33",dividends_display:"0xe260b05f240d3920e60c63a194629f1b5a9b360c59fad2acb27c0d98394f2e58",dividends_router:"0xe260b05f240d3920e60c63a194629f1b5a9b360c59fad2acb27c0d98394f2e58",booster_display:"",booster_router:"",whale_faucet:"0x0ac4240fe7e1d45a5996cb82d5269517951788482707ed28bee92dfa29c357d2",config:{xwhale_manager_id:"0x6634aca8126ba9636d5239e3f1f7d26ceea607b329dd09014425e444aca4dcdd",lock_manager_id:"0xa6f43b6ee8f710501d4bd9df076ce5ae9354056db9c2f4e513bfc653c789c998",dividend_manager_id:"0x16da531c80dd37a2f4f8c1374f474f6158253b88fb1ed44c5653b03b06d3dfd6"}},hasCreatePool:!1,hasNotifi:!1}},test:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.dev.notifi.network/gql",notifiEnv:"Development",hasCreatePool:!0,hasNotifi:!0},Sui:{fullRpcUrl:"https://fullnode.testnet.sui.io",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet_router:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"0x9dac946be53cf3dd137fa9289a23ecf146f8b87f3eb1a91cc323c93cdd26f8b3",config:{coin_registry_id:"0x2cc70e515a70f3f953363febbab5e01027a25fc01b729d9de29df3db326cc302",pool_registry_id:"0xfd15ad9a6493fc3ff6b2fc922daeda50bba3df760fda32e53382b7f8dbcbc133",coin_list_owner:"0x44682678136f8e8b5a4ffbf9fe06a940b0ccbc9d46d9ae1a68aef2332c2e9cf1",pool_list_owner:"0x494262448a7b8d07e6f00980b67f07a18432a5587d898c27651d18daa4c4c33f"}},clmm:{clmm_display:"0xb7e7513751376aed2e21b267ef6edebe806a27c979870d3575658dd443ac4248",clmm_router:"0x5b77ec28a4077acb46e27e2421aa36b6bbdbe14b4165bc8a7024f10f0fde6112",config:{pools_id:"0x67679ae85ea0f39f5c211330bb830f68aeccfbd0085f47f80fc27bef981cc678",global_config_id:"0x28565a057d74e4c20d502002bdef5ecf8ff99e1bd9fc4dd11fe549c858ee99d7",global_vault_id:"0x6d582d2fa147214d50a0e537084859403e96a3b4554e962d5e993ad5761251f4"}},launchpad:{ido_display:"0x983e7e23e5febcdc703249eeb2bbc88ead8590928dfd4b37386ce958244a595c",ido_router:"0x983e7e23e5febcdc703249eeb2bbc88ead8590928dfd4b37386ce958244a595c",lock_display:"0x2be1314d0ca4c12400e4c48c58854b430a4a3c57fc5a45792926755c6a560d9e",lock_router:"0x2be1314d0ca4c12400e4c48c58854b430a4a3c57fc5a45792926755c6a560d9e",config:{pools_id:"0x5f7b271f5f21c16532440161c4a8fa8247f43c8e6054fcfa75cb4ad7b207d60a",admin_cap_id:"0x094f16cf0a37b38f6429416a30c8ef1a5f1a80286b460e8917e9d1d9252d48ba",config_cap_id:"0xe94fe811f1bef8cef1e323e95c8514c81d0a11c4765434762adb5480584aa051",lock_manager_id:"0xded40f6b0ffebeaece53ead5c5547891da6988fc2f3fe0ba998182c01ca646fd"}},xwhale:{xwhale_display:"0x02d4ebbd89ec4e9c2c32680e22a6361006656b13f8cd506323cffa55b6254d33",xwhale_router:"0x02d4ebbd89ec4e9c2c32680e22a6361006656b13f8cd506323cffa55b6254d33",dividends_display:"0xe260b05f240d3920e60c63a194629f1b5a9b360c59fad2acb27c0d98394f2e58",dividends_router:"0xe260b05f240d3920e60c63a194629f1b5a9b360c59fad2acb27c0d98394f2e58",booster_display:"",booster_router:"",whale_faucet:"0x0ac4240fe7e1d45a5996cb82d5269517951788482707ed28bee92dfa29c357d2",config:{xwhale_manager_id:"0x6634aca8126ba9636d5239e3f1f7d26ceea607b329dd09014425e444aca4dcdd",lock_manager_id:"0xa6f43b6ee8f710501d4bd9df076ce5ae9354056db9c2f4e513bfc653c789c998",dividend_manager_id:"0x16da531c80dd37a2f4f8c1374f474f6158253b88fb1ed44c5653b03b06d3dfd6"}},hasCreatePool:!0,hasNotifi:!1},Sui2:{cetusClmm:"0x296e6ae7204fc10eaf8f08e4b4faf4ddd4ad001c",cetusIntegrate:"0x9cce89ed875c398dde64a5ccdfbebb6140b13b0f",integerMate:"0x3a1a096b4d2598eb3958c91fc8787c3e62f40770",swapPartner:"0xa420bad83346a8cd05c98fff988d90ef8d149b4c",TokenDeployer:"0x7bfe88372b99abb54609b58fee652b97a162cbcf",faucetObjectId:"0x6740d70296035d0345bed636a820af129f6ed422",initEventConfig:{initFactoryEvent:{pools_id:"0x526554aec8e229cc79f2a3e375813f6be92aabf8"},initPartnerEvent:{partners_id:"0x9bd1abed942c804d11a3ebb224fef4c8abda4dbb"},initConfigEvent:{admin_cap_id:"0x1b585be50405d80698ee1cffbde0e884944b64ce",global_config_id:"0x7b357faee524eda340b9924a828814eab7c107f7",protocol_fee_claim_cap_id:"0xfec3fa3d8176952d584213d9e286bbbb1717af02"}},tokenConfig:{coin_registry_id:"0x3f9f6609fc99440e41c7e178ff1250274170c889",pool_registry_id:"0x699cff0b7e44e565908b4acfa482022cfbfc16c1",coin_list_owner:"0x7634802da06a3a4c8e4aa8c425cfd83406670e34",pool_list_owner:"0xa4e177fe96f33a7ec7f2aa14ad5387cac7c7cc21"},rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",simulationAccount:"0x3f6cfdcf7bc19e86693d3d0f261f56b6e8caff0d",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0xbd1a8bd64216a4b102dc45a926bde4eb212108ae",currentChainTokenAddress:"0x2::sui::SUI"}},local:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",hasCreatePool:!0,hasNotifi:!0},Sui:{fullRpcUrl:"http://192.168.1.41:9000",faucetURL:"http://192.168.1.41:9123/gas",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet_router:"0x61353a797a3d7f9c5522641bf824d730272260bcf66c7fcaf36a50243418caca",simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"",config:{coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""}},clmm:{clmm_display:"0x33e0056fdbd9444c20302ce4141eaf5ec66fe864b62d8c0e3ee3bb1d138ee445",clmm_router:"0x306efa18b1a70af5007aaccd3b228e4f97f5596bf20c3a2d7b6321dfe8e30765",config:{pools_id:"0xae24565ffac1eb9f2fcb03b1dc21c21d1ce2a992d13a1a58e51d28293249d21c",global_config_id:"0xb8bd0870a43a75c55690a8ffbc13682ae7e0a8254348524963657474342c20b4",global_vault_id:"0x639c2d2d068df99602a9ef014b000df26b0312c07cb06065992cac911e1c376d"}},launchpad:{ido_display:"0x035fb17bbae20f35d476ea93f4a3d0b8e8da4c63d4a8598b647dfa4931f35774",ido_router:"0x035fb17bbae20f35d476ea93f4a3d0b8e8da4c63d4a8598b647dfa4931f35774",lock_display:"0x10df8c3eee9ea7a459a1f8417ced9c2e0f3eb9ff62862e0f42eced2763b94f42",lock_router:"0x10df8c3eee9ea7a459a1f8417ced9c2e0f3eb9ff62862e0f42eced2763b94f42",config:{pools_id:"0x1b3a62d143ac08dee37670eea58e714ab7cd501a396060bd2caf7a77fee88dfa",admin_cap_id:"0x0cb7daf2484c38e4a183813b8ad51b6ed664d135b7897e72be095768c90df911",config_cap_id:"0x40f0cee72c6e86d5a7b0e013a18cad8bf567bb70075b4a0f1c63eab8953a3dfd",lock_manager_id:"0x23954bf7d5c7880b50a369ee439a11ab771b7e0079a042645c4920d5e618b898"}},xwhale:{xwhale_display:"0x590775726e4c07f24a8a6cd14e2a05cb719b2c09690bbce2d9b251b2ff6fa941",xwhale_router:"0x590775726e4c07f24a8a6cd14e2a05cb719b2c09690bbce2d9b251b2ff6fa941",dividends_display:"0x6dc245017f96ebba55486f0c4fcf8f58c48f30980f48a3f27e1c98672cb253b9",dividends_router:"0x6dc245017f96ebba55486f0c4fcf8f58c48f30980f48a3f27e1c98672cb253b9",booster_display:"",booster_router:"",whale_faucet:"0xb0845bcf2f985e6ea5b401218598212e11f915a0c4d7afd1ed6e04b83e7d6310",config:{xwhale_manager_id:"0x46b2a60ee784180534ea2a6568ca510b488ea190f822cab8a9d38fb01b8e6421",lock_manager_id:"0x253e34da0542134e39b3c5dade1f5437d1b6ef6e90adfaa014186b456b6d7ffd",dividend_manager_id:"0xced885ada26d894f30efc236303caa500c994a25db5b18ee01e7664729cb983c"}},hasCreatePool:!0,hasNotifi:!1},Sui2:{cetusClmm:"0x296e6ae7204fc10eaf8f08e4b4faf4ddd4ad001c",cetusIntegrate:"0x9cce89ed875c398dde64a5ccdfbebb6140b13b0f",integerMate:"0x3a1a096b4d2598eb3958c91fc8787c3e62f40770",swapPartner:"0xa420bad83346a8cd05c98fff988d90ef8d149b4c",TokenDeployer:"0x7bfe88372b99abb54609b58fee652b97a162cbcf",faucetObjectId:"0x6740d70296035d0345bed636a820af129f6ed422",initEventConfig:{initFactoryEvent:{pools_id:"0x526554aec8e229cc79f2a3e375813f6be92aabf8"},initPartnerEvent:{partners_id:"0x9bd1abed942c804d11a3ebb224fef4c8abda4dbb"},initConfigEvent:{admin_cap_id:"0x1b585be50405d80698ee1cffbde0e884944b64ce",global_config_id:"0x7b357faee524eda340b9924a828814eab7c107f7",protocol_fee_claim_cap_id:"0xfec3fa3d8176952d584213d9e286bbbb1717af02"}},tokenConfig:{coin_registry_id:"0x3f9f6609fc99440e41c7e178ff1250274170c889",pool_registry_id:"0x699cff0b7e44e565908b4acfa482022cfbfc16c1",coin_list_owner:"0x7634802da06a3a4c8e4aa8c425cfd83406670e34",pool_list_owner:"0xa4e177fe96f33a7ec7f2aa14ad5387cac7c7cc21"},rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",simulationAccount:"0x3f6cfdcf7bc19e86693d3d0f261f56b6e8caff0d",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0xbd1a8bd64216a4b102dc45a926bde4eb212108ae",currentChainTokenAddress:"0x2::sui::SUI"}},dev:{Aptos:{liquidswapDeployer:"0x80d6b00867cafcd40f9db3aa570ad1196f11ec5f57506799aec2a2940651fd37",faucetObjectId:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29",fetcher:"0x3ac260dc3ba7d7173e5ad8ce9a5d0ee62184e95425343cfd287f6e53dc52a4bd",clmmIntegrate:"0x3ac260dc3ba7d7173e5ad8ce9a5d0ee62184e95425343cfd287f6e53dc52a4bd",TokenDeployer:"0xc50b243a7180dfad9afd7dff8451c7b16cf27a92b6816f521b1f3c6d0c5397e3",IntegerMate:"0x45ba3bca9e81591a852df423105ecf2978dc03a5c0223033669bb889656a94a8",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.devnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"devnet",networkTip:"Devnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",hasCreatePool:!0,hasNotifi:!0},Sui:{liquidswapDeployer:"0x2b8f54bf724fa62789299569210d6c94758dd636",globalPauseStatusObjectId:"0x877cd08c02a2faa110a020f4f203304b114d76d2",faucetObjectId:"0x61df0e8caaf7b241d137fdc97906e3ca6bd68cca",rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",ammSite:"https://cetus-pre.netlify.app",api:"https://api.devcetus.zone",currentChainTokenAddress:"0x2::sui::SUI",hasCreatePool:!0,hasNotifi:!1}}},ct={...Jb[Zb]},zp=new Wb,cy=eh("index",{state:()=>({slippage:localStorage.getItem("cetus-slippage")||"0.5",isShowSuccess:!1,isShowRejected:!1,isShowWaiting:!1,currentTransactionDesc:"",currentTransactionDescText:"",currentTransactionTxid:"",theme:"",chainName:"",positionNum:0,statsData:{},topPoolsList:[],topPoolsObj:{},newTopPoolsObj:{},topTokensList:[],topTokenObj:{},newtopTokenObj:{},lang:zp.get("lang")||"en",addressLpTokens:{},addressHistTokens:{},transactionList:JSON.parse(localStorage.getItem("transactionList")||"[]")||[],newtransactionList:JSON.parse(localStorage.getItem("newtransactionList")||"[]")||[],newAddtransactionList:JSON.parse(localStorage.getItem("newAddtransactionList")||"[]")||[],isSelect:"",openMore:!1,openSwitchChain:!1,openSwitchLang:!1,openH5Icon:!1,isShowMore:!1,isShowNotifi:!1,isShowSetting:!1}),actions:{copy(e){if(navigator.clipboard)navigator.clipboard.writeText(e);else{const n=document.createElement("input");n.readOnly=!0,document.body.appendChild(n),n.value=e,n.select(),document.execCommand("Copy"),document.body.removeChild(n)}const{$notify:t}=Yo();t.success({icon:_t("svg",{class:{icon:!0},"aria-hidden":!0},[_t("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:_t("div",{class:"notification-title"},[_t("span",{innerHTML:Rr.global.t("tips.copySuccess")},null)]),class:"ant-notification-copy"})},setOpenMore(e){this.openMore=e},setOpenSwitchChain(e){this.openSwitchChain=e},setOpenSwitchLang(e){this.openSwitchLang=e},setOpenH5Icon(e){this.openH5Icon=e},setIsShowMore(e){this.isShowMore=e},setSlippage(e){this.slippage=e,localStorage.setItem("cetus-slippage",e)},setPositiomNum(){this.positionNum=this.positionNum+1},setTheme(e){this.theme=e,e=="default"?(this.chainName="Aptos",localStorage.setItem("chainName","Aptos")):e=="sui"?(this.chainName="Sui",localStorage.setItem("chainName","Sui")):e=="sui2"&&(this.chainName="Sui2",localStorage.setItem("chainName","Sui2"))},setIsShowSuccess(e){this.isShowSuccess=e},setIsShowRejected(e){this.isShowRejected=e},setIsShowWaiting(e){this.isShowWaiting=e},setTransactionDesc(e){this.currentTransactionDesc=e},setTransactionDescText(e){this.currentTransactionDescText=e},setTransactionTxid(e){this.currentTransactionTxid=e},async getStatsData(e){let t=[],n=[];const{data:r}=e=="Aptos"?await fetch(`${ct[e||"Aptos"].api}/v2/swap/count`).then(o=>o.json()):await fetch(`${ct[e||"Sui"].api}/v2/sui/swap/count`).then(o=>o.json()),i=e=="Aptos"?await fetch(`${ct[e||"Aptos"].api}/v2/contract/price`).then(o=>o.json()):await fetch(`${ct[e||"Sui"].api}/v2/sui/contract/price`).then(o=>o.json());n=Object.fromEntries(i.data.list.map(o=>[o.swap_account,o])),this.addressHistTokens=n,this.statsData=r;const s=[];if(r&&r.pools){for(let o=0;o<r.pools.length;o++){const a=r.pools[o],c=a.rewarder_apr[0]?Number(a.rewarder_apr[0].substring(0,a.rewarder_apr[0].length-1)):0,u=a.rewarder_apr[1]?Number(a.rewarder_apr[1].substring(0,a.rewarder_apr[1].length-1)):0,d=a.rewarder_apr[2]?Number(a.rewarder_apr[2].substring(0,a.rewarder_apr[2].length-1)):0,l=c+u+d;s.push({...a,aprNum:a?String(Number(a.apr_7day.substring(0,a.apr_7day.length-1))+l):"0",token_a_address:a.token_a_reserves=="SUI"?"0x2::sui::SUI":a.token_a_address,token_b_address:a.token_b_reserves=="SUI"?"0x2::sui::SUI":a.token_b_address})}this.topPoolsList=s,t=Object.fromEntries(r.pools.map(o=>[o.swap_account,o])),this.topPoolsObj=Object.fromEntries(r.pools.map(o=>[o.name,o])),this.newTopPoolsObj=Object.fromEntries(r.pools.map(o=>[o.swap_account,o]))}r&&r.tokens&&(this.topTokensList=r.tokens,this.addressLpTokens=t,this.topTokenObj=Object.fromEntries(r.tokens.map(o=>[o.name,o])),this.newtopTokenObj=Object.fromEntries(r.tokens.map(o=>[o.address,o])))},setLang(e){zp.set("lang",e),this.lang=e},setTransactionList(e){this.newAddtransactionList.push(e),localStorage.setItem("newAddtransactionList",JSON.stringify(this.newAddtransactionList))},clearTransactionList(){const e=this.newAddtransactionList.filter(t=>t.chainName!==this.chainName);this.newAddtransactionList=e,localStorage.setItem("newAddtransactionList",e.length>0?JSON.stringify(e):"")},setIsSelect(e){this.isSelect=e},setIsShowNotifi(e){this.isShowNotifi=e},setIsShowSetting(e){this.isShowSetting=e}}});function uy(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Os={},Yb={get exports(){return Os},set exports(e){Os=e}};const Qb={},ev=Object.freeze(Object.defineProperty({__proto__:null,default:Qb},Symbol.toStringTag,{value:"Module"})),th=Ia(ev);(function(e){(function(t){var n=function(A){var M,q=new Float64Array(16);if(A)for(M=0;M<A.length;M++)q[M]=A[M];return q},r=function(){throw new Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var o=n(),a=n([1]),c=n([56129,1]),u=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function _(A,M,q,m){A[M]=q>>24&255,A[M+1]=q>>16&255,A[M+2]=q>>8&255,A[M+3]=q&255,A[M+4]=m>>24&255,A[M+5]=m>>16&255,A[M+6]=m>>8&255,A[M+7]=m&255}function y(A,M,q,m,D){var te,ee=0;for(te=0;te<D;te++)ee|=A[M+te]^q[m+te];return(1&ee-1>>>8)-1}function b(A,M,q,m){return y(A,M,q,m,16)}function B(A,M,q,m){return y(A,M,q,m,32)}function E(A,M,q,m){for(var D=m[0]&255|(m[1]&255)<<8|(m[2]&255)<<16|(m[3]&255)<<24,te=q[0]&255|(q[1]&255)<<8|(q[2]&255)<<16|(q[3]&255)<<24,ee=q[4]&255|(q[5]&255)<<8|(q[6]&255)<<16|(q[7]&255)<<24,de=q[8]&255|(q[9]&255)<<8|(q[10]&255)<<16|(q[11]&255)<<24,ve=q[12]&255|(q[13]&255)<<8|(q[14]&255)<<16|(q[15]&255)<<24,Ae=m[4]&255|(m[5]&255)<<8|(m[6]&255)<<16|(m[7]&255)<<24,xe=M[0]&255|(M[1]&255)<<8|(M[2]&255)<<16|(M[3]&255)<<24,Ot=M[4]&255|(M[5]&255)<<8|(M[6]&255)<<16|(M[7]&255)<<24,$e=M[8]&255|(M[9]&255)<<8|(M[10]&255)<<16|(M[11]&255)<<24,Ye=M[12]&255|(M[13]&255)<<8|(M[14]&255)<<16|(M[15]&255)<<24,et=m[8]&255|(m[9]&255)<<8|(m[10]&255)<<16|(m[11]&255)<<24,at=q[16]&255|(q[17]&255)<<8|(q[18]&255)<<16|(q[19]&255)<<24,st=q[20]&255|(q[21]&255)<<8|(q[22]&255)<<16|(q[23]&255)<<24,tt=q[24]&255|(q[25]&255)<<8|(q[26]&255)<<16|(q[27]&255)<<24,rt=q[28]&255|(q[29]&255)<<8|(q[30]&255)<<16|(q[31]&255)<<24,nt=m[12]&255|(m[13]&255)<<8|(m[14]&255)<<16|(m[15]&255)<<24,Me=D,je=te,Oe=ee,qe=de,De=ve,Re=Ae,se=xe,oe=Ot,ge=$e,he=Ye,pe=et,be=at,Je=st,yt=tt,vt=rt,mt=nt,X,Bt=0;Bt<20;Bt+=2)X=Me+Je|0,De^=X<<7|X>>>32-7,X=De+Me|0,ge^=X<<9|X>>>32-9,X=ge+De|0,Je^=X<<13|X>>>32-13,X=Je+ge|0,Me^=X<<18|X>>>32-18,X=Re+je|0,he^=X<<7|X>>>32-7,X=he+Re|0,yt^=X<<9|X>>>32-9,X=yt+he|0,je^=X<<13|X>>>32-13,X=je+yt|0,Re^=X<<18|X>>>32-18,X=pe+se|0,vt^=X<<7|X>>>32-7,X=vt+pe|0,Oe^=X<<9|X>>>32-9,X=Oe+vt|0,se^=X<<13|X>>>32-13,X=se+Oe|0,pe^=X<<18|X>>>32-18,X=mt+be|0,qe^=X<<7|X>>>32-7,X=qe+mt|0,oe^=X<<9|X>>>32-9,X=oe+qe|0,be^=X<<13|X>>>32-13,X=be+oe|0,mt^=X<<18|X>>>32-18,X=Me+qe|0,je^=X<<7|X>>>32-7,X=je+Me|0,Oe^=X<<9|X>>>32-9,X=Oe+je|0,qe^=X<<13|X>>>32-13,X=qe+Oe|0,Me^=X<<18|X>>>32-18,X=Re+De|0,se^=X<<7|X>>>32-7,X=se+Re|0,oe^=X<<9|X>>>32-9,X=oe+se|0,De^=X<<13|X>>>32-13,X=De+oe|0,Re^=X<<18|X>>>32-18,X=pe+he|0,be^=X<<7|X>>>32-7,X=be+pe|0,ge^=X<<9|X>>>32-9,X=ge+be|0,he^=X<<13|X>>>32-13,X=he+ge|0,pe^=X<<18|X>>>32-18,X=mt+vt|0,Je^=X<<7|X>>>32-7,X=Je+mt|0,yt^=X<<9|X>>>32-9,X=yt+Je|0,vt^=X<<13|X>>>32-13,X=vt+yt|0,mt^=X<<18|X>>>32-18;Me=Me+D|0,je=je+te|0,Oe=Oe+ee|0,qe=qe+de|0,De=De+ve|0,Re=Re+Ae|0,se=se+xe|0,oe=oe+Ot|0,ge=ge+$e|0,he=he+Ye|0,pe=pe+et|0,be=be+at|0,Je=Je+st|0,yt=yt+tt|0,vt=vt+rt|0,mt=mt+nt|0,A[0]=Me>>>0&255,A[1]=Me>>>8&255,A[2]=Me>>>16&255,A[3]=Me>>>24&255,A[4]=je>>>0&255,A[5]=je>>>8&255,A[6]=je>>>16&255,A[7]=je>>>24&255,A[8]=Oe>>>0&255,A[9]=Oe>>>8&255,A[10]=Oe>>>16&255,A[11]=Oe>>>24&255,A[12]=qe>>>0&255,A[13]=qe>>>8&255,A[14]=qe>>>16&255,A[15]=qe>>>24&255,A[16]=De>>>0&255,A[17]=De>>>8&255,A[18]=De>>>16&255,A[19]=De>>>24&255,A[20]=Re>>>0&255,A[21]=Re>>>8&255,A[22]=Re>>>16&255,A[23]=Re>>>24&255,A[24]=se>>>0&255,A[25]=se>>>8&255,A[26]=se>>>16&255,A[27]=se>>>24&255,A[28]=oe>>>0&255,A[29]=oe>>>8&255,A[30]=oe>>>16&255,A[31]=oe>>>24&255,A[32]=ge>>>0&255,A[33]=ge>>>8&255,A[34]=ge>>>16&255,A[35]=ge>>>24&255,A[36]=he>>>0&255,A[37]=he>>>8&255,A[38]=he>>>16&255,A[39]=he>>>24&255,A[40]=pe>>>0&255,A[41]=pe>>>8&255,A[42]=pe>>>16&255,A[43]=pe>>>24&255,A[44]=be>>>0&255,A[45]=be>>>8&255,A[46]=be>>>16&255,A[47]=be>>>24&255,A[48]=Je>>>0&255,A[49]=Je>>>8&255,A[50]=Je>>>16&255,A[51]=Je>>>24&255,A[52]=yt>>>0&255,A[53]=yt>>>8&255,A[54]=yt>>>16&255,A[55]=yt>>>24&255,A[56]=vt>>>0&255,A[57]=vt>>>8&255,A[58]=vt>>>16&255,A[59]=vt>>>24&255,A[60]=mt>>>0&255,A[61]=mt>>>8&255,A[62]=mt>>>16&255,A[63]=mt>>>24&255}function x(A,M,q,m){for(var D=m[0]&255|(m[1]&255)<<8|(m[2]&255)<<16|(m[3]&255)<<24,te=q[0]&255|(q[1]&255)<<8|(q[2]&255)<<16|(q[3]&255)<<24,ee=q[4]&255|(q[5]&255)<<8|(q[6]&255)<<16|(q[7]&255)<<24,de=q[8]&255|(q[9]&255)<<8|(q[10]&255)<<16|(q[11]&255)<<24,ve=q[12]&255|(q[13]&255)<<8|(q[14]&255)<<16|(q[15]&255)<<24,Ae=m[4]&255|(m[5]&255)<<8|(m[6]&255)<<16|(m[7]&255)<<24,xe=M[0]&255|(M[1]&255)<<8|(M[2]&255)<<16|(M[3]&255)<<24,Ot=M[4]&255|(M[5]&255)<<8|(M[6]&255)<<16|(M[7]&255)<<24,$e=M[8]&255|(M[9]&255)<<8|(M[10]&255)<<16|(M[11]&255)<<24,Ye=M[12]&255|(M[13]&255)<<8|(M[14]&255)<<16|(M[15]&255)<<24,et=m[8]&255|(m[9]&255)<<8|(m[10]&255)<<16|(m[11]&255)<<24,at=q[16]&255|(q[17]&255)<<8|(q[18]&255)<<16|(q[19]&255)<<24,st=q[20]&255|(q[21]&255)<<8|(q[22]&255)<<16|(q[23]&255)<<24,tt=q[24]&255|(q[25]&255)<<8|(q[26]&255)<<16|(q[27]&255)<<24,rt=q[28]&255|(q[29]&255)<<8|(q[30]&255)<<16|(q[31]&255)<<24,nt=m[12]&255|(m[13]&255)<<8|(m[14]&255)<<16|(m[15]&255)<<24,Me=D,je=te,Oe=ee,qe=de,De=ve,Re=Ae,se=xe,oe=Ot,ge=$e,he=Ye,pe=et,be=at,Je=st,yt=tt,vt=rt,mt=nt,X,Bt=0;Bt<20;Bt+=2)X=Me+Je|0,De^=X<<7|X>>>32-7,X=De+Me|0,ge^=X<<9|X>>>32-9,X=ge+De|0,Je^=X<<13|X>>>32-13,X=Je+ge|0,Me^=X<<18|X>>>32-18,X=Re+je|0,he^=X<<7|X>>>32-7,X=he+Re|0,yt^=X<<9|X>>>32-9,X=yt+he|0,je^=X<<13|X>>>32-13,X=je+yt|0,Re^=X<<18|X>>>32-18,X=pe+se|0,vt^=X<<7|X>>>32-7,X=vt+pe|0,Oe^=X<<9|X>>>32-9,X=Oe+vt|0,se^=X<<13|X>>>32-13,X=se+Oe|0,pe^=X<<18|X>>>32-18,X=mt+be|0,qe^=X<<7|X>>>32-7,X=qe+mt|0,oe^=X<<9|X>>>32-9,X=oe+qe|0,be^=X<<13|X>>>32-13,X=be+oe|0,mt^=X<<18|X>>>32-18,X=Me+qe|0,je^=X<<7|X>>>32-7,X=je+Me|0,Oe^=X<<9|X>>>32-9,X=Oe+je|0,qe^=X<<13|X>>>32-13,X=qe+Oe|0,Me^=X<<18|X>>>32-18,X=Re+De|0,se^=X<<7|X>>>32-7,X=se+Re|0,oe^=X<<9|X>>>32-9,X=oe+se|0,De^=X<<13|X>>>32-13,X=De+oe|0,Re^=X<<18|X>>>32-18,X=pe+he|0,be^=X<<7|X>>>32-7,X=be+pe|0,ge^=X<<9|X>>>32-9,X=ge+be|0,he^=X<<13|X>>>32-13,X=he+ge|0,pe^=X<<18|X>>>32-18,X=mt+vt|0,Je^=X<<7|X>>>32-7,X=Je+mt|0,yt^=X<<9|X>>>32-9,X=yt+Je|0,vt^=X<<13|X>>>32-13,X=vt+yt|0,mt^=X<<18|X>>>32-18;A[0]=Me>>>0&255,A[1]=Me>>>8&255,A[2]=Me>>>16&255,A[3]=Me>>>24&255,A[4]=Re>>>0&255,A[5]=Re>>>8&255,A[6]=Re>>>16&255,A[7]=Re>>>24&255,A[8]=pe>>>0&255,A[9]=pe>>>8&255,A[10]=pe>>>16&255,A[11]=pe>>>24&255,A[12]=mt>>>0&255,A[13]=mt>>>8&255,A[14]=mt>>>16&255,A[15]=mt>>>24&255,A[16]=se>>>0&255,A[17]=se>>>8&255,A[18]=se>>>16&255,A[19]=se>>>24&255,A[20]=oe>>>0&255,A[21]=oe>>>8&255,A[22]=oe>>>16&255,A[23]=oe>>>24&255,A[24]=ge>>>0&255,A[25]=ge>>>8&255,A[26]=ge>>>16&255,A[27]=ge>>>24&255,A[28]=he>>>0&255,A[29]=he>>>8&255,A[30]=he>>>16&255,A[31]=he>>>24&255}function S(A,M,q,m){E(A,M,q,m)}function T(A,M,q,m){x(A,M,q,m)}var R=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function P(A,M,q,m,D,te,ee){var de=new Uint8Array(16),ve=new Uint8Array(64),Ae,xe;for(xe=0;xe<16;xe++)de[xe]=0;for(xe=0;xe<8;xe++)de[xe]=te[xe];for(;D>=64;){for(S(ve,de,ee,R),xe=0;xe<64;xe++)A[M+xe]=q[m+xe]^ve[xe];for(Ae=1,xe=8;xe<16;xe++)Ae=Ae+(de[xe]&255)|0,de[xe]=Ae&255,Ae>>>=8;D-=64,M+=64,m+=64}if(D>0)for(S(ve,de,ee,R),xe=0;xe<D;xe++)A[M+xe]=q[m+xe]^ve[xe];return 0}function C(A,M,q,m,D){var te=new Uint8Array(16),ee=new Uint8Array(64),de,ve;for(ve=0;ve<16;ve++)te[ve]=0;for(ve=0;ve<8;ve++)te[ve]=m[ve];for(;q>=64;){for(S(ee,te,D,R),ve=0;ve<64;ve++)A[M+ve]=ee[ve];for(de=1,ve=8;ve<16;ve++)de=de+(te[ve]&255)|0,te[ve]=de&255,de>>>=8;q-=64,M+=64}if(q>0)for(S(ee,te,D,R),ve=0;ve<q;ve++)A[M+ve]=ee[ve];return 0}function G(A,M,q,m,D){var te=new Uint8Array(32);T(te,m,D,R);for(var ee=new Uint8Array(8),de=0;de<8;de++)ee[de]=m[de+16];return C(A,M,q,ee,te)}function F(A,M,q,m,D,te,ee){var de=new Uint8Array(32);T(de,te,ee,R);for(var ve=new Uint8Array(8),Ae=0;Ae<8;Ae++)ve[Ae]=te[Ae+16];return P(A,M,q,m,D,ve,de)}var U=function(A){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var M,q,m,D,te,ee,de,ve;M=A[0]&255|(A[1]&255)<<8,this.r[0]=M&8191,q=A[2]&255|(A[3]&255)<<8,this.r[1]=(M>>>13|q<<3)&8191,m=A[4]&255|(A[5]&255)<<8,this.r[2]=(q>>>10|m<<6)&7939,D=A[6]&255|(A[7]&255)<<8,this.r[3]=(m>>>7|D<<9)&8191,te=A[8]&255|(A[9]&255)<<8,this.r[4]=(D>>>4|te<<12)&255,this.r[5]=te>>>1&8190,ee=A[10]&255|(A[11]&255)<<8,this.r[6]=(te>>>14|ee<<2)&8191,de=A[12]&255|(A[13]&255)<<8,this.r[7]=(ee>>>11|de<<5)&8065,ve=A[14]&255|(A[15]&255)<<8,this.r[8]=(de>>>8|ve<<8)&8191,this.r[9]=ve>>>5&127,this.pad[0]=A[16]&255|(A[17]&255)<<8,this.pad[1]=A[18]&255|(A[19]&255)<<8,this.pad[2]=A[20]&255|(A[21]&255)<<8,this.pad[3]=A[22]&255|(A[23]&255)<<8,this.pad[4]=A[24]&255|(A[25]&255)<<8,this.pad[5]=A[26]&255|(A[27]&255)<<8,this.pad[6]=A[28]&255|(A[29]&255)<<8,this.pad[7]=A[30]&255|(A[31]&255)<<8};U.prototype.blocks=function(A,M,q){for(var m=this.fin?0:2048,D,te,ee,de,ve,Ae,xe,Ot,$e,Ye,et,at,st,tt,rt,nt,Me,je,Oe,qe=this.h[0],De=this.h[1],Re=this.h[2],se=this.h[3],oe=this.h[4],ge=this.h[5],he=this.h[6],pe=this.h[7],be=this.h[8],Je=this.h[9],yt=this.r[0],vt=this.r[1],mt=this.r[2],X=this.r[3],Bt=this.r[4],Ht=this.r[5],zt=this.r[6],St=this.r[7],Dt=this.r[8],Lt=this.r[9];q>=16;)D=A[M+0]&255|(A[M+1]&255)<<8,qe+=D&8191,te=A[M+2]&255|(A[M+3]&255)<<8,De+=(D>>>13|te<<3)&8191,ee=A[M+4]&255|(A[M+5]&255)<<8,Re+=(te>>>10|ee<<6)&8191,de=A[M+6]&255|(A[M+7]&255)<<8,se+=(ee>>>7|de<<9)&8191,ve=A[M+8]&255|(A[M+9]&255)<<8,oe+=(de>>>4|ve<<12)&8191,ge+=ve>>>1&8191,Ae=A[M+10]&255|(A[M+11]&255)<<8,he+=(ve>>>14|Ae<<2)&8191,xe=A[M+12]&255|(A[M+13]&255)<<8,pe+=(Ae>>>11|xe<<5)&8191,Ot=A[M+14]&255|(A[M+15]&255)<<8,be+=(xe>>>8|Ot<<8)&8191,Je+=Ot>>>5|m,$e=0,Ye=$e,Ye+=qe*yt,Ye+=De*(5*Lt),Ye+=Re*(5*Dt),Ye+=se*(5*St),Ye+=oe*(5*zt),$e=Ye>>>13,Ye&=8191,Ye+=ge*(5*Ht),Ye+=he*(5*Bt),Ye+=pe*(5*X),Ye+=be*(5*mt),Ye+=Je*(5*vt),$e+=Ye>>>13,Ye&=8191,et=$e,et+=qe*vt,et+=De*yt,et+=Re*(5*Lt),et+=se*(5*Dt),et+=oe*(5*St),$e=et>>>13,et&=8191,et+=ge*(5*zt),et+=he*(5*Ht),et+=pe*(5*Bt),et+=be*(5*X),et+=Je*(5*mt),$e+=et>>>13,et&=8191,at=$e,at+=qe*mt,at+=De*vt,at+=Re*yt,at+=se*(5*Lt),at+=oe*(5*Dt),$e=at>>>13,at&=8191,at+=ge*(5*St),at+=he*(5*zt),at+=pe*(5*Ht),at+=be*(5*Bt),at+=Je*(5*X),$e+=at>>>13,at&=8191,st=$e,st+=qe*X,st+=De*mt,st+=Re*vt,st+=se*yt,st+=oe*(5*Lt),$e=st>>>13,st&=8191,st+=ge*(5*Dt),st+=he*(5*St),st+=pe*(5*zt),st+=be*(5*Ht),st+=Je*(5*Bt),$e+=st>>>13,st&=8191,tt=$e,tt+=qe*Bt,tt+=De*X,tt+=Re*mt,tt+=se*vt,tt+=oe*yt,$e=tt>>>13,tt&=8191,tt+=ge*(5*Lt),tt+=he*(5*Dt),tt+=pe*(5*St),tt+=be*(5*zt),tt+=Je*(5*Ht),$e+=tt>>>13,tt&=8191,rt=$e,rt+=qe*Ht,rt+=De*Bt,rt+=Re*X,rt+=se*mt,rt+=oe*vt,$e=rt>>>13,rt&=8191,rt+=ge*yt,rt+=he*(5*Lt),rt+=pe*(5*Dt),rt+=be*(5*St),rt+=Je*(5*zt),$e+=rt>>>13,rt&=8191,nt=$e,nt+=qe*zt,nt+=De*Ht,nt+=Re*Bt,nt+=se*X,nt+=oe*mt,$e=nt>>>13,nt&=8191,nt+=ge*vt,nt+=he*yt,nt+=pe*(5*Lt),nt+=be*(5*Dt),nt+=Je*(5*St),$e+=nt>>>13,nt&=8191,Me=$e,Me+=qe*St,Me+=De*zt,Me+=Re*Ht,Me+=se*Bt,Me+=oe*X,$e=Me>>>13,Me&=8191,Me+=ge*mt,Me+=he*vt,Me+=pe*yt,Me+=be*(5*Lt),Me+=Je*(5*Dt),$e+=Me>>>13,Me&=8191,je=$e,je+=qe*Dt,je+=De*St,je+=Re*zt,je+=se*Ht,je+=oe*Bt,$e=je>>>13,je&=8191,je+=ge*X,je+=he*mt,je+=pe*vt,je+=be*yt,je+=Je*(5*Lt),$e+=je>>>13,je&=8191,Oe=$e,Oe+=qe*Lt,Oe+=De*Dt,Oe+=Re*St,Oe+=se*zt,Oe+=oe*Ht,$e=Oe>>>13,Oe&=8191,Oe+=ge*Bt,Oe+=he*X,Oe+=pe*mt,Oe+=be*vt,Oe+=Je*yt,$e+=Oe>>>13,Oe&=8191,$e=($e<<2)+$e|0,$e=$e+Ye|0,Ye=$e&8191,$e=$e>>>13,et+=$e,qe=Ye,De=et,Re=at,se=st,oe=tt,ge=rt,he=nt,pe=Me,be=je,Je=Oe,M+=16,q-=16;this.h[0]=qe,this.h[1]=De,this.h[2]=Re,this.h[3]=se,this.h[4]=oe,this.h[5]=ge,this.h[6]=he,this.h[7]=pe,this.h[8]=be,this.h[9]=Je},U.prototype.finish=function(A,M){var q=new Uint16Array(10),m,D,te,ee;if(this.leftover){for(ee=this.leftover,this.buffer[ee++]=1;ee<16;ee++)this.buffer[ee]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(m=this.h[1]>>>13,this.h[1]&=8191,ee=2;ee<10;ee++)this.h[ee]+=m,m=this.h[ee]>>>13,this.h[ee]&=8191;for(this.h[0]+=m*5,m=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=m,m=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=m,q[0]=this.h[0]+5,m=q[0]>>>13,q[0]&=8191,ee=1;ee<10;ee++)q[ee]=this.h[ee]+m,m=q[ee]>>>13,q[ee]&=8191;for(q[9]-=1<<13,D=(m^1)-1,ee=0;ee<10;ee++)q[ee]&=D;for(D=~D,ee=0;ee<10;ee++)this.h[ee]=this.h[ee]&D|q[ee];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,te=this.h[0]+this.pad[0],this.h[0]=te&65535,ee=1;ee<8;ee++)te=(this.h[ee]+this.pad[ee]|0)+(te>>>16)|0,this.h[ee]=te&65535;A[M+0]=this.h[0]>>>0&255,A[M+1]=this.h[0]>>>8&255,A[M+2]=this.h[1]>>>0&255,A[M+3]=this.h[1]>>>8&255,A[M+4]=this.h[2]>>>0&255,A[M+5]=this.h[2]>>>8&255,A[M+6]=this.h[3]>>>0&255,A[M+7]=this.h[3]>>>8&255,A[M+8]=this.h[4]>>>0&255,A[M+9]=this.h[4]>>>8&255,A[M+10]=this.h[5]>>>0&255,A[M+11]=this.h[5]>>>8&255,A[M+12]=this.h[6]>>>0&255,A[M+13]=this.h[6]>>>8&255,A[M+14]=this.h[7]>>>0&255,A[M+15]=this.h[7]>>>8&255},U.prototype.update=function(A,M,q){var m,D;if(this.leftover){for(D=16-this.leftover,D>q&&(D=q),m=0;m<D;m++)this.buffer[this.leftover+m]=A[M+m];if(q-=D,M+=D,this.leftover+=D,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(q>=16&&(D=q-q%16,this.blocks(A,M,D),M+=D,q-=D),q){for(m=0;m<q;m++)this.buffer[this.leftover+m]=A[M+m];this.leftover+=q}};function N(A,M,q,m,D,te){var ee=new U(te);return ee.update(q,m,D),ee.finish(A,M),0}function k(A,M,q,m,D,te){var ee=new Uint8Array(16);return N(ee,0,q,m,D,te),b(A,M,ee,0)}function h(A,M,q,m,D){var te;if(q<32)return-1;for(F(A,0,M,0,q,m,D),N(A,16,A,32,q-32,A),te=0;te<16;te++)A[te]=0;return 0}function g(A,M,q,m,D){var te,ee=new Uint8Array(32);if(q<32||(G(ee,0,32,m,D),k(M,16,M,32,q-32,ee)!==0))return-1;for(F(A,0,M,0,q,m,D),te=0;te<32;te++)A[te]=0;return 0}function v(A,M){var q;for(q=0;q<16;q++)A[q]=M[q]|0}function O(A){var M,q,m=1;for(M=0;M<16;M++)q=A[M]+m+65535,m=Math.floor(q/65536),A[M]=q-m*65536;A[0]+=m-1+37*(m-1)}function L(A,M,q){for(var m,D=~(q-1),te=0;te<16;te++)m=D&(A[te]^M[te]),A[te]^=m,M[te]^=m}function z(A,M){var q,m,D,te=n(),ee=n();for(q=0;q<16;q++)ee[q]=M[q];for(O(ee),O(ee),O(ee),m=0;m<2;m++){for(te[0]=ee[0]-65517,q=1;q<15;q++)te[q]=ee[q]-65535-(te[q-1]>>16&1),te[q-1]&=65535;te[15]=ee[15]-32767-(te[14]>>16&1),D=te[15]>>16&1,te[14]&=65535,L(ee,te,1-D)}for(q=0;q<16;q++)A[2*q]=ee[q]&255,A[2*q+1]=ee[q]>>8}function W(A,M){var q=new Uint8Array(32),m=new Uint8Array(32);return z(q,A),z(m,M),B(q,0,m,0)}function $(A){var M=new Uint8Array(32);return z(M,A),M[0]&1}function w(A,M){var q;for(q=0;q<16;q++)A[q]=M[2*q]+(M[2*q+1]<<8);A[15]&=32767}function H(A,M,q){for(var m=0;m<16;m++)A[m]=M[m]+q[m]}function re(A,M,q){for(var m=0;m<16;m++)A[m]=M[m]-q[m]}function Q(A,M,q){var m,D,te=0,ee=0,de=0,ve=0,Ae=0,xe=0,Ot=0,$e=0,Ye=0,et=0,at=0,st=0,tt=0,rt=0,nt=0,Me=0,je=0,Oe=0,qe=0,De=0,Re=0,se=0,oe=0,ge=0,he=0,pe=0,be=0,Je=0,yt=0,vt=0,mt=0,X=q[0],Bt=q[1],Ht=q[2],zt=q[3],St=q[4],Dt=q[5],Lt=q[6],Bn=q[7],rn=q[8],xn=q[9],Sn=q[10],Tn=q[11],Un=q[12],ir=q[13],sr=q[14],or=q[15];m=M[0],te+=m*X,ee+=m*Bt,de+=m*Ht,ve+=m*zt,Ae+=m*St,xe+=m*Dt,Ot+=m*Lt,$e+=m*Bn,Ye+=m*rn,et+=m*xn,at+=m*Sn,st+=m*Tn,tt+=m*Un,rt+=m*ir,nt+=m*sr,Me+=m*or,m=M[1],ee+=m*X,de+=m*Bt,ve+=m*Ht,Ae+=m*zt,xe+=m*St,Ot+=m*Dt,$e+=m*Lt,Ye+=m*Bn,et+=m*rn,at+=m*xn,st+=m*Sn,tt+=m*Tn,rt+=m*Un,nt+=m*ir,Me+=m*sr,je+=m*or,m=M[2],de+=m*X,ve+=m*Bt,Ae+=m*Ht,xe+=m*zt,Ot+=m*St,$e+=m*Dt,Ye+=m*Lt,et+=m*Bn,at+=m*rn,st+=m*xn,tt+=m*Sn,rt+=m*Tn,nt+=m*Un,Me+=m*ir,je+=m*sr,Oe+=m*or,m=M[3],ve+=m*X,Ae+=m*Bt,xe+=m*Ht,Ot+=m*zt,$e+=m*St,Ye+=m*Dt,et+=m*Lt,at+=m*Bn,st+=m*rn,tt+=m*xn,rt+=m*Sn,nt+=m*Tn,Me+=m*Un,je+=m*ir,Oe+=m*sr,qe+=m*or,m=M[4],Ae+=m*X,xe+=m*Bt,Ot+=m*Ht,$e+=m*zt,Ye+=m*St,et+=m*Dt,at+=m*Lt,st+=m*Bn,tt+=m*rn,rt+=m*xn,nt+=m*Sn,Me+=m*Tn,je+=m*Un,Oe+=m*ir,qe+=m*sr,De+=m*or,m=M[5],xe+=m*X,Ot+=m*Bt,$e+=m*Ht,Ye+=m*zt,et+=m*St,at+=m*Dt,st+=m*Lt,tt+=m*Bn,rt+=m*rn,nt+=m*xn,Me+=m*Sn,je+=m*Tn,Oe+=m*Un,qe+=m*ir,De+=m*sr,Re+=m*or,m=M[6],Ot+=m*X,$e+=m*Bt,Ye+=m*Ht,et+=m*zt,at+=m*St,st+=m*Dt,tt+=m*Lt,rt+=m*Bn,nt+=m*rn,Me+=m*xn,je+=m*Sn,Oe+=m*Tn,qe+=m*Un,De+=m*ir,Re+=m*sr,se+=m*or,m=M[7],$e+=m*X,Ye+=m*Bt,et+=m*Ht,at+=m*zt,st+=m*St,tt+=m*Dt,rt+=m*Lt,nt+=m*Bn,Me+=m*rn,je+=m*xn,Oe+=m*Sn,qe+=m*Tn,De+=m*Un,Re+=m*ir,se+=m*sr,oe+=m*or,m=M[8],Ye+=m*X,et+=m*Bt,at+=m*Ht,st+=m*zt,tt+=m*St,rt+=m*Dt,nt+=m*Lt,Me+=m*Bn,je+=m*rn,Oe+=m*xn,qe+=m*Sn,De+=m*Tn,Re+=m*Un,se+=m*ir,oe+=m*sr,ge+=m*or,m=M[9],et+=m*X,at+=m*Bt,st+=m*Ht,tt+=m*zt,rt+=m*St,nt+=m*Dt,Me+=m*Lt,je+=m*Bn,Oe+=m*rn,qe+=m*xn,De+=m*Sn,Re+=m*Tn,se+=m*Un,oe+=m*ir,ge+=m*sr,he+=m*or,m=M[10],at+=m*X,st+=m*Bt,tt+=m*Ht,rt+=m*zt,nt+=m*St,Me+=m*Dt,je+=m*Lt,Oe+=m*Bn,qe+=m*rn,De+=m*xn,Re+=m*Sn,se+=m*Tn,oe+=m*Un,ge+=m*ir,he+=m*sr,pe+=m*or,m=M[11],st+=m*X,tt+=m*Bt,rt+=m*Ht,nt+=m*zt,Me+=m*St,je+=m*Dt,Oe+=m*Lt,qe+=m*Bn,De+=m*rn,Re+=m*xn,se+=m*Sn,oe+=m*Tn,ge+=m*Un,he+=m*ir,pe+=m*sr,be+=m*or,m=M[12],tt+=m*X,rt+=m*Bt,nt+=m*Ht,Me+=m*zt,je+=m*St,Oe+=m*Dt,qe+=m*Lt,De+=m*Bn,Re+=m*rn,se+=m*xn,oe+=m*Sn,ge+=m*Tn,he+=m*Un,pe+=m*ir,be+=m*sr,Je+=m*or,m=M[13],rt+=m*X,nt+=m*Bt,Me+=m*Ht,je+=m*zt,Oe+=m*St,qe+=m*Dt,De+=m*Lt,Re+=m*Bn,se+=m*rn,oe+=m*xn,ge+=m*Sn,he+=m*Tn,pe+=m*Un,be+=m*ir,Je+=m*sr,yt+=m*or,m=M[14],nt+=m*X,Me+=m*Bt,je+=m*Ht,Oe+=m*zt,qe+=m*St,De+=m*Dt,Re+=m*Lt,se+=m*Bn,oe+=m*rn,ge+=m*xn,he+=m*Sn,pe+=m*Tn,be+=m*Un,Je+=m*ir,yt+=m*sr,vt+=m*or,m=M[15],Me+=m*X,je+=m*Bt,Oe+=m*Ht,qe+=m*zt,De+=m*St,Re+=m*Dt,se+=m*Lt,oe+=m*Bn,ge+=m*rn,he+=m*xn,pe+=m*Sn,be+=m*Tn,Je+=m*Un,yt+=m*ir,vt+=m*sr,mt+=m*or,te+=38*je,ee+=38*Oe,de+=38*qe,ve+=38*De,Ae+=38*Re,xe+=38*se,Ot+=38*oe,$e+=38*ge,Ye+=38*he,et+=38*pe,at+=38*be,st+=38*Je,tt+=38*yt,rt+=38*vt,nt+=38*mt,D=1,m=te+D+65535,D=Math.floor(m/65536),te=m-D*65536,m=ee+D+65535,D=Math.floor(m/65536),ee=m-D*65536,m=de+D+65535,D=Math.floor(m/65536),de=m-D*65536,m=ve+D+65535,D=Math.floor(m/65536),ve=m-D*65536,m=Ae+D+65535,D=Math.floor(m/65536),Ae=m-D*65536,m=xe+D+65535,D=Math.floor(m/65536),xe=m-D*65536,m=Ot+D+65535,D=Math.floor(m/65536),Ot=m-D*65536,m=$e+D+65535,D=Math.floor(m/65536),$e=m-D*65536,m=Ye+D+65535,D=Math.floor(m/65536),Ye=m-D*65536,m=et+D+65535,D=Math.floor(m/65536),et=m-D*65536,m=at+D+65535,D=Math.floor(m/65536),at=m-D*65536,m=st+D+65535,D=Math.floor(m/65536),st=m-D*65536,m=tt+D+65535,D=Math.floor(m/65536),tt=m-D*65536,m=rt+D+65535,D=Math.floor(m/65536),rt=m-D*65536,m=nt+D+65535,D=Math.floor(m/65536),nt=m-D*65536,m=Me+D+65535,D=Math.floor(m/65536),Me=m-D*65536,te+=D-1+37*(D-1),D=1,m=te+D+65535,D=Math.floor(m/65536),te=m-D*65536,m=ee+D+65535,D=Math.floor(m/65536),ee=m-D*65536,m=de+D+65535,D=Math.floor(m/65536),de=m-D*65536,m=ve+D+65535,D=Math.floor(m/65536),ve=m-D*65536,m=Ae+D+65535,D=Math.floor(m/65536),Ae=m-D*65536,m=xe+D+65535,D=Math.floor(m/65536),xe=m-D*65536,m=Ot+D+65535,D=Math.floor(m/65536),Ot=m-D*65536,m=$e+D+65535,D=Math.floor(m/65536),$e=m-D*65536,m=Ye+D+65535,D=Math.floor(m/65536),Ye=m-D*65536,m=et+D+65535,D=Math.floor(m/65536),et=m-D*65536,m=at+D+65535,D=Math.floor(m/65536),at=m-D*65536,m=st+D+65535,D=Math.floor(m/65536),st=m-D*65536,m=tt+D+65535,D=Math.floor(m/65536),tt=m-D*65536,m=rt+D+65535,D=Math.floor(m/65536),rt=m-D*65536,m=nt+D+65535,D=Math.floor(m/65536),nt=m-D*65536,m=Me+D+65535,D=Math.floor(m/65536),Me=m-D*65536,te+=D-1+37*(D-1),A[0]=te,A[1]=ee,A[2]=de,A[3]=ve,A[4]=Ae,A[5]=xe,A[6]=Ot,A[7]=$e,A[8]=Ye,A[9]=et,A[10]=at,A[11]=st,A[12]=tt,A[13]=rt,A[14]=nt,A[15]=Me}function ce(A,M){Q(A,M,M)}function Be(A,M){var q=n(),m;for(m=0;m<16;m++)q[m]=M[m];for(m=253;m>=0;m--)ce(q,q),m!==2&&m!==4&&Q(q,q,M);for(m=0;m<16;m++)A[m]=q[m]}function Ue(A,M){var q=n(),m;for(m=0;m<16;m++)q[m]=M[m];for(m=250;m>=0;m--)ce(q,q),m!==1&&Q(q,q,M);for(m=0;m<16;m++)A[m]=q[m]}function J(A,M,q){var m=new Uint8Array(32),D=new Float64Array(80),te,ee,de=n(),ve=n(),Ae=n(),xe=n(),Ot=n(),$e=n();for(ee=0;ee<31;ee++)m[ee]=M[ee];for(m[31]=M[31]&127|64,m[0]&=248,w(D,q),ee=0;ee<16;ee++)ve[ee]=D[ee],xe[ee]=de[ee]=Ae[ee]=0;for(de[0]=xe[0]=1,ee=254;ee>=0;--ee)te=m[ee>>>3]>>>(ee&7)&1,L(de,ve,te),L(Ae,xe,te),H(Ot,de,Ae),re(de,de,Ae),H(Ae,ve,xe),re(ve,ve,xe),ce(xe,Ot),ce($e,de),Q(de,Ae,de),Q(Ae,ve,Ot),H(Ot,de,Ae),re(de,de,Ae),ce(ve,de),re(Ae,xe,$e),Q(de,Ae,c),H(de,de,xe),Q(Ae,Ae,de),Q(de,xe,$e),Q(xe,ve,D),ce(ve,Ot),L(de,ve,te),L(Ae,xe,te);for(ee=0;ee<16;ee++)D[ee+16]=de[ee],D[ee+32]=Ae[ee],D[ee+48]=ve[ee],D[ee+64]=xe[ee];var Ye=D.subarray(32),et=D.subarray(16);return Be(Ye,Ye),Q(et,et,Ye),z(A,et),0}function j(A,M){return J(A,M,s)}function K(A,M){return r(M,32),j(A,M)}function Y(A,M,q){var m=new Uint8Array(32);return J(m,q,M),T(A,i,m,R)}var ne=h,ue=g;function le(A,M,q,m,D,te){var ee=new Uint8Array(32);return Y(ee,D,te),ne(A,M,q,m,ee)}function fe(A,M,q,m,D,te){var ee=new Uint8Array(32);return Y(ee,D,te),ue(A,M,q,m,ee)}var _e=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ke(A,M,q,m){for(var D=new Int32Array(16),te=new Int32Array(16),ee,de,ve,Ae,xe,Ot,$e,Ye,et,at,st,tt,rt,nt,Me,je,Oe,qe,De,Re,se,oe,ge,he,pe,be,Je=A[0],yt=A[1],vt=A[2],mt=A[3],X=A[4],Bt=A[5],Ht=A[6],zt=A[7],St=M[0],Dt=M[1],Lt=M[2],Bn=M[3],rn=M[4],xn=M[5],Sn=M[6],Tn=M[7],Un=0;m>=128;){for(De=0;De<16;De++)Re=8*De+Un,D[De]=q[Re+0]<<24|q[Re+1]<<16|q[Re+2]<<8|q[Re+3],te[De]=q[Re+4]<<24|q[Re+5]<<16|q[Re+6]<<8|q[Re+7];for(De=0;De<80;De++)if(ee=Je,de=yt,ve=vt,Ae=mt,xe=X,Ot=Bt,$e=Ht,Ye=zt,et=St,at=Dt,st=Lt,tt=Bn,rt=rn,nt=xn,Me=Sn,je=Tn,se=zt,oe=Tn,ge=oe&65535,he=oe>>>16,pe=se&65535,be=se>>>16,se=(X>>>14|rn<<32-14)^(X>>>18|rn<<32-18)^(rn>>>41-32|X<<32-(41-32)),oe=(rn>>>14|X<<32-14)^(rn>>>18|X<<32-18)^(X>>>41-32|rn<<32-(41-32)),ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,se=X&Bt^~X&Ht,oe=rn&xn^~rn&Sn,ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,se=_e[De*2],oe=_e[De*2+1],ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,se=D[De%16],oe=te[De%16],ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,he+=ge>>>16,pe+=he>>>16,be+=pe>>>16,Oe=pe&65535|be<<16,qe=ge&65535|he<<16,se=Oe,oe=qe,ge=oe&65535,he=oe>>>16,pe=se&65535,be=se>>>16,se=(Je>>>28|St<<32-28)^(St>>>34-32|Je<<32-(34-32))^(St>>>39-32|Je<<32-(39-32)),oe=(St>>>28|Je<<32-28)^(Je>>>34-32|St<<32-(34-32))^(Je>>>39-32|St<<32-(39-32)),ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,se=Je&yt^Je&vt^yt&vt,oe=St&Dt^St&Lt^Dt&Lt,ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,he+=ge>>>16,pe+=he>>>16,be+=pe>>>16,Ye=pe&65535|be<<16,je=ge&65535|he<<16,se=Ae,oe=tt,ge=oe&65535,he=oe>>>16,pe=se&65535,be=se>>>16,se=Oe,oe=qe,ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,he+=ge>>>16,pe+=he>>>16,be+=pe>>>16,Ae=pe&65535|be<<16,tt=ge&65535|he<<16,yt=ee,vt=de,mt=ve,X=Ae,Bt=xe,Ht=Ot,zt=$e,Je=Ye,Dt=et,Lt=at,Bn=st,rn=tt,xn=rt,Sn=nt,Tn=Me,St=je,De%16===15)for(Re=0;Re<16;Re++)se=D[Re],oe=te[Re],ge=oe&65535,he=oe>>>16,pe=se&65535,be=se>>>16,se=D[(Re+9)%16],oe=te[(Re+9)%16],ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,Oe=D[(Re+1)%16],qe=te[(Re+1)%16],se=(Oe>>>1|qe<<32-1)^(Oe>>>8|qe<<32-8)^Oe>>>7,oe=(qe>>>1|Oe<<32-1)^(qe>>>8|Oe<<32-8)^(qe>>>7|Oe<<32-7),ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,Oe=D[(Re+14)%16],qe=te[(Re+14)%16],se=(Oe>>>19|qe<<32-19)^(qe>>>61-32|Oe<<32-(61-32))^Oe>>>6,oe=(qe>>>19|Oe<<32-19)^(Oe>>>61-32|qe<<32-(61-32))^(qe>>>6|Oe<<32-6),ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,he+=ge>>>16,pe+=he>>>16,be+=pe>>>16,D[Re]=pe&65535|be<<16,te[Re]=ge&65535|he<<16;se=Je,oe=St,ge=oe&65535,he=oe>>>16,pe=se&65535,be=se>>>16,se=A[0],oe=M[0],ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,he+=ge>>>16,pe+=he>>>16,be+=pe>>>16,A[0]=Je=pe&65535|be<<16,M[0]=St=ge&65535|he<<16,se=yt,oe=Dt,ge=oe&65535,he=oe>>>16,pe=se&65535,be=se>>>16,se=A[1],oe=M[1],ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,he+=ge>>>16,pe+=he>>>16,be+=pe>>>16,A[1]=yt=pe&65535|be<<16,M[1]=Dt=ge&65535|he<<16,se=vt,oe=Lt,ge=oe&65535,he=oe>>>16,pe=se&65535,be=se>>>16,se=A[2],oe=M[2],ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,he+=ge>>>16,pe+=he>>>16,be+=pe>>>16,A[2]=vt=pe&65535|be<<16,M[2]=Lt=ge&65535|he<<16,se=mt,oe=Bn,ge=oe&65535,he=oe>>>16,pe=se&65535,be=se>>>16,se=A[3],oe=M[3],ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,he+=ge>>>16,pe+=he>>>16,be+=pe>>>16,A[3]=mt=pe&65535|be<<16,M[3]=Bn=ge&65535|he<<16,se=X,oe=rn,ge=oe&65535,he=oe>>>16,pe=se&65535,be=se>>>16,se=A[4],oe=M[4],ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,he+=ge>>>16,pe+=he>>>16,be+=pe>>>16,A[4]=X=pe&65535|be<<16,M[4]=rn=ge&65535|he<<16,se=Bt,oe=xn,ge=oe&65535,he=oe>>>16,pe=se&65535,be=se>>>16,se=A[5],oe=M[5],ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,he+=ge>>>16,pe+=he>>>16,be+=pe>>>16,A[5]=Bt=pe&65535|be<<16,M[5]=xn=ge&65535|he<<16,se=Ht,oe=Sn,ge=oe&65535,he=oe>>>16,pe=se&65535,be=se>>>16,se=A[6],oe=M[6],ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,he+=ge>>>16,pe+=he>>>16,be+=pe>>>16,A[6]=Ht=pe&65535|be<<16,M[6]=Sn=ge&65535|he<<16,se=zt,oe=Tn,ge=oe&65535,he=oe>>>16,pe=se&65535,be=se>>>16,se=A[7],oe=M[7],ge+=oe&65535,he+=oe>>>16,pe+=se&65535,be+=se>>>16,he+=ge>>>16,pe+=he>>>16,be+=pe>>>16,A[7]=zt=pe&65535|be<<16,M[7]=Tn=ge&65535|he<<16,Un+=128,m-=128}return m}function Ne(A,M,q){var m=new Int32Array(8),D=new Int32Array(8),te=new Uint8Array(256),ee,de=q;for(m[0]=1779033703,m[1]=3144134277,m[2]=1013904242,m[3]=2773480762,m[4]=1359893119,m[5]=2600822924,m[6]=528734635,m[7]=1541459225,D[0]=4089235720,D[1]=2227873595,D[2]=4271175723,D[3]=1595750129,D[4]=2917565137,D[5]=725511199,D[6]=4215389547,D[7]=327033209,ke(m,D,M,q),q%=128,ee=0;ee<q;ee++)te[ee]=M[de-q+ee];for(te[q]=128,q=256-128*(q<112?1:0),te[q-9]=0,_(te,q-8,de/536870912|0,de<<3),ke(m,D,te,q),ee=0;ee<8;ee++)_(A,8*ee,m[ee],D[ee]);return 0}function Ee(A,M){var q=n(),m=n(),D=n(),te=n(),ee=n(),de=n(),ve=n(),Ae=n(),xe=n();re(q,A[1],A[0]),re(xe,M[1],M[0]),Q(q,q,xe),H(m,A[0],A[1]),H(xe,M[0],M[1]),Q(m,m,xe),Q(D,A[3],M[3]),Q(D,D,d),Q(te,A[2],M[2]),H(te,te,te),re(ee,m,q),re(de,te,D),H(ve,te,D),H(Ae,m,q),Q(A[0],ee,de),Q(A[1],Ae,ve),Q(A[2],ve,de),Q(A[3],ee,Ae)}function He(A,M,q){var m;for(m=0;m<4;m++)L(A[m],M[m],q)}function Ge(A,M){var q=n(),m=n(),D=n();Be(D,M[2]),Q(q,M[0],D),Q(m,M[1],D),z(A,m),A[31]^=$(q)<<7}function Ie(A,M,q){var m,D;for(v(A[0],o),v(A[1],a),v(A[2],a),v(A[3],o),D=255;D>=0;--D)m=q[D/8|0]>>(D&7)&1,He(A,M,m),Ee(M,A),Ee(A,A),He(A,M,m)}function ze(A,M){var q=[n(),n(),n(),n()];v(q[0],l),v(q[1],f),v(q[2],a),Q(q[3],l,f),Ie(A,q,M)}function xt(A,M,q){var m=new Uint8Array(64),D=[n(),n(),n(),n()],te;for(q||r(M,32),Ne(m,M,32),m[0]&=248,m[31]&=127,m[31]|=64,ze(D,m),Ge(A,D),te=0;te<32;te++)M[te+32]=A[te];return 0}var Ke=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function bt(A,M){var q,m,D,te;for(m=63;m>=32;--m){for(q=0,D=m-32,te=m-12;D<te;++D)M[D]+=q-16*M[m]*Ke[D-(m-32)],q=Math.floor((M[D]+128)/256),M[D]-=q*256;M[D]+=q,M[m]=0}for(q=0,D=0;D<32;D++)M[D]+=q-(M[31]>>4)*Ke[D],q=M[D]>>8,M[D]&=255;for(D=0;D<32;D++)M[D]-=q*Ke[D];for(m=0;m<32;m++)M[m+1]+=M[m]>>8,A[m]=M[m]&255}function yn(A){var M=new Float64Array(64),q;for(q=0;q<64;q++)M[q]=A[q];for(q=0;q<64;q++)A[q]=0;bt(A,M)}function lt(A,M,q,m){var D=new Uint8Array(64),te=new Uint8Array(64),ee=new Uint8Array(64),de,ve,Ae=new Float64Array(64),xe=[n(),n(),n(),n()];Ne(D,m,32),D[0]&=248,D[31]&=127,D[31]|=64;var Ot=q+64;for(de=0;de<q;de++)A[64+de]=M[de];for(de=0;de<32;de++)A[32+de]=D[32+de];for(Ne(ee,A.subarray(32),q+32),yn(ee),ze(xe,ee),Ge(A,xe),de=32;de<64;de++)A[de]=m[de];for(Ne(te,A,q+64),yn(te),de=0;de<64;de++)Ae[de]=0;for(de=0;de<32;de++)Ae[de]=ee[de];for(de=0;de<32;de++)for(ve=0;ve<32;ve++)Ae[de+ve]+=te[de]*D[ve];return bt(A.subarray(32),Ae),Ot}function Ct(A,M){var q=n(),m=n(),D=n(),te=n(),ee=n(),de=n(),ve=n();return v(A[2],a),w(A[1],M),ce(D,A[1]),Q(te,D,u),re(D,D,A[2]),H(te,A[2],te),ce(ee,te),ce(de,ee),Q(ve,de,ee),Q(q,ve,D),Q(q,q,te),Ue(q,q),Q(q,q,D),Q(q,q,te),Q(q,q,te),Q(A[0],q,te),ce(m,A[0]),Q(m,m,te),W(m,D)&&Q(A[0],A[0],p),ce(m,A[0]),Q(m,m,te),W(m,D)?-1:($(A[0])===M[31]>>7&&re(A[0],o,A[0]),Q(A[3],A[0],A[1]),0)}function Fr(A,M,q,m){var D,te=new Uint8Array(32),ee=new Uint8Array(64),de=[n(),n(),n(),n()],ve=[n(),n(),n(),n()];if(q<64||Ct(ve,m))return-1;for(D=0;D<q;D++)A[D]=M[D];for(D=0;D<32;D++)A[D+32]=m[D];if(Ne(ee,A,q),yn(ee),Ie(de,ve,ee),ze(ve,M.subarray(32)),Ee(de,ve),Ge(te,de),q-=64,B(M,0,te,0)){for(D=0;D<q;D++)A[D]=0;return-1}for(D=0;D<q;D++)A[D]=M[D+64];return q}var Ft=32,Xt=24,oi=32,Zt=16,nn=32,xi=32,jt=32,dn=32,Uo=32,mn=Xt,bn=oi,uu=Zt,Jt=64,on=32,$i=64,fn=32,hn=64;t.lowlevel={crypto_core_hsalsa20:T,crypto_stream_xor:F,crypto_stream:G,crypto_stream_salsa20_xor:P,crypto_stream_salsa20:C,crypto_onetimeauth:N,crypto_onetimeauth_verify:k,crypto_verify_16:b,crypto_verify_32:B,crypto_secretbox:h,crypto_secretbox_open:g,crypto_scalarmult:J,crypto_scalarmult_base:j,crypto_box_beforenm:Y,crypto_box_afternm:ne,crypto_box:le,crypto_box_open:fe,crypto_box_keypair:K,crypto_hash:Ne,crypto_sign:lt,crypto_sign_keypair:xt,crypto_sign_open:Fr,crypto_secretbox_KEYBYTES:Ft,crypto_secretbox_NONCEBYTES:Xt,crypto_secretbox_ZEROBYTES:oi,crypto_secretbox_BOXZEROBYTES:Zt,crypto_scalarmult_BYTES:nn,crypto_scalarmult_SCALARBYTES:xi,crypto_box_PUBLICKEYBYTES:jt,crypto_box_SECRETKEYBYTES:dn,crypto_box_BEFORENMBYTES:Uo,crypto_box_NONCEBYTES:mn,crypto_box_ZEROBYTES:bn,crypto_box_BOXZEROBYTES:uu,crypto_sign_BYTES:Jt,crypto_sign_PUBLICKEYBYTES:on,crypto_sign_SECRETKEYBYTES:$i,crypto_sign_SEEDBYTES:fn,crypto_hash_BYTES:hn,gf:n,D:u,L:Ke,pack25519:z,unpack25519:w,M:Q,A:H,S:ce,Z:re,pow2523:Ue,add:Ee,set25519:v,modL:bt,scalarmult:Ie,scalarbase:ze};function Xa(A,M){if(A.length!==Ft)throw new Error("bad key size");if(M.length!==Xt)throw new Error("bad nonce size")}function vn(A,M){if(A.length!==jt)throw new Error("bad public key size");if(M.length!==dn)throw new Error("bad secret key size")}function Nt(){for(var A=0;A<arguments.length;A++)if(!(arguments[A]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Za(A){for(var M=0;M<A.length;M++)A[M]=0}t.randomBytes=function(A){var M=new Uint8Array(A);return r(M,A),M},t.secretbox=function(A,M,q){Nt(A,M,q),Xa(q,M);for(var m=new Uint8Array(oi+A.length),D=new Uint8Array(m.length),te=0;te<A.length;te++)m[te+oi]=A[te];return h(D,m,m.length,M,q),D.subarray(Zt)},t.secretbox.open=function(A,M,q){Nt(A,M,q),Xa(q,M);for(var m=new Uint8Array(Zt+A.length),D=new Uint8Array(m.length),te=0;te<A.length;te++)m[te+Zt]=A[te];return m.length<32||g(D,m,m.length,M,q)!==0?null:D.subarray(oi)},t.secretbox.keyLength=Ft,t.secretbox.nonceLength=Xt,t.secretbox.overheadLength=Zt,t.scalarMult=function(A,M){if(Nt(A,M),A.length!==xi)throw new Error("bad n size");if(M.length!==nn)throw new Error("bad p size");var q=new Uint8Array(nn);return J(q,A,M),q},t.scalarMult.base=function(A){if(Nt(A),A.length!==xi)throw new Error("bad n size");var M=new Uint8Array(nn);return j(M,A),M},t.scalarMult.scalarLength=xi,t.scalarMult.groupElementLength=nn,t.box=function(A,M,q,m){var D=t.box.before(q,m);return t.secretbox(A,M,D)},t.box.before=function(A,M){Nt(A,M),vn(A,M);var q=new Uint8Array(Uo);return Y(q,A,M),q},t.box.after=t.secretbox,t.box.open=function(A,M,q,m){var D=t.box.before(q,m);return t.secretbox.open(A,M,D)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var A=new Uint8Array(jt),M=new Uint8Array(dn);return K(A,M),{publicKey:A,secretKey:M}},t.box.keyPair.fromSecretKey=function(A){if(Nt(A),A.length!==dn)throw new Error("bad secret key size");var M=new Uint8Array(jt);return j(M,A),{publicKey:M,secretKey:new Uint8Array(A)}},t.box.publicKeyLength=jt,t.box.secretKeyLength=dn,t.box.sharedKeyLength=Uo,t.box.nonceLength=mn,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(A,M){if(Nt(A,M),M.length!==$i)throw new Error("bad secret key size");var q=new Uint8Array(Jt+A.length);return lt(q,A,A.length,M),q},t.sign.open=function(A,M){if(Nt(A,M),M.length!==on)throw new Error("bad public key size");var q=new Uint8Array(A.length),m=Fr(q,A,A.length,M);if(m<0)return null;for(var D=new Uint8Array(m),te=0;te<D.length;te++)D[te]=q[te];return D},t.sign.detached=function(A,M){for(var q=t.sign(A,M),m=new Uint8Array(Jt),D=0;D<m.length;D++)m[D]=q[D];return m},t.sign.detached.verify=function(A,M,q){if(Nt(A,M,q),M.length!==Jt)throw new Error("bad signature size");if(q.length!==on)throw new Error("bad public key size");var m=new Uint8Array(Jt+A.length),D=new Uint8Array(Jt+A.length),te;for(te=0;te<Jt;te++)m[te]=M[te];for(te=0;te<A.length;te++)m[te+Jt]=A[te];return Fr(D,m,m.length,q)>=0},t.sign.keyPair=function(){var A=new Uint8Array(on),M=new Uint8Array($i);return xt(A,M),{publicKey:A,secretKey:M}},t.sign.keyPair.fromSecretKey=function(A){if(Nt(A),A.length!==$i)throw new Error("bad secret key size");for(var M=new Uint8Array(on),q=0;q<M.length;q++)M[q]=A[32+q];return{publicKey:M,secretKey:new Uint8Array(A)}},t.sign.keyPair.fromSeed=function(A){if(Nt(A),A.length!==fn)throw new Error("bad seed size");for(var M=new Uint8Array(on),q=new Uint8Array($i),m=0;m<32;m++)q[m]=A[m];return xt(M,q,!0),{publicKey:M,secretKey:q}},t.sign.publicKeyLength=on,t.sign.secretKeyLength=$i,t.sign.seedLength=fn,t.sign.signatureLength=Jt,t.hash=function(A){Nt(A);var M=new Uint8Array(hn);return Ne(M,A,A.length),M},t.hash.hashLength=hn,t.verify=function(A,M){return Nt(A,M),A.length===0||M.length===0||A.length!==M.length?!1:y(A,0,M,0,A.length)===0},t.setPRNG=function(A){r=A},function(){var A=typeof self<"u"?self.crypto||self.msCrypto:null;if(A&&A.getRandomValues){var M=65536;t.setPRNG(function(q,m){var D,te=new Uint8Array(m);for(D=0;D<m;D+=M)A.getRandomValues(te.subarray(D,D+Math.min(m-D,M)));for(D=0;D<m;D++)q[D]=te[D];Za(te)})}else typeof uy<"u"&&(A=th,A&&A.randomBytes&&t.setPRNG(function(q,m){var D,te=A.randomBytes(m);for(D=0;D<m;D++)q[D]=te[D];Za(te)}))}()})(e.exports?e.exports:self.nacl=self.nacl||{})})(Yb);var Pr={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.output=zn.exists=zn.hash=zn.bytes=zn.bool=zn.number=void 0;function il(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}zn.number=il;function ly(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}zn.bool=ly;function nh(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}zn.bytes=nh;function dy(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");il(e.outputLen),il(e.blockLen)}zn.hash=dy;function fy(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}zn.exists=fy;function hy(e,t){nh(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}zn.output=hy;const tv={number:il,bool:ly,bytes:nh,hash:dy,exists:fy,output:hy};zn.default=tv;var ca={},py={},_o={},Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.crypto=void 0;Fl.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=Fl,n=S=>new Uint8Array(S.buffer,S.byteOffset,S.byteLength);e.u8=n;const r=S=>new Uint32Array(S.buffer,S.byteOffset,Math.floor(S.byteLength/4));e.u32=r;const i=S=>new DataView(S.buffer,S.byteOffset,S.byteLength);e.createView=i;const s=(S,T)=>S<<32-T|S>>>T;if(e.rotr=s,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},(S,T)=>T.toString(16).padStart(2,"0"));function a(S){if(!(S instanceof Uint8Array))throw new Error("Uint8Array expected");let T="";for(let R=0;R<S.length;R++)T+=o[S[R]];return T}e.bytesToHex=a;function c(S){if(typeof S!="string")throw new TypeError("hexToBytes: expected string, got "+typeof S);if(S.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const T=new Uint8Array(S.length/2);for(let R=0;R<T.length;R++){const P=R*2,C=S.slice(P,P+2),G=Number.parseInt(C,16);if(Number.isNaN(G)||G<0)throw new Error("Invalid byte sequence");T[R]=G}return T}e.hexToBytes=c;const u=async()=>{};e.nextTick=u;async function d(S,T,R){let P=Date.now();for(let C=0;C<S;C++){R(C);const G=Date.now()-P;G>=0&&G<T||(await(0,e.nextTick)(),P+=G)}}e.asyncLoop=d;function l(S){if(typeof S!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof S}`);return new TextEncoder().encode(S)}e.utf8ToBytes=l;function f(S){if(typeof S=="string"&&(S=l(S)),!(S instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof S})`);return S}e.toBytes=f;function p(...S){if(!S.every(P=>P instanceof Uint8Array))throw new Error("Uint8Array list expected");if(S.length===1)return S[0];const T=S.reduce((P,C)=>P+C.length,0),R=new Uint8Array(T);for(let P=0,C=0;P<S.length;P++){const G=S[P];R.set(G,C),C+=G.length}return R}e.concatBytes=p;class _{clone(){return this._cloneInto()}}e.Hash=_;const y=S=>Object.prototype.toString.call(S)==="[object Object]"&&S.constructor===Object;function b(S,T){if(T!==void 0&&(typeof T!="object"||!y(T)))throw new TypeError("Options should be object or undefined");return Object.assign(S,T)}e.checkOpts=b;function B(S){const T=P=>S().update(f(P)).digest(),R=S();return T.outputLen=R.outputLen,T.blockLen=R.blockLen,T.create=()=>S(),T}e.wrapConstructor=B;function E(S){const T=(P,C)=>S(C).update(f(P)).digest(),R=S({});return T.outputLen=R.outputLen,T.blockLen=R.blockLen,T.create=P=>S(P),T}e.wrapConstructorWithOpts=E;function x(S=32){if(t.crypto.web)return t.crypto.web.getRandomValues(new Uint8Array(S));if(t.crypto.node)return new Uint8Array(t.crypto.node.randomBytes(S).buffer);throw new Error("The environment doesn't have randomBytes function")}e.randomBytes=x})(_o);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const t=zn,n=_o;class r extends n.Hash{constructor(o,a){super(),this.finished=!1,this.destroyed=!1,t.default.hash(o);const c=(0,n.toBytes)(a);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,d=new Uint8Array(u);d.set(c.length>u?o.create().update(c).digest():c);for(let l=0;l<d.length;l++)d[l]^=54;this.iHash.update(d),this.oHash=o.create();for(let l=0;l<d.length;l++)d[l]^=106;this.oHash.update(d),d.fill(0)}update(o){return t.default.exists(this),this.iHash.update(o),this}digestInto(o){t.default.exists(this),t.default.bytes(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:c,finished:u,destroyed:d,blockLen:l,outputLen:f}=this;return o=o,o.finished=u,o.destroyed=d,o.blockLen=l,o.outputLen=f,o.oHash=a._cloneInto(o.oHash),o.iHash=c._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const i=(s,o,a)=>new r(s,o).update(a).digest();e.hmac=i,e.hmac.create=(s,o)=>new r(s,o)})(py);Object.defineProperty(ca,"__esModule",{value:!0});ca.pbkdf2Async=ca.pbkdf2=void 0;const lu=zn,nv=py,Qo=_o;function gy(e,t,n,r){lu.default.hash(e);const i=(0,Qo.checkOpts)({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(lu.default.number(s),lu.default.number(o),lu.default.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=(0,Qo.toBytes)(t),u=(0,Qo.toBytes)(n),d=new Uint8Array(o),l=nv.hmac.create(e,c),f=l._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:d,PRF:l,PRFSalt:f}}function yy(e,t,n,r,i){return e.destroy(),t.destroy(),r&&r.destroy(),i.fill(0),n}function rv(e,t,n,r){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:c}=gy(e,t,n,r);let u;const d=new Uint8Array(4),l=(0,Qo.createView)(d),f=new Uint8Array(a.outputLen);for(let p=1,_=0;_<s;p++,_+=a.outputLen){const y=o.subarray(_,_+a.outputLen);l.setInt32(0,p,!1),(u=c._cloneInto(u)).update(d).digestInto(f),y.set(f.subarray(0,y.length));for(let b=1;b<i;b++){a._cloneInto(u).update(f).digestInto(f);for(let B=0;B<y.length;B++)y[B]^=f[B]}}return yy(a,c,o,u,f)}ca.pbkdf2=rv;async function iv(e,t,n,r){const{c:i,dkLen:s,asyncTick:o,DK:a,PRF:c,PRFSalt:u}=gy(e,t,n,r);let d;const l=new Uint8Array(4),f=(0,Qo.createView)(l),p=new Uint8Array(c.outputLen);for(let _=1,y=0;y<s;_++,y+=c.outputLen){const b=a.subarray(y,y+c.outputLen);f.setInt32(0,_,!1),(d=u._cloneInto(d)).update(l).digestInto(p),b.set(p.subarray(0,b.length)),await(0,Qo.asyncLoop)(i-1,o,B=>{c._cloneInto(d).update(p).digestInto(p);for(let E=0;E<b.length;E++)b[E]^=p[E]})}return yy(c,u,a,d,p)}ca.pbkdf2Async=iv;var ua={},qc={};Object.defineProperty(qc,"__esModule",{value:!0});qc.SHA2=void 0;const wf=zn,Ja=_o;function sv(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}let ov=class extends Ja.Hash{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Ja.createView)(this.buffer)}update(t){wf.default.exists(this);const{view:n,buffer:r,blockLen:i}=this;t=(0,Ja.toBytes)(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=(0,Ja.createView)(t);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){wf.default.exists(this),wf.default.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let l=o;l<i;l++)n[l]=0;sv(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=(0,Ja.createView)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,d[l],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%n&&t.buffer.set(r),t}};qc.SHA2=ov;Object.defineProperty(ua,"__esModule",{value:!0});ua.sha224=ua.sha256=void 0;const av=qc,Kr=_o,cv=(e,t,n)=>e&t^~e&n,uv=(e,t,n)=>e&t^e&n^t&n,lv=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),es=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ts=new Uint32Array(64);let my=class extends av.SHA2{constructor(){super(64,32,8,!1),this.A=es[0]|0,this.B=es[1]|0,this.C=es[2]|0,this.D=es[3]|0,this.E=es[4]|0,this.F=es[5]|0,this.G=es[6]|0,this.H=es[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[t,n,r,i,s,o,a,c]}set(t,n,r,i,s,o,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let l=0;l<16;l++,n+=4)ts[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const f=ts[l-15],p=ts[l-2],_=(0,Kr.rotr)(f,7)^(0,Kr.rotr)(f,18)^f>>>3,y=(0,Kr.rotr)(p,17)^(0,Kr.rotr)(p,19)^p>>>10;ts[l]=y+ts[l-7]+_+ts[l-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:u,H:d}=this;for(let l=0;l<64;l++){const f=(0,Kr.rotr)(a,6)^(0,Kr.rotr)(a,11)^(0,Kr.rotr)(a,25),p=d+f+cv(a,c,u)+lv[l]+ts[l]|0,y=((0,Kr.rotr)(r,2)^(0,Kr.rotr)(r,13)^(0,Kr.rotr)(r,22))+uv(r,i,s)|0;d=u,u=c,c=a,a=o+p|0,o=s,s=i,i=r,r=p+y|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,i,s,o,a,c,u,d)}roundClean(){ts.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},dv=class extends my{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};ua.sha256=(0,Kr.wrapConstructor)(()=>new my);ua.sha224=(0,Kr.wrapConstructor)(()=>new dv);var ei={},_y={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.add=e.toBig=e.split=e.fromBig=void 0;const t=BigInt(2**32-1),n=BigInt(32);function r(F,U=!1){return U?{h:Number(F&t),l:Number(F>>n&t)}:{h:Number(F>>n&t)|0,l:Number(F&t)|0}}e.fromBig=r;function i(F,U=!1){let N=new Uint32Array(F.length),k=new Uint32Array(F.length);for(let h=0;h<F.length;h++){const{h:g,l:v}=r(F[h],U);[N[h],k[h]]=[g,v]}return[N,k]}e.split=i;const s=(F,U)=>BigInt(F>>>0)<<n|BigInt(U>>>0);e.toBig=s;const o=(F,U,N)=>F>>>N,a=(F,U,N)=>F<<32-N|U>>>N,c=(F,U,N)=>F>>>N|U<<32-N,u=(F,U,N)=>F<<32-N|U>>>N,d=(F,U,N)=>F<<64-N|U>>>N-32,l=(F,U,N)=>F>>>N-32|U<<64-N,f=(F,U)=>U,p=(F,U)=>F,_=(F,U,N)=>F<<N|U>>>32-N,y=(F,U,N)=>U<<N|F>>>32-N,b=(F,U,N)=>U<<N-32|F>>>64-N,B=(F,U,N)=>F<<N-32|U>>>64-N;function E(F,U,N,k){const h=(U>>>0)+(k>>>0);return{h:F+N+(h/2**32|0)|0,l:h|0}}e.add=E;const x=(F,U,N)=>(F>>>0)+(U>>>0)+(N>>>0),S=(F,U,N,k)=>U+N+k+(F/2**32|0)|0,T=(F,U,N,k)=>(F>>>0)+(U>>>0)+(N>>>0)+(k>>>0),R=(F,U,N,k,h)=>U+N+k+h+(F/2**32|0)|0,P=(F,U,N,k,h)=>(F>>>0)+(U>>>0)+(N>>>0)+(k>>>0)+(h>>>0),C=(F,U,N,k,h,g)=>U+N+k+h+g+(F/2**32|0)|0,G={fromBig:r,split:i,toBig:e.toBig,shrSH:o,shrSL:a,rotrSH:c,rotrSL:u,rotrBH:d,rotrBL:l,rotr32H:f,rotr32L:p,rotlSH:_,rotlSL:y,rotlBH:b,rotlBL:B,add:E,add3L:x,add3H:S,add4L:T,add4H:R,add5H:C,add5L:P};e.default=G})(_y);Object.defineProperty(ei,"__esModule",{value:!0});ei.sha384=ei.sha512_256=ei.sha512_224=ei.sha512=ei.SHA512=void 0;const fv=qc,Tt=_y,Gl=_o,[hv,pv]=Tt.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ns=new Uint32Array(80),rs=new Uint32Array(80);let Nc=class extends fv.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:u,El:d,Fh:l,Fl:f,Gh:p,Gl:_,Hh:y,Hl:b}=this;return[t,n,r,i,s,o,a,c,u,d,l,f,p,_,y,b]}set(t,n,r,i,s,o,a,c,u,d,l,f,p,_,y,b){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=l|0,this.Fl=f|0,this.Gh=p|0,this.Gl=_|0,this.Hh=y|0,this.Hl=b|0}process(t,n){for(let x=0;x<16;x++,n+=4)ns[x]=t.getUint32(n),rs[x]=t.getUint32(n+=4);for(let x=16;x<80;x++){const S=ns[x-15]|0,T=rs[x-15]|0,R=Tt.default.rotrSH(S,T,1)^Tt.default.rotrSH(S,T,8)^Tt.default.shrSH(S,T,7),P=Tt.default.rotrSL(S,T,1)^Tt.default.rotrSL(S,T,8)^Tt.default.shrSL(S,T,7),C=ns[x-2]|0,G=rs[x-2]|0,F=Tt.default.rotrSH(C,G,19)^Tt.default.rotrBH(C,G,61)^Tt.default.shrSH(C,G,6),U=Tt.default.rotrSL(C,G,19)^Tt.default.rotrBL(C,G,61)^Tt.default.shrSL(C,G,6),N=Tt.default.add4L(P,U,rs[x-7],rs[x-16]),k=Tt.default.add4H(N,R,F,ns[x-7],ns[x-16]);ns[x]=k|0,rs[x]=N|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:u,Dl:d,Eh:l,El:f,Fh:p,Fl:_,Gh:y,Gl:b,Hh:B,Hl:E}=this;for(let x=0;x<80;x++){const S=Tt.default.rotrSH(l,f,14)^Tt.default.rotrSH(l,f,18)^Tt.default.rotrBH(l,f,41),T=Tt.default.rotrSL(l,f,14)^Tt.default.rotrSL(l,f,18)^Tt.default.rotrBL(l,f,41),R=l&p^~l&y,P=f&_^~f&b,C=Tt.default.add5L(E,T,P,pv[x],rs[x]),G=Tt.default.add5H(C,B,S,R,hv[x],ns[x]),F=C|0,U=Tt.default.rotrSH(r,i,28)^Tt.default.rotrBH(r,i,34)^Tt.default.rotrBH(r,i,39),N=Tt.default.rotrSL(r,i,28)^Tt.default.rotrBL(r,i,34)^Tt.default.rotrBL(r,i,39),k=r&s^r&a^s&a,h=i&o^i&c^o&c;B=y|0,E=b|0,y=p|0,b=_|0,p=l|0,_=f|0,{h:l,l:f}=Tt.default.add(u|0,d|0,G|0,F|0),u=a|0,d=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const g=Tt.default.add3L(F,N,h);r=Tt.default.add3H(g,G,U,k),i=g|0}({h:r,l:i}=Tt.default.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Tt.default.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Tt.default.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=Tt.default.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:l,l:f}=Tt.default.add(this.Eh|0,this.El|0,l|0,f|0),{h:p,l:_}=Tt.default.add(this.Fh|0,this.Fl|0,p|0,_|0),{h:y,l:b}=Tt.default.add(this.Gh|0,this.Gl|0,y|0,b|0),{h:B,l:E}=Tt.default.add(this.Hh|0,this.Hl|0,B|0,E|0),this.set(r,i,s,o,a,c,u,d,l,f,p,_,y,b,B,E)}roundClean(){ns.fill(0),rs.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};ei.SHA512=Nc;let gv=class extends Nc{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},yv=class extends Nc{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},mv=class extends Nc{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};ei.sha512=(0,Gl.wrapConstructor)(()=>new Nc);ei.sha512_224=(0,Gl.wrapConstructor)(()=>new gv);ei.sha512_256=(0,Gl.wrapConstructor)(()=>new yv);ei.sha384=(0,Gl.wrapConstructor)(()=>new mv);var Dc={};(function(e){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0;function t(U){if(!Number.isSafeInteger(U))throw new Error(`Wrong integer: ${U}`)}e.assertNumber=t;function n(...U){const N=(g,v)=>O=>g(v(O)),k=Array.from(U).reverse().reduce((g,v)=>g?N(g,v.encode):v.encode,void 0),h=U.reduce((g,v)=>g?N(g,v.decode):v.decode,void 0);return{encode:k,decode:h}}function r(U){return{encode:N=>{if(!Array.isArray(N)||N.length&&typeof N[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return N.map(k=>{if(t(k),k<0||k>=U.length)throw new Error(`Digit index outside alphabet: ${k} (alphabet: ${U.length})`);return U[k]})},decode:N=>{if(!Array.isArray(N)||N.length&&typeof N[0]!="string")throw new Error("alphabet.decode input should be array of strings");return N.map(k=>{if(typeof k!="string")throw new Error(`alphabet.decode: not string element=${k}`);const h=U.indexOf(k);if(h===-1)throw new Error(`Unknown letter: "${k}". Allowed: ${U}`);return h})}}}function i(U=""){if(typeof U!="string")throw new Error("join separator should be string");return{encode:N=>{if(!Array.isArray(N)||N.length&&typeof N[0]!="string")throw new Error("join.encode input should be array of strings");for(let k of N)if(typeof k!="string")throw new Error(`join.encode: non-string input=${k}`);return N.join(U)},decode:N=>{if(typeof N!="string")throw new Error("join.decode input should be string");return N.split(U)}}}function s(U,N="="){if(t(U),typeof N!="string")throw new Error("padding chr should be string");return{encode(k){if(!Array.isArray(k)||k.length&&typeof k[0]!="string")throw new Error("padding.encode input should be array of strings");for(let h of k)if(typeof h!="string")throw new Error(`padding.encode: non-string input=${h}`);for(;k.length*U%8;)k.push(N);return k},decode(k){if(!Array.isArray(k)||k.length&&typeof k[0]!="string")throw new Error("padding.encode input should be array of strings");for(let g of k)if(typeof g!="string")throw new Error(`padding.decode: non-string input=${g}`);let h=k.length;if(h*U%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;h>0&&k[h-1]===N;h--)if(!((h-1)*U%8))throw new Error("Invalid padding: string has too much padding");return k.slice(0,h)}}}function o(U){if(typeof U!="function")throw new Error("normalize fn should be function");return{encode:N=>N,decode:N=>U(N)}}function a(U,N,k){if(N<2)throw new Error(`convertRadix: wrong from=${N}, base cannot be less than 2`);if(k<2)throw new Error(`convertRadix: wrong to=${k}, base cannot be less than 2`);if(!Array.isArray(U))throw new Error("convertRadix: data should be array");if(!U.length)return[];let h=0;const g=[],v=Array.from(U);for(v.forEach(O=>{if(t(O),O<0||O>=N)throw new Error(`Wrong integer: ${O}`)});;){let O=0,L=!0;for(let z=h;z<v.length;z++){const W=v[z],$=N*O+W;if(!Number.isSafeInteger($)||N*O/N!==O||$-W!==N*O)throw new Error("convertRadix: carry overflow");if(O=$%k,v[z]=Math.floor($/k),!Number.isSafeInteger(v[z])||v[z]*k+O!==$)throw new Error("convertRadix: carry overflow");if(L)v[z]?L=!1:h=z;else continue}if(g.push(O),L)break}for(let O=0;O<U.length-1&&U[O]===0;O++)g.push(0);return g.reverse()}const c=(U,N)=>N?c(N,U%N):U,u=(U,N)=>U+(N-c(U,N));function d(U,N,k,h){if(!Array.isArray(U))throw new Error("convertRadix2: data should be array");if(N<=0||N>32)throw new Error(`convertRadix2: wrong from=${N}`);if(k<=0||k>32)throw new Error(`convertRadix2: wrong to=${k}`);if(u(N,k)>32)throw new Error(`convertRadix2: carry overflow from=${N} to=${k} carryBits=${u(N,k)}`);let g=0,v=0;const O=2**k-1,L=[];for(const z of U){if(t(z),z>=2**N)throw new Error(`convertRadix2: invalid data word=${z} from=${N}`);if(g=g<<N|z,v+N>32)throw new Error(`convertRadix2: carry overflow pos=${v} from=${N}`);for(v+=N;v>=k;v-=k)L.push((g>>v-k&O)>>>0);g&=2**v-1}if(g=g<<k-v&O,!h&&v>=N)throw new Error("Excess padding");if(!h&&g)throw new Error(`Non-zero padding: ${g}`);return h&&v>0&&L.push(g>>>0),L}function l(U){return t(U),{encode:N=>{if(!(N instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return a(Array.from(N),2**8,U)},decode:N=>{if(!Array.isArray(N)||N.length&&typeof N[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(a(N,U,2**8))}}}function f(U,N=!1){if(t(U),U<=0||U>32)throw new Error("radix2: bits should be in (0..32]");if(u(8,U)>32||u(U,8)>32)throw new Error("radix2: carry overflow");return{encode:k=>{if(!(k instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return d(Array.from(k),8,U,!N)},decode:k=>{if(!Array.isArray(k)||k.length&&typeof k[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(d(k,U,8,N))}}}function p(U){if(typeof U!="function")throw new Error("unsafeWrapper fn should be function");return function(...N){try{return U.apply(null,N)}catch{}}}function _(U,N){if(t(U),typeof N!="function")throw new Error("checksum fn should be function");return{encode(k){if(!(k instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const h=N(k).slice(0,U),g=new Uint8Array(k.length+U);return g.set(k),g.set(h,k.length),g},decode(k){if(!(k instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const h=k.slice(0,-U),g=N(h).slice(0,U),v=k.slice(-U);for(let O=0;O<U;O++)if(g[O]!==v[O])throw new Error("Invalid checksum");return h}}}e.utils={alphabet:r,chain:n,checksum:_,radix:l,radix2:f,join:i,padding:s},e.base16=n(f(4),r("0123456789ABCDEF"),i("")),e.base32=n(f(5),r("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),s(5),i("")),e.base32hex=n(f(5),r("0123456789ABCDEFGHIJKLMNOPQRSTUV"),s(5),i("")),e.base32crockford=n(f(5),r("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),i(""),o(U=>U.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=n(f(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s(6),i("")),e.base64url=n(f(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(6),i(""));const y=U=>n(l(58),r(U),i(""));e.base58=y("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=y("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=y("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const b=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(U){let N="";for(let k=0;k<U.length;k+=8){const h=U.subarray(k,k+8);N+=e.base58.encode(h).padStart(b[h.length],"1")}return N},decode(U){let N=[];for(let k=0;k<U.length;k+=11){const h=U.slice(k,k+11),g=b.indexOf(h.length),v=e.base58.decode(h);for(let O=0;O<v.length-g;O++)if(v[O]!==0)throw new Error("base58xmr: wrong padding");N=N.concat(Array.from(v.slice(v.length-g)))}return Uint8Array.from(N)}};const B=U=>n(_(4,N=>U(U(N))),e.base58);e.base58check=B;const E=n(r("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),i("")),x=[996825010,642813549,513874426,1027748829,705979059];function S(U){const N=U>>25;let k=(U&33554431)<<5;for(let h=0;h<x.length;h++)(N>>h&1)===1&&(k^=x[h]);return k}function T(U,N,k=1){const h=U.length;let g=1;for(let v=0;v<h;v++){const O=U.charCodeAt(v);if(O<33||O>126)throw new Error(`Invalid prefix (${U})`);g=S(g)^O>>5}g=S(g);for(let v=0;v<h;v++)g=S(g)^U.charCodeAt(v)&31;for(let v of N)g=S(g)^v;for(let v=0;v<6;v++)g=S(g);return g^=k,E.encode(d([g%2**30],30,5,!1))}function R(U){const N=U==="bech32"?1:734539939,k=f(5),h=k.decode,g=k.encode,v=p(h);function O($,w,H=90){if(typeof $!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof $}`);if(!Array.isArray(w)||w.length&&typeof w[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof w}`);const re=$.length+7+w.length;if(H!==!1&&re>H)throw new TypeError(`Length ${re} exceeds limit ${H}`);return $=$.toLowerCase(),`${$}1${E.encode(w)}${T($,w,N)}`}function L($,w=90){if(typeof $!="string")throw new Error(`bech32.decode input should be string, not ${typeof $}`);if($.length<8||w!==!1&&$.length>w)throw new TypeError(`Wrong string length: ${$.length} (${$}). Expected (8..${w})`);const H=$.toLowerCase();if($!==H&&$!==$.toUpperCase())throw new Error("String must be lowercase or uppercase");$=H;const re=$.lastIndexOf("1");if(re===0||re===-1)throw new Error('Letter "1" must be present between prefix and data only');const Q=$.slice(0,re),ce=$.slice(re+1);if(ce.length<6)throw new Error("Data must be at least 6 characters long");const Be=E.decode(ce).slice(0,-6),Ue=T(Q,Be,N);if(!ce.endsWith(Ue))throw new Error(`Invalid checksum in ${$}: expected "${Ue}"`);return{prefix:Q,words:Be}}const z=p(L);function W($){const{prefix:w,words:H}=L($,!1);return{prefix:w,words:H,bytes:h(H)}}return{encode:O,decode:L,decodeToBytes:W,decodeUnsafe:z,fromWords:h,fromWordsUnsafe:v,toWords:g}}e.bech32=R("bech32"),e.bech32m=R("bech32m"),e.utf8={encode:U=>new TextDecoder().decode(U),decode:U=>new TextEncoder().encode(U)},e.hex=n(f(4),r("0123456789abcdef"),i(""),o(U=>{if(typeof U!="string"||U.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof U} with length ${U.length}`);return U.toLowerCase()}));const P={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},C=`Invalid encoding type. Available types: ${Object.keys(P).join(", ")}`,G=(U,N)=>{if(typeof U!="string"||!P.hasOwnProperty(U))throw new TypeError(C);if(!(N instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return P[U].encode(N)};e.bytesToString=G,e.str=e.bytesToString;const F=(U,N)=>{if(!P.hasOwnProperty(U))throw new TypeError(C);if(typeof N!="string")throw new TypeError("stringToBytes() expects string");return P[U].decode(N)};e.stringToBytes=F,e.bytes=e.stringToBytes})(Dc);Object.defineProperty(Pr,"__esModule",{value:!0});var wy=Pr.mnemonicToSeedSync=Pr.mnemonicToSeed=Pr.validateMnemonic=Pr.entropyToMnemonic=Pr.mnemonicToEntropy=Pr.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const by=zn,vy=ca,_v=ua,xy=ei,wv=_o,du=Dc,bv=e=>e[0]==="";function Sy(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function rh(e){const t=Sy(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function Ty(e){by.default.bytes(e,16,20,24,28,32)}function vv(e,t=128){if(by.default.number(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return ky((0,wv.randomBytes)(t/8),e)}Pr.generateMnemonic=vv;const xv=e=>{const t=8-e.length/4;return new Uint8Array([(0,_v.sha256)(e)[0]>>t<<t])};function Ay(e){if(!Array.isArray(e)||e.length!==2**11||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(t=>{if(typeof t!="string")throw new Error(`Wordlist: non-string element: ${t}`)}),du.utils.chain(du.utils.checksum(1,xv),du.utils.radix2(11,!0),du.utils.alphabet(e))}function Ey(e,t){const{words:n}=rh(e),r=Ay(t).decode(n);return Ty(r),r}Pr.mnemonicToEntropy=Ey;function ky(e,t){return Ty(e),Ay(t).encode(e).join(bv(t)?"":" ")}Pr.entropyToMnemonic=ky;function Sv(e,t){try{Ey(e,t)}catch{return!1}return!0}Pr.validateMnemonic=Sv;const By=e=>Sy(`mnemonic${e}`);function Tv(e,t=""){return(0,vy.pbkdf2Async)(xy.sha512,rh(e).nfkd,By(t),{c:2048,dkLen:64})}Pr.mnemonicToSeed=Tv;function Av(e,t=""){return(0,vy.pbkdf2)(xy.sha512,rh(e).nfkd,By(t),{c:2048,dkLen:64})}wy=Pr.mnemonicToSeedSync=Av;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ev=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),bf=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),kv=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!kv)throw new Error("Non little-endian hardware is not supported");const Bv=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ry(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Bv[e[n]];return t}function Py(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=n*2,i=e.slice(r,r+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[n]=s}return t}function Rv(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Lc(e){if(typeof e=="string"&&(e=Rv(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}let ih=class{clone(){return this._cloneInto()}};function Wl(e){const t=r=>e().update(Lc(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Pv(e){const t=(r,i)=>e(i).update(Lc(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function a0(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Ov(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Oy(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Iv(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");a0(e.outputLen),a0(e.blockLen)}function Cv(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function $v(e,t){Oy(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Or={number:a0,bool:Ov,bytes:Oy,hash:Iv,exists:Cv,output:$v},fu=BigInt(2**32-1),c0=BigInt(32);function Iy(e,t=!1){return t?{h:Number(e&fu),l:Number(e>>c0&fu)}:{h:Number(e>>c0&fu)|0,l:Number(e&fu)|0}}function Uv(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=Iy(e[i],t);[n[i],r[i]]=[s,o]}return[n,r]}const Mv=(e,t)=>BigInt(e>>>0)<<c0|BigInt(t>>>0),qv=(e,t,n)=>e>>>n,Nv=(e,t,n)=>e<<32-n|t>>>n,Dv=(e,t,n)=>e>>>n|t<<32-n,Lv=(e,t,n)=>e<<32-n|t>>>n,Hv=(e,t,n)=>e<<64-n|t>>>n-32,zv=(e,t,n)=>e>>>n-32|t<<64-n,jv=(e,t)=>t,Fv=(e,t)=>e,Gv=(e,t,n)=>e<<n|t>>>32-n,Wv=(e,t,n)=>t<<n|e>>>32-n,Vv=(e,t,n)=>t<<n-32|e>>>64-n,Kv=(e,t,n)=>e<<n-32|t>>>64-n;function Xv(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const Zv=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Jv=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,Yv=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),Qv=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,e6=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),t6=(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,dt={fromBig:Iy,split:Uv,toBig:Mv,shrSH:qv,shrSL:Nv,rotrSH:Dv,rotrSL:Lv,rotrBH:Hv,rotrBL:zv,rotr32H:jv,rotr32L:Fv,rotlSH:Gv,rotlSL:Wv,rotlBH:Vv,rotlBL:Kv,add:Xv,add3L:Zv,add3H:Jv,add4L:Yv,add4H:Qv,add5H:t6,add5L:e6},[Cy,$y,Uy]=[[],[],[]],n6=BigInt(0),Ya=BigInt(1),r6=BigInt(2),i6=BigInt(7),s6=BigInt(256),o6=BigInt(113);for(let e=0,t=Ya,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Cy.push(2*(5*r+n)),$y.push((e+1)*(e+2)/2%64);let i=n6;for(let s=0;s<7;s++)t=(t<<Ya^(t>>i6)*o6)%s6,t&r6&&(i^=Ya<<(Ya<<BigInt(s))-Ya);Uy.push(i)}const[a6,c6]=dt.split(Uy,!0),jp=(e,t,n)=>n>32?dt.rotlBH(e,t,n):dt.rotlSH(e,t,n),Fp=(e,t,n)=>n>32?dt.rotlBL(e,t,n):dt.rotlSL(e,t,n);function u6(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],d=n[c+1],l=jp(u,d,1)^n[a],f=Fp(u,d,1)^n[a+1];for(let p=0;p<50;p+=10)e[o+p]^=l,e[o+p+1]^=f}let i=e[2],s=e[3];for(let o=0;o<24;o++){const a=$y[o],c=jp(i,s,a),u=Fp(i,s,a),d=Cy[o];i=e[d],s=e[d+1],e[d]=c,e[d+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=a6[r],e[1]^=c6[r]}n.fill(0)}let My=class qy extends ih{constructor(t,n,r,i=!1,s=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Or.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Ev(this.state)}keccak(){u6(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Or.exists(this);const{blockLen:n,state:r}=this;t=Lc(t);const i=t.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,n&128&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){Or.exists(this,!1),Or.bytes(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=t.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);t.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Or.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Or.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new qy(n,r,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}};const qs=(e,t,n)=>Wl(()=>new My(t,e,n));qs(6,144,224/8);const la=qs(6,136,256/8);qs(6,104,384/8);qs(6,72,512/8);qs(1,144,224/8);qs(1,136,256/8);qs(1,104,384/8);qs(1,72,512/8);const Ny=(e,t,n)=>Pv((r={})=>new My(t,e,r.dkLen===void 0?n:r.dkLen,!0));Ny(31,168,128/8);Ny(31,136,256/8);let Dy=class extends ih{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Or.hash(t);const r=Lc(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){return Or.exists(this),this.iHash.update(t),this}digestInto(t){Or.exists(this),Or.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const sh=(e,t,n)=>new Dy(e,t).update(n).digest();sh.create=(e,t)=>new Dy(e,t);function l6(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}let d6=class extends ih{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=bf(this.buffer)}update(t){Or.exists(this);const{view:n,buffer:r,blockLen:i}=this;t=Lc(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=bf(t);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Or.exists(this),Or.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let c=o;c<i;c++)n[c]=0;l6(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=bf(t);this.get().forEach((c,u)=>a.setUint32(4*u,c,s))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%n&&t.buffer.set(r),t}};const[f6,h6]=dt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),is=new Uint32Array(80),ss=new Uint32Array(80);let oh=class extends d6{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:u,El:d,Fh:l,Fl:f,Gh:p,Gl:_,Hh:y,Hl:b}=this;return[t,n,r,i,s,o,a,c,u,d,l,f,p,_,y,b]}set(t,n,r,i,s,o,a,c,u,d,l,f,p,_,y,b){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=l|0,this.Fl=f|0,this.Gh=p|0,this.Gl=_|0,this.Hh=y|0,this.Hl=b|0}process(t,n){for(let x=0;x<16;x++,n+=4)is[x]=t.getUint32(n),ss[x]=t.getUint32(n+=4);for(let x=16;x<80;x++){const S=is[x-15]|0,T=ss[x-15]|0,R=dt.rotrSH(S,T,1)^dt.rotrSH(S,T,8)^dt.shrSH(S,T,7),P=dt.rotrSL(S,T,1)^dt.rotrSL(S,T,8)^dt.shrSL(S,T,7),C=is[x-2]|0,G=ss[x-2]|0,F=dt.rotrSH(C,G,19)^dt.rotrBH(C,G,61)^dt.shrSH(C,G,6),U=dt.rotrSL(C,G,19)^dt.rotrBL(C,G,61)^dt.shrSL(C,G,6),N=dt.add4L(P,U,ss[x-7],ss[x-16]),k=dt.add4H(N,R,F,is[x-7],is[x-16]);is[x]=k|0,ss[x]=N|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:u,Dl:d,Eh:l,El:f,Fh:p,Fl:_,Gh:y,Gl:b,Hh:B,Hl:E}=this;for(let x=0;x<80;x++){const S=dt.rotrSH(l,f,14)^dt.rotrSH(l,f,18)^dt.rotrBH(l,f,41),T=dt.rotrSL(l,f,14)^dt.rotrSL(l,f,18)^dt.rotrBL(l,f,41),R=l&p^~l&y,P=f&_^~f&b,C=dt.add5L(E,T,P,h6[x],ss[x]),G=dt.add5H(C,B,S,R,f6[x],is[x]),F=C|0,U=dt.rotrSH(r,i,28)^dt.rotrBH(r,i,34)^dt.rotrBH(r,i,39),N=dt.rotrSL(r,i,28)^dt.rotrBL(r,i,34)^dt.rotrBL(r,i,39),k=r&s^r&a^s&a,h=i&o^i&c^o&c;B=y|0,E=b|0,y=p|0,b=_|0,p=l|0,_=f|0,{h:l,l:f}=dt.add(u|0,d|0,G|0,F|0),u=a|0,d=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const g=dt.add3L(F,N,h);r=dt.add3H(g,G,U,k),i=g|0}({h:r,l:i}=dt.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=dt.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=dt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=dt.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:l,l:f}=dt.add(this.Eh|0,this.El|0,l|0,f|0),{h:p,l:_}=dt.add(this.Fh|0,this.Fl|0,p|0,_|0),{h:y,l:b}=dt.add(this.Gh|0,this.Gl|0,y|0,b|0),{h:B,l:E}=dt.add(this.Hh|0,this.Hl|0,B|0,E|0),this.set(r,i,s,o,a,c,u,d,l,f,p,_,y,b,B,E)}roundClean(){is.fill(0),ss.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},p6=class extends oh{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},g6=class extends oh{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const Ly=Wl(()=>new oh);Wl(()=>new p6);Wl(()=>new g6);var u0={},y6={get exports(){return u0},set exports(e){u0=e}},sl={},m6={get exports(){return sl},set exports(e){sl=e}},Hy=function(t,n){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return t.apply(n,i)}},_6=Hy,ah=Object.prototype.toString,ch=function(e){return function(t){var n=ah.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function wo(e){return e=e.toLowerCase(),function(n){return ch(n)===e}}function uh(e){return Array.isArray(e)}function ol(e){return typeof e>"u"}function w6(e){return e!==null&&!ol(e)&&e.constructor!==null&&!ol(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var zy=wo("ArrayBuffer");function b6(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&zy(e.buffer),t}function v6(e){return typeof e=="string"}function x6(e){return typeof e=="number"}function jy(e){return e!==null&&typeof e=="object"}function Mu(e){if(ch(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var S6=wo("Date"),T6=wo("File"),A6=wo("Blob"),E6=wo("FileList");function lh(e){return ah.call(e)==="[object Function]"}function k6(e){return jy(e)&&lh(e.pipe)}function B6(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||ah.call(e)===t||lh(e.toString)&&e.toString()===t)}var R6=wo("URLSearchParams");function P6(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function O6(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function dh(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),uh(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function l0(){var e={};function t(i,s){Mu(e[s])&&Mu(i)?e[s]=l0(e[s],i):Mu(i)?e[s]=l0({},i):uh(i)?e[s]=i.slice():e[s]=i}for(var n=0,r=arguments.length;n<r;n++)dh(arguments[n],t);return e}function I6(e,t,n){return dh(t,function(i,s){n&&typeof i=="function"?e[s]=_6(i,n):e[s]=i}),e}function C6(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function $6(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)}function U6(e,t,n){var r,i,s,o={};t=t||{};do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)s=r[i],o[s]||(t[s]=e[s],o[s]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t}function M6(e,t,n){e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return r!==-1&&r===n}function q6(e){if(!e)return null;var t=e.length;if(ol(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n}var N6=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),rr={isArray:uh,isArrayBuffer:zy,isBuffer:w6,isFormData:B6,isArrayBufferView:b6,isString:v6,isNumber:x6,isObject:jy,isPlainObject:Mu,isUndefined:ol,isDate:S6,isFile:T6,isBlob:A6,isFunction:lh,isStream:k6,isURLSearchParams:R6,isStandardBrowserEnv:O6,forEach:dh,merge:l0,extend:I6,trim:P6,stripBOM:C6,inherits:$6,toFlatObject:U6,kindOf:ch,kindOfTest:wo,endsWith:M6,toArray:q6,isTypedArray:N6,isFileList:E6},Mo=rr;function Gp(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Fy=function(t,n,r){if(!n)return t;var i;if(r)i=r(n);else if(Mo.isURLSearchParams(n))i=n.toString();else{var s=[];Mo.forEach(n,function(c,u){c===null||typeof c>"u"||(Mo.isArray(c)?u=u+"[]":c=[c],Mo.forEach(c,function(l){Mo.isDate(l)?l=l.toISOString():Mo.isObject(l)&&(l=JSON.stringify(l)),s.push(Gp(u)+"="+Gp(l))}))}),i=s.join("&")}if(i){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t},D6=rr;function Vl(){this.handlers=[]}Vl.prototype.use=function(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};Vl.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Vl.prototype.forEach=function(t){D6.forEach(this.handlers,function(r){r!==null&&t(r)})};var L6=Vl,H6=rr,z6=function(t,n){H6.forEach(t,function(i,s){s!==n&&s.toUpperCase()===n.toUpperCase()&&(t[n]=i,delete t[s])})},Gy=rr;function da(e,t,n,r,i){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Gy.inherits(da,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Wy=da.prototype,Vy={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){Vy[e]={value:e}});Object.defineProperties(da,Vy);Object.defineProperty(Wy,"isAxiosError",{value:!0});da.from=function(e,t,n,r,i,s){var o=Object.create(Wy);return Gy.toFlatObject(e,o,function(c){return c!==Error.prototype}),da.call(o,e.message,t,n,r,i),o.name=e.name,s&&Object.assign(o,s),o};var Ca=da,Ky={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ai=rr;function j6(e,t){t=t||new FormData;var n=[];function r(s){return s===null?"":ai.isDate(s)?s.toISOString():ai.isArrayBuffer(s)||ai.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):Buffer.from(s):s}function i(s,o){if(ai.isPlainObject(s)||ai.isArray(s)){if(n.indexOf(s)!==-1)throw Error("Circular reference detected in "+o);n.push(s),ai.forEach(s,function(c,u){if(!ai.isUndefined(c)){var d=o?o+"."+u:u,l;if(c&&!o&&typeof c=="object"){if(ai.endsWith(u,"{}"))c=JSON.stringify(c);else if(ai.endsWith(u,"[]")&&(l=ai.toArray(c))){l.forEach(function(f){!ai.isUndefined(f)&&t.append(d,r(f))});return}}i(c,d)}}),n.pop()}else t.append(o,r(s))}return i(e),t}var Xy=j6,vf,Wp;function F6(){if(Wp)return vf;Wp=1;var e=Ca;return vf=function(n,r,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?n(i):r(new e("Request failed with status code "+i.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},vf}var xf,Vp;function G6(){if(Vp)return xf;Vp=1;var e=rr;return xf=e.isStandardBrowserEnv()?function(){return{write:function(r,i,s,o,a,c){var u=[];u.push(r+"="+encodeURIComponent(i)),e.isNumber(s)&&u.push("expires="+new Date(s).toGMTString()),e.isString(o)&&u.push("path="+o),e.isString(a)&&u.push("domain="+a),c===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),xf}var W6=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},V6=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t},K6=W6,X6=V6,Zy=function(t,n){return t&&!K6(n)?X6(t,n):n},Sf,Kp;function Z6(){if(Kp)return Sf;Kp=1;var e=rr,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Sf=function(r){var i={},s,o,a;return r&&e.forEach(r.split(`
`),function(u){if(a=u.indexOf(":"),s=e.trim(u.substr(0,a)).toLowerCase(),o=e.trim(u.substr(a+1)),s){if(i[s]&&t.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},Sf}var Tf,Xp;function J6(){if(Xp)return Tf;Xp=1;var e=rr;return Tf=e.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function s(o){var a=o;return n&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=s(window.location.href),function(a){var c=e.isString(a)?s(a):a;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),Tf}var Af,Zp;function Kl(){if(Zp)return Af;Zp=1;var e=Ca,t=rr;function n(r){e.call(this,r??"canceled",e.ERR_CANCELED),this.name="CanceledError"}return t.inherits(n,e,{__CANCEL__:!0}),Af=n,Af}var Ef,Jp;function Y6(){return Jp||(Jp=1,Ef=function(t){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}),Ef}var kf,Yp;function Qp(){if(Yp)return kf;Yp=1;var e=rr,t=F6(),n=G6(),r=Fy,i=Zy,s=Z6(),o=J6(),a=Ky,c=Ca,u=Kl(),d=Y6();return kf=function(f){return new Promise(function(_,y){var b=f.data,B=f.headers,E=f.responseType,x;function S(){f.cancelToken&&f.cancelToken.unsubscribe(x),f.signal&&f.signal.removeEventListener("abort",x)}e.isFormData(b)&&e.isStandardBrowserEnv()&&delete B["Content-Type"];var T=new XMLHttpRequest;if(f.auth){var R=f.auth.username||"",P=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";B.Authorization="Basic "+btoa(R+":"+P)}var C=i(f.baseURL,f.url);T.open(f.method.toUpperCase(),r(C,f.params,f.paramsSerializer),!0),T.timeout=f.timeout;function G(){if(T){var N="getAllResponseHeaders"in T?s(T.getAllResponseHeaders()):null,k=!E||E==="text"||E==="json"?T.responseText:T.response,h={data:k,status:T.status,statusText:T.statusText,headers:N,config:f,request:T};t(function(v){_(v),S()},function(v){y(v),S()},h),T=null}}if("onloadend"in T?T.onloadend=G:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(G)},T.onabort=function(){T&&(y(new c("Request aborted",c.ECONNABORTED,f,T)),T=null)},T.onerror=function(){y(new c("Network Error",c.ERR_NETWORK,f,T,T)),T=null},T.ontimeout=function(){var k=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",h=f.transitional||a;f.timeoutErrorMessage&&(k=f.timeoutErrorMessage),y(new c(k,h.clarifyTimeoutError?c.ETIMEDOUT:c.ECONNABORTED,f,T)),T=null},e.isStandardBrowserEnv()){var F=(f.withCredentials||o(C))&&f.xsrfCookieName?n.read(f.xsrfCookieName):void 0;F&&(B[f.xsrfHeaderName]=F)}"setRequestHeader"in T&&e.forEach(B,function(k,h){typeof b>"u"&&h.toLowerCase()==="content-type"?delete B[h]:T.setRequestHeader(h,k)}),e.isUndefined(f.withCredentials)||(T.withCredentials=!!f.withCredentials),E&&E!=="json"&&(T.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&T.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&T.upload&&T.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(x=function(N){T&&(y(!N||N&&N.type?new u:N),T.abort(),T=null)},f.cancelToken&&f.cancelToken.subscribe(x),f.signal&&(f.signal.aborted?x():f.signal.addEventListener("abort",x))),b||(b=null);var U=d(C);if(U&&["http","https","file"].indexOf(U)===-1){y(new c("Unsupported protocol "+U+":",c.ERR_BAD_REQUEST,f));return}T.send(b)})},kf}var Bf,eg;function Q6(){return eg||(eg=1,Bf=null),Bf}var Dn=rr,tg=z6,ng=Ca,ex=Ky,tx=Xy,nx={"Content-Type":"application/x-www-form-urlencoded"};function rg(e,t){!Dn.isUndefined(e)&&Dn.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function rx(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=Qp()),e}function ix(e,t,n){if(Dn.isString(e))try{return(t||JSON.parse)(e),Dn.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}var Xl={transitional:ex,adapter:rx(),transformRequest:[function(t,n){if(tg(n,"Accept"),tg(n,"Content-Type"),Dn.isFormData(t)||Dn.isArrayBuffer(t)||Dn.isBuffer(t)||Dn.isStream(t)||Dn.isFile(t)||Dn.isBlob(t))return t;if(Dn.isArrayBufferView(t))return t.buffer;if(Dn.isURLSearchParams(t))return rg(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var r=Dn.isObject(t),i=n&&n["Content-Type"],s;if((s=Dn.isFileList(t))||r&&i==="multipart/form-data"){var o=this.env&&this.env.FormData;return tx(s?{"files[]":t}:t,o&&new o)}else if(r||i==="application/json")return rg(n,"application/json"),ix(t);return t}],transformResponse:[function(t){var n=this.transitional||Xl.transitional,r=n&&n.silentJSONParsing,i=n&&n.forcedJSONParsing,s=!r&&this.responseType==="json";if(s||i&&Dn.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(s)throw o.name==="SyntaxError"?ng.from(o,ng.ERR_BAD_RESPONSE,this,null,this.response):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Q6()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Dn.forEach(["delete","get","head"],function(t){Xl.headers[t]={}});Dn.forEach(["post","put","patch"],function(t){Xl.headers[t]=Dn.merge(nx)});var fh=Xl,sx=rr,ox=fh,ax=function(t,n,r){var i=this||ox;return sx.forEach(r,function(o){t=o.call(i,t,n)}),t},Rf,ig;function Jy(){return ig||(ig=1,Rf=function(t){return!!(t&&t.__CANCEL__)}),Rf}var sg=rr,Pf=ax,cx=Jy(),ux=fh,lx=Kl();function Of(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new lx}var dx=function(t){Of(t),t.headers=t.headers||{},t.data=Pf.call(t,t.data,t.headers,t.transformRequest),t.headers=sg.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),sg.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var n=t.adapter||ux.adapter;return n(t).then(function(i){return Of(t),i.data=Pf.call(t,i.data,i.headers,t.transformResponse),i},function(i){return cx(i)||(Of(t),i&&i.response&&(i.response.data=Pf.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})},kr=rr,Yy=function(t,n){n=n||{};var r={};function i(d,l){return kr.isPlainObject(d)&&kr.isPlainObject(l)?kr.merge(d,l):kr.isPlainObject(l)?kr.merge({},l):kr.isArray(l)?l.slice():l}function s(d){if(kr.isUndefined(n[d])){if(!kr.isUndefined(t[d]))return i(void 0,t[d])}else return i(t[d],n[d])}function o(d){if(!kr.isUndefined(n[d]))return i(void 0,n[d])}function a(d){if(kr.isUndefined(n[d])){if(!kr.isUndefined(t[d]))return i(void 0,t[d])}else return i(void 0,n[d])}function c(d){if(d in n)return i(t[d],n[d]);if(d in t)return i(void 0,t[d])}var u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return kr.forEach(Object.keys(t).concat(Object.keys(n)),function(l){var f=u[l]||s,p=f(l);kr.isUndefined(p)&&f!==c||(r[l]=p)}),r},If,og;function Qy(){return og||(og=1,If={version:"0.27.2"}),If}var fx=Qy().version,vs=Ca,hh={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){hh[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var ag={};hh.transitional=function(t,n,r){function i(s,o){return"[Axios v"+fx+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return function(s,o,a){if(t===!1)throw new vs(i(o," has been removed"+(n?" in "+n:"")),vs.ERR_DEPRECATED);return n&&!ag[o]&&(ag[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,a):!0}};function hx(e,t,n){if(typeof e!="object")throw new vs("options must be an object",vs.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var s=r[i],o=t[s];if(o){var a=e[s],c=a===void 0||o(a,s,e);if(c!==!0)throw new vs("option "+s+" must be "+c,vs.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new vs("Unknown option "+s,vs.ERR_BAD_OPTION)}}var px={assertOptions:hx,validators:hh},em=rr,gx=Fy,cg=L6,ug=dx,Zl=Yy,yx=Zy,tm=px,qo=tm.validators;function fa(e){this.defaults=e,this.interceptors={request:new cg,response:new cg}}fa.prototype.request=function(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Zl(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var r=n.transitional;r!==void 0&&tm.assertOptions(r,{silentJSONParsing:qo.transitional(qo.boolean),forcedJSONParsing:qo.transitional(qo.boolean),clarifyTimeoutError:qo.transitional(qo.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(s=s&&p.synchronous,i.unshift(p.fulfilled,p.rejected))});var o=[];this.interceptors.response.forEach(function(p){o.push(p.fulfilled,p.rejected)});var a;if(!s){var c=[ug,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(o),a=Promise.resolve(n);c.length;)a=a.then(c.shift(),c.shift());return a}for(var u=n;i.length;){var d=i.shift(),l=i.shift();try{u=d(u)}catch(f){l(f);break}}try{a=ug(u)}catch(f){return Promise.reject(f)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};fa.prototype.getUri=function(t){t=Zl(this.defaults,t);var n=yx(t.baseURL,t.url);return gx(n,t.params,t.paramsSerializer)};em.forEach(["delete","get","head","options"],function(t){fa.prototype[t]=function(n,r){return this.request(Zl(r||{},{method:t,url:n,data:(r||{}).data}))}});em.forEach(["post","put","patch"],function(t){function n(r){return function(s,o,a){return this.request(Zl(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}fa.prototype[t]=n(),fa.prototype[t+"Form"]=n(!0)});var mx=fa,Cf,lg;function _x(){if(lg)return Cf;lg=1;var e=Kl();function t(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(o){r=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(c){i.subscribe(c),o=c}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},n(function(o){i.reason||(i.reason=new e(o),r(i.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},t.prototype.unsubscribe=function(r){if(this._listeners){var i=this._listeners.indexOf(r);i!==-1&&this._listeners.splice(i,1)}},t.source=function(){var r,i=new t(function(o){r=o});return{token:i,cancel:r}},Cf=t,Cf}var $f,dg;function wx(){return dg||(dg=1,$f=function(t){return function(r){return t.apply(null,r)}}),$f}var Uf,fg;function bx(){if(fg)return Uf;fg=1;var e=rr;return Uf=function(n){return e.isObject(n)&&n.isAxiosError===!0},Uf}var hg=rr,vx=Hy,qu=mx,xx=Yy,Sx=fh;function nm(e){var t=new qu(e),n=vx(qu.prototype.request,t);return hg.extend(n,qu.prototype,t),hg.extend(n,t),n.create=function(i){return nm(xx(e,i))},n}var Tr=nm(Sx);Tr.Axios=qu;Tr.CanceledError=Kl();Tr.CancelToken=_x();Tr.isCancel=Jy();Tr.VERSION=Qy().version;Tr.toFormData=Xy;Tr.AxiosError=Ca;Tr.Cancel=Tr.CanceledError;Tr.all=function(t){return Promise.all(t)};Tr.spread=wx();Tr.isAxiosError=bx();m6.exports=Tr;sl.default=Tr;(function(e){e.exports=sl})(y6);const yi=Vb(u0);var Jl=typeof self=="object"?self.FormData:window.FormData,rm=Object.defineProperty,Tx=Object.getOwnPropertyDescriptor,Yl=(e,t)=>{for(var n in t)rm(e,n,{get:t[n],enumerable:!0})},en=(e,t,n,r)=>{for(var i=r>1?void 0:r?Tx(t,n):t,s=e.length-1,o;s>=0;s--)(o=e[s])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&rm(t,n,i),i},Ax=/^m(\/[0-9]+')+$/,im=e=>e.replace("'",""),Ex="ed25519 seed",kx=2147483648,Bx=e=>{const n=sh.create(Ly,Ex).update(Py(e)).digest(),r=n.slice(0,32),i=n.slice(32);return{key:r,chainCode:i}},Rx=({key:e,chainCode:t},n)=>{const r=new ArrayBuffer(4);new DataView(r).setUint32(0,n);const i=new Uint8Array(r),s=new Uint8Array([0]),o=new Uint8Array([...s,...e,...i]),a=sh.create(Ly,t).update(o).digest(),c=a.slice(0,32),u=a.slice(32);return{key:c,chainCode:u}},Px=e=>Ax.test(e)?!e.split("/").slice(1).map(im).some(Number.isNaN):!1,sm=(e,t,n=kx)=>{if(!Px(e))throw new Error("Invalid derivation path");const{key:r,chainCode:i}=Bx(t);return e.split("/").slice(1).map(im).map(o=>parseInt(o,10)).reduce((o,a)=>Rx(o,a+n),{key:r,chainCode:i})};async function Ox(e){return new Promise(t=>{setTimeout(t,e)})}var pg="/v1";function Ix(e){let t=`${e}`;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t.endsWith(pg)||(t=`${t}${pg}`),t}var om=2e5,am=20,cm=20,d0="0x1::aptos_coin::AptosCoin";function Ql(e){let t,n,r;return typeof e=="object"?(t=e.hashFunction,n=e.ttlMs,r=e.tags):t=e,(i,s,o)=>{if(o.value!=null)o.value=gg(o.value,t,n,r);else if(o.get!=null)o.get=gg(o.get,t,n,r);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}function Cx(e,t){return Ql({ttlMs:e,hashFunction:t})}var Nu=new Map;function $x(e){const t=new Set;for(const n of e){const r=Nu.get(n);if(r)for(const i of r)t.has(i)||(i.clear(),t.add(i))}return t.size}function gg(e,t,n=0,r){const i=Symbol("__memoized_map__");return function(...s){let o;const a=this;a.hasOwnProperty(i)||Object.defineProperty(a,i,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const c=a[i];if(Array.isArray(r))for(const u of r)Nu.has(u)?Nu.get(u).push(c):Nu.set(u,[c]);if(t||s.length>0||n>0){let u;t===!0?u=s.map(f=>f.toString()).join("!"):t?u=t.apply(a,s):u=s[0];const d=`${u}__timestamp`;let l=!1;if(n>0)if(!c.has(d))l=!0;else{const f=c.get(d);l=Date.now()-f>n}c.has(u)&&!l?o=c.get(u):(o=e.apply(a,s),c.set(u,o),n>0&&c.set(d,Date.now()))}else{const u=a;c.has(u)?o=c.get(u):(o=e.apply(a,s),c.set(u,o))}return o}}var it=class{static fromBuffer(t){return it.fromUint8Array(t)}static fromUint8Array(t){return new it(Ry(t))}static ensure(t){return typeof t=="string"?new it(t):t}constructor(t){t.startsWith("0x")?this.hexString=t:this.hexString=`0x${t}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(Py(this.noPrefix()))}};async function yg(e,t,n,r){var i;const s=[];let o;for(;;){const a=await e(it.ensure(t).hex(),(i=r==null?void 0:r.ledgerVersion)==null?void 0:i.toString(),o,n);if(o=a.__headers["x-aptos-cursor"],delete a.__headers,s.push(...a),o==null)break}return s}var Ux={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql"},Mx={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1"},um=(e=>(e.MAINNET="mainnet",e.TESTNET="testnet",e.DEVNET="devnet",e))(um||{}),Yt={};Yl(Yt,{AccountAddress:()=>_n,AccountAuthenticator:()=>_c,AccountAuthenticatorEd25519:()=>yh,AccountAuthenticatorMultiEd25519:()=>mh,ArgumentABI:()=>Wc,AuthenticationKey:()=>ao,ChainId:()=>ad,ChangeSet:()=>Kx,Ed25519PublicKey:()=>Yr,Ed25519Signature:()=>ki,EntryFunction:()=>no,EntryFunctionABI:()=>pa,Identifier:()=>mr,Module:()=>fm,ModuleId:()=>oo,MultiAgentRawTransaction:()=>id,MultiEd25519PublicKey:()=>Hc,MultiEd25519Signature:()=>ed,MultiSig:()=>bh,MultiSigTransactionPayload:()=>wh,RawTransaction:()=>Na,RawTransactionWithData:()=>hm,RotationProofChallenge:()=>Zx,Script:()=>rd,ScriptABI:()=>md,SignedTransaction:()=>jc,StructTag:()=>ha,Transaction:()=>pm,TransactionArgument:()=>wi,TransactionArgumentAddress:()=>pd,TransactionArgumentBool:()=>yd,TransactionArgumentU128:()=>fd,TransactionArgumentU16:()=>ud,TransactionArgumentU256:()=>hd,TransactionArgumentU32:()=>ld,TransactionArgumentU64:()=>dd,TransactionArgumentU8:()=>cd,TransactionArgumentU8Vector:()=>gd,TransactionAuthenticator:()=>zc,TransactionAuthenticatorEd25519:()=>td,TransactionAuthenticatorMultiAgent:()=>gh,TransactionAuthenticatorMultiEd25519:()=>nd,TransactionPayload:()=>Fc,TransactionPayloadEntryFunction:()=>od,TransactionPayloadMultisig:()=>vh,TransactionPayloadScript:()=>sd,TransactionScriptABI:()=>_d,TypeArgumentABI:()=>Gc,TypeTag:()=>tr,TypeTagAddress:()=>To,TypeTagBool:()=>vo,TypeTagSigner:()=>_h,TypeTagStruct:()=>Ao,TypeTagU128:()=>So,TypeTagU16:()=>$a,TypeTagU256:()=>Ma,TypeTagU32:()=>Ua,TypeTagU64:()=>xo,TypeTagU8:()=>Ki,TypeTagVector:()=>qa,UserTransaction:()=>xh,WriteSet:()=>Xx});var lm={};Yl(lm,{Deserializer:()=>ph,Serializer:()=>En,bcsSerializeBool:()=>Gx,bcsSerializeBytes:()=>Lo,bcsSerializeFixedBytes:()=>Vx,bcsSerializeStr:()=>Wx,bcsSerializeU128:()=>Fx,bcsSerializeU16:()=>zx,bcsSerializeU32:()=>jx,bcsSerializeU8:()=>f0,bcsSerializeUint64:()=>Hx,bcsToBytes:()=>Yi,deserializeVector:()=>ri,serializeVector:()=>Hr,serializeVectorWithFunc:()=>Lx});var qx=2**8-1,Nx=2**16-1,mc=2**32-1,hc=BigInt(2**64)-BigInt(1),dm=BigInt(2**128)-BigInt(1),Dx=BigInt(2**256)-BigInt(1),En=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(t){for(;this.buffer.byteLength<this.offset+t;){const n=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(n).set(new Uint8Array(this.buffer)),this.buffer=n}}serialize(t){this.ensureBufferWillHandleSize(t.length),new Uint8Array(this.buffer,this.offset).set(t),this.offset+=t.length}serializeWithFunction(t,n,r){this.ensureBufferWillHandleSize(n);const i=new DataView(this.buffer,this.offset);t.apply(i,[0,r,!0]),this.offset+=n}serializeStr(t){const n=new TextEncoder;this.serializeBytes(n.encode(t))}serializeBytes(t){this.serializeU32AsUleb128(t.length),this.serialize(t)}serializeFixedBytes(t){this.serialize(t)}serializeBool(t){if(typeof t!="boolean")throw new Error("Value needs to be a boolean");const n=t?1:0;this.serialize(new Uint8Array([n]))}serializeU8(t){this.serialize(new Uint8Array([t]))}serializeU16(t){this.serializeWithFunction(DataView.prototype.setUint16,2,t)}serializeU32(t){this.serializeWithFunction(DataView.prototype.setUint32,4,t)}serializeU64(t){const n=BigInt(t.toString())&BigInt(mc),r=BigInt(t.toString())>>BigInt(32);this.serializeU32(Number(n)),this.serializeU32(Number(r))}serializeU128(t){const n=BigInt(t.toString())&hc,r=BigInt(t.toString())>>BigInt(64);this.serializeU64(n),this.serializeU64(r)}serializeU256(t){const n=BigInt(t.toString())&dm,r=BigInt(t.toString())>>BigInt(128);this.serializeU128(n),this.serializeU128(r)}serializeU32AsUleb128(t){let n=t;const r=[];for(;n>>>7;)r.push(n&127|128),n>>>=7;r.push(n),this.serialize(new Uint8Array(r))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};en([bo(0,qx)],En.prototype,"serializeU8",1);en([bo(0,Nx)],En.prototype,"serializeU16",1);en([bo(0,mc)],En.prototype,"serializeU32",1);en([bo(BigInt(0),hc)],En.prototype,"serializeU64",1);en([bo(BigInt(0),dm)],En.prototype,"serializeU128",1);en([bo(BigInt(0),Dx)],En.prototype,"serializeU256",1);en([bo(0,mc)],En.prototype,"serializeU32AsUleb128",1);function bo(e,t,n){return(r,i,s)=>{const o=s.value;return s.value=function(c){const u=BigInt(c.toString());if(u>BigInt(t.toString())||u<BigInt(e.toString()))throw new Error(n||"Value is out of range");o.apply(this,[c])},s}}var ph=class{constructor(t){this.buffer=new ArrayBuffer(t.length),new Uint8Array(this.buffer).set(t,0),this.offset=0}read(t){if(this.offset+t>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const n=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,n}deserializeStr(){const t=this.deserializeBytes();return new TextDecoder().decode(t)}deserializeBytes(){const t=this.deserializeUleb128AsU32();return new Uint8Array(this.read(t))}deserializeFixedBytes(t){return new Uint8Array(this.read(t))}deserializeBool(){const t=new Uint8Array(this.read(1))[0];if(t!==1&&t!==0)throw new Error("Invalid boolean value");return t===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const t=this.deserializeU32(),n=this.deserializeU32();return BigInt(BigInt(n)<<BigInt(32)|BigInt(t))}deserializeU128(){const t=this.deserializeU64(),n=this.deserializeU64();return BigInt(n<<BigInt(64)|t)}deserializeU256(){const t=this.deserializeU128(),n=this.deserializeU128();return BigInt(n<<BigInt(128)|t)}deserializeUleb128AsU32(){let t=BigInt(0),n=0;for(;t<mc;){const r=this.deserializeU8();if(t|=BigInt(r&127)<<BigInt(n),!(r&128))break;n+=7}if(t>mc)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(t)}};function Hr(e,t){t.serializeU32AsUleb128(e.length),e.forEach(n=>{n.serialize(t)})}function Lx(e,t){const n=new En;n.serializeU32AsUleb128(e.length);const r=n[t];return e.forEach(i=>{r.call(n,i)}),n.getBytes()}function ri(e,t){const n=e.deserializeUleb128AsU32(),r=[];for(let i=0;i<n;i+=1)r.push(t.deserialize(e));return r}function Yi(e){const t=new En;return e.serialize(t),t.getBytes()}function Hx(e){const t=new En;return t.serializeU64(e),t.getBytes()}function f0(e){const t=new En;return t.serializeU8(e),t.getBytes()}function zx(e){const t=new En;return t.serializeU16(e),t.getBytes()}function jx(e){const t=new En;return t.serializeU32(e),t.getBytes()}function Fx(e){const t=new En;return t.serializeU128(e),t.getBytes()}function Gx(e){const t=new En;return t.serializeBool(e),t.getBytes()}function Wx(e){const t=new En;return t.serializeStr(e),t.getBytes()}function Lo(e){const t=new En;return t.serializeBytes(e),t.getBytes()}function Vx(e){const t=new En;return t.serializeFixedBytes(e),t.getBytes()}var Xr=class{constructor(t){if(t.length!==Xr.LENGTH)throw new Error("Expected address of length 32");this.address=t}static fromHex(t){let n=it.ensure(t);n.noPrefix().length%2!==0&&(n=new it(`0${n.noPrefix()}`));const r=n.toUint8Array();if(r.length>Xr.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(r.length===Xr.LENGTH)return new Xr(r);const i=new Uint8Array(Xr.LENGTH);return i.set(r,Xr.LENGTH-r.length),new Xr(i)}static isValid(t){if(t==="")return!1;let n=it.ensure(t);return n.noPrefix().length%2!==0&&(n=new it(`0${n.noPrefix()}`)),n.toUint8Array().length<=Xr.LENGTH}toHexString(){return it.fromUint8Array(this.address).hex()}serialize(t){t.serializeFixedBytes(this.address)}static deserialize(t){return new Xr(t.deserializeFixedBytes(Xr.LENGTH))}},_n=Xr;_n.LENGTH=32;_n.CORE_CODE_ADDRESS=Xr.fromHex("0x1");var Du=class{constructor(t){if(t.length!==Du.LENGTH)throw new Error(`Ed25519PublicKey length should be ${Du.LENGTH}`);this.value=t}toBytes(){return this.value}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const n=t.deserializeBytes();return new Du(n)}},Yr=Du;Yr.LENGTH=32;var Lu=class{constructor(t){if(this.value=t,t.length!==Lu.LENGTH)throw new Error(`Ed25519Signature length should be ${Lu.LENGTH}`)}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const n=t.deserializeBytes();return new Lu(n)}},ki=Lu;ki.LENGTH=64;var h0=32,Hc=class{constructor(t,n){if(this.public_keys=t,this.threshold=n,n>h0)throw new Error(`"threshold" cannot be larger than ${h0}`)}toBytes(){const t=new Uint8Array(this.public_keys.length*Yr.LENGTH+1);return this.public_keys.forEach((n,r)=>{t.set(n.value,r*Yr.LENGTH)}),t[this.public_keys.length*Yr.LENGTH]=this.threshold,t}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const n=t.deserializeBytes(),r=n[n.length-1],i=[];for(let s=0;s<n.length-1;s+=Yr.LENGTH){const o=s;i.push(new Yr(n.subarray(o,o+Yr.LENGTH)))}return new Hc(i,r)}},tc=class{constructor(t,n){if(this.signatures=t,this.bitmap=n,n.length!==tc.BITMAP_LEN)throw new Error(`"bitmap" length should be ${tc.BITMAP_LEN}`)}toBytes(){const t=new Uint8Array(this.signatures.length*ki.LENGTH+tc.BITMAP_LEN);return this.signatures.forEach((n,r)=>{t.set(n.value,r*ki.LENGTH)}),t.set(this.bitmap,this.signatures.length*ki.LENGTH),t}static createBitmap(t){const r=new Uint8Array([0,0,0,0]),i=new Set;return t.forEach(s=>{if(s>=h0)throw new Error(`Invalid bit value ${s}.`);if(i.has(s))throw new Error("Duplicated bits detected.");i.add(s);const o=Math.floor(s/8);let a=r[o];a|=128>>s%8,r[o]=a}),r}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const n=t.deserializeBytes(),r=n.subarray(n.length-4),i=[];for(let s=0;s<n.length-r.length;s+=ki.LENGTH){const o=s;i.push(new ki(n.subarray(o,o+ki.LENGTH)))}return new tc(i,r)}},ed=tc;ed.BITMAP_LEN=4;var zc=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return td.load(t);case 1:return nd.load(t);case 2:return gh.load(t);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${n}`)}}},td=class extends zc{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=Yr.deserialize(t),r=ki.deserialize(t);return new td(n,r)}},nd=class extends zc{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=Hc.deserialize(t),r=ed.deserialize(t);return new nd(n,r)}},gh=class extends zc{constructor(t,n,r){super(),this.sender=t,this.secondary_signer_addresses=n,this.secondary_signers=r}serialize(t){t.serializeU32AsUleb128(2),this.sender.serialize(t),Hr(this.secondary_signer_addresses,t),Hr(this.secondary_signers,t)}static load(t){const n=_c.deserialize(t),r=ri(t,_n),i=ri(t,_c);return new gh(n,r,i)}},_c=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return yh.load(t);case 1:return mh.load(t);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${n}`)}}},yh=class extends _c{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=Yr.deserialize(t),r=ki.deserialize(t);return new yh(n,r)}},mh=class extends _c{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=Hc.deserialize(t),r=ed.deserialize(t);return new mh(n,r)}},mr=class{constructor(t){this.value=t}serialize(t){t.serializeStr(this.value)}static deserialize(t){const n=t.deserializeStr();return new mr(n)}},tr=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return vo.load(t);case 1:return Ki.load(t);case 2:return xo.load(t);case 3:return So.load(t);case 4:return To.load(t);case 5:return _h.load(t);case 6:return qa.load(t);case 7:return Ao.load(t);case 8:return $a.load(t);case 9:return Ua.load(t);case 10:return Ma.load(t);default:throw new Error(`Unknown variant index for TypeTag: ${n}`)}}},vo=class extends tr{serialize(t){t.serializeU32AsUleb128(0)}static load(t){return new vo}},Ki=class extends tr{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new Ki}},$a=class extends tr{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new $a}},Ua=class extends tr{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new Ua}},xo=class extends tr{serialize(t){t.serializeU32AsUleb128(2)}static load(t){return new xo}},So=class extends tr{serialize(t){t.serializeU32AsUleb128(3)}static load(t){return new So}},Ma=class extends tr{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new Ma}},To=class extends tr{serialize(t){t.serializeU32AsUleb128(4)}static load(t){return new To}},_h=class extends tr{serialize(t){t.serializeU32AsUleb128(5)}static load(t){return new _h}},qa=class extends tr{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),this.value.serialize(t)}static load(t){const n=tr.deserialize(t);return new qa(n)}},Ao=class extends tr{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),this.value.serialize(t)}static load(t){const n=ha.deserialize(t);return new Ao(n)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===_n.fromHex("0x1").toHexString()}},ha=class{constructor(t,n,r,i){this.address=t,this.module_name=n,this.name=r,this.type_args=i}static fromString(t){if(t.includes("<"))throw new Error("Not implemented");const n=t.split("::");if(n.length!==3)throw new Error("Invalid struct tag string literal.");return new ha(_n.fromHex(n[0]),new mr(n[1]),new mr(n[2]),[])}serialize(t){this.address.serialize(t),this.module_name.serialize(t),this.name.serialize(t),Hr(this.type_args,t)}static deserialize(t){const n=_n.deserialize(t),r=mr.deserialize(t),i=mr.deserialize(t),s=ri(t,tr);return new ha(n,r,i,s)}},Na=class{constructor(t,n,r,i,s,o,a){this.sender=t,this.sequence_number=n,this.payload=r,this.max_gas_amount=i,this.gas_unit_price=s,this.expiration_timestamp_secs=o,this.chain_id=a}serialize(t){this.sender.serialize(t),t.serializeU64(this.sequence_number),this.payload.serialize(t),t.serializeU64(this.max_gas_amount),t.serializeU64(this.gas_unit_price),t.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(t)}static deserialize(t){const n=_n.deserialize(t),r=t.deserializeU64(),i=Fc.deserialize(t),s=t.deserializeU64(),o=t.deserializeU64(),a=t.deserializeU64(),c=ad.deserialize(t);return new Na(n,r,i,s,o,a,c)}},rd=class{constructor(t,n,r){this.code=t,this.ty_args=n,this.args=r}serialize(t){t.serializeBytes(this.code),Hr(this.ty_args,t),Hr(this.args,t)}static deserialize(t){const n=t.deserializeBytes(),r=ri(t,tr),i=ri(t,wi);return new rd(n,r,i)}},no=class{constructor(t,n,r,i){this.module_name=t,this.function_name=n,this.ty_args=r,this.args=i}static natural(t,n,r,i){return new no(oo.fromStr(t),new mr(n),r,i)}static natual(t,n,r,i){return no.natural(t,n,r,i)}serialize(t){this.module_name.serialize(t),this.function_name.serialize(t),Hr(this.ty_args,t),t.serializeU32AsUleb128(this.args.length),this.args.forEach(n=>{t.serializeBytes(n)})}static deserialize(t){const n=oo.deserialize(t),r=mr.deserialize(t),i=ri(t,tr),s=t.deserializeUleb128AsU32(),o=[];for(let c=0;c<s;c+=1)o.push(t.deserializeBytes());const a=o;return new no(n,r,i,a)}},wh=class{constructor(t){this.transaction_payload=t}serialize(t){t.serializeU32AsUleb128(0),this.transaction_payload.serialize(t)}static deserialize(t){return new wh(no.deserialize(t))}},bh=class{constructor(t,n){this.multisig_address=t,this.transaction_payload=n}serialize(t){this.multisig_address.serialize(t),this.transaction_payload===void 0?t.serializeBool(!1):(t.serializeBool(!0),this.transaction_payload.serialize(t))}static deserialize(t){const n=_n.deserialize(t),r=t.deserializeBool();let i;return r&&(i=wh.deserialize(t)),new bh(n,i)}},fm=class{constructor(t){this.code=t}serialize(t){t.serializeBytes(this.code)}static deserialize(t){const n=t.deserializeBytes();return new fm(n)}},oo=class{constructor(t,n){this.address=t,this.name=n}static fromStr(t){const n=t.split("::");if(n.length!==2)throw new Error("Invalid module id.");return new oo(_n.fromHex(new it(n[0])),new mr(n[1]))}serialize(t){this.address.serialize(t),this.name.serialize(t)}static deserialize(t){const n=_n.deserialize(t),r=mr.deserialize(t);return new oo(n,r)}},Kx=class{serialize(t){throw new Error("Not implemented.")}static deserialize(t){throw new Error("Not implemented.")}},Xx=class{serialize(t){throw new Error("Not implmented.")}static deserialize(t){throw new Error("Not implmented.")}},jc=class{constructor(t,n){this.raw_txn=t,this.authenticator=n}serialize(t){this.raw_txn.serialize(t),this.authenticator.serialize(t)}static deserialize(t){const n=Na.deserialize(t),r=zc.deserialize(t);return new jc(n,r)}},hm=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return id.load(t);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${n}`)}}},id=class extends hm{constructor(t,n){super(),this.raw_txn=t,this.secondary_signer_addresses=n}serialize(t){t.serializeU32AsUleb128(0),this.raw_txn.serialize(t),Hr(this.secondary_signer_addresses,t)}static load(t){const n=Na.deserialize(t),r=ri(t,_n);return new id(n,r)}},Fc=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return sd.load(t);case 2:return od.load(t);case 3:return vh.load(t);default:throw new Error(`Unknown variant index for TransactionPayload: ${n}`)}}},sd=class extends Fc{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){const n=rd.deserialize(t);return new sd(n)}},od=class extends Fc{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),this.value.serialize(t)}static load(t){const n=no.deserialize(t);return new od(n)}},vh=class extends Fc{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const n=bh.deserialize(t);return new vh(n)}},ad=class{constructor(t){this.value=t}serialize(t){t.serializeU8(this.value)}static deserialize(t){const n=t.deserializeU8();return new ad(n)}},wi=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return cd.load(t);case 1:return dd.load(t);case 2:return fd.load(t);case 3:return pd.load(t);case 4:return gd.load(t);case 5:return yd.load(t);case 6:return ud.load(t);case 7:return ld.load(t);case 8:return hd.load(t);default:throw new Error(`Unknown variant index for TransactionArgument: ${n}`)}}},cd=class extends wi{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),t.serializeU8(this.value)}static load(t){const n=t.deserializeU8();return new cd(n)}},ud=class extends wi{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),t.serializeU16(this.value)}static load(t){const n=t.deserializeU16();return new ud(n)}},ld=class extends wi{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),t.serializeU32(this.value)}static load(t){const n=t.deserializeU32();return new ld(n)}},dd=class extends wi{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(1),t.serializeU64(this.value)}static load(t){const n=t.deserializeU64();return new dd(n)}},fd=class extends wi{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),t.serializeU128(this.value)}static load(t){const n=t.deserializeU128();return new fd(n)}},hd=class extends wi{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(8),t.serializeU256(this.value)}static load(t){const n=t.deserializeU256();return new hd(n)}},pd=class extends wi{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const n=_n.deserialize(t);return new pd(n)}},gd=class extends wi{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(4),t.serializeBytes(this.value)}static load(t){const n=t.deserializeBytes();return new gd(n)}},yd=class extends wi{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(5),t.serializeBool(this.value)}static load(t){const n=t.deserializeBool();return new yd(n)}},pm=class{getHashSalt(){const t=la.create();return t.update("APTOS::Transaction"),t.digest()}static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return xh.load(t);default:throw new Error(`Unknown variant index for Transaction: ${n}`)}}},xh=class extends pm{constructor(t){super(),this.value=t}hash(){const t=la.create();return t.update(this.getHashSalt()),t.update(Yi(this)),t.digest()}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){return new xh(jc.deserialize(t))}},Gc=class{constructor(t){this.name=t}serialize(t){t.serializeStr(this.name)}static deserialize(t){const n=t.deserializeStr();return new Gc(n)}},Wc=class{constructor(t,n){this.name=t,this.type_tag=n}serialize(t){t.serializeStr(this.name),this.type_tag.serialize(t)}static deserialize(t){const n=t.deserializeStr(),r=tr.deserialize(t);return new Wc(n,r)}},md=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return _d.load(t);case 1:return pa.load(t);default:throw new Error(`Unknown variant index for TransactionPayload: ${n}`)}}},_d=class extends md{constructor(t,n,r,i,s){super(),this.name=t,this.doc=n,this.code=r,this.ty_args=i,this.args=s}serialize(t){t.serializeU32AsUleb128(0),t.serializeStr(this.name),t.serializeStr(this.doc),t.serializeBytes(this.code),Hr(this.ty_args,t),Hr(this.args,t)}static load(t){const n=t.deserializeStr(),r=t.deserializeStr(),i=t.deserializeBytes(),s=ri(t,Gc),o=ri(t,Wc);return new _d(n,r,i,s,o)}},pa=class extends md{constructor(t,n,r,i,s){super(),this.name=t,this.module_name=n,this.doc=r,this.ty_args=i,this.args=s}serialize(t){t.serializeU32AsUleb128(1),t.serializeStr(this.name),this.module_name.serialize(t),t.serializeStr(this.doc),Hr(this.ty_args,t),Hr(this.args,t)}static load(t){const n=t.deserializeStr(),r=oo.deserialize(t),i=t.deserializeStr(),s=ri(t,Gc),o=ri(t,Wc);return new pa(n,r,i,s,o)}},Ho=class{constructor(t){if(t.length!==Ho.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=t}static fromMultiEd25519PublicKey(t){const n=t.toBytes(),r=new Uint8Array(n.length+1);r.set(n),r.set([Ho.MULTI_ED25519_SCHEME],n.length);const i=la.create();return i.update(r),new Ho(i.digest())}static fromEd25519PublicKey(t){const n=t.value,r=new Uint8Array(n.length+1);r.set(n),r.set([Ho.ED25519_SCHEME],n.length);const i=la.create();return i.update(r),new Ho(i.digest())}derivedAddress(){return it.fromUint8Array(this.bytes)}},ao=Ho;ao.LENGTH=32;ao.MULTI_ED25519_SCHEME=1;ao.ED25519_SCHEME=0;ao.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var Zx=class{constructor(t,n,r,i,s,o,a){this.accountAddress=t,this.moduleName=n,this.structName=r,this.sequenceNumber=i,this.originator=s,this.currentAuthKey=o,this.newPublicKey=a}serialize(t){this.accountAddress.serialize(t),t.serializeStr(this.moduleName),t.serializeStr(this.structName),t.serializeU64(this.sequenceNumber),this.originator.serialize(t),this.currentAuthKey.serialize(t),t.serializeBytes(this.newPublicKey)}},Hu=class{static fromAptosAccountObject(t){return new Hu(it.ensure(t.privateKeyHex).toUint8Array(),t.address)}static fromDerivePath(t,n){if(!Hu.isValidPath(t))throw new Error("Invalid derivation path");const r=n.trim().split(/\s+/).map(s=>s.toLowerCase()).join(" "),{key:i}=sm(t,Ry(wy(r)));return new Hu(i)}constructor(t,n){t?this.signingKey=Os.sign.keyPair.fromSeed(t.slice(0,32)):this.signingKey=Os.sign.keyPair(),this.accountAddress=it.ensure(n||this.authKey().hex())}address(){return this.accountAddress}authKey(){const t=new Yr(this.signingKey.publicKey);return ao.fromEd25519PublicKey(t).derivedAddress()}static getResourceAccountAddress(t,n){const r=Yi(_n.fromHex(t)),i=new Uint8Array([...r,...n,ao.DERIVE_RESOURCE_ACCOUNT_SCHEME]),s=la.create();return s.update(i),it.fromUint8Array(s.digest())}pubKey(){return it.fromUint8Array(this.signingKey.publicKey)}signBuffer(t){const n=Os.sign(t,this.signingKey.secretKey);return it.fromUint8Array(n.slice(0,64))}signHexString(t){const n=it.ensure(t).toUint8Array();return this.signBuffer(n)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:it.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}},ga=Hu;ga.isValidPath=e=>!!/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(e);en([Ql()],ga.prototype,"authKey",1);function Ni(e){return e instanceof ga?e.address():it.ensure(e)}var Jx=`
    fragment TokenDataFields on current_token_datas {
  creator_address
  collection_name
  description
  metadata_uri
  name
  token_data_id_hash
  collection_data_id_hash
}
    `,Yx=`
    fragment CollectionDataFields on current_collection_datas {
  metadata_uri
  supply
  description
  collection_name
  collection_data_id_hash
  table_handle
  creator_address
}
    `,Qx=`
    query getAccountCoinsData($owner_address: String, $offset: Int, $limit: Int) {
  current_coin_balances(
    where: {owner_address: {_eq: $owner_address}}
    offset: $offset
    limit: $limit
  ) {
    amount
    coin_type
    coin_info {
      name
      decimals
      symbol
    }
  }
}
    `,e3=`
    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}
    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]
    offset: $offset
    limit: $limit
  ) {
    amount
    current_token_data {
      ...TokenDataFields
    }
    current_collection_data {
      ...CollectionDataFields
    }
    last_transaction_version
    property_version
  }
}
    ${Jx}
${Yx}`,t3=`
    query getAccountTokensCount($owner_address: String) {
  current_token_ownerships_aggregate(
    where: {owner_address: {_eq: $owner_address}, amount: {_gt: "0"}}
  ) {
    aggregate {
      count
    }
  }
}
    `,n3=`
    query getAccountTransactionsCount($address: String) {
  move_resources_aggregate(
    where: {address: {_eq: $address}}
    distinct_on: transaction_version
  ) {
    aggregate {
      count
    }
  }
}
    `,r3=`
    query getAccountTransactionsData($address: String, $limit: Int, $offset: Int) {
  move_resources(
    where: {address: {_eq: $address}}
    order_by: {transaction_version: desc}
    distinct_on: transaction_version
    limit: $limit
    offset: $offset
  ) {
    transaction_version
  }
}
    `,i3=`
    query getCurrentDelegatorBalancesCount($poolAddress: String) {
  current_delegator_balances_aggregate(
    where: {pool_type: {_eq: "active_shares"}, pool_address: {_eq: $poolAddress}, amount: {_gt: "0"}}
    distinct_on: delegator_address
  ) {
    aggregate {
      count
    }
  }
}
    `,s3=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,o3=`
    query getIndexerLedgerInfo {
  ledger_infos {
    chain_id
  }
}
    `,a3=`
    query getTokenActivities($idHash: String!, $offset: Int, $limit: Int) {
  token_activities(
    where: {token_data_id_hash: {_eq: $idHash}}
    order_by: {transaction_version: desc}
    offset: $offset
    limit: $limit
  ) {
    creator_address
    collection_name
    name
    token_data_id_hash
    collection_data_id_hash
    from_address
    to_address
    transaction_version
    transaction_timestamp
    property_version
    transfer_type
    event_sequence_number
    token_amount
  }
}
    `,c3=`
    query getTokenActivitiesCount($token_id: String) {
  token_activities_aggregate(where: {token_data_id_hash: {_eq: $token_id}}) {
    aggregate {
      count
    }
  }
}
    `,u3=`
    query getTokenData($token_id: String) {
  current_token_datas(where: {token_data_id_hash: {_eq: $token_id}}) {
    token_data_id_hash
    name
    collection_name
    creator_address
    default_properties
    largest_property_version
    maximum
    metadata_uri
    payee_address
    royalty_points_denominator
    royalty_points_numerator
    supply
  }
}
    `,l3=`
    query getTokenOwnersData($token_id: String, $property_version: numeric) {
  current_token_ownerships(
    where: {token_data_id_hash: {_eq: $token_id}, property_version: {_eq: $property_version}}
  ) {
    owner_address
  }
}
    `,d3=`
    query getTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,f3=`
    query getUserTransactions($limit: Int, $start_version: bigint, $offset: Int) {
  user_transactions(
    limit: $limit
    order_by: {version: desc}
    where: {version: {_lte: $start_version}}
    offset: $offset
  ) {
    version
  }
}
    `,li=class{constructor(t){this.endpoint=t}static validateAddress(t){if(t.length<66)throw new Error("Address needs to be 66 chars long.")}async queryIndexer(t){const{data:n}=await yi.post(this.endpoint,t);if(n.errors)throw new Error(`Indexer data error ${JSON.stringify(n.errors,null," ")}`);return n.data}async getIndexerLedgerInfo(){const t={query:o3};return this.queryIndexer(t)}async getAccountNFTs(t,n){const r=it.ensure(t).hex();li.validateAddress(r);const i={query:e3,variables:{address:r,offset:n==null?void 0:n.offset,limit:n==null?void 0:n.limit}};return this.queryIndexer(i)}async getTokenActivities(t,n){const r={query:a3,variables:{idHash:t,offset:n==null?void 0:n.offset,limit:n==null?void 0:n.limit}};return this.queryIndexer(r)}async getAccountCoinsData(t,n){const r=it.ensure(t).hex();li.validateAddress(r);const i={query:Qx,variables:{owner_address:r,offset:n==null?void 0:n.offset,limit:n==null?void 0:n.limit}};return this.queryIndexer(i)}async getAccountTokensCount(t){const n=it.ensure(t).hex();li.validateAddress(n);const r={query:t3,variables:{owner_address:n}};return this.queryIndexer(r)}async getAccountTransactionsCount(t){const n=it.ensure(t).hex();li.validateAddress(n);const r={query:n3,variables:{address:n}};return this.queryIndexer(r)}async getAccountTransactionsData(t,n){const r=it.ensure(t).hex();li.validateAddress(r);const i={query:r3,variables:{address:r,offset:n==null?void 0:n.offset,limit:n==null?void 0:n.limit}};return this.queryIndexer(i)}async getDelegatedStakingActivities(t,n){const r=it.ensure(t).hex(),i=it.ensure(n).hex();li.validateAddress(r),li.validateAddress(i);const s={query:s3,variables:{delegatorAddress:r,poolAddress:i}};return this.queryIndexer(s)}async getTokenActivitiesCount(t){const n={query:c3,variables:{token_id:t}};return this.queryIndexer(n)}async getTokenData(t){const n={query:u3,variables:{token_id:t}};return this.queryIndexer(n)}async getTokenOwnersData(t,n){const r={query:l3,variables:{token_id:t,property_version:n}};return this.queryIndexer(r)}async getTopUserTransactions(t){const n={query:d3,variables:{limit:t}};return this.queryIndexer(n)}async getUserTransactions(t,n){const r={query:f3,variables:{start_version:t,offset:n==null?void 0:n.offset,limit:n==null?void 0:n.limit}};return this.queryIndexer(r)}async getCurrentDelegatorBalancesCount(t){const n=it.ensure(t).hex();li.validateAddress(n);const r={query:i3,variables:{poolAddress:n}};return this.queryIndexer(r)}},gm={};Yl(gm,{$AccountData:()=>k3,$AccountSignature:()=>B3,$AccountSignature_Ed25519Signature:()=>R3,$AccountSignature_MultiEd25519Signature:()=>P3,$Address:()=>O3,$AptosError:()=>I3,$AptosErrorCode:()=>C3,$Block:()=>$3,$BlockMetadataTransaction:()=>U3,$DecodedTableData:()=>M3,$DeleteModule:()=>N3,$DeleteResource:()=>D3,$DeleteTableItem:()=>L3,$DeletedTableData:()=>q3,$DirectWriteSet:()=>H3,$Ed25519Signature:()=>z3,$EncodeSubmissionRequest:()=>j3,$EntryFunctionId:()=>F3,$EntryFunctionPayload:()=>G3,$Event:()=>W3,$EventGuid:()=>V3,$GasEstimation:()=>K3,$GenesisPayload:()=>X3,$GenesisPayload_WriteSetPayload:()=>Z3,$GenesisTransaction:()=>J3,$HashValue:()=>Y3,$HealthCheckSuccess:()=>Q3,$HexEncodedBytes:()=>e4,$IdentifierWrapper:()=>t4,$IndexResponse:()=>n4,$ModuleBundlePayload:()=>r4,$MoveAbility:()=>i4,$MoveFunction:()=>s4,$MoveFunctionGenericTypeParam:()=>o4,$MoveFunctionVisibility:()=>a4,$MoveModule:()=>c4,$MoveModuleBytecode:()=>u4,$MoveModuleId:()=>l4,$MoveResource:()=>d4,$MoveScriptBytecode:()=>f4,$MoveStruct:()=>h4,$MoveStructField:()=>p4,$MoveStructGenericTypeParam:()=>g4,$MoveStructTag:()=>y4,$MoveStructValue:()=>m4,$MoveType:()=>_4,$MoveValue:()=>w4,$MultiAgentSignature:()=>b4,$MultiEd25519Signature:()=>v4,$MultisigPayload:()=>x4,$MultisigTransactionPayload:()=>S4,$PendingTransaction:()=>T4,$RawTableItemRequest:()=>A4,$RoleType:()=>E4,$ScriptPayload:()=>k4,$ScriptWriteSet:()=>B4,$StateCheckpointTransaction:()=>R4,$StateKeyWrapper:()=>P4,$SubmitTransactionRequest:()=>O4,$TableItemRequest:()=>I4,$Transaction:()=>C4,$TransactionPayload:()=>D4,$TransactionPayload_EntryFunctionPayload:()=>L4,$TransactionPayload_ModuleBundlePayload:()=>H4,$TransactionPayload_MultisigPayload:()=>z4,$TransactionPayload_ScriptPayload:()=>j4,$TransactionSignature:()=>W4,$TransactionSignature_Ed25519Signature:()=>V4,$TransactionSignature_MultiAgentSignature:()=>K4,$TransactionSignature_MultiEd25519Signature:()=>X4,$Transaction_BlockMetadataTransaction:()=>$4,$Transaction_GenesisTransaction:()=>U4,$Transaction_PendingTransaction:()=>M4,$Transaction_StateCheckpointTransaction:()=>q4,$Transaction_UserTransaction:()=>N4,$TransactionsBatchSingleSubmissionFailure:()=>F4,$TransactionsBatchSubmissionResult:()=>G4,$U128:()=>Z4,$U256:()=>J4,$U64:()=>Y4,$UserTransaction:()=>Q4,$VersionedEvent:()=>e5,$ViewRequest:()=>t5,$WriteModule:()=>n5,$WriteResource:()=>r5,$WriteSet:()=>i5,$WriteSetChange:()=>a5,$WriteSetChange_DeleteModule:()=>c5,$WriteSetChange_DeleteResource:()=>u5,$WriteSetChange_DeleteTableItem:()=>l5,$WriteSetChange_WriteModule:()=>d5,$WriteSetChange_WriteResource:()=>f5,$WriteSetChange_WriteTableItem:()=>h5,$WriteSetPayload:()=>p5,$WriteSet_DirectWriteSet:()=>s5,$WriteSet_ScriptWriteSet:()=>o5,$WriteTableItem:()=>g5,AccountsService:()=>Sm,ApiError:()=>wc,AptosErrorCode:()=>Om,AptosGeneratedClient:()=>Pm,BaseHttpRequest:()=>ym,BlocksService:()=>Tm,CancelError:()=>mm,CancelablePromise:()=>_m,EventsService:()=>Am,GeneralService:()=>Em,MoveFunctionVisibility:()=>Im,OpenAPI:()=>E3,RoleType:()=>Cm,TablesService:()=>km,TransactionsService:()=>Bm,ViewService:()=>Rm});var ym=class{constructor(t){this.config=t}},wc=class extends Error{constructor(t,n,r){super(r),this.name="ApiError",this.url=n.url,this.status=n.status,this.statusText=n.statusText,this.body=n.body,this.request=t}},mm=class extends Error{constructor(t){super(t),this.name="CancelError"}get isCancelled(){return!0}},_m=class{constructor(t){this._isResolved=!1,this._isRejected=!1,this._isCancelled=!1,this._cancelHandlers=[],this._promise=new Promise((n,r)=>{this._resolve=n,this._reject=r;const i=a=>{var c;this._isResolved||this._isRejected||this._isCancelled||(this._isResolved=!0,(c=this._resolve)==null||c.call(this,a))},s=a=>{var c;this._isResolved||this._isRejected||this._isCancelled||(this._isRejected=!0,(c=this._reject)==null||c.call(this,a))},o=a=>{this._isResolved||this._isRejected||this._isCancelled||this._cancelHandlers.push(a)};return Object.defineProperty(o,"isResolved",{get:()=>this._isResolved}),Object.defineProperty(o,"isRejected",{get:()=>this._isRejected}),Object.defineProperty(o,"isCancelled",{get:()=>this._isCancelled}),t(i,s,o)})}then(t,n){return this._promise.then(t,n)}catch(t){return this._promise.catch(t)}finally(t){return this._promise.finally(t)}cancel(){var t;if(!(this._isResolved||this._isRejected||this._isCancelled)){if(this._isCancelled=!0,this._cancelHandlers.length)try{for(const n of this._cancelHandlers)n()}catch(n){console.warn("Cancellation threw an error",n);return}this._cancelHandlers.length=0,(t=this._reject)==null||t.call(this,new mm("Request aborted"))}}get isCancelled(){return this._isCancelled}},wm=class{constructor(t=new Map){this.jar=t}setCookie(t,n){var r;const i=t.origin.toLowerCase();this.jar.has(i)||this.jar.set(i,[]);const s=wm.parse(n);this.jar.set(i,[...((r=this.jar.get(i))==null?void 0:r.filter(o=>o.name!==s.name))||[],s])}getCookies(t){var n;const r=t.origin.toLowerCase();return this.jar.get(r)?((n=this.jar.get(r))==null?void 0:n.filter(i=>!i.expires||i.expires>new Date))||[]:[]}static parse(t){if(typeof t!="string")throw new Error("argument str must be a string");const n=t.split(";").map(i=>i.trim());let r;if(n.length>0){const[i,s]=n[0].split("=");if(!i||!s)throw new Error("Invalid cookie");r={name:i,value:s}}else throw new Error("Invalid cookie");return n.slice(1).forEach(i=>{const[s,o]=i.split("=");if(!s.trim())throw new Error("Invalid cookie");const a=s.toLowerCase(),c=(o==null?void 0:o.charAt(0))==="'"||(o==null?void 0:o.charAt(0))==='"'?o==null?void 0:o.slice(1,-1):o;if(a==="expires"&&(r.expires=new Date(c)),a==="path"&&(r.path=c),a==="samesite"){if(c!=="Lax"&&c!=="None"&&c!=="Strict")throw new Error("Invalid cookie SameSite value");r.sameSite=c}a==="secure"&&(r.secure=!0)}),r}},bm=new wm;yi.interceptors.response.use(e=>(Array.isArray(e.headers["set-cookie"])&&e.headers["set-cookie"].forEach(t=>{bm.setCookie(new URL(e.config.url),t)}),e));yi.interceptors.request.use(function(e){const t=bm.getCookies(new URL(e.url));return(t==null?void 0:t.length)>0&&e.headers&&(e.headers.cookie=t.map(n=>`${n.name}=${n.value}`).join("; ")),e});var Sh=e=>e!=null,wd=e=>typeof e=="string",Mf=e=>wd(e)&&e!=="",vm=e=>typeof e=="object"&&typeof e.type=="string"&&typeof e.stream=="function"&&typeof e.arrayBuffer=="function"&&typeof e.constructor=="function"&&typeof e.constructor.name=="string"&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag]),h3=e=>e instanceof Jl,p3=e=>e>=200&&e<300,g3=e=>btoa(e),y3=e=>{const t=[],n=(i,s)=>{t.push(`${encodeURIComponent(i)}=${encodeURIComponent(String(s))}`)},r=(i,s)=>{Sh(s)&&(Array.isArray(s)?s.forEach(o=>{r(i,o)}):typeof s=="object"?Object.entries(s).forEach(([o,a])=>{r(`${i}[${o}]`,a)}):n(i,s))};return Object.entries(e).forEach(([i,s])=>{r(i,s)}),t.length>0?`?${t.join("&")}`:""},m3=(e,t)=>{const n=e.ENCODE_PATH||encodeURI,r=t.url.replace("{api-version}",e.VERSION).replace(/{(.*?)}/g,(s,o)=>{var a;return(a=t.path)!=null&&a.hasOwnProperty(o)?n(String(t.path[o])):s}),i=`${e.BASE}${r}`;return t.query?`${i}${y3(t.query)}`:i},_3=e=>{if(e.formData){const t=new Jl,n=(r,i)=>{wd(i)||vm(i)?t.append(r,i):t.append(r,JSON.stringify(i))};return Object.entries(e.formData).filter(([r,i])=>Sh(i)).forEach(([r,i])=>{Array.isArray(i)?i.forEach(s=>n(r,s)):n(r,i)}),t}},hu=async(e,t)=>typeof t=="function"?t(e):t,w3=async(e,t,n)=>{const r=await hu(t,e.TOKEN),i=await hu(t,e.USERNAME),s=await hu(t,e.PASSWORD),o=await hu(t,e.HEADERS),a=typeof(n==null?void 0:n.getHeaders)=="function"&&(n==null?void 0:n.getHeaders())||{},c=Object.entries({Accept:"application/json",...o,...t.headers,...a}).filter(([u,d])=>Sh(d)).reduce((u,[d,l])=>({...u,[d]:String(l)}),{});if(Mf(r)&&(c.Authorization=`Bearer ${r}`),Mf(i)&&Mf(s)){const u=g3(`${i}:${s}`);c.Authorization=`Basic ${u}`}return t.body&&(t.mediaType?c["Content-Type"]=t.mediaType:vm(t.body)?c["Content-Type"]=t.body.type||"application/octet-stream":wd(t.body)?c["Content-Type"]="text/plain":h3(t.body)||(c["Content-Type"]="application/json")),c},b3=e=>{if(e.body)return e.body},v3=async(e,t,n,r,i,s,o)=>{const a=yi.CancelToken.source(),c={url:n,headers:s,data:r??i,method:t.method,withCredentials:e.WITH_CREDENTIALS,cancelToken:a.token};Object.keys(e.HEADERS||{}).filter(d=>d.toLowerCase()==="accept").map(d=>e.HEADERS[d]).includes("application/x-bcs")&&(c.responseType="arraybuffer"),o(()=>a.cancel("The user aborted a request."));try{return await yi.request(c)}catch(d){const l=d;if(l.response)return l.response;throw d}},x3=(e,t)=>{if(t){const n=e.headers[t];if(wd(n))return n}},S3=e=>{if(e.status!==204)return e.data},T3=(e,t)=>{const r={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...e.errors}[t.status];if(r)throw new wc(e,t,r);if(!t.ok)throw new wc(e,t,"Generic Error")},A3=(e,t)=>new _m(async(n,r,i)=>{try{const s=m3(e,t),o=_3(t),a=b3(t),c=await w3(e,t,o);if(!i.isCancelled){const u=await v3(e,t,s,a,o,c,i),d=S3(u),l=x3(u,t.responseHeader),f={url:s,ok:p3(u.status),status:u.status,statusText:u.statusText,body:l??d};T3(t,f);const p=f.body;try{p.__headers=u.headers}catch{}n(p)}}catch(s){r(s)}}),xm=class extends ym{constructor(t){super(t)}request(t){return A3(this.config,t)}},Sm=class{constructor(t){this.httpRequest=t}getAccount(t,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}",path:{address:t},query:{ledger_version:n}})}getAccountResources(t,n,r,i){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resources",path:{address:t},query:{ledger_version:n,start:r,limit:i}})}getAccountModules(t,n,r,i){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/modules",path:{address:t},query:{ledger_version:n,start:r,limit:i}})}getAccountResource(t,n,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resource/{resource_type}",path:{address:t,resource_type:n},query:{ledger_version:r}})}getAccountModule(t,n,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/module/{module_name}",path:{address:t,module_name:n},query:{ledger_version:r}})}},Tm=class{constructor(t){this.httpRequest=t}getBlockByHeight(t,n){return this.httpRequest.request({method:"GET",url:"/blocks/by_height/{block_height}",path:{block_height:t},query:{with_transactions:n}})}getBlockByVersion(t,n){return this.httpRequest.request({method:"GET",url:"/blocks/by_version/{version}",path:{version:t},query:{with_transactions:n}})}},Am=class{constructor(t){this.httpRequest=t}getEventsByCreationNumber(t,n,r,i){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{creation_number}",path:{address:t,creation_number:n},query:{start:r,limit:i}})}getEventsByEventHandle(t,n,r,i,s){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{event_handle}/{field_name}",path:{address:t,event_handle:n,field_name:r},query:{start:i,limit:s}})}},Em=class{constructor(t){this.httpRequest=t}spec(){return this.httpRequest.request({method:"GET",url:"/spec"})}healthy(t){return this.httpRequest.request({method:"GET",url:"/-/healthy",query:{duration_secs:t}})}getLedgerInfo(){return this.httpRequest.request({method:"GET",url:"/"})}},km=class{constructor(t){this.httpRequest=t}getTableItem(t,n,r){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/item",path:{table_handle:t},query:{ledger_version:r},body:n,mediaType:"application/json"})}getRawTableItem(t,n,r){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/raw_item",path:{table_handle:t},query:{ledger_version:r},body:n,mediaType:"application/json"})}},Bm=class{constructor(t){this.httpRequest=t}getTransactions(t,n){return this.httpRequest.request({method:"GET",url:"/transactions",query:{start:t,limit:n}})}submitTransaction(t){return this.httpRequest.request({method:"POST",url:"/transactions",body:t,mediaType:"application/json"})}getTransactionByHash(t){return this.httpRequest.request({method:"GET",url:"/transactions/by_hash/{txn_hash}",path:{txn_hash:t}})}getTransactionByVersion(t){return this.httpRequest.request({method:"GET",url:"/transactions/by_version/{txn_version}",path:{txn_version:t}})}getAccountTransactions(t,n,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/transactions",path:{address:t},query:{start:n,limit:r}})}submitBatchTransactions(t){return this.httpRequest.request({method:"POST",url:"/transactions/batch",body:t,mediaType:"application/json"})}simulateTransaction(t,n,r,i){return this.httpRequest.request({method:"POST",url:"/transactions/simulate",query:{estimate_max_gas_amount:n,estimate_gas_unit_price:r,estimate_prioritized_gas_unit_price:i},body:t,mediaType:"application/json"})}encodeSubmission(t){return this.httpRequest.request({method:"POST",url:"/transactions/encode_submission",body:t,mediaType:"application/json"})}estimateGasPrice(){return this.httpRequest.request({method:"GET",url:"/estimate_gas_price"})}},Rm=class{constructor(t){this.httpRequest=t}view(t,n){return this.httpRequest.request({method:"POST",url:"/view",query:{ledger_version:n},body:t,mediaType:"application/json"})}},Pm=class{constructor(t,n=xm){var r,i,s,o;this.request=new n({BASE:(r=t==null?void 0:t.BASE)!=null?r:"/v1",VERSION:(i=t==null?void 0:t.VERSION)!=null?i:"1.2.0",WITH_CREDENTIALS:(s=t==null?void 0:t.WITH_CREDENTIALS)!=null?s:!1,CREDENTIALS:(o=t==null?void 0:t.CREDENTIALS)!=null?o:"include",TOKEN:t==null?void 0:t.TOKEN,USERNAME:t==null?void 0:t.USERNAME,PASSWORD:t==null?void 0:t.PASSWORD,HEADERS:t==null?void 0:t.HEADERS,ENCODE_PATH:t==null?void 0:t.ENCODE_PATH}),this.accounts=new Sm(this.request),this.blocks=new Tm(this.request),this.events=new Am(this.request),this.general=new Em(this.request),this.tables=new km(this.request),this.transactions=new Bm(this.request),this.view=new Rm(this.request)}},E3={BASE:"/v1",VERSION:"1.2.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},Om=(e=>(e.ACCOUNT_NOT_FOUND="account_not_found",e.RESOURCE_NOT_FOUND="resource_not_found",e.MODULE_NOT_FOUND="module_not_found",e.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",e.VERSION_NOT_FOUND="version_not_found",e.TRANSACTION_NOT_FOUND="transaction_not_found",e.TABLE_ITEM_NOT_FOUND="table_item_not_found",e.BLOCK_NOT_FOUND="block_not_found",e.VERSION_PRUNED="version_pruned",e.BLOCK_PRUNED="block_pruned",e.INVALID_INPUT="invalid_input",e.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",e.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",e.VM_ERROR="vm_error",e.HEALTH_CHECK_FAILED="health_check_failed",e.MEMPOOL_IS_FULL="mempool_is_full",e.INTERNAL_ERROR="internal_error",e.WEB_FRAMEWORK_ERROR="web_framework_error",e.BCS_NOT_SUPPORTED="bcs_not_supported",e.API_DISABLED="api_disabled",e))(Om||{}),Im=(e=>(e.PRIVATE="private",e.PUBLIC="public",e.FRIEND="friend",e))(Im||{}),Cm=(e=>(e.VALIDATOR="validator",e.FULL_NODE="full_node",e))(Cm||{}),k3={description:`Account data

    A simplified version of the onchain Account resource`,properties:{sequence_number:{type:"U64",isRequired:!0},authentication_key:{type:"HexEncodedBytes",isRequired:!0}}},B3={type:"one-of",description:`Account signature scheme

    The account signature scheme allows you to have two types of accounts:

    1. A single Ed25519 key account, one private key
    2. A k-of-n multi-Ed25519 key account, multiple private keys, such that k-of-n must sign a transaction.`,contains:[{type:"AccountSignature_Ed25519Signature"},{type:"AccountSignature_MultiEd25519Signature"}]},R3={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},P3={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},O3={type:"string",description:`A hex encoded 32 byte Aptos account address.

    This is represented in a string as a 64 character hex string, sometimes
    shortened by stripping leading 0s, and adding a 0x.

    For example, address 0x0000000000000000000000000000000000000000000000000000000000000001 is represented as 0x1.
    `,format:"hex"},I3={description:`This is the generic struct we use for all API errors, it contains a string
    message and an Aptos API specific error code.`,properties:{message:{type:"string",description:"A message describing the error",isRequired:!0},error_code:{type:"AptosErrorCode",isRequired:!0},vm_error_code:{type:"number",description:"A code providing VM error details when submitting transactions to the VM",format:"uint64"}}},C3={type:"Enum"},$3={description:`A Block with or without transactions

    This contains the information about a transactions along with
    associated transactions if requested`,properties:{block_height:{type:"U64",isRequired:!0},block_hash:{type:"HashValue",isRequired:!0},block_timestamp:{type:"U64",isRequired:!0},first_version:{type:"U64",isRequired:!0},last_version:{type:"U64",isRequired:!0},transactions:{type:"array",contains:{type:"Transaction"}}}},U3={description:`A block metadata transaction

    This signifies the beginning of a block, and contains information
    about the specific block`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},id:{type:"HashValue",isRequired:!0},epoch:{type:"U64",isRequired:!0},round:{type:"U64",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0},previous_block_votes_bitvec:{type:"array",contains:{type:"number",format:"uint8"},isRequired:!0},proposer:{type:"Address",isRequired:!0},failed_proposer_indices:{type:"array",contains:{type:"number",format:"uint32"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},M3={description:"Decoded table data",properties:{key:{description:"Key of table in JSON",properties:{},isRequired:!0},key_type:{type:"string",description:"Type of key",isRequired:!0},value:{description:"Value of table in JSON",properties:{},isRequired:!0},value_type:{type:"string",description:"Type of value",isRequired:!0}}},q3={description:"Deleted table data",properties:{key:{description:"Deleted key",properties:{},isRequired:!0},key_type:{type:"string",description:"Deleted key type",isRequired:!0}}},N3={description:"Delete a module",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},module:{type:"MoveModuleId",isRequired:!0}}},D3={description:"Delete a resource",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},resource:{type:"MoveStructTag",isRequired:!0}}},L3={description:"Delete a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DeletedTableData"}}},H3={properties:{changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},z3={description:"A single Ed25519 signature",properties:{public_key:{type:"HexEncodedBytes",isRequired:!0},signature:{type:"HexEncodedBytes",isRequired:!0}}},j3={description:"Request to encode a submission",properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},secondary_signers:{type:"array",contains:{type:"Address"}}}},F3={type:"string",description:"Entry function id is string representation of a entry function defined on-chain.\n\n    Format: `{address}::{module name}::{function name}`\n\n    Both `module name` and `function name` are case-sensitive.\n    "},G3={description:"Payload which runs a single entry function",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},W3={description:"An event from a transaction",properties:{guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},V3={properties:{creation_number:{type:"U64",isRequired:!0},account_address:{type:"Address",isRequired:!0}}},K3={description:"Struct holding the outputs of the estimate gas API",properties:{deprioritized_gas_estimate:{type:"number",description:"The deprioritized estimate for the gas unit price",format:"uint64"},gas_estimate:{type:"number",description:"The current estimate for the gas unit price",isRequired:!0,format:"uint64"},prioritized_gas_estimate:{type:"number",description:"The prioritized estimate for the gas unit price",format:"uint64"}}},X3={type:"one-of",description:"The writeset payload of the Genesis transaction",contains:[{type:"GenesisPayload_WriteSetPayload"}]},Z3={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteSetPayload"}]},J3={description:`The genesis transaction

    This only occurs at the genesis transaction (version 0)`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},payload:{type:"GenesisPayload",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},Y3={type:"string"},Q3={description:"Representation of a successful healthcheck",properties:{message:{type:"string",isRequired:!0}}},e4={type:"string",description:"All bytes (Vec<u8>) data is represented as hex-encoded string prefixed with `0x` and fulfilled with\n    two hex digits per byte.\n\n    Unlike the `Address` type, HexEncodedBytes will not trim any zeros.\n    ",format:"hex"},t4={type:"string"},n4={description:`The struct holding all data returned to the client by the
    index endpoint (i.e., GET "/").  Only for responding in JSON`,properties:{chain_id:{type:"number",description:"Chain ID of the current chain",isRequired:!0,format:"uint8"},epoch:{type:"U64",isRequired:!0},ledger_version:{type:"U64",isRequired:!0},oldest_ledger_version:{type:"U64",isRequired:!0},ledger_timestamp:{type:"U64",isRequired:!0},node_role:{type:"RoleType",isRequired:!0},oldest_block_height:{type:"U64",isRequired:!0},block_height:{type:"U64",isRequired:!0},git_hash:{type:"string",description:`Git hash of the build of the API endpoint.  Can be used to determine the exact
            software version used by the API endpoint.`}}},r4={properties:{modules:{type:"array",contains:{type:"MoveModuleBytecode"},isRequired:!0}}},i4={type:"string"},s4={description:"Move function",properties:{name:{type:"IdentifierWrapper",isRequired:!0},visibility:{type:"MoveFunctionVisibility",isRequired:!0},is_entry:{type:"boolean",description:"Whether the function can be called as an entry function directly in a transaction",isRequired:!0},is_view:{type:"boolean",description:"Whether the function is a view function or not",isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveFunctionGenericTypeParam"},isRequired:!0},params:{type:"array",contains:{type:"MoveType"},isRequired:!0},return:{type:"array",contains:{type:"MoveType"},isRequired:!0}}},o4={description:"Move function generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},a4={type:"Enum"},c4={description:"A Move module",properties:{address:{type:"Address",isRequired:!0},name:{type:"IdentifierWrapper",isRequired:!0},friends:{type:"array",contains:{type:"MoveModuleId"},isRequired:!0},exposed_functions:{type:"array",contains:{type:"MoveFunction"},isRequired:!0},structs:{type:"array",contains:{type:"MoveStruct"},isRequired:!0}}},u4={description:"Move module bytecode along with it's ABI",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveModule"}}},l4={type:"string",description:`Move module id is a string representation of Move module.

    Format: \`{address}::{module name}\`

    \`address\` should be hex-encoded 32 byte account address that is prefixed with \`0x\`.

    Module name is case-sensitive.
    `},d4={description:"A parsed Move resource",properties:{type:{type:"MoveStructTag",isRequired:!0},data:{type:"MoveStructValue",isRequired:!0}}},f4={description:"Move script bytecode",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveFunction"}}},h4={description:"A move struct",properties:{name:{type:"IdentifierWrapper",isRequired:!0},is_native:{type:"boolean",description:"Whether the struct is a native struct of Move",isRequired:!0},abilities:{type:"array",contains:{type:"MoveAbility"},isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveStructGenericTypeParam"},isRequired:!0},fields:{type:"array",contains:{type:"MoveStructField"},isRequired:!0}}},p4={description:"Move struct field",properties:{name:{type:"IdentifierWrapper",isRequired:!0},type:{type:"MoveType",isRequired:!0}}},g4={description:"Move generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},y4={type:"string",description:"String representation of a MoveStructTag (on-chain Move struct type). This exists so you\n    can specify MoveStructTags as path / query parameters, e.g. for get_events_by_event_handle.\n\n    It is a combination of:\n    1. `move_module_address`, `module_name` and `struct_name`, all joined by `::`\n    2. `struct generic type parameters` joined by `, `\n\n    Examples:\n     * `0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>`\n     * `0x1::account::Account`\n\n    Note:\n    1. Empty chars should be ignored when comparing 2 struct tag ids.\n    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).\n\n    See [doc](https://aptos.dev/concepts/accounts) for more details.\n    ",pattern:"^0x[0-9a-zA-Z:_<>]+$"},m4={description:'This is a JSON representation of some data within an account resource. More specifically,\n    it is a map of strings to arbitrary JSON values / objects, where the keys are top level\n    fields within the given resource.\n\n    To clarify, you might query for 0x1::account::Account and see the example data.\n\n    Move `bool` type value is serialized into `boolean`.\n\n    Move `u8`, `u16` and `u32` type value is serialized into `integer`.\n\n    Move `u64`, `u128` and `u256` type value is serialized into `string`.\n\n    Move `address` type value (32 byte Aptos account address) is serialized into a HexEncodedBytes string.\n    For example:\n    - `0x1`\n    - `0x1668f6be25668c1a17cd8caf6b8d2f25`\n\n    Move `vector` type value is serialized into `array`, except `vector<u8>` which is serialized into a\n    HexEncodedBytes string with `0x` prefix.\n    For example:\n    - `vector<u64>{255, 255}` => `["255", "255"]`\n    - `vector<u8>{255, 255}` => `0xffff`\n\n    Move `struct` type value is serialized into `object` that looks like this (except some Move stdlib types, see the following section):\n    ```json\n    {\n        field1_name: field1_value,\n        field2_name: field2_value,\n        ......\n    }\n    ```\n\n    For example:\n    `{ "created": "0xa550c18", "role_id": "0" }`\n\n     **Special serialization for Move stdlib types**:\n    - [0x1::string::String](https://github.com/aptos-labs/aptos-core/blob/main/language/move-stdlib/docs/ascii.md)\n    is serialized into `string`. For example, struct value `0x1::string::String{bytes: b"Hello World!"}`\n    is serialized as `"Hello World!"` in JSON.\n    ',properties:{}},_4={type:"string",description:`String representation of an on-chain Move type tag that is exposed in transaction payload.
    Values:
    - bool
    - u8
    - u16
    - u32
    - u64
    - u128
    - u256
    - address
    - signer
    - vector: \`vector<{non-reference MoveTypeId}>\`
    - struct: \`{address}::{module_name}::{struct_name}::<{generic types}>\`

    Vector type value examples:
    - \`vector<u8>\`
    - \`vector<vector<u64>>\`
    - \`vector<0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>>\`

    Struct type value examples:
    - \`0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>
    - \`0x1::account::Account\`

    Note:
    1. Empty chars should be ignored when comparing 2 struct tag ids.
    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).
    `,pattern:"^(bool|u8|u64|u128|address|signer|vector<.+>|0x[0-9a-zA-Z:_<, >]+)$"},w4={type:"any-of",description:"An enum of the possible Move value types",contains:[{type:"number",format:"uint8"},{type:"number",format:"uint16"},{type:"number",format:"uint32"},{type:"U64"},{type:"U128"},{type:"U256"},{type:"boolean"},{type:"Address"},{type:"array",contains:{type:"MoveValue"}},{type:"HexEncodedBytes"},{type:"MoveStructValue"},{type:"string"}]},b4={description:`Multi agent signature for multi agent transactions

    This allows you to have transactions across multiple accounts`,properties:{sender:{type:"AccountSignature",isRequired:!0},secondary_signer_addresses:{type:"array",contains:{type:"Address"},isRequired:!0},secondary_signers:{type:"array",contains:{type:"AccountSignature"},isRequired:!0}}},v4={description:`A Ed25519 multi-sig signature

    This allows k-of-n signing for a transaction`,properties:{public_keys:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},signatures:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},threshold:{type:"number",description:"The number of signatures required for a successful transaction",isRequired:!0,format:"uint8"},bitmap:{type:"HexEncodedBytes",isRequired:!0}}},x4={description:`A multisig transaction that allows an owner of a multisig account to execute a pre-approved
    transaction as the multisig account.`,properties:{multisig_address:{type:"Address",isRequired:!0},transaction_payload:{type:"MultisigTransactionPayload"}}},S4={type:"any-of",contains:[{type:"EntryFunctionPayload"}]},T4={description:"A transaction waiting in mempool",properties:{hash:{type:"HashValue",isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"}}},A4={description:"Table Item request for the GetTableItemRaw API",properties:{key:{type:"HexEncodedBytes",isRequired:!0}}},E4={type:"Enum"},k4={description:"Payload which runs a script that can run multiple functions",properties:{code:{type:"MoveScriptBytecode",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},B4={properties:{execute_as:{type:"Address",isRequired:!0},script:{type:"ScriptPayload",isRequired:!0}}},R4={description:"A state checkpoint transaction",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},P4={type:"string",description:`Representation of a StateKey as a hex string. This is used for cursor based pagination.
    `},O4={description:`A request to submit a transaction

    This requires a transaction and a signature of it`,properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature",isRequired:!0}}},I4={description:"Table Item request for the GetTableItem API",properties:{key_type:{type:"MoveType",isRequired:!0},value_type:{type:"MoveType",isRequired:!0},key:{description:"The value of the table item's key",properties:{},isRequired:!0}}},C4={type:"one-of",description:"Enum of the different types of transactions in Aptos",contains:[{type:"Transaction_PendingTransaction"},{type:"Transaction_UserTransaction"},{type:"Transaction_GenesisTransaction"},{type:"Transaction_BlockMetadataTransaction"},{type:"Transaction_StateCheckpointTransaction"}]},$4={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"BlockMetadataTransaction"}]},U4={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"GenesisTransaction"}]},M4={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"PendingTransaction"}]},q4={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"StateCheckpointTransaction"}]},N4={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"UserTransaction"}]},D4={type:"one-of",description:"An enum of the possible transaction payloads",contains:[{type:"TransactionPayload_EntryFunctionPayload"},{type:"TransactionPayload_ScriptPayload"},{type:"TransactionPayload_ModuleBundlePayload"},{type:"TransactionPayload_MultisigPayload"}]},L4={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"EntryFunctionPayload"}]},H4={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ModuleBundlePayload"}]},z4={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultisigPayload"}]},j4={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptPayload"}]},F4={description:"Information telling which batch submission transactions failed",properties:{error:{type:"AptosError",isRequired:!0},transaction_index:{type:"number",description:"The index of which transaction failed, same as submission order",isRequired:!0,format:"uint64"}}},G4={description:`Batch transaction submission result

    Tells which transactions failed`,properties:{transaction_failures:{type:"array",contains:{type:"TransactionsBatchSingleSubmissionFailure"},isRequired:!0}}},W4={type:"one-of",description:"An enum representing the different transaction signatures available",contains:[{type:"TransactionSignature_Ed25519Signature"},{type:"TransactionSignature_MultiEd25519Signature"},{type:"TransactionSignature_MultiAgentSignature"}]},V4={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},K4={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiAgentSignature"}]},X4={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},Z4={type:"string",description:`A string containing a 128-bit unsigned integer.

    We represent u128 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u128s in JSON natively.
    `,format:"uint128"},J4={type:"string",description:`A string containing a 256-bit unsigned integer.

    We represent u256 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u256s in JSON natively.
    `,format:"uint256"},Y4={type:"string",description:`A string containing a 64-bit unsigned integer.

    We represent u64 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u64s in JSON natively.
    `,format:"uint64"},Q4={description:"A transaction submitted by a user to change the state of the blockchain",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"},events:{type:"array",contains:{type:"Event"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},e5={description:"An event from a transaction with a version",properties:{version:{type:"U64",isRequired:!0},guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},t5={description:"View request for the Move View Function API",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},n5={description:"Write a new module or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveModuleBytecode",isRequired:!0}}},r5={description:"Write a resource or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveResource",isRequired:!0}}},i5={type:"one-of",description:"The associated writeset with a payload",contains:[{type:"WriteSet_ScriptWriteSet"},{type:"WriteSet_DirectWriteSet"}]},s5={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DirectWriteSet"}]},o5={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptWriteSet"}]},a5={type:"one-of",description:"A final state change of a transaction on a resource or module",contains:[{type:"WriteSetChange_DeleteModule"},{type:"WriteSetChange_DeleteResource"},{type:"WriteSetChange_DeleteTableItem"},{type:"WriteSetChange_WriteModule"},{type:"WriteSetChange_WriteResource"},{type:"WriteSetChange_WriteTableItem"}]},c5={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteModule"}]},u5={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteResource"}]},l5={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteTableItem"}]},d5={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteModule"}]},f5={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteResource"}]},h5={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteTableItem"}]},p5={description:"A writeset payload, used only for genesis",properties:{write_set:{type:"WriteSet",isRequired:!0}}},g5={description:"Change set to write a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},value:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DecodedTableData"}}},y5=new ha(_n.fromHex("0x1"),new mr("string"),new mr("String"),[]);function bd(e,t,n){if(!(t!=null&&t.includes(typeof e)))throw new Error(n||`Invalid arg: ${e} type should be ${t instanceof Array?t.join(" or "):t}`)}function Fs(e){throw new Error(e)}function mg(e){return!!e.match(/\s/)}function _g(e){return!!e.match(/[_A-Za-z0-9]/g)}function m5(e,t){const n=e[t];if(n===":"){if(e.slice(t,t+2)==="::")return[["COLON","::"],2];Fs("Unrecognized token.")}else{if(n==="<")return[["LT","<"],1];if(n===">")return[["GT",">"],1];if(n===",")return[["COMMA",","],1];if(mg(n)){let r="";for(let i=t;i<e.length;i+=1){const s=e[i];if(mg(s))r=`${r}${s}`;else break}return[["SPACE",r],r.length]}else if(_g(n)){let r="";for(let i=t;i<e.length;i+=1){const s=e[i];if(_g(s))r=`${r}${s}`;else break}return[["IDENT",r],r.length]}}throw new Error("Unrecognized token.")}function _5(e){let t=0;const n=[];for(;t<e.length;){const[r,i]=m5(e,t);r[0]!=="SPACE"&&n.push(r),t+=i}return n}var vd=class{constructor(t){this.tokens=_5(t)}consume(t){const n=this.tokens.shift();(!n||n[1]!==t)&&Fs("Invalid type tag.")}parseCommaList(t,n){const r=[];for(this.tokens.length<=0&&Fs("Invalid type tag.");this.tokens[0][1]!==t&&(r.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===t||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===t&&n)));)this.tokens.length<=0&&Fs("Invalid type tag.");return r}parseTypeTag(){this.tokens.length===0&&Fs("Invalid type tag.");const[t,n]=this.tokens.shift();if(n==="u8")return new Ki;if(n==="u16")return new $a;if(n==="u32")return new Ua;if(n==="u64")return new xo;if(n==="u128")return new So;if(n==="u256")return new Ma;if(n==="bool")return new vo;if(n==="address")return new To;if(n==="vector"){this.consume("<");const r=this.parseTypeTag();return this.consume(">"),new qa(r)}if(t==="IDENT"&&(n.startsWith("0x")||n.startsWith("0X"))){const r=n;this.consume("::");const[i,s]=this.tokens.shift();i!=="IDENT"&&Fs("Invalid type tag."),this.consume("::");const[o,a]=this.tokens.shift();o!=="IDENT"&&Fs("Invalid type tag.");let c=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),c=this.parseCommaList(">",!0),this.consume(">"));const u=new ha(_n.fromHex(r),new mr(s),new mr(a),c);return new Ao(u)}throw new Error("Invalid type tag.")}};function $m(e){if(bd(e,["boolean","string"]),typeof e=="boolean")return e;if(e==="true")return!0;if(e==="false")return!1;throw new Error("Invalid boolean string.")}function ea(e){if(bd(e,["number","string"]),typeof e=="number")return e;const t=Number.parseInt(e,10);if(Number.isNaN(t))throw new Error("Invalid number string.");return t}function ta(e){return bd(e,["number","bigint","string"]),BigInt(e)}function Th(e,t,n){if(t instanceof vo){n.serializeBool($m(e));return}if(t instanceof Ki){n.serializeU8(ea(e));return}if(t instanceof $a){n.serializeU16(ea(e));return}if(t instanceof Ua){n.serializeU32(ea(e));return}if(t instanceof xo){n.serializeU64(ta(e));return}if(t instanceof So){n.serializeU128(ta(e));return}if(t instanceof Ma){n.serializeU256(ta(e));return}if(t instanceof To){let r;if(typeof e=="string"||e instanceof it)r=_n.fromHex(e);else if(e instanceof _n)r=e;else throw new Error("Invalid account address.");r.serialize(n);return}if(t instanceof qa){if(t.value instanceof Ki){if(e instanceof Uint8Array){n.serializeBytes(e);return}if(typeof e=="string"){n.serializeStr(e);return}}if(!Array.isArray(e))throw new Error("Invalid vector args.");n.serializeU32AsUleb128(e.length),e.forEach(r=>Th(r,t.value,n));return}if(t instanceof Ao){const{address:r,module_name:i,name:s}=t.value;if(`${it.fromUint8Array(r.address).toShortString()}::${i.value}::${s.value}`!="0x1::string::String")throw new Error("The only supported struct arg is of type 0x1::string::String");bd(e,["string"]),n.serializeStr(e);return}throw new Error("Unsupported arg type.")}function w5(e,t){if(t instanceof vo)return new yd($m(e));if(t instanceof Ki)return new cd(ea(e));if(t instanceof $a)return new ud(ea(e));if(t instanceof Ua)return new ld(ea(e));if(t instanceof xo)return new dd(ta(e));if(t instanceof So)return new fd(ta(e));if(t instanceof Ma)return new hd(ta(e));if(t instanceof To){let n;if(typeof e=="string"||e instanceof it)n=_n.fromHex(e);else if(e instanceof _n)n=e;else throw new Error("Invalid account address.");return new pd(n)}if(t instanceof qa&&t.value instanceof Ki){if(!(e instanceof Uint8Array))throw new Error(`${e} should be an instance of Uint8Array`);return new gd(e)}throw new Error("Unknown type for TransactionArgument.")}var b5="APTOS::RawTransaction",v5="APTOS::RawTransactionWithData",co=class{constructor(t,n){this.rawTxnBuilder=n,this.signingFunction=t}build(t,n,r){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(t,n,r)}static getSigningMessage(t){const n=la.create();if(t instanceof Na)n.update(b5);else if(t instanceof id)n.update(v5);else throw new Error("Unknown transaction type.");const r=n.digest(),i=Yi(t),s=new Uint8Array(r.length+i.length);return s.set(r),s.set(i,r.length),s}},zu=class extends co{constructor(t,n,r){super(t,r),this.publicKey=n}rawToSigned(t){const n=co.getSigningMessage(t),r=this.signingFunction(n),i=new td(new Yr(this.publicKey),r);return new jc(t,i)}sign(t){return Yi(this.rawToSigned(t))}},Um=class extends co{constructor(t,n){super(t),this.publicKey=n}rawToSigned(t){const n=co.getSigningMessage(t),r=this.signingFunction(n),i=new nd(this.publicKey,r);return new jc(t,i)}sign(t){return Yi(this.rawToSigned(t))}},al=class{constructor(t,n){this.abiMap=new Map,t.forEach(r=>{const i=new ph(r),s=md.deserialize(i);let o;if(s instanceof pa){const a=s,{address:c,name:u}=a.module_name;o=`${it.fromUint8Array(c.address).toShortString()}::${u.value}::${a.name}`}else o=s.name;if(this.abiMap.has(o))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(o,s)}),this.builderConfig={maxGasAmount:BigInt(om),expSecFromNow:am,...n}}static toBCSArgs(t,n){if(t.length!==n.length)throw new Error("Wrong number of args provided.");return n.map((r,i)=>{const s=new En;return Th(r,t[i].type_tag,s),s.getBytes()})}static toTransactionArguments(t,n){if(t.length!==n.length)throw new Error("Wrong number of args provided.");return n.map((r,i)=>w5(r,t[i].type_tag))}setSequenceNumber(t){this.builderConfig.sequenceNumber=BigInt(t)}buildTransactionPayload(t,n,r){const i=n.map(a=>new vd(a).parseTypeTag());let s;if(!this.abiMap.has(t))throw new Error(`Cannot find function: ${t}`);const o=this.abiMap.get(t);if(o instanceof pa){const a=o,c=al.toBCSArgs(a.args,r);s=new od(new no(a.module_name,new mr(a.name),i,c))}else if(o instanceof _d){const a=o,c=al.toTransactionArguments(a.args,r);s=new sd(new rd(a.code,i,c))}else throw new Error("Unknown ABI format.");return s}build(t,n,r){const{sender:i,sequenceNumber:s,gasUnitPrice:o,maxGasAmount:a,expSecFromNow:c,chainId:u}=this.builderConfig;if(!o)throw new Error("No gasUnitPrice provided.");const d=i instanceof _n?i:_n.fromHex(i),l=BigInt(Math.floor(Date.now()/1e3)+Number(c)),f=this.buildTransactionPayload(t,n,r);if(f)return new Na(d,BigInt(s),f,BigInt(a),BigInt(o),l,new ad(Number(u)));throw new Error("Invalid ABI.")}},dr=class{constructor(t,n){this.aptosClient=t,this.builderConfig=n}async fetchABI(t){const r=(await this.aptosClient.getAccountModules(t)).map(s=>s.abi).flatMap(s=>s.exposed_functions.filter(o=>o.is_entry).map(o=>({fullName:`${s.address}::${s.name}::${o.name}`,...o}))),i=new Map;return r.forEach(s=>{i.set(s.fullName,s)}),i}async build(t,n,r){if(t=(S=>S.replace(/^0[xX]0*/g,"0x"))(t),t.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coins::transfer");const[o,a]=t.split("::"),c=await this.fetchABI(o);if(!c.has(t))throw new Error(`${t} doesn't exist.`);const u=c.get(t),l=u.params.filter(S=>S!=="signer"&&S!=="&signer").map((S,T)=>new Wc(`var${T}`,new vd(S).parseTypeTag())),f=new pa(u.name,oo.fromStr(`${o}::${a}`),"",u.generic_type_params.map((S,T)=>new Gc(`${T}`)),l),{sender:p,..._}=this.builderConfig,y=p instanceof _n?it.fromUint8Array(p.address):p,[{sequence_number:b},B,{gas_estimate:E}]=await Promise.all([_!=null&&_.sequenceNumber?Promise.resolve({sequence_number:_==null?void 0:_.sequenceNumber}):this.aptosClient.getAccount(y),_!=null&&_.chainId?Promise.resolve(_==null?void 0:_.chainId):this.aptosClient.getChainId(),_!=null&&_.gasUnitPrice?Promise.resolve({gas_estimate:_==null?void 0:_.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new al([Yi(f)],{sender:p,sequenceNumber:b,chainId:B,gasUnitPrice:BigInt(E),..._}).build(t,n,r)}};en([Cx(10*60*1e3)],dr.prototype,"fetchABI",1);var nc=class{constructor(t,n,r=!1){if(!t)throw new Error("Node URL cannot be empty.");const i=n==null?{}:{...n};r?this.nodeUrl=t:this.nodeUrl=Ix(t),i.BASE=this.nodeUrl,(n==null?void 0:n.WITH_CREDENTIALS)===!1?i.WITH_CREDENTIALS=!1:i.WITH_CREDENTIALS=!0,this.client=new Pm(i)}async getAccount(t){return this.client.accounts.getAccount(it.ensure(t).hex())}async getAccountTransactions(t,n){var r;return this.client.transactions.getAccountTransactions(it.ensure(t).hex(),(r=n==null?void 0:n.start)==null?void 0:r.toString(),n==null?void 0:n.limit)}async getAccountModules(t,n){const r=this.client.accounts.getAccountModules.bind({httpRequest:this.client.request});return await yg(r,t,1e3,n)}async getAccountModule(t,n,r){var i;return this.client.accounts.getAccountModule(it.ensure(t).hex(),n,(i=r==null?void 0:r.ledgerVersion)==null?void 0:i.toString())}async getAccountResources(t,n){const r=this.client.accounts.getAccountResources.bind({httpRequest:this.client.request});return await yg(r,t,9999,n)}async getAccountResource(t,n,r){var i;return this.client.accounts.getAccountResource(it.ensure(t).hex(),n,(i=r==null?void 0:r.ledgerVersion)==null?void 0:i.toString())}static generateBCSTransaction(t,n){return new zu(i=>{const s=t.signBuffer(i);return new Yt.Ed25519Signature(s.toUint8Array())},t.pubKey().toUint8Array()).sign(n)}static generateBCSSimulation(t,n){return new zu(i=>{const s=new Uint8Array(64);return new Yt.Ed25519Signature(s)},t.pubKey().toUint8Array()).sign(n)}async generateTransaction(t,n,r){const i={sender:t};if(r!=null&&r.sequence_number&&(i.sequenceNumber=r.sequence_number),r!=null&&r.gas_unit_price&&(i.gasUnitPrice=r.gas_unit_price),r!=null&&r.max_gas_amount&&(i.maxGasAmount=r.max_gas_amount),r!=null&&r.expiration_timestamp_secs){const o=Number.parseInt(r.expiration_timestamp_secs,10);i.expSecFromNow=o-Math.floor(Date.now()/1e3)}return new dr(this,i).build(n.function,n.type_arguments,n.arguments)}async signTransaction(t,n){return Promise.resolve(nc.generateBCSTransaction(t,n))}async getEventsByCreationNumber(t,n,r){var i;return this.client.events.getEventsByCreationNumber(it.ensure(t).hex(),n.toString(),(i=r==null?void 0:r.start)==null?void 0:i.toString(),r==null?void 0:r.limit)}async getEventsByEventHandle(t,n,r,i){var s;return this.client.events.getEventsByEventHandle(it.ensure(t).hex(),n,r,(s=i==null?void 0:i.start)==null?void 0:s.toString(),i==null?void 0:i.limit)}async submitTransaction(t){return this.submitSignedBCSTransaction(t)}async simulateTransaction(t,n,r){let i;return t instanceof ga?i=nc.generateBCSSimulation(t,n):t instanceof Hc?i=new Um(()=>{const{threshold:o}=t,a=[],c=[];for(let d=0;d<o;d+=1)a.push(d),c.push(new Yt.Ed25519Signature(new Uint8Array(64)));const u=Yt.MultiEd25519Signature.createBitmap(a);return new Yt.MultiEd25519Signature(c,u)},t).sign(n):i=new zu(()=>{const o=new Uint8Array(64);return new Yt.Ed25519Signature(o)},t.toBytes()).sign(n),this.submitBCSSimulation(i,r)}async submitSignedBCSTransaction(t){return this.client.request.request({url:"/transactions",method:"POST",body:t,mediaType:"application/x.aptos.signed_transaction+bcs"})}async submitBCSSimulation(t,n){var r,i,s;const o={estimate_gas_unit_price:(r=n==null?void 0:n.estimateGasUnitPrice)!=null?r:!1,estimate_max_gas_amount:(i=n==null?void 0:n.estimateMaxGasAmount)!=null?i:!1,estimate_prioritized_gas_unit_price:(s=n==null?void 0:n.estimatePrioritizedGasUnitPrice)!=null?s:!1};return this.client.request.request({url:"/transactions/simulate",query:o,method:"POST",body:t,mediaType:"application/x.aptos.signed_transaction+bcs"})}async getTransactions(t){var n;return this.client.transactions.getTransactions((n=t==null?void 0:t.start)==null?void 0:n.toString(),t==null?void 0:t.limit)}async getTransactionByHash(t){return this.client.transactions.getTransactionByHash(t)}async getTransactionByVersion(t){return this.client.transactions.getTransactionByVersion(t.toString())}async transactionPending(t){try{return(await this.client.transactions.getTransactionByHash(t)).type==="pending_transaction"}catch(n){if((n==null?void 0:n.status)===404)return!0;throw n}}async waitForTransactionWithResult(t,n){var r,i;const s=(r=n==null?void 0:n.timeoutSecs)!=null?r:cm,o=(i=n==null?void 0:n.checkSuccess)!=null?i:!1;let a=!0,c=0,u;for(;a&&!(c>=s);){try{if(u=await this.client.transactions.getTransactionByHash(t),a=u.type==="pending_transaction",!a)break}catch(d){const l=d instanceof wc,f=l&&d.status!==404&&d.status>=400&&d.status<500;if(!l||f)throw d}await Ox(1e3),c+=1}if(u===void 0)throw new Error(`Waiting for transaction ${t} failed`);if(a)throw new qm(`Waiting for transaction ${t} timed out after ${s} seconds`,u);if(!o)return u;if(!(u!=null&&u.success))throw new Nm(`Transaction ${t} committed to the blockchain but execution failed`,u);return u}async waitForTransaction(t,n){await this.waitForTransactionWithResult(t,n)}async getLedgerInfo(){return this.client.general.getLedgerInfo()}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(t,n,r){var i;return await this.client.tables.getTableItem(t,n,(i=r==null?void 0:r.ledgerVersion)==null?void 0:i.toString())}async generateRawTransaction(t,n,r){const[{sequence_number:i},s,{gas_estimate:o}]=await Promise.all([this.getAccount(t),this.getChainId(),r!=null&&r.gasUnitPrice?Promise.resolve({gas_estimate:r.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:a,gasUnitPrice:c,expireTimestamp:u}={maxGasAmount:BigInt(om),gasUnitPrice:BigInt(o),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+am),...r};return new Yt.RawTransaction(Yt.AccountAddress.fromHex(t),BigInt(i),n,a,c,u,new Yt.ChainId(s))}async generateSignSubmitTransaction(t,n,r){const i=await this.generateRawTransaction(t.address(),n,r),s=nc.generateBCSTransaction(t,i);return(await this.submitSignedBCSTransaction(s)).hash}async publishPackage(t,n,r,i){const s=new En;Hr(r,s);const o=new Yt.TransactionPayloadEntryFunction(Yt.EntryFunction.natural("0x1::code","publish_package_txn",[],[Lo(n),s.getBytes()]));return this.generateSignSubmitTransaction(t,o,i)}async generateSignSubmitWaitForTransaction(t,n,r){const i=await this.generateSignSubmitTransaction(t,n,r);return this.waitForTransactionWithResult(i,r)}async estimateGasPrice(){return this.client.transactions.estimateGasPrice()}async estimateMaxGasAmount(t){const n=`0x1::coin::CoinStore<${d0}>`,[{gas_estimate:r},i]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(t)]),s=i.find(a=>a.type===n);return BigInt(s.data.coin.value)/BigInt(r)}async rotateAuthKeyEd25519(t,n,r){const{sequence_number:i,authentication_key:s}=await this.getAccount(t.address()),o=new ga(n),a=new Yt.RotationProofChallenge(Yt.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(i),Yt.AccountAddress.fromHex(t.address()),new Yt.AccountAddress(new it(s).toUint8Array()),o.pubKey().toUint8Array()),c=it.fromUint8Array(Yi(a)),u=t.signHexString(c),d=o.signHexString(c),l=new Yt.TransactionPayloadEntryFunction(Yt.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[f0(0),Lo(t.pubKey().toUint8Array()),f0(0),Lo(o.pubKey().toUint8Array()),Lo(u.toUint8Array()),Lo(d.toUint8Array())])),f=await this.generateRawTransaction(t.address(),l,r),p=nc.generateBCSTransaction(t,f);return this.submitSignedBCSTransaction(p)}async lookupOriginalAddress(t){const n=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:r}}=n.data,i=await this.getTableItem(r,{key_type:"address",value_type:"address",key:it.ensure(t).hex()});return new it(i)}async getBlockByHeight(t,n){return this.client.blocks.getBlockByHeight(t,n)}async getBlockByVersion(t,n){return this.client.blocks.getBlockByVersion(t,n)}async view(t,n){return this.client.view.view(t,n)}clearCache(t){$x(t)}},It=nc;en([Cn],It.prototype,"getAccount",1);en([Cn],It.prototype,"getAccountTransactions",1);en([Cn],It.prototype,"getAccountModules",1);en([Cn],It.prototype,"getAccountModule",1);en([Cn],It.prototype,"getAccountResources",1);en([Cn],It.prototype,"getAccountResource",1);en([Cn],It.prototype,"getEventsByCreationNumber",1);en([Cn],It.prototype,"getEventsByEventHandle",1);en([Cn],It.prototype,"submitSignedBCSTransaction",1);en([Cn],It.prototype,"submitBCSSimulation",1);en([Cn],It.prototype,"getTransactions",1);en([Cn],It.prototype,"getTransactionByHash",1);en([Cn],It.prototype,"getTransactionByVersion",1);en([Cn],It.prototype,"getLedgerInfo",1);en([Ql()],It.prototype,"getChainId",1);en([Cn],It.prototype,"getTableItem",1);en([Cn,Ql({ttlMs:5*60*1e3,tags:["gas_estimates"]})],It.prototype,"estimateGasPrice",1);en([Cn],It.prototype,"estimateMaxGasAmount",1);en([Cn],It.prototype,"getBlockByHeight",1);en([Cn],It.prototype,"getBlockByVersion",1);en([Cn],It.prototype,"view",1);var Mm=class extends Error{constructor(t,n,r,i){super(n),this.status=t,this.message=n,this.errorCode=r,this.vmErrorCode=i}},qm=class extends Error{constructor(t,n){super(t),this.lastSubmittedTransaction=n}},Nm=class extends Error{constructor(t,n){super(t),this.transaction=n}};function Cn(e,t,n){const r=n.value;return n.value=async function(...s){var o,a;try{return await r.apply(this,[...s])}catch(c){throw c instanceof wc?new Mm(c.status,JSON.stringify({message:c.message,...c.body}),(o=c.body)==null?void 0:o.error_code,(a=c.body)==null?void 0:a.vm_error_code):c}},n}var Ah=class{constructor(t,n,r=!1){let i=null,s=null;if(typeof t=="object"&&x5(t)?(i=t.fullnodeUrl,s=t.indexerUrl,this.network="CUSTOM"):(i=Mx[t],s=Ux[t],this.network=t),!i||!s)throw new Error("network is not provided");this.aptosClient=new It(i,n,r),this.indexerClient=new li(s)}};function Dm(e,t,n){Object.getOwnPropertyNames(t.prototype).forEach(r=>{const i=Object.getOwnPropertyDescriptor(t.prototype,r);i&&(i.value=function(...s){return this[n][r](...s)},Object.defineProperty(e.prototype,r,i))})}Dm(Ah,It,"aptosClient");Dm(Ah,li,"indexerClient");function x5(e){return e.fullnodeUrl!==void 0&&typeof e.fullnodeUrl=="string"&&e.indexerUrl!==void 0&&typeof e.indexerUrl=="string"}var Lm=class{constructor(t,n){this.type=t,this.value=n}},Eh=class{constructor(){this.data={}}setProperty(t,n){this.data[t]=n}};function Hm(e){let t;return e==="string"||e==="String"?t=new Ao(y5):t=new vd(e).parseTypeTag(),t}function zm(e,t){if(e.length!==t.length)throw new Error("Length of property values and types not match");const n=new Array;return t.forEach((r,i)=>{try{const s=Hm(r),o=new En;Th(e[i],s,o),n.push(o.getBytes())}catch{n.push(new TextEncoder().encode(e[i]))}}),n}function kh(e){const t=e.map.data,n=new Eh;return t.forEach(r=>{const{key:i}=r,s=r.value.value,o=r.value.type,a=Hm(o),c=jm(a,s),u=new Lm(o,c);n.setProperty(i,u)}),n}function jm(e,t){const n=new ph(new it(t).toUint8Array());let r="";return e instanceof Ki?r=n.deserializeU8().toString():e instanceof xo?r=n.deserializeU64().toString():e instanceof So?r=n.deserializeU128().toString():e instanceof vo?r=n.deserializeBool()?"true":"false":e instanceof To?r=it.fromUint8Array(n.deserializeFixedBytes(32)).hex():e instanceof Ao&&e.isStringTypeTag()?r=n.deserializeStr():r=t,r}var Fm={};Yl(Fm,{PropertyMap:()=>Eh,PropertyValue:()=>Lm,Token:()=>Wm,TokenData:()=>Gm});var Gm=class{constructor(t,n,r,i,s,o,a,c){this.collection=t,this.description=n,this.name=r,this.maximum=i,this.supply=s,this.uri=o,this.default_properties=kh(a),this.mutability_config=c}},Wm=class{constructor(t,n,r){this.id=t,this.amount=n,this.token_properties=kh(r)}},S5=class{constructor(t){this.aptosClient=t}async createCollection(t,n,r,i,s=hc,o){const c=await new dr(this.aptosClient,{sender:t.address(),...o}).build("0x3::token::create_collection_script",[],[n,r,i,s,[!1,!1,!1]]),u=It.generateBCSTransaction(t,c);return(await this.aptosClient.submitSignedBCSTransaction(u)).hash}async createToken(t,n,r,i,s,o,a=hc,c=t.address(),u=0,d=0,l=[],f=[],p=[],_){const b=await new dr(this.aptosClient,{sender:t.address(),..._}).build("0x3::token::create_token_script",[],[n,r,i,s,a,o,c,u,d,[!1,!1,!1,!1,!1],l,zm(f,p),p]),B=It.generateBCSTransaction(t,b);return(await this.aptosClient.submitSignedBCSTransaction(B)).hash}async createTokenWithMutabilityConfig(t,n,r,i,s,o,a=hc,c=t.address(),u=0,d=0,l=[],f=[],p=[],_=[!1,!1,!1,!1,!1],y){const B=await new dr(this.aptosClient,{sender:t.address(),...y}).build("0x3::token::create_token_script",[],[n,r,i,s,a,o,c,u,d,_,l,f,p]),E=It.generateBCSTransaction(t,B);return(await this.aptosClient.submitSignedBCSTransaction(E)).hash}async offerToken(t,n,r,i,s,o,a=0,c){const d=await new dr(this.aptosClient,{sender:t.address(),...c}).build("0x3::token_transfers::offer_script",[],[n,r,i,s,a,o]),l=It.generateBCSTransaction(t,d);return(await this.aptosClient.submitSignedBCSTransaction(l)).hash}async claimToken(t,n,r,i,s,o=0,a){const u=await new dr(this.aptosClient,{sender:t.address(),...a}).build("0x3::token_transfers::claim_script",[],[n,r,i,s,o]),d=It.generateBCSTransaction(t,u);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async cancelTokenOffer(t,n,r,i,s,o=0,a){const u=await new dr(this.aptosClient,{sender:t.address(),...a}).build("0x3::token_transfers::cancel_offer_script",[],[n,r,i,s,o]),d=It.generateBCSTransaction(t,u);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async directTransferToken(t,n,r,i,s,o,a=0,c){const d=await new dr(this.aptosClient,{sender:t.address(),...c}).build("0x3::token::direct_transfer_script",[],[r,i,s,a,o]),l=new Yt.MultiAgentRawTransaction(d,[Yt.AccountAddress.fromHex(n.address())]),f=new Yt.Ed25519Signature(t.signBuffer(co.getSigningMessage(l)).toUint8Array()),p=new Yt.AccountAuthenticatorEd25519(new Yt.Ed25519PublicKey(t.signingKey.publicKey),f),_=new Yt.Ed25519Signature(n.signBuffer(co.getSigningMessage(l)).toUint8Array()),y=new Yt.AccountAuthenticatorEd25519(new Yt.Ed25519PublicKey(n.signingKey.publicKey),_),b=new Yt.TransactionAuthenticatorMultiAgent(p,[Yt.AccountAddress.fromHex(n.address())],[y]),B=Yi(new Yt.SignedTransaction(d,b));return(await this.aptosClient.submitSignedBCSTransaction(B)).hash}async optInTokenTransfer(t,n,r){const s=await new dr(this.aptosClient,{sender:t.address(),...r}).build("0x3::token::opt_in_direct_transfer",[],[n]),o=It.generateBCSTransaction(t,s);return(await this.aptosClient.submitSignedBCSTransaction(o)).hash}async transferWithOptIn(t,n,r,i,s,o,a,c){const d=await new dr(this.aptosClient,{sender:t.address(),...c}).build("0x3::token::transfer_with_opt_in",[],[n,r,i,s,o,a]),l=It.generateBCSTransaction(t,d);return(await this.aptosClient.submitSignedBCSTransaction(l)).hash}async burnByCreator(t,n,r,i,s,o,a){const u=await new dr(this.aptosClient,{sender:t.address(),...a}).build("0x3::token::burn_by_creator",[],[n,r,i,s,o]),d=It.generateBCSTransaction(t,u);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async burnByOwner(t,n,r,i,s,o,a){const u=await new dr(this.aptosClient,{sender:t.address(),...a}).build("0x3::token::burn",[],[n,r,i,s,o]),d=It.generateBCSTransaction(t,u);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async mutateTokenProperties(t,n,r,i,s,o,a,c,u,d,l){const p=await new dr(this.aptosClient,{sender:t.address(),...l}).build("0x3::token::mutate_token_properties",[],[n,r,i,s,o,a,c,u,d]),_=It.generateBCSTransaction(t,p);return(await this.aptosClient.submitSignedBCSTransaction(_)).hash}async getCollectionData(t,n){const i=(await this.aptosClient.getAccountResources(t)).find(c=>c.type==="0x3::token::Collections"),{handle:s}=i.data.collection_data,o={key_type:"0x1::string::String",value_type:"0x3::token::CollectionData",key:n};return await this.aptosClient.getTableItem(s,o)}async getTokenData(t,n,r){const i=t instanceof it?t.hex():t,s=await this.aptosClient.getAccountResource(i,"0x3::token::Collections"),{handle:o}=s.data.token_data,c={key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:i,collection:n,name:r}},u=await this.aptosClient.getTableItem(o,c);return new Gm(u.collection,u.description,u.name,u.maximum,u.supply,u.uri,u.default_properties,u.mutability_config)}async getToken(t,n,r,i="0"){const s={creator:t instanceof it?t.hex():t,collection:n,name:r};return this.getTokenForAccount(t,{token_data_id:s,property_version:i})}async getTokenForAccount(t,n){const r=await this.aptosClient.getAccountResource(t instanceof it?t.hex():t,"0x3::token::TokenStore"),{handle:i}=r.data.tokens,s={key_type:"0x3::token::TokenId",value_type:"0x3::token::Token",key:n};try{const o=await this.aptosClient.getTableItem(i,s);return new Wm(o.id,o.amount,o.token_properties)}catch(o){return(o==null?void 0:o.status)===404?{id:n,amount:"0",token_properties:new Eh}:o}}},T5=class{constructor(e){this.aptosClient=e}async transfer(e,t,n,r){var i;const s=(i=r==null?void 0:r.coinType)!=null?i:d0,o=r!=null&&r.createReceiverIfMissing?"0x1::aptos_account::transfer_coins":"0x1::coin::transfer",a=Ni(t),u=await new dr(this.aptosClient,{sender:e.address(),...r}).build(o,[s],[a,n]),d=It.generateBCSTransaction(e,u);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async checkBalance(e,t){var n;const i=`0x1::coin::CoinStore<${(n=t==null?void 0:t.coinType)!=null?n:d0}>`,s=Ni(e),o=await this.aptosClient.getAccountResource(s,i);return BigInt(o.data.coin.value)}},A5=class extends It{constructor(e,t,n){var r,i,s;if(super(e,n),!t)throw new Error("Faucet URL cannot be empty.");this.faucetRequester=new xm({BASE:t,VERSION:(r=n==null?void 0:n.VERSION)!=null?r:"0.1.0",WITH_CREDENTIALS:(i=n==null?void 0:n.WITH_CREDENTIALS)!=null?i:!1,CREDENTIALS:(s=n==null?void 0:n.CREDENTIALS)!=null?s:"include",TOKEN:n==null?void 0:n.TOKEN,USERNAME:n==null?void 0:n.USERNAME,PASSWORD:n==null?void 0:n.PASSWORD,HEADERS:n==null?void 0:n.HEADERS,ENCODE_PATH:n==null?void 0:n.ENCODE_PATH})}async fundAccount(e,t,n=cm){const r=await this.faucetRequester.request({method:"POST",url:"/mint",query:{address:it.ensure(e).noPrefix(),amount:t}}),i=[];for(let s=0;s<r.length;s+=1){const o=r[s];i.push(this.waitForTransaction(o,{timeoutSecs:n}))}return await Promise.all(i),r}};const IM=Object.freeze(Object.defineProperty({__proto__:null,ApiError:Mm,AptosAccount:ga,AptosClient:It,BCS:lm,CoinClient:T5,FailedTransactionError:Nm,FaucetClient:A5,HexString:it,IndexerClient:li,Network:um,Provider:Ah,TokenClient:S5,TokenTypes:Fm,TransactionBuilder:co,TransactionBuilderABI:al,TransactionBuilderEd25519:zu,TransactionBuilderMultiEd25519:Um,TransactionBuilderRemoteABI:dr,TxnBuilderTypes:Yt,TypeTagParser:vd,Types:gm,WaitForTransactionError:qm,derivePath:sm,deserializePropertyMap:kh,deserializeValueBasedOnTypeTag:jm,getAddressFromAccountOrAddress:Ni,getPropertyValueRaw:zm},Symbol.toStringTag,{value:"Module"}));var Ir={},jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.output=jn.exists=jn.hash=jn.bytes=jn.bool=jn.number=void 0;function cl(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}jn.number=cl;function Vm(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}jn.bool=Vm;function Bh(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}jn.bytes=Bh;function Km(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");cl(e.outputLen),cl(e.blockLen)}jn.hash=Km;function Xm(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}jn.exists=Xm;function Zm(e,t){Bh(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}jn.output=Zm;const E5={number:cl,bool:Vm,bytes:Bh,hash:Km,exists:Xm,output:Zm};jn.default=E5;var ya={},Jm={},Eo={},xd={};Object.defineProperty(xd,"__esModule",{value:!0});xd.crypto=void 0;xd.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=xd,n=S=>new Uint8Array(S.buffer,S.byteOffset,S.byteLength);e.u8=n;const r=S=>new Uint32Array(S.buffer,S.byteOffset,Math.floor(S.byteLength/4));e.u32=r;const i=S=>new DataView(S.buffer,S.byteOffset,S.byteLength);e.createView=i;const s=(S,T)=>S<<32-T|S>>>T;if(e.rotr=s,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},(S,T)=>T.toString(16).padStart(2,"0"));function a(S){if(!(S instanceof Uint8Array))throw new Error("Uint8Array expected");let T="";for(let R=0;R<S.length;R++)T+=o[S[R]];return T}e.bytesToHex=a;function c(S){if(typeof S!="string")throw new TypeError("hexToBytes: expected string, got "+typeof S);if(S.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const T=new Uint8Array(S.length/2);for(let R=0;R<T.length;R++){const P=R*2,C=S.slice(P,P+2),G=Number.parseInt(C,16);if(Number.isNaN(G)||G<0)throw new Error("Invalid byte sequence");T[R]=G}return T}e.hexToBytes=c;const u=async()=>{};e.nextTick=u;async function d(S,T,R){let P=Date.now();for(let C=0;C<S;C++){R(C);const G=Date.now()-P;G>=0&&G<T||(await(0,e.nextTick)(),P+=G)}}e.asyncLoop=d;function l(S){if(typeof S!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof S}`);return new TextEncoder().encode(S)}e.utf8ToBytes=l;function f(S){if(typeof S=="string"&&(S=l(S)),!(S instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof S})`);return S}e.toBytes=f;function p(...S){if(!S.every(P=>P instanceof Uint8Array))throw new Error("Uint8Array list expected");if(S.length===1)return S[0];const T=S.reduce((P,C)=>P+C.length,0),R=new Uint8Array(T);for(let P=0,C=0;P<S.length;P++){const G=S[P];R.set(G,C),C+=G.length}return R}e.concatBytes=p;class _{clone(){return this._cloneInto()}}e.Hash=_;const y=S=>Object.prototype.toString.call(S)==="[object Object]"&&S.constructor===Object;function b(S,T){if(T!==void 0&&(typeof T!="object"||!y(T)))throw new TypeError("Options should be object or undefined");return Object.assign(S,T)}e.checkOpts=b;function B(S){const T=P=>S().update(f(P)).digest(),R=S();return T.outputLen=R.outputLen,T.blockLen=R.blockLen,T.create=()=>S(),T}e.wrapConstructor=B;function E(S){const T=(P,C)=>S(C).update(f(P)).digest(),R=S({});return T.outputLen=R.outputLen,T.blockLen=R.blockLen,T.create=P=>S(P),T}e.wrapConstructorWithOpts=E;function x(S=32){if(t.crypto.web)return t.crypto.web.getRandomValues(new Uint8Array(S));if(t.crypto.node)return new Uint8Array(t.crypto.node.randomBytes(S).buffer);throw new Error("The environment doesn't have randomBytes function")}e.randomBytes=x})(Eo);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const t=jn,n=Eo;class r extends n.Hash{constructor(o,a){super(),this.finished=!1,this.destroyed=!1,t.default.hash(o);const c=(0,n.toBytes)(a);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,d=new Uint8Array(u);d.set(c.length>u?o.create().update(c).digest():c);for(let l=0;l<d.length;l++)d[l]^=54;this.iHash.update(d),this.oHash=o.create();for(let l=0;l<d.length;l++)d[l]^=106;this.oHash.update(d),d.fill(0)}update(o){return t.default.exists(this),this.iHash.update(o),this}digestInto(o){t.default.exists(this),t.default.bytes(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:c,finished:u,destroyed:d,blockLen:l,outputLen:f}=this;return o=o,o.finished=u,o.destroyed=d,o.blockLen=l,o.outputLen=f,o.oHash=a._cloneInto(o.oHash),o.iHash=c._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const i=(s,o,a)=>new r(s,o).update(a).digest();e.hmac=i,e.hmac.create=(s,o)=>new r(s,o)})(Jm);Object.defineProperty(ya,"__esModule",{value:!0});ya.pbkdf2Async=ya.pbkdf2=void 0;const pu=jn,k5=Jm,na=Eo;function Ym(e,t,n,r){pu.default.hash(e);const i=(0,na.checkOpts)({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(pu.default.number(s),pu.default.number(o),pu.default.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=(0,na.toBytes)(t),u=(0,na.toBytes)(n),d=new Uint8Array(o),l=k5.hmac.create(e,c),f=l._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:d,PRF:l,PRFSalt:f}}function Qm(e,t,n,r,i){return e.destroy(),t.destroy(),r&&r.destroy(),i.fill(0),n}function B5(e,t,n,r){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:c}=Ym(e,t,n,r);let u;const d=new Uint8Array(4),l=(0,na.createView)(d),f=new Uint8Array(a.outputLen);for(let p=1,_=0;_<s;p++,_+=a.outputLen){const y=o.subarray(_,_+a.outputLen);l.setInt32(0,p,!1),(u=c._cloneInto(u)).update(d).digestInto(f),y.set(f.subarray(0,y.length));for(let b=1;b<i;b++){a._cloneInto(u).update(f).digestInto(f);for(let B=0;B<y.length;B++)y[B]^=f[B]}}return Qm(a,c,o,u,f)}ya.pbkdf2=B5;async function R5(e,t,n,r){const{c:i,dkLen:s,asyncTick:o,DK:a,PRF:c,PRFSalt:u}=Ym(e,t,n,r);let d;const l=new Uint8Array(4),f=(0,na.createView)(l),p=new Uint8Array(c.outputLen);for(let _=1,y=0;y<s;_++,y+=c.outputLen){const b=a.subarray(y,y+c.outputLen);f.setInt32(0,_,!1),(d=u._cloneInto(d)).update(l).digestInto(p),b.set(p.subarray(0,b.length)),await(0,na.asyncLoop)(i-1,o,B=>{c._cloneInto(d).update(p).digestInto(p);for(let E=0;E<b.length;E++)b[E]^=p[E]})}return Qm(c,u,a,d,p)}ya.pbkdf2Async=R5;var ma={},Vc={};Object.defineProperty(Vc,"__esModule",{value:!0});Vc.SHA2=void 0;const qf=jn,Qa=Eo;function P5(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}let O5=class extends Qa.Hash{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Qa.createView)(this.buffer)}update(t){qf.default.exists(this);const{view:n,buffer:r,blockLen:i}=this;t=(0,Qa.toBytes)(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=(0,Qa.createView)(t);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){qf.default.exists(this),qf.default.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let l=o;l<i;l++)n[l]=0;P5(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=(0,Qa.createView)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,d[l],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%n&&t.buffer.set(r),t}};Vc.SHA2=O5;Object.defineProperty(ma,"__esModule",{value:!0});ma.sha224=ma.sha256=void 0;const I5=Vc,Zr=Eo,C5=(e,t,n)=>e&t^~e&n,$5=(e,t,n)=>e&t^e&n^t&n,U5=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),os=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),as=new Uint32Array(64);let e_=class extends I5.SHA2{constructor(){super(64,32,8,!1),this.A=os[0]|0,this.B=os[1]|0,this.C=os[2]|0,this.D=os[3]|0,this.E=os[4]|0,this.F=os[5]|0,this.G=os[6]|0,this.H=os[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[t,n,r,i,s,o,a,c]}set(t,n,r,i,s,o,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let l=0;l<16;l++,n+=4)as[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const f=as[l-15],p=as[l-2],_=(0,Zr.rotr)(f,7)^(0,Zr.rotr)(f,18)^f>>>3,y=(0,Zr.rotr)(p,17)^(0,Zr.rotr)(p,19)^p>>>10;as[l]=y+as[l-7]+_+as[l-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:u,H:d}=this;for(let l=0;l<64;l++){const f=(0,Zr.rotr)(a,6)^(0,Zr.rotr)(a,11)^(0,Zr.rotr)(a,25),p=d+f+C5(a,c,u)+U5[l]+as[l]|0,y=((0,Zr.rotr)(r,2)^(0,Zr.rotr)(r,13)^(0,Zr.rotr)(r,22))+$5(r,i,s)|0;d=u,u=c,c=a,a=o+p|0,o=s,s=i,i=r,r=p+y|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,i,s,o,a,c,u,d)}roundClean(){as.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},M5=class extends e_{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};ma.sha256=(0,Zr.wrapConstructor)(()=>new e_);ma.sha224=(0,Zr.wrapConstructor)(()=>new M5);var ti={},t_={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.add=e.toBig=e.split=e.fromBig=void 0;const t=BigInt(2**32-1),n=BigInt(32);function r(F,U=!1){return U?{h:Number(F&t),l:Number(F>>n&t)}:{h:Number(F>>n&t)|0,l:Number(F&t)|0}}e.fromBig=r;function i(F,U=!1){let N=new Uint32Array(F.length),k=new Uint32Array(F.length);for(let h=0;h<F.length;h++){const{h:g,l:v}=r(F[h],U);[N[h],k[h]]=[g,v]}return[N,k]}e.split=i;const s=(F,U)=>BigInt(F>>>0)<<n|BigInt(U>>>0);e.toBig=s;const o=(F,U,N)=>F>>>N,a=(F,U,N)=>F<<32-N|U>>>N,c=(F,U,N)=>F>>>N|U<<32-N,u=(F,U,N)=>F<<32-N|U>>>N,d=(F,U,N)=>F<<64-N|U>>>N-32,l=(F,U,N)=>F>>>N-32|U<<64-N,f=(F,U)=>U,p=(F,U)=>F,_=(F,U,N)=>F<<N|U>>>32-N,y=(F,U,N)=>U<<N|F>>>32-N,b=(F,U,N)=>U<<N-32|F>>>64-N,B=(F,U,N)=>F<<N-32|U>>>64-N;function E(F,U,N,k){const h=(U>>>0)+(k>>>0);return{h:F+N+(h/2**32|0)|0,l:h|0}}e.add=E;const x=(F,U,N)=>(F>>>0)+(U>>>0)+(N>>>0),S=(F,U,N,k)=>U+N+k+(F/2**32|0)|0,T=(F,U,N,k)=>(F>>>0)+(U>>>0)+(N>>>0)+(k>>>0),R=(F,U,N,k,h)=>U+N+k+h+(F/2**32|0)|0,P=(F,U,N,k,h)=>(F>>>0)+(U>>>0)+(N>>>0)+(k>>>0)+(h>>>0),C=(F,U,N,k,h,g)=>U+N+k+h+g+(F/2**32|0)|0,G={fromBig:r,split:i,toBig:e.toBig,shrSH:o,shrSL:a,rotrSH:c,rotrSL:u,rotrBH:d,rotrBL:l,rotr32H:f,rotr32L:p,rotlSH:_,rotlSL:y,rotlBH:b,rotlBL:B,add:E,add3L:x,add3H:S,add4L:T,add4H:R,add5H:C,add5L:P};e.default=G})(t_);Object.defineProperty(ti,"__esModule",{value:!0});ti.sha384=ti.sha512_256=ti.sha512_224=ti.sha512=ti.SHA512=void 0;const q5=Vc,At=t_,Sd=Eo,[N5,D5]=At.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),cs=new Uint32Array(80),us=new Uint32Array(80);let Kc=class extends q5.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:u,El:d,Fh:l,Fl:f,Gh:p,Gl:_,Hh:y,Hl:b}=this;return[t,n,r,i,s,o,a,c,u,d,l,f,p,_,y,b]}set(t,n,r,i,s,o,a,c,u,d,l,f,p,_,y,b){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=l|0,this.Fl=f|0,this.Gh=p|0,this.Gl=_|0,this.Hh=y|0,this.Hl=b|0}process(t,n){for(let x=0;x<16;x++,n+=4)cs[x]=t.getUint32(n),us[x]=t.getUint32(n+=4);for(let x=16;x<80;x++){const S=cs[x-15]|0,T=us[x-15]|0,R=At.default.rotrSH(S,T,1)^At.default.rotrSH(S,T,8)^At.default.shrSH(S,T,7),P=At.default.rotrSL(S,T,1)^At.default.rotrSL(S,T,8)^At.default.shrSL(S,T,7),C=cs[x-2]|0,G=us[x-2]|0,F=At.default.rotrSH(C,G,19)^At.default.rotrBH(C,G,61)^At.default.shrSH(C,G,6),U=At.default.rotrSL(C,G,19)^At.default.rotrBL(C,G,61)^At.default.shrSL(C,G,6),N=At.default.add4L(P,U,us[x-7],us[x-16]),k=At.default.add4H(N,R,F,cs[x-7],cs[x-16]);cs[x]=k|0,us[x]=N|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:u,Dl:d,Eh:l,El:f,Fh:p,Fl:_,Gh:y,Gl:b,Hh:B,Hl:E}=this;for(let x=0;x<80;x++){const S=At.default.rotrSH(l,f,14)^At.default.rotrSH(l,f,18)^At.default.rotrBH(l,f,41),T=At.default.rotrSL(l,f,14)^At.default.rotrSL(l,f,18)^At.default.rotrBL(l,f,41),R=l&p^~l&y,P=f&_^~f&b,C=At.default.add5L(E,T,P,D5[x],us[x]),G=At.default.add5H(C,B,S,R,N5[x],cs[x]),F=C|0,U=At.default.rotrSH(r,i,28)^At.default.rotrBH(r,i,34)^At.default.rotrBH(r,i,39),N=At.default.rotrSL(r,i,28)^At.default.rotrBL(r,i,34)^At.default.rotrBL(r,i,39),k=r&s^r&a^s&a,h=i&o^i&c^o&c;B=y|0,E=b|0,y=p|0,b=_|0,p=l|0,_=f|0,{h:l,l:f}=At.default.add(u|0,d|0,G|0,F|0),u=a|0,d=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const g=At.default.add3L(F,N,h);r=At.default.add3H(g,G,U,k),i=g|0}({h:r,l:i}=At.default.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=At.default.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=At.default.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=At.default.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:l,l:f}=At.default.add(this.Eh|0,this.El|0,l|0,f|0),{h:p,l:_}=At.default.add(this.Fh|0,this.Fl|0,p|0,_|0),{h:y,l:b}=At.default.add(this.Gh|0,this.Gl|0,y|0,b|0),{h:B,l:E}=At.default.add(this.Hh|0,this.Hl|0,B|0,E|0),this.set(r,i,s,o,a,c,u,d,l,f,p,_,y,b,B,E)}roundClean(){cs.fill(0),us.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};ti.SHA512=Kc;let L5=class extends Kc{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},H5=class extends Kc{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},z5=class extends Kc{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};ti.sha512=(0,Sd.wrapConstructor)(()=>new Kc);ti.sha512_224=(0,Sd.wrapConstructor)(()=>new L5);ti.sha512_256=(0,Sd.wrapConstructor)(()=>new H5);ti.sha384=(0,Sd.wrapConstructor)(()=>new z5);Object.defineProperty(Ir,"__esModule",{value:!0});var n_=Ir.mnemonicToSeedSync=Ir.mnemonicToSeed=Ir.validateMnemonic=Ir.entropyToMnemonic=Ir.mnemonicToEntropy=Ir.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const r_=jn,i_=ya,j5=ma,s_=ti,F5=Eo,gu=Dc,G5=e=>e[0]==="";function o_(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function Rh(e){const t=o_(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function a_(e){r_.default.bytes(e,16,20,24,28,32)}function W5(e,t=128){if(r_.default.number(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return l_((0,F5.randomBytes)(t/8),e)}Ir.generateMnemonic=W5;const V5=e=>{const t=8-e.length/4;return new Uint8Array([(0,j5.sha256)(e)[0]>>t<<t])};function c_(e){if(!Array.isArray(e)||e.length!==2**11||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(t=>{if(typeof t!="string")throw new Error(`Wordlist: non-string element: ${t}`)}),gu.utils.chain(gu.utils.checksum(1,V5),gu.utils.radix2(11,!0),gu.utils.alphabet(e))}function u_(e,t){const{words:n}=Rh(e),r=c_(t).decode(n);return a_(r),r}Ir.mnemonicToEntropy=u_;function l_(e,t){return a_(e),c_(t).encode(e).join(G5(t)?"":" ")}Ir.entropyToMnemonic=l_;function K5(e,t){try{u_(e,t)}catch{return!1}return!0}Ir.validateMnemonic=K5;const d_=e=>o_(`mnemonic${e}`);function X5(e,t=""){return(0,i_.pbkdf2Async)(s_.sha512,Rh(e).nfkd,d_(t),{c:2048,dkLen:64})}Ir.mnemonicToSeed=X5;function Z5(e,t=""){return(0,i_.pbkdf2)(s_.sha512,Rh(e).nfkd,d_(t),{c:2048,dkLen:64})}n_=Ir.mnemonicToSeedSync=Z5;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const J5=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Nf=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Y5=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Y5)throw new Error("Non little-endian hardware is not supported");const Q5=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function f_(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Q5[e[n]];return t}function h_(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=n*2,i=e.slice(r,r+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[n]=s}return t}function eS(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Xc(e){if(typeof e=="string"&&(e=eS(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}let Ph=class{clone(){return this._cloneInto()}};function Td(e){const t=r=>e().update(Xc(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function tS(e){const t=(r,i)=>e(i).update(Xc(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function p0(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function nS(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function p_(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function rS(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");p0(e.outputLen),p0(e.blockLen)}function iS(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function sS(e,t){p_(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Cr={number:p0,bool:nS,bytes:p_,hash:rS,exists:iS,output:sS},yu=BigInt(2**32-1),g0=BigInt(32);function g_(e,t=!1){return t?{h:Number(e&yu),l:Number(e>>g0&yu)}:{h:Number(e>>g0&yu)|0,l:Number(e&yu)|0}}function oS(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=g_(e[i],t);[n[i],r[i]]=[s,o]}return[n,r]}const aS=(e,t)=>BigInt(e>>>0)<<g0|BigInt(t>>>0),cS=(e,t,n)=>e>>>n,uS=(e,t,n)=>e<<32-n|t>>>n,lS=(e,t,n)=>e>>>n|t<<32-n,dS=(e,t,n)=>e<<32-n|t>>>n,fS=(e,t,n)=>e<<64-n|t>>>n-32,hS=(e,t,n)=>e>>>n-32|t<<64-n,pS=(e,t)=>t,gS=(e,t)=>e,yS=(e,t,n)=>e<<n|t>>>32-n,mS=(e,t,n)=>t<<n|e>>>32-n,_S=(e,t,n)=>t<<n-32|e>>>64-n,wS=(e,t,n)=>e<<n-32|t>>>64-n;function bS(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const vS=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),xS=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,SS=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),TS=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,AS=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),ES=(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,ft={fromBig:g_,split:oS,toBig:aS,shrSH:cS,shrSL:uS,rotrSH:lS,rotrSL:dS,rotrBH:fS,rotrBL:hS,rotr32H:pS,rotr32L:gS,rotlSH:yS,rotlSL:mS,rotlBH:_S,rotlBL:wS,add:bS,add3L:vS,add3H:xS,add4L:SS,add4H:TS,add5H:ES,add5L:AS},[y_,m_,__]=[[],[],[]],kS=BigInt(0),ec=BigInt(1),BS=BigInt(2),RS=BigInt(7),PS=BigInt(256),OS=BigInt(113);for(let e=0,t=ec,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],y_.push(2*(5*r+n)),m_.push((e+1)*(e+2)/2%64);let i=kS;for(let s=0;s<7;s++)t=(t<<ec^(t>>RS)*OS)%PS,t&BS&&(i^=ec<<(ec<<BigInt(s))-ec);__.push(i)}const[IS,CS]=ft.split(__,!0),wg=(e,t,n)=>n>32?ft.rotlBH(e,t,n):ft.rotlSH(e,t,n),bg=(e,t,n)=>n>32?ft.rotlBL(e,t,n):ft.rotlSL(e,t,n);function $S(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],d=n[c+1],l=wg(u,d,1)^n[a],f=bg(u,d,1)^n[a+1];for(let p=0;p<50;p+=10)e[o+p]^=l,e[o+p+1]^=f}let i=e[2],s=e[3];for(let o=0;o<24;o++){const a=m_[o],c=wg(i,s,a),u=bg(i,s,a),d=y_[o];i=e[d],s=e[d+1],e[d]=c,e[d+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=IS[r],e[1]^=CS[r]}n.fill(0)}class Ad extends Ph{constructor(t,n,r,i=!1,s=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Cr.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=J5(this.state)}keccak(){$S(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Cr.exists(this);const{blockLen:n,state:r}=this;t=Xc(t);const i=t.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,n&128&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){Cr.exists(this,!1),Cr.bytes(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=t.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);t.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Cr.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Cr.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new Ad(n,r,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}const Ns=(e,t,n)=>Td(()=>new Ad(t,e,n));Ns(6,144,224/8);const _a=Ns(6,136,256/8);Ns(6,104,384/8);Ns(6,72,512/8);Ns(1,144,224/8);Ns(1,136,256/8);Ns(1,104,384/8);Ns(1,72,512/8);const w_=(e,t,n)=>tS((r={})=>new Ad(t,e,r.dkLen===void 0?n:r.dkLen,!0));w_(31,168,128/8);w_(31,136,256/8);let b_=class extends Ph{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Cr.hash(t);const r=Xc(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){return Cr.exists(this),this.iHash.update(t),this}digestInto(t){Cr.exists(this),Cr.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Oh=(e,t,n)=>new b_(e,t).update(n).digest();Oh.create=(e,t)=>new b_(e,t);function US(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}let MS=class extends Ph{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Nf(this.buffer)}update(t){Cr.exists(this);const{view:n,buffer:r,blockLen:i}=this;t=Xc(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Nf(t);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Cr.exists(this),Cr.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let c=o;c<i;c++)n[c]=0;US(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Nf(t);this.get().forEach((c,u)=>a.setUint32(4*u,c,s))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%n&&t.buffer.set(r),t}};const[qS,NS]=ft.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ls=new Uint32Array(80),ds=new Uint32Array(80);let Ih=class extends MS{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:u,El:d,Fh:l,Fl:f,Gh:p,Gl:_,Hh:y,Hl:b}=this;return[t,n,r,i,s,o,a,c,u,d,l,f,p,_,y,b]}set(t,n,r,i,s,o,a,c,u,d,l,f,p,_,y,b){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=l|0,this.Fl=f|0,this.Gh=p|0,this.Gl=_|0,this.Hh=y|0,this.Hl=b|0}process(t,n){for(let x=0;x<16;x++,n+=4)ls[x]=t.getUint32(n),ds[x]=t.getUint32(n+=4);for(let x=16;x<80;x++){const S=ls[x-15]|0,T=ds[x-15]|0,R=ft.rotrSH(S,T,1)^ft.rotrSH(S,T,8)^ft.shrSH(S,T,7),P=ft.rotrSL(S,T,1)^ft.rotrSL(S,T,8)^ft.shrSL(S,T,7),C=ls[x-2]|0,G=ds[x-2]|0,F=ft.rotrSH(C,G,19)^ft.rotrBH(C,G,61)^ft.shrSH(C,G,6),U=ft.rotrSL(C,G,19)^ft.rotrBL(C,G,61)^ft.shrSL(C,G,6),N=ft.add4L(P,U,ds[x-7],ds[x-16]),k=ft.add4H(N,R,F,ls[x-7],ls[x-16]);ls[x]=k|0,ds[x]=N|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:u,Dl:d,Eh:l,El:f,Fh:p,Fl:_,Gh:y,Gl:b,Hh:B,Hl:E}=this;for(let x=0;x<80;x++){const S=ft.rotrSH(l,f,14)^ft.rotrSH(l,f,18)^ft.rotrBH(l,f,41),T=ft.rotrSL(l,f,14)^ft.rotrSL(l,f,18)^ft.rotrBL(l,f,41),R=l&p^~l&y,P=f&_^~f&b,C=ft.add5L(E,T,P,NS[x],ds[x]),G=ft.add5H(C,B,S,R,qS[x],ls[x]),F=C|0,U=ft.rotrSH(r,i,28)^ft.rotrBH(r,i,34)^ft.rotrBH(r,i,39),N=ft.rotrSL(r,i,28)^ft.rotrBL(r,i,34)^ft.rotrBL(r,i,39),k=r&s^r&a^s&a,h=i&o^i&c^o&c;B=y|0,E=b|0,y=p|0,b=_|0,p=l|0,_=f|0,{h:l,l:f}=ft.add(u|0,d|0,G|0,F|0),u=a|0,d=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const g=ft.add3L(F,N,h);r=ft.add3H(g,G,U,k),i=g|0}({h:r,l:i}=ft.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=ft.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=ft.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=ft.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:l,l:f}=ft.add(this.Eh|0,this.El|0,l|0,f|0),{h:p,l:_}=ft.add(this.Fh|0,this.Fl|0,p|0,_|0),{h:y,l:b}=ft.add(this.Gh|0,this.Gl|0,y|0,b|0),{h:B,l:E}=ft.add(this.Hh|0,this.Hl|0,B|0,E|0),this.set(r,i,s,o,a,c,u,d,l,f,p,_,y,b,B,E)}roundClean(){ls.fill(0),ds.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},DS=class extends Ih{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},LS=class extends Ih{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const v_=Td(()=>new Ih);Td(()=>new DS);Td(()=>new LS);var x_=Object.defineProperty,HS=Object.getOwnPropertyDescriptor,Ed=(e,t)=>{for(var n in t)x_(e,n,{get:t[n],enumerable:!0})},tn=(e,t,n,r)=>{for(var i=r>1?void 0:r?HS(t,n):t,s=e.length-1,o;s>=0;s--)(o=e[s])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&x_(t,n,i),i},zS=/^m(\/[0-9]+')+$/,S_=e=>e.replace("'",""),jS="ed25519 seed",FS=2147483648,GS=e=>{const n=Oh.create(v_,jS).update(h_(e)).digest(),r=n.slice(0,32),i=n.slice(32);return{key:r,chainCode:i}},WS=({key:e,chainCode:t},n)=>{const r=new ArrayBuffer(4);new DataView(r).setUint32(0,n);const i=new Uint8Array(r),s=new Uint8Array([0]),o=new Uint8Array([...s,...e,...i]),a=Oh.create(v_,t).update(o).digest(),c=a.slice(0,32),u=a.slice(32);return{key:c,chainCode:u}},VS=e=>zS.test(e)?!e.split("/").slice(1).map(S_).some(Number.isNaN):!1,KS=(e,t,n=FS)=>{if(!VS(e))throw new Error("Invalid derivation path");const{key:r,chainCode:i}=GS(t);return e.split("/").slice(1).map(S_).map(o=>parseInt(o,10)).reduce((o,a)=>WS(o,a+n),{key:r,chainCode:i})},pt=class{static fromBuffer(e){return pt.fromUint8Array(e)}static fromUint8Array(e){return new pt(f_(e))}static ensure(e){return typeof e=="string"?new pt(e):e}constructor(e){e.startsWith("0x")?this.hexString=e:this.hexString=`0x${e}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(h_(this.noPrefix()))}};async function XS(e){return new Promise(t=>{setTimeout(t,e)})}var vg="/v1";function ZS(e){let t=`${e}`;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t.endsWith(vg)||(t=`${t}${vg}`),t}var T_=2e5,A_=20,JS=20,YS="0x1::aptos_coin::AptosCoin";function kd(e){let t,n,r;return typeof e=="object"?(t=e.hashFunction,n=e.ttlMs,r=e.tags):t=e,(i,s,o)=>{if(o.value!=null)o.value=xg(o.value,t,n,r);else if(o.get!=null)o.get=xg(o.get,t,n,r);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}function QS(e,t){return kd({ttlMs:e,hashFunction:t})}var ju=new Map;function e8(e){const t=new Set;for(const n of e){const r=ju.get(n);if(r)for(const i of r)t.has(i)||(i.clear(),t.add(i))}return t.size}function xg(e,t,n=0,r){const i=Symbol("__memoized_map__");return function(...s){let o;const a=this;a.hasOwnProperty(i)||Object.defineProperty(a,i,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const c=a[i];if(Array.isArray(r))for(const u of r)ju.has(u)?ju.get(u).push(c):ju.set(u,[c]);if(t||s.length>0||n>0){let u;t===!0?u=s.map(f=>f.toString()).join("!"):t?u=t.apply(a,s):u=s[0];const d=`${u}__timestamp`;let l=!1;if(n>0)if(!c.has(d))l=!0;else{const f=c.get(d);l=Date.now()-f>n}c.has(u)&&!l?o=c.get(u):(o=e.apply(a,s),c.set(u,o),n>0&&c.set(d,Date.now()))}else{const u=a;c.has(u)?o=c.get(u):(o=e.apply(a,s),c.set(u,o))}return o}}async function Sg(e,t,n,r){var i;const s=[];let o;for(;;){const a=await e(pt.ensure(t).hex(),(i=r==null?void 0:r.ledgerVersion)==null?void 0:i.toString(),o,n);if(o=a.__headers["x-aptos-cursor"],delete a.__headers,s.push(...a),o==null)break}return s}var t8={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql"},n8={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1"},V={};Ed(V,{AccountAddress:()=>wn,AccountAuthenticator:()=>vc,AccountAuthenticatorEd25519:()=>Uh,AccountAuthenticatorMultiEd25519:()=>Mh,ArgumentABI:()=>ru,AuthenticationKey:()=>lo,ChainId:()=>Cd,ChangeSet:()=>p8,Ed25519PublicKey:()=>Qr,Ed25519Signature:()=>Bi,EntryFunction:()=>ro,EntryFunctionABI:()=>Sa,Identifier:()=>_r,Module:()=>k_,ModuleId:()=>uo,MultiAgentRawTransaction:()=>Od,MultiEd25519PublicKey:()=>Zc,MultiEd25519Signature:()=>Bd,MultiSig:()=>Dh,MultiSigTransactionPayload:()=>Nh,RawTransaction:()=>ja,RawTransactionWithData:()=>B_,RotationProofChallenge:()=>y8,Script:()=>Yc,ScriptABI:()=>Ld,SignedTransaction:()=>Qc,StructTag:()=>wa,Transaction:()=>R_,TransactionArgument:()=>bi,TransactionArgumentAddress:()=>va,TransactionArgumentBool:()=>Dd,TransactionArgumentU128:()=>qd,TransactionArgumentU16:()=>Ud,TransactionArgumentU256:()=>Nd,TransactionArgumentU32:()=>Md,TransactionArgumentU64:()=>ba,TransactionArgumentU8:()=>$d,TransactionArgumentU8Vector:()=>xa,TransactionAuthenticator:()=>Jc,TransactionAuthenticatorEd25519:()=>Rd,TransactionAuthenticatorMultiAgent:()=>$h,TransactionAuthenticatorMultiEd25519:()=>Pd,TransactionPayload:()=>eu,TransactionPayloadEntryFunction:()=>Id,TransactionPayloadMultisig:()=>Lh,TransactionPayloadScript:()=>tu,TransactionScriptABI:()=>Hd,TypeArgumentABI:()=>nu,TypeTag:()=>nr,TypeTagAddress:()=>Oo,TypeTagBool:()=>Bo,TypeTagSigner:()=>qh,TypeTagStruct:()=>Io,TypeTagU128:()=>Po,TypeTagU16:()=>Da,TypeTagU256:()=>Ha,TypeTagU32:()=>La,TypeTagU64:()=>Ro,TypeTagU8:()=>Xi,TypeTagVector:()=>za,UserTransaction:()=>Hh,WriteSet:()=>g8});var ae={};Ed(ae,{Deserializer:()=>Ch,Serializer:()=>kn,bcsSerializeBool:()=>d8,bcsSerializeBytes:()=>zo,bcsSerializeFixedBytes:()=>h8,bcsSerializeStr:()=>f8,bcsSerializeU128:()=>l8,bcsSerializeU16:()=>c8,bcsSerializeU32:()=>u8,bcsSerializeU8:()=>y0,bcsSerializeUint64:()=>a8,bcsToBytes:()=>Qi,deserializeVector:()=>ii,serializeVector:()=>zr,serializeVectorWithFunc:()=>o8});var r8=2**8-1,i8=2**16-1,bc=2**32-1,pc=BigInt(2**64)-BigInt(1),E_=BigInt(2**128)-BigInt(1),s8=BigInt(2**256)-BigInt(1),kn=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(e){for(;this.buffer.byteLength<this.offset+e;){const t=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t}}serialize(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length}serializeWithFunction(e,t,n){this.ensureBufferWillHandleSize(t);const r=new DataView(this.buffer,this.offset);e.apply(r,[0,n,!0]),this.offset+=t}serializeStr(e){const t=new TextEncoder;this.serializeBytes(t.encode(e))}serializeBytes(e){this.serializeU32AsUleb128(e.length),this.serialize(e)}serializeFixedBytes(e){this.serialize(e)}serializeBool(e){if(typeof e!="boolean")throw new Error("Value needs to be a boolean");const t=e?1:0;this.serialize(new Uint8Array([t]))}serializeU8(e){this.serialize(new Uint8Array([e]))}serializeU16(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)}serializeU32(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)}serializeU64(e){const t=BigInt(e.toString())&BigInt(bc),n=BigInt(e.toString())>>BigInt(32);this.serializeU32(Number(t)),this.serializeU32(Number(n))}serializeU128(e){const t=BigInt(e.toString())&pc,n=BigInt(e.toString())>>BigInt(64);this.serializeU64(t),this.serializeU64(n)}serializeU256(e){const t=BigInt(e.toString())&E_,n=BigInt(e.toString())>>BigInt(128);this.serializeU128(t),this.serializeU128(n)}serializeU32AsUleb128(e){let t=e;const n=[];for(;t>>>7;)n.push(t&127|128),t>>>=7;n.push(t),this.serialize(new Uint8Array(n))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};tn([ko(0,r8)],kn.prototype,"serializeU8",1);tn([ko(0,i8)],kn.prototype,"serializeU16",1);tn([ko(0,bc)],kn.prototype,"serializeU32",1);tn([ko(BigInt(0),pc)],kn.prototype,"serializeU64",1);tn([ko(BigInt(0),E_)],kn.prototype,"serializeU128",1);tn([ko(BigInt(0),s8)],kn.prototype,"serializeU256",1);tn([ko(0,bc)],kn.prototype,"serializeU32AsUleb128",1);function ko(e,t,n){return(r,i,s)=>{const o=s.value;return s.value=function(c){const u=BigInt(c.toString());if(u>BigInt(t.toString())||u<BigInt(e.toString()))throw new Error(n||"Value is out of range");o.apply(this,[c])},s}}var Ch=class{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}deserializeStr(){const e=this.deserializeBytes();return new TextDecoder().decode(e)}deserializeBytes(){const e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){const e=new Uint8Array(this.read(1))[0];if(e!==1&&e!==0)throw new Error("Invalid boolean value");return e===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const e=this.deserializeU32(),t=this.deserializeU32();return BigInt(BigInt(t)<<BigInt(32)|BigInt(e))}deserializeU128(){const e=this.deserializeU64(),t=this.deserializeU64();return BigInt(t<<BigInt(64)|e)}deserializeU256(){const e=this.deserializeU128(),t=this.deserializeU128();return BigInt(t<<BigInt(128)|e)}deserializeUleb128AsU32(){let e=BigInt(0),t=0;for(;e<bc;){const n=this.deserializeU8();if(e|=BigInt(n&127)<<BigInt(t),!(n&128))break;t+=7}if(e>bc)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}};function zr(e,t){t.serializeU32AsUleb128(e.length),e.forEach(n=>{n.serialize(t)})}function o8(e,t){const n=new kn;n.serializeU32AsUleb128(e.length);const r=n[t];return e.forEach(i=>{r.call(n,i)}),n.getBytes()}function ii(e,t){const n=e.deserializeUleb128AsU32(),r=[];for(let i=0;i<n;i+=1)r.push(t.deserialize(e));return r}function Qi(e){const t=new kn;return e.serialize(t),t.getBytes()}function a8(e){const t=new kn;return t.serializeU64(e),t.getBytes()}function y0(e){const t=new kn;return t.serializeU8(e),t.getBytes()}function c8(e){const t=new kn;return t.serializeU16(e),t.getBytes()}function u8(e){const t=new kn;return t.serializeU32(e),t.getBytes()}function l8(e){const t=new kn;return t.serializeU128(e),t.getBytes()}function d8(e){const t=new kn;return t.serializeBool(e),t.getBytes()}function f8(e){const t=new kn;return t.serializeStr(e),t.getBytes()}function zo(e){const t=new kn;return t.serializeBytes(e),t.getBytes()}function h8(e){const t=new kn;return t.serializeFixedBytes(e),t.getBytes()}var Jr=class{constructor(e){if(e.length!==Jr.LENGTH)throw new Error("Expected address of length 32");this.address=e}static fromHex(e){let t=pt.ensure(e);t.noPrefix().length%2!==0&&(t=new pt(`0${t.noPrefix()}`));const n=t.toUint8Array();if(n.length>Jr.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(n.length===Jr.LENGTH)return new Jr(n);const r=new Uint8Array(Jr.LENGTH);return r.set(n,Jr.LENGTH-n.length),new Jr(r)}static isValid(e){if(e==="")return!1;let t=pt.ensure(e);return t.noPrefix().length%2!==0&&(t=new pt(`0${t.noPrefix()}`)),t.toUint8Array().length<=Jr.LENGTH}toHexString(){return pt.fromUint8Array(this.address).hex()}serialize(e){e.serializeFixedBytes(this.address)}static deserialize(e){return new Jr(e.deserializeFixedBytes(Jr.LENGTH))}},wn=Jr;wn.LENGTH=32;wn.CORE_CODE_ADDRESS=Jr.fromHex("0x1");var Fu=class{constructor(e){if(e.length!==Fu.LENGTH)throw new Error(`Ed25519PublicKey length should be ${Fu.LENGTH}`);this.value=e}toBytes(){return this.value}serialize(e){e.serializeBytes(this.value)}static deserialize(e){const t=e.deserializeBytes();return new Fu(t)}},Qr=Fu;Qr.LENGTH=32;var Gu=class{constructor(e){if(this.value=e,e.length!==Gu.LENGTH)throw new Error(`Ed25519Signature length should be ${Gu.LENGTH}`)}serialize(e){e.serializeBytes(this.value)}static deserialize(e){const t=e.deserializeBytes();return new Gu(t)}},Bi=Gu;Bi.LENGTH=64;var m0=32,Zc=class{constructor(e,t){if(this.public_keys=e,this.threshold=t,t>m0)throw new Error(`"threshold" cannot be larger than ${m0}`)}toBytes(){const e=new Uint8Array(this.public_keys.length*Qr.LENGTH+1);return this.public_keys.forEach((t,n)=>{e.set(t.value,n*Qr.LENGTH)}),e[this.public_keys.length*Qr.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){const t=e.deserializeBytes(),n=t[t.length-1],r=[];for(let i=0;i<t.length-1;i+=Qr.LENGTH){const s=i;r.push(new Qr(t.subarray(s,s+Qr.LENGTH)))}return new Zc(r,n)}},rc=class{constructor(e,t){if(this.signatures=e,this.bitmap=t,t.length!==rc.BITMAP_LEN)throw new Error(`"bitmap" length should be ${rc.BITMAP_LEN}`)}toBytes(){const e=new Uint8Array(this.signatures.length*Bi.LENGTH+rc.BITMAP_LEN);return this.signatures.forEach((t,n)=>{e.set(t.value,n*Bi.LENGTH)}),e.set(this.bitmap,this.signatures.length*Bi.LENGTH),e}static createBitmap(e){const n=new Uint8Array([0,0,0,0]),r=new Set;return e.forEach(i=>{if(i>=m0)throw new Error(`Invalid bit value ${i}.`);if(r.has(i))throw new Error("Duplicated bits detected.");r.add(i);const s=Math.floor(i/8);let o=n[s];o|=128>>i%8,n[s]=o}),n}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){const t=e.deserializeBytes(),n=t.subarray(t.length-4),r=[];for(let i=0;i<t.length-n.length;i+=Bi.LENGTH){const s=i;r.push(new Bi(t.subarray(s,s+Bi.LENGTH)))}return new rc(r,n)}},Bd=rc;Bd.BITMAP_LEN=4;var Jc=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Rd.load(e);case 1:return Pd.load(e);case 2:return $h.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${t}`)}}},Rd=class extends Jc{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=Qr.deserialize(e),n=Bi.deserialize(e);return new Rd(t,n)}},Pd=class extends Jc{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=Zc.deserialize(e),n=Bd.deserialize(e);return new Pd(t,n)}},$h=class extends Jc{constructor(e,t,n){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=n}serialize(e){e.serializeU32AsUleb128(2),this.sender.serialize(e),zr(this.secondary_signer_addresses,e),zr(this.secondary_signers,e)}static load(e){const t=vc.deserialize(e),n=ii(e,wn),r=ii(e,vc);return new $h(t,n,r)}},vc=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Uh.load(e);case 1:return Mh.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${t}`)}}},Uh=class extends vc{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=Qr.deserialize(e),n=Bi.deserialize(e);return new Uh(t,n)}},Mh=class extends vc{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=Zc.deserialize(e),n=Bd.deserialize(e);return new Mh(t,n)}},_r=class{constructor(e){this.value=e}serialize(e){e.serializeStr(this.value)}static deserialize(e){const t=e.deserializeStr();return new _r(t)}},nr=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Bo.load(e);case 1:return Xi.load(e);case 2:return Ro.load(e);case 3:return Po.load(e);case 4:return Oo.load(e);case 5:return qh.load(e);case 6:return za.load(e);case 7:return Io.load(e);case 8:return Da.load(e);case 9:return La.load(e);case 10:return Ha.load(e);default:throw new Error(`Unknown variant index for TypeTag: ${t}`)}}},Bo=class extends nr{serialize(e){e.serializeU32AsUleb128(0)}static load(e){return new Bo}},Xi=class extends nr{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new Xi}},Da=class extends nr{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new Da}},La=class extends nr{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new La}},Ro=class extends nr{serialize(e){e.serializeU32AsUleb128(2)}static load(e){return new Ro}},Po=class extends nr{serialize(e){e.serializeU32AsUleb128(3)}static load(e){return new Po}},Ha=class extends nr{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new Ha}},Oo=class extends nr{serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new Oo}},qh=class extends nr{serialize(e){e.serializeU32AsUleb128(5)}static load(e){return new qh}},za=class extends nr{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),this.value.serialize(e)}static load(e){const t=nr.deserialize(e);return new za(t)}},Io=class extends nr{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),this.value.serialize(e)}static load(e){const t=wa.deserialize(e);return new Io(t)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===wn.fromHex("0x1").toHexString()}},wa=class{constructor(e,t,n,r){this.address=e,this.module_name=t,this.name=n,this.type_args=r}static fromString(e){if(e.includes("<"))throw new Error("Not implemented");const t=e.split("::");if(t.length!==3)throw new Error("Invalid struct tag string literal.");return new wa(wn.fromHex(t[0]),new _r(t[1]),new _r(t[2]),[])}serialize(e){this.address.serialize(e),this.module_name.serialize(e),this.name.serialize(e),zr(this.type_args,e)}static deserialize(e){const t=wn.deserialize(e),n=_r.deserialize(e),r=_r.deserialize(e),i=ii(e,nr);return new wa(t,n,r,i)}},ja=class{constructor(e,t,n,r,i,s,o){this.sender=e,this.sequence_number=t,this.payload=n,this.max_gas_amount=r,this.gas_unit_price=i,this.expiration_timestamp_secs=s,this.chain_id=o}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){const t=wn.deserialize(e),n=e.deserializeU64(),r=eu.deserialize(e),i=e.deserializeU64(),s=e.deserializeU64(),o=e.deserializeU64(),a=Cd.deserialize(e);return new ja(t,n,r,i,s,o,a)}},Yc=class{constructor(e,t,n){this.code=e,this.ty_args=t,this.args=n}serialize(e){e.serializeBytes(this.code),zr(this.ty_args,e),zr(this.args,e)}static deserialize(e){const t=e.deserializeBytes(),n=ii(e,nr),r=ii(e,bi);return new Yc(t,n,r)}},ro=class{constructor(e,t,n,r){this.module_name=e,this.function_name=t,this.ty_args=n,this.args=r}static natural(e,t,n,r){return new ro(uo.fromStr(e),new _r(t),n,r)}static natual(e,t,n,r){return ro.natural(e,t,n,r)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),zr(this.ty_args,e),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{e.serializeBytes(t)})}static deserialize(e){const t=uo.deserialize(e),n=_r.deserialize(e),r=ii(e,nr),i=e.deserializeUleb128AsU32(),s=[];for(let a=0;a<i;a+=1)s.push(e.deserializeBytes());const o=s;return new ro(t,n,r,o)}},Nh=class{constructor(e){this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return new Nh(ro.deserialize(e))}},Dh=class{constructor(e,t){this.multisig_address=e,this.transaction_payload=t}serialize(e){this.multisig_address.serialize(e),this.transaction_payload===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.transaction_payload.serialize(e))}static deserialize(e){const t=wn.deserialize(e),n=e.deserializeBool();let r;return n&&(r=Nh.deserialize(e)),new Dh(t,r)}},k_=class{constructor(e){this.code=e}serialize(e){e.serializeBytes(this.code)}static deserialize(e){const t=e.deserializeBytes();return new k_(t)}},uo=class{constructor(e,t){this.address=e,this.name=t}static fromStr(e){const t=e.split("::");if(t.length!==2)throw new Error("Invalid module id.");return new uo(wn.fromHex(new pt(t[0])),new _r(t[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){const t=wn.deserialize(e),n=_r.deserialize(e);return new uo(t,n)}},p8=class{serialize(e){throw new Error("Not implemented.")}static deserialize(e){throw new Error("Not implemented.")}},g8=class{serialize(e){throw new Error("Not implmented.")}static deserialize(e){throw new Error("Not implmented.")}},Qc=class{constructor(e,t){this.raw_txn=e,this.authenticator=t}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){const t=ja.deserialize(e),n=Jc.deserialize(e);return new Qc(t,n)}},B_=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Od.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${t}`)}}},Od=class extends B_{constructor(e,t){super(),this.raw_txn=e,this.secondary_signer_addresses=t}serialize(e){e.serializeU32AsUleb128(0),this.raw_txn.serialize(e),zr(this.secondary_signer_addresses,e)}static load(e){const t=ja.deserialize(e),n=ii(e,wn);return new Od(t,n)}},eu=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return tu.load(e);case 2:return Id.load(e);case 3:return Lh.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},tu=class extends eu{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){const t=Yc.deserialize(e);return new tu(t)}},Id=class extends eu{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),this.value.serialize(e)}static load(e){const t=ro.deserialize(e);return new Id(t)}},Lh=class extends eu{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){const t=Dh.deserialize(e);return new Lh(t)}},Cd=class{constructor(e){this.value=e}serialize(e){e.serializeU8(this.value)}static deserialize(e){const t=e.deserializeU8();return new Cd(t)}},bi=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return $d.load(t);case 1:return ba.load(t);case 2:return qd.load(t);case 3:return va.load(t);case 4:return xa.load(t);case 5:return Dd.load(t);case 6:return Ud.load(t);case 7:return Md.load(t);case 8:return Nd.load(t);default:throw new Error(`Unknown variant index for TransactionArgument: ${n}`)}}},$d=class extends bi{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),e.serializeU8(this.value)}static load(e){const t=e.deserializeU8();return new $d(t)}},Ud=class extends bi{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),e.serializeU16(this.value)}static load(e){const t=e.deserializeU16();return new Ud(t)}},Md=class extends bi{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),e.serializeU32(this.value)}static load(e){const t=e.deserializeU32();return new Md(t)}},ba=class extends bi{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(1),e.serializeU64(this.value)}static load(e){const t=e.deserializeU64();return new ba(t)}},qd=class extends bi{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),e.serializeU128(this.value)}static load(e){const t=e.deserializeU128();return new qd(t)}},Nd=class extends bi{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(8),e.serializeU256(this.value)}static load(e){const t=e.deserializeU256();return new Nd(t)}},va=class extends bi{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){const t=wn.deserialize(e);return new va(t)}},xa=class extends bi{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(4),e.serializeBytes(this.value)}static load(e){const t=e.deserializeBytes();return new xa(t)}},Dd=class extends bi{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(5),e.serializeBool(this.value)}static load(e){const t=e.deserializeBool();return new Dd(t)}},R_=class{getHashSalt(){const e=_a.create();return e.update("APTOS::Transaction"),e.digest()}static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Hh.load(e);default:throw new Error(`Unknown variant index for Transaction: ${t}`)}}},Hh=class extends R_{constructor(e){super(),this.value=e}hash(){const e=_a.create();return e.update(this.getHashSalt()),e.update(Qi(this)),e.digest()}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){return new Hh(Qc.deserialize(e))}},nu=class{constructor(e){this.name=e}serialize(e){e.serializeStr(this.name)}static deserialize(e){const t=e.deserializeStr();return new nu(t)}},ru=class{constructor(e,t){this.name=e,this.type_tag=t}serialize(e){e.serializeStr(this.name),this.type_tag.serialize(e)}static deserialize(e){const t=e.deserializeStr(),n=nr.deserialize(e);return new ru(t,n)}},Ld=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Hd.load(e);case 1:return Sa.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},Hd=class extends Ld{constructor(e,t,n,r,i){super(),this.name=e,this.doc=t,this.code=n,this.ty_args=r,this.args=i}serialize(e){e.serializeU32AsUleb128(0),e.serializeStr(this.name),e.serializeStr(this.doc),e.serializeBytes(this.code),zr(this.ty_args,e),zr(this.args,e)}static load(e){const t=e.deserializeStr(),n=e.deserializeStr(),r=e.deserializeBytes(),i=ii(e,nu),s=ii(e,ru);return new Hd(t,n,r,i,s)}},Sa=class extends Ld{constructor(e,t,n,r,i){super(),this.name=e,this.module_name=t,this.doc=n,this.ty_args=r,this.args=i}serialize(e){e.serializeU32AsUleb128(1),e.serializeStr(this.name),this.module_name.serialize(e),e.serializeStr(this.doc),zr(this.ty_args,e),zr(this.args,e)}static load(e){const t=e.deserializeStr(),n=uo.deserialize(e),r=e.deserializeStr(),i=ii(e,nu),s=ii(e,ru);return new Sa(t,n,r,i,s)}},jo=class{constructor(e){if(e.length!==jo.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=e}static fromMultiEd25519PublicKey(e){const t=e.toBytes(),n=new Uint8Array(t.length+1);n.set(t),n.set([jo.MULTI_ED25519_SCHEME],t.length);const r=_a.create();return r.update(n),new jo(r.digest())}static fromEd25519PublicKey(e){const t=e.value,n=new Uint8Array(t.length+1);n.set(t),n.set([jo.ED25519_SCHEME],t.length);const r=_a.create();return r.update(n),new jo(r.digest())}derivedAddress(){return pt.fromUint8Array(this.bytes)}},lo=jo;lo.LENGTH=32;lo.MULTI_ED25519_SCHEME=1;lo.ED25519_SCHEME=0;lo.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var y8=class{constructor(e,t,n,r,i,s,o){this.accountAddress=e,this.moduleName=t,this.structName=n,this.sequenceNumber=r,this.originator=i,this.currentAuthKey=s,this.newPublicKey=o}serialize(e){this.accountAddress.serialize(e),e.serializeStr(this.moduleName),e.serializeStr(this.structName),e.serializeU64(this.sequenceNumber),this.originator.serialize(e),this.currentAuthKey.serialize(e),e.serializeBytes(this.newPublicKey)}},Wu=class{static fromAptosAccountObject(e){return new Wu(pt.ensure(e.privateKeyHex).toUint8Array(),e.address)}static fromDerivePath(e,t){if(!Wu.isValidPath(e))throw new Error("Invalid derivation path");const n=t.trim().split(/\s+/).map(i=>i.toLowerCase()).join(" "),{key:r}=KS(e,f_(n_(n)));return new Wu(r)}constructor(e,t){e?this.signingKey=Os.sign.keyPair.fromSeed(e.slice(0,32)):this.signingKey=Os.sign.keyPair(),this.accountAddress=pt.ensure(t||this.authKey().hex())}address(){return this.accountAddress}authKey(){const e=new Qr(this.signingKey.publicKey);return lo.fromEd25519PublicKey(e).derivedAddress()}static getResourceAccountAddress(e,t){const n=Qi(wn.fromHex(e)),r=new Uint8Array([...n,...t,lo.DERIVE_RESOURCE_ACCOUNT_SCHEME]),i=_a.create();return i.update(r),pt.fromUint8Array(i.digest())}pubKey(){return pt.fromUint8Array(this.signingKey.publicKey)}signBuffer(e){const t=Os.sign(e,this.signingKey.secretKey);return pt.fromUint8Array(t.slice(0,64))}signHexString(e){const t=pt.ensure(e).toUint8Array();return this.signBuffer(t)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:pt.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}},xc=Wu;xc.isValidPath=e=>!!/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(e);tn([kd()],xc.prototype,"authKey",1);function Ta(e){return e instanceof xc?e.address():pt.ensure(e)}var m8=`
    fragment TokenDataFields on current_token_datas {
  creator_address
  collection_name
  description
  metadata_uri
  name
  token_data_id_hash
  collection_data_id_hash
}
    `,_8=`
    fragment CollectionDataFields on current_collection_datas {
  metadata_uri
  supply
  description
  collection_name
  collection_data_id_hash
  table_handle
  creator_address
}
    `,w8=`
    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}
    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]
    offset: $offset
    limit: $limit
  ) {
    amount
    current_token_data {
      ...TokenDataFields
    }
    current_collection_data {
      ...CollectionDataFields
    }
    last_transaction_version
    property_version
  }
}
    ${m8}
${_8}`,b8=`
    query getTokenActivities($idHash: String!) {
  token_activities(where: {token_data_id_hash: {_eq: $idHash}}) {
    creator_address
    collection_name
    name
    token_data_id_hash
    collection_data_id_hash
    from_address
    to_address
    transaction_version
    transaction_timestamp
    property_version
    transfer_type
    event_sequence_number
    token_amount
  }
}
    `,P_=class{constructor(e){this.endpoint=e}async queryIndexer(e){const{data:t}=await yi.post(this.endpoint,e);if(t.errors)throw new Error(`Indexer data error ${t.errors}`);return t.data}async getAccountNFTs(e,t){const n={query:w8,variables:{address:e,offset:t==null?void 0:t.offset,limit:t==null?void 0:t.limit}};return this.queryIndexer(n)}async getTokenActivities(e){const t={query:b8,variables:{idHash:e}};return this.queryIndexer(t)}},v8={};Ed(v8,{$AccountData:()=>q8,$AccountSignature:()=>N8,$AccountSignature_Ed25519Signature:()=>D8,$AccountSignature_MultiEd25519Signature:()=>L8,$Address:()=>H8,$AptosError:()=>z8,$AptosErrorCode:()=>j8,$Block:()=>F8,$BlockMetadataTransaction:()=>G8,$DecodedTableData:()=>W8,$DeleteModule:()=>K8,$DeleteResource:()=>X8,$DeleteTableItem:()=>Z8,$DeletedTableData:()=>V8,$DirectWriteSet:()=>J8,$Ed25519Signature:()=>Y8,$EncodeSubmissionRequest:()=>Q8,$EntryFunctionId:()=>eT,$EntryFunctionPayload:()=>tT,$Event:()=>nT,$EventGuid:()=>rT,$GasEstimation:()=>iT,$GenesisPayload:()=>sT,$GenesisPayload_WriteSetPayload:()=>oT,$GenesisTransaction:()=>aT,$HashValue:()=>cT,$HealthCheckSuccess:()=>uT,$HexEncodedBytes:()=>lT,$IdentifierWrapper:()=>dT,$IndexResponse:()=>fT,$ModuleBundlePayload:()=>hT,$MoveAbility:()=>pT,$MoveFunction:()=>gT,$MoveFunctionGenericTypeParam:()=>yT,$MoveFunctionVisibility:()=>mT,$MoveModule:()=>_T,$MoveModuleBytecode:()=>wT,$MoveModuleId:()=>bT,$MoveResource:()=>vT,$MoveScriptBytecode:()=>xT,$MoveStruct:()=>ST,$MoveStructField:()=>TT,$MoveStructGenericTypeParam:()=>AT,$MoveStructTag:()=>ET,$MoveStructValue:()=>kT,$MoveType:()=>BT,$MoveValue:()=>RT,$MultiAgentSignature:()=>PT,$MultiEd25519Signature:()=>OT,$MultisigPayload:()=>IT,$MultisigTransactionPayload:()=>CT,$PendingTransaction:()=>$T,$RawTableItemRequest:()=>UT,$RoleType:()=>MT,$ScriptPayload:()=>qT,$ScriptWriteSet:()=>NT,$StateCheckpointTransaction:()=>DT,$StateKeyWrapper:()=>LT,$SubmitTransactionRequest:()=>HT,$TableItemRequest:()=>zT,$Transaction:()=>jT,$TransactionPayload:()=>XT,$TransactionPayload_EntryFunctionPayload:()=>ZT,$TransactionPayload_ModuleBundlePayload:()=>JT,$TransactionPayload_MultisigPayload:()=>YT,$TransactionPayload_ScriptPayload:()=>QT,$TransactionSignature:()=>nA,$TransactionSignature_Ed25519Signature:()=>rA,$TransactionSignature_MultiAgentSignature:()=>iA,$TransactionSignature_MultiEd25519Signature:()=>sA,$Transaction_BlockMetadataTransaction:()=>FT,$Transaction_GenesisTransaction:()=>GT,$Transaction_PendingTransaction:()=>WT,$Transaction_StateCheckpointTransaction:()=>VT,$Transaction_UserTransaction:()=>KT,$TransactionsBatchSingleSubmissionFailure:()=>eA,$TransactionsBatchSubmissionResult:()=>tA,$U128:()=>oA,$U256:()=>aA,$U64:()=>cA,$UserTransaction:()=>uA,$VersionedEvent:()=>lA,$ViewRequest:()=>dA,$WriteModule:()=>fA,$WriteResource:()=>hA,$WriteSet:()=>pA,$WriteSetChange:()=>mA,$WriteSetChange_DeleteModule:()=>_A,$WriteSetChange_DeleteResource:()=>wA,$WriteSetChange_DeleteTableItem:()=>bA,$WriteSetChange_WriteModule:()=>vA,$WriteSetChange_WriteResource:()=>xA,$WriteSetChange_WriteTableItem:()=>SA,$WriteSetPayload:()=>TA,$WriteSet_DirectWriteSet:()=>gA,$WriteSet_ScriptWriteSet:()=>yA,$WriteTableItem:()=>AA,AccountsService:()=>q_,ApiError:()=>Sc,AptosErrorCode:()=>G_,AptosGeneratedClient:()=>F_,BaseHttpRequest:()=>O_,BlocksService:()=>N_,CancelError:()=>I_,CancelablePromise:()=>C_,EventsService:()=>D_,GeneralService:()=>L_,MoveFunctionVisibility:()=>W_,OpenAPI:()=>M8,RoleType:()=>V_,TablesService:()=>H_,TransactionsService:()=>z_,ViewService:()=>j_});var O_=class{constructor(e){this.config=e}},Sc=class extends Error{constructor(e,t,n){super(n),this.name="ApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.body=t.body,this.request=e}},I_=class extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}},C_=class{constructor(e){this._isResolved=!1,this._isRejected=!1,this._isCancelled=!1,this._cancelHandlers=[],this._promise=new Promise((t,n)=>{this._resolve=t,this._reject=n;const r=o=>{var a;this._isResolved||this._isRejected||this._isCancelled||(this._isResolved=!0,(a=this._resolve)==null||a.call(this,o))},i=o=>{var a;this._isResolved||this._isRejected||this._isCancelled||(this._isRejected=!0,(a=this._reject)==null||a.call(this,o))},s=o=>{this._isResolved||this._isRejected||this._isCancelled||this._cancelHandlers.push(o)};return Object.defineProperty(s,"isResolved",{get:()=>this._isResolved}),Object.defineProperty(s,"isRejected",{get:()=>this._isRejected}),Object.defineProperty(s,"isCancelled",{get:()=>this._isCancelled}),e(r,i,s)})}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(){var e;if(!(this._isResolved||this._isRejected||this._isCancelled)){if(this._isCancelled=!0,this._cancelHandlers.length)try{for(const t of this._cancelHandlers)t()}catch(t){console.warn("Cancellation threw an error",t);return}this._cancelHandlers.length=0,(e=this._reject)==null||e.call(this,new I_("Request aborted"))}}get isCancelled(){return this._isCancelled}},$_=class{constructor(e=new Map){this.jar=e}setCookie(e,t){var n;const r=e.origin.toLowerCase();this.jar.has(r)||this.jar.set(r,[]);const i=$_.parse(t);this.jar.set(r,[...((n=this.jar.get(r))==null?void 0:n.filter(s=>s.name!==i.name))||[],i])}getCookies(e){var t;const n=e.origin.toLowerCase();return this.jar.get(n)?((t=this.jar.get(n))==null?void 0:t.filter(r=>!r.expires||r.expires>new Date))||[]:[]}static parse(e){if(typeof e!="string")throw new Error("argument str must be a string");const t=e.split(";").map(r=>r.trim());let n;if(t.length>0){const[r,i]=t[0].split("=");if(!r||!i)throw new Error("Invalid cookie");n={name:r,value:i}}else throw new Error("Invalid cookie");return t.slice(1).forEach(r=>{const[i,s]=r.split("=");if(!i.trim())throw new Error("Invalid cookie");const o=i.toLowerCase(),a=(s==null?void 0:s.charAt(0))==="'"||(s==null?void 0:s.charAt(0))==='"'?s==null?void 0:s.slice(1,-1):s;if(o==="expires"&&(n.expires=new Date(a)),o==="path"&&(n.path=a),o==="samesite"){if(a!=="Lax"&&a!=="None"&&a!=="Strict")throw new Error("Invalid cookie SameSite value");n.sameSite=a}o==="secure"&&(n.secure=!0)}),n}},U_=new $_;yi.interceptors.response.use(e=>(Array.isArray(e.headers["set-cookie"])&&e.headers["set-cookie"].forEach(t=>{U_.setCookie(new URL(e.config.url),t)}),e));yi.interceptors.request.use(function(e){const t=U_.getCookies(new URL(e.url));return(t==null?void 0:t.length)>0&&e.headers&&(e.headers.cookie=t.map(n=>`${n.name}=${n.value}`).join("; ")),e});var zh=e=>e!=null,zd=e=>typeof e=="string",Df=e=>zd(e)&&e!=="",M_=e=>typeof e=="object"&&typeof e.type=="string"&&typeof e.stream=="function"&&typeof e.arrayBuffer=="function"&&typeof e.constructor=="function"&&typeof e.constructor.name=="string"&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag]),x8=e=>e instanceof Jl,S8=e=>e>=200&&e<300,T8=e=>btoa(e),A8=e=>{const t=[],n=(i,s)=>{t.push(`${encodeURIComponent(i)}=${encodeURIComponent(String(s))}`)},r=(i,s)=>{zh(s)&&(Array.isArray(s)?s.forEach(o=>{r(i,o)}):typeof s=="object"?Object.entries(s).forEach(([o,a])=>{r(`${i}[${o}]`,a)}):n(i,s))};return Object.entries(e).forEach(([i,s])=>{r(i,s)}),t.length>0?`?${t.join("&")}`:""},E8=(e,t)=>{const n=e.ENCODE_PATH||encodeURI,r=t.url.replace("{api-version}",e.VERSION).replace(/{(.*?)}/g,(s,o)=>{var a;return(a=t.path)!=null&&a.hasOwnProperty(o)?n(String(t.path[o])):s}),i=`${e.BASE}${r}`;return t.query?`${i}${A8(t.query)}`:i},k8=e=>{if(e.formData){const t=new Jl,n=(r,i)=>{zd(i)||M_(i)?t.append(r,i):t.append(r,JSON.stringify(i))};return Object.entries(e.formData).filter(([r,i])=>zh(i)).forEach(([r,i])=>{Array.isArray(i)?i.forEach(s=>n(r,s)):n(r,i)}),t}},mu=async(e,t)=>typeof t=="function"?t(e):t,B8=async(e,t,n)=>{const r=await mu(t,e.TOKEN),i=await mu(t,e.USERNAME),s=await mu(t,e.PASSWORD),o=await mu(t,e.HEADERS),a=typeof(n==null?void 0:n.getHeaders)=="function"&&(n==null?void 0:n.getHeaders())||{},c=Object.entries({Accept:"application/json",...o,...t.headers,...a}).filter(([u,d])=>zh(d)).reduce((u,[d,l])=>({...u,[d]:String(l)}),{});if(Df(r)&&(c.Authorization=`Bearer ${r}`),Df(i)&&Df(s)){const u=T8(`${i}:${s}`);c.Authorization=`Basic ${u}`}return t.body&&(t.mediaType?c["Content-Type"]=t.mediaType:M_(t.body)?c["Content-Type"]=t.body.type||"application/octet-stream":zd(t.body)?c["Content-Type"]="text/plain":x8(t.body)||(c["Content-Type"]="application/json")),c},R8=e=>{if(e.body)return e.body},P8=async(e,t,n,r,i,s,o)=>{const a=yi.CancelToken.source(),c={url:n,headers:s,data:r??i,method:t.method,withCredentials:e.WITH_CREDENTIALS,cancelToken:a.token};Object.keys(e.HEADERS||{}).filter(d=>d.toLowerCase()==="accept").map(d=>e.HEADERS[d]).includes("application/x-bcs")&&(c.responseType="arraybuffer"),o(()=>a.cancel("The user aborted a request."));try{return await yi.request(c)}catch(d){const l=d;if(l.response)return l.response;throw d}},O8=(e,t)=>{if(t){const n=e.headers[t];if(zd(n))return n}},I8=e=>{if(e.status!==204)return e.data},C8=(e,t)=>{const r={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...e.errors}[t.status];if(r)throw new Sc(e,t,r);if(!t.ok)throw new Sc(e,t,"Generic Error")},$8=(e,t)=>new C_(async(n,r,i)=>{try{const s=E8(e,t),o=k8(t),a=R8(t),c=await B8(e,t,o);if(!i.isCancelled){const u=await P8(e,t,s,a,o,c,i),d=I8(u),l=O8(u,t.responseHeader),f={url:s,ok:S8(u.status),status:u.status,statusText:u.statusText,body:l??d};C8(t,f);const p=f.body;try{p.__headers=u.headers}catch{}n(p)}}catch(s){r(s)}}),U8=class extends O_{constructor(e){super(e)}request(e){return $8(this.config,e)}},q_=class{constructor(e){this.httpRequest=e}getAccount(e,t){return this.httpRequest.request({method:"GET",url:"/accounts/{address}",path:{address:e},query:{ledger_version:t}})}getAccountResources(e,t,n,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resources",path:{address:e},query:{ledger_version:t,start:n,limit:r}})}getAccountModules(e,t,n,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/modules",path:{address:e},query:{ledger_version:t,start:n,limit:r}})}getAccountResource(e,t,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resource/{resource_type}",path:{address:e,resource_type:t},query:{ledger_version:n}})}getAccountModule(e,t,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/module/{module_name}",path:{address:e,module_name:t},query:{ledger_version:n}})}},N_=class{constructor(e){this.httpRequest=e}getBlockByHeight(e,t){return this.httpRequest.request({method:"GET",url:"/blocks/by_height/{block_height}",path:{block_height:e},query:{with_transactions:t}})}getBlockByVersion(e,t){return this.httpRequest.request({method:"GET",url:"/blocks/by_version/{version}",path:{version:e},query:{with_transactions:t}})}},D_=class{constructor(e){this.httpRequest=e}getEventsByCreationNumber(e,t,n,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{creation_number}",path:{address:e,creation_number:t},query:{start:n,limit:r}})}getEventsByEventHandle(e,t,n,r,i){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{event_handle}/{field_name}",path:{address:e,event_handle:t,field_name:n},query:{start:r,limit:i}})}},L_=class{constructor(e){this.httpRequest=e}spec(){return this.httpRequest.request({method:"GET",url:"/spec"})}healthy(e){return this.httpRequest.request({method:"GET",url:"/-/healthy",query:{duration_secs:e}})}getLedgerInfo(){return this.httpRequest.request({method:"GET",url:"/"})}},H_=class{constructor(e){this.httpRequest=e}getTableItem(e,t,n){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/item",path:{table_handle:e},query:{ledger_version:n},body:t,mediaType:"application/json"})}getRawTableItem(e,t,n){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/raw_item",path:{table_handle:e},query:{ledger_version:n},body:t,mediaType:"application/json"})}},z_=class{constructor(e){this.httpRequest=e}getTransactions(e,t){return this.httpRequest.request({method:"GET",url:"/transactions",query:{start:e,limit:t}})}submitTransaction(e){return this.httpRequest.request({method:"POST",url:"/transactions",body:e,mediaType:"application/json"})}getTransactionByHash(e){return this.httpRequest.request({method:"GET",url:"/transactions/by_hash/{txn_hash}",path:{txn_hash:e}})}getTransactionByVersion(e){return this.httpRequest.request({method:"GET",url:"/transactions/by_version/{txn_version}",path:{txn_version:e}})}getAccountTransactions(e,t,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/transactions",path:{address:e},query:{start:t,limit:n}})}submitBatchTransactions(e){return this.httpRequest.request({method:"POST",url:"/transactions/batch",body:e,mediaType:"application/json"})}simulateTransaction(e,t,n,r){return this.httpRequest.request({method:"POST",url:"/transactions/simulate",query:{estimate_max_gas_amount:t,estimate_gas_unit_price:n,estimate_prioritized_gas_unit_price:r},body:e,mediaType:"application/json"})}encodeSubmission(e){return this.httpRequest.request({method:"POST",url:"/transactions/encode_submission",body:e,mediaType:"application/json"})}estimateGasPrice(){return this.httpRequest.request({method:"GET",url:"/estimate_gas_price"})}},j_=class{constructor(e){this.httpRequest=e}view(e,t){return this.httpRequest.request({method:"POST",url:"/view",query:{ledger_version:t},body:e,mediaType:"application/json"})}},F_=class{constructor(e,t=U8){var n,r,i,s;this.request=new t({BASE:(n=e==null?void 0:e.BASE)!=null?n:"/v1",VERSION:(r=e==null?void 0:e.VERSION)!=null?r:"1.2.0",WITH_CREDENTIALS:(i=e==null?void 0:e.WITH_CREDENTIALS)!=null?i:!1,CREDENTIALS:(s=e==null?void 0:e.CREDENTIALS)!=null?s:"include",TOKEN:e==null?void 0:e.TOKEN,USERNAME:e==null?void 0:e.USERNAME,PASSWORD:e==null?void 0:e.PASSWORD,HEADERS:e==null?void 0:e.HEADERS,ENCODE_PATH:e==null?void 0:e.ENCODE_PATH}),this.accounts=new q_(this.request),this.blocks=new N_(this.request),this.events=new D_(this.request),this.general=new L_(this.request),this.tables=new H_(this.request),this.transactions=new z_(this.request),this.view=new j_(this.request)}},M8={BASE:"/v1",VERSION:"1.2.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},G_=(e=>(e.ACCOUNT_NOT_FOUND="account_not_found",e.RESOURCE_NOT_FOUND="resource_not_found",e.MODULE_NOT_FOUND="module_not_found",e.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",e.VERSION_NOT_FOUND="version_not_found",e.TRANSACTION_NOT_FOUND="transaction_not_found",e.TABLE_ITEM_NOT_FOUND="table_item_not_found",e.BLOCK_NOT_FOUND="block_not_found",e.VERSION_PRUNED="version_pruned",e.BLOCK_PRUNED="block_pruned",e.INVALID_INPUT="invalid_input",e.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",e.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",e.VM_ERROR="vm_error",e.HEALTH_CHECK_FAILED="health_check_failed",e.MEMPOOL_IS_FULL="mempool_is_full",e.INTERNAL_ERROR="internal_error",e.WEB_FRAMEWORK_ERROR="web_framework_error",e.BCS_NOT_SUPPORTED="bcs_not_supported",e.API_DISABLED="api_disabled",e))(G_||{}),W_=(e=>(e.PRIVATE="private",e.PUBLIC="public",e.FRIEND="friend",e))(W_||{}),V_=(e=>(e.VALIDATOR="validator",e.FULL_NODE="full_node",e))(V_||{}),q8={description:`Account data

    A simplified version of the onchain Account resource`,properties:{sequence_number:{type:"U64",isRequired:!0},authentication_key:{type:"HexEncodedBytes",isRequired:!0}}},N8={type:"one-of",description:`Account signature scheme

    The account signature scheme allows you to have two types of accounts:

    1. A single Ed25519 key account, one private key
    2. A k-of-n multi-Ed25519 key account, multiple private keys, such that k-of-n must sign a transaction.`,contains:[{type:"AccountSignature_Ed25519Signature"},{type:"AccountSignature_MultiEd25519Signature"}]},D8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},L8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},H8={type:"string",description:`A hex encoded 32 byte Aptos account address.

    This is represented in a string as a 64 character hex string, sometimes
    shortened by stripping leading 0s, and adding a 0x.

    For example, address 0x0000000000000000000000000000000000000000000000000000000000000001 is represented as 0x1.
    `,format:"hex"},z8={description:`This is the generic struct we use for all API errors, it contains a string
    message and an Aptos API specific error code.`,properties:{message:{type:"string",description:"A message describing the error",isRequired:!0},error_code:{type:"AptosErrorCode",isRequired:!0},vm_error_code:{type:"number",description:"A code providing VM error details when submitting transactions to the VM",format:"uint64"}}},j8={type:"Enum"},F8={description:`A Block with or without transactions

    This contains the information about a transactions along with
    associated transactions if requested`,properties:{block_height:{type:"U64",isRequired:!0},block_hash:{type:"HashValue",isRequired:!0},block_timestamp:{type:"U64",isRequired:!0},first_version:{type:"U64",isRequired:!0},last_version:{type:"U64",isRequired:!0},transactions:{type:"array",contains:{type:"Transaction"}}}},G8={description:`A block metadata transaction

    This signifies the beginning of a block, and contains information
    about the specific block`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},id:{type:"HashValue",isRequired:!0},epoch:{type:"U64",isRequired:!0},round:{type:"U64",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0},previous_block_votes_bitvec:{type:"array",contains:{type:"number",format:"uint8"},isRequired:!0},proposer:{type:"Address",isRequired:!0},failed_proposer_indices:{type:"array",contains:{type:"number",format:"uint32"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},W8={description:"Decoded table data",properties:{key:{description:"Key of table in JSON",properties:{},isRequired:!0},key_type:{type:"string",description:"Type of key",isRequired:!0},value:{description:"Value of table in JSON",properties:{},isRequired:!0},value_type:{type:"string",description:"Type of value",isRequired:!0}}},V8={description:"Deleted table data",properties:{key:{description:"Deleted key",properties:{},isRequired:!0},key_type:{type:"string",description:"Deleted key type",isRequired:!0}}},K8={description:"Delete a module",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},module:{type:"MoveModuleId",isRequired:!0}}},X8={description:"Delete a resource",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},resource:{type:"MoveStructTag",isRequired:!0}}},Z8={description:"Delete a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DeletedTableData"}}},J8={properties:{changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},Y8={description:"A single Ed25519 signature",properties:{public_key:{type:"HexEncodedBytes",isRequired:!0},signature:{type:"HexEncodedBytes",isRequired:!0}}},Q8={description:"Request to encode a submission",properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},secondary_signers:{type:"array",contains:{type:"Address"}}}},eT={type:"string",description:"Entry function id is string representation of a entry function defined on-chain.\n\n    Format: `{address}::{module name}::{function name}`\n\n    Both `module name` and `function name` are case-sensitive.\n    "},tT={description:"Payload which runs a single entry function",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},nT={description:"An event from a transaction",properties:{guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},rT={properties:{creation_number:{type:"U64",isRequired:!0},account_address:{type:"Address",isRequired:!0}}},iT={description:"Struct holding the outputs of the estimate gas API",properties:{deprioritized_gas_estimate:{type:"number",description:"The deprioritized estimate for the gas unit price",format:"uint64"},gas_estimate:{type:"number",description:"The current estimate for the gas unit price",isRequired:!0,format:"uint64"},prioritized_gas_estimate:{type:"number",description:"The prioritized estimate for the gas unit price",format:"uint64"}}},sT={type:"one-of",description:"The writeset payload of the Genesis transaction",contains:[{type:"GenesisPayload_WriteSetPayload"}]},oT={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteSetPayload"}]},aT={description:`The genesis transaction

    This only occurs at the genesis transaction (version 0)`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},payload:{type:"GenesisPayload",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},cT={type:"string"},uT={description:"Representation of a successful healthcheck",properties:{message:{type:"string",isRequired:!0}}},lT={type:"string",description:"All bytes (Vec<u8>) data is represented as hex-encoded string prefixed with `0x` and fulfilled with\n    two hex digits per byte.\n\n    Unlike the `Address` type, HexEncodedBytes will not trim any zeros.\n    ",format:"hex"},dT={type:"string"},fT={description:`The struct holding all data returned to the client by the
    index endpoint (i.e., GET "/").  Only for responding in JSON`,properties:{chain_id:{type:"number",description:"Chain ID of the current chain",isRequired:!0,format:"uint8"},epoch:{type:"U64",isRequired:!0},ledger_version:{type:"U64",isRequired:!0},oldest_ledger_version:{type:"U64",isRequired:!0},ledger_timestamp:{type:"U64",isRequired:!0},node_role:{type:"RoleType",isRequired:!0},oldest_block_height:{type:"U64",isRequired:!0},block_height:{type:"U64",isRequired:!0},git_hash:{type:"string",description:`Git hash of the build of the API endpoint.  Can be used to determine the exact
            software version used by the API endpoint.`}}},hT={properties:{modules:{type:"array",contains:{type:"MoveModuleBytecode"},isRequired:!0}}},pT={type:"string"},gT={description:"Move function",properties:{name:{type:"IdentifierWrapper",isRequired:!0},visibility:{type:"MoveFunctionVisibility",isRequired:!0},is_entry:{type:"boolean",description:"Whether the function can be called as an entry function directly in a transaction",isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveFunctionGenericTypeParam"},isRequired:!0},params:{type:"array",contains:{type:"MoveType"},isRequired:!0},return:{type:"array",contains:{type:"MoveType"},isRequired:!0}}},yT={description:"Move function generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},mT={type:"Enum"},_T={description:"A Move module",properties:{address:{type:"Address",isRequired:!0},name:{type:"IdentifierWrapper",isRequired:!0},friends:{type:"array",contains:{type:"MoveModuleId"},isRequired:!0},exposed_functions:{type:"array",contains:{type:"MoveFunction"},isRequired:!0},structs:{type:"array",contains:{type:"MoveStruct"},isRequired:!0}}},wT={description:"Move module bytecode along with it's ABI",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveModule"}}},bT={type:"string",description:`Move module id is a string representation of Move module.

    Format: \`{address}::{module name}\`

    \`address\` should be hex-encoded 32 byte account address that is prefixed with \`0x\`.

    Module name is case-sensitive.
    `},vT={description:"A parsed Move resource",properties:{type:{type:"MoveStructTag",isRequired:!0},data:{type:"MoveStructValue",isRequired:!0}}},xT={description:"Move script bytecode",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveFunction"}}},ST={description:"A move struct",properties:{name:{type:"IdentifierWrapper",isRequired:!0},is_native:{type:"boolean",description:"Whether the struct is a native struct of Move",isRequired:!0},abilities:{type:"array",contains:{type:"MoveAbility"},isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveStructGenericTypeParam"},isRequired:!0},fields:{type:"array",contains:{type:"MoveStructField"},isRequired:!0}}},TT={description:"Move struct field",properties:{name:{type:"IdentifierWrapper",isRequired:!0},type:{type:"MoveType",isRequired:!0}}},AT={description:"Move generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},ET={type:"string",description:"String representation of a MoveStructTag (on-chain Move struct type). This exists so you\n    can specify MoveStructTags as path / query parameters, e.g. for get_events_by_event_handle.\n\n    It is a combination of:\n    1. `move_module_address`, `module_name` and `struct_name`, all joined by `::`\n    2. `struct generic type parameters` joined by `, `\n\n    Examples:\n     * `0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>`\n     * `0x1::account::Account`\n\n    Note:\n    1. Empty chars should be ignored when comparing 2 struct tag ids.\n    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).\n\n    See [doc](https://aptos.dev/concepts/accounts) for more details.\n    ",pattern:"^0x[0-9a-zA-Z:_<>]+$"},kT={description:'This is a JSON representation of some data within an account resource. More specifically,\n    it is a map of strings to arbitrary JSON values / objects, where the keys are top level\n    fields within the given resource.\n\n    To clarify, you might query for 0x1::account::Account and see the example data.\n\n    Move `bool` type value is serialized into `boolean`.\n\n    Move `u8`, `u16` and `u32` type value is serialized into `integer`.\n\n    Move `u64`, `u128` and `u256` type value is serialized into `string`.\n\n    Move `address` type value (32 byte Aptos account address) is serialized into a HexEncodedBytes string.\n    For example:\n    - `0x1`\n    - `0x1668f6be25668c1a17cd8caf6b8d2f25`\n\n    Move `vector` type value is serialized into `array`, except `vector<u8>` which is serialized into a\n    HexEncodedBytes string with `0x` prefix.\n    For example:\n    - `vector<u64>{255, 255}` => `["255", "255"]`\n    - `vector<u8>{255, 255}` => `0xffff`\n\n    Move `struct` type value is serialized into `object` that looks like this (except some Move stdlib types, see the following section):\n    ```json\n    {\n        field1_name: field1_value,\n        field2_name: field2_value,\n        ......\n    }\n    ```\n\n    For example:\n    `{ "created": "0xa550c18", "role_id": "0" }`\n\n     **Special serialization for Move stdlib types**:\n    - [0x1::string::String](https://github.com/aptos-labs/aptos-core/blob/main/language/move-stdlib/docs/ascii.md)\n    is serialized into `string`. For example, struct value `0x1::string::String{bytes: b"Hello World!"}`\n    is serialized as `"Hello World!"` in JSON.\n    ',properties:{}},BT={type:"string",description:`String representation of an on-chain Move type tag that is exposed in transaction payload.
    Values:
    - bool
    - u8
    - u16
    - u32
    - u64
    - u128
    - u256
    - address
    - signer
    - vector: \`vector<{non-reference MoveTypeId}>\`
    - struct: \`{address}::{module_name}::{struct_name}::<{generic types}>\`

    Vector type value examples:
    - \`vector<u8>\`
    - \`vector<vector<u64>>\`
    - \`vector<0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>>\`

    Struct type value examples:
    - \`0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>
    - \`0x1::account::Account\`

    Note:
    1. Empty chars should be ignored when comparing 2 struct tag ids.
    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).
    `,pattern:"^(bool|u8|u64|u128|address|signer|vector<.+>|0x[0-9a-zA-Z:_<, >]+)$"},RT={type:"any-of",description:"An enum of the possible Move value types",contains:[{type:"number",format:"uint8"},{type:"number",format:"uint16"},{type:"number",format:"uint32"},{type:"U64"},{type:"U128"},{type:"U256"},{type:"boolean"},{type:"Address"},{type:"array",contains:{type:"MoveValue"}},{type:"HexEncodedBytes"},{type:"MoveStructValue"},{type:"string"}]},PT={description:`Multi agent signature for multi agent transactions

    This allows you to have transactions across multiple accounts`,properties:{sender:{type:"AccountSignature",isRequired:!0},secondary_signer_addresses:{type:"array",contains:{type:"Address"},isRequired:!0},secondary_signers:{type:"array",contains:{type:"AccountSignature"},isRequired:!0}}},OT={description:`A Ed25519 multi-sig signature

    This allows k-of-n signing for a transaction`,properties:{public_keys:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},signatures:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},threshold:{type:"number",description:"The number of signatures required for a successful transaction",isRequired:!0,format:"uint8"},bitmap:{type:"HexEncodedBytes",isRequired:!0}}},IT={description:`A multisig transaction that allows an owner of a multisig account to execute a pre-approved
    transaction as the multisig account.`,properties:{multisig_address:{type:"Address",isRequired:!0},transaction_payload:{type:"MultisigTransactionPayload"}}},CT={type:"any-of",contains:[{type:"EntryFunctionPayload"}]},$T={description:"A transaction waiting in mempool",properties:{hash:{type:"HashValue",isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"}}},UT={description:"Table Item request for the GetTableItemRaw API",properties:{key:{type:"HexEncodedBytes",isRequired:!0}}},MT={type:"Enum"},qT={description:"Payload which runs a script that can run multiple functions",properties:{code:{type:"MoveScriptBytecode",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},NT={properties:{execute_as:{type:"Address",isRequired:!0},script:{type:"ScriptPayload",isRequired:!0}}},DT={description:"A state checkpoint transaction",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},LT={type:"string",description:`Representation of a StateKey as a hex string. This is used for cursor based pagination.
    `},HT={description:`A request to submit a transaction

    This requires a transaction and a signature of it`,properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature",isRequired:!0}}},zT={description:"Table Item request for the GetTableItem API",properties:{key_type:{type:"MoveType",isRequired:!0},value_type:{type:"MoveType",isRequired:!0},key:{description:"The value of the table item's key",properties:{},isRequired:!0}}},jT={type:"one-of",description:"Enum of the different types of transactions in Aptos",contains:[{type:"Transaction_PendingTransaction"},{type:"Transaction_UserTransaction"},{type:"Transaction_GenesisTransaction"},{type:"Transaction_BlockMetadataTransaction"},{type:"Transaction_StateCheckpointTransaction"}]},FT={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"BlockMetadataTransaction"}]},GT={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"GenesisTransaction"}]},WT={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"PendingTransaction"}]},VT={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"StateCheckpointTransaction"}]},KT={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"UserTransaction"}]},XT={type:"one-of",description:"An enum of the possible transaction payloads",contains:[{type:"TransactionPayload_EntryFunctionPayload"},{type:"TransactionPayload_ScriptPayload"},{type:"TransactionPayload_ModuleBundlePayload"},{type:"TransactionPayload_MultisigPayload"}]},ZT={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"EntryFunctionPayload"}]},JT={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ModuleBundlePayload"}]},YT={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultisigPayload"}]},QT={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptPayload"}]},eA={description:"Information telling which batch submission transactions failed",properties:{error:{type:"AptosError",isRequired:!0},transaction_index:{type:"number",description:"The index of which transaction failed, same as submission order",isRequired:!0,format:"uint64"}}},tA={description:`Batch transaction submission result

    Tells which transactions failed`,properties:{transaction_failures:{type:"array",contains:{type:"TransactionsBatchSingleSubmissionFailure"},isRequired:!0}}},nA={type:"one-of",description:"An enum representing the different transaction signatures available",contains:[{type:"TransactionSignature_Ed25519Signature"},{type:"TransactionSignature_MultiEd25519Signature"},{type:"TransactionSignature_MultiAgentSignature"}]},rA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},iA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiAgentSignature"}]},sA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},oA={type:"string",description:`A string containing a 128-bit unsigned integer.

    We represent u128 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u128s in JSON natively.
    `,format:"uint128"},aA={type:"string",description:`A string containing a 256-bit unsigned integer.

    We represent u256 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u256s in JSON natively.
    `,format:"uint256"},cA={type:"string",description:`A string containing a 64-bit unsigned integer.

    We represent u64 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u64s in JSON natively.
    `,format:"uint64"},uA={description:"A transaction submitted by a user to change the state of the blockchain",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"},events:{type:"array",contains:{type:"Event"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},lA={description:"An event from a transaction with a version",properties:{version:{type:"U64",isRequired:!0},guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},dA={description:"View request for the Move View Function API",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},fA={description:"Write a new module or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveModuleBytecode",isRequired:!0}}},hA={description:"Write a resource or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveResource",isRequired:!0}}},pA={type:"one-of",description:"The associated writeset with a payload",contains:[{type:"WriteSet_ScriptWriteSet"},{type:"WriteSet_DirectWriteSet"}]},gA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DirectWriteSet"}]},yA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptWriteSet"}]},mA={type:"one-of",description:"A final state change of a transaction on a resource or module",contains:[{type:"WriteSetChange_DeleteModule"},{type:"WriteSetChange_DeleteResource"},{type:"WriteSetChange_DeleteTableItem"},{type:"WriteSetChange_WriteModule"},{type:"WriteSetChange_WriteResource"},{type:"WriteSetChange_WriteTableItem"}]},_A={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteModule"}]},wA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteResource"}]},bA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteTableItem"}]},vA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteModule"}]},xA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteResource"}]},SA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteTableItem"}]},TA={description:"A writeset payload, used only for genesis",properties:{write_set:{type:"WriteSet",isRequired:!0}}},AA={description:"Change set to write a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},value:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DecodedTableData"}}},EA=new wa(wn.fromHex("0x1"),new _r("string"),new _r("String"),[]);function jd(e,t,n){if(!(t!=null&&t.includes(typeof e)))throw new Error(n||`Invalid arg: ${e} type should be ${t instanceof Array?t.join(" or "):t}`)}function Gs(e){throw new Error(e)}function Tg(e){return!!e.match(/\s/)}function Ag(e){return!!e.match(/[_A-Za-z0-9]/g)}function kA(e,t){const n=e[t];if(n===":"){if(e.slice(t,t+2)==="::")return[["COLON","::"],2];Gs("Unrecognized token.")}else{if(n==="<")return[["LT","<"],1];if(n===">")return[["GT",">"],1];if(n===",")return[["COMMA",","],1];if(Tg(n)){let r="";for(let i=t;i<e.length;i+=1){const s=e[i];if(Tg(s))r=`${r}${s}`;else break}return[["SPACE",r],r.length]}else if(Ag(n)){let r="";for(let i=t;i<e.length;i+=1){const s=e[i];if(Ag(s))r=`${r}${s}`;else break}return[["IDENT",r],r.length]}}throw new Error("Unrecognized token.")}function BA(e){let t=0;const n=[];for(;t<e.length;){const[r,i]=kA(e,t);r[0]!=="SPACE"&&n.push(r),t+=i}return n}var Fd=class{constructor(e){this.tokens=BA(e)}consume(e){const t=this.tokens.shift();(!t||t[1]!==e)&&Gs("Invalid type tag.")}parseCommaList(e,t){const n=[];for(this.tokens.length<=0&&Gs("Invalid type tag.");this.tokens[0][1]!==e&&(n.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===e||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===e&&t)));)this.tokens.length<=0&&Gs("Invalid type tag.");return n}parseTypeTag(){this.tokens.length===0&&Gs("Invalid type tag.");const[e,t]=this.tokens.shift();if(t==="u8")return new Xi;if(t==="u16")return new Da;if(t==="u32")return new La;if(t==="u64")return new Ro;if(t==="u128")return new Po;if(t==="u256")return new Ha;if(t==="bool")return new Bo;if(t==="address")return new Oo;if(t==="vector"){this.consume("<");const n=this.parseTypeTag();return this.consume(">"),new za(n)}if(e==="IDENT"&&(t.startsWith("0x")||t.startsWith("0X"))){const n=t;this.consume("::");const[r,i]=this.tokens.shift();r!=="IDENT"&&Gs("Invalid type tag."),this.consume("::");const[s,o]=this.tokens.shift();s!=="IDENT"&&Gs("Invalid type tag.");let a=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),a=this.parseCommaList(">",!0),this.consume(">"));const c=new wa(wn.fromHex(n),new _r(i),new _r(o),a);return new Io(c)}throw new Error("Invalid type tag.")}};function K_(e){if(jd(e,["boolean","string"]),typeof e=="boolean")return e;if(e==="true")return!0;if(e==="false")return!1;throw new Error("Invalid boolean string.")}function ra(e){if(jd(e,["number","string"]),typeof e=="number")return e;const t=Number.parseInt(e,10);if(Number.isNaN(t))throw new Error("Invalid number string.");return t}function ia(e){return jd(e,["number","bigint","string"]),BigInt(e)}function jh(e,t,n){if(t instanceof Bo){n.serializeBool(K_(e));return}if(t instanceof Xi){n.serializeU8(ra(e));return}if(t instanceof Da){n.serializeU16(ra(e));return}if(t instanceof La){n.serializeU32(ra(e));return}if(t instanceof Ro){n.serializeU64(ia(e));return}if(t instanceof Po){n.serializeU128(ia(e));return}if(t instanceof Ha){n.serializeU256(ia(e));return}if(t instanceof Oo){let r;if(typeof e=="string"||e instanceof pt)r=wn.fromHex(e);else if(e instanceof wn)r=e;else throw new Error("Invalid account address.");r.serialize(n);return}if(t instanceof za){if(t.value instanceof Xi){if(e instanceof Uint8Array){n.serializeBytes(e);return}if(typeof e=="string"){n.serializeStr(e);return}}if(!Array.isArray(e))throw new Error("Invalid vector args.");n.serializeU32AsUleb128(e.length),e.forEach(r=>jh(r,t.value,n));return}if(t instanceof Io){const{address:r,module_name:i,name:s}=t.value;if(`${pt.fromUint8Array(r.address).toShortString()}::${i.value}::${s.value}`!="0x1::string::String")throw new Error("The only supported struct arg is of type 0x1::string::String");jd(e,["string"]),n.serializeStr(e);return}throw new Error("Unsupported arg type.")}function RA(e,t){if(t instanceof Bo)return new Dd(K_(e));if(t instanceof Xi)return new $d(ra(e));if(t instanceof Da)return new Ud(ra(e));if(t instanceof La)return new Md(ra(e));if(t instanceof Ro)return new ba(ia(e));if(t instanceof Po)return new qd(ia(e));if(t instanceof Ha)return new Nd(ia(e));if(t instanceof Oo){let n;if(typeof e=="string"||e instanceof pt)n=wn.fromHex(e);else if(e instanceof wn)n=e;else throw new Error("Invalid account address.");return new va(n)}if(t instanceof za&&t.value instanceof Xi){if(!(e instanceof Uint8Array))throw new Error(`${e} should be an instance of Uint8Array`);return new xa(e)}throw new Error("Unknown type for TransactionArgument.")}var PA="APTOS::RawTransaction",OA="APTOS::RawTransactionWithData",Aa=class{constructor(e,t){this.rawTxnBuilder=t,this.signingFunction=e}build(e,t,n){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(e,t,n)}static getSigningMessage(e){const t=_a.create();if(e instanceof ja)t.update(PA);else if(e instanceof Od)t.update(OA);else throw new Error("Unknown transaction type.");const n=t.digest(),r=Qi(e),i=new Uint8Array(n.length+r.length);return i.set(n),i.set(r,n.length),i}},Vu=class extends Aa{constructor(e,t,n){super(e,n),this.publicKey=t}rawToSigned(e){const t=Aa.getSigningMessage(e),n=this.signingFunction(t),r=new Rd(new Qr(this.publicKey),n);return new Qc(e,r)}sign(e){return Qi(this.rawToSigned(e))}},IA=class extends Aa{constructor(e,t){super(e),this.publicKey=t}rawToSigned(e){const t=Aa.getSigningMessage(e),n=this.signingFunction(t),r=new Pd(this.publicKey,n);return new Qc(e,r)}sign(e){return Qi(this.rawToSigned(e))}},ul=class{constructor(e,t){this.abiMap=new Map,e.forEach(n=>{const r=new Ch(n),i=Ld.deserialize(r);let s;if(i instanceof Sa){const o=i,{address:a,name:c}=o.module_name;s=`${pt.fromUint8Array(a.address).toShortString()}::${c.value}::${o.name}`}else s=i.name;if(this.abiMap.has(s))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(s,i)}),this.builderConfig={maxGasAmount:BigInt(T_),expSecFromNow:A_,...t}}static toBCSArgs(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((n,r)=>{const i=new kn;return jh(n,e[r].type_tag,i),i.getBytes()})}static toTransactionArguments(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((n,r)=>RA(n,e[r].type_tag))}setSequenceNumber(e){this.builderConfig.sequenceNumber=BigInt(e)}buildTransactionPayload(e,t,n){const r=t.map(o=>new Fd(o).parseTypeTag());let i;if(!this.abiMap.has(e))throw new Error(`Cannot find function: ${e}`);const s=this.abiMap.get(e);if(s instanceof Sa){const o=s,a=ul.toBCSArgs(o.args,n);i=new Id(new ro(o.module_name,new _r(o.name),r,a))}else if(s instanceof Hd){const o=s,a=ul.toTransactionArguments(o.args,n);i=new tu(new Yc(o.code,r,a))}else throw new Error("Unknown ABI format.");return i}build(e,t,n){const{sender:r,sequenceNumber:i,gasUnitPrice:s,maxGasAmount:o,expSecFromNow:a,chainId:c}=this.builderConfig;if(!s)throw new Error("No gasUnitPrice provided.");const u=r instanceof wn?r:wn.fromHex(r),d=BigInt(Math.floor(Date.now()/1e3)+Number(a)),l=this.buildTransactionPayload(e,t,n);if(l)return new ja(u,BigInt(i),l,BigInt(o),BigInt(s),d,new Cd(Number(c)));throw new Error("Invalid ABI.")}},X_=class{constructor(e,t){this.aptosClient=e,this.builderConfig=t}async fetchABI(e){const n=(await this.aptosClient.getAccountModules(e)).map(i=>i.abi).flatMap(i=>i.exposed_functions.filter(s=>s.is_entry).map(s=>({fullName:`${i.address}::${i.name}::${s.name}`,...s}))),r=new Map;return n.forEach(i=>{r.set(i.fullName,i)}),r}async build(e,t,n){if(e=(x=>x.replace(/^0[xX]0*/g,"0x"))(e),e.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coins::transfer");const[s,o]=e.split("::"),a=await this.fetchABI(s);if(!a.has(e))throw new Error(`${e} doesn't exist.`);const c=a.get(e),d=c.params.filter(x=>x!=="signer"&&x!=="&signer").map((x,S)=>new ru(`var${S}`,new Fd(x).parseTypeTag())),l=new Sa(c.name,uo.fromStr(`${s}::${o}`),"",c.generic_type_params.map((x,S)=>new nu(`${S}`)),d),{sender:f,...p}=this.builderConfig,_=f instanceof wn?pt.fromUint8Array(f.address):f,[{sequence_number:y},b,{gas_estimate:B}]=await Promise.all([p!=null&&p.sequenceNumber?Promise.resolve({sequence_number:p==null?void 0:p.sequenceNumber}):this.aptosClient.getAccount(_),p!=null&&p.chainId?Promise.resolve(p==null?void 0:p.chainId):this.aptosClient.getChainId(),p!=null&&p.gasUnitPrice?Promise.resolve({gas_estimate:p==null?void 0:p.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new ul([Qi(l)],{sender:f,sequenceNumber:y,chainId:b,gasUnitPrice:BigInt(B),...p}).build(e,t,n)}};tn([QS(10*60*1e3)],X_.prototype,"fetchABI",1);var ic=class{constructor(e,t,n=!1){if(!e)throw new Error("Node URL cannot be empty.");const r=t==null?{}:{...t};n?this.nodeUrl=e:this.nodeUrl=ZS(e),r.BASE=this.nodeUrl,(t==null?void 0:t.WITH_CREDENTIALS)===!1?r.WITH_CREDENTIALS=!1:r.WITH_CREDENTIALS=!0,this.client=new F_(r)}async getAccount(e){return this.client.accounts.getAccount(pt.ensure(e).hex())}async getAccountTransactions(e,t){var n;return this.client.transactions.getAccountTransactions(pt.ensure(e).hex(),(n=t==null?void 0:t.start)==null?void 0:n.toString(),t==null?void 0:t.limit)}async getAccountModules(e,t){const n=this.client.accounts.getAccountModules.bind({httpRequest:this.client.request});return await Sg(n,e,1e3,t)}async getAccountModule(e,t,n){var r;return this.client.accounts.getAccountModule(pt.ensure(e).hex(),t,(r=n==null?void 0:n.ledgerVersion)==null?void 0:r.toString())}async getAccountResources(e,t){const n=this.client.accounts.getAccountResources.bind({httpRequest:this.client.request});return await Sg(n,e,9999,t)}async getAccountResource(e,t,n){var r;return this.client.accounts.getAccountResource(pt.ensure(e).hex(),t,(r=n==null?void 0:n.ledgerVersion)==null?void 0:r.toString())}static generateBCSTransaction(e,t){return new Vu(r=>{const i=e.signBuffer(r);return new V.Ed25519Signature(i.toUint8Array())},e.pubKey().toUint8Array()).sign(t)}static generateBCSSimulation(e,t){return new Vu(r=>{const i=new Uint8Array(64);return new V.Ed25519Signature(i)},e.pubKey().toUint8Array()).sign(t)}async generateTransaction(e,t,n){const r={sender:e};if(n!=null&&n.sequence_number&&(r.sequenceNumber=n.sequence_number),n!=null&&n.gas_unit_price&&(r.gasUnitPrice=n.gas_unit_price),n!=null&&n.max_gas_amount&&(r.maxGasAmount=n.max_gas_amount),n!=null&&n.expiration_timestamp_secs){const s=Number.parseInt(n.expiration_timestamp_secs,10);r.expSecFromNow=s-Math.floor(Date.now()/1e3)}return new X_(this,r).build(t.function,t.type_arguments,t.arguments)}async signTransaction(e,t){return Promise.resolve(ic.generateBCSTransaction(e,t))}async getEventsByCreationNumber(e,t,n){var r;return this.client.events.getEventsByCreationNumber(pt.ensure(e).hex(),t.toString(),(r=n==null?void 0:n.start)==null?void 0:r.toString(),n==null?void 0:n.limit)}async getEventsByEventHandle(e,t,n,r){var i;return this.client.events.getEventsByEventHandle(pt.ensure(e).hex(),t,n,(i=r==null?void 0:r.start)==null?void 0:i.toString(),r==null?void 0:r.limit)}async submitTransaction(e){return this.submitSignedBCSTransaction(e)}async simulateTransaction(e,t,n){let r;return e instanceof xc?r=ic.generateBCSSimulation(e,t):e instanceof Zc?r=new IA(()=>{const{threshold:s}=e,o=[],a=[];for(let u=0;u<s;u+=1)o.push(u),a.push(new V.Ed25519Signature(new Uint8Array(64)));const c=V.MultiEd25519Signature.createBitmap(o);return new V.MultiEd25519Signature(a,c)},e).sign(t):r=new Vu(()=>{const s=new Uint8Array(64);return new V.Ed25519Signature(s)},e.toBytes()).sign(t),this.submitBCSSimulation(r,n)}async submitSignedBCSTransaction(e){return this.client.request.request({url:"/transactions",method:"POST",body:e,mediaType:"application/x.aptos.signed_transaction+bcs"})}async submitBCSSimulation(e,t){var n,r,i;const s={estimate_gas_unit_price:(n=t==null?void 0:t.estimateGasUnitPrice)!=null?n:!1,estimate_max_gas_amount:(r=t==null?void 0:t.estimateMaxGasAmount)!=null?r:!1,estimate_prioritized_gas_unit_price:(i=t==null?void 0:t.estimatePrioritizedGasUnitPrice)!=null?i:!1};return this.client.request.request({url:"/transactions/simulate",query:s,method:"POST",body:e,mediaType:"application/x.aptos.signed_transaction+bcs"})}async getTransactions(e){var t;return this.client.transactions.getTransactions((t=e==null?void 0:e.start)==null?void 0:t.toString(),e==null?void 0:e.limit)}async getTransactionByHash(e){return this.client.transactions.getTransactionByHash(e)}async getTransactionByVersion(e){return this.client.transactions.getTransactionByVersion(e.toString())}async transactionPending(e){try{return(await this.client.transactions.getTransactionByHash(e)).type==="pending_transaction"}catch(t){if((t==null?void 0:t.status)===404)return!0;throw t}}async waitForTransactionWithResult(e,t){var n,r;const i=(n=t==null?void 0:t.timeoutSecs)!=null?n:JS,s=(r=t==null?void 0:t.checkSuccess)!=null?r:!1;let o=!0,a=0,c;for(;o&&!(a>=i);){try{if(c=await this.client.transactions.getTransactionByHash(e),o=c.type==="pending_transaction",!o)break}catch(u){const d=u instanceof Sc,l=d&&u.status!==404&&u.status>=400&&u.status<500;if(!d||l)throw u}await XS(1e3),a+=1}if(c===void 0)throw new Error(`Waiting for transaction ${e} failed`);if(o)throw new $A(`Waiting for transaction ${e} timed out after ${i} seconds`,c);if(!s)return c;if(!(c!=null&&c.success))throw new UA(`Transaction ${e} committed to the blockchain but execution failed`,c);return c}async waitForTransaction(e,t){await this.waitForTransactionWithResult(e,t)}async getLedgerInfo(){return this.client.general.getLedgerInfo()}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(e,t,n){var r;return await this.client.tables.getTableItem(e,t,(r=n==null?void 0:n.ledgerVersion)==null?void 0:r.toString())}async generateRawTransaction(e,t,n){const[{sequence_number:r},i,{gas_estimate:s}]=await Promise.all([this.getAccount(e),this.getChainId(),n!=null&&n.gasUnitPrice?Promise.resolve({gas_estimate:n.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:o,gasUnitPrice:a,expireTimestamp:c}={maxGasAmount:BigInt(T_),gasUnitPrice:BigInt(s),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+A_),...n};return new V.RawTransaction(V.AccountAddress.fromHex(e),BigInt(r),t,o,a,c,new V.ChainId(i))}async generateSignSubmitTransaction(e,t,n){const r=await this.generateRawTransaction(e.address(),t,n),i=ic.generateBCSTransaction(e,r);return(await this.submitSignedBCSTransaction(i)).hash}async publishPackage(e,t,n,r){const i=new kn;zr(n,i);const s=new V.TransactionPayloadEntryFunction(V.EntryFunction.natural("0x1::code","publish_package_txn",[],[zo(t),i.getBytes()]));return this.generateSignSubmitTransaction(e,s,r)}async generateSignSubmitWaitForTransaction(e,t,n){const r=await this.generateSignSubmitTransaction(e,t,n);return this.waitForTransactionWithResult(r,n)}async estimateGasPrice(){return this.client.transactions.estimateGasPrice()}async estimateMaxGasAmount(e){const t=`0x1::coin::CoinStore<${YS}>`,[{gas_estimate:n},r]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(e)]),i=r.find(o=>o.type===t);return BigInt(i.data.coin.value)/BigInt(n)}async rotateAuthKeyEd25519(e,t,n){const{sequence_number:r,authentication_key:i}=await this.getAccount(e.address()),s=new xc(t),o=new V.RotationProofChallenge(V.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(r),V.AccountAddress.fromHex(e.address()),new V.AccountAddress(new pt(i).toUint8Array()),s.pubKey().toUint8Array()),a=pt.fromUint8Array(Qi(o)),c=e.signHexString(a),u=s.signHexString(a),d=new V.TransactionPayloadEntryFunction(V.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[y0(0),zo(e.pubKey().toUint8Array()),y0(0),zo(s.pubKey().toUint8Array()),zo(c.toUint8Array()),zo(u.toUint8Array())])),l=await this.generateRawTransaction(e.address(),d,n),f=ic.generateBCSTransaction(e,l);return this.submitSignedBCSTransaction(f)}async lookupOriginalAddress(e){const t=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:n}}=t.data,r=await this.getTableItem(n,{key_type:"address",value_type:"address",key:pt.ensure(e).hex()});return new pt(r)}async getBlockByHeight(e,t){return this.client.blocks.getBlockByHeight(e,t)}async getBlockByVersion(e,t){return this.client.blocks.getBlockByVersion(e,t)}async view(e,t){return this.client.view.view(e,t)}clearCache(e){e8(e)}},Vt=ic;tn([$n],Vt.prototype,"getAccount",1);tn([$n],Vt.prototype,"getAccountTransactions",1);tn([$n],Vt.prototype,"getAccountModules",1);tn([$n],Vt.prototype,"getAccountModule",1);tn([$n],Vt.prototype,"getAccountResources",1);tn([$n],Vt.prototype,"getAccountResource",1);tn([$n],Vt.prototype,"getEventsByCreationNumber",1);tn([$n],Vt.prototype,"getEventsByEventHandle",1);tn([$n],Vt.prototype,"submitSignedBCSTransaction",1);tn([$n],Vt.prototype,"submitBCSSimulation",1);tn([$n],Vt.prototype,"getTransactions",1);tn([$n],Vt.prototype,"getTransactionByHash",1);tn([$n],Vt.prototype,"getTransactionByVersion",1);tn([$n],Vt.prototype,"getLedgerInfo",1);tn([kd()],Vt.prototype,"getChainId",1);tn([$n],Vt.prototype,"getTableItem",1);tn([$n,kd({ttlMs:5*60*1e3,tags:["gas_estimates"]})],Vt.prototype,"estimateGasPrice",1);tn([$n],Vt.prototype,"estimateMaxGasAmount",1);tn([$n],Vt.prototype,"getBlockByHeight",1);tn([$n],Vt.prototype,"getBlockByVersion",1);tn([$n],Vt.prototype,"view",1);var CA=class extends Error{constructor(e,t,n,r){super(t),this.status=e,this.message=t,this.errorCode=n,this.vmErrorCode=r}},$A=class extends Error{constructor(e,t){super(e),this.lastSubmittedTransaction=t}},UA=class extends Error{constructor(e,t){super(e),this.transaction=t}};function $n(e,t,n){const r=n.value;return n.value=async function(...s){var o,a;try{return await r.apply(this,[...s])}catch(c){throw c instanceof Sc?new CA(c.status,JSON.stringify({message:c.message,...c.body}),(o=c.body)==null?void 0:o.error_code,(a=c.body)==null?void 0:a.vm_error_code):c}},n}var Z_=class{constructor(e,t,n=!1){let r=null,i=null;if(typeof e=="object"&&MA(e)?(r=e.fullnodeUrl,i=e.indexerUrl):(r=n8[e],i=t8[e]),!r||!i)throw new Error("network is not provided");this.aptosClient=new Vt(r,t,n),this.indexerClient=new P_(i)}};function J_(e,t,n){Object.getOwnPropertyNames(t.prototype).forEach(r=>{const i=Object.getOwnPropertyDescriptor(t.prototype,r);i&&(i.value=function(...s){return this[n][r](...s)},Object.defineProperty(e.prototype,r,i))})}J_(Z_,Vt,"aptosClient");J_(Z_,P_,"indexerClient");function MA(e){return e.fullnodeUrl!==void 0&&typeof e.fullnodeUrl=="string"&&e.indexerUrl!==void 0&&typeof e.indexerUrl=="string"}var qA="a11ceb0b0500000006010004020408030c0a05161d073339086c400000010100020700010307000104030100010504020007060c0508000800030503010801000405080008000304060c0801050306737472696e6705746f6b656e06537472696e6707546f6b656e4964136372656174655f746f6b656e5f69645f726177087472616e73666572000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000030000010c0b010b020b030b0411000c070b000b070b050b06110102",NA=["01186372656174655F636F6C6C656374696F6E5F736372697074000000000000000000000000000000000000000000000000000000000000000305746F6B656E3020637265617465206120656D70747920746F6B656E20636F6C6C656374696F6E207769746820706172616D65746572730005046E616D6507000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67000B6465736372697074696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67000375726907000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700076D6178696D756D020E6D75746174655F73657474696E670600","01136372656174655F746F6B656E5F736372697074000000000000000000000000000000000000000000000000000000000000000305746F6B656E1D2063726561746520746F6B656E20776974682072617720696E70757473000D0A636F6C6C656374696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700046E616D6507000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67000B6465736372697074696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67000762616C616E636502076D6178696D756D020375726907000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E670015726F79616C74795F70617965655F61646472657373041A726F79616C74795F706F696E74735F64656E6F6D696E61746F720218726F79616C74795F706F696E74735F6E756D657261746F72020E6D75746174655F73657474696E6706000D70726F70657274795F6B6579730607000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67000F70726F70657274795F76616C7565730606010E70726F70657274795F74797065730607000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700","01166469726563745f7472616e736665725f736372697074000000000000000000000000000000000000000000000000000000000000000305746f6b656e0000051063726561746f72735f61646472657373040a636f6c6c656374696f6e07000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e6700046e616d6507000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e67001070726f70657274795f76657273696f6e0206616d6f756e7402","010C6F666665725F73637269707400000000000000000000000000000000000000000000000000000000000000030F746F6B656E5F7472616E7366657273000006087265636569766572040763726561746F72040A636F6C6C656374696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700046E616D6507000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67001070726F70657274795F76657273696F6E0206616D6F756E7402","010C636C61696D5F73637269707400000000000000000000000000000000000000000000000000000000000000030F746F6B656E5F7472616E73666572730000050673656E646572040763726561746F72040A636F6C6C656374696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700046E616D6507000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67001070726F70657274795F76657273696F6E02","011363616E63656C5F6F666665725F73637269707400000000000000000000000000000000000000000000000000000000000000030F746F6B656E5F7472616E7366657273000005087265636569766572040763726561746F72040A636F6C6C656374696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700046E616D6507000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67001070726F70657274795F76657273696F6E02","01176d75746174655f746f6b656e5f70726f70657274696573000000000000000000000000000000000000000000000000000000000000000305746f6b656eba02206d75746174652074686520746f6b656e2070726f706572747920616e64207361766520746865206e65772070726f706572747920696e20546f6b656e53746f72650a2069662074686520746f6b656e2070726f70657274795f76657273696f6e20697320302c2077652077696c6c206372656174652061206e65772070726f70657274795f76657273696f6e2070657220746f6b656e20746f2067656e65726174652061206e657720746f6b656e5f69642070657220746f6b656e0a2069662074686520746f6b656e2070726f70657274795f76657273696f6e206973206e6f7420302c2077652077696c6c206a75737420757064617465207468652070726f70657274794d617020616e642075736520746865206578697374696e6720746f6b656e5f6964202870726f70657274795f76657273696f6e2900090b746f6b656e5f6f776e6572040763726561746f72040f636f6c6c656374696f6e5f6e616d6507000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e67000a746f6b656e5f6e616d6507000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e670016746f6b656e5f70726f70657274795f76657273696f6e0206616d6f756e7402046b6579730607000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e67000676616c7565730606010574797065730607000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e6700","01166f70745f696e5f6469726563745f7472616e73666572000000000000000000000000000000000000000000000000000000000000000305746f6b656e000001066f70745f696e00","01046275726e000000000000000000000000000000000000000000000000000000000000000305746f6b656e20204275726e206120746f6b656e2062792074686520746f6b656e206f776e657200051063726561746f72735f61646472657373040a636f6c6c656374696f6e07000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e6700046e616d6507000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e67001070726f70657274795f76657273696f6e0206616d6f756e7402","010f6275726e5f62795f63726561746f72000000000000000000000000000000000000000000000000000000000000000305746f6b656e6a204275726e206120746f6b656e2062792063726561746f72207768656e2074686520746f6b656e2773204255524e41424c455f42595f43524541544f5220697320747275650a2054686520746f6b656e206973206f776e65642061742061646472657373206f776e65720005056f776e6572040a636f6c6c656374696f6e07000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e6700046e616d6507000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e67001070726f70657274795f76657273696f6e0206616d6f756e7402"],Y_=class{constructor(e,t){this.type=e,this.value=t}},Fh=class{constructor(){this.data={}}setProperty(e,t){this.data[e]=t}};function Q_(e){let t;return e==="string"||e==="String"?t=new Io(EA):t=new Fd(e).parseTypeTag(),t}function DA(e,t){if(e.length!==t.length)throw new Error("Length of property values and types not match");const n=new Array;return t.forEach((r,i)=>{try{const s=Q_(r),o=new kn;jh(e[i],s,o),n.push(o.getBytes())}catch{n.push(new TextEncoder().encode(e[i]))}}),n}function ew(e){const t=e.map.data,n=new Fh;return t.forEach(r=>{const{key:i}=r,s=r.value.value,o=r.value.type,a=Q_(o),c=LA(a,s),u=new Y_(o,c);n.setProperty(i,u)}),n}function LA(e,t){const n=new Ch(new pt(t).toUint8Array());let r="";return e instanceof Xi?r=n.deserializeU8().toString():e instanceof Ro?r=n.deserializeU64().toString():e instanceof Po?r=n.deserializeU128().toString():e instanceof Bo?r=n.deserializeBool()?"true":"false":e instanceof Oo?r=pt.fromUint8Array(n.deserializeFixedBytes(32)).hex():e instanceof Io&&e.isStringTypeTag()?r=n.deserializeStr():r=t,r}var HA={};Ed(HA,{PropertyMap:()=>Fh,PropertyValue:()=>Y_,Token:()=>nw,TokenData:()=>tw});var tw=class{constructor(e,t,n,r,i,s,o,a){this.collection=e,this.description=t,this.name=n,this.maximum=r,this.supply=i,this.uri=s,this.default_properties=ew(o),this.mutability_config=a}},nw=class{constructor(e,t,n){this.id=e,this.amount=t,this.token_properties=ew(n)}},zA=class{constructor(e){this.aptosClient=e,this.transactionBuilder=new ul(NA.map(t=>new pt(t).toUint8Array()))}async createCollection(e,t,n,r,i=pc,s){const o=this.transactionBuilder.buildTransactionPayload("0x3::token::create_collection_script",[],[t,n,r,i,[!1,!1,!1]]);return this.aptosClient.generateSignSubmitTransaction(e,o,s)}async createToken(e,t,n,r,i,s,o=pc,a=e.address(),c=0,u=0,d=[],l=[],f=[],p){const _=this.transactionBuilder.buildTransactionPayload("0x3::token::create_token_script",[],[t,n,r,i,o,s,a,c,u,[!1,!1,!1,!1,!1],d,DA(l,f),f]);return this.aptosClient.generateSignSubmitTransaction(e,_,p)}async createTokenWithMutabilityConfig(e,t,n,r,i,s,o=pc,a=e.address(),c=0,u=0,d=[],l=[],f=[],p=[!1,!1,!1,!1,!1],_){const y=this.transactionBuilder.buildTransactionPayload("0x3::token::create_token_script",[],[t,n,r,i,o,s,a,c,u,p,d,l,f]);return this.aptosClient.generateSignSubmitTransaction(e,y,_)}async offerToken(e,t,n,r,i,s,o=0,a){const c=this.transactionBuilder.buildTransactionPayload("0x3::token_transfers::offer_script",[],[t,n,r,i,o,s]);return this.aptosClient.generateSignSubmitTransaction(e,c,a)}async claimToken(e,t,n,r,i,s=0,o){const a=this.transactionBuilder.buildTransactionPayload("0x3::token_transfers::claim_script",[],[t,n,r,i,s]);return this.aptosClient.generateSignSubmitTransaction(e,a,o)}async cancelTokenOffer(e,t,n,r,i,s=0,o){const a=this.transactionBuilder.buildTransactionPayload("0x3::token_transfers::cancel_offer_script",[],[t,n,r,i,s]);return this.aptosClient.generateSignSubmitTransaction(e,a,o)}async directTransferToken(e,t,n,r,i,s,o=0,a){const c=this.transactionBuilder.buildTransactionPayload("0x3::token::direct_transfer_script",[],[n,r,i,o,s]),u=await this.aptosClient.generateRawTransaction(e.address(),c,a),d=new V.MultiAgentRawTransaction(u,[V.AccountAddress.fromHex(t.address())]),l=new V.Ed25519Signature(e.signBuffer(Aa.getSigningMessage(d)).toUint8Array()),f=new V.AccountAuthenticatorEd25519(new V.Ed25519PublicKey(e.signingKey.publicKey),l),p=new V.Ed25519Signature(t.signBuffer(Aa.getSigningMessage(d)).toUint8Array()),_=new V.AccountAuthenticatorEd25519(new V.Ed25519PublicKey(t.signingKey.publicKey),p),y=new V.TransactionAuthenticatorMultiAgent(f,[V.AccountAddress.fromHex(t.address())],[_]),b=Qi(new V.SignedTransaction(u,y));return(await this.aptosClient.submitSignedBCSTransaction(b)).hash}async optInTokenTransfer(e,t,n){const r=this.transactionBuilder.buildTransactionPayload("0x3::token::opt_in_direct_transfer",[],[t]);return this.aptosClient.generateSignSubmitTransaction(e,r,n)}async transferWithOptIn(e,t,n,r,i,s,o,a){const c=new tu(new Yc(new pt(qA).toUint8Array(),[],[new va(V.AccountAddress.fromHex(t)),new xa(new TextEncoder().encode(n)),new xa(new TextEncoder().encode(r)),new ba(BigInt(i)),new va(V.AccountAddress.fromHex(s)),new ba(BigInt(o))]));return this.aptosClient.generateSignSubmitTransaction(e,c,a)}async burnByCreator(e,t,n,r,i,s,o){const a=this.transactionBuilder.buildTransactionPayload("0x3::token::burn_by_creator",[],[t,n,r,i,s]);return this.aptosClient.generateSignSubmitTransaction(e,a,o)}async burnByOwner(e,t,n,r,i,s,o){const a=this.transactionBuilder.buildTransactionPayload("0x3::token::burn",[],[t,n,r,i,s]);return this.aptosClient.generateSignSubmitTransaction(e,a,o)}async mutateTokenProperties(e,t,n,r,i,s,o,a,c,u,d){const l=this.transactionBuilder.buildTransactionPayload("0x3::token::mutate_token_properties",[],[t,n,r,i,s,o,a,c,u]);return this.aptosClient.generateSignSubmitTransaction(e,l,d)}async getCollectionData(e,t){const r=(await this.aptosClient.getAccountResources(e)).find(a=>a.type==="0x3::token::Collections"),{handle:i}=r.data.collection_data,s={key_type:"0x1::string::String",value_type:"0x3::token::CollectionData",key:t};return await this.aptosClient.getTableItem(i,s)}async getTokenData(e,t,n){const r=e instanceof pt?e.hex():e,i=await this.aptosClient.getAccountResource(r,"0x3::token::Collections"),{handle:s}=i.data.token_data,a={key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:r,collection:t,name:n}},c=await this.aptosClient.getTableItem(s,a);return new tw(c.collection,c.description,c.name,c.maximum,c.supply,c.uri,c.default_properties,c.mutability_config)}async getToken(e,t,n,r="0"){const i={creator:e instanceof pt?e.hex():e,collection:t,name:n};return this.getTokenForAccount(e,{token_data_id:i,property_version:r})}async getTokenForAccount(e,t){const n=await this.aptosClient.getAccountResource(e instanceof pt?e.hex():e,"0x3::token::TokenStore"),{handle:r}=n.data.tokens,i={key_type:"0x3::token::TokenId",value_type:"0x3::token::Token",key:t};try{const s=await this.aptosClient.getTableItem(r,i);return new nw(s.id,s.amount,s.token_properties)}catch(s){return(s==null?void 0:s.status)===404?{id:t,amount:"0",token_properties:new Fh}:s}}},I={},jA={get exports(){return I},set exports(e){I=e}};(function(e){(function(t,n){function r(k,h){if(!k)throw new Error(h||"Assertion failed")}function i(k,h){k.super_=h;var g=function(){};g.prototype=h.prototype,k.prototype=new g,k.prototype.constructor=k}function s(k,h,g){if(s.isBN(k))return k;this.negative=0,this.words=null,this.length=0,this.red=null,k!==null&&((h==="le"||h==="be")&&(g=h,h=10),this._init(k||0,h||10,g||"be"))}typeof t=="object"?t.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=th.Buffer}catch{}s.isBN=function(h){return h instanceof s?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===s.wordSize&&Array.isArray(h.words)},s.max=function(h,g){return h.cmp(g)>0?h:g},s.min=function(h,g){return h.cmp(g)<0?h:g},s.prototype._init=function(h,g,v){if(typeof h=="number")return this._initNumber(h,g,v);if(typeof h=="object")return this._initArray(h,g,v);g==="hex"&&(g=16),r(g===(g|0)&&g>=2&&g<=36),h=h.toString().replace(/\s+/g,"");var O=0;h[0]==="-"&&(O++,this.negative=1),O<h.length&&(g===16?this._parseHex(h,O,v):(this._parseBase(h,g,O),v==="le"&&this._initArray(this.toArray(),g,v)))},s.prototype._initNumber=function(h,g,v){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(r(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),v==="le"&&this._initArray(this.toArray(),g,v)},s.prototype._initArray=function(h,g,v){if(r(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var L,z,W=0;if(v==="be")for(O=h.length-1,L=0;O>=0;O-=3)z=h[O]|h[O-1]<<8|h[O-2]<<16,this.words[L]|=z<<W&67108863,this.words[L+1]=z>>>26-W&67108863,W+=24,W>=26&&(W-=26,L++);else if(v==="le")for(O=0,L=0;O<h.length;O+=3)z=h[O]|h[O+1]<<8|h[O+2]<<16,this.words[L]|=z<<W&67108863,this.words[L+1]=z>>>26-W&67108863,W+=24,W>=26&&(W-=26,L++);return this._strip()};function a(k,h){var g=k.charCodeAt(h);if(g>=48&&g<=57)return g-48;if(g>=65&&g<=70)return g-55;if(g>=97&&g<=102)return g-87;r(!1,"Invalid character in "+k)}function c(k,h,g){var v=a(k,g);return g-1>=h&&(v|=a(k,g-1)<<4),v}s.prototype._parseHex=function(h,g,v){this.length=Math.ceil((h.length-g)/6),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var L=0,z=0,W;if(v==="be")for(O=h.length-1;O>=g;O-=2)W=c(h,g,O)<<L,this.words[z]|=W&67108863,L>=18?(L-=18,z+=1,this.words[z]|=W>>>26):L+=8;else{var $=h.length-g;for(O=$%2===0?g+1:g;O<h.length;O+=2)W=c(h,g,O)<<L,this.words[z]|=W&67108863,L>=18?(L-=18,z+=1,this.words[z]|=W>>>26):L+=8}this._strip()};function u(k,h,g,v){for(var O=0,L=0,z=Math.min(k.length,g),W=h;W<z;W++){var $=k.charCodeAt(W)-48;O*=v,$>=49?L=$-49+10:$>=17?L=$-17+10:L=$,r($>=0&&L<v,"Invalid character"),O+=L}return O}s.prototype._parseBase=function(h,g,v){this.words=[0],this.length=1;for(var O=0,L=1;L<=67108863;L*=g)O++;O--,L=L/g|0;for(var z=h.length-v,W=z%O,$=Math.min(z,z-W)+v,w=0,H=v;H<$;H+=O)w=u(h,H,H+O,g),this.imuln(L),this.words[0]+w<67108864?this.words[0]+=w:this._iaddn(w);if(W!==0){var re=1;for(w=u(h,H,h.length,g),H=0;H<W;H++)re*=g;this.imuln(re),this.words[0]+w<67108864?this.words[0]+=w:this._iaddn(w)}this._strip()},s.prototype.copy=function(h){h.words=new Array(this.length);for(var g=0;g<this.length;g++)h.words[g]=this.words[g];h.length=this.length,h.negative=this.negative,h.red=this.red};function d(k,h){k.words=h.words,k.length=h.length,k.negative=h.negative,k.red=h.red}if(s.prototype._move=function(h){d(h,this)},s.prototype.clone=function(){var h=new s(null);return this.copy(h),h},s.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch{s.prototype.inspect=l}else s.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(h,g){h=h||10,g=g|0||1;var v;if(h===16||h==="hex"){v="";for(var O=0,L=0,z=0;z<this.length;z++){var W=this.words[z],$=((W<<O|L)&16777215).toString(16);L=W>>>24-O&16777215,O+=2,O>=26&&(O-=26,z--),L!==0||z!==this.length-1?v=f[6-$.length]+$+v:v=$+v}for(L!==0&&(v=L.toString(16)+v);v.length%g!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}if(h===(h|0)&&h>=2&&h<=36){var w=p[h],H=_[h];v="";var re=this.clone();for(re.negative=0;!re.isZero();){var Q=re.modrn(H).toString(h);re=re.idivn(H),re.isZero()?v=Q+v:v=f[w-Q.length]+Q+v}for(this.isZero()&&(v="0"+v);v.length%g!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(h,g){return this.toArrayLike(o,h,g)}),s.prototype.toArray=function(h,g){return this.toArrayLike(Array,h,g)};var y=function(h,g){return h.allocUnsafe?h.allocUnsafe(g):new h(g)};s.prototype.toArrayLike=function(h,g,v){this._strip();var O=this.byteLength(),L=v||Math.max(1,O);r(O<=L,"byte array longer than desired length"),r(L>0,"Requested array length <= 0");var z=y(h,L),W=g==="le"?"LE":"BE";return this["_toArrayLike"+W](z,O),z},s.prototype._toArrayLikeLE=function(h,g){for(var v=0,O=0,L=0,z=0;L<this.length;L++){var W=this.words[L]<<z|O;h[v++]=W&255,v<h.length&&(h[v++]=W>>8&255),v<h.length&&(h[v++]=W>>16&255),z===6?(v<h.length&&(h[v++]=W>>24&255),O=0,z=0):(O=W>>>24,z+=2)}if(v<h.length)for(h[v++]=O;v<h.length;)h[v++]=0},s.prototype._toArrayLikeBE=function(h,g){for(var v=h.length-1,O=0,L=0,z=0;L<this.length;L++){var W=this.words[L]<<z|O;h[v--]=W&255,v>=0&&(h[v--]=W>>8&255),v>=0&&(h[v--]=W>>16&255),z===6?(v>=0&&(h[v--]=W>>24&255),O=0,z=0):(O=W>>>24,z+=2)}if(v>=0)for(h[v--]=O;v>=0;)h[v--]=0},Math.clz32?s.prototype._countBits=function(h){return 32-Math.clz32(h)}:s.prototype._countBits=function(h){var g=h,v=0;return g>=4096&&(v+=13,g>>>=13),g>=64&&(v+=7,g>>>=7),g>=8&&(v+=4,g>>>=4),g>=2&&(v+=2,g>>>=2),v+g},s.prototype._zeroBits=function(h){if(h===0)return 26;var g=h,v=0;return g&8191||(v+=13,g>>>=13),g&127||(v+=7,g>>>=7),g&15||(v+=4,g>>>=4),g&3||(v+=2,g>>>=2),g&1||v++,v},s.prototype.bitLength=function(){var h=this.words[this.length-1],g=this._countBits(h);return(this.length-1)*26+g};function b(k){for(var h=new Array(k.bitLength()),g=0;g<h.length;g++){var v=g/26|0,O=g%26;h[g]=k.words[v]>>>O&1}return h}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,g=0;g<this.length;g++){var v=this._zeroBits(this.words[g]);if(h+=v,v!==26)break}return h},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},s.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var g=0;g<h.length;g++)this.words[g]=this.words[g]|h.words[g];return this._strip()},s.prototype.ior=function(h){return r((this.negative|h.negative)===0),this.iuor(h)},s.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},s.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},s.prototype.iuand=function(h){var g;this.length>h.length?g=h:g=this;for(var v=0;v<g.length;v++)this.words[v]=this.words[v]&h.words[v];return this.length=g.length,this._strip()},s.prototype.iand=function(h){return r((this.negative|h.negative)===0),this.iuand(h)},s.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},s.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},s.prototype.iuxor=function(h){var g,v;this.length>h.length?(g=this,v=h):(g=h,v=this);for(var O=0;O<v.length;O++)this.words[O]=g.words[O]^v.words[O];if(this!==g)for(;O<g.length;O++)this.words[O]=g.words[O];return this.length=g.length,this._strip()},s.prototype.ixor=function(h){return r((this.negative|h.negative)===0),this.iuxor(h)},s.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},s.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},s.prototype.inotn=function(h){r(typeof h=="number"&&h>=0);var g=Math.ceil(h/26)|0,v=h%26;this._expand(g),v>0&&g--;for(var O=0;O<g;O++)this.words[O]=~this.words[O]&67108863;return v>0&&(this.words[O]=~this.words[O]&67108863>>26-v),this._strip()},s.prototype.notn=function(h){return this.clone().inotn(h)},s.prototype.setn=function(h,g){r(typeof h=="number"&&h>=0);var v=h/26|0,O=h%26;return this._expand(v+1),g?this.words[v]=this.words[v]|1<<O:this.words[v]=this.words[v]&~(1<<O),this._strip()},s.prototype.iadd=function(h){var g;if(this.negative!==0&&h.negative===0)return this.negative=0,g=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,g=this.isub(h),h.negative=1,g._normSign();var v,O;this.length>h.length?(v=this,O=h):(v=h,O=this);for(var L=0,z=0;z<O.length;z++)g=(v.words[z]|0)+(O.words[z]|0)+L,this.words[z]=g&67108863,L=g>>>26;for(;L!==0&&z<v.length;z++)g=(v.words[z]|0)+L,this.words[z]=g&67108863,L=g>>>26;if(this.length=v.length,L!==0)this.words[this.length]=L,this.length++;else if(v!==this)for(;z<v.length;z++)this.words[z]=v.words[z];return this},s.prototype.add=function(h){var g;return h.negative!==0&&this.negative===0?(h.negative=0,g=this.sub(h),h.negative^=1,g):h.negative===0&&this.negative!==0?(this.negative=0,g=h.sub(this),this.negative=1,g):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},s.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var g=this.iadd(h);return h.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var v=this.cmp(h);if(v===0)return this.negative=0,this.length=1,this.words[0]=0,this;var O,L;v>0?(O=this,L=h):(O=h,L=this);for(var z=0,W=0;W<L.length;W++)g=(O.words[W]|0)-(L.words[W]|0)+z,z=g>>26,this.words[W]=g&67108863;for(;z!==0&&W<O.length;W++)g=(O.words[W]|0)+z,z=g>>26,this.words[W]=g&67108863;if(z===0&&W<O.length&&O!==this)for(;W<O.length;W++)this.words[W]=O.words[W];return this.length=Math.max(this.length,W),O!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(h){return this.clone().isub(h)};function B(k,h,g){g.negative=h.negative^k.negative;var v=k.length+h.length|0;g.length=v,v=v-1|0;var O=k.words[0]|0,L=h.words[0]|0,z=O*L,W=z&67108863,$=z/67108864|0;g.words[0]=W;for(var w=1;w<v;w++){for(var H=$>>>26,re=$&67108863,Q=Math.min(w,h.length-1),ce=Math.max(0,w-k.length+1);ce<=Q;ce++){var Be=w-ce|0;O=k.words[Be]|0,L=h.words[ce]|0,z=O*L+re,H+=z/67108864|0,re=z&67108863}g.words[w]=re|0,$=H|0}return $!==0?g.words[w]=$|0:g.length--,g._strip()}var E=function(h,g,v){var O=h.words,L=g.words,z=v.words,W=0,$,w,H,re=O[0]|0,Q=re&8191,ce=re>>>13,Be=O[1]|0,Ue=Be&8191,J=Be>>>13,j=O[2]|0,K=j&8191,Y=j>>>13,ne=O[3]|0,ue=ne&8191,le=ne>>>13,fe=O[4]|0,_e=fe&8191,ke=fe>>>13,Ne=O[5]|0,Ee=Ne&8191,He=Ne>>>13,Ge=O[6]|0,Ie=Ge&8191,ze=Ge>>>13,xt=O[7]|0,Ke=xt&8191,bt=xt>>>13,yn=O[8]|0,lt=yn&8191,Ct=yn>>>13,Fr=O[9]|0,Ft=Fr&8191,Xt=Fr>>>13,oi=L[0]|0,Zt=oi&8191,nn=oi>>>13,xi=L[1]|0,jt=xi&8191,dn=xi>>>13,Uo=L[2]|0,mn=Uo&8191,bn=Uo>>>13,uu=L[3]|0,Jt=uu&8191,on=uu>>>13,$i=L[4]|0,fn=$i&8191,hn=$i>>>13,Xa=L[5]|0,vn=Xa&8191,Nt=Xa>>>13,Za=L[6]|0,A=Za&8191,M=Za>>>13,q=L[7]|0,m=q&8191,D=q>>>13,te=L[8]|0,ee=te&8191,de=te>>>13,ve=L[9]|0,Ae=ve&8191,xe=ve>>>13;v.negative=h.negative^g.negative,v.length=19,$=Math.imul(Q,Zt),w=Math.imul(Q,nn),w=w+Math.imul(ce,Zt)|0,H=Math.imul(ce,nn);var Ot=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,$=Math.imul(Ue,Zt),w=Math.imul(Ue,nn),w=w+Math.imul(J,Zt)|0,H=Math.imul(J,nn),$=$+Math.imul(Q,jt)|0,w=w+Math.imul(Q,dn)|0,w=w+Math.imul(ce,jt)|0,H=H+Math.imul(ce,dn)|0;var $e=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+($e>>>26)|0,$e&=67108863,$=Math.imul(K,Zt),w=Math.imul(K,nn),w=w+Math.imul(Y,Zt)|0,H=Math.imul(Y,nn),$=$+Math.imul(Ue,jt)|0,w=w+Math.imul(Ue,dn)|0,w=w+Math.imul(J,jt)|0,H=H+Math.imul(J,dn)|0,$=$+Math.imul(Q,mn)|0,w=w+Math.imul(Q,bn)|0,w=w+Math.imul(ce,mn)|0,H=H+Math.imul(ce,bn)|0;var Ye=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,$=Math.imul(ue,Zt),w=Math.imul(ue,nn),w=w+Math.imul(le,Zt)|0,H=Math.imul(le,nn),$=$+Math.imul(K,jt)|0,w=w+Math.imul(K,dn)|0,w=w+Math.imul(Y,jt)|0,H=H+Math.imul(Y,dn)|0,$=$+Math.imul(Ue,mn)|0,w=w+Math.imul(Ue,bn)|0,w=w+Math.imul(J,mn)|0,H=H+Math.imul(J,bn)|0,$=$+Math.imul(Q,Jt)|0,w=w+Math.imul(Q,on)|0,w=w+Math.imul(ce,Jt)|0,H=H+Math.imul(ce,on)|0;var et=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(et>>>26)|0,et&=67108863,$=Math.imul(_e,Zt),w=Math.imul(_e,nn),w=w+Math.imul(ke,Zt)|0,H=Math.imul(ke,nn),$=$+Math.imul(ue,jt)|0,w=w+Math.imul(ue,dn)|0,w=w+Math.imul(le,jt)|0,H=H+Math.imul(le,dn)|0,$=$+Math.imul(K,mn)|0,w=w+Math.imul(K,bn)|0,w=w+Math.imul(Y,mn)|0,H=H+Math.imul(Y,bn)|0,$=$+Math.imul(Ue,Jt)|0,w=w+Math.imul(Ue,on)|0,w=w+Math.imul(J,Jt)|0,H=H+Math.imul(J,on)|0,$=$+Math.imul(Q,fn)|0,w=w+Math.imul(Q,hn)|0,w=w+Math.imul(ce,fn)|0,H=H+Math.imul(ce,hn)|0;var at=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(at>>>26)|0,at&=67108863,$=Math.imul(Ee,Zt),w=Math.imul(Ee,nn),w=w+Math.imul(He,Zt)|0,H=Math.imul(He,nn),$=$+Math.imul(_e,jt)|0,w=w+Math.imul(_e,dn)|0,w=w+Math.imul(ke,jt)|0,H=H+Math.imul(ke,dn)|0,$=$+Math.imul(ue,mn)|0,w=w+Math.imul(ue,bn)|0,w=w+Math.imul(le,mn)|0,H=H+Math.imul(le,bn)|0,$=$+Math.imul(K,Jt)|0,w=w+Math.imul(K,on)|0,w=w+Math.imul(Y,Jt)|0,H=H+Math.imul(Y,on)|0,$=$+Math.imul(Ue,fn)|0,w=w+Math.imul(Ue,hn)|0,w=w+Math.imul(J,fn)|0,H=H+Math.imul(J,hn)|0,$=$+Math.imul(Q,vn)|0,w=w+Math.imul(Q,Nt)|0,w=w+Math.imul(ce,vn)|0,H=H+Math.imul(ce,Nt)|0;var st=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(st>>>26)|0,st&=67108863,$=Math.imul(Ie,Zt),w=Math.imul(Ie,nn),w=w+Math.imul(ze,Zt)|0,H=Math.imul(ze,nn),$=$+Math.imul(Ee,jt)|0,w=w+Math.imul(Ee,dn)|0,w=w+Math.imul(He,jt)|0,H=H+Math.imul(He,dn)|0,$=$+Math.imul(_e,mn)|0,w=w+Math.imul(_e,bn)|0,w=w+Math.imul(ke,mn)|0,H=H+Math.imul(ke,bn)|0,$=$+Math.imul(ue,Jt)|0,w=w+Math.imul(ue,on)|0,w=w+Math.imul(le,Jt)|0,H=H+Math.imul(le,on)|0,$=$+Math.imul(K,fn)|0,w=w+Math.imul(K,hn)|0,w=w+Math.imul(Y,fn)|0,H=H+Math.imul(Y,hn)|0,$=$+Math.imul(Ue,vn)|0,w=w+Math.imul(Ue,Nt)|0,w=w+Math.imul(J,vn)|0,H=H+Math.imul(J,Nt)|0,$=$+Math.imul(Q,A)|0,w=w+Math.imul(Q,M)|0,w=w+Math.imul(ce,A)|0,H=H+Math.imul(ce,M)|0;var tt=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(tt>>>26)|0,tt&=67108863,$=Math.imul(Ke,Zt),w=Math.imul(Ke,nn),w=w+Math.imul(bt,Zt)|0,H=Math.imul(bt,nn),$=$+Math.imul(Ie,jt)|0,w=w+Math.imul(Ie,dn)|0,w=w+Math.imul(ze,jt)|0,H=H+Math.imul(ze,dn)|0,$=$+Math.imul(Ee,mn)|0,w=w+Math.imul(Ee,bn)|0,w=w+Math.imul(He,mn)|0,H=H+Math.imul(He,bn)|0,$=$+Math.imul(_e,Jt)|0,w=w+Math.imul(_e,on)|0,w=w+Math.imul(ke,Jt)|0,H=H+Math.imul(ke,on)|0,$=$+Math.imul(ue,fn)|0,w=w+Math.imul(ue,hn)|0,w=w+Math.imul(le,fn)|0,H=H+Math.imul(le,hn)|0,$=$+Math.imul(K,vn)|0,w=w+Math.imul(K,Nt)|0,w=w+Math.imul(Y,vn)|0,H=H+Math.imul(Y,Nt)|0,$=$+Math.imul(Ue,A)|0,w=w+Math.imul(Ue,M)|0,w=w+Math.imul(J,A)|0,H=H+Math.imul(J,M)|0,$=$+Math.imul(Q,m)|0,w=w+Math.imul(Q,D)|0,w=w+Math.imul(ce,m)|0,H=H+Math.imul(ce,D)|0;var rt=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(rt>>>26)|0,rt&=67108863,$=Math.imul(lt,Zt),w=Math.imul(lt,nn),w=w+Math.imul(Ct,Zt)|0,H=Math.imul(Ct,nn),$=$+Math.imul(Ke,jt)|0,w=w+Math.imul(Ke,dn)|0,w=w+Math.imul(bt,jt)|0,H=H+Math.imul(bt,dn)|0,$=$+Math.imul(Ie,mn)|0,w=w+Math.imul(Ie,bn)|0,w=w+Math.imul(ze,mn)|0,H=H+Math.imul(ze,bn)|0,$=$+Math.imul(Ee,Jt)|0,w=w+Math.imul(Ee,on)|0,w=w+Math.imul(He,Jt)|0,H=H+Math.imul(He,on)|0,$=$+Math.imul(_e,fn)|0,w=w+Math.imul(_e,hn)|0,w=w+Math.imul(ke,fn)|0,H=H+Math.imul(ke,hn)|0,$=$+Math.imul(ue,vn)|0,w=w+Math.imul(ue,Nt)|0,w=w+Math.imul(le,vn)|0,H=H+Math.imul(le,Nt)|0,$=$+Math.imul(K,A)|0,w=w+Math.imul(K,M)|0,w=w+Math.imul(Y,A)|0,H=H+Math.imul(Y,M)|0,$=$+Math.imul(Ue,m)|0,w=w+Math.imul(Ue,D)|0,w=w+Math.imul(J,m)|0,H=H+Math.imul(J,D)|0,$=$+Math.imul(Q,ee)|0,w=w+Math.imul(Q,de)|0,w=w+Math.imul(ce,ee)|0,H=H+Math.imul(ce,de)|0;var nt=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(nt>>>26)|0,nt&=67108863,$=Math.imul(Ft,Zt),w=Math.imul(Ft,nn),w=w+Math.imul(Xt,Zt)|0,H=Math.imul(Xt,nn),$=$+Math.imul(lt,jt)|0,w=w+Math.imul(lt,dn)|0,w=w+Math.imul(Ct,jt)|0,H=H+Math.imul(Ct,dn)|0,$=$+Math.imul(Ke,mn)|0,w=w+Math.imul(Ke,bn)|0,w=w+Math.imul(bt,mn)|0,H=H+Math.imul(bt,bn)|0,$=$+Math.imul(Ie,Jt)|0,w=w+Math.imul(Ie,on)|0,w=w+Math.imul(ze,Jt)|0,H=H+Math.imul(ze,on)|0,$=$+Math.imul(Ee,fn)|0,w=w+Math.imul(Ee,hn)|0,w=w+Math.imul(He,fn)|0,H=H+Math.imul(He,hn)|0,$=$+Math.imul(_e,vn)|0,w=w+Math.imul(_e,Nt)|0,w=w+Math.imul(ke,vn)|0,H=H+Math.imul(ke,Nt)|0,$=$+Math.imul(ue,A)|0,w=w+Math.imul(ue,M)|0,w=w+Math.imul(le,A)|0,H=H+Math.imul(le,M)|0,$=$+Math.imul(K,m)|0,w=w+Math.imul(K,D)|0,w=w+Math.imul(Y,m)|0,H=H+Math.imul(Y,D)|0,$=$+Math.imul(Ue,ee)|0,w=w+Math.imul(Ue,de)|0,w=w+Math.imul(J,ee)|0,H=H+Math.imul(J,de)|0,$=$+Math.imul(Q,Ae)|0,w=w+Math.imul(Q,xe)|0,w=w+Math.imul(ce,Ae)|0,H=H+Math.imul(ce,xe)|0;var Me=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(Me>>>26)|0,Me&=67108863,$=Math.imul(Ft,jt),w=Math.imul(Ft,dn),w=w+Math.imul(Xt,jt)|0,H=Math.imul(Xt,dn),$=$+Math.imul(lt,mn)|0,w=w+Math.imul(lt,bn)|0,w=w+Math.imul(Ct,mn)|0,H=H+Math.imul(Ct,bn)|0,$=$+Math.imul(Ke,Jt)|0,w=w+Math.imul(Ke,on)|0,w=w+Math.imul(bt,Jt)|0,H=H+Math.imul(bt,on)|0,$=$+Math.imul(Ie,fn)|0,w=w+Math.imul(Ie,hn)|0,w=w+Math.imul(ze,fn)|0,H=H+Math.imul(ze,hn)|0,$=$+Math.imul(Ee,vn)|0,w=w+Math.imul(Ee,Nt)|0,w=w+Math.imul(He,vn)|0,H=H+Math.imul(He,Nt)|0,$=$+Math.imul(_e,A)|0,w=w+Math.imul(_e,M)|0,w=w+Math.imul(ke,A)|0,H=H+Math.imul(ke,M)|0,$=$+Math.imul(ue,m)|0,w=w+Math.imul(ue,D)|0,w=w+Math.imul(le,m)|0,H=H+Math.imul(le,D)|0,$=$+Math.imul(K,ee)|0,w=w+Math.imul(K,de)|0,w=w+Math.imul(Y,ee)|0,H=H+Math.imul(Y,de)|0,$=$+Math.imul(Ue,Ae)|0,w=w+Math.imul(Ue,xe)|0,w=w+Math.imul(J,Ae)|0,H=H+Math.imul(J,xe)|0;var je=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(je>>>26)|0,je&=67108863,$=Math.imul(Ft,mn),w=Math.imul(Ft,bn),w=w+Math.imul(Xt,mn)|0,H=Math.imul(Xt,bn),$=$+Math.imul(lt,Jt)|0,w=w+Math.imul(lt,on)|0,w=w+Math.imul(Ct,Jt)|0,H=H+Math.imul(Ct,on)|0,$=$+Math.imul(Ke,fn)|0,w=w+Math.imul(Ke,hn)|0,w=w+Math.imul(bt,fn)|0,H=H+Math.imul(bt,hn)|0,$=$+Math.imul(Ie,vn)|0,w=w+Math.imul(Ie,Nt)|0,w=w+Math.imul(ze,vn)|0,H=H+Math.imul(ze,Nt)|0,$=$+Math.imul(Ee,A)|0,w=w+Math.imul(Ee,M)|0,w=w+Math.imul(He,A)|0,H=H+Math.imul(He,M)|0,$=$+Math.imul(_e,m)|0,w=w+Math.imul(_e,D)|0,w=w+Math.imul(ke,m)|0,H=H+Math.imul(ke,D)|0,$=$+Math.imul(ue,ee)|0,w=w+Math.imul(ue,de)|0,w=w+Math.imul(le,ee)|0,H=H+Math.imul(le,de)|0,$=$+Math.imul(K,Ae)|0,w=w+Math.imul(K,xe)|0,w=w+Math.imul(Y,Ae)|0,H=H+Math.imul(Y,xe)|0;var Oe=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,$=Math.imul(Ft,Jt),w=Math.imul(Ft,on),w=w+Math.imul(Xt,Jt)|0,H=Math.imul(Xt,on),$=$+Math.imul(lt,fn)|0,w=w+Math.imul(lt,hn)|0,w=w+Math.imul(Ct,fn)|0,H=H+Math.imul(Ct,hn)|0,$=$+Math.imul(Ke,vn)|0,w=w+Math.imul(Ke,Nt)|0,w=w+Math.imul(bt,vn)|0,H=H+Math.imul(bt,Nt)|0,$=$+Math.imul(Ie,A)|0,w=w+Math.imul(Ie,M)|0,w=w+Math.imul(ze,A)|0,H=H+Math.imul(ze,M)|0,$=$+Math.imul(Ee,m)|0,w=w+Math.imul(Ee,D)|0,w=w+Math.imul(He,m)|0,H=H+Math.imul(He,D)|0,$=$+Math.imul(_e,ee)|0,w=w+Math.imul(_e,de)|0,w=w+Math.imul(ke,ee)|0,H=H+Math.imul(ke,de)|0,$=$+Math.imul(ue,Ae)|0,w=w+Math.imul(ue,xe)|0,w=w+Math.imul(le,Ae)|0,H=H+Math.imul(le,xe)|0;var qe=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(qe>>>26)|0,qe&=67108863,$=Math.imul(Ft,fn),w=Math.imul(Ft,hn),w=w+Math.imul(Xt,fn)|0,H=Math.imul(Xt,hn),$=$+Math.imul(lt,vn)|0,w=w+Math.imul(lt,Nt)|0,w=w+Math.imul(Ct,vn)|0,H=H+Math.imul(Ct,Nt)|0,$=$+Math.imul(Ke,A)|0,w=w+Math.imul(Ke,M)|0,w=w+Math.imul(bt,A)|0,H=H+Math.imul(bt,M)|0,$=$+Math.imul(Ie,m)|0,w=w+Math.imul(Ie,D)|0,w=w+Math.imul(ze,m)|0,H=H+Math.imul(ze,D)|0,$=$+Math.imul(Ee,ee)|0,w=w+Math.imul(Ee,de)|0,w=w+Math.imul(He,ee)|0,H=H+Math.imul(He,de)|0,$=$+Math.imul(_e,Ae)|0,w=w+Math.imul(_e,xe)|0,w=w+Math.imul(ke,Ae)|0,H=H+Math.imul(ke,xe)|0;var De=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(De>>>26)|0,De&=67108863,$=Math.imul(Ft,vn),w=Math.imul(Ft,Nt),w=w+Math.imul(Xt,vn)|0,H=Math.imul(Xt,Nt),$=$+Math.imul(lt,A)|0,w=w+Math.imul(lt,M)|0,w=w+Math.imul(Ct,A)|0,H=H+Math.imul(Ct,M)|0,$=$+Math.imul(Ke,m)|0,w=w+Math.imul(Ke,D)|0,w=w+Math.imul(bt,m)|0,H=H+Math.imul(bt,D)|0,$=$+Math.imul(Ie,ee)|0,w=w+Math.imul(Ie,de)|0,w=w+Math.imul(ze,ee)|0,H=H+Math.imul(ze,de)|0,$=$+Math.imul(Ee,Ae)|0,w=w+Math.imul(Ee,xe)|0,w=w+Math.imul(He,Ae)|0,H=H+Math.imul(He,xe)|0;var Re=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(Re>>>26)|0,Re&=67108863,$=Math.imul(Ft,A),w=Math.imul(Ft,M),w=w+Math.imul(Xt,A)|0,H=Math.imul(Xt,M),$=$+Math.imul(lt,m)|0,w=w+Math.imul(lt,D)|0,w=w+Math.imul(Ct,m)|0,H=H+Math.imul(Ct,D)|0,$=$+Math.imul(Ke,ee)|0,w=w+Math.imul(Ke,de)|0,w=w+Math.imul(bt,ee)|0,H=H+Math.imul(bt,de)|0,$=$+Math.imul(Ie,Ae)|0,w=w+Math.imul(Ie,xe)|0,w=w+Math.imul(ze,Ae)|0,H=H+Math.imul(ze,xe)|0;var se=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(se>>>26)|0,se&=67108863,$=Math.imul(Ft,m),w=Math.imul(Ft,D),w=w+Math.imul(Xt,m)|0,H=Math.imul(Xt,D),$=$+Math.imul(lt,ee)|0,w=w+Math.imul(lt,de)|0,w=w+Math.imul(Ct,ee)|0,H=H+Math.imul(Ct,de)|0,$=$+Math.imul(Ke,Ae)|0,w=w+Math.imul(Ke,xe)|0,w=w+Math.imul(bt,Ae)|0,H=H+Math.imul(bt,xe)|0;var oe=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(oe>>>26)|0,oe&=67108863,$=Math.imul(Ft,ee),w=Math.imul(Ft,de),w=w+Math.imul(Xt,ee)|0,H=Math.imul(Xt,de),$=$+Math.imul(lt,Ae)|0,w=w+Math.imul(lt,xe)|0,w=w+Math.imul(Ct,Ae)|0,H=H+Math.imul(Ct,xe)|0;var ge=(W+$|0)+((w&8191)<<13)|0;W=(H+(w>>>13)|0)+(ge>>>26)|0,ge&=67108863,$=Math.imul(Ft,Ae),w=Math.imul(Ft,xe),w=w+Math.imul(Xt,Ae)|0,H=Math.imul(Xt,xe);var he=(W+$|0)+((w&8191)<<13)|0;return W=(H+(w>>>13)|0)+(he>>>26)|0,he&=67108863,z[0]=Ot,z[1]=$e,z[2]=Ye,z[3]=et,z[4]=at,z[5]=st,z[6]=tt,z[7]=rt,z[8]=nt,z[9]=Me,z[10]=je,z[11]=Oe,z[12]=qe,z[13]=De,z[14]=Re,z[15]=se,z[16]=oe,z[17]=ge,z[18]=he,W!==0&&(z[19]=W,v.length++),v};Math.imul||(E=B);function x(k,h,g){g.negative=h.negative^k.negative,g.length=k.length+h.length;for(var v=0,O=0,L=0;L<g.length-1;L++){var z=O;O=0;for(var W=v&67108863,$=Math.min(L,h.length-1),w=Math.max(0,L-k.length+1);w<=$;w++){var H=L-w,re=k.words[H]|0,Q=h.words[w]|0,ce=re*Q,Be=ce&67108863;z=z+(ce/67108864|0)|0,Be=Be+W|0,W=Be&67108863,z=z+(Be>>>26)|0,O+=z>>>26,z&=67108863}g.words[L]=W,v=z,z=O}return v!==0?g.words[L]=v:g.length--,g._strip()}function S(k,h,g){return x(k,h,g)}s.prototype.mulTo=function(h,g){var v,O=this.length+h.length;return this.length===10&&h.length===10?v=E(this,h,g):O<63?v=B(this,h,g):O<1024?v=x(this,h,g):v=S(this,h,g),v},s.prototype.mul=function(h){var g=new s(null);return g.words=new Array(this.length+h.length),this.mulTo(h,g)},s.prototype.mulf=function(h){var g=new s(null);return g.words=new Array(this.length+h.length),S(this,h,g)},s.prototype.imul=function(h){return this.clone().mulTo(h,this)},s.prototype.imuln=function(h){var g=h<0;g&&(h=-h),r(typeof h=="number"),r(h<67108864);for(var v=0,O=0;O<this.length;O++){var L=(this.words[O]|0)*h,z=(L&67108863)+(v&67108863);v>>=26,v+=L/67108864|0,v+=z>>>26,this.words[O]=z&67108863}return v!==0&&(this.words[O]=v,this.length++),g?this.ineg():this},s.prototype.muln=function(h){return this.clone().imuln(h)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(h){var g=b(h);if(g.length===0)return new s(1);for(var v=this,O=0;O<g.length&&g[O]===0;O++,v=v.sqr());if(++O<g.length)for(var L=v.sqr();O<g.length;O++,L=L.sqr())g[O]!==0&&(v=v.mul(L));return v},s.prototype.iushln=function(h){r(typeof h=="number"&&h>=0);var g=h%26,v=(h-g)/26,O=67108863>>>26-g<<26-g,L;if(g!==0){var z=0;for(L=0;L<this.length;L++){var W=this.words[L]&O,$=(this.words[L]|0)-W<<g;this.words[L]=$|z,z=W>>>26-g}z&&(this.words[L]=z,this.length++)}if(v!==0){for(L=this.length-1;L>=0;L--)this.words[L+v]=this.words[L];for(L=0;L<v;L++)this.words[L]=0;this.length+=v}return this._strip()},s.prototype.ishln=function(h){return r(this.negative===0),this.iushln(h)},s.prototype.iushrn=function(h,g,v){r(typeof h=="number"&&h>=0);var O;g?O=(g-g%26)/26:O=0;var L=h%26,z=Math.min((h-L)/26,this.length),W=67108863^67108863>>>L<<L,$=v;if(O-=z,O=Math.max(0,O),$){for(var w=0;w<z;w++)$.words[w]=this.words[w];$.length=z}if(z!==0)if(this.length>z)for(this.length-=z,w=0;w<this.length;w++)this.words[w]=this.words[w+z];else this.words[0]=0,this.length=1;var H=0;for(w=this.length-1;w>=0&&(H!==0||w>=O);w--){var re=this.words[w]|0;this.words[w]=H<<26-L|re>>>L,H=re&W}return $&&H!==0&&($.words[$.length++]=H),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(h,g,v){return r(this.negative===0),this.iushrn(h,g,v)},s.prototype.shln=function(h){return this.clone().ishln(h)},s.prototype.ushln=function(h){return this.clone().iushln(h)},s.prototype.shrn=function(h){return this.clone().ishrn(h)},s.prototype.ushrn=function(h){return this.clone().iushrn(h)},s.prototype.testn=function(h){r(typeof h=="number"&&h>=0);var g=h%26,v=(h-g)/26,O=1<<g;if(this.length<=v)return!1;var L=this.words[v];return!!(L&O)},s.prototype.imaskn=function(h){r(typeof h=="number"&&h>=0);var g=h%26,v=(h-g)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=v)return this;if(g!==0&&v++,this.length=Math.min(v,this.length),g!==0){var O=67108863^67108863>>>g<<g;this.words[this.length-1]&=O}return this._strip()},s.prototype.maskn=function(h){return this.clone().imaskn(h)},s.prototype.iaddn=function(h){return r(typeof h=="number"),r(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<=h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},s.prototype._iaddn=function(h){this.words[0]+=h;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},s.prototype.isubn=function(h){if(r(typeof h=="number"),r(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this._strip()},s.prototype.addn=function(h){return this.clone().iaddn(h)},s.prototype.subn=function(h){return this.clone().isubn(h)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(h,g,v){var O=h.length+v,L;this._expand(O);var z,W=0;for(L=0;L<h.length;L++){z=(this.words[L+v]|0)+W;var $=(h.words[L]|0)*g;z-=$&67108863,W=(z>>26)-($/67108864|0),this.words[L+v]=z&67108863}for(;L<this.length-v;L++)z=(this.words[L+v]|0)+W,W=z>>26,this.words[L+v]=z&67108863;if(W===0)return this._strip();for(r(W===-1),W=0,L=0;L<this.length;L++)z=-(this.words[L]|0)+W,W=z>>26,this.words[L]=z&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(h,g){var v=this.length-h.length,O=this.clone(),L=h,z=L.words[L.length-1]|0,W=this._countBits(z);v=26-W,v!==0&&(L=L.ushln(v),O.iushln(v),z=L.words[L.length-1]|0);var $=O.length-L.length,w;if(g!=="mod"){w=new s(null),w.length=$+1,w.words=new Array(w.length);for(var H=0;H<w.length;H++)w.words[H]=0}var re=O.clone()._ishlnsubmul(L,1,$);re.negative===0&&(O=re,w&&(w.words[$]=1));for(var Q=$-1;Q>=0;Q--){var ce=(O.words[L.length+Q]|0)*67108864+(O.words[L.length+Q-1]|0);for(ce=Math.min(ce/z|0,67108863),O._ishlnsubmul(L,ce,Q);O.negative!==0;)ce--,O.negative=0,O._ishlnsubmul(L,1,Q),O.isZero()||(O.negative^=1);w&&(w.words[Q]=ce)}return w&&w._strip(),O._strip(),g!=="div"&&v!==0&&O.iushrn(v),{div:w||null,mod:O}},s.prototype.divmod=function(h,g,v){if(r(!h.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var O,L,z;return this.negative!==0&&h.negative===0?(z=this.neg().divmod(h,g),g!=="mod"&&(O=z.div.neg()),g!=="div"&&(L=z.mod.neg(),v&&L.negative!==0&&L.iadd(h)),{div:O,mod:L}):this.negative===0&&h.negative!==0?(z=this.divmod(h.neg(),g),g!=="mod"&&(O=z.div.neg()),{div:O,mod:z.mod}):this.negative&h.negative?(z=this.neg().divmod(h.neg(),g),g!=="div"&&(L=z.mod.neg(),v&&L.negative!==0&&L.isub(h)),{div:z.div,mod:L}):h.length>this.length||this.cmp(h)<0?{div:new s(0),mod:this}:h.length===1?g==="div"?{div:this.divn(h.words[0]),mod:null}:g==="mod"?{div:null,mod:new s(this.modrn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new s(this.modrn(h.words[0]))}:this._wordDiv(h,g)},s.prototype.div=function(h){return this.divmod(h,"div",!1).div},s.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},s.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},s.prototype.divRound=function(h){var g=this.divmod(h);if(g.mod.isZero())return g.div;var v=g.div.negative!==0?g.mod.isub(h):g.mod,O=h.ushrn(1),L=h.andln(1),z=v.cmp(O);return z<0||L===1&&z===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},s.prototype.modrn=function(h){var g=h<0;g&&(h=-h),r(h<=67108863);for(var v=(1<<26)%h,O=0,L=this.length-1;L>=0;L--)O=(v*O+(this.words[L]|0))%h;return g?-O:O},s.prototype.modn=function(h){return this.modrn(h)},s.prototype.idivn=function(h){var g=h<0;g&&(h=-h),r(h<=67108863);for(var v=0,O=this.length-1;O>=0;O--){var L=(this.words[O]|0)+v*67108864;this.words[O]=L/h|0,v=L%h}return this._strip(),g?this.ineg():this},s.prototype.divn=function(h){return this.clone().idivn(h)},s.prototype.egcd=function(h){r(h.negative===0),r(!h.isZero());var g=this,v=h.clone();g.negative!==0?g=g.umod(h):g=g.clone();for(var O=new s(1),L=new s(0),z=new s(0),W=new s(1),$=0;g.isEven()&&v.isEven();)g.iushrn(1),v.iushrn(1),++$;for(var w=v.clone(),H=g.clone();!g.isZero();){for(var re=0,Q=1;!(g.words[0]&Q)&&re<26;++re,Q<<=1);if(re>0)for(g.iushrn(re);re-- >0;)(O.isOdd()||L.isOdd())&&(O.iadd(w),L.isub(H)),O.iushrn(1),L.iushrn(1);for(var ce=0,Be=1;!(v.words[0]&Be)&&ce<26;++ce,Be<<=1);if(ce>0)for(v.iushrn(ce);ce-- >0;)(z.isOdd()||W.isOdd())&&(z.iadd(w),W.isub(H)),z.iushrn(1),W.iushrn(1);g.cmp(v)>=0?(g.isub(v),O.isub(z),L.isub(W)):(v.isub(g),z.isub(O),W.isub(L))}return{a:z,b:W,gcd:v.iushln($)}},s.prototype._invmp=function(h){r(h.negative===0),r(!h.isZero());var g=this,v=h.clone();g.negative!==0?g=g.umod(h):g=g.clone();for(var O=new s(1),L=new s(0),z=v.clone();g.cmpn(1)>0&&v.cmpn(1)>0;){for(var W=0,$=1;!(g.words[0]&$)&&W<26;++W,$<<=1);if(W>0)for(g.iushrn(W);W-- >0;)O.isOdd()&&O.iadd(z),O.iushrn(1);for(var w=0,H=1;!(v.words[0]&H)&&w<26;++w,H<<=1);if(w>0)for(v.iushrn(w);w-- >0;)L.isOdd()&&L.iadd(z),L.iushrn(1);g.cmp(v)>=0?(g.isub(v),O.isub(L)):(v.isub(g),L.isub(O))}var re;return g.cmpn(1)===0?re=O:re=L,re.cmpn(0)<0&&re.iadd(h),re},s.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var g=this.clone(),v=h.clone();g.negative=0,v.negative=0;for(var O=0;g.isEven()&&v.isEven();O++)g.iushrn(1),v.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;v.isEven();)v.iushrn(1);var L=g.cmp(v);if(L<0){var z=g;g=v,v=z}else if(L===0||v.cmpn(1)===0)break;g.isub(v)}while(!0);return v.iushln(O)},s.prototype.invm=function(h){return this.egcd(h).a.umod(h)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(h){return this.words[0]&h},s.prototype.bincn=function(h){r(typeof h=="number");var g=h%26,v=(h-g)/26,O=1<<g;if(this.length<=v)return this._expand(v+1),this.words[v]|=O,this;for(var L=O,z=v;L!==0&&z<this.length;z++){var W=this.words[z]|0;W+=L,L=W>>>26,W&=67108863,this.words[z]=W}return L!==0&&(this.words[z]=L,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(h){var g=h<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this._strip();var v;if(this.length>1)v=1;else{g&&(h=-h),r(h<=67108863,"Number is too big");var O=this.words[0]|0;v=O===h?0:O<h?-1:1}return this.negative!==0?-v|0:v},s.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var g=this.ucmp(h);return this.negative!==0?-g|0:g},s.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var g=0,v=this.length-1;v>=0;v--){var O=this.words[v]|0,L=h.words[v]|0;if(O!==L){O<L?g=-1:O>L&&(g=1);break}}return g},s.prototype.gtn=function(h){return this.cmpn(h)===1},s.prototype.gt=function(h){return this.cmp(h)===1},s.prototype.gten=function(h){return this.cmpn(h)>=0},s.prototype.gte=function(h){return this.cmp(h)>=0},s.prototype.ltn=function(h){return this.cmpn(h)===-1},s.prototype.lt=function(h){return this.cmp(h)===-1},s.prototype.lten=function(h){return this.cmpn(h)<=0},s.prototype.lte=function(h){return this.cmp(h)<=0},s.prototype.eqn=function(h){return this.cmpn(h)===0},s.prototype.eq=function(h){return this.cmp(h)===0},s.red=function(h){return new U(h)},s.prototype.toRed=function(h){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(h){return this.red=h,this},s.prototype.forceRed=function(h){return r(!this.red,"Already a number in reduction context"),this._forceRed(h)},s.prototype.redAdd=function(h){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},s.prototype.redIAdd=function(h){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},s.prototype.redSub=function(h){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},s.prototype.redISub=function(h){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},s.prototype.redShl=function(h){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},s.prototype.redMul=function(h){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},s.prototype.redIMul=function(h){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(h){return r(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var T={k256:null,p224:null,p192:null,p25519:null};function R(k,h){this.name=k,this.p=new s(h,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}R.prototype._tmp=function(){var h=new s(null);return h.words=new Array(Math.ceil(this.n/13)),h},R.prototype.ireduce=function(h){var g=h,v;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),v=g.bitLength();while(v>this.n);var O=v<this.n?-1:g.ucmp(this.p);return O===0?(g.words[0]=0,g.length=1):O>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},R.prototype.split=function(h,g){h.iushrn(this.n,0,g)},R.prototype.imulK=function(h){return h.imul(this.k)};function P(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(P,R),P.prototype.split=function(h,g){for(var v=4194303,O=Math.min(h.length,9),L=0;L<O;L++)g.words[L]=h.words[L];if(g.length=O,h.length<=9){h.words[0]=0,h.length=1;return}var z=h.words[9];for(g.words[g.length++]=z&v,L=10;L<h.length;L++){var W=h.words[L]|0;h.words[L-10]=(W&v)<<4|z>>>22,z=W}z>>>=22,h.words[L-10]=z,z===0&&h.length>10?h.length-=10:h.length-=9},P.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var g=0,v=0;v<h.length;v++){var O=h.words[v]|0;g+=O*977,h.words[v]=g&67108863,g=O*64+(g/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function C(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(C,R);function G(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(G,R);function F(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(F,R),F.prototype.imulK=function(h){for(var g=0,v=0;v<h.length;v++){var O=(h.words[v]|0)*19+g,L=O&67108863;O>>>=26,h.words[v]=L,g=O}return g!==0&&(h.words[h.length++]=g),h},s._prime=function(h){if(T[h])return T[h];var g;if(h==="k256")g=new P;else if(h==="p224")g=new C;else if(h==="p192")g=new G;else if(h==="p25519")g=new F;else throw new Error("Unknown prime "+h);return T[h]=g,g};function U(k){if(typeof k=="string"){var h=s._prime(k);this.m=h.p,this.prime=h}else r(k.gtn(1),"modulus must be greater than 1"),this.m=k,this.prime=null}U.prototype._verify1=function(h){r(h.negative===0,"red works only with positives"),r(h.red,"red works only with red numbers")},U.prototype._verify2=function(h,g){r((h.negative|g.negative)===0,"red works only with positives"),r(h.red&&h.red===g.red,"red works only with red numbers")},U.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):(d(h,h.umod(this.m)._forceRed(this)),h)},U.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},U.prototype.add=function(h,g){this._verify2(h,g);var v=h.add(g);return v.cmp(this.m)>=0&&v.isub(this.m),v._forceRed(this)},U.prototype.iadd=function(h,g){this._verify2(h,g);var v=h.iadd(g);return v.cmp(this.m)>=0&&v.isub(this.m),v},U.prototype.sub=function(h,g){this._verify2(h,g);var v=h.sub(g);return v.cmpn(0)<0&&v.iadd(this.m),v._forceRed(this)},U.prototype.isub=function(h,g){this._verify2(h,g);var v=h.isub(g);return v.cmpn(0)<0&&v.iadd(this.m),v},U.prototype.shl=function(h,g){return this._verify1(h),this.imod(h.ushln(g))},U.prototype.imul=function(h,g){return this._verify2(h,g),this.imod(h.imul(g))},U.prototype.mul=function(h,g){return this._verify2(h,g),this.imod(h.mul(g))},U.prototype.isqr=function(h){return this.imul(h,h.clone())},U.prototype.sqr=function(h){return this.mul(h,h)},U.prototype.sqrt=function(h){if(h.isZero())return h.clone();var g=this.m.andln(3);if(r(g%2===1),g===3){var v=this.m.add(new s(1)).iushrn(2);return this.pow(h,v)}for(var O=this.m.subn(1),L=0;!O.isZero()&&O.andln(1)===0;)L++,O.iushrn(1);r(!O.isZero());var z=new s(1).toRed(this),W=z.redNeg(),$=this.m.subn(1).iushrn(1),w=this.m.bitLength();for(w=new s(2*w*w).toRed(this);this.pow(w,$).cmp(W)!==0;)w.redIAdd(W);for(var H=this.pow(w,O),re=this.pow(h,O.addn(1).iushrn(1)),Q=this.pow(h,O),ce=L;Q.cmp(z)!==0;){for(var Be=Q,Ue=0;Be.cmp(z)!==0;Ue++)Be=Be.redSqr();r(Ue<ce);var J=this.pow(H,new s(1).iushln(ce-Ue-1));re=re.redMul(J),H=J.redSqr(),Q=Q.redMul(H),ce=Ue}return re},U.prototype.invm=function(h){var g=h._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},U.prototype.pow=function(h,g){if(g.isZero())return new s(1).toRed(this);if(g.cmpn(1)===0)return h.clone();var v=4,O=new Array(1<<v);O[0]=new s(1).toRed(this),O[1]=h;for(var L=2;L<O.length;L++)O[L]=this.mul(O[L-1],h);var z=O[0],W=0,$=0,w=g.bitLength()%26;for(w===0&&(w=26),L=g.length-1;L>=0;L--){for(var H=g.words[L],re=w-1;re>=0;re--){var Q=H>>re&1;if(z!==O[0]&&(z=this.sqr(z)),Q===0&&W===0){$=0;continue}W<<=1,W|=Q,$++,!($!==v&&(L!==0||re!==0))&&(z=this.mul(z,O[W]),$=0,W=0)}w=26}return z},U.prototype.convertTo=function(h){var g=h.umod(this.m);return g===h?g.clone():g},U.prototype.convertFrom=function(h){var g=h.clone();return g.red=null,g},s.mont=function(h){return new N(h)};function N(k){U.call(this,k),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(N,U),N.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},N.prototype.convertFrom=function(h){var g=this.imod(h.mul(this.rinv));return g.red=null,g},N.prototype.imul=function(h,g){if(h.isZero()||g.isZero())return h.words[0]=0,h.length=1,h;var v=h.imul(g),O=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),L=v.isub(O).iushrn(this.shift),z=L;return L.cmp(this.m)>=0?z=L.isub(this.m):L.cmpn(0)<0&&(z=L.iadd(this.m)),z._forceRed(this)},N.prototype.mul=function(h,g){if(h.isZero()||g.isZero())return new s(0)._forceRed(this);var v=h.mul(g),O=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),L=v.isub(O).iushrn(this.shift),z=L;return L.cmp(this.m)>=0?z=L.isub(this.m):L.cmpn(0)<0&&(z=L.iadd(this.m)),z._forceRed(this)},N.prototype.invm=function(h){var g=this.imod(h._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(e,Fo)})(jA);/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Go=9e15,Ds=1e9,_0="0123456789abcdef",ll="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",dl="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",w0={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Go,maxE:Go,crypto:!1},rw,zi,ut=!0,Gd="[DecimalError] ",$s=Gd+"Invalid argument: ",iw=Gd+"Precision limit exceeded",sw=Gd+"crypto unavailable",ow="[object Decimal]",pr=Math.floor,qn=Math.pow,FA=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,GA=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,WA=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,aw=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,pi=1e7,Qe=7,VA=9007199254740991,KA=ll.length-1,b0=dl.length-1,ye={toStringTag:ow};ye.absoluteValue=ye.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),We(e)};ye.ceil=function(){return We(new this.constructor(this),this.e+1,2)};ye.clampedTo=ye.clamp=function(e,t){var n,r=this,i=r.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error($s+t);return n=r.cmp(e),n<0?e:r.cmp(t)>0?t:new i(r)};ye.comparedTo=ye.cmp=function(e){var t,n,r,i,s=this,o=s.d,a=(e=new s.constructor(e)).d,c=s.s,u=e.s;if(!o||!a)return!c||!u?NaN:c!==u?c:o===a?0:!o^c<0?1:-1;if(!o[0]||!a[0])return o[0]?c:a[0]?-u:0;if(c!==u)return c;if(s.e!==e.e)return s.e>e.e^c<0?1:-1;for(r=o.length,i=a.length,t=0,n=r<i?r:i;t<n;++t)if(o[t]!==a[t])return o[t]>a[t]^c<0?1:-1;return r===i?0:r>i^c<0?1:-1};ye.cosine=ye.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Qe,r.rounding=1,n=XA(r,fw(r,n)),r.precision=e,r.rounding=t,We(zi==2||zi==3?n.neg():n,e,t,!0)):new r(1):new r(NaN)};ye.cubeRoot=ye.cbrt=function(){var e,t,n,r,i,s,o,a,c,u,d=this,l=d.constructor;if(!d.isFinite()||d.isZero())return new l(d);for(ut=!1,s=d.s*qn(d.s*d,1/3),!s||Math.abs(s)==1/0?(n=er(d.d),e=d.e,(s=(e-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=qn(n,1/3),e=pr((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?n="5e"+e:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new l(n),r.s=d.s):r=new l(s.toString()),o=(e=l.precision)+3;;)if(a=r,c=a.times(a).times(a),u=c.plus(d),r=ln(u.plus(d).times(a),u.plus(c),o+2,1),er(a.d).slice(0,o)===(n=er(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(We(a,e+1,0),a.times(a).times(a).eq(d))){r=a;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(We(r,e+1,1),t=!r.times(r).times(r).eq(d));break}return ut=!0,We(r,e,l.rounding,t)};ye.decimalPlaces=ye.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-pr(this.e/Qe))*Qe,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};ye.dividedBy=ye.div=function(e){return ln(this,new this.constructor(e))};ye.dividedToIntegerBy=ye.divToInt=function(e){var t=this,n=t.constructor;return We(ln(t,new n(e),0,1,1),n.precision,n.rounding)};ye.equals=ye.eq=function(e){return this.cmp(e)===0};ye.floor=function(){return We(new this.constructor(this),this.e+1,3)};ye.greaterThan=ye.gt=function(e){return this.cmp(e)>0};ye.greaterThanOrEqualTo=ye.gte=function(e){var t=this.cmp(e);return t==1||t===0};ye.hyperbolicCosine=ye.cosh=function(){var e,t,n,r,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;n=o.precision,r=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<32?(e=Math.ceil(i/3),t=(1/Vd(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=Ea(o,1,s.times(t),new o(1),!0);for(var c,u=e,d=new o(8);u--;)c=s.times(s),s=a.minus(c.times(d.minus(c.times(d))));return We(s,o.precision=n,o.rounding=r,!0)};ye.hyperbolicSine=ye.sinh=function(){var e,t,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,r=i.d.length,r<3)i=Ea(s,2,i,i,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,i=i.times(1/Vd(5,e)),i=Ea(s,2,i,i,!0);for(var o,a=new s(5),c=new s(16),u=new s(20);e--;)o=i.times(i),i=i.times(a.plus(o.times(c.times(o).plus(u))))}return s.precision=t,s.rounding=n,We(i,t,n,!0)};ye.hyperbolicTangent=ye.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,ln(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)};ye.inverseCosine=ye.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,s=n.rounding;return r!==-1?r===0?t.isNeg()?hi(n,i,s):new n(0):new n(NaN):t.isZero()?hi(n,i+4,s).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=hi(n,i+4,s).times(.5),n.precision=i,n.rounding=s,e.minus(t))};ye.inverseHyperbolicCosine=ye.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,ut=!1,n=n.times(n).minus(1).sqrt().plus(n),ut=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)};ye.inverseHyperbolicSine=ye.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,ut=!1,n=n.times(n).plus(1).sqrt().plus(n),ut=!0,r.precision=e,r.rounding=t,n.ln())};ye.inverseHyperbolicTangent=ye.atanh=function(){var e,t,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?We(new s(i),e,t,!0):(s.precision=n=r-i.e,i=ln(i.plus(1),new s(1).minus(i),n+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)};ye.inverseSine=ye.asin=function(){var e,t,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),n=s.precision,r=s.rounding,t!==-1?t===0?(e=hi(s,n+4,r).times(.5),e.s=i.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))};ye.inverseTangent=ye.atan=function(){var e,t,n,r,i,s,o,a,c,u=this,d=u.constructor,l=d.precision,f=d.rounding;if(u.isFinite()){if(u.isZero())return new d(u);if(u.abs().eq(1)&&l+4<=b0)return o=hi(d,l+4,f).times(.25),o.s=u.s,o}else{if(!u.s)return new d(NaN);if(l+4<=b0)return o=hi(d,l+4,f).times(.5),o.s=u.s,o}for(d.precision=a=l+10,d.rounding=1,n=Math.min(28,a/Qe+2|0),e=n;e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(ut=!1,t=Math.ceil(a/Qe),r=1,c=u.times(u),o=new d(u),i=u;e!==-1;)if(i=i.times(c),s=o.minus(i.div(r+=2)),i=i.times(c),o=s.plus(i.div(r+=2)),o.d[t]!==void 0)for(e=t;o.d[e]===s.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),ut=!0,We(o,d.precision=l,d.rounding=f,!0)};ye.isFinite=function(){return!!this.d};ye.isInteger=ye.isInt=function(){return!!this.d&&pr(this.e/Qe)>this.d.length-2};ye.isNaN=function(){return!this.s};ye.isNegative=ye.isNeg=function(){return this.s<0};ye.isPositive=ye.isPos=function(){return this.s>0};ye.isZero=function(){return!!this.d&&this.d[0]===0};ye.lessThan=ye.lt=function(e){return this.cmp(e)<0};ye.lessThanOrEqualTo=ye.lte=function(e){return this.cmp(e)<1};ye.logarithm=ye.log=function(e){var t,n,r,i,s,o,a,c,u=this,d=u.constructor,l=d.precision,f=d.rounding,p=5;if(e==null)e=new d(10),t=!0;else{if(e=new d(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new d(NaN);t=e.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new d(n&&!n[0]?-1/0:u.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(i=n[0];i%10===0;)i/=10;s=i!==1}if(ut=!1,a=l+p,o=ks(u,a),r=t?fl(d,a+10):ks(e,a),c=ln(o,r,a,1),Tc(c.d,i=l,f))do if(a+=10,o=ks(u,a),r=t?fl(d,a+10):ks(e,a),c=ln(o,r,a,1),!s){+er(c.d).slice(i+1,i+15)+1==1e14&&(c=We(c,l+1,0));break}while(Tc(c.d,i+=10,f));return ut=!0,We(c,l,f)};ye.minus=ye.sub=function(e){var t,n,r,i,s,o,a,c,u,d,l,f,p=this,_=p.constructor;if(e=new _(e),!p.d||!e.d)return!p.s||!e.s?e=new _(NaN):p.d?e.s=-e.s:e=new _(e.d||p.s!==e.s?p:NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(u=p.d,f=e.d,a=_.precision,c=_.rounding,!u[0]||!f[0]){if(f[0])e.s=-e.s;else if(u[0])e=new _(p);else return new _(c===3?-0:0);return ut?We(e,a,c):e}if(n=pr(e.e/Qe),d=pr(p.e/Qe),u=u.slice(),s=d-n,s){for(l=s<0,l?(t=u,s=-s,o=f.length):(t=f,n=d,o=u.length),r=Math.max(Math.ceil(a/Qe),o)+2,s>r&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for(r=u.length,o=f.length,l=r<o,l&&(o=r),r=0;r<o;r++)if(u[r]!=f[r]){l=u[r]<f[r];break}s=0}for(l&&(t=u,u=f,f=t,e.s=-e.s),o=u.length,r=f.length-o;r>0;--r)u[o++]=0;for(r=f.length;r>s;){if(u[--r]<f[r]){for(i=r;i&&u[--i]===0;)u[i]=pi-1;--u[i],u[r]+=pi}u[r]-=f[r]}for(;u[--o]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(e.d=u,e.e=Wd(u,n),ut?We(e,a,c):e):new _(c===3?-0:0)};ye.modulo=ye.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?We(new r(n),r.precision,r.rounding):(ut=!1,r.modulo==9?(t=ln(n,e.abs(),0,3,1),t.s*=e.s):t=ln(n,e,0,r.modulo,1),t=t.times(e),ut=!0,n.minus(t))};ye.naturalExponential=ye.exp=function(){return v0(this)};ye.naturalLogarithm=ye.ln=function(){return ks(this)};ye.negated=ye.neg=function(){var e=new this.constructor(this);return e.s=-e.s,We(e)};ye.plus=ye.add=function(e){var t,n,r,i,s,o,a,c,u,d,l=this,f=l.constructor;if(e=new f(e),!l.d||!e.d)return!l.s||!e.s?e=new f(NaN):l.d||(e=new f(e.d||l.s===e.s?l:NaN)),e;if(l.s!=e.s)return e.s=-e.s,l.minus(e);if(u=l.d,d=e.d,a=f.precision,c=f.rounding,!u[0]||!d[0])return d[0]||(e=new f(l)),ut?We(e,a,c):e;if(s=pr(l.e/Qe),r=pr(e.e/Qe),u=u.slice(),i=s-r,i){for(i<0?(n=u,i=-i,o=d.length):(n=d,r=s,o=u.length),s=Math.ceil(a/Qe),o=s>o?s+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=u.length,i=d.length,o-i<0&&(i=o,n=d,d=u,u=n),t=0;i;)t=(u[--i]=u[i]+d[i]+t)/pi|0,u[i]%=pi;for(t&&(u.unshift(t),++r),o=u.length;u[--o]==0;)u.pop();return e.d=u,e.e=Wd(u,r),ut?We(e,a,c):e};ye.precision=ye.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error($s+e);return n.d?(t=cw(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};ye.round=function(){var e=this,t=e.constructor;return We(new t(e),e.e+1,t.rounding)};ye.sine=ye.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Qe,r.rounding=1,n=JA(r,fw(r,n)),r.precision=e,r.rounding=t,We(zi>2?n.neg():n,e,t,!0)):new r(NaN)};ye.squareRoot=ye.sqrt=function(){var e,t,n,r,i,s,o=this,a=o.d,c=o.e,u=o.s,d=o.constructor;if(u!==1||!a||!a[0])return new d(!u||u<0&&(!a||a[0])?NaN:a?o:1/0);for(ut=!1,u=Math.sqrt(+o),u==0||u==1/0?(t=er(a),(t.length+c)%2==0&&(t+="0"),u=Math.sqrt(t),c=pr((c+1)/2)-(c<0||c%2),u==1/0?t="5e"+c:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),r=new d(t)):r=new d(u.toString()),n=(c=d.precision)+3;;)if(s=r,r=s.plus(ln(o,s,n+2,1)).times(.5),er(s.d).slice(0,n)===(t=er(r.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!i&&t=="4999"){if(!i&&(We(s,c+1,0),s.times(s).eq(o))){r=s;break}n+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(We(r,c+1,1),e=!r.times(r).eq(o));break}return ut=!0,We(r,c,d.rounding,e)};ye.tangent=ye.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=ln(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,We(zi==2||zi==4?n.neg():n,e,t,!0)):new r(NaN)};ye.times=ye.mul=function(e){var t,n,r,i,s,o,a,c,u,d=this,l=d.constructor,f=d.d,p=(e=new l(e)).d;if(e.s*=d.s,!f||!f[0]||!p||!p[0])return new l(!e.s||f&&!f[0]&&!p||p&&!p[0]&&!f?NaN:!f||!p?e.s/0:e.s*0);for(n=pr(d.e/Qe)+pr(e.e/Qe),c=f.length,u=p.length,c<u&&(s=f,f=p,p=s,o=c,c=u,u=o),s=[],o=c+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,i=c+r;i>r;)a=s[i]+p[r]*f[i-r-1]+t,s[i--]=a%pi|0,t=a/pi|0;s[i]=(s[i]+t)%pi|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=Wd(s,n),ut?We(e,l.precision,l.rounding):e};ye.toBinary=function(e,t){return Gh(this,2,e,t)};ye.toDecimalPlaces=ye.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Ar(e,0,Ds),t===void 0?t=r.rounding:Ar(t,0,8),We(n,e+n.e+1,t))};ye.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Oi(r,!0):(Ar(e,0,Ds),t===void 0?t=i.rounding:Ar(t,0,8),r=We(new i(r),e+1,t),n=Oi(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};ye.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?n=Oi(i):(Ar(e,0,Ds),t===void 0?t=s.rounding:Ar(t,0,8),r=We(new s(i),e+i.e+1,t),n=Oi(r,!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};ye.toFraction=function(e){var t,n,r,i,s,o,a,c,u,d,l,f,p=this,_=p.d,y=p.constructor;if(!_)return new y(p);if(u=n=new y(1),r=c=new y(0),t=new y(r),s=t.e=cw(_)-p.e-1,o=s%Qe,t.d[0]=qn(10,o<0?Qe+o:o),e==null)e=s>0?t:u;else{if(a=new y(e),!a.isInt()||a.lt(u))throw Error($s+a);e=a.gt(t)?s>0?t:u:a}for(ut=!1,a=new y(er(_)),d=y.precision,y.precision=s=_.length*Qe*2;l=ln(a,t,0,1,1),i=n.plus(l.times(r)),i.cmp(e)!=1;)n=r,r=i,i=u,u=c.plus(l.times(i)),c=i,i=t,t=a.minus(l.times(i)),a=i;return i=ln(e.minus(n),r,0,1,1),c=c.plus(i.times(u)),n=n.plus(i.times(r)),c.s=u.s=p.s,f=ln(u,r,s,1).minus(p).abs().cmp(ln(c,n,s,1).minus(p).abs())<1?[u,r]:[c,n],y.precision=d,ut=!0,f};ye.toHexadecimal=ye.toHex=function(e,t){return Gh(this,16,e,t)};ye.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),e==null){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),t===void 0?t=r.rounding:Ar(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(ut=!1,n=ln(n,e,0,t,1).times(e),ut=!0,We(n)):(e.s=n.s,n=e),n};ye.toNumber=function(){return+this};ye.toOctal=function(e,t){return Gh(this,8,e,t)};ye.toPower=ye.pow=function(e){var t,n,r,i,s,o,a=this,c=a.constructor,u=+(e=new c(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new c(qn(+a,u));if(a=new c(a),a.eq(1))return a;if(r=c.precision,s=c.rounding,e.eq(1))return We(a,r,s);if(t=pr(e.e/Qe),t>=e.d.length-1&&(n=u<0?-u:u)<=VA)return i=uw(c,a,n,r),e.s<0?new c(1).div(i):We(i,r,s);if(o=a.s,o<0){if(t<e.d.length-1)return new c(NaN);if(e.d[t]&1||(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return n=qn(+a,u),t=n==0||!isFinite(n)?pr(u*(Math.log("0."+er(a.d))/Math.LN10+a.e+1)):new c(n+"").e,t>c.maxE+1||t<c.minE-1?new c(t>0?o/0:0):(ut=!1,c.rounding=a.s=1,n=Math.min(12,(t+"").length),i=v0(e.times(ks(a,r+n)),r),i.d&&(i=We(i,r+5,1),Tc(i.d,r,s)&&(t=r+10,i=We(v0(e.times(ks(a,t+n)),t),t+5,1),+er(i.d).slice(r+1,r+15)+1==1e14&&(i=We(i,r+1,0)))),i.s=o,ut=!0,c.rounding=s,We(i,r,s))};ye.toPrecision=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Oi(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Ar(e,1,Ds),t===void 0?t=i.rounding:Ar(t,0,8),r=We(new i(r),e,t),n=Oi(r,e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n};ye.toSignificantDigits=ye.toSD=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Ar(e,1,Ds),t===void 0?t=r.rounding:Ar(t,0,8)),We(new r(n),e,t)};ye.toString=function(){var e=this,t=e.constructor,n=Oi(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};ye.truncated=ye.trunc=function(){return We(new this.constructor(this),this.e+1,1)};ye.valueOf=ye.toJSON=function(){var e=this,t=e.constructor,n=Oi(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function er(e){var t,n,r,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)r=e[t]+"",n=Qe-r.length,n&&(s+=xs(n)),s+=r;o=e[t],r=o+"",n=Qe-r.length,n&&(s+=xs(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function Ar(e,t,n){if(e!==~~e||e<t||e>n)throw Error($s+e)}function Tc(e,t,n,r){var i,s,o,a;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=Qe,i=0):(i=Math.ceil((t+1)/Qe),t%=Qe),s=qn(10,Qe-t),a=e[i]%s|0,r==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),o=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):o=(n<4&&a+1==s||n>3&&a+1==s/2)&&(e[i+1]/s/100|0)==qn(10,t-2)-1||(a==s/2||a==0)&&(e[i+1]/s/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),o=(r||n<4)&&a==9999||!r&&n>3&&a==4999):o=((r||n<4)&&a+1==s||!r&&n>3&&a+1==s/2)&&(e[i+1]/s/1e3|0)==qn(10,t-3)-1,o}function Ku(e,t,n){for(var r,i=[0],s,o=0,a=e.length;o<a;){for(s=i.length;s--;)i[s]*=t;for(i[0]+=_0.indexOf(e.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function XA(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?(n=Math.ceil(r/3),i=(1/Vd(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=Ea(e,1,t.times(i),new e(1));for(var s=n;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}var ln=function(){function e(r,i,s){var o,a=0,c=r.length;for(r=r.slice();c--;)o=r[c]*i+a,r[c]=o%s|0,a=o/s|0;return a&&r.unshift(a),r}function t(r,i,s,o){var a,c;if(s!=o)c=s>o?1:-1;else for(a=c=0;a<s;a++)if(r[a]!=i[a]){c=r[a]>i[a]?1:-1;break}return c}function n(r,i,s,o){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*o+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o,a,c){var u,d,l,f,p,_,y,b,B,E,x,S,T,R,P,C,G,F,U,N,k=r.constructor,h=r.s==i.s?1:-1,g=r.d,v=i.d;if(!g||!g[0]||!v||!v[0])return new k(!r.s||!i.s||(g?v&&g[0]==v[0]:!v)?NaN:g&&g[0]==0||!v?h*0:h/0);for(c?(p=1,d=r.e-i.e):(c=pi,p=Qe,d=pr(r.e/p)-pr(i.e/p)),U=v.length,G=g.length,B=new k(h),E=B.d=[],l=0;v[l]==(g[l]||0);l++);if(v[l]>(g[l]||0)&&d--,s==null?(R=s=k.precision,o=k.rounding):a?R=s+(r.e-i.e)+1:R=s,R<0)E.push(1),_=!0;else{if(R=R/p+2|0,l=0,U==1){for(f=0,v=v[0],R++;(l<G||f)&&R--;l++)P=f*c+(g[l]||0),E[l]=P/v|0,f=P%v|0;_=f||l<G}else{for(f=c/(v[0]+1)|0,f>1&&(v=e(v,f,c),g=e(g,f,c),U=v.length,G=g.length),C=U,x=g.slice(0,U),S=x.length;S<U;)x[S++]=0;N=v.slice(),N.unshift(0),F=v[0],v[1]>=c/2&&++F;do f=0,u=t(v,x,U,S),u<0?(T=x[0],U!=S&&(T=T*c+(x[1]||0)),f=T/F|0,f>1?(f>=c&&(f=c-1),y=e(v,f,c),b=y.length,S=x.length,u=t(y,x,b,S),u==1&&(f--,n(y,U<b?N:v,b,c))):(f==0&&(u=f=1),y=v.slice()),b=y.length,b<S&&y.unshift(0),n(x,y,S,c),u==-1&&(S=x.length,u=t(v,x,U,S),u<1&&(f++,n(x,U<S?N:v,S,c))),S=x.length):u===0&&(f++,x=[0]),E[l++]=f,u&&x[0]?x[S++]=g[C]||0:(x=[g[C]],S=1);while((C++<G||x[0]!==void 0)&&R--);_=x[0]!==void 0}E[0]||E.shift()}if(p==1)B.e=d,rw=_;else{for(l=1,f=E[0];f>=10;f/=10)l++;B.e=l+d*p-1,We(B,a?s+B.e+1:s,o,_)}return B}}();function We(e,t,n,r){var i,s,o,a,c,u,d,l,f,p=e.constructor;e:if(t!=null){if(l=e.d,!l)return e;for(i=1,a=l[0];a>=10;a/=10)i++;if(s=t-i,s<0)s+=Qe,o=t,d=l[f=0],c=d/qn(10,i-o-1)%10|0;else if(f=Math.ceil((s+1)/Qe),a=l.length,f>=a)if(r){for(;a++<=f;)l.push(0);d=c=0,i=1,s%=Qe,o=s-Qe+1}else break e;else{for(d=a=l[f],i=1;a>=10;a/=10)i++;s%=Qe,o=s-Qe+i,c=o<0?0:d/qn(10,i-o-1)%10|0}if(r=r||t<0||l[f+1]!==void 0||(o<0?d:d%qn(10,i-o-1)),u=n<4?(c||r)&&(n==0||n==(e.s<0?3:2)):c>5||c==5&&(n==4||r||n==6&&(s>0?o>0?d/qn(10,i-o):0:l[f-1])%10&1||n==(e.s<0?8:7)),t<1||!l[0])return l.length=0,u?(t-=e.e+1,l[0]=qn(10,(Qe-t%Qe)%Qe),e.e=-t||0):l[0]=e.e=0,e;if(s==0?(l.length=f,a=1,f--):(l.length=f+1,a=qn(10,Qe-s),l[f]=o>0?(d/qn(10,i-o)%qn(10,o)|0)*a:0),u)for(;;)if(f==0){for(s=1,o=l[0];o>=10;o/=10)s++;for(o=l[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(e.e++,l[0]==pi&&(l[0]=1));break}else{if(l[f]+=a,l[f]!=pi)break;l[f--]=0,a=1}for(s=l.length;l[--s]===0;)l.pop()}return ut&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function Oi(e,t,n){if(!e.isFinite())return dw(e);var r,i=e.e,s=er(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+xs(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+xs(-i-1)+s,n&&(r=n-o)>0&&(s+=xs(r))):i>=o?(s+=xs(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+xs(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=xs(r))),s}function Wd(e,t){var n=e[0];for(t*=Qe;n>=10;n/=10)t++;return t}function fl(e,t,n){if(t>KA)throw ut=!0,n&&(e.precision=n),Error(iw);return We(new e(ll),t,1,!0)}function hi(e,t,n){if(t>b0)throw Error(iw);return We(new e(dl),t,n,!0)}function cw(e){var t=e.length-1,n=t*Qe+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function xs(e){for(var t="";e--;)t+="0";return t}function uw(e,t,n,r){var i,s=new e(1),o=Math.ceil(r/Qe+4);for(ut=!1;;){if(n%2&&(s=s.times(t),kg(s.d,o)&&(i=!0)),n=pr(n/2),n===0){n=s.d.length-1,i&&s.d[n]===0&&++s.d[n];break}t=t.times(t),kg(t.d,o)}return ut=!0,s}function Eg(e){return e.d[e.d.length-1]&1}function lw(e,t,n){for(var r,i=new e(t[0]),s=0;++s<t.length;)if(r=new e(t[s]),r.s)i[n](r)&&(i=r);else{i=r;break}return i}function v0(e,t){var n,r,i,s,o,a,c,u=0,d=0,l=0,f=e.constructor,p=f.rounding,_=f.precision;if(!e.d||!e.d[0]||e.e>17)return new f(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(ut=!1,c=_):c=t,a=new f(.03125);e.e>-2;)e=e.times(a),l+=5;for(r=Math.log(qn(2,l))/Math.LN10*2+5|0,c+=r,n=s=o=new f(1),f.precision=c;;){if(s=We(s.times(e),c,1),n=n.times(++d),a=o.plus(ln(s,n,c,1)),er(a.d).slice(0,c)===er(o.d).slice(0,c)){for(i=l;i--;)o=We(o.times(o),c,1);if(t==null)if(u<3&&Tc(o.d,c-r,p,u))f.precision=c+=10,n=s=a=new f(1),d=0,u++;else return We(o,f.precision=_,p,ut=!0);else return f.precision=_,o}o=a}}function ks(e,t){var n,r,i,s,o,a,c,u,d,l,f,p=1,_=10,y=e,b=y.d,B=y.constructor,E=B.rounding,x=B.precision;if(y.s<0||!b||!b[0]||!y.e&&b[0]==1&&b.length==1)return new B(b&&!b[0]?-1/0:y.s!=1?NaN:b?0:y);if(t==null?(ut=!1,d=x):d=t,B.precision=d+=_,n=er(b),r=n.charAt(0),Math.abs(s=y.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)y=y.times(e),n=er(y.d),r=n.charAt(0),p++;s=y.e,r>1?(y=new B("0."+n),s++):y=new B(r+"."+n.slice(1))}else return u=fl(B,d+2,x).times(s+""),y=ks(new B(r+"."+n.slice(1)),d-_).plus(u),B.precision=x,t==null?We(y,x,E,ut=!0):y;for(l=y,c=o=y=ln(y.minus(1),y.plus(1),d,1),f=We(y.times(y),d,1),i=3;;){if(o=We(o.times(f),d,1),u=c.plus(ln(o,new B(i),d,1)),er(u.d).slice(0,d)===er(c.d).slice(0,d))if(c=c.times(2),s!==0&&(c=c.plus(fl(B,d+2,x).times(s+""))),c=ln(c,new B(p),d,1),t==null)if(Tc(c.d,d-_,E,a))B.precision=d+=_,u=o=y=ln(l.minus(1),l.plus(1),d,1),f=We(y.times(y),d,1),i=a=1;else return We(c,B.precision=x,E,ut=!0);else return B.precision=x,c;c=u,i+=2}}function dw(e){return String(e.s*e.s/0)}function x0(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;r++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(r,i),t){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%Qe,n<0&&(r+=Qe),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Qe;r<i;)e.d.push(+t.slice(r,r+=Qe));t=t.slice(r),r=Qe-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),ut&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function ZA(e,t){var n,r,i,s,o,a,c,u,d;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),aw.test(t))return x0(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(GA.test(t))n=16,t=t.toLowerCase();else if(FA.test(t))n=2;else if(WA.test(t))n=8;else throw Error($s+t);for(s=t.search(/p/i),s>0?(c=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),o=s>=0,r=e.constructor,o&&(t=t.replace(".",""),a=t.length,s=a-s,i=uw(r,new r(n),s,s*2)),u=Ku(t,n,pi),d=u.length-1,s=d;u[s]===0;--s)u.pop();return s<0?new r(e.s*0):(e.e=Wd(u,d),e.d=u,ut=!1,o&&(e=ln(e,i,a*4)),c&&(e=e.times(Math.abs(c)<54?qn(2,c):Fe.pow(2,c))),ut=!0,e)}function JA(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:Ea(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:n|0,t=t.times(1/Vd(5,n)),t=Ea(e,2,t,t);for(var i,s=new e(5),o=new e(16),a=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(o.times(i).minus(a))));return t}function Ea(e,t,n,r,i){var s,o,a,c,u=e.precision,d=Math.ceil(u/Qe);for(ut=!1,c=n.times(n),a=new e(r);;){if(o=ln(a.times(c),new e(t++*t++),u,1),a=i?r.plus(o):r.minus(o),r=ln(o.times(c),new e(t++*t++),u,1),o=a.plus(r),o.d[d]!==void 0){for(s=d;o.d[s]===a.d[s]&&s--;);if(s==-1)break}s=a,a=r,r=o,o=s}return ut=!0,o.d.length=d+1,o}function Vd(e,t){for(var n=e;--t;)n*=e;return n}function fw(e,t){var n,r=t.s<0,i=hi(e,e.precision,1),s=i.times(.5);if(t=t.abs(),t.lte(s))return zi=r?4:1,t;if(n=t.divToInt(i),n.isZero())zi=r?3:2;else{if(t=t.minus(n.times(i)),t.lte(s))return zi=Eg(n)?r?2:3:r?4:1,t;zi=Eg(n)?r?1:4:r?3:2}return t.minus(i).abs()}function Gh(e,t,n,r){var i,s,o,a,c,u,d,l,f,p=e.constructor,_=n!==void 0;if(_?(Ar(n,1,Ds),r===void 0?r=p.rounding:Ar(r,0,8)):(n=p.precision,r=p.rounding),!e.isFinite())d=dw(e);else{for(d=Oi(e),o=d.indexOf("."),_?(i=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):i=t,o>=0&&(d=d.replace(".",""),f=new p(1),f.e=d.length-o,f.d=Ku(Oi(f),10,i),f.e=f.d.length),l=Ku(d,10,i),s=c=l.length;l[--c]==0;)l.pop();if(!l[0])d=_?"0p+0":"0";else{if(o<0?s--:(e=new p(e),e.d=l,e.e=s,e=ln(e,f,n,r,0,i),l=e.d,s=e.e,u=rw),o=l[n],a=i/2,u=u||l[n+1]!==void 0,u=r<4?(o!==void 0||u)&&(r===0||r===(e.s<0?3:2)):o>a||o===a&&(r===4||u||r===6&&l[n-1]&1||r===(e.s<0?8:7)),l.length=n,u)for(;++l[--n]>i-1;)l[n]=0,n||(++s,l.unshift(1));for(c=l.length;!l[c-1];--c);for(o=0,d="";o<c;o++)d+=_0.charAt(l[o]);if(_){if(c>1)if(t==16||t==8){for(o=t==16?4:3,--c;c%o;c++)d+="0";for(l=Ku(d,i,t),c=l.length;!l[c-1];--c);for(o=1,d="1.";o<c;o++)d+=_0.charAt(l[o])}else d=d.charAt(0)+"."+d.slice(1);d=d+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)d="0"+d;d="0."+d}else if(++s>c)for(s-=c;s--;)d+="0";else s<c&&(d=d.slice(0,s)+"."+d.slice(s))}d=(t==16?"0x":t==2?"0b":t==8?"0o":"")+d}return e.s<0?"-"+d:d}function kg(e,t){if(e.length>t)return e.length=t,!0}function YA(e){return new this(e).abs()}function QA(e){return new this(e).acos()}function eE(e){return new this(e).acosh()}function tE(e,t){return new this(e).plus(t)}function nE(e){return new this(e).asin()}function rE(e){return new this(e).asinh()}function iE(e){return new this(e).atan()}function sE(e){return new this(e).atanh()}function oE(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=hi(this,s,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?hi(this,r,i):new this(0),n.s=e.s):!e.d||t.isZero()?(n=hi(this,s,1).times(.5),n.s=e.s):t.s<0?(this.precision=s,this.rounding=1,n=this.atan(ln(e,t,s,1)),t=hi(this,s,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(ln(e,t,s,1)),n}function aE(e){return new this(e).cbrt()}function cE(e){return We(e=new this(e),e.e+1,2)}function uE(e,t,n){return new this(e).clamp(t,n)}function lE(e){if(!e||typeof e!="object")throw Error(Gd+"Object expected");var t,n,r,i=e.defaults===!0,s=["precision",1,Ds,"rounding",0,8,"toExpNeg",-Go,0,"toExpPos",0,Go,"maxE",0,Go,"minE",-Go,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],i&&(this[n]=w0[n]),(r=e[n])!==void 0)if(pr(r)===r&&r>=s[t+1]&&r<=s[t+2])this[n]=r;else throw Error($s+n+": "+r);if(n="crypto",i&&(this[n]=w0[n]),(r=e[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(sw);else this[n]=!1;else throw Error($s+n+": "+r);return this}function dE(e){return new this(e).cos()}function fE(e){return new this(e).cosh()}function hw(e){var t,n,r;function i(s){var o,a,c,u=this;if(!(u instanceof i))return new i(s);if(u.constructor=i,Bg(s)){u.s=s.s,ut?!s.d||s.e>i.maxE?(u.e=NaN,u.d=null):s.e<i.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(c=typeof s,c==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(o=0,a=s;a>=10;a/=10)o++;ut?o>i.maxE?(u.e=NaN,u.d=null):o<i.minE?(u.e=0,u.d=[0]):(u.e=o,u.d=[s]):(u.e=o,u.d=[s]);return}else if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return x0(u,s.toString())}else if(c!=="string")throw Error($s+s);return(a=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(a===43&&(s=s.slice(1)),u.s=1),aw.test(s)?x0(u,s):ZA(u,s)}if(i.prototype=ye,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=lE,i.clone=hw,i.isDecimal=Bg,i.abs=YA,i.acos=QA,i.acosh=eE,i.add=tE,i.asin=nE,i.asinh=rE,i.atan=iE,i.atanh=sE,i.atan2=oE,i.cbrt=aE,i.ceil=cE,i.clamp=uE,i.cos=dE,i.cosh=fE,i.div=hE,i.exp=pE,i.floor=gE,i.hypot=yE,i.ln=mE,i.log=_E,i.log10=bE,i.log2=wE,i.max=vE,i.min=xE,i.mod=SE,i.mul=TE,i.pow=AE,i.random=EE,i.round=kE,i.sign=BE,i.sin=RE,i.sinh=PE,i.sqrt=OE,i.sub=IE,i.sum=CE,i.tan=$E,i.tanh=UE,i.trunc=ME,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function hE(e,t){return new this(e).div(t)}function pE(e){return new this(e).exp()}function gE(e){return We(e=new this(e),e.e+1,3)}function yE(){var e,t,n=new this(0);for(ut=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return ut=!0,new this(1/0);n=t}return ut=!0,n.sqrt()}function Bg(e){return e instanceof Fe||e&&e.toStringTag===ow||!1}function mE(e){return new this(e).ln()}function _E(e,t){return new this(e).log(t)}function wE(e){return new this(e).log(2)}function bE(e){return new this(e).log(10)}function vE(){return lw(this,arguments,"lt")}function xE(){return lw(this,arguments,"gt")}function SE(e,t){return new this(e).mod(t)}function TE(e,t){return new this(e).mul(t)}function AE(e,t){return new this(e).pow(t)}function EE(e){var t,n,r,i,s=0,o=new this(1),a=[];if(e===void 0?e=this.precision:Ar(e,1,Ds),r=Math.ceil(e/Qe),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)i=t[s],i>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);s<r;)i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,s):(a.push(i%1e7),s+=4);s=r/4}else throw Error(sw);else for(;s<r;)a[s++]=Math.random()*1e7|0;for(r=a[--s],e%=Qe,r&&e&&(i=qn(10,Qe-e),a[s]=(r/i|0)*i);a[s]===0;s--)a.pop();if(s<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=Qe)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<Qe&&(n-=Qe-r)}return o.e=n,o.d=a,o}function kE(e){return We(e=new this(e),e.e+1,this.rounding)}function BE(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function RE(e){return new this(e).sin()}function PE(e){return new this(e).sinh()}function OE(e){return new this(e).sqrt()}function IE(e,t){return new this(e).sub(t)}function CE(){var e=0,t=arguments,n=new this(t[e]);for(ut=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return ut=!0,We(n,this.precision,this.rounding)}function $E(e){return new this(e).tan()}function UE(e){return new this(e).tanh()}function ME(e){return We(e=new this(e),e.e+1,1)}ye[Symbol.for("nodejs.util.inspect.custom")]=ye.toString;ye[Symbol.toStringTag]="Decimal";var Fe=ye.constructor=hw(w0);ll=new Fe(ll);dl=new Fe(dl);var qE="Invariant failed";function NE(e,t){if(!e)throw new Error(qE)}const pw="3.7.5",DE=pw,LE=typeof atob=="function",HE=typeof btoa=="function",Fa=typeof Buffer=="function",Rg=typeof TextDecoder=="function"?new TextDecoder:void 0,Pg=typeof TextEncoder=="function"?new TextEncoder:void 0,zE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",sc=Array.prototype.slice.call(zE),_u=(e=>{let t={};return e.forEach((n,r)=>t[n]=r),t})(sc),jE=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Zn=String.fromCharCode.bind(String),Og=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),gw=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),yw=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),mw=e=>{let t,n,r,i,s="";const o=e.length%3;for(let a=0;a<e.length;){if((n=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255||(i=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=n<<16|r<<8|i,s+=sc[t>>18&63]+sc[t>>12&63]+sc[t>>6&63]+sc[t&63]}return o?s.slice(0,o-3)+"===".substring(o):s},Wh=HE?e=>btoa(e):Fa?e=>Buffer.from(e,"binary").toString("base64"):mw,S0=Fa?e=>Buffer.from(e).toString("base64"):e=>{let n=[];for(let r=0,i=e.length;r<i;r+=4096)n.push(Zn.apply(null,e.subarray(r,r+4096)));return Wh(n.join(""))},Xu=(e,t=!1)=>t?gw(S0(e)):S0(e),FE=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?Zn(192|t>>>6)+Zn(128|t&63):Zn(224|t>>>12&15)+Zn(128|t>>>6&63)+Zn(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return Zn(240|t>>>18&7)+Zn(128|t>>>12&63)+Zn(128|t>>>6&63)+Zn(128|t&63)}},GE=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,_w=e=>e.replace(GE,FE),Ig=Fa?e=>Buffer.from(e,"utf8").toString("base64"):Pg?e=>S0(Pg.encode(e)):e=>Wh(_w(e)),sa=(e,t=!1)=>t?gw(Ig(e)):Ig(e),Cg=e=>sa(e,!0),WE=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,VE=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return Zn((n>>>10)+55296)+Zn((n&1023)+56320);case 3:return Zn((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return Zn((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},ww=e=>e.replace(WE,VE),bw=e=>{if(e=e.replace(/\s+/g,""),!jE.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,n="",r,i;for(let s=0;s<e.length;)t=_u[e.charAt(s++)]<<18|_u[e.charAt(s++)]<<12|(r=_u[e.charAt(s++)])<<6|(i=_u[e.charAt(s++)]),n+=r===64?Zn(t>>16&255):i===64?Zn(t>>16&255,t>>8&255):Zn(t>>16&255,t>>8&255,t&255);return n},Vh=LE?e=>atob(yw(e)):Fa?e=>Buffer.from(e,"base64").toString("binary"):bw,vw=Fa?e=>Og(Buffer.from(e,"base64")):e=>Og(Vh(e).split("").map(t=>t.charCodeAt(0))),xw=e=>vw(Sw(e)),KE=Fa?e=>Buffer.from(e,"base64").toString("utf8"):Rg?e=>Rg.decode(vw(e)):e=>ww(Vh(e)),Sw=e=>yw(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),T0=e=>KE(Sw(e)),XE=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},Tw=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),Aw=function(){const e=(t,n)=>Object.defineProperty(String.prototype,t,Tw(n));e("fromBase64",function(){return T0(this)}),e("toBase64",function(t){return sa(this,t)}),e("toBase64URI",function(){return sa(this,!0)}),e("toBase64URL",function(){return sa(this,!0)}),e("toUint8Array",function(){return xw(this)})},Ew=function(){const e=(t,n)=>Object.defineProperty(Uint8Array.prototype,t,Tw(n));e("toBase64",function(t){return Xu(this,t)}),e("toBase64URI",function(){return Xu(this,!0)}),e("toBase64URL",function(){return Xu(this,!0)})},ZE=()=>{Aw(),Ew()},A0={version:pw,VERSION:DE,atob:Vh,atobPolyfill:bw,btoa:Wh,btoaPolyfill:mw,fromBase64:T0,toBase64:sa,encode:sa,encodeURI:Cg,encodeURL:Cg,utob:_w,btou:ww,decode:T0,isValid:XE,fromUint8Array:Xu,toUint8Array:xw,extendString:Aw,extendUint8Array:Ew,extendBuiltins:ZE};var Ss;(function(e){e[e.EQUAL=0]="EQUAL",e[e.GREATER=1]="GREATER",e[e.LESS=-1]="LESS"})(Ss||(Ss={}));var JE=function(){function e(t){this.compare=t||e.defaultCompareFunction}return e.defaultCompareFunction=function(t,n){return t===n?Ss.EQUAL:t<n?Ss.LESS:Ss.GREATER},e.prototype.equal=function(t,n){return this.compare(t,n)===Ss.EQUAL},e.prototype.lessThan=function(t,n){return this.compare(t,n)===Ss.LESS},e.prototype.greaterThan=function(t,n){return this.compare(t,n)===Ss.GREATER},e.prototype.lessThanOrEqual=function(t,n){return this.lessThan(t,n)||this.equal(t,n)},e.prototype.greaterThanOrEqual=function(t,n){return this.greaterThan(t,n)||this.equal(t,n)},e.prototype.reverse=function(){var t=this.compare;this.compare=function(n,r){return t(r,n)}},e}(),$g=function(){function e(t){this.value=t,this.next=null}return e}(),Ug=function(){function e(t){this.value=t,this.next=null,this.prev=null}return e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var E0=function(e,t){return E0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},E0(e,t)};function Ga(e,t){E0(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Ac(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return c([u,d])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(d){u=[6,d],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function YE(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function mi(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(YE(arguments[t]));return e}var QE="obfuse error occur";function hl(e,t){if(!e)throw new Error("[linked-list] "+(t||QE))}var e7=-1,kw=function(){function e(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this._head=null,this._tail=null,this._length=0,this.compare=new JE,n.length>0&&n.forEach(function(i){t.append(i)})}return Object.defineProperty(e.prototype,"head",{get:function(){return this._head?this._head.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail?this._tail.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopLength",{get:function(){var t=!1,n=1;if(!this._head)return 0;for(var r=this._head,i=this._head;i.next&&i.next.next;)if(i=i.next.next,r=r.next,r===i){t=!0;break}if(t){for(i=i.next;r!==i;)n++,i=i.next;return n}else return 0},enumerable:!0,configurable:!0}),e.prototype.getNode=function(t){var n=this._length;hl(n>0&&t>=0&&t<n,"[linked-list] index "+t+" out of scope of list, which length is "+n);for(var r=this._head,i=0;i<t;)r=r.next,i++;return r},e.prototype.get=function(t){var n=this.getNode(t);return n?n.value:null},e.prototype.find=function(t){var n=t.value,r=t.callback;if(!this._head)return null;for(var i=this._head;i;){if(r&&r(i.value)||n!==void 0&&this.compare.equal(i.value,n))return i;i=i.next}return null},e.prototype.indexOf=function(t){if(!this._head)return e7;for(var n=this._head,r=-1;n.next;){if(r++,this.compare.equal(n.value,t))return r;n=n.next}return n===this._tail&&this.compare.equal(n.value,t)&&(r+=1),r},e.prototype.first=function(t){hl(t>=0,"[linked-list] param 'num' ("+t+") should not less than 0");for(var n=this.iterator(),r=[],i=Math.min(t,this.length),s=0;s<i;s++){var o=n.next();r.push(o.value)}return r},e.prototype.toArray=function(){return mi(this)},e.prototype.isEmpty=function(){return this._head===null},e.prototype.iterator=function(){var t;return Ac(this,function(n){switch(n.label){case 0:t=this._head,n.label=1;case 1:return t?[4,t.value]:[3,3];case 2:return n.sent(),t=t.next,[3,1];case 3:return[2]}})},e.prototype[Symbol.iterator]=function(){return this.iterator()},e}(),Ec=function(e){Ga(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.apply(this,mi(n))||this}return t.prototype.append=function(n){var r=new $g(n);return this._tail?(this._tail.next=r,this._tail=r):this._head=this._tail=r,this._length++,!0},t.prototype.prepend=function(n){var r=new $g(n);return this._head?(r.next=this._head,this._head=r):this._head=this._tail=r,this._length++,!0},t.prototype.remove=function(n){var r=this._head;if(r){if(this.compare.equal(r.value,n))return r.next?(this._head=r.next,r.next=null):this._head=this._tail=null,this._length--,n;for(var i=r;;){if(this.compare.equal(r.value,n))return r.next?i.next=r.next:(this._tail=i,this._tail.next=null),r.next=null,this._length--,n;if(r.next)i=r,r=r.next;else return}}},t.prototype.removeHead=function(){var n=this._head;if(n)return this._head.next?(this._head=n.next,n.next=null):(this._head=null,this._tail=null),this._length--,n.value},t.prototype.removeTail=function(){var n=this._tail;if(n){if(!this._head.next)this._head=null,this._tail=null;else{for(var r=this._head;r.next!==n;)r=r.next;r.next=null,this._tail=r}return this._length--,n.value}},t.prototype.reverse=function(){if(this._head){var n=this._head,r=null,i;for(this._tail=this._head;n!==null;)i=n.next,n.next=r,r=n,n=i;this._head=r}},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,mi([void 0],n)))},t}(kw),t7=function(e){Ga(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,mi(n))||this;return i.cyclization(),i}return t.prototype.iterator=function(){var n;return Ac(this,function(r){switch(r.label){case 0:n=this._head,r.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return r.sent(),n=n.next,n===this._head&&(n=null),[3,1];case 3:return[2]}})},t.prototype.circleIterator=function(){var n;return Ac(this,function(r){switch(r.label){case 0:n=this._head,r.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return r.sent(),n=n.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t.prototype.mapToNormalListFn=function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];this.breakCircle();var s=e.prototype[n].apply(this,r);return this.cyclization(),s},t.prototype.getNode=function(n){return this.mapToNormalListFn("getNode",n)},t.prototype.append=function(n){return this.mapToNormalListFn("append",n)},t.prototype.prepend=function(n){return this.mapToNormalListFn("prepend",n)},t.prototype.find=function(n){return this.mapToNormalListFn("find",n)},t.prototype.indexOf=function(n){return this.mapToNormalListFn("indexOf",n)},t.prototype.remove=function(n){return this.mapToNormalListFn("remove",n)},t.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},t.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},t.prototype.first=function(n){hl(n>=0,"[linked-list] param 'num' ("+n+") should not less than 0");for(var r=this.circleIterator(),i=[],s=0;s<n;s++){var o=r.next();i.push(o.value)}return i},t.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},t.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},t}(Ec);(function(e){Ga(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,mi(n))||this;return i.cyclization(),i}return t.prototype.breakCircle=function(){this._tail&&this._tail.next===this._head&&(this._tail.next=null)},t.prototype.cyclization=function(){this._tail&&this._tail.next===null&&(this._tail.next=this._head)},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,mi([void 0],n)))},t})(t7);var n7=function(e){Ga(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.apply(this,mi(n))||this}return t.prototype.append=function(n){var r=new Ug(n);return this._tail?(this._tail.next=r,r.prev=this._tail,this._tail=r):this._head=this._tail=r,this._length++,!0},t.prototype.prepend=function(n){var r=new Ug(n);return this._head?(r.next=this._head,this._head.prev=r,this._head=r):this._head=this._tail=r,this._length++,!0},t.prototype.remove=function(n){var r=this._head;if(r){if(this.compare.equal(r.value,n))return r.next?(this._head=r.next,this._head.prev=null,r.next=r.prev=null):this._head=this._tail=null,this._length--,n;for(;;){if(this.compare.equal(r.value,n))return r.next?(r.prev.next=r.next,r.next.prev=r.prev,r.next=r.prev=null):(r.prev.next=null,this._tail=r.prev,r.next=r.prev=null),this._length--,r.value;if(r.next)r=r.next;else return}}},t.prototype.removeHead=function(){var n=this._head;if(n)return this._head.next?(n.next.prev=null,this._head=n.next,n.next=null):(this._head=null,this._tail=null),this._length--,n.value},t.prototype.removeTail=function(){var n=this._tail;if(n)return this._head.next?(n.prev.next=null,this._tail=n.prev,n.next=n.prev=null):(this._head=null,this._tail=null),this._length--,n.value},t.prototype.reverse=function(){if(this._head){var n=this._head,r=null,i;for(this._tail=this._head;n!==null;)i=n.next,n.next=r,n.prev=i,r=n,n=i;this._head=r}},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,mi([void 0],n)))},t}(kw),r7=function(e){Ga(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,mi(n))||this;return i.cyclization(),i}return t.prototype.iterator=function(){var n;return Ac(this,function(r){switch(r.label){case 0:n=this._head,r.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return r.sent(),n=n.next,n===this._head&&(n=null),[3,1];case 3:return[2]}})},t.prototype.circleIterator=function(){var n;return Ac(this,function(r){switch(r.label){case 0:n=this._head,r.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return r.sent(),n=n.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t.prototype.mapToNormalListFn=function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];this.breakCircle();var s=e.prototype[n].apply(this,r);return this.cyclization(),s},t.prototype.getNode=function(n){return this.mapToNormalListFn("getNode",n)},t.prototype.append=function(n){return this.mapToNormalListFn("append",n)},t.prototype.prepend=function(n){return this.mapToNormalListFn("prepend",n)},t.prototype.find=function(n){return this.mapToNormalListFn("find",n)},t.prototype.indexOf=function(n){return this.mapToNormalListFn("indexOf",n)},t.prototype.remove=function(n){return this.mapToNormalListFn("remove",n)},t.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},t.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},t.prototype.first=function(n){hl(n>=0,"[linked-list] param 'num' ("+n+") should not less than 0");for(var r=this.circleIterator(),i=[],s=0;s<n;s++){var o=r.next();i.push(o.value)}return i},t.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},t.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},t}(n7);(function(e){Ga(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,mi(n))||this;return i.cyclization(),i}return t.prototype.breakCircle=function(){this._tail&&this._head&&this._tail.next===this._head&&(this._tail.next=null,this._head.prev=null)},t.prototype.cyclization=function(){this._head&&this._tail&&this._tail.next===null&&(this._tail.next=this._head,this._head.prev=this._tail)},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,mi([void 0],n)))},t})(r7);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function i7(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function s7(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i7(arguments[t]));return e}var o7=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.queue=new(Ec.bind.apply(Ec,s7([void 0],t)))}return Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peek",{get:function(){return this.queue.head},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.queue.isEmpty()},e.prototype.enqueue=function(t){return this.queue.append(t)},e.prototype.dequeue=function(){var t=this.queue.removeHead();return typeof t<"u"?t:void 0},e.prototype.toArray=function(){return this.queue.toArray()},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function a7(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function c7(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a7(arguments[t]));return e}var Lf=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.stack=new(Ec.bind.apply(Ec,c7([void 0],t)))}return Object.defineProperty(e.prototype,"length",{get:function(){return this.stack.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peek",{get:function(){return this.stack.tail},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.stack.isEmpty()},e.prototype.push=function(t){return this.stack.append(t)},e.prototype.pop=function(){var t=this.stack.removeTail();return typeof t<"u"?t:void 0},e.prototype.popBottom=function(){var t=this.stack.removeHead();return typeof t<"u"?t:void 0},e.prototype.toArray=function(){return this.stack.toArray()},e}(),Bw=function(){function e(t,n,r){r===void 0&&(r=0),this.startVertex=t,this.endVertex=n,this.weight=r}return e.prototype.getKey=function(){var t=this.startVertex.getKey(),n=this.endVertex.getKey();return t+"_"+n},e.prototype.reverse=function(){var t=this.startVertex;return this.startVertex=this.endVertex,this.endVertex=t,this},e.prototype.clone=function(){return new e(this.startVertex,this.endVertex,this.weight)},e.prototype.toString=function(){return this.getKey()},e}();function k0(e,t,n){if(n===void 0&&(n="cc-graph"),!e)throw new Error((n?"["+n+"]":"")+" Invariant failed: "+t)}function u7(e,t){t===void 0&&(t=!0);var n=typeof e<"u"&&e!==null;return t?n&&e!=="undefined"&&e!=="null":n}var pl=function(){function e(t){k0(u7(t),"Graph vertex must have a value"),this.value=t,this.edges=new Map}return e.prototype.addEdge=function(t){return this.edges.set(t.getKey(),t),this},e.prototype.deleteEdge=function(t){this.edges.delete(t.getKey())},e.prototype.getNeighbors=function(){var t=this,n=this.getEdges(),r=function(i){return i.startVertex===t?i.endVertex:i.startVertex};return n.map(r)},e.prototype.getEdges=function(){return Array.from(this.edges.values())},e.prototype.getDegree=function(){return this.getEdges().length},e.prototype.hasEdge=function(t){var n=this.getEdges().find(function(r){return r===t});return!!n},e.prototype.hasNeighbor=function(t){var n=this.getEdges().find(function(r){return r.startVertex===t||r.endVertex===t});return!!n},e.prototype.findEdge=function(t){var n=function(i){return i.startVertex===t||i.endVertex===t},r=this.getEdges().find(n);return r||null},e.prototype.getKey=function(){return this.value},e.prototype.deleteAllEdges=function(){var t=this;return this.getEdges().forEach(function(n){return t.deleteEdge(n)}),this},e.prototype.toString=function(t){return t?t(this.value):""+this.value},e}();function Mg(e,t,n,r){if(e){t.push(e),r.set(e.getKey(),!0);var i=e.getNeighbors().filter(function(s){return!r.get(s.getKey())});n.push(i)}}function qg(e,t,n){var r=e.pop();r&&n.set(r.getKey(),!1),t.pop()}var Rw=function(){function e(t){t===void 0&&(t=!1),this.vertices={},this.edges={},this.isDirected=t}return e.prototype.addVertex=function(t){return this.vertices[t.getKey()]=t,this},e.prototype.getVertexByKey=function(t){return this.vertices[t]},e.prototype.getNeighbors=function(t){return t.getNeighbors()},e.prototype.getAllVertices=function(){return Object.values(this.vertices)},e.prototype.getAllEdges=function(){return Object.values(this.edges)},e.prototype.addEdge=function(t,n){if(n===void 0&&(n=!1),this.edges[t.getKey()]){if(n)return this;k0(!1,"Edge has already been added before")}var r=this.getVertexByKey(t.startVertex.getKey()),i=this.getVertexByKey(t.endVertex.getKey());if(r||(this.addVertex(t.startVertex),r=this.getVertexByKey(t.startVertex.getKey())),i||(this.addVertex(t.endVertex),i=this.getVertexByKey(t.endVertex.getKey())),this.edges[t.getKey()]=t,this.isDirected)r.addEdge(t);else{r.addEdge(t);var s=t.clone();i.addEdge(s.reverse())}return this},e.prototype.deleteEdge=function(t,n){if(n===void 0&&(n=!1),!this.edges[t.getKey()]){if(n)return this;k0(!1,"Edge not found in graph")}delete this.edges[t.getKey()];var r=this.getVertexByKey(t.startVertex.getKey()),i=this.getVertexByKey(t.endVertex.getKey());return r.deleteEdge(t),i.deleteEdge(t),this},e.prototype.findEdge=function(t,n){var r=this.getVertexByKey(t.getKey());return r?r.findEdge(n):null},e.prototype.getWeight=function(){return this.getAllEdges().reduce(function(t,n){return t+n.weight},0)},e.prototype.reverse=function(){var t=this;return this.getAllEdges().forEach(function(n){t.deleteEdge(n),n.reverse(),t.addEdge(n)}),this},e.prototype.getVerticesIndices=function(){var t={};return this.getAllVertices().forEach(function(n,r){t[n.getKey()]=r}),t},e.prototype.getAdjacencyMatrix=function(){var t=this,n=this.getAllVertices(),r=this.getVerticesIndices(),i=Array(n.length).fill(null).map(function(){return Array(n.length).fill(1/0)});return n.forEach(function(s,o){s.getNeighbors().forEach(function(a){var c=r[a.getKey()],u=t.findEdge(s,a);u&&(i[o][c]=u.weight)})}),i},e.prototype.toString=function(){return Object.keys(this.vertices).toString()},e.prototype.bfs=function(t){var n,r,i;return _f(this,function(s){switch(s.label){case 0:n=new Map,r=new o7,r.enqueue(t),s.label=1;case 1:return r.isEmpty()?[3,4]:(i=r.dequeue(),i&&!n.has(i.getKey())?[4,i]:[3,3]);case 2:s.sent(),n.set(i.getKey(),i),i.getNeighbors().forEach(function(o){return r.enqueue(o)}),s.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.dfs=function(t){var n,r,i;return _f(this,function(s){switch(s.label){case 0:n=new Map,r=new Lf,r.push(t),s.label=1;case 1:return r.isEmpty()?[3,4]:(i=r.pop(),i&&!n.has(i.getKey())?[4,i]:[3,3]);case 2:s.sent(),n.set(i.getKey(),i),i.getNeighbors().forEach(function(o){return r.push(o)}),s.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.findAllPath=function(t,n){var r,i,s,o,a,c,u;return _f(this,function(d){switch(d.label){case 0:return r=[],t!==n?[3,2]:(r.push(t),[4,r]);case 1:return d.sent(),[2];case 2:i=new Map,s=new Lf,o=new Lf,Mg(t,s,o,i),d.label=3;case 3:if(s.isEmpty())return[3,6];if(a=o.pop(),a&&a.length)c=a.shift(),o.push(a),c&&Mg(c,s,o,i);else return o.push(a),qg(s,o,i),[3,3];return u=s.peek,u!==n?[3,5]:[4,s.toArray()];case 4:d.sent(),qg(s,o,i),d.label=5;case 5:return[3,3];case 6:return[2]}})},e}();Fe.config({precision:64,rounding:Fe.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var yr=Fe,Kn=class extends Error{constructor(t,n){super(t),this.message=t,this.errorCode=n}static isClmmpoolsErrorCode(t,n){return t instanceof Kn&&t.errorCode===n}},Te=new I(0),io=new I(1),Kd=new I(2);Kd.pow(new I(128));var gl=Kd.pow(new I(64)).sub(io),l7=Kd.pow(new I(128)).sub(io),ot=class{static toX64_BN(t){return t.mul(new I(2).pow(new I(64)))}static toX64_Decimal(t){return t.mul(yr.pow(2,64))}static toX64(t){return new I(t.mul(yr.pow(2,64)).floor().toFixed())}static fromX64(t){return new yr(t.toString()).mul(yr.pow(2,-64))}static fromX64_Decimal(t){return t.mul(yr.pow(2,-64))}static fromX64_BN(t){return t.div(new I(2).pow(new I(64)))}static shiftRightRoundUp(t){let n=t.shrn(64);return t.mod(gl).gt(Te)&&(n=n.add(io)),n}static divRoundUp(t,n){return t.mod(n).eq(Te)?t.div(n):t.div(n).add(new I(1))}static subUnderflowU128(t,n){return t.lt(n)?t.sub(n).add(l7):t.sub(n)}static checkUnsignedSub(t,n){const r=t.sub(n);if(r.isNeg())throw new Kn("Unsigned integer sub overflow","UnsignedIntegerOverflow");return r}static checkMul(t,n,r){const i=t.mul(n);if(this.isOverflow(i,r))throw new Kn("Multiplication overflow","MultiplicationOverflow");return i}static checkMulDivFloor(t,n,r,i){if(r.eq(Te))throw new Kn("Devide by zero","DivideByZero");const s=t.mul(n).div(r);if(this.isOverflow(s,i))throw new Kn("Multiplication div overflow","MulDivOverflow");return s}static checkMulDivCeil(t,n,r,i){if(r.eq(Te))throw new Kn("Devide by zero","DivideByZero");const s=t.mul(n).add(r.sub(io)).div(r);if(this.isOverflow(s,i))throw new Kn("Multiplication div overflow","MulDivOverflow");return s}static checkMulDivRound(t,n,r,i){if(r.eq(Te))throw new Kn("Devide by zero","DivideByZero");const s=t.mul(n.add(r.shrn(1))).div(r);if(this.isOverflow(s,i))throw new Kn("Multiplication div overflow","MulDivOverflow");return s}static checkMulShiftRight(t,n,r,i){const s=t.mul(n).div(new I(2).pow(new I(r)));if(this.isOverflow(s,i))throw new Kn("Multiplication shift right overflow","MulShiftRightOverflow");return s}static checkMulShiftRight64RoundUpIf(t,n,r,i){const s=t.mul(n),a=i&&s.and(gl).gt(Te)?s.shrn(64).add(io):s.shrn(64);if(this.isOverflow(a,r))throw new Kn("Multiplication shift right overflow","MulShiftRightOverflow");return a}static checkMulShiftLeft(t,n,r,i){const s=t.mul(n).shln(r);if(this.isOverflow(s,i))throw new Kn("Multiplication shift left overflow","MulShiftLeftOverflow");return s}static checkDivRoundUpIf(t,n,r){if(n.eq(Te))throw new Kn("Devide by zero","DivideByZero");return r?this.divRoundUp(t,n):t.div(n)}static isOverflow(t,n){return t.gte(Kd.pow(new I(n)))}};function Pw(e){return{coinA:e.coinTypeA.toString(),coinB:e.coinTypeB.toString(),currentSqrtPrice:new I(e.current_sqrt_price),currentTickIndex:e.current_tick_index,feeGrowthGlobalA:new I(e.fee_growth_global_a),feeGrowthGlobalB:new I(e.fee_growth_global_b),feeProtocolCoinA:new I(e.fee_protocol_coin_a),feeProtocolCoinB:new I(e.fee_protocol_coin_b),feeRate:e.fee_rate,liquidity:new I(e.liquidity),tickIndexes:[],tickSpacing:Number(e.tickSpacing),ticks:[],collection_name:e.collectionName}}function d7(e){const t=new I(e);return t.lt(Te)?{bits:t.neg().xor(new I(2).pow(new I(64)).sub(new I(1))).add(new I(1)).toString()}:{bits:t.toString()}}var Ow="0x1::coin::CoinInfo",Iw="0x1::coin::CoinStore",Ng="0x3::token::TokenStore",f7="0x3::token::WithdrawEvent",h7="PoolLiquidityCoin",Ys="clmm_router",Cw="factory",$w="Pools",p7="pool",g7="Pool",y7="crowdsale",m7="CrowdsalePool",_7="fairlaunch",w7="FairlaunchPool",Si="cetus_script",Uw="cscoin",Mw="liquidity",B0="scripts";function b7(e){return e.startsWith("0x")?`${e.slice(2)}`:e}function Ri(e){let t="";const n=b7(e),r=n.length/2;for(let i=0;i<r;i++)t+=String.fromCharCode(parseInt(n.substr(i*2,2),16));return v7(t)}function v7(e){let t,n,r,i,s,o;for(t="",r=e.length,n=0;n<r;)switch(i=e.charCodeAt(n++),i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(n-1);break;case 12:case 13:s=e.charCodeAt(n++),t+=String.fromCharCode((i&31)<<6|s&63);break;case 14:s=e.charCodeAt(n++),o=e.charCodeAt(n++),t+=String.fromCharCode((i&15)<<12|(s&63)<<6|(o&63)<<0);break}return t}var x7=/^0x1::coin::CoinStore<(.+)>$/;function ht(e,...t){const n=Array.isArray(t[t.length-1])?t.pop():[];let i=[e,...t].filter(Boolean).join("::");return n&&n.length&&(i+=`<${n.join(", ")}>`),i}function Dg(e){return ht(pt.fromUint8Array(e.value.address.address).hex(),e.value.module_name.value,e.value.name.value,[])}function S7(e){const t=e.value.type_args[0],n=e.value.type_args[1],r=Dg(t),i=Dg(n),s=ht(pt.fromUint8Array(e.value.address.address).hex(),e.value.module_name.value,e.value.name.value,[r,i]);return{coinA:r,coinB:i,lpAddress:s}}function Kh(e){var t;let n=e.replace(/\s/g,"");const r=n.match(/(<.+>)$/),i=(t=r==null?void 0:r[0])==null?void 0:t.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(i)return n=n.slice(0,n.indexOf("<")),{...Kh(n),type_arguments:[...i]};const s=n.split("::");return{full_address:n,address:s[0],module:s[1],name:s[2],type_arguments:[]}}function Lg(e){const t=e.match(x7);return t?t[1]:""}function T7(e){return`${Iw}<${e}>`}function A7(e){return`${Ow}<${e}>`}var Xd=class{constructor(t,n=0){this.overdueTime=n,this.value=t}getCacheData(){return this.value===null?null:this.overdueTime===0?this.value:Date.parse(new Date().toString())>this.overdueTime?(this.value=null,null):this.value}},Hg=443636,zg=-443636,Zd="79226673515401279992447579055",Jd="4295048016",Wo=new I(1e6),yl=class{static getDefaultSqrtPriceLimit(t){return new I(t?Jd:Zd)}static getDefaultOtherAmountThreshold(t){return t?Te:gl}},ml=class{constructor(t,n){this.toString=()=>`${this.numerator.toString()}/${this.denominator.toString()}`,this.numerator=t,this.denominator=n}static fromDecimal(t){return ml.fromFraction(t.toDecimalPlaces(1).mul(10).toNumber(),1e3)}static fromFraction(t,n){const r=typeof t=="number"?new I(t.toString()):t,i=typeof n=="number"?new I(n.toString()):n;return new ml(r,i)}},E7=14,k7="59543866431248",B7="184467440737095516",R7="15793534762490258745";function P7(e,t,n){const r=e.toTwos(n).shln(t);return r.imaskn(n+1),r.fromTwos(n)}function Rt(e,t,n){const r=e.toTwos(n).shrn(t);return r.imaskn(n-t+1),r.fromTwos(n-t)}function O7(e){let t;return e&1?t=new I("79232123823359799118286999567"):t=new I("79228162514264337593543950336"),e&2&&(t=Rt(t.mul(new I("79236085330515764027303304731")),96,256)),e&4&&(t=Rt(t.mul(new I("79244008939048815603706035061")),96,256)),e&8&&(t=Rt(t.mul(new I("79259858533276714757314932305")),96,256)),e&16&&(t=Rt(t.mul(new I("79291567232598584799939703904")),96,256)),e&32&&(t=Rt(t.mul(new I("79355022692464371645785046466")),96,256)),e&64&&(t=Rt(t.mul(new I("79482085999252804386437311141")),96,256)),e&128&&(t=Rt(t.mul(new I("79736823300114093921829183326")),96,256)),e&256&&(t=Rt(t.mul(new I("80248749790819932309965073892")),96,256)),e&512&&(t=Rt(t.mul(new I("81282483887344747381513967011")),96,256)),e&1024&&(t=Rt(t.mul(new I("83390072131320151908154831281")),96,256)),e&2048&&(t=Rt(t.mul(new I("87770609709833776024991924138")),96,256)),e&4096&&(t=Rt(t.mul(new I("97234110755111693312479820773")),96,256)),e&8192&&(t=Rt(t.mul(new I("119332217159966728226237229890")),96,256)),e&16384&&(t=Rt(t.mul(new I("179736315981702064433883588727")),96,256)),e&32768&&(t=Rt(t.mul(new I("407748233172238350107850275304")),96,256)),e&65536&&(t=Rt(t.mul(new I("2098478828474011932436660412517")),96,256)),e&131072&&(t=Rt(t.mul(new I("55581415166113811149459800483533")),96,256)),e&262144&&(t=Rt(t.mul(new I("38992368544603139932233054999993551")),96,256)),Rt(t,32,256)}function I7(e){const t=Math.abs(e);let n;return t&1?n=new I("18445821805675392311"):n=new I("18446744073709551616"),t&2&&(n=Rt(n.mul(new I("18444899583751176498")),64,256)),t&4&&(n=Rt(n.mul(new I("18443055278223354162")),64,256)),t&8&&(n=Rt(n.mul(new I("18439367220385604838")),64,256)),t&16&&(n=Rt(n.mul(new I("18431993317065449817")),64,256)),t&32&&(n=Rt(n.mul(new I("18417254355718160513")),64,256)),t&64&&(n=Rt(n.mul(new I("18387811781193591352")),64,256)),t&128&&(n=Rt(n.mul(new I("18329067761203520168")),64,256)),t&256&&(n=Rt(n.mul(new I("18212142134806087854")),64,256)),t&512&&(n=Rt(n.mul(new I("17980523815641551639")),64,256)),t&1024&&(n=Rt(n.mul(new I("17526086738831147013")),64,256)),t&2048&&(n=Rt(n.mul(new I("16651378430235024244")),64,256)),t&4096&&(n=Rt(n.mul(new I("15030750278693429944")),64,256)),t&8192&&(n=Rt(n.mul(new I("12247334978882834399")),64,256)),t&16384&&(n=Rt(n.mul(new I("8131365268884726200")),64,256)),t&32768&&(n=Rt(n.mul(new I("3584323654723342297")),64,256)),t&65536&&(n=Rt(n.mul(new I("696457651847595233")),64,256)),t&131072&&(n=Rt(n.mul(new I("26294789957452057")),64,256)),t&262144&&(n=Rt(n.mul(new I("37481735321082")),64,256)),n}var Mt=class{static priceToSqrtPriceX64(t,n,r){return ot.toX64(t.mul(yr.pow(10,r-n)).sqrt())}static sqrtPriceX64ToPrice(t,n,r){return ot.fromX64(t).pow(2).mul(yr.pow(10,n-r))}static tickIndexToSqrtPriceX64(t){return t>0?new I(O7(t)):new I(I7(t))}static sqrtPriceX64ToTickIndex(t){if(t.gt(new I(Zd))||t.lt(new I(Jd)))throw new Error("Provided sqrtPrice is not within the supported sqrtPrice range.");const n=t.bitLength()-1,r=new I(n-64),i=P7(r,32,128);let s=new I("8000000000000000","hex"),o=0,a=new I(0),c=n>=64?t.shrn(n-63):t.shln(63-n);for(;s.gt(new I(0))&&o<E7;){c=c.mul(c);const y=c.shrn(127);c=c.shrn(63+y.toNumber()),a=a.add(s.mul(y)),s=s.shrn(1),o+=1}const u=a.shrn(32),l=i.add(u).mul(new I(k7)),f=Rt(l.sub(new I(B7)),64,128).toNumber(),p=Rt(l.add(new I(R7)),64,128).toNumber();return f===p?f:Mt.tickIndexToSqrtPriceX64(p).lte(t)?p:f}static tickIndexToPrice(t,n,r){return Mt.sqrtPriceX64ToPrice(Mt.tickIndexToSqrtPriceX64(t),n,r)}static priceToTickIndex(t,n,r){return Mt.sqrtPriceX64ToTickIndex(Mt.priceToSqrtPriceX64(t,n,r))}static priceToInitializableTickIndex(t,n,r,i){return Mt.getInitializableTickIndex(Mt.priceToTickIndex(t,n,r),i)}static getInitializableTickIndex(t,n){return t-t%n}static getNextInitializableTickIndex(t,n){return Mt.getInitializableTickIndex(t,n)+n}static getPrevInitializableTickIndex(t,n){return Mt.getInitializableTickIndex(t,n)-n}};function qw(e){const t=[];for(const n of e){const r={index:Number(BigInt.asIntN(64,BigInt(n.index.bits)).toString()),sqrtPrice:new I(n.sqrt_price),liquidityNet:new I(BigInt.asIntN(64,BigInt(n.liquidity_net.bits)).toString()),liquidityGross:new I(n.liquidity_gross),feeGrowthOutsideA:new I(n.fee_growth_outside_a),feeGrowthOutsideB:new I(n.fee_growth_outside_b),rewardersGrowthOutside:[new I(n.rewarders_growth_outside[0]),new I(n.rewarders_growth_outside[1]),new I(n.rewarders_growth_outside[2])]};t.push(r)}return t}function C7(e,t,n,r){const i=e.gt(t)?e.sub(t):t.sub(e),s=n.mul(i).shln(64),o=e.mul(t),a=s.div(o),c=s.mod(o);return r&&!c.eq(Te)?a.add(new I(1)):a}function Nw(e,t,n,r){if(n.eq(Te))return e;const i=ot.checkMulShiftLeft(e,t,64,256),s=t.shln(64),o=ot.checkMul(e,n,256);if(!r&&s.lte(o))throw new Kn("getNextSqrtPriceAUp - Unable to divide liquidityShl64 by product","DivideByZero");const a=r?ot.checkDivRoundUpIf(i,s.add(o),!0):ot.checkDivRoundUpIf(i,s.sub(o),!0);if(a.lt(new I(Jd)))throw new Kn("getNextSqrtPriceAUp - Next sqrt price less than min sqrt price","CoinAmountMinSubceeded ");if(a.gt(new I(Zd)))throw new Kn("getNextSqrtPriceAUp - Next sqrt price greater than max sqrt price","CoinAmountMaxExceeded");return a}function Dw(e,t,n,r){const i=ot.checkDivRoundUpIf(n.shln(64),t,!r),s=r?e.add(i):e.sub(i);if(s.lt(new I(Jd))||s.gt(new I(Zd)))throw new Kn("getNextSqrtPriceAUp - Next sqrt price out of bounds","SqrtPriceOutOfBounds");return s}function $7(e,t,n,r){return r?Nw(e,t,n,!0):Dw(e,t,n,!0)}function U7(e,t,n,r){return r?Dw(e,t,n,!1):Nw(e,t,n,!1)}function jg(e,t,n,r){const i=e.gt(t)?e.sub(t):t.sub(e);if(n.lte(Te)||i.eq(Te))return Te;let s;if(r){const o=new I(n).mul(new I(i)).shln(64),a=t.mul(e),c=o.div(a);s=o.mod(a).eq(Te)?c:c.add(io)}else{const o=new I(n).mul(new I(i));s=o.and(gl).gt(Te)?o.shrn(64).add(io):o.shrn(64)}return s}function Fg(e,t,n,r){const i=e.gt(t)?e.sub(t):t.sub(e);if(n.lte(Te)||i.eq(Te))return Te;let s;if(r)s=n.mul(i).shrn(64);else{const o=n.mul(i).shln(64),a=t.mul(e);s=o.div(a)}return s}function Lw(e,t,n,r,i,s){if(n===Te)return{amountIn:Te,amountOut:Te,nextSqrtPrice:t,feeAmount:Te};const o=e.gte(t);let a,c,u,d;if(s){const l=ot.checkMulDivFloor(r,ot.checkUnsignedSub(Wo,i),Wo,64),f=jg(e,t,n,o);f.gt(l)?(a=l,d=ot.checkUnsignedSub(r,l),u=$7(e,n,l,o)):(a=f,d=ot.checkMulDivCeil(a,i,Wo.sub(i),64),u=t),c=Fg(e,u,n,o)}else{const l=Fg(e,t,n,o);l.gt(r)?(c=r,u=U7(e,n,r,o)):(c=l,u=t),a=jg(e,u,n,o),d=ot.checkMulDivCeil(a,i,Wo.sub(i),64)}return{amountIn:a,amountOut:c,nextSqrtPrice:u,feeAmount:d}}function M7(e,t,n,r,i){let s=n,o=r.liquidity,{currentSqrtPrice:a}=r;const c={amountIn:Te,amountOut:Te,feeAmount:Te,refAmount:Te,nextSqrtPrice:Te,crossTickNum:0};let u,d;const l=yl.getDefaultSqrtPriceLimit(e);for(const f of i){if(e){if(r.currentTickIndex<f.index)continue}else if(r.currentTickIndex>f.index)continue;if(f===null)continue;e&&l.gt(f.sqrtPrice)||!e&&l.lt(f.sqrtPrice)?u=l:u=f.sqrtPrice;const p=Lw(a,u,o,s,new I(r.feeRate),t);if(p.amountIn.eq(Te)||(s=t?s.sub(p.amountIn.add(p.feeAmount)):s.sub(p.amountOut)),c.amountIn=c.amountIn.add(p.amountIn),c.amountOut=c.amountOut.add(p.amountOut),c.feeAmount=c.feeAmount.add(p.feeAmount),p.nextSqrtPrice.eq(f.sqrtPrice)?(d=e?f.liquidityNet.mul(new I(-1)):f.liquidityNet,o=d.gt(Te)?o.add(d):o.sub(d.abs()),a=f.sqrtPrice):a=p.nextSqrtPrice,c.crossTickNum+=1,s.eq(Te))break}return c.amountIn=c.amountIn.add(c.feeAmount),c.nextSqrtPrice=a,c}function Vo(e,t,n){const r=I.min(e,t),i=I.max(e,t),s=ot.fromX64_BN(n.mul(i).mul(r)),o=i.sub(r);return s.div(o)}function Ko(e,t,n){const r=I.min(e,t),s=I.max(e,t).sub(r);return n.shln(64).div(s)}var Ws=class{constructor(){}static getFeeRate(t){return ml.fromFraction(t,1e6)}static updateFeeRate(t,n,r,i,s){const o=ot.checkMulDivCeil(n,new I(i),Wo,64),a=r===0?Te:ot.checkMulDivFloor(n,new I(r),Wo,64),c=n.mul(o).mul(a);if(s?t.feeProtocolCoinA=t.feeProtocolCoinA.add(o):t.feeProtocolCoinB=t.feeProtocolCoinB.add(o),c.eq(Te)||t.liquidity.eq(Te))return{refFee:a,clmm:t};const u=c.shln(64).div(t.liquidity);return s?t.feeGrowthGlobalA=t.feeGrowthGlobalA.add(u):t.feeGrowthGlobalB=t.feeGrowthGlobalB.add(u),{refFee:a,clmm:t}}static getProtocolFeeRate(t){return ml.fromFraction(t,1e4)}static getCoinAmountFromLiquidity(t,n,r,i,s){const o=new yr(t.toString()),a=new yr(n.toString()),c=new yr(r.toString()),u=new yr(i.toString());let d,l;return n.lt(r)?(d=ot.toX64_Decimal(o).mul(u.sub(c)).div(c.mul(u)),l=new yr(0)):n.lt(i)?(d=ot.toX64_Decimal(o).mul(u.sub(a)).div(a.mul(u)),l=ot.fromX64_Decimal(o.mul(a.sub(c)))):(d=new yr(0),l=ot.fromX64_Decimal(o.mul(u.sub(c)))),s?{coinA:new I(d.ceil().toString()),coinB:new I(l.ceil().toString())}:{coinA:new I(d.floor().toString()),coinB:new I(l.floor().toString())}}static estimateLiquidityFromcoinAmounts(t,n,r,i){if(n>r)throw new Error("lower tick cannot be greater than lower tick");const s=Mt.sqrtPriceX64ToTickIndex(t),o=Mt.tickIndexToSqrtPriceX64(n),a=Mt.tickIndexToSqrtPriceX64(r);if(s<n)return Vo(o,a,i.coinA);if(s>=r)return Ko(a,o,i.coinB);const c=Vo(t,a,i.coinA),u=Ko(t,o,i.coinB);return I.min(c,u)}static estLiquidityAndcoinAmountFromOneAmounts(t,n,r,i,s,o,a){const c=Mt.sqrtPriceX64ToTickIndex(a),u=Mt.tickIndexToSqrtPriceX64(t),d=Mt.tickIndexToSqrtPriceX64(n);let l;if(c<=t){if(!i)throw new Error("lower tick cannot calculate liquidity by coinB");l=Vo(u,d,r)}else if(c>=n){if(i)throw new Error("upper tick cannot calculate liquidity by coinA");l=Ko(d,u,r)}else i?l=Vo(a,d,r):l=Ko(a,u,r);const f=Ws.getCoinAmountFromLiquidity(l,a,u,d,s),p=f.coinA.mul(new I(1+o)),_=f.coinB.mul(new I(1+o));return{tokenMaxA:p,tokenMaxB:_,liquidityAmount:l}}},q7=class{constructor(t){this._cache={},this._sdk=t}get sdk(){return this._sdk}async fetchAccountResource(t,n,r=0){let i=this._cache[t+n];if(i!=null&&i.getCacheData())return i.value;const s=await this.sdk.Resources.fetchAccountResource(t,n);return i=new Xd(s,r),this._cache[t+n]=i,s}calculateRates(t){const{currentPool:n}=t,r=Pw(n);let i;t.a2b?i=t.swapTicks.sort((f,p)=>p.index-f.index):i=t.swapTicks.sort((f,p)=>f.index-p.index);const s=M7(t.a2b,t.byAmountIn,t.amount,r,i);let o=!1;t.byAmountIn?o=s.amountIn.lt(t.amount):o=s.amountOut.lt(t.amount);const a=yl.getDefaultSqrtPriceLimit(t.a2b);t.a2b&&s.nextSqrtPrice.lt(a)&&(o=!0),!t.a2b&&s.nextSqrtPrice.gt(a)&&(o=!0);let c=0;s.crossTickNum>6&&s.crossTickNum<40&&(c=22e3*(s.crossTickNum-6)),s.crossTickNum>40&&(o=!0);const u=Mt.sqrtPriceX64ToPrice(r.currentSqrtPrice,t.decimalsA,t.decimalsB).toNumber(),d=Mt.sqrtPriceX64ToPrice(s.nextSqrtPrice,t.decimalsA,t.decimalsB).toNumber(),l=Math.abs(u-d)/u*100;return{estimatedAmountIn:s.amountIn,estimatedAmountOut:s.amountOut,estimatedEndSqrtPrice:s.nextSqrtPrice,estimatedFeeAmount:s.feeAmount,isExceed:o,extraComputeLimit:c,amount:t.amount,aToB:t.a2b,byAmountIn:t.byAmountIn,priceImpactPct:l}}transformSwapData(t){const{modules:n}=this._sdk.sdkOptions.networkOptions,r=t.filter(o=>o.type!=="write_resource"?!1:o.data.type===`${n.ClmmIntegrate}::calculator::CalculatedSwapResult`);return r.length===0?[]:r[0].data.data.data||[]}async preswap(t){const{modules:n,simulationAccount:r}=this.sdk.sdkOptions.networkOptions,i=new Vt(this.sdk.sdkOptions.rpcUrl),s=`${n.ClmmIntegrate}::scripts`,o="calculate_swap_result",a=[new V.TypeTagStruct(V.StructTag.fromString(t.pool.coinTypeA)),new V.TypeTagStruct(V.StructTag.fromString(t.pool.coinTypeB))],c=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool.poolAddress)),ae.bcsSerializeBool(t.a2b),ae.bcsSerializeBool(t.by_amount_in),ae.bcsSerializeUint64(BigInt(t.amount))],u=new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(s,o,a,c)),d=Ta(r.address),l=await i.generateRawTransaction(d,u),f=Ta(r.pubkey),p=new V.Ed25519PublicKey(f.toUint8Array()),_=await i.simulateTransaction(p,l),y=this.transformSwapData(_[0].changes),b=Mt.sqrtPriceX64ToPrice(new I(t.pool.current_sqrt_price),t.decimalsA,t.decimalsB).toNumber(),B=Mt.sqrtPriceX64ToPrice(new I(y.after_sqrt_price),t.decimalsA,t.decimalsB).toNumber(),E=Math.abs(b-B)/b*100;return{estimatedAmountIn:y.amount_in&&y.fee_amount?new I(y.amount_in).add(new I(y.fee_amount)).toString():"",estimatedAmountOut:y.amount_out,estimatedEndSqrtPrice:y.after_sqrt_price,estimatedFeeAmount:y.fee_amount,isExceed:y.is_exceed,amount:t.amount,aToB:t.a2b,byAmountIn:t.by_amount_in,priceImpactPct:E}}createSwapTransactionPayload(t,n=!1){const{modules:r}=this.sdk.sdkOptions.networkOptions,i=`${r.LiquidswapDeployer}::${Ys}`,s="swap",o=yl.getDefaultSqrtPriceLimit(t.a_to_b);if(n){const u=[new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeA)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeB))],d=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool_addr)),ae.bcsSerializeBool(t.a_to_b),ae.bcsSerializeBool(t.by_amount_in),ae.bcsSerializeUint64(BigInt(t.amount)),ae.bcsSerializeUint64(BigInt(t.amount_limit)),ae.bcsSerializeU128(BigInt(o.toString())),ae.bcsSerializeStr(t.partner)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,u,d))}const a=[t.pool_addr,t.a_to_b,t.by_amount_in,t.amount,t.amount_limit,o.toString(),t.partner],c=[t.coinTypeA,t.coinTypeB];return{type:"entry_function_payload",function:ht(i,s),type_arguments:c,arguments:a}}},N7=class{constructor(t){this._sdk=t}get sdk(){return this._sdk}createAddLiquidityTransactionPayload(t,n=!1){const{modules:r}=this.sdk.sdkOptions.networkOptions,i=!("delta_liquidity"in t),s=`${r.LiquidswapDeployer}::${Ys}`,o=i?"add_liquidity_fix_token":"add_liquidity";if(n){const l=[new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeA)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeB))],f=i?[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool)),ae.bcsSerializeUint64(Number(t.amount_a)),ae.bcsSerializeUint64(Number(t.amount_b)),ae.bcsSerializeBool(t.fix_amount_a),ae.bcsSerializeUint64(BigInt.asUintN(64,BigInt(t.tick_lower))),ae.bcsSerializeUint64(BigInt.asUintN(64,BigInt(t.tick_upper))),ae.bcsSerializeBool(t.is_open),ae.bcsSerializeUint64(t.index)]:[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool)),ae.bcsSerializeU128(t.delta_liquidity.toNumber()),ae.bcsSerializeUint64(Number(t.max_amount_a)),ae.bcsSerializeUint64(Number(t.max_amount_b)),ae.bcsSerializeUint64(BigInt.asUintN(64,BigInt(t.tick_lower))),ae.bcsSerializeUint64(BigInt.asUintN(64,BigInt(t.tick_upper))),ae.bcsSerializeBool(t.is_open),ae.bcsSerializeUint64(t.index)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(s,o,l,f))}const a=BigInt.asUintN(64,BigInt(t.tick_lower)).toString(),c=BigInt.asUintN(64,BigInt(t.tick_upper)).toString(),u=i?[t.pool,t.amount_a,t.amount_b,t.fix_amount_a,a,c,t.is_open,t.index]:[t.pool,t.delta_liquidity.toString(),String(t.max_amount_a),String(t.max_amount_b),a,c,t.is_open,t.index],d=[t.coinTypeA,t.coinTypeB];return{type:"entry_function_payload",function:ht(s,o),type_arguments:d,arguments:u}}removeLiquidityTransactionPayload(t,n=!1){NE(t.delta_liquidity.gtn(0));const{modules:r}=this.sdk.sdkOptions.networkOptions,i=`${r.LiquidswapDeployer}::${Ys}`,s=`${r.ClmmIntegrate}::${Mw}`,o=["remove_liquidity","remove_all_liquidity","remove_all_liquidity_for_two","remove_all_liquidity_for_three"];let a,c,u=[];if(t.rewards_num===0){if(n){const d=[new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeA)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeB))],l=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool)),ae.bcsSerializeU128(t.delta_liquidity.toNumber()),ae.bcsSerializeUint64(t.min_amount_a),ae.bcsSerializeUint64(t.min_amount_b),ae.bcsSerializeUint64(t.pos_index),ae.bcsSerializeBool(t.is_close)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,o[0],d,l))}a=ht(i,o[0]),c=[t.coinTypeA,t.coinTypeB],u=[t.pool,t.delta_liquidity.toNumber(),t.min_amount_a,t.min_amount_b,t.pos_index,t.is_close]}else if(t.rewards_num===1){if(n){const d=[new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeA)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeB)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeC))],l=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool)),ae.bcsSerializeU128(t.delta_liquidity.toNumber()),ae.bcsSerializeUint64(t.min_amount_a),ae.bcsSerializeUint64(t.min_amount_b),ae.bcsSerializeUint64(t.pos_index),ae.bcsSerializeBool(t.is_close)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(s,o[1],d,l))}a=ht(s,o[1]),c=[t.coinTypeA,t.coinTypeB,t.coinTypeC],u=[t.pool,t.delta_liquidity.toNumber(),t.min_amount_a,t.min_amount_b,t.pos_index,t.is_close]}else if(t.rewards_num===2){if(n){const d=[new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeA)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeB)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeC)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeD))],l=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool)),ae.bcsSerializeU128(t.delta_liquidity.toNumber()),ae.bcsSerializeUint64(t.min_amount_a),ae.bcsSerializeUint64(t.min_amount_b),ae.bcsSerializeUint64(t.pos_index),ae.bcsSerializeBool(t.is_close)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(s,o[2],d,l))}a=ht(s,o[2]),c=[t.coinTypeA,t.coinTypeB,t.coinTypeC,t.coinTypeD],u=[t.pool,t.delta_liquidity.toNumber(),t.min_amount_a,t.min_amount_b,t.pos_index,t.is_close]}else{if(n){const d=[new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeA)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeB)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeC)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeD)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeE))],l=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool)),ae.bcsSerializeU128(t.delta_liquidity.toNumber()),ae.bcsSerializeUint64(t.min_amount_a),ae.bcsSerializeUint64(t.min_amount_b),ae.bcsSerializeUint64(t.pos_index),ae.bcsSerializeBool(t.is_close)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(s,o[3],d,l))}a=ht(s,o[3]),c=[t.coinTypeA,t.coinTypeB,t.coinTypeC,t.coinTypeD,t.coinTypeE],u=[t.pool,t.delta_liquidity.toNumber(),t.min_amount_a,t.min_amount_b,t.pos_index,t.is_close]}return{type:"entry_function_payload",function:a,type_arguments:c,arguments:u}}closePositionTransactionPayload(t,n=!1){const{modules:r}=this.sdk.sdkOptions.networkOptions,i=`${r.LiquidswapDeployer}::${Ys}`,s="close_position";if(n){const u=[new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeA)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeB))],d=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool_address)),ae.bcsSerializeUint64(t.pos_index)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,u,d))}const o=ht(i,s),a=[t.coinTypeA,t.coinTypeB],c=[t.pool_address,t.pos_index];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}collectFeeTransactionPayload(t,n=!1){const{modules:r}=this.sdk.sdkOptions.networkOptions,i=`${r.LiquidswapDeployer}::${Ys}`,s="collect_fee";if(n){const u=[new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeA)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeB))],d=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool)),ae.bcsSerializeUint64(t.pos_index)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,u,d))}const o=ht(i,s),a=[t.coinTypeA,t.coinTypeB],c=[t.pool,t.pos_index];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}};function gt(e){return yr.isDecimal(e)?e:new yr(e===void 0?0:e)}function Hw(e){return gt(10).pow(gt(e).abs())}function D7(e){return e!=null&&e!==""&&!isNaN(Number(e.toString()))}function Gg(e){return e.isAxiosError,e}function L7(e){let t="";const r=new Fd(e).parseTypeTag().value.type_args;if(r.length>0){const i=r[0];i.value.name.value===h7||i.value.name.value===Uw?t=S7(i).lpAddress:t=ht(pt.fromUint8Array(i.value.address.address).toShortString(),i.value.module_name.value,i.value.name.value,[])}return t}var H7=5*60*1e3,Ti=24*60*60*1e3;function Wg(e){return Date.parse(new Date().toString())+e}var z7=class{constructor(t){this._cache={},this._sdk=t}get sdk(){return this._sdk}async getPoolImmutablesResource(t=!1){const n=this._sdk.sdkOptions.networkOptions.modules.LiquidswapDeployer,r=`${n}_getMmutablesPools`,i=this.getCacheData(r);let s;if(!t&&i!=null)s=i;else{const a=ht(n,Cw,$w),c=await this.fetchAccountResource(n,a);s=JSON.parse(JSON.stringify(c==null?void 0:c.data.data)),this.updateCache(r,s,Ti)}return s.data}buildPoolImmutables(t,n,r){const i=r.key,s=ht(i.coin_type_a.account_address,Ri(i.coin_type_a.module_name),Ri(i.coin_type_a.struct_name)),o=ht(i.coin_type_b.account_address,Ri(i.coin_type_b.module_name),Ri(i.coin_type_b.struct_name)),a=ht(ht(n,p7,g7),[s,o]);return{coinTypeA:s,coinTypeB:o,poolType:a,poolAddress:t,tickSpacing:i.tick_spacing}}async getPoolImmutables(t=[],n=0,r=100,i=!0){const s=this._sdk.sdkOptions.networkOptions.modules.LiquidswapDeployer,o=[],a=await this.getPoolImmutablesResource(i),c=t.length>0;for(let u=0;u<a.length;u+=1){const d=a[u],l=d.value;if(!(c&&!t.includes(l))){if(!c){const f=Number(u);if(f<n||f>=n+r)continue}o.push(this.buildPoolImmutables(l,s,d))}}return o}async getPools(t=[],n=0,r=100){const i=[],s=(await this.sdk.getGlobalConfig()).is_pause,o=await this.getPoolImmutables(t,n,r,!1);for(let a=0;a<o.length;a+=1){const c=o[a],u=await this.getPoolState(c.poolAddress,c.poolType,s),d={...c,...u};i.push(d);const l=`${c.poolAddress}_pool`;this.updateCache(l,d,Ti)}return i}async getPool(t,n=!0){const r=`${t}_pool`,i=this.getCacheData(r);let s;if(i!==null&&!n&&(s=i),s==null)return(await this.getPools([t]))[0];const o=(await this.sdk.getGlobalConfig(!0)).is_pause,a=await this.getPoolState(t,s.poolType,o),c={...s,...a};return this.updateCache(r,c,Ti),c}async getPoolState(t,n,r,i=!0){const s=`${t}_${n}getPool`;if(!i){const l=this.getCacheData(s);if(l!==null)return l}const o=await this.fetchAccountResource(t,n),a=JSON.parse(JSON.stringify(o==null?void 0:o.data)),c=a.rewarder_infos,u=[];c.forEach(l=>{const f=ht(l.coin_type.account_address,Ri(l.coin_type.module_name),Ri(l.coin_type.struct_name)),p=ot.fromX64(new I(l.emissions_per_second)),_=Math.floor(p.toNumber()*60*60*24);u.push({...l,coinAddress:f,emissionsEveryDay:_})});const d={coinAmountA:a.coin_a.value,coinAmountB:a.coin_b.value,current_sqrt_price:a.current_sqrt_price,current_tick_index:Number(BigInt.asIntN(64,BigInt(a.current_tick_index.bits)).toString()),fee_growth_global_a:a.fee_growth_global_a,fee_growth_global_b:a.fee_growth_global_b,fee_protocol_coin_a:a.fee_protocol_coin_a,fee_protocol_coin_b:a.fee_protocol_coin_b,fee_rate:a.fee_rate,liquidity:a.liquidity,index:a.index,positionIndex:a.position_index,tick_indexes_handle:a.tick_indexes.handle,ticks_handle:a.ticks.handle,positions_handle:a.positions.handle,collectionName:a.collection_name,uri:a.uri,is_pause:r||a.is_pause,rewarder_infos:u,rewarder_last_updated_time:a.rewarder_last_updated_time};return this.updateCache(s,d,Ti),d}async getTickDataByIndex(t,n){const r=await this._sdk.client.getTableItem(t,{key_type:`${this.sdk.sdkOptions.networkOptions.modules.IntegerMate}::i64::I64`,value_type:`${this.sdk.sdkOptions.networkOptions.modules.LiquidswapDeployer}::pool::Tick`,key:d7(n)}),i=JSON.parse(JSON.stringify(r));return{index:i.index,sqrtPrice:i.sqrt_price,liquidityGross:i.liquidity_gross,liquidityNet:i.liquidity_net,feeGrowthOutsideA:i.fee_growth_outside_a,feeGrowthOutsideB:i.fee_growth_outside_b,rewardersGrowthOutside:i.rewarders_growth_outside}}async getPoolLowerAndUpperTicks(t,n){const r=[],i=[],s=n.ticks_handle,o=await this.sdk.Resources.getPositionList(t,[n]);for(const a of o){const c=await this.sdk.Resources.getTickDataByIndex(s,a.tick_lower_index),u=await this.sdk.Resources.getTickDataByIndex(s,a.tick_upper_index);r.push(c),i.push(u)}return[r,i]}async getPositionInfoByIndex(t,n){const r=await this._sdk.client.getTableItem(t,{key_type:"u64",value_type:`${this.sdk.sdkOptions.networkOptions.modules.LiquidswapDeployer}::pool::Position`,key:n.toString()}),i=JSON.parse(JSON.stringify(r));return{name:"",pool:i.pool,liquidity:i.liquidity,tick_lower_index:BigInt.asIntN(64,BigInt(i.tick_lower_index.bits)).toString(),tick_upper_index:BigInt.asIntN(64,BigInt(i.tick_upper_index.bits)).toString(),fee_growth_inside_a:i.fee_growth_inside_a,fee_growth_inside_b:i.fee_growth_inside_b,fee_owed_a:i.fee_owed_a,fee_owed_b:i.fee_owed_b,reward_amount_owed_0:i.rewarder_infos[0].amount_owed,reward_amount_owed_1:i.rewarder_infos[1].amount_owed,reward_amount_owed_2:i.rewarder_infos[2].amount_owed,reward_growth_inside_0:i.rewarder_infos[0].growth_inside,reward_growth_inside_1:i.rewarder_infos[1].growth_inside,reward_growth_inside_2:i.rewarder_infos[2].growth_inside,index:n}}createPositionName(t,n){return`Cetus LP | Pool${t}-${n}`}async getPositionInfo(t,n,r=!0){if(D7(n)){const i=await this.getPositionInfoByIndex(t.positions_handle,Number(n));return i.name=this.createPositionName(t.index,i.index),i}return this.getPositionInfoByTokenName(t.poolAddress,t.positions_handle,t.collectionName,n,r)}async getPositionIndex(t,n,r,i=!1){const s=`${t}_${n}_${r}_getPositionIndex`;if(!i){const c=this.getCacheData(s);if(c!==null)return c}const o=await this._sdk.tokenClient.getTokenData(t,n,r),a=JSON.parse(JSON.stringify(o)).default_properties.data.index.value;return this.updateCache(s,a,Ti),a}async getPositionInfoByTokenName(t,n,r,i,s=!0){const o=`${t}_${r}_${i}_getPositionInfo`;if(!s){const u=this.getCacheData(o);if(u!==null)return u}const a=await this.getPositionIndex(t,r,i,!1),c=await this.getPositionInfoByIndex(n,a);return c.name=i,this.updateCache(o,c,Ti),c}async getGlobalConfig(t,n=!0){const r=`${t}_getGlobalConfig`;if(!n){const a=this.getCacheData(r);if(a!==null)return a}const i=await this.fetchAccountResource(t,ht(t,"config","GlobalConfig")),s=JSON.parse(JSON.stringify(i)).data,o={protocol_fee_rate:s.protocol_fee_rate,is_pause:s.is_pause};return this.updateCache(r,o,Ti),o}async getSpecifyCoinInfos(t){const n=[];for(const r of t){const i=`${r}_getCoinInfos`,s=this.getCacheData(i);if(s!==null)n.push(s);else{const o=Kh(r).address,a=await this._sdk.Resources.fetchAccountResource(o,A7(r));if(a!=null){const c={coinAddress:r,...a.data};n.push(c),this.updateCache(i,c,Ti)}}}return n}async getCoinInfos(t,n=!0){const r=`${t}_getCoinInfos`;if(!n){const o=this.getCacheData(r);if(o!==null)return o}const i=await this.fetchAccountResources(t),s=[];return i==null||i.forEach(o=>{if(o.type.startsWith(Ow)){const a=L7(o.type);a.length>0&&s.push({coinAddress:a,...o.data})}}),this.updateCache(r,s,Ti),s}async getCoinStores(t,n=!0){const r=`${t}_getCoinStores`;if(!n){const o=this.getCacheData(r);if(o!==null)return o}const i=await this.fetchAccountResources(t),s=[];return i==null||i.forEach(o=>{if(o.type.startsWith(Iw)){const a=Lg(o.type);a.length>0&&s.push({coinAddress:a,...o.data})}}),this.updateCache(r,s,Ti),s}async getCoinStore(t,n){const r=await this.fetchAccountResource(t,T7(n));if(r){const i=Lg(r.type);if(i.length>0)return{coinAddress:i,...r.data}}return null}async getPositionList(t,n){const r=[];if(n.length===0)return[];const i=await this.getFilterTokenEvent(t);for(let s=0;s<i.length;s++){const o=i[s];try{for(const a of n)if(o.creator===a.poolAddress){const c=await this.getPositionInfoByTokenName(o.creator,a.positions_handle,o.collection,o.name);c.pool.length>0&&r.push({...o,...c})}}catch(a){console.log(a)}}return r}async getCollectionList(t){return await this.getFilterTokenEvent(t)}async getFilterTokenEvent(t){const n=[],r=[];let i=[];try{i=await this._sdk.client.getEventsByEventHandle(t,Ng,"deposit_events")}catch(o){console.log(o)}i.forEach(o=>{n.push({key:`${o.data.id.token_data_id.creator}_${o.data.id.token_data_id.name}`,creator:o.data.id.token_data_id.creator,name:o.data.id.token_data_id.name,collection:o.data.id.token_data_id.collection,count:0})});let s=[];try{s=await this._sdk.client.getEventsByEventHandle(t,Ng,"withdraw_events")}catch(o){console.log(o)}return s.forEach(o=>{if(o.type===f7){for(const a of n)if(a.count===0&&a.key===`${o.data.id.token_data_id.creator}_${o.data.id.token_data_id.name}`){a.count-=1;break}}}),n.forEach(o=>{o.count===0&&r.push({...o})}),r}async fetchAccountResource(t,n){var r;try{return await this._sdk.client.getAccountResource(t,n)}catch(i){if(Gg(i)&&((r=i.response)==null?void 0:r.status)===404)return null;throw i}}async fetchAccountResources(t){var n;try{return await this._sdk.client.getAccountResources(t)}catch(r){if(Gg(r)&&((n=r.response)==null?void 0:n.status)===404)return null;throw r}}updateCache(t,n,r=H7){let i=this._cache[t];i?(i.overdueTime=Wg(r),i.value=n):i=new Xd(n,Wg(r)),this._cache[t]=i}getCacheData(t){const n=this._cache[t];return n!==void 0&&n.getCacheData()?n.value:null}},j7=class{constructor(t){this._sdk=t}get sdk(){return this._sdk}creatPoolTransactionPayload(t,n=!1){const{modules:r}=this.sdk.sdkOptions.networkOptions,i=t.delta_liquidity.gt(Te),s=i?`${r.LiquidswapDeployer}::${Mw}`:`${r.LiquidswapDeployer}::${Ys}`,o=i?"create_and_add_liquidity":"create_pool";if(n){const d=[new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeA)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeB))],l=i?[ae.bcsSerializeUint64(t.tick_spacing),ae.bcsSerializeU128(BigInt(t.initialize_sqrt_price.toString())),ae.bcsSerializeStr(t.uri),ae.bcsSerializeU128(BigInt(t.delta_liquidity.toString())),ae.bcsSerializeUint64(BigInt(t.max_amount_a.toString())),ae.bcsSerializeUint64(BigInt(t.max_amount_b.toString())),ae.bcsSerializeUint64(BigInt.asUintN(64,BigInt(t.tick_lower))),ae.bcsSerializeUint64(BigInt.asUintN(64,BigInt(t.tick_upper)))]:[ae.bcsSerializeUint64(t.tick_spacing),ae.bcsSerializeU128(BigInt(t.initialize_sqrt_price.toString())),ae.bcsSerializeStr(t.uri)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(s,o,d,l))}const a=ht(s,o),c=[t.coinTypeA,t.coinTypeB],u=i?[t.tick_spacing.toString(),t.initialize_sqrt_price.toString(),t.uri.toString(),t.delta_liquidity.toString(),t.max_amount_a.toString(),t.max_amount_b.toString(),BigInt.asUintN(64,BigInt(t.tick_lower)).toString(),BigInt.asUintN(64,BigInt(t.tick_upper)).toString()]:[t.tick_spacing.toString(),t.initialize_sqrt_price.toString(),t.uri.toString()];return{type:"entry_function_payload",function:a,type_arguments:c,arguments:u}}};new I(365);new I(24);new I(3600);new I(.5);function F7(e,t,n,r,i,s){const o=new Fe(e.toString()).div(new Fe(10**n)),a=new Fe(t.toString()).div(new Fe(10**r));return o.mul(i).add(a.mul(s))}function G7(e,t,n,r,i,s,o,a,c,u,d,l,f,p,_,y,b,B,E,x,S,T,R,P){const C=new Fe(l),G=new Fe(f),F=new Fe(y),U=new Fe(b),N=new Fe(B),k=new Fe(E),h=new Fe(x),g=new Fe(S),v=new Fe(T),O=new Fe(R),L=new Fe(P),z=Mt.tickIndexToSqrtPriceX64(t),W=Mt.tickIndexToSqrtPriceX64(n),$=ot.toX64_Decimal(ot.fromX64(z)).round(),w=ot.toX64_Decimal(ot.fromX64(W)).round(),H=ot.toX64_Decimal(ot.fromX64(r)).round();let re;const Q=C.mul(new Fe(10**s)).mul(w.mul($)).div(w.sub($)).round(),ce=G.mul(new Fe(10**o)).div(w.sub($)).round();e<t?re=Q:e>n?re=ce:re=Fe.min(Q,ce);const Be=re.mul(H.sub($)),J=re.mul(w.sub(H)).div(H.mul(w)).div(new Fe(10**s)).mul(h).add(Be.div(new Fe(10**o).mul(g))),j=F7(p,_,s,o,h,g),K=J.div(j),Y=re.eq(new Fe(0))?new Fe(0):new Fe(d/1e4).mul(F).mul(new Fe(re.toString()).div(new Fe(i.toString()).add(new Fe(re.toString())))).div(J),ne=K.eq(new Fe(0))?new Fe(0):K.mul(new Fe(36500/7)).div(J),ue=U.div(new Fe(10**a)).mul(v).mul(ne),le=N.div(new Fe(10**c)).mul(O).mul(ne),fe=k.div(new Fe(10**u)).mul(L).mul(ne);return{feeAPR:Y,posRewarder0APR:ue,posRewarder1APR:le,posRewarder2APR:fe}}function W7(e,t,n,r){const i=Math.max(e,n),o=Math.min(t,r)-i,a=t-e,c=r-n,u=new Fe(a.toString()),d=new Fe(c.toString()),l=new Fe(o.toString());let f=new Fe("0");return o<0?f=new Fe("0"):a===o?f=d.div(l):c===o?f=l.div(u):f=l.mul(l).div(d).div(u),f}function V7(e){const{clmmpool:t,position:n,tickLower:r,tickUpper:i}=e,{current_tick_index:s,fee_growth_global_a:o,fee_growth_global_b:a}=t;console.log({currentTickIndex:s,feeGrowthGlobalAX64:o,feeGrowthGlobalBX64:a});const{tick_lower_index:c,tick_upper_index:u,liquidity:d,fee_owed_a:l,fee_owed_b:f,fee_growth_inside_a:p,fee_growth_inside_b:_}=n,{feeGrowthOutsideA:y,feeGrowthOutsideB:b}=r,{feeGrowthOutsideA:B,feeGrowthOutsideB:E}=i;let x=null,S=null;s<Number(c)?(x=ot.subUnderflowU128(new I(o),new I(y)),S=ot.subUnderflowU128(new I(a),new I(b))):(x=y,S=b);let T=null,R=null;s<Number(u)?(T=B,R=E):(T=ot.subUnderflowU128(new I(o),new I(B)),R=ot.subUnderflowU128(new I(a),new I(E)));const P=ot.subUnderflowU128(ot.subUnderflowU128(new I(o),new I(x)),new I(T)),C=ot.subUnderflowU128(ot.subUnderflowU128(new I(a),new I(S)),new I(R)),G=ot.subUnderflowU128(new I(P),new I(p)).mul(new I(d)).shrn(64),F=ot.subUnderflowU128(new I(C),new I(_)).mul(new I(d)).shrn(64),U=new I(gt(l).add(gt(G.toString())).toString()),N=new I(gt(f).add(gt(F.toString())).toString());return{feeOwedA:U,feeOwedB:N}}function K7(e){if(e){const t={};return e.maxGasAmount&&(t.maxGasAmount=BigInt(e.maxGasAmount)),e.gasUnitPrice&&(t.gasUnitPrice=BigInt(e.gasUnitPrice)),e.expireTimestamp&&(t.expireTimestamp=BigInt(e.expireTimestamp)),t}}function X7(e,t){return new Vu(r=>{const i=new Uint8Array(64);return new V.Ed25519Signature(i)},e.toUint8Array()).sign(t)}function Z7(e){if(e){const t={};return e.maxGasAmount&&(t.max_gas_amount=e.maxGasAmount.toString()),e.gasUnitPrice&&(t.gas_unit_price=e.gasUnitPrice.toString()),e.expireTimestamp&&(t.expiration_timestamp_secs=e.expireTimestamp.toString()),t}}async function J7(e,t,n,r,i=!0){if(n instanceof V.TransactionPayload){const d=await e.generateRawTransaction(t.address,n,K7(r)),l=X7(t.pubkey,d),f=await e.submitBCSSimulation(l);return i&&console.log(f[0]),f[0]}const s=n,o=await e.generateTransaction(t.address,s,Z7(r)),a={type:"ed25519_signature",public_key:t.pubkey.hex(),signature:pt.fromUint8Array(new Uint8Array(64)).hex()},c={sender:t.address.hex(),sequence_number:o.sequence_number.toString(),max_gas_amount:o.max_gas_amount.toString(),gas_unit_price:o.gas_unit_price.toString(),expiration_timestamp_secs:o.expiration_timestamp_secs.toString(),payload:s,signature:a},u=await e.client.transactions.simulateTransaction(c);return i&&console.log(u[0]),u[0]}async function wu(e,t,n,r){return J7(e,t,n,r,!1)}function Vg(e,t){const n=new ae.Serializer;n.serializeU32AsUleb128(e.length);const r=n[t];return e.forEach(i=>{n.serializeU32AsUleb128(i.length),i.forEach(s=>{r.call(n,s)})}),n.getBytes()}function Y7(e){const t=new ae.Serializer;return t.serializeU32AsUleb128(e.length),e.forEach(n=>{t.serializeU32AsUleb128(n.length),n.forEach(r=>{r.serialize(t)})}),t.getBytes()}function Q7(e){const t=new ae.Serializer;return t.serializeU32AsUleb128(e.length),e.forEach(n=>{n.serialize(t)}),t.getBytes()}var fs=1e9,ek=5*60*1e3,bu=24*60*60*1e3;function Kg(e){return Date.parse(new Date().toString())+e}var tk=class{constructor(t){this._cache={},this._sdk=t}get sdk(){return this._sdk}async getPoolImmutablesResource(t=!1){const n=this._sdk.sdkOptions.networkOptions.launchpad.cetusLaunchpad,r=`${n}_getMmutablesPools`,i=this.getCacheData(r);let s;if(!t&&i!=null)s=i;else{const o=ht(n,Cw,$w),a=await this._sdk.Resources.fetchAccountResource(n,o);s=JSON.parse(JSON.stringify(a==null?void 0:a.data)),this.updateCache(r,s,bu)}return s}async getLaunchpadPools(t=[],n=0,r=100,i=null,s=!1){const o=this._sdk.sdkOptions.networkOptions.launchpad.cetusLaunchpad,a=[],u=(await this.getPoolImmutablesResource(s)).data.data,d=t.length>0;for(let l=0;l<u.length;l+=1){const f=u[l],{pool_address:p,creater_address:_,pool_type:y}=f.value;if(i==="fixed_price"&&y!==0||i==="fair_launch"&&y===0||d&&!t.includes(p))continue;if(!d){const C=Number(l);if(C<n||C>=n+r)continue}const b=f.key,B=ht(b.coin_raise.account_address,Ri(b.coin_raise.module_name),Ri(b.coin_raise.struct_name)),E=ht(b.coin_sale.account_address,Ri(b.coin_sale.module_name),Ri(b.coin_sale.struct_name)),x=ci.buildLaunchpadPoolType(y===0,o,E,B),S={coin_type_sale:E,coin_type_raise:B,pool_type:x,pool_address:p,creator:_,pool_mode:y===0?"fixed_price":"fair_launch"},T=await this.getLaunchpadPoolState(S.pool_address,S.pool_type,S.pool_mode),R={...S,...T};await this.calculateLaunchpadPoolField(R),a.push(R);const P=`${p}_pool`;this.updateCache(P,R,bu)}return a}async getLaunchpadPool(t,n=!0){const r=`${t}_pool`,i=this.getCacheData(r);let s;if(i!==null&&!n&&(s=i),s==null)return(await this.getLaunchpadPools([t]))[0];const o=await this.getLaunchpadPoolState(t,s.pool_type,s.pool_mode),a={...s,...o};return await this.calculateLaunchpadPoolField(a),this.updateCache(r,a,bu),a}async getSpecifyCoinDecimals(t){const n={};(await this._sdk.Token.getSpecifyTokenListByCache(t)).forEach(o=>{n[o.address]=o.decimals});const i=t.filter(o=>n[o]===void 0);return(await this._sdk.Resources.getSpecifyCoinInfos(i)).forEach(o=>{n[o.coinAddress]=Number(o.decimals)}),n}async calculateLaunchpadPoolField(t){const n=await this.getSpecifyCoinDecimals([t.coin_type_sale,t.coin_type_raise]),r=Number(n[t.coin_type_sale]),i=Number(n[t.coin_type_raise]);if(t.initialize_price=ci.priceFixToReal(t.initialize_price,r,i),ci.isFixedPricePool(t))t.raise_total=ci.raiseTotalAmount(t,r,i);else{t.raise_total=ci.raiseTotalAmount(t,r,i);const o=gt(t.raise_coin_amount).div(gt(10).pow(gt(i))),a=gt(t.sale_total).div(gt(10).pow(gt(r)));a.toNumber()>0?t.price=o.div(a).toNumber():t.price=0}return ci.updatePoolStaus(t),!0}async getLaunchpadPoolState(t,n,r,i=!0){const s=`${t}_${n}_getLaunchpadPoolState`;if(!i){const u=this.getCacheData(s);if(u!==null)return u}const o=await this._sdk.Resources.fetchAccountResource(t,n),a=JSON.parse(JSON.stringify(o==null?void 0:o.data)),c=ci.buildLaunchpadFixedPoolState(r,a);return this.updateCache(s,c,bu),c}async getOwnerLaunchpadCoins(t){const n=await this._sdk.Resources.getCoinStores(t),r=[];return n.forEach(i=>{const s=Kh(i.coinAddress);s.module===Uw&&r.push({coin_type_sale:s.type_arguments[0],coin_type_raise:s.type_arguments[1],coin_address:i.coinAddress,balance:Number(i.coin.value)})}),r}async getSimplePosition(t){const n=await this._sdk.Resources.fetchAccountResource(t,ht(this._sdk.sdkOptions.networkOptions.launchpad.cetusLaunchpad,"clmmProxy","LockedPosition")),r=JSON.parse(JSON.stringify(n==null?void 0:n.data));return{position_name:r.token_id.token_data_id.name,collection:r.token_id.token_data_id.collection,creator:r.token_id.token_data_id.creator,unlock_time:r.unlock_time,is_redeem:r.is_redeem}}async hasPoolWhitelist(t){const{launchpad:n}=this._sdk.sdkOptions.networkOptions,r={handle:"",exist:!1};try{const i=await this._sdk.Resources.fetchAccountResource(t,ht(n.cetusLaunchpad,"whitelist","Whitelist")),s=JSON.parse(JSON.stringify(i==null?void 0:i.data));return r.exist=Number(s.users.length)>0,r.handle=s.users.inner.handle,r}catch(i){console.log(i)}return r}async inPoolWhitelist(t,n){if(!n.exist)return!1;try{return await this._sdk.client.getTableItem(n.handle,{key_type:"address",value_type:"u8",key:t}),!0}catch(r){console.log(r)}return!1}buildLaunchpadCoinType(t,n){return ht(this._sdk.sdkOptions.networkOptions.launchpad.crowdCoin,"cscoin","CS",[t,n])}creatPoolTransactionPayload(t,n=!1){const{launchpad:r}=this.sdk.sdkOptions.networkOptions,i="is_admin"in t,s=`${r.cetusLaunchpad}::${Si}`,o=i?t.is_admin?"create_crowdsale_pool_authority":"create_crowdsale_pool":"create_fairlaunch_pool",a=ci.priceRealToFix(t.initialize_price,t.sale_decimals,t.raise_decimals);console.log("fixPrice:",a);const c=Mt.priceToSqrtPriceX64(gt(t.initialize_price),t.sale_decimals,t.raise_decimals).toString();return i?ci.buildCreatCrowdsalePoolPayload(t,c,a,s,o,n):ci.buildCreatFairlaunchPoolPayload(t,c,a,s,o,n)}updatePoolTransactionPayload(t,n=!1){const{launchpad:r}=this.sdk.sdkOptions.networkOptions,i=`${r.cetusLaunchpad}::${Si}`,s="update_pool";if(n){const u=[new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_sale)),new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_raise))],d=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool_addr)),ae.bcsSerializeUint64(t.start_time),ae.bcsSerializeUint64(t.liquidity_rate*100),ae.bcsSerializeUint64(t.activity_duration),ae.bcsSerializeUint64(t.calmdown_duraction),ae.bcsSerializeUint64(t.settle_duration),ae.bcsSerializeUint64(t.locked_duration)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,u,d))}const o=ht(i,s),a=[t.coin_type_sale,t.coin_type_raise],c=[t.pool_addr,t.start_time,t.liquidity_rate*100,t.activity_duration,t.calmdown_duraction,t.settle_duration,t.locked_duration];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}purchaseTransactionPayload(t,n=!1){const{launchpad:r}=this.sdk.sdkOptions.networkOptions,i=`${r.cetusLaunchpad}::${Si}`,s="purchase";if(n){const u=[new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_sale)),new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_raise))],d=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool_addr)),ae.bcsSerializeUint64(t.raise_amount_in)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,u,d))}const o=ht(i,s),a=[t.coin_type_sale,t.coin_type_raise],c=[t.pool_addr,t.raise_amount_in];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}revokeTransactionPayload(t,n=!1){const{launchpad:r}=this.sdk.sdkOptions.networkOptions,i=`${r.cetusLaunchpad}::${Si}`,s="revoke";if(n){const u=[new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_sale)),new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_raise))],d=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool_addr)),ae.bcsSerializeUint64(t.cs_coin_amount)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,u,d))}const o=ht(i,s),a=[t.coin_type_sale,t.coin_type_raise],c=[t.pool_addr,t.cs_coin_amount];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}settleTransactionPayload(t,n=!1){const{launchpad:r}=this.sdk.sdkOptions.networkOptions,i=`${r.cetusLaunchpad}::${Si}`,s=t.pool_mode==="fixed_price",o=s?"crowd_sale_settle":"fair_launch_settle";if(n){const u=[new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_sale)),new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_raise))];return s?new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,o,u,[])):new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,o,u,[ae.bcsSerializeU128(BigInt(t.initialize_sqrt_price))]))}const a=ht(i,o),c=[t.coin_type_sale,t.coin_type_raise];return{type:"entry_function_payload",function:a,type_arguments:c,arguments:s?[]:[t.initialize_sqrt_price]}}claimTransactionPayload(t,n=!1){const{launchpad:r}=this.sdk.sdkOptions.networkOptions,i=`${r.cetusLaunchpad}::${Si}`,s="claim";if(n){const u=[new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_sale)),new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_raise))],d=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool_addr)),ae.bcsSerializeUint64(t.cs_coin_amount)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,u,d))}const o=ht(i,s),a=[t.coin_type_sale,t.coin_type_raise],c=[t.pool_addr,t.cs_coin_amount];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}claimFeeTransactionPayload(t,n=!1){const{launchpad:r}=this.sdk.sdkOptions.networkOptions,i=`${r.cetusLaunchpad}::${Si}`,s="claim_fee";if(n){const u=[new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_sale)),new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_raise))],d=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool_addr))];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,u,d))}const o=ht(i,s),a=[t.coin_type_sale,t.coin_type_raise],c=[t.pool_addr];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}withdrawTransactionPayload(t,n=!1){const{launchpad:r}=this.sdk.sdkOptions.networkOptions,i=`${r.cetusLaunchpad}::${Si}`,s=t.is_withdraw_sale?"withdraw_sale":"withdraw_raise";if(n){const u=[new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_sale)),new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_raise))],d=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool_addr))];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,u,d))}const o=ht(i,s),a=[t.coin_type_sale,t.coin_type_raise],c=[t.pool_addr];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}redeemPositionTransactionPayload(t,n=!1){const{launchpad:r}=this.sdk.sdkOptions.networkOptions,i=`${r.cetusLaunchpad}::${Si}`,s="redeem_position";if(n){const c=[new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_sale)),new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_raise))];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,c,[]))}const o=ht(i,s),a=[t.coin_type_sale,t.coin_type_raise];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:[]}}userToWhitelistTransactionPayload(t,n=!1){const{launchpad:r}=this.sdk.sdkOptions.networkOptions,i=`${r.cetusLaunchpad}::${Si}`,s=t.isAdd?"add_user_to_whitelist":"remove_user_from_whitelist";if(n){const u=[new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_sale)),new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_raise))],d=[ae.bcsToBytes(V.AccountAddress.fromHex(t.user_addr))];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,u,d))}const o=ht(i,s),a=[t.coin_type_sale,t.coin_type_raise],c=[t.user_addr];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}updateCache(t,n,r=ek){let i=this._cache[t];i?(i.overdueTime=Kg(r),i.value=n):i=new Xd(n,Kg(r)),this._cache[t]=i}getCacheData(t){const n=this._cache[t];return n!==void 0&&n.getCacheData()?n.value:null}};function nk(e,t,n,r){const i=e.shln(64),s=n.sub(t);return r?ot.divRoundUp(i,s):i.div(s)}var ci=class{static minSettlePurchaseAmount(t){return gt(t.sale_total).mul(t.initialize_price).mul(t.least_raise_rate).toNumber()}static get_sale_liquidity_amount(t,n,r,i,s,o){const a=R0.getMinIndex(t),c=R0.getMaxIndex(t),u=this.priceRealToFix(i,s,o),d=new I(n*u*r),l=new I(Mt.priceToSqrtPriceX64(gt(u),0,0).toString()),f=nk(d,Mt.tickIndexToSqrtPriceX64(a),l,!1);return C7(l,Mt.tickIndexToSqrtPriceX64(c),f,!0).toString()}static raiseTotalAmount(t,n,r){const i=gt(n-r).abs().toNumber();return n>r?Number(gt(t.sale_total).mul(t.initialize_price).div(gt(10).pow(gt(i))).toString()):Number(gt(t.sale_total).mul(t.initialize_price).mul(gt(10).pow(gt(i))).toString())}static priceRealToFix(t,n,r){const i=gt(n-r).toNumber();return Number(gt(t).div(gt(10).pow(gt(i))).toString())}static priceFixToReal(t,n,r){const i=gt(n-r).toNumber();return Number(gt(t).mul(gt(10).pow(gt(i))).toString())}static buildLaunchpadPoolType(t,n,r,i){return t?ht(ht(n,y7,m7),[r,i]):ht(ht(n,_7,w7),[r,i])}static isFixedPricePool(t){return t.pool_mode==="fixed_price"}static getFairLaunchSettleSqrtPrice(t,n,r){if(t.pool_status!=="Settle")throw new Error("The pool is not in settle ");const i=Mt.priceToSqrtPriceX64(gt(t.price),n,r).toString();return console.log("sqrtPrice: ",i.toString()),i.toString()}static async updatePoolStaus(t){const n=ci.isFixedPricePool(t),r=Number(gt(Date.now()/1e3).toFixed(0));if(t.end_activity_time=Number(t.start_activity_time)+Number(t.activity_duration),n)if(t.end_settle_time=Number(t.end_activity_time)+Number(t.settle_duration),t.is_settle)t.pool_status="Ended";else if(r<Number(t.start_activity_time))t.pool_status="Upcoming";else if(r>=t.start_activity_time&&r<t.end_activity_time)t.pool_status="Live";else if(r>=t.end_activity_time&&r<t.end_settle_time){const i=t.raise_coin_amount,s=gt(t.raise_total).mul(gt(t.least_raise_rate)).toNumber();i<s?t.pool_status="Failed":t.pool_status="Settle"}else t.pool_status="Failed";else if(t.end_calm_down_time=Number(t.end_activity_time)+Number(t.calmdown_duration),t.end_settle_time=Number(t.end_calm_down_time)+Number(t.settle_duration),t.is_settle)t.pool_status="Ended";else if(r<Number(t.start_activity_time))t.pool_status="Upcoming";else if(r>=t.start_activity_time&&r<t.end_activity_time)t.pool_status="Live";else if(r>=t.end_activity_time&&r<t.end_calm_down_time)t.pool_status="Calmdown";else if(r>=t.end_calm_down_time&&r<t.end_settle_time){const i=t.raise_coin_amount,s=gt(t.raise_total).mul(gt(t.least_raise_rate)).toNumber();i<s?t.pool_status="Failed":t.pool_status="Settle"}else t.pool_status="Failed";return!0}static buildLaunchpadFixedPoolState(t,n){return t==="fixed_price"?{sale_coin_amount:n.sale_coin.value,raise_coin_amount:n.raise_coin.value,activity_duration:n.activity_duration,clmm_pool_address:n.clmm_pool_address,cs_burn_cap:n.cs_burn_cap.dummy_field,cs_mint_cap:n.cs_mint_cap.dummy_field,fee_amount:n.fee_amount,fee_rate:n.fee_rate,initialize_price:Number(n.initialize_price)/fs,initialize_sqrt_price:BigInt(n.initialize_sqrt_price),is_settle:n.is_settle,least_raise_rate:Number(n.least_raise_rate)/100,liquidity_rate:Number(n.liquidity_rate)/100,locked_duration:n.locked_duration,sale_total:n.sale_total,raise_total:0,settle_duration:n.settle_duration,start_activity_time:n.start_time,unused_raise:n.unused_raise,unused_sale:n.unused_sale,has_whiteList:n.has_white_list,pool_status:"Upcoming",end_activity_time:0,end_settle_time:0}:{price:0,sale_coin_amount:0,raise_coin_amount:n.raise_coin.value,sale_total:n.sale_coin.value,raise_total:0,calmdown_duration:n.calmdown_duration,initialize_price:Number(n.price)/fs,activity_duration:n.activity_duration,clmm_pool_address:n.clmm_pool_address,cs_burn_cap:n.cs_burn_cap.dummy_field,cs_mint_cap:n.cs_mint_cap.dummy_field,fee_amount:n.fee_amount,fee_rate:n.fee_rate,is_settle:n.is_settle,least_raise_rate:Number(n.least_raise_amount)/100,liquidity_rate:Number(n.liquidity_rate)/100,locked_duration:n.locked_duration,settle_duration:n.settle_duration,start_activity_time:n.start_time,has_whiteList:n.has_white_list,pool_status:"Upcoming",end_activity_time:0,end_calm_down_time:0,end_settle_time:0}}static buildCreatCrowdsalePoolPayload(t,n,r,i,s,o=!1){if(o){const d=[new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_sale)),new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_raise))],l=t.is_admin?[ae.bcsSerializeU128(r*fs),ae.bcsSerializeU128(BigInt(n)),ae.bcsSerializeUint64(t.tick_spacing),ae.bcsSerializeUint64(t.sale_total),ae.bcsSerializeUint64(t.start_time),ae.bcsSerializeUint64(t.least_raise_rate*100),ae.bcsSerializeUint64(t.activity_duration),ae.bcsSerializeUint64(t.settle_duration),ae.bcsSerializeUint64(t.locked_duration),ae.bcsSerializeU8(0)]:[ae.bcsSerializeU128(r*fs),ae.bcsSerializeU128(BigInt(n)),ae.bcsSerializeUint64(t.tick_spacing),ae.bcsSerializeUint64(t.sale_total),ae.bcsSerializeUint64(t.start_time),ae.bcsSerializeUint64(t.least_raise_rate*100),ae.bcsSerializeUint64(t.liquidity_rate*100),ae.bcsSerializeUint64(t.activity_duration),ae.bcsSerializeUint64(t.settle_duration),ae.bcsSerializeUint64(t.locked_duration),ae.bcsSerializeU8(0)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,d,l))}const a=ht(i,s),c=[t.coin_type_sale,t.coin_type_raise],u=t.is_admin?[r*fs,n,t.tick_spacing,t.sale_total,t.start_time,t.least_raise_rate*100,t.activity_duration,t.settle_duration,t.locked_duration,0]:[r*fs,n,t.tick_spacing,t.sale_total,t.start_time,t.least_raise_rate*100,t.liquidity_rate*100,t.activity_duration,t.settle_duration,t.locked_duration,0];return{type:"entry_function_payload",function:a,type_arguments:c,arguments:u}}static buildCreatFairlaunchPoolPayload(t,n,r,i,s,o=!1){if(o){const d=[new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_sale)),new V.TypeTagStruct(V.StructTag.fromString(t.coin_type_raise))],l=[ae.bcsSerializeU128(r*fs),ae.bcsSerializeU128(BigInt(n)),ae.bcsSerializeUint64(t.tick_spacing),ae.bcsSerializeUint64(t.sale_total),ae.bcsSerializeUint64(t.start_time),ae.bcsSerializeUint64(t.least_raise_rate*100),ae.bcsSerializeUint64(t.liquidity_rate*100),ae.bcsSerializeUint64(t.activity_duration),ae.bcsSerializeUint64(t.calmdown_duraction),ae.bcsSerializeUint64(t.settle_duration),ae.bcsSerializeUint64(t.locked_duration)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,d,l))}const a=ht(i,s),c=[t.coin_type_sale,t.coin_type_raise],u=[r*fs,n,t.tick_spacing,t.sale_total,t.start_time,t.liquidity_rate*100,ae.bcsSerializeUint64(t.least_raise_rate*100),t.activity_duration,t.calmdown_duraction,t.settle_duration,t.locked_duration];return{type:"entry_function_payload",function:a,type_arguments:c,arguments:u}}};function rk(e){let t;switch(e){case 5:t=5;break;case 10:t=10;break;case 20:t=20;break;case 25:t=25;break;case 50:t=50;break;case 100:t=100;break;default:t=1}const n=100/t+1,r=new Array(n);for(let i=0;i<n;i+=1)r[i]=i*t;return r}function Zu(e,t){const n=rk(t),r=new Array(n.length);for(let i=0;i<n.length;i+=1)r[i]=e.muln(n[i]).divn(100);return r}function ik(e,t,n,r){for(let i=t;i<e;i+=1)n.amountInArray[i]=n.amountInArray[i].add(r.amountIn),n.amountOutArray[i]=n.amountOutArray[i].add(r.amountOut),n.feeAmountArray[i]=n.feeAmountArray[i].add(r.feeAmount);return n}function sk(e,t,n,r,i){let s=new I(r.liquidity),{currentSqrtPrice:o}=r,a={amountInArray:[],amountOutArray:[],feeAmountArray:[],nextSqrtPriceArray:[],isExceed:[]};n.forEach(()=>{a.amountInArray.push(Te),a.amountOutArray.push(Te),a.feeAmountArray.push(Te),a.nextSqrtPriceArray.push(Te)});let c,u;const d=yl.getDefaultSqrtPriceLimit(e),l=n.length;let f=n[1],p=1,_;e?_=i.sort((y,b)=>b.index-y.index):_=i.sort((y,b)=>y.index-b.index);for(const y of _){if(e){if(r.currentTickIndex<y.index)continue}else if(r.currentTickIndex>y.index)continue;if(y===null)continue;e&&d.gt(y.sqrtPrice)||!e&&d.lt(y.sqrtPrice)?c=d:c=y.sqrtPrice;let b={amountIn:Te,amountOut:Te,nextSqrtPrice:Te,feeAmount:Te};const B=o,E=s;let x=f,S=p;for(let T=p;T<l;T+=1){const R=Lw(o,c,s,f,new I(r.feeRate),t);if(b=R,R.amountIn.eq(Te)||(f=t?f.sub(R.amountIn.add(R.feeAmount)):f.sub(R.amountOut)),f.eq(Te))a.amountInArray[T]=a.amountInArray[T].add(R.amountIn),a.amountOutArray[T]=a.amountOutArray[T].add(R.amountOut),a.feeAmountArray[T]=a.feeAmountArray[T].add(R.feeAmount),R.nextSqrtPrice.eq(y.sqrtPrice)?(u=e?y.liquidityNet.mul(new I(-1)):y.liquidityNet,s=u.gt(Te)?s.add(u):s.sub(u.abs()),o=y.sqrtPrice):o=R.nextSqrtPrice,a.amountInArray[T]=a.amountInArray[T].add(a.feeAmountArray[T]),a.nextSqrtPriceArray[T]=o,s=E,o=B,T!==l-1&&(f=x.add(n[T+1].sub(n[S]))),p+=1;else{a=ik(l,T,a,R),x=f,S=p;break}}if(p===l)break;b.nextSqrtPrice.eq(y.sqrtPrice)?(u=e?y.liquidityNet.mul(new I(-1)):y.liquidityNet,s=u.gt(Te)?s.add(u):s.sub(u.abs()),o=y.sqrtPrice):o=b.nextSqrtPrice}return t?n.forEach((y,b)=>{a.isExceed.push(a.amountInArray[b].lt(y))}):n.forEach((y,b)=>{a.isExceed.push(a.amountOutArray[b].lt(y))}),a}var ok=class{constructor(t,n,r,i,s,o){this.minSplitUnit=n,this.a2b=i,this.byAmountIn=s,this.clmmpool=r,this.ticks=o,this.amountArray=[],this.createSplitSwapParams=this.createSplitSwapParams.bind(this),this.createSplitSwapParams(t,n),this.splitSwapResult={amountInArray:[],amountOutArray:[],feeAmountArray:[],nextSqrtPriceArray:[],isExceed:[]},this.computeSwap=this.computeSwap.bind(this)}createSplitSwapParams(t,n){const r=Zu(t,n);this.amountArray=r}computeSwap(){const t=Pw(this.clmmpool);return this.splitSwapResult=sk(this.a2b,this.byAmountIn,this.amountArray,t,this.ticks),this.splitSwapResult}},R0=class{static getMinIndex(t){return zg+Math.abs(zg)%t}static getMaxIndex(t){return Hg-Hg%t}};function ak(e,t){const n=Math.abs(e)%t;return e>0?n>t/2?e+t-n:e-n:n>t/2?e-t+n:e+n}function ck(e,t,n,r,i,s){const o=e.rewarder_infos,a=[];for(let c=0;c<o.length;c+=1){let u=s[c];t!==null&&(e.current_tick_index<r?u=s[c].sub(new I(t.rewardersGrowthOutside[c])):u=t.rewardersGrowthOutside[c]);let d=new I(0);n!==null&&(e.current_tick_index>=i?d=s[c].sub(new I(n.rewardersGrowthOutside[c])):d=n.rewardersGrowthOutside[c]);const l=ot.subUnderflowU128(ot.subUnderflowU128(new I(s[c]),new I(u)),new I(d));a.push(l)}return a}var uk=class{constructor(t){this._sdk=t,this.growthGlobal=[Te,Te,Te]}get sdk(){return this._sdk}async listRewarderInfosFromClmmpool(t){const n=await this.sdk.Resources.getPool(t),r=[];for(const i of n.rewarder_infos)r.push(i);return r}async emissionsEveryDay(t){const n=await this.listRewarderInfosFromClmmpool(t);if(!n)return null;const r=[];for(const i of n){const s=ot.fromX64(new I(i.emissions_per_second));r.push({emissions:Math.floor(s.toNumber()*60*60*24),coin_address:i.coinAddress})}return r}async collectRewarderAmount(t,n){const r=await this.sdk.Resources.getPositionInfo(t,n);return r?{reward_amount_owed_0:r.reward_amount_owed_0,reward_amount_owed_1:r.reward_amount_owed_1,reward_amount_owed_2:r.reward_amount_owed_2}:null}async updatePoolRewarder(t,n){const r=await this.sdk.Resources.getPool(t),i=r.rewarder_last_updated_time;if(r.rewarder_last_updated_time=n,r.liquidity===0||n.eq(i))return r;const s=n.div(new I(1e3)).sub(new I(i)).add(new I(15)),o=r.rewarder_infos;for(let a=0;a<o.length;a+=1){const c=o[a],u=ot.checkMulDivFloor(s,new I(c.emissions_per_second),new I(r.liquidity),128);this.growthGlobal[a]=new I(c.growth_global).add(new I(u))}return r}async posRewardersAmount(t,n,r,i){const s=Date.parse(new Date().toString()),o=await this.updatePoolRewarder(t,new I(s)),a=await this.sdk.Resources.getPositionInfo(o,n),c=parseInt(a.tick_lower_index,10),u=parseInt(a.tick_upper_index,10),d=ck(o,r,i,c,u,this.growthGlobal),l=[],f=[];if(d.length>0){const p=ot.subUnderflowU128(d[0],new I(a.reward_growth_inside_0)),_=ot.checkMulShiftRight(new I(a.liquidity),p,64,256);l.push(d[0]),f.push({amount_owed:new I(a.reward_amount_owed_0).add(_),coin_address:o.rewarder_infos[0].coinAddress})}if(d.length>1){const p=ot.subUnderflowU128(d[1],new I(a.reward_growth_inside_1)),_=ot.checkMulShiftRight(new I(a.liquidity),p,64,256);l.push(d[1]),f.push({amount_owed:new I(a.reward_amount_owed_1).add(_),coin_address:o.rewarder_infos[1].coinAddress})}if(d.length>2){const p=ot.subUnderflowU128(d[2],new I(a.reward_growth_inside_2)),_=ot.checkMulShiftRight(new I(a.liquidity),p,64,256);l.push(d[2]),f.push({amount_owed:new I(a.reward_amount_owed_2).add(_),coin_address:o.rewarder_infos[2].coinAddress})}return f}async poolRewardersAmount(t,n,r,i){const s=Date.parse(new Date().toString()),o=await this.updatePoolRewarder(n,new I(s)),a=await this.sdk.Resources.getPositionList(t,[o]),c=[Te,Te,Te];for(let u=0;u<a.length;u+=1){const d=await this.posRewardersAmount(n,a[u],r[u],i[u]);for(let l=0;l<3;l+=1)c[l]=c[l].add(d[l].amount_owed)}return c}collectPosRewarderTransactionPayload(t,n=!1){const{modules:r}=this.sdk.sdkOptions.networkOptions,i=`${r.LiquidswapDeployer}::${Ys}`,s="collect_rewarder";if(n){const u=[new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeA)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeB)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeC))],d=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool_address)),ae.bcsSerializeU8(t.index),ae.bcsSerializeUint64(t.pos_index)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,u,d))}const o=ht(i,s),a=[t.coinTypeA,t.coinTypeB,t.coinTypeC],c=[t.pool_address,t.index,t.pos_index];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}collectPoolRewarderTransactionPayload(t,n=!1){if(t.rewarder_nums===1){const s={pool_address:t.pool_address,index:0,pos_index:t.pos_index,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,coinTypeC:t.coinTypeC};return this.collectPosRewarderTransactionPayload(s,n)}const{modules:r}=this.sdk.sdkOptions.networkOptions,i=`${r.ClmmIntegrate}::${B0}`;if(t.rewarder_nums===2){const s="collect_rewarder_for_two";if(n){const u=[new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeA)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeB)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeC)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeD))],d=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool_address)),ae.bcsSerializeUint64(t.pos_index)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,u,d))}const o=ht(i,s),a=[t.coinTypeA,t.coinTypeB,t.coinTypeC,t.coinTypeD],c=[t.pool_address,t.pos_index];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}if(t.rewarder_nums===3){const s="collect_rewarder_for_three";if(n){const u=[new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeA)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeB)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeC)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeD)),new V.TypeTagStruct(V.StructTag.fromString(t.coinTypeE))],d=[ae.bcsToBytes(V.AccountAddress.fromHex(t.pool_address)),ae.bcsSerializeUint64(t.pos_index)];return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,u,d))}const o=ht(i,s),a=[t.coinTypeA,t.coinTypeB,t.coinTypeC,t.coinTypeD,t.coinTypeE],c=[t.pool_address,t.pos_index];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}}},lk=5*60*1e3,vu=24*60*60*1e3;function Xg(e){return Date.parse(new Date().toString())+e}var dk=class{constructor(t){this._cache={},this._sdk=t}get sdk(){return this._sdk}async getOwnerTokenList(t,n,r=!1){const i="getAllRegisteredTokenList";if(!r){const l=this.getCacheData(i);if(l!==null)return l}const{modules:s}=this._sdk.sdkOptions.networkOptions,o=`${s.TokenDeployer}::coin_list`,a="fetch_full_list",c=new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(o,a,[],[ae.bcsToBytes(V.AccountAddress.fromHex(n))])),u=await wu(new Vt(this.sdk.sdkOptions.rpcUrl),t,c),d=this.transformTokenData(u.changes);return this.updateCache(i,d,vu),d}async getTokenListByCoinType(t,n=0,r=20){const{fraphQLUrl:i}=this._sdk.sdkOptions;if(!i)throw Error("The fraphQLUrl is not configured in the SDK");const s={query:`query MyQuery {
  coin_infos(
  limit: ${r}, offset: ${n},  order_by: {name: desc}, where: {  coin_type: {_regex: "${t}"}}
  ) {
    coin_type
    symbol
    name
    decimals
    creator_address
    coin_type_hash
  }
}
`,variables:null,operationName:"MyQuery"},o=await yi.post(i,s),a=[];return o.data.data.coin_infos.forEach(c=>{a.push({address:c.coin_type,symbol:c.symbol,official_symbol:c.symbol,decimals:c.decimals,name:c.name,coingecko_id:"",project_url:"",logo_url:""})}),a}async getSpecifyTokenListByCache(t){const n="getAllRegisteredTokenList",r=this.getCacheData(n),i=[];if(r!==null){const s=r;for(const o of t)for(const a of s)if(o===a.address){i.push(a);continue}}return i}async getAllRegisteredTokenList(t,n=!1){const r="getAllRegisteredTokenList";if(!n){const l=this.getCacheData(r);if(l!==null)return l}const{modules:i}=this._sdk.sdkOptions.networkOptions,s=`${i.TokenDeployer}::coin_list`,o="fetch_all_registered_coin_info",a=new Vt(this.sdk.sdkOptions.rpcUrl),c=new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(s,o,[],[])),u=await wu(a,t,c),d=this.transformTokenData(u.changes);return this.updateCache(r,d,vu),d}transformTokenData(t){const n=[],{modules:r}=this._sdk.sdkOptions.networkOptions,i=t.filter(a=>a.type!=="write_resource"?!1:a.data.type===`${r.TokenDeployer}::coin_list::CoinList<${r.TokenDeployer}::coin_list::CoinInfo>`);if(i.length===0)return n;const o=i[0].data.data;return"full_list"in o&&o.full_list.value_list.forEach(a=>{const c={...a},u=a.extensions.data;for(const d of u){if(d.key==="labels")try{d.value=JSON.parse(decodeURIComponent(A0.decode(d.value)))}catch{}c[d.key]=d.value}n.push(c)}),n}async getAllRegisteredPoolList(t,n=!1){const r="getAllRegisteredPoolList";if(!n){const l=this.getCacheData(r);if(l!==null)return l}const{modules:i}=this._sdk.sdkOptions.networkOptions,s=`${i.TokenDeployer}::lp_list`,o="fetch_all_registered_coin_info",a=new Vt(this.sdk.sdkOptions.rpcUrl),c=new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(s,o,[],[])),u=await wu(a,t,c),d=this.transformPoolData(u.changes);return this.updateCache(r,d,vu),d}async getOwnerPoolList(t,n,r=!1){const i="getAllRegisteredPoolList";if(!r){const l=this.getCacheData(i);if(l!==null)return l}const{modules:s}=this._sdk.sdkOptions.networkOptions,o=`${s.TokenDeployer}::lp_list`,a="fetch_full_list",c=new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(o,a,[],[ae.bcsToBytes(V.AccountAddress.fromHex(n))])),u=await wu(new Vt(this.sdk.sdkOptions.rpcUrl),t,c),d=this.transformPoolData(u.changes);return this.updateCache(i,d,vu),d}transformPoolData(t){const n=[],{modules:r}=this._sdk.sdkOptions.networkOptions,i=t.filter(a=>a.type!=="write_resource"?!1:a.data.type===`${r.TokenDeployer}::lp_list::PoolList<${r.TokenDeployer}::lp_list::PoolInfo>`);if(i.length===0)return n;const o=i[0].data.data;return"full_list"in o&&o.full_list.value_list.forEach(a=>{const c={...a},u=a.extensions.data;for(const d of u){if(d.key==="labels")try{d.value=JSON.parse(decodeURIComponent(A0.decode(d.value)))}catch{}c[d.key]=d.value}n.push(c)}),n}async getOwnerWarpPoolList(t,n,r=!1){const i=await this.getOwnerTokenList(n,t,r),s=await this.getOwnerPoolList(n,t,r),o=[];for(const a of s){for(const c of i)c.address===a.coin_a_address&&(a.coinA=c),c.address===a.coin_b_address&&(a.coinB=c);o.push(a)}return o}async getWarpPoolList(t,n=!1){const r=await this.getAllRegisteredTokenList(t,n),i=await this.getAllRegisteredPoolList(t,n),s=[];for(const o of i){for(const a of r)a.address===o.coin_a_address&&(o.coinA=a),a.address===o.coin_b_address&&(o.coinB=a);s.push(o)}return s}updateCache(t,n,r=lk){let i=this._cache[t];i?(i.overdueTime=Xg(r),i.value=n):i=new Xd(n,Xg(r)),this._cache[t]=i}getCacheData(t){const n=this._cache[t];return n!==void 0&&n.getCacheData()?n.value:null}},fk=3e4,pn={maxAmountOut:Te,isExceed:!1,path:[]};function Zg(e,t){return{pair:`${e}-${t}`,reversePair:`${t}-${e}`}}function hk(e,t,n,r){const i=e.length;if(!e.length)throw new Error("routerTable is empty");if(i!==t.length)throw new Error("routerTable length not equal to feeRateArray length");let s=r?Te:new I(2).pow(new I(64)),o=[];const a=100/(e[0].length-1);switch(i){case 1:{s=e[0][e[0].length-1],n[0][n[0].length-1]||o.push({feeRate:t[0],percent:100});break}case 2:{for(let c=0;c<e[0].length;c+=1){const u=e[0].length-c-1,d=e[0][c].add(e[1][u]);if(d.gt(s)&&r||d.lt(s)&&!r)if(!n[0][c]&&!n[1][u])o=[],s=d,c>0&&o.push({feeRate:t[0],percent:c*a}),u>0&&o.push({feeRate:t[1],percent:u*a});else continue}break}case 3:{for(let c=0;c<e[0].length;c+=1)for(let u=0;u<e[0].length-c;u+=1){const d=e[0].length-c-u-1,l=e[0][c].add(e[1][u]).add(e[2][d]);if(l.gt(s)&&r||l.lt(s)&&!r){if(n[0][c]||n[1][u]||n[2][d])continue;o=[],s=l,c>0&&o.push({feeRate:t[0],percent:a*c}),u>0&&o.push({feeRate:t[1],percent:u*a}),d>0&&o.push({feeRate:t[2],percent:d*a})}}break}case 4:{for(let c=0;c<e[0].length;c+=1)for(let u=0;u<e[0].length-c;u+=1)for(let d=0;d<e[0].length-c-u;d+=1){const l=e[0].length-c-u-d-1,f=e[0][c].add(e[1][u]).add(e[2][d]).add(e[3][l]);if(f.gt(s)&&r||f.lt(s)&&!r){if(n[0][c]||n[1][u]||n[2][d]||n[3][l])continue;o=[],s=f,c>0&&o.push({feeRate:t[0],percent:a*c}),u>0&&o.push({feeRate:t[1],percent:u*a}),d>0&&o.push({feeRate:t[2],percent:d*a}),l>0&&o.push({feeRate:t[3],percent:l*a})}}break}}return o.length===0||s.eq(Te)?{maxAmountOut:Te,path:[],isExceed:!0}:{maxAmountOut:s,path:o,isExceed:!1}}var pk=class{constructor(t){this.pathProviders=[],this.coinProviders={coins:[]},this.graph=new Rw,this._coinSymbolMap=new Map,this._coinAddressMap=new Map,this.poolAddressMap=new Map,this.poolMap=new Map,this.ticksMap=new Map,this._sdk=t,this.leastRefreshTime=Date.now(),this.createTxParams={partitionQuantities:[],swapDirects:[],poolAddresses:[],percents:[],totalAmounts:[],partner:"",amountLimit:"0",amountOut:"0",coinTypes:[]},this.splitUnit=50,this.poolDirectionMap=new Map,this.isInited=!1,this.getPoolAddressMapAndDirection=this.getPoolAddressMapAndDirection.bind(this),this.setCoinList=this.setCoinList.bind(this),this.loadGraph=this.loadGraph.bind(this),this.addCoinProvider=this.addCoinProvider.bind(this),this.addPathProvider=this.addPathProvider.bind(this),this.splitSwap=this.splitSwap.bind(this),this.splitSwapForRouter=this.splitSwapForRouter.bind(this),this.splitSwapForRouters=this.splitSwapForRouters.bind(this),this.refreshPoolofSwapRouter=this.refreshPoolofSwapRouter.bind(this),this.getBestSplitResultInOnePair=this.getBestSplitResultInOnePair.bind(this),this.findBestSplitPriceWithOneSkip=this.findBestSplitPriceWithOneSkip.bind(this),this.findBestSplitPriceWithTwoSkip=this.findBestSplitPriceWithTwoSkip.bind(this),this.findBestSplitPriceWithThreeSkip=this.findBestSplitPriceWithThreeSkip.bind(this),this.findBestSplitPrice=this.findBestSplitPrice.bind(this),this.price=this.price.bind(this),this.routerSwap=this.routerSwap.bind(this)}get sdk(){return this._sdk}getPoolAddressMapAndDirection(t,n){const{pair:r,reversePair:i}=Zg(t,n);let s=this.poolAddressMap.get(r);if(s!=null)return{addressMap:s,direction:!0};if(s=this.poolAddressMap.get(i),s!=null)return{addressMap:s,direction:!1}}async setCoinList(){this.coinProviders.coins.forEach(t=>{this._coinSymbolMap.set(t.symbol,t),this._coinAddressMap.set(t.address,t)})}loadGraph(){return this.pathProviders.forEach(t=>{const{paths:n}=t;n.forEach(r=>{var i,s;const o=(i=this.graph.getVertexByKey(r.base))!=null?i:new pl(r.base),a=(s=this.graph.getVertexByKey(r.quote))!=null?s:new pl(r.quote);this.graph.addEdge(new Bw(o,a));const c=this._coinSymbolMap.get(r.base),u=this._coinSymbolMap.get(r.quote);if(c!=null&&u!=null){const d=Zg(r.base,r.quote).pair;this.poolAddressMap.set(d,r.addressMap)}})}),this}addPathProvider(t){return this.pathProviders.push(t),this}addCoinProvider(t){return this.coinProviders=t,this}tokenInfo(t){return this._coinAddressMap.has(t)?this._coinAddressMap.get(t):this._coinSymbolMap.get(t)}getCreateTxParams(){return this.createTxParams}isPoolDirectionSet(t){return this.poolDirectionMap.get(t)!=null}getPoolDirection(t){if(this.isPoolDirectionSet(t))return this.poolDirectionMap.get(t)}setPoolDirection(t,n){this.poolDirectionMap.set(t,n)}getBestSplitResultInOnePair(t,n,r,i,s,o){if(i.eq(Te))return{maxAmountOut:Te,path:[],isExceed:!1};console.log(i.toString());const a=[],c=[],u=[],d=this.getPoolAddressMapAndDirection(n,r),l=d==null?void 0:d.addressMap;if(l)for(const[f,p]of l.entries()){const _=this.poolMap.get(p),y=this.poolDirectionMap.get(p),b=s===y,B=this.ticksMap.get(p),x=new ok(i,t,_,b,o,B).computeSwap();o?a.push(x.amountOutArray):a.push(x.amountInArray),u.push(x.isExceed),c.push(f)}return hk(a.slice(0,4),c.slice(0,4),u.slice(0,4),o)}findBestSplitPriceWithOneSkip(t,n,r,i,s){const o={maxAmountOut:new I(0),path:[],poolAddresses:[],totalAmounts:[],percents:[],isExceed:!1},a=[],c=[],u=[],d=[];if(!s){let p=pn,_=pn;if(i){if(p=this.getBestSplitResultInOnePair(50,t[0][0],t[0][1],n,r[0][0],i),p.isExceed||(_=this.getBestSplitResultInOnePair(5,t[0][2],t[0][3],p.maxAmountOut,r[0][1],i),_.isExceed))return o.isExceed=!0,o;o.maxAmountOut=_.maxAmountOut}else{if(_=this.getBestSplitResultInOnePair(5,t[0][2],t[0][3],n,r[0][1],i),_.isExceed||(p=this.getBestSplitResultInOnePair(5,t[0][0],t[0][1],_.maxAmountOut,r[0][0],i),p.isExceed))return o.isExceed=!0,o;o.maxAmountOut=p.maxAmountOut}a.push(p.path),a.push([]),a.push(_.path);const y=[],b=[],B=[];p.path.forEach(P=>{var C;i?y.push(n.muln(P.percent).divn(100)):y.push(_.maxAmountOut.muln(P.percent).divn(100)),B.push(P.percent);const G=(C=this.getPoolAddressMapAndDirection(t[0][0],t[0][1]))==null?void 0:C.addressMap.get(P.feeRate);b.push(G)});const E=[],x=[],S=[];_.path.forEach(P=>{var C;i?E.push(p.maxAmountOut.muln(P.percent).divn(100)):E.push(n.muln(P.percent).divn(100)),S.push(P.percent);const G=(C=this.getPoolAddressMapAndDirection(t[0][2],t[0][3]))==null?void 0:C.addressMap.get(P.feeRate);x.push(G)});let T=Te;y.forEach(P=>{T=T.add(P)});const R=Te;return E.forEach(P=>{R.add(P)}),c.push(T.toString()),c.push(Te.toString()),u.push(B),u.push([]),u.push(S),d.push(b),d.push([]),d.push(x),o.totalAmounts=c,o.path=a,o.percents=u,o.poolAddresses=d,i?o.maxAmountOut=_.maxAmountOut:o.maxAmountOut=p.maxAmountOut,o.path.length||(o.isExceed=!0),o}let l=Te;i||(l=new I(2).pow(new I(64)));const f=Zu(n,this.splitUnit);for(let p=0;p<f.length;p+=1){const _=this.getBestSplitResultInOnePair(50,t[0][0],t[0][1],f[p],r[0][0],i);if(_.isExceed)continue;let y=pn,b=pn;if(i){if(y=this.getBestSplitResultInOnePair(50,t[1][0],t[1][1],f[f.length-p-1],r[1][0],i),y.isExceed||(b=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],y.maxAmountOut,r[1][1],i),b.isExceed))continue}else if(b=this.getBestSplitResultInOnePair(50,t[1][2],t[1][3],f[f.length-p-1],r[1][1],i),b.isExceed||(y=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],b.maxAmountOut,r[1][0],i),y.isExceed))continue;const B=[],E=[],x=[];_.path.forEach(k=>{var h;B.push(n.muln(p*this.splitUnit).divn(100).muln(k.percent).divn(100)),x.push(k.percent);const g=(h=this.getPoolAddressMapAndDirection(t[0][0],t[0][1]))==null?void 0:h.addressMap.get(k.feeRate);E.push(g)});const S=[],T=[],R=[];y.path.forEach(k=>{var h;i?S.push(n.muln((f.length-p-1)*this.splitUnit).divn(100).muln(k.percent).divn(100)):S.push(b.maxAmountOut.muln(k.percent).divn(100)),R.push(k.percent);const g=(h=this.getPoolAddressMapAndDirection(t[1][0],t[1][1]))==null?void 0:h.addressMap.get(k.feeRate);T.push(g)});const P=[],C=[],G=[];b.path.forEach(k=>{var h;i?P.push(y.maxAmountOut.muln(k.percent).divn(100)):P.push(n.muln((f.length-p-1)*this.splitUnit).divn(100).muln(k.percent).divn(100)),G.push(k.percent);const g=(h=this.getPoolAddressMapAndDirection(t[1][2],t[1][3]))==null?void 0:h.addressMap.get(k.feeRate);C.push(g)});const F=[],U=[],N=[];if(b.maxAmountOut.add(_.maxAmountOut).gt(l)||y.maxAmountOut.add(_.maxAmountOut).lt(l)){i?l=b.maxAmountOut.add(_.maxAmountOut):l=y.maxAmountOut.add(_.maxAmountOut);let k=Te;B.forEach(g=>{k=k.add(g)});const h=Te;S.forEach(g=>{h.add(g)}),F.push(y.path),F.push(_.path),F.push(b.path),U.push(h.toString()),U.push(k.toString()),u.push(R),u.push(x),u.push(G),N.push(T),N.push(E),N.push(C),o.maxAmountOut=l,o.path=F,o.totalAmounts=U,o.percents=u,o.poolAddresses=N,o.path.length||(o.isExceed=!0)}}return o}findBestSplitPriceWithTwoSkip(t,n,r,i,s){const o={maxAmountOut:Te,path:[],totalAmounts:[],percents:[],poolAddresses:[],isExceed:!1},a=Zu(n,this.splitUnit);let c=Te;if(i||(c=new I(2).pow(new I(64))),!s){for(let u=0;u<a.length;u+=1){let d=pn,l=pn,f=pn,p=pn;if(i){if(d=this.getBestSplitResultInOnePair(5,t[0][0],t[0][1],a[u],r[1][0],i),d.isExceed||(l=this.getBestSplitResultInOnePair(5,t[0][2],t[0][3],d.maxAmountOut,r[1][1],i),l.isExceed)||(f=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],a[a.length-u-1],r[1][0],i),f.isExceed)||(p=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],f.maxAmountOut,r[1][1],i),p.isExceed))continue}else if(l=this.getBestSplitResultInOnePair(5,t[0][2],t[0][3],a[u],r[1][1],i),l.isExceed||(d=this.getBestSplitResultInOnePair(5,t[0][0],t[0][1],l.maxAmountOut,r[1][0],i),d.isExceed)||(p=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],a[a.length-u-1],r[1][1],i),p.isExceed)||(f=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],p.maxAmountOut,r[1][0],i),f.isExceed))continue;const _=[],y=[],b=[];d.path.forEach(h=>{var g;i?_.push(n.muln(u*this.splitUnit).divn(100).muln(h.percent).divn(100)):_.push(l.maxAmountOut.muln(h.percent).divn(100)),b.push(h.percent);const v=(g=this.getPoolAddressMapAndDirection(t[0][0],t[0][1]))==null?void 0:g.addressMap.get(h.feeRate);y.push(v)});const B=[],E=[],x=[];l.path.forEach(h=>{var g;i?B.push(d.maxAmountOut.muln(h.percent).divn(100)):B.push(n.muln(u*this.splitUnit).divn(100).muln(h.percent).divn(100)),x.push(h.percent);const v=(g=this.getPoolAddressMapAndDirection(t[0][2],t[0][3]))==null?void 0:g.addressMap.get(h.feeRate);E.push(v)});const S=[],T=[],R=[];f.path.forEach(h=>{var g;i?S.push(n.muln((a.length-u-1)*this.splitUnit).divn(100).muln(h.percent).divn(100)):S.push(p.maxAmountOut.muln(h.percent).divn(100)),R.push(h.percent);const v=(g=this.getPoolAddressMapAndDirection(t[1][0],t[1][1]))==null?void 0:g.addressMap.get(h.feeRate);T.push(v)});const P=[],C=[],G=[];p.path.forEach(h=>{var g;i?P.push(f.maxAmountOut.muln(h.percent).divn(100)):P.push(n.muln((a.length-u-1)*this.splitUnit).divn(100).muln(h.percent).divn(100)),G.push(h.percent);const v=(g=this.getPoolAddressMapAndDirection(t[1][1],t[1][2]))==null?void 0:g.addressMap.get(h.feeRate);C.push(v)});const F=[],U=[],N=[],k=[];if(l.maxAmountOut.add(p.maxAmountOut).gt(c)&&i||!i&&d.maxAmountOut.add(f.maxAmountOut).lt(c)){i?c=l.maxAmountOut.add(p.maxAmountOut):c=d.maxAmountOut.add(f.maxAmountOut);let h=Te;_.forEach(v=>{h=h.add(v)});let g=Te;S.forEach(v=>{g=g.add(v)}),F.push(d.path),F.push(l.path),F.push([]),F.push(f.path),F.push(p.path),U.push(h.toString()),U.push(g.toString()),U.push(Te.toString()),k.push(b),k.push(R),k.push([]),k.push(x),k.push(G),N.push(y),N.push(T),N.push([]),N.push(E),N.push(C),o.maxAmountOut=c,o.percents=k,o.totalAmounts=U,o.path=F,o.poolAddresses=N}}return o.path.length||(o.isExceed=!0),o}for(let u=0;u<a.length;u+=1)for(let d=0;d<a.length-u-1;d+=1){const l=a.length-u-d-1,f=this.getBestSplitResultInOnePair(5,t[0][0],t[0][1],a[l],r[0][0],i);if(f.isExceed)continue;let p=pn,_=pn,y=pn,b=pn;if(i){if(p=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],a[d],r[1][0],i),p.isExceed||(_=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],p.maxAmountOut,r[1][1],i),_.isExceed)||(y=this.getBestSplitResultInOnePair(5,t[2][0],t[2][1],a[u],r[2][0],i),y.isExceed)||(b=this.getBestSplitResultInOnePair(5,t[2][2],t[2][3],y.maxAmountOut,r[2][1],i),b.isExceed))continue}else if(_=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],a[d],r[1][1],i),_.isExceed||(p=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],_.maxAmountOut,r[1][0],i),p.isExceed)||(b=this.getBestSplitResultInOnePair(5,t[2][2],t[2][3],a[u],r[2][1],i),b.isExceed)||(y=this.getBestSplitResultInOnePair(5,t[2][0],t[2][1],b.maxAmountOut,r[2][0],i),y.isExceed))continue;const B=[],E=[],x=[];p.path.forEach($=>{var w;i?B.push(n.muln(d*this.splitUnit).divn(100).muln($.percent).divn(100)):B.push(_.maxAmountOut.muln($.percent).divn(100)),x.push($.percent);const H=(w=this.getPoolAddressMapAndDirection(t[1][0],t[1][1]))==null?void 0:w.addressMap.get($.feeRate);E.push(H)});const S=[],T=[],R=[];_.path.forEach($=>{var w;i?S.push(p.maxAmountOut.muln($.percent).divn(100)):S.push(n.muln(d*this.splitUnit).divn(100).muln($.percent).divn(100)),R.push($.percent);const H=(w=this.getPoolAddressMapAndDirection(t[1][2],t[1][3]))==null?void 0:w.addressMap.get($.feeRate);T.push(H)});const P=[],C=[],G=[];y.path.forEach($=>{var w;i?P.push(n.muln(u*this.splitUnit).divn(100).muln($.percent).divn(100)):P.push(b.maxAmountOut.muln($.percent).divn(100)),G.push($.percent);const H=(w=this.getPoolAddressMapAndDirection(t[2][0],t[2][1]))==null?void 0:w.addressMap.get($.feeRate);C.push(H)});const F=[],U=[],N=[];b.path.forEach($=>{var w;i?F.push(y.maxAmountOut.muln($.percent).divn(100)):F.push(n.muln(u*this.splitUnit).divn(100).muln($.percent).divn(100)),N.push($.percent);const H=(w=this.getPoolAddressMapAndDirection(t[2][2],t[2][3]))==null?void 0:w.addressMap.get($.feeRate);U.push(H)});const k=[],h=[],g=[];f.path.forEach($=>{var w;k.push(n.muln(l*this.splitUnit).divn(100).muln($.percent).divn(100)),g.push($.percent);const H=(w=this.getPoolAddressMapAndDirection(t[0][0],t[0][1]))==null?void 0:w.addressMap.get($.feeRate);h.push(H)});let v=Te;i?v=f.maxAmountOut.add(_.maxAmountOut).add(b.maxAmountOut):v=f.maxAmountOut.add(p.maxAmountOut).add(y.maxAmountOut);const O=[],L=[],z=[],W=[];if(v.gt(c)&&i||v.lt(c)&&!i){let $=Te;B.forEach(re=>{$=$.add(re)});let w=Te;P.forEach(re=>{w=w.add(re)});let H=Te;k.forEach(re=>{H=H.add(re)}),c=v,O.push(p.path),O.push(y.path),O.push(f.path),O.push(_.path),O.push(b.path),L.push($.toString()),L.push(w.toString()),L.push(H.toString()),z.push(x),z.push(G),z.push(g),z.push(R),z.push(N),W.push(E),W.push(C),W.push(h),W.push(T),W.push(U),o.maxAmountOut=v,o.path=O,o.totalAmounts=L,o.poolAddresses=W,o.percents=z}}return o.path.length||(o.isExceed=!0),o}findBestSplitPriceWithThreeSkip(t,n,r,i,s){const o={maxAmountOut:new I(0),path:[],totalAmounts:[],percents:[],poolAddresses:[],isExceed:!1};let a=Te;i||(a=new I(2).pow(new I(64)));const c=Zu(n,this.splitUnit);for(let u=0;u<c.length;u+=1)for(let d=0;d<c.length-u-1;d+=1)if(s)for(let l=0;l<c.length-u-d-1;l+=1){const f=c.length-u-d-l-1,p=this.getBestSplitResultInOnePair(5,t[0][0],t[0][1],c[l],r[0][0],i);let _=pn,y=pn,b=pn,B=pn,E=pn,x=pn;if(i){if(_=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],c[d],r[1][0],i),_.isExceed||(y=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],_.maxAmountOut,r[1][1],i),y.isExceed)||(b=this.getBestSplitResultInOnePair(5,t[2][0],t[2][1],c[u],r[2][0],i),b.isExceed)||(B=this.getBestSplitResultInOnePair(5,t[2][2],t[2][3],b.maxAmountOut,r[2][1],i),B.isExceed)||(E=this.getBestSplitResultInOnePair(5,t[3][0],t[3][1],c[f],r[3][0],i),E.isExceed)||(x=this.getBestSplitResultInOnePair(5,t[3][2],t[3][3],E.maxAmountOut,r[3][1],i),x.isExceed))continue}else if(y=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],c[d],r[1][1],i),y.isExceed||(_=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],y.maxAmountOut,r[1][0],i),_.isExceed)||(B=this.getBestSplitResultInOnePair(5,t[2][2],t[2][3],c[u],r[2][1],i),B.isExceed)||(b=this.getBestSplitResultInOnePair(5,t[2][0],t[2][1],B.maxAmountOut,r[2][0],i),b.isExceed)||(x=this.getBestSplitResultInOnePair(5,t[3][2],t[3][3],c[f],r[3][1],i),x.isExceed)||(E=this.getBestSplitResultInOnePair(5,t[3][0],t[3][1],x.maxAmountOut,r[3][0],i),E.isExceed))continue;const S=[],T=[],R=[];_.path.forEach(j=>{var K;i?S.push(n.muln(d*this.splitUnit).divn(100).muln(j.percent).divn(100)):S.push(y.maxAmountOut.muln(j.percent).divn(100)),R.push(j.percent);const Y=(K=this.getPoolAddressMapAndDirection(t[1][0],t[1][1]))==null?void 0:K.addressMap.get(j.feeRate);T.push(Y)});const P=[],C=[],G=[];y.path.forEach(j=>{var K;i?P.push(_.maxAmountOut.muln(j.percent).divn(100)):P.push(n.muln(d*this.splitUnit).divn(100).muln(j.percent).divn(100)),G.push(j.percent);const Y=(K=this.getPoolAddressMapAndDirection(t[1][2],t[1][3]))==null?void 0:K.addressMap.get(j.feeRate);C.push(Y)});const F=[],U=[],N=[];b.path.forEach(j=>{var K;i?F.push(n.muln(u*this.splitUnit).divn(100).muln(j.percent).divn(100)):F.push(B.maxAmountOut.muln(j.percent).divn(100)),N.push(j.percent);const Y=(K=this.getPoolAddressMapAndDirection(t[2][0],t[2][1]))==null?void 0:K.addressMap.get(j.feeRate);U.push(Y)});const k=[],h=[],g=[];B.path.forEach(j=>{var K;i?k.push(b.maxAmountOut.muln(j.percent).divn(100)):k.push(n.muln(u*this.splitUnit).divn(100).muln(j.percent).divn(100)),g.push(j.percent);const Y=(K=this.getPoolAddressMapAndDirection(t[2][2],t[2][3]))==null?void 0:K.addressMap.get(j.feeRate);h.push(Y)});const v=[],O=[],L=[];E.path.forEach(j=>{var K;i?v.push(n.muln(f*this.splitUnit).divn(100).muln(j.percent).divn(100)):v.push(x.maxAmountOut.muln(j.percent).divn(100)),L.push(j.percent);const Y=(K=this.getPoolAddressMapAndDirection(t[3][0],t[3][1]))==null?void 0:K.addressMap.get(j.feeRate);O.push(Y)});const z=[],W=[],$=[];x.path.forEach(j=>{var K;i?z.push(E.maxAmountOut.muln(j.percent).divn(100)):z.push(n.muln(f*this.splitUnit).divn(100).muln(j.percent).divn(100)),$.push(j.percent);const Y=(K=this.getPoolAddressMapAndDirection(t[3][2],t[3][3]))==null?void 0:K.addressMap.get(j.feeRate);W.push(Y)});const w=[],H=[],re=[];p.path.forEach(j=>{var K;w.push(n.muln(l*this.splitUnit).divn(100).muln(j.percent).divn(100)),re.push(j.percent);const Y=(K=this.getPoolAddressMapAndDirection(t[0][0],t[0][1]))==null?void 0:K.addressMap.get(j.feeRate);H.push(Y)});let Q=Te;i?Q=p.maxAmountOut.add(y.maxAmountOut).add(B.maxAmountOut).add(x.maxAmountOut):Q=p.maxAmountOut.add(_.maxAmountOut).add(b.maxAmountOut).add(E.maxAmountOut);const ce=[],Be=[],Ue=[],J=[];if(Q.gt(a)&&i||!i&&Q.lt(a)){let j=Te;S.forEach(ue=>{j=j.add(ue)});let K=Te;F.forEach(ue=>{K=K.add(ue)});let Y=Te;v.forEach(ue=>{Y=Y.add(ue)});let ne=Te;w.forEach(ue=>{ne=ne.add(ue)}),a=Q,ce.push(_.path),ce.push(b.path),ce.push(E.path),ce.push(p.path),ce.push(y.path),ce.push(B.path),ce.push(x.path),Be.push(j.toString()),Be.push(K.toString()),Be.push(Y.toString()),Be.push(ne.toString()),Ue.push(R),Ue.push(N),Ue.push(L),Ue.push(re),Ue.push(G),Ue.push(g),Ue.push($),J.push(T),J.push(U),J.push(O),J.push(H),J.push(C),J.push(h),J.push(W),o.maxAmountOut=Q,o.path=ce,o.totalAmounts=Be,o.percents=Ue,o.poolAddresses=J}}else{const l=c.length-u-d-1;let f=pn,p=pn,_=pn,y=pn,b=pn,B=pn;if(i){if(f=this.getBestSplitResultInOnePair(5,t[0][0],t[0][1],c[d],r[0][0],i),f.isExceed||(p=this.getBestSplitResultInOnePair(5,t[0][2],t[0][3],f.maxAmountOut,r[0][1],i),p.isExceed)||(_=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],c[u],r[1][0],i),_.isExceed)||(y=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],_.maxAmountOut,r[1][1],i),y.isExceed)||(b=this.getBestSplitResultInOnePair(5,t[2][0],t[2][1],c[l],r[2][0],i),b.isExceed)||(B=this.getBestSplitResultInOnePair(5,t[2][2],t[2][3],_.maxAmountOut,r[2][1],i),B.isExceed))continue}else if(p=this.getBestSplitResultInOnePair(5,t[0][2],t[0][3],c[d],r[0][1],i),p.isExceed||(f=this.getBestSplitResultInOnePair(5,t[0][0],t[0][1],p.maxAmountOut,r[0][0],i),f.isExceed)||(y=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],c[u],r[1][1],i),y.isExceed)||(_=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],y.maxAmountOut,r[1][0],i),_.isExceed)||(B=this.getBestSplitResultInOnePair(5,t[2][2],t[2][3],c[l],r[2][1],i),B.isExceed)||(b=this.getBestSplitResultInOnePair(5,t[2][0],t[2][1],y.maxAmountOut,r[2][0],i),b.isExceed))continue;const E=[],x=[],S=[];f.path.forEach(Q=>{var ce;i?E.push(n.muln(d*this.splitUnit).divn(100).muln(Q.percent).divn(100)):E.push(p.maxAmountOut.muln(Q.percent).divn(100)),S.push(Q.percent);const Be=(ce=this.getPoolAddressMapAndDirection(t[0][0],t[0][1]))==null?void 0:ce.addressMap.get(Q.feeRate);x.push(Be)});const T=[],R=[],P=[];p.path.forEach(Q=>{var ce;i?T.push(f.maxAmountOut.muln(Q.percent).divn(100)):T.push(n.muln(d*this.splitUnit).divn(100).muln(Q.percent).divn(100)),P.push(Q.percent);const Be=(ce=this.getPoolAddressMapAndDirection(t[0][2],t[0][3]))==null?void 0:ce.addressMap.get(Q.feeRate);R.push(Be)});const C=[],G=[],F=[];_.path.forEach(Q=>{var ce;i?C.push(n.muln(u*this.splitUnit).divn(100).muln(Q.percent).divn(100)):C.push(y.maxAmountOut.muln(Q.percent).divn(100)),F.push(Q.percent);const Be=(ce=this.getPoolAddressMapAndDirection(t[1][0],t[1][1]))==null?void 0:ce.addressMap.get(Q.feeRate);G.push(Be)});const U=[],N=[],k=[];y.path.forEach(Q=>{var ce;i?U.push(_.maxAmountOut.muln(Q.percent).divn(100)):U.push(n.muln(u*this.splitUnit).divn(100).muln(Q.percent).divn(100)),k.push(Q.percent);const Be=(ce=this.getPoolAddressMapAndDirection(t[1][2],t[1][3]))==null?void 0:ce.addressMap.get(Q.feeRate);N.push(Be)});const h=[],g=[],v=[];b.path.forEach(Q=>{var ce;i?h.push(n.muln(l*this.splitUnit).divn(100).muln(Q.percent).divn(100)):h.push(B.maxAmountOut.muln(Q.percent).divn(100)),v.push(Q.percent);const Be=(ce=this.getPoolAddressMapAndDirection(t[2][0],t[2][1]))==null?void 0:ce.addressMap.get(Q.feeRate);g.push(Be)});const O=[],L=[],z=[];B.path.forEach(Q=>{var ce;i?O.push(b.maxAmountOut.muln(Q.percent).divn(100)):O.push(n.muln(l*this.splitUnit).divn(100).muln(Q.percent).divn(100)),z.push(Q.percent);const Be=(ce=this.getPoolAddressMapAndDirection(t[2][2],t[2][3]))==null?void 0:ce.addressMap.get(Q.feeRate);L.push(Be)});const W=[],$=[],w=[],H=[];let re=Te;if(i?re=p.maxAmountOut.add(y.maxAmountOut).add(B.maxAmountOut):re=f.maxAmountOut.add(_.maxAmountOut).add(b.maxAmountOut),re.gt(a)&&i||re.lt(a)&&!i){let Q=Te;E.forEach(Ue=>{Q=Q.add(Ue)});let ce=Te;C.forEach(Ue=>{ce=ce.add(Ue)});let Be=Te;h.forEach(Ue=>{Be=Be.add(Ue)}),a=re,W.push(f.path),W.push(_.path),W.push(b.path),W.push([]),W.push(p.path),W.push(y.path),W.push(B.path),$.push(Q.toString()),$.push(ce.toString()),$.push(Be.toString()),$.push(Te.toString()),w.push(S),w.push(F),w.push(v),w.push([]),w.push(P),w.push(k),w.push(z),H.push(x),H.push(G),H.push(g),H.push([]),H.push(R),H.push(N),H.push(L),o.maxAmountOut=re,o.path=W,o.percents=w,o.totalAmounts=$,o.poolAddresses=H}}return o.path.length||(o.isExceed=!0),o}findBestSplitPrice(t,n,r,i,s,o){var a,c,u,d;let l=t.length,f=!1;t[0].length===2&&(f=!0,l-=1);let p={maxAmountOut:Te,path:[],poolAddresses:[],totalAmounts:[],percents:[],isExceed:!1},_={maxAmountOut:Te,path:[],isExceed:!1};const y=[],b=[];let B=Te;const E=[];switch(console.log(l,"skipNumber"),l){case 0:_=this.getBestSplitResultInOnePair(50,t[0][0],t[0][1],n,r[0][0],i),p.maxAmountOut=_.maxAmountOut,p.path.push(_.path),_.path.forEach(C=>{var G;const F=(G=this.getPoolAddressMapAndDirection(t[0][0],t[0][1]))==null?void 0:G.addressMap.get(C.feeRate);y.push(F);const U=n.muln(C.percent).divn(100);b.push(U),E.push(C.percent)}),b.forEach(C=>{B=B.add(C)}),p.percents.push(E),p.totalAmounts.push(B.toString()),p.poolAddresses.push(y);break;case 1:p=this.findBestSplitPriceWithOneSkip(t,n,r,i,f);break;case 2:p=this.findBestSplitPriceWithTwoSkip(t,n,r,i,f);break;case 3:p=this.findBestSplitPriceWithThreeSkip(t,n,r,i,f);break}if(p.isExceed)return p;const x=[];for(let C=0;C<p.path.length;C+=1){const{length:G}=p.path[C];x.push(G)}const S=[];if(l!==0)if(f){for(let G=1;G<1+l;G+=1){const F=[];if(x[G-1]>0)for(let U=0;U<x[G-1];U+=1)F.push(r[G][0]);S.push(F)}const C=[];for(let G=0;G<x[l];G+=1)if(x[l]>0)for(let F=0;F<x[l];F+=1)C.push(r[0][0]);S.push(C);for(let G=1;G<1+l;G+=1){const F=[];if(x[G+l]>0)for(let U=0;U<x[G+l];U+=1)F.push(r[G][1]);S.push(F)}}else{for(let C=0;C<l;C+=1){const G=[];if(x[C]>0)for(let F=0;F<x[C];F+=1)G.push(r[C][0]);S.push(G)}S.push([]);for(let C=0;C<l;C+=1){const G=[];if(x[C+l+1]>0)for(let F=0;F<x[C+l+1];F+=1)G.push(r[C][1]);S.push(G)}}else S.push([r[0][0]]);for(let C=0;C<p.poolAddresses.length;C+=1)for(let G=0;G<p.poolAddresses[C].length;G+=1){const F=this.getPoolDirection(p.poolAddresses[C][G]);F&&(S[C][G]=S[C][G]&&F)}const T=[],R=(a=this._coinSymbolMap.get(t[0][0]))==null?void 0:a.address;T.push(R);for(let C=0;C<t.length;C+=1)if(t[C].length!==2){const G=(c=this._coinSymbolMap.get(t[C][1]))==null?void 0:c.address;T.push(G)}if(t[0].length===2){const C=(u=this._coinSymbolMap.get(t[0][1]))==null?void 0:u.address;T.push(C)}else{const C=(d=this._coinSymbolMap.get(t[0][t[0].length-1]))==null?void 0:d.address;T.push(C)}const P=i?p.maxAmountOut.muln((1-s)*1e5).divn(1e5).toString():p.maxAmountOut.muln((1+s)*1e5).divn(1e5).toString();return this.createTxParams={partitionQuantities:x,swapDirects:S,poolAddresses:p.poolAddresses,totalAmounts:p.totalAmounts,percents:p.percents,amountLimit:P,amountOut:n.toString(),partner:o,coinTypes:T},p}async price(t,n,r,i,s,o){var a,c;const u=this.tokenInfo(t),d=this.tokenInfo(n);if(u===void 0||d===void 0)return;const l=this.graph.getVertexByKey(u.symbol),f=this.graph.getVertexByKey(d.symbol),p=this.graph.findAllPath(l,f),_=Array.from(p),y=[],b=[],B=[];for(let E=0;E<_.length;E+=1){const x=_[E];if(x.length>3)continue;const S=[],T=[];for(let R=0;R<x.length-1;R+=1){const P=x[R].value.toString(),C=x[R+1].value.toString(),G=(a=this.getPoolAddressMapAndDirection(P,C))==null?void 0:a.addressMap,F=(c=this.getPoolAddressMapAndDirection(P,C))==null?void 0:c.direction;G!==void 0&&F!==void 0&&(T.push(F),S.push(P),S.push(C),G.forEach(U=>{y.push(U)}))}if(B.push(T),b.push(S),S.length===2&&b.length>1){const R=b[0].slice();b[0]=S,b[b.length-1]=R;const P=B[0].slice();B[0]=T,B[b.length-1]=P}}return await this.refreshPoolofSwapRouter(y),this.findBestSplitPrice(b,r,B,i,s,o)}async routerSwap(t,n,r,i,s,o){const a=await this.price(t,n,r,i,s,o),c=this.getCreateTxParams();if(a.isExceed)return{maxAmountOut:a.maxAmountOut,path:a.path,poolAddresses:a.poolAddresses,percents:a.percents,totalAmounts:a.totalAmounts,isExceed:a.isExceed,totalPercents:[],showRouters:[],gasFee:0};const u=this.splitSwapForRouters(c,i,!0),{simulationAccount:d}=this.sdk.sdkOptions.networkOptions,l=new Vt(this.sdk.sdkOptions.rpcUrl),f=Ta(d.address),p=await l.generateRawTransaction(f,u),_=Ta(d.pubkey),y=new V.Ed25519PublicKey(_.toUint8Array()),b=await l.simulateTransaction(y,p),B=b[0].gas_used,E=b[0].gas_unit_price,x=parseInt(B,10)*parseInt(E,10),S=[];let T=Te;a.totalAmounts.forEach(P=>{T=T.add(new I(P))}),a.totalAmounts.forEach(P=>{let C;T.isZero()?C=0:C=Number(P)/Number(T.toString())*100,S.push(C)});const R=[];for(let P=0;P<a.totalAmounts.length;P+=1){const C={amount:a.totalAmounts[P],poolAddress:[]};P===Math.floor(a.poolAddresses.length/2)?a.poolAddresses[P].length>0&&(C.poolAddress.push(a.poolAddresses[P]),R.unshift(C)):a.poolAddresses[P].length>0&&(C.poolAddress.push(a.poolAddresses[P],a.poolAddresses[P+Math.floor(a.poolAddresses.length/2)+1]),R.push(C))}return{maxAmountOut:a.maxAmountOut,path:a.path,poolAddresses:a.poolAddresses,percents:a.percents,totalAmounts:a.totalAmounts,isExceed:a.isExceed,totalPercents:S,showRouters:R,gasFee:x}}splitSwap(t,n,r=!1){const{modules:i}=this.sdk.sdkOptions.networkOptions,s=`${i.ClmmIntegrate}::${B0}`,o=n?"exact_input_split_swap":"exact_output_split_swap",a=[];t.poolAddresses.forEach(f=>{const p=[];f.forEach(_=>{p.push(V.AccountAddress.fromHex(_))}),a.push(p)});const c=[ae.bcsSerializeUint64(t.partitionQuantities[0]),ae.serializeVectorWithFunc(t.swapDirects[0],"serializeBool"),Q7(a[0]),ae.serializeVectorWithFunc(t.percents[0],"serializeU64"),ae.bcsSerializeUint64(parseInt(t.totalAmounts[0],10)),ae.bcsSerializeUint64(parseInt(t.amountLimit,10)),ae.bcsSerializeStr(t.partner)];if(r){const f=[];for(const p of t.coinTypes){const _=new V.TypeTagStruct(V.StructTag.fromString(p));f.push(_)}return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(s,o,f,c))}const u=ht(s,o),d=t.coinTypes,l=[t.partitionQuantities[0],t.swapDirects[0],t.poolAddresses[0],t.percents[0],t.totalAmounts[0],t.amountLimit,t.partner];return{type:"entry_function_payload",function:u,type_arguments:d,arguments:l}}splitSwapForRouter(t,n,r,i=!1){const{modules:s}=this.sdk.sdkOptions.networkOptions,o=`${s.ClmmIntegrate}::${B0}`,a=[];t.poolAddresses.forEach(f=>{const p=[];f.forEach(_=>{p.push(V.AccountAddress.fromHex(_))}),a.push(p)});const c=[ae.serializeVectorWithFunc(t.partitionQuantities,"serializeU64"),Vg(t.swapDirects,"serializeBool"),Y7(a),Vg(t.percents,"serializeU64"),ae.serializeVectorWithFunc(t.totalAmounts,"serializeU64"),ae.bcsSerializeUint64(parseInt(t.amountLimit,10)),ae.bcsSerializeStr(t.partner)];if(i){const f=[];for(const p of t.coinTypes){const _=new V.TypeTagStruct(V.StructTag.fromString(p));f.push(_)}return new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(o,r,f,c))}const u=[t.partitionQuantities,t.swapDirects,t.poolAddresses,t.percents,t.totalAmounts,t.amountLimit,t.partner],d=ht(o,r),l=t.coinTypes;return{type:"entry_function_payload",function:d,type_arguments:l,arguments:u}}splitSwapForRouters(t,n,r=!1){const{length:i}=t.partitionQuantities;let s;switch(i){case 3:n?s="exact_input_split_swap_for_router_three":s="exact_output_split_swap_for_router_three";break;case 5:n?s="exact_input_split_swap_for_router_four":s="exact_output_split_swap_for_router_four";break;case 7:n?s="exact_input_split_swap_for_router_five":s="exact_output_split_swap_for_router_five";break;default:return this.splitSwap(t,n,r)}return this.splitSwapForRouter(t,n,s,r)}findUnFetchPools(t){const n=[];for(const r of t)this.poolMap.get(r)==null&&n.push(r);return n}async refreshPoolofSwapRouter(t){var n,r,i;const s=Date.now();if(this.isInited){const a=this.findUnFetchPools(t);if(s-this.leastRefreshTime<fk&&a.length===0)return}else this.isInited=!0;const o=await this._sdk.Resources.getPools(t);for(let a=0;a<t.length;a+=1)if(this.poolMap.set(o[a].poolAddress,o[a]),this.getPoolDirection(o[a].poolAddress)==null){const c=(n=this._coinAddressMap.get(o[a].coinTypeA))==null?void 0:n.symbol,u=(r=this._coinAddressMap.get(o[a].coinTypeB))==null?void 0:r.symbol,d=(i=this.getPoolAddressMapAndDirection(c,u))==null?void 0:i.direction;this.poolDirectionMap.set(o[a].poolAddress,d);const l=await this._sdk.Fetcher.fetchTicks({pool:o[a].poolAddress,coinTypeA:o[a].coinTypeA,coinTypeB:o[a].coinTypeB}),f=qw(l);this.ticksMap.set(o[a].poolAddress,f)}this.leastRefreshTime=s}},gk=class{constructor(e){this._sdk=e}get sdk(){return this._sdk}transformTickData(e){const t=[],{modules:n}=this._sdk.sdkOptions.networkOptions,r=e.filter(o=>o.type!=="write_resource"?!1:o.data.type===`${n.FetcherDeployer}::fetcher::FetchTicksResult`);if(r.length===0)return{ticks:t,index:0,offset:0};const s=r[0].data.data;return{ticks:s.ticks||[],index:Number(s.index),offset:Number(s.offset)}}async getTicks(e){const{modules:t,simulationAccount:n}=this.sdk.sdkOptions.networkOptions,r=new Vt(this.sdk.sdkOptions.rpcUrl),i=`${t.FetcherDeployer}::scripts`,s="fetch_ticks",o=[new V.TypeTagStruct(V.StructTag.fromString(e.coinTypeA)),new V.TypeTagStruct(V.StructTag.fromString(e.coinTypeB))],a=[ae.bcsToBytes(V.AccountAddress.fromHex(e.pool)),ae.bcsSerializeUint64(e.index),ae.bcsSerializeUint64(e.offset),ae.bcsSerializeUint64(e.limit)],c=new V.TransactionPayloadEntryFunction(V.EntryFunction.natural(i,s,o,a)),u=Ta(n.address),d=await r.generateRawTransaction(u,c),l=Ta(n.pubkey),f=new V.Ed25519PublicKey(l.toUint8Array()),p=await r.simulateTransaction(f,d);return this.transformTickData(p[0].changes)}async fetchTicks(e){let t=[],n=0,r=0;const i=512;for(;;){const s=await this.getTicks({pool:e.pool,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,index:n,offset:r,limit:i});if(t=[...t,...s.ticks],s.ticks.length<i)break;s.offset<999?(r=s.offset+1,n=s.index):(n=s.index+1,r=0)}return t}},yk=class{constructor(e){this.globalConfig={protocol_fee_rate:"",is_pause:!1},this._sdkOptions=e,this._client=new Vt(e.rpcUrl),this._tokenClient=new zA(this._client),this._swap=new q7(this),this._position=new N7(this),this._resources=new z7(this),this._pool=new j7(this),this._rewarder=new uk(this),this._router=new pk(this),this._token=new dk(this),this._fetcher=new gk(this),this._launchpad=new tk(this),this.globalConfig.protocol_fee_rate=""}async getGlobalConfig(e=!1){return(this.globalConfig.protocol_fee_rate.length===0||e)&&(this.globalConfig=await this._resources.getGlobalConfig(this._sdkOptions.networkOptions.modules.LiquidswapDeployer)),this.globalConfig}get client(){return this._client}get tokenClient(){return this._tokenClient}get Swap(){return this._swap}get Position(){return this._position}get Pool(){return this._pool}get Resources(){return this._resources}get Rewarder(){return this._rewarder}get Token(){return this._token}get Router(){return this._router}get Fetcher(){return this._fetcher}get Launchpad(){return this._launchpad}get sdkOptions(){return this._sdkOptions}};function fr(e,t){const n=Hw(t);return gt(e).div(n).toString()}function hr(e,t){const n=Hw(t);return gt(e).mul(n)}function mk(e){const t=e.split("x");let n=e;return t[1][0]==="0"&&(n=t[0]+"x"+t[1].slice(1)),n}const dq=(e,t)=>JSON.stringify(e)===JSON.stringify(t);Fe.config({precision:64,rounding:Fe.ROUND_DOWN,toExpNeg:-64,toExpPos:64});const fq=e=>Fe.isDecimal(e)?e:new Fe(e===void 0?0:e),_k=(e,t,n=!0)=>{if(`${e}`=="0")return!parseFloat(t)||!n?0:"0.".padEnd(t+2,"0");if(!e)return"--";const r=parseFloat(e),i=e.toString(),s=r<0;let o=i;if(i.toLowerCase().includes("e")){const a=i.match(/(\d+?)(?:\.(\d*))?e([+-])(\d+)/),c=a[1],u=a[2],d=a[3],l=a[4];let f="",p=u?u.substr(l):"";if(p&&(p=`.${p}`),d!=="-"){for(let _=0;_<l;_+=1){const y=u[_]||"0";f+=y}o=c+f+p}else{let _="0";for(let y=0;y<l;y+=1)f=(c[c.length-y-1]||"0")+f;c.length>l&&(_=c.substr(0,c.length-l)),o=`${_}.${f}${u}`}}if(t&&n){let a=`${o.split(".")[0]}.`;const c=o.split(".")[1]||"";for(let u=0;u<t;u+=1)a+=c[u]||"0";o=a}if(o.length>14){const a=o.split(".");a[0].length>14?o=`${a[0].slice(0,14)}+`:(o=o.slice(0,13),o.indexOf(".")===12&&(o=o.slice(0,12)))}return`${s?"-":""}${o}`};function In(e,t){if(t=t>-1?t:0,`${e}`=="0")return parseFloat(t)?"0.".padEnd(t+2,"0"):"0";if(!e)return"--";let n=!1;parseFloat(e)<0&&(n=!0);const r=`${Math.abs(parseFloat(e))}`;if(r==="NaN")return"--";let i=r;if(r.toLowerCase().includes("e")){if(r.toLowerCase().includes("+"))return _k(r,t);const o=r.toLowerCase().split("e");let a=o[0];const c=Math.abs(parseFloat(o[1]));let u="",d=a.length,l;for(o[0].split(".")[1]&&(a=o[0].split(".")[0]+o[0].split(".")[1],d=o[0].split(".")[0].length),l=0;l<c-d;l+=1)u+="0";i=`0.${u}${a}`}if(`${t}`!="0"&&!t||`${parseFloat(e)}`=="NaN")return(n?"-":"")+i;const s=i.split(".");if(t===0)i=parseInt(i,10);else if(t>0&&s[1])if(s[1].length>t)if(s[1].includes("999999999")){const o=parseFloat(i).toFixed(t+1);i=o.slice(0,o.length-1)}else i=`${s[0]}.${s[1].slice(0,t)}`;else i=parseFloat(i).toFixed(t);else i=parseFloat(i).toFixed(t);if(i.length>=14&&i.includes(".")){const o=i.split(".");o[0].length>14?i=`${o[0].slice(0,14)}+`:(i=i.slice(0,13),i.indexOf(".")===12&&(i=i.slice(0,12)))}return(n?"-":"")+i}function hq(e,t){const n=String(e);if(!n.includes("."))return n;const r=n.split("."),i=r[0],s=r[1].slice(0,t);return Xo(s)?`${i}.${Xo(s)}`:`${i}`}function Xo(e){return e.replace(/(\s|0|\.)+$/g,"")}function fo(e,t){if(typeof e=="number"&&isNaN(e)||!Number(e))return 0;if(!String(e).includes("."))return e;const n=String(e).split(".");if(n[1]&&n[1].length<=t&&Number(n[1]))return e;const r=Math.pow(10,-t);if(Number(e)<r)return n[1]&&Xo(n[1])?n[0]+"."+Xo(n[1]):n[0];const i=In(e,t),s=String(i).split(".");return i==="--"?"--":s[1]&&Xo(String(s[1]))?s[0]+"."+Xo(String(s[1])):s[0]}const wk=(e,t)=>isNaN(e)||!e?e:(e=String(e),Number(e)==0?0:isNaN(t)?e.replace(/^\d+/,n=>n.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")):(t===0&&(e=e.split(".")[0]),e.replace(/(\d+)(\.\d+)?/,(n,r,i)=>r.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+(i?i.slice(0,t+1):""))));function bk(e,t){const r=String(e).split(".");let i=!0;if(!r[1]||r[1]&&r[1].length<=t||r[0]!=="0")return!1;if(r&&r[1]&&r[0]==="0"&&r[1][r[1].length-1]==="1")for(let s=0;s<r[1].length-1;s++)r[1]!=="0"&&(i=!1);else i=!1;return i}const P0=(e,t,n=2)=>{if(e=="")return e;if(isNaN(e)||Number(e)==0)return 0;const r=fo(e,t),i=Math.pow(10,-t);return Number(r)&&Math.abs(Number(r))<=i||bk(r,t)?P0(e,t+n):r};function pq(e){if(e){const t=e.toString(),n=t.indexOf(".")>-1?/(\d)(?=(\d{3})+\.)/g:/(\d)(?=(?:\d{3})+$)/g;return t.replace(n,"$1,")}}function gq(e){return Object.keys(e).length===0}const yq=(e,t)=>{if(!t)return null;for(const n in e){const r=e[n];if(r.address.toUpperCase()===t.toUpperCase())return r}return null};function Gi(e){return e.toString().length===1?"0"+e:e}function Jg(e){const t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return t+"-"+Gi(n)+"-"+Gi(r)}function vk(e){const t=e.getMonth()+1,n=e.getDate();return Gi(t)+"/"+Gi(n)}function Yg(e){const t=e.getHours(),n=e.getMinutes(),r=e.getSeconds();return Gi(t)+":"+Gi(n)+":"+Gi(r)}function xk(e){const t=e.getHours(),n=e.getMinutes();return Gi(t)+":"+Gi(n)}function Sk(e){const n=new Date(e),r=n.getTimezoneOffset()+480;return n.setMinutes(n.getMinutes()+r),n}const mq=(e,t)=>{if(e){const n=Sk(e);if(!t)return Jg(n)+" "+Yg(n);switch(t){case"HMS":return Yg(n);case"YMD":return Jg(n);case"MD":return vk(n);case"HM":return xk(n)}}},_q=(e,t)=>isNaN(e)||!e?e:Number(e)<1e-6&&Number(e)!==0?"<0.000001":wk(fo(String(e),t),t);function wq(e){const t=e.replace("%","");return Number(t)}function bq(e,t=1){return!e||isNaN(Number(e))?e:Math.abs(String(e))<1e3?P0(e,t):P0(Number(e)/1e3,t)+"k"}const gc=async e=>new Promise(t=>{setTimeout(()=>{t(1)},e)}),Qg=5,zw=eh("wallet",{state:()=>({loading:!1,autoRefreshTime:Qg,countdown:0,connected:!1,aptosConnected:!1,suiConnected:!1,address:"",aptosAddress:"",suiAddress:"",platform:"",isShowWalletModal:!1,walletName:"",aptosWalletName:"",suiWalletName:"",currentWallet:null,aptosCurrentWallet:null,suiCurrentWallet:null,walletIcon:"",aptosWalletIcon:"",suiWalletIcon:"",switchWallet:!1,assets:{},walletIconName:"",aptosWalletIconName:"",suiWalletIconName:"",walletNetwork:""}),actions:{setLoading(e){e&&(this.countdown=Qg),this.loading=e,e||(this.countdown=0)},setCountdown(e){this.countdown=e},setWalletStatus(){this.connected=!0},setSwitchWallet(e){this.switchWallet=e},setIsShowWalletModal(e){this.isShowWalletModal=e},setWalletInfo(e,t){this.connected=e,this.platform=t},setCurrentWallet(e){e.wallet?(this.currentWallet=e.wallet,this.connected=e.isConnected,this.address=e.account,this.walletIcon=e.icon,this.walletName=e.wallet.name,e.platform==="Sui"?(this.suiCurrentWallet=e.wallet,this.suiConnected=e.isConnected,this.suiAddress=e.account,this.suiWalletIcon=e.icon,this.suiWalletName=e.wallet.name,this.walletName=e.walletName):(this.aptosCurrentWallet=e.wallet,this.aptosConnected=e.isConnected,this.aptosAddress=e.account,this.aptosWalletIcon=e.icon,this.aptosWalletName=e.wallet.name)):(this.currentWallet=null,this.connected=!1,this.address="",this.walletIcon="",this.walletName="",e.platform==="Sui"?(this.suiCurrentWallet=null,this.suiConnected=!1,this.suiAddress="",this.suiWalletIcon="",this.suiWalletName=""):(this.aptosCurrentWallet=null,this.aptosConnected=!1,this.aptosAddress="",this.aptosWalletIcon="",this.aptosWalletName=""))},setAssets(e){this.assets=e},setWalletIconName(e){this.walletIconName=e,localStorage.setItem("walletIconName",e)},setNetwork(e){this.walletNetwork=e}}});var O0={},Tk={get exports(){return O0},set exports(e){O0=e}},_l={},Ak={get exports(){return _l},set exports(e){_l=e}},e1;function Ek(){return e1||(e1=1,function(e,t){(function(n,r){e.exports=r()})(Fo,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Fo<"u"&&Fo.crypto&&(s=Fo.crypto),!s&&typeof uy=="function")try{s=th}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function E(){}return function(x){var S;return E.prototype=x,S=new E,E.prototype=null,S}}(),c={},u=c.lib={},d=u.Base=function(){return{extend:function(E){var x=a(this);return E&&x.mixIn(E),(!x.hasOwnProperty("init")||this.init===x.init)&&(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var E=this.extend();return E.init.apply(E,arguments),E},init:function(){},mixIn:function(E){for(var x in E)E.hasOwnProperty(x)&&(this[x]=E[x]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),l=u.WordArray=d.extend({init:function(E,x){E=this.words=E||[],x!=i?this.sigBytes=x:this.sigBytes=E.length*4},toString:function(E){return(E||p).stringify(this)},concat:function(E){var x=this.words,S=E.words,T=this.sigBytes,R=E.sigBytes;if(this.clamp(),T%4)for(var P=0;P<R;P++){var C=S[P>>>2]>>>24-P%4*8&255;x[T+P>>>2]|=C<<24-(T+P)%4*8}else for(var G=0;G<R;G+=4)x[T+G>>>2]=S[G>>>2];return this.sigBytes+=R,this},clamp:function(){var E=this.words,x=this.sigBytes;E[x>>>2]&=4294967295<<32-x%4*8,E.length=r.ceil(x/4)},clone:function(){var E=d.clone.call(this);return E.words=this.words.slice(0),E},random:function(E){for(var x=[],S=0;S<E;S+=4)x.push(o());return new l.init(x,E)}}),f=c.enc={},p=f.Hex={stringify:function(E){for(var x=E.words,S=E.sigBytes,T=[],R=0;R<S;R++){var P=x[R>>>2]>>>24-R%4*8&255;T.push((P>>>4).toString(16)),T.push((P&15).toString(16))}return T.join("")},parse:function(E){for(var x=E.length,S=[],T=0;T<x;T+=2)S[T>>>3]|=parseInt(E.substr(T,2),16)<<24-T%8*4;return new l.init(S,x/2)}},_=f.Latin1={stringify:function(E){for(var x=E.words,S=E.sigBytes,T=[],R=0;R<S;R++){var P=x[R>>>2]>>>24-R%4*8&255;T.push(String.fromCharCode(P))}return T.join("")},parse:function(E){for(var x=E.length,S=[],T=0;T<x;T++)S[T>>>2]|=(E.charCodeAt(T)&255)<<24-T%4*8;return new l.init(S,x)}},y=f.Utf8={stringify:function(E){try{return decodeURIComponent(escape(_.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(E){return _.parse(unescape(encodeURIComponent(E)))}},b=u.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(E){typeof E=="string"&&(E=y.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},_process:function(E){var x,S=this._data,T=S.words,R=S.sigBytes,P=this.blockSize,C=P*4,G=R/C;E?G=r.ceil(G):G=r.max((G|0)-this._minBufferSize,0);var F=G*P,U=r.min(F*4,R);if(F){for(var N=0;N<F;N+=P)this._doProcessBlock(T,N);x=T.splice(0,F),S.sigBytes-=U}return new l.init(x,U)},clone:function(){var E=d.clone.call(this);return E._data=this._data.clone(),E},_minBufferSize:0});u.Hasher=b.extend({cfg:d.extend(),init:function(E){this.cfg=this.cfg.extend(E),this.reset()},reset:function(){b.reset.call(this),this._doReset()},update:function(E){return this._append(E),this._process(),this},finalize:function(E){E&&this._append(E);var x=this._doFinalize();return x},blockSize:16,_createHelper:function(E){return function(x,S){return new E.init(S).finalize(x)}},_createHmacHelper:function(E){return function(x,S){return new B.HMAC.init(E,S).finalize(x)}}});var B=c.algo={};return c}(Math);return n})}(Ak)),_l}(function(e,t){(function(n,r){e.exports=r(Ek())})(Fo,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,u=[],d=[];(function(){function p(B){for(var E=r.sqrt(B),x=2;x<=E;x++)if(!(B%x))return!1;return!0}function _(B){return(B-(B|0))*4294967296|0}for(var y=2,b=0;b<64;)p(y)&&(b<8&&(u[b]=_(r.pow(y,1/2))),d[b]=_(r.pow(y,1/3)),b++),y++})();var l=[],f=c.SHA256=a.extend({_doReset:function(){this._hash=new o.init(u.slice(0))},_doProcessBlock:function(p,_){for(var y=this._hash.words,b=y[0],B=y[1],E=y[2],x=y[3],S=y[4],T=y[5],R=y[6],P=y[7],C=0;C<64;C++){if(C<16)l[C]=p[_+C]|0;else{var G=l[C-15],F=(G<<25|G>>>7)^(G<<14|G>>>18)^G>>>3,U=l[C-2],N=(U<<15|U>>>17)^(U<<13|U>>>19)^U>>>10;l[C]=F+l[C-7]+N+l[C-16]}var k=S&T^~S&R,h=b&B^b&E^B&E,g=(b<<30|b>>>2)^(b<<19|b>>>13)^(b<<10|b>>>22),v=(S<<26|S>>>6)^(S<<21|S>>>11)^(S<<7|S>>>25),O=P+v+k+d[C]+l[C],L=g+h;P=R,R=T,T=S,S=x+O|0,x=E,E=B,B=b,b=O+L|0}y[0]=y[0]+b|0,y[1]=y[1]+B|0,y[2]=y[2]+E|0,y[3]=y[3]+x|0,y[4]=y[4]+S|0,y[5]=y[5]+T|0,y[6]=y[6]+R|0,y[7]=y[7]+P|0},_doFinalize:function(){var p=this._data,_=p.words,y=this._nDataBytes*8,b=p.sigBytes*8;return _[b>>>5]|=128<<24-b%32,_[(b+64>>>9<<4)+14]=r.floor(y/4294967296),_[(b+64>>>9<<4)+15]=y,p.sigBytes=_.length*4,this._process(),this._hash},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p}});i.SHA256=a._createHelper(f),i.HmacSHA256=a._createHmacHelper(f)}(Math),n.SHA256})})(Tk);const kk=O0;function Bk(){const e=ct.Aptos.liquidswapDeployer,t={rpcUrl:ct.Aptos.rpcUrl,fraphQLUrl:ct.Aptos.fraphQLUrl,networkOptions:{nativeToken:"0x1::aptos_coin::AptosCoin",launchpad:{cetusLaunchpad:ct.Aptos.Launchpad,crowdCoin:ct.Aptos.LaunchpadCrowdCoin},simulationAccount:{pubkey:ct.Aptos.accountPublicKey,address:ct.Aptos.accountAddress},modules:{LiquidswapDeployer:e,ClmmIntegrate:ct.Aptos.clmmIntegrate,FetcherDeployer:ct.Aptos.fetcher,TokenDeployer:ct.Aptos.TokenDeployer,IntegerMate:ct.Aptos.IntegerMate}}},n=ay(new yk(t)),r=zw(),i=cy(),s=o0(()=>i),{$notify:o}=Yo(),a=J=>{const{$notify:j}=Yo();j.success({key:J.hash+"loading",icon:_t("img",{class:{"notify-icon":!0,"loading-animate":!0},src:s.value.theme=="default"?"/image/img-loading@2x.png":"/sui-image/img-loading.png"}),message:_t("div",{class:"notification-title"},[_t("span",{innerHTML:J.title},null)]),description:_t("div",{class:"notification-title"},[_t("div",{class:"notification-text",innerHTML:Rr.global.t("newAdd.confirmingTransaction")},null),_t("a",{href:`https://explorer.aptoslabs.com/txn/${J.hash}?network=${ct.Aptos.network}`,target:"_blank",innerHTML:Rr.global.t("common.viewTransaction")},null)]),duration:0,class:"ant-notification-copy ant-notification-swap"})},c=J=>{o.success({icon:_t("svg",{class:{icon:!0},"aria-hidden":!0},[_t("use",{"xlink:href":"#icon-icon-change1"})]),message:_t("div",{class:"notification-title"},[_t("span",{innerHTML:`${J.title} `+Rr.global.t("newAdd.success")},null)]),description:_t("div",{class:"notification-title"},[_t("div",{class:"notification-text",innerHTML:J.desc},null),_t("a",{href:`https://explorer.aptoslabs.com/txn/${J.hash}?network=${ct.Aptos.network}`,target:"_blank",innerHTML:Rr.global.t("common.viewTransaction")},null)]),duration:4.5,class:"ant-notification-copy ant-notification-swap"})},u=J=>{o.error({icon:_t("svg",{class:{icon:!0},"aria-hidden":!0},[_t("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:_t("div",{class:"notification-title"},[_t("span",{innerHTML:`${J} `+Rr.global.t("newAdd.failed")},null)]),description:Rr.global.t("newAdd.somethingWrong"),duration:4.5,class:"ant-notification-copy ant-notification-error"})},d=async(J,j=!1)=>{const K=await n.client.waitForTransactionWithResult(J.hash);if(K&&K.success){o.close(J.hash+"loading"),c(J);const Y={walletAddress:r.address,chainName:"Aptos",...J,...K,date:new Date().getTime()+6048e5};return i.setTransactionList(Y),j?{status:!0,nftInfo:K.events.filter(le=>le.type.includes("CreateTokenDataEvent"))}:!0}else{if(K&&!K.success)return o.close(J.hash+"loading"),u(J.title),!1;setTimeout(()=>d(J,j),3e3)}},l=async(J,j=!1)=>{const K=await n.client.waitForTransactionWithResult(J.hash);if(K&&K.success){const Y={walletAddress:r.address,chainName:"Aptos",...J,...K,date:new Date().getTime()+6048e5};i.setTransactionList(Y)}},f=async J=>{try{const j=await n.Resources.getCoinStores(J),K=[];return j.forEach(Y=>{let ne="";Y.coinAddress.includes("0x0000000000000000000000000000000000000000000000000000000000000001")?ne=Y.coinAddress.replace(/0x0000000000000000000000000000000000000000000000000000000000000001/,"0x1"):ne=Y.coinAddress,K.push({...Y,coinAddress:ne})}),K}catch{return[]}},p=async J=>{try{r.setLoading(!0);const j=await f(J),K={};j.forEach(Y=>{const ne=Y?Y.coin.value:"0";K[Y.coinAddress]={...Y,balance:ne}}),r.setAssets(K),r.setLoading(!1)}catch{r.setLoading(!1),r.setAssets({})}},_=async()=>{const J={pubkey:Ni(ct.Aptos.accountPublicKey),address:Ni(ct.Aptos.accountAddress)};return await n.Token.getAllRegisteredTokenList(J)},y=async(J,j,K)=>n.Resources.getPoolState(J,j,K),b=async()=>{const J={pubkey:Ni(ct.Aptos.accountPublicKey),address:Ni(ct.Aptos.accountAddress)};return await n.Token.getOwnerWarpPoolList(ct.Aptos.TokenDeployer,J)},B=async J=>await n.Resources.getPool(J);return{setTransations:l,showTransitionPending:a,showTransitionSuccess:c,showTransitionError:u,watchTransaction:d,getAccount:p,getPoolState:y,getPools:async J=>await n.Resources.getPools(J),getPool:B,registerCoin:J=>({function:"0x1::managed_coin::register",type_arguments:[J],arguments:[],type:"entry_function_payload"}),estLiquidityAndcoinAmountFromOneAmounts:J=>{const{tokenA:j,tokenB:K,lowerTick:Y,upperTick:ne,coinAmount:ue,iscoinA:le,roundUp:fe,slippage:_e,curSqrtPrice:ke}=J,Ne=Ws.estLiquidityAndcoinAmountFromOneAmounts(Y,ne,ue,le,fe,_e,ke),Ee=j.decimals,He=K.decimals,{tokenMaxA:Ge,tokenMaxB:Ie,liquidityAmount:ze}=Ne;return{tokenMaxAOrigin:Ge.toString(),tokenMaxBOrigin:Ie.toString(),tokenMaxA:fr(Ge.toString(),Ee),tokenMaxB:fr(Ie.toString(),He),liquidityAmount:ze}},getCoinAmountFromLiquidity:J=>{const{pool:j,position:K,roundUp:Y}=J,ne=Number(K.tick_lower_index),ue=Number(K.tick_upper_index),le=Mt.tickIndexToSqrtPriceX64(ne),fe=Mt.tickIndexToSqrtPriceX64(ue),_e=Ws.getCoinAmountFromLiquidity(new I(K.liquidity),new I(j.current_sqrt_price),le,fe,Y),ke=fr(_e.coinA.toString(),j.coinA.decimals),Ne=fr(_e.coinB.toString(),j.coinB.decimals);return{coinaAmount:ke,coinbAmount:Ne}},getAddLiquidityTransactionPayload:async J=>{const{pool:j,amount:K,fix_amount_a:Y,roundUp:ne,tick_lower:ue,tick_upper:le,index:fe,slippage:_e}=J,ke=await B(j.poolAddress),Ne=Y?hr(K,j.token_a.decimals):hr(K,j.token_b.decimals),Ee=Mt.sqrtPriceX64ToTickIndex(new I(ke.current_sqrt_price));let He,Ge;if(Ee>ue&&Ee<le){const ze=Ws.estLiquidityAndcoinAmountFromOneAmounts(ue,le,new I(Ne.toString()),Y,ne,_e,new I(ke.current_sqrt_price));He=Y?Ne.toNumber():ze.tokenMaxA.toNumber(),Ge=Y?ze.tokenMaxB.toNumber():Ne.toNumber()}else Ee>=le?(He=0,Ge=Ne.toNumber()):Ee<=ue&&(He=Ne.toNumber(),Ge=0);return n.Position.createAddLiquidityTransactionPayload({pool:j.poolAddress,coinTypeA:j.token_a.address,coinTypeB:j.token_b.address,amount_a:He,amount_b:Ge,fix_amount_a:Y,tick_lower:ue,tick_upper:le,is_open:!fe,index:fe})},getRemoveLiquidityTransactionPayload:async J=>{const{pool:j,coinTypeA:K,coinTypeB:Y,coinTypeC:ne,coinTypeD:ue,coinTypeE:le,position:fe,delta_liquidity:_e,rewards_num:ke}=J,Ne=await B(j.poolAddress),Ee={...j,...Ne},He=Number(fe.tick_lower_index),Ge=Number(fe.tick_upper_index),Ie=Mt.tickIndexToSqrtPriceX64(He),ze=Mt.tickIndexToSqrtPriceX64(Ge),xt=Ws.getCoinAmountFromLiquidity(_e,new I(Ee.current_sqrt_price),Ie,ze,!0),Ke=gt(xt.coinA.toString()).mul(gt(1-J.slippage)),bt=gt(xt.coinB.toString()).mul(gt(1-J.slippage));return await n.Position.removeLiquidityTransactionPayload({pool:j.poolAddress,coinTypeA:K,coinTypeB:Y,coinTypeC:ne,coinTypeD:ue,coinTypeE:le,delta_liquidity:_e,min_amount_a:Number(In(Ke.toString(),0)),min_amount_b:Number(In(bt.toString(),0)),pos_index:J.position.index,is_close:!1,rewards_num:ke})},getCollectFeeTransactionPayload:async J=>await n.Position.collectFeeTransactionPayload({pool:J.pool.poolAddress,coinTypeA:J.pool.token_a.address,coinTypeB:J.pool.token_b.address,pos_index:J.position.index}),getPositionList:async(J,j)=>{if(ct.Aptos.network==="mainnet"){const K={operationName:"AccountTokensData",variables:{owner_address:J,limit:1e5,offset:0},query:`query AccountTokensData($owner_address: String, $limit: Int, $offset: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $owner_address}, amount: {_gt: "0"}}
    limit: $limit
    offset: $offset
  ) {
    token_data_id_hash
 creator_address
 name
    collection_name
  table_type
    property_version
    amount
    __typename
  }
}`},Y=await $fetch("https://indexer.mainnet.aptoslabs.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)}),ne=Y&&Y.data&&Y.data.current_token_ownerships||[],ue=[];for(let le=0;le<ne.length;le++){const fe=ne[le],_e=j[mk(fe.creator_address)];if(_e){const ke=fe.name.split("-")[1],Ne=_e.positions_handle,Ee=await n.Resources.getPositionInfoByIndex(Ne,ke);ue.push({...Ee,tokenName:fe.name})}}return ue}else{const K=Object.values(j);return await n.Resources.getPositionList(J,K)}},getPositionInfo:async(J,j,K,Y="")=>({...await n.Resources.getPositionInfo(J,K),tokenName:K,collectionName:j}),getSwapTransactionPayload:async J=>{const{pool:j,a2b:K,byAmountIn:Y,amount:ne,slippage:ue}=J,le=j.poolAddress,fe=j.token_a.decimals,_e=j.token_b.decimals,ke=await B(j.address);let Ne;K&&Y||!K&&!Y?Ne=hr(ne,fe):Ne=hr(ne,_e);const Ee=await n.Swap.preswap({pool:ke,decimalsA:fe,decimalsB:_e,a2b:K,by_amount_in:Y,amount:Ne.toString()}),He=gt(Ee.estimatedAmountOut.toString()),Ge=gt(Ee.estimatedAmountIn.toString()),Ie=Y?He.sub(He.mul(ue)):Ge.add(Ge.mul(ue));return n.Swap.createSwapTransactionPayload({pool_addr:le,coinTypeA:j.token_a.address,coinTypeB:j.token_b.address,a_to_b:Ee.aToB,by_amount_in:Ee.byAmountIn,amount:Ee.amount.toString(),amount_limit:In(Ie.toString(),0)||"",partner:""})},getCoin:J=>({type:"entry_function_payload",function:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet",arguments:[],type_arguments:[]}),preSwap:async J=>{const{pool:j,a2b:K,byAmountIn:Y,amount:ne}=J,ue=j.coinA.decimals,le=j.coinB.decimals;let fe=j;j.coinTypeA||(fe={...j,poolAddress:j.address,coinTypeA:j.coinA.address,coinTypeB:j.coinB.address});let _e;K&&Y||!K&&!Y?_e=hr(ne,ue):_e=hr(ne,le);const ke=await n.Swap.preswap({pool:fe,decimalsA:ue,decimalsB:le,a2b:K,by_amount_in:Y,amount:_e.toString()});return{...ke,estimatedAmountIn:fo(fr(ke.estimatedAmountIn.toString(),K?ue:le),K?ue:le),estimatedAmountOut:fo(fr(ke.estimatedAmountOut.toString(),K?le:ue),K?le:ue),priceImpactPct:In(ke.priceImpactPct,2)}},getTicks:async J=>{try{return await n.Fetcher.fetchTicks({pool:J.poolAddress,coinTypeA:J.coinTypeA,coinTypeB:J.coinTypeB})}catch{}},TickMath:Mt,TickUtil:R0,ClmmPoolUtil:Ws,getNearestTickByTick:ak,getTickDataFromUrlData:qw,getCollectFeesQuote:async J=>{const{pool:j,position:K,tickLowerData:Y,tickUpperData:ne}=J,ue=V7({clmmpool:j,position:K,tickLower:Y,tickUpper:ne}),le=fr(ue.feeOwedA.toString(),j.token_a.decimals),fe=fr(ue.feeOwedB.toString(),j.token_b.decimals);return{feeOwedA:Number(le)>99999999999||Number(le)<0?"0":le,feeOwedB:Number(fe)>99999999999||Number(fe)<0?"0":fe}},mintCoin:J=>({function:`${ct.Aptos.faucetObjectId}::coin::mint`,type_arguments:[`${ct.Aptos.faucetObjectId}::coin::${J.name}`],arguments:[J.amount],type:"entry_function_payload"}),getNftHash:J=>{const j=`${J.creator}::${J.collection}::${J.name}`;return kk(j).toString()},getCollectRewarderTransactionPayload:J=>n.Rewarder.collectPoolRewarderTransactionPayload(J),getPosRewardersAmount:async J=>{const{poolAddress:j,positionName:K,tickLowerData:Y,tickUpperData:ne}=J;return await n.Rewarder.posRewardersAmount(j,K,Y,ne)},getTokenList:_,getTickDataByIndex:async(J,j)=>await n.Resources.getTickDataByIndex(J,j),initSwapRouter:async J=>{n.Router.addPathProvider(J),await n.Router.setCoinList({pubkey:Ni(ct.Aptos.accountPublicKey),address:Ni(ct.Aptos.accountAddress)}),await n.Router.loadGraph()},getSwapRouter:async(J,j)=>await n.Router.price(J,j),getEstPositionAPRWithDelta:async(J,j,K,Y,ne,ue,le,fe,_e,ke,Ne,Ee,He,Ge,Ie,ze,xt,Ke,bt,yn,lt,Ct,Fr,Ft)=>await G7(J,j,K,Y,ne,ue,le,fe,_e,ke,Ne,Ee,He,Ge,Ie,ze,xt,Ke,bt,yn,lt,Ct,Fr,Ft),getPriceImpactPct:(J,j,K)=>{const Y=Mt.sqrtPriceX64ToPrice(new I(J.current_sqrt_price),J.coinA.decimals,J.coinB.decimals).toNumber(),ne=K?Y:1/Y,ue=Math.abs(ne-Number(j))/Number(j)*100;return Number(In(ue,2))},getLpList:b,getEstPositionAPRWithMulti:async(J,j,K,Y)=>await W7(J,j,K,Y),getCreatPoolTransactionPayload:async J=>{const{coinTypeA:j,coinTypeB:K,tick_lower:Y,tick_upper:ne,tick_spacing:ue,initialize_sqrt_price:le,max_amount_a:fe,max_amount_b:_e,slippage:ke,fix_amount_a:Ne,decimalsA:Ee,decimalsB:He,liquidityInput:Ge}=J,Ie=Ne?hr(fe,Ee):hr(_e,He),ze=Mt.sqrtPriceX64ToTickIndex(new I(le));let xt,Ke;const bt=Mt.tickIndexToSqrtPriceX64(Y),yn=Mt.tickIndexToSqrtPriceX64(ne);let lt;return ze>Y&&ze<ne?(lt=Ws.estLiquidityAndcoinAmountFromOneAmounts(Y,ne,new I(Ie.toString()),Ne,!0,ke,new I(le)),xt=Ne?Ie.toNumber():lt.tokenMaxA.toNumber(),Ke=Ne?lt.tokenMaxB.toNumber():Ie.toNumber()):ze>=ne?(lt=Ko(bt,yn,new I(Ie.toString())),xt=new I(Ge.tokenMaxA*Math.pow(10,Ee)),Ke=new I(Ge.tokenMaxB*Math.pow(10,He))):ze<=Y&&(lt=Vo(bt,yn,new I(Ie.toString())),xt=new I(Ge.tokenMaxA*Math.pow(10,Ee)),Ke=new I(Ge.tokenMaxB*Math.pow(10,He))),await n.Pool.creatPoolTransactionPayload({coinTypeA:j,coinTypeB:K,tick_spacing:ue,initialize_sqrt_price:new I(le),uri:"",delta_liquidity:ze>Y&&ze<ne?lt.liquidityAmount:lt,max_amount_a:xt,max_amount_b:Ke,tick_lower:Y,tick_upper:ne},!0)},getTokenListByCoinType:async()=>await n.Token.getTokenListByCoinType("",0,99999),getPoolImmutables:async()=>await n.Resources.getPoolImmutables(),estimateLiquidityForCoinA:Vo,estimateLiquidityForCoinB:Ko}}function Rk(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var i=e.charAt(r),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=r}var o=e.length,a=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var _=0,y=0,b=0,B=p.length;b!==B&&p[b]===0;)b++,_++;for(var E=(B-b)*u+1>>>0,x=new Uint8Array(E);b!==B;){for(var S=p[b],T=0,R=E-1;(S!==0||T<y)&&R!==-1;R--,T++)S+=256*x[R]>>>0,x[R]=S%o>>>0,S=S/o>>>0;if(S!==0)throw new Error("Non-zero carry");y=T,b++}for(var P=E-y;P!==E&&x[P]===0;)P++;for(var C=a.repeat(_);P<E;++P)C+=e.charAt(x[P]);return C}function l(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;for(var _=0,y=0,b=0;p[_]===a;)y++,_++;for(var B=(p.length-_)*c+1>>>0,E=new Uint8Array(B);p[_];){var x=t[p.charCodeAt(_)];if(x===255)return;for(var S=0,T=B-1;(x!==0||S<b)&&T!==-1;T--,S++)x+=o*E[T]>>>0,E[T]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");b=S,_++}for(var R=B-b;R!==B&&E[R]===0;)R++;for(var P=new Uint8Array(y+(B-R)),C=y;R!==B;)P[C++]=E[R++];return P}function f(p){var _=l(p);if(_)return _;throw new Error("Non-base"+o+" character")}return{encode:d,decodeUnsafe:l,decode:f}}var Pk=Rk;const Ok=Pk,Ik="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var jw=Ok(Ik);function Ck(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:e===43?62:e===47?63:0}function ho(e,t){for(var n=e.replace(/[^A-Za-z0-9+/]/g,""),r=n.length,i=t?Math.ceil((r*3+1>>2)/t)*t:r*3+1>>2,s=new Uint8Array(i),o,a,c=0,u=0,d=0;d<r;d++)if(a=d&3,c|=Ck(n.charCodeAt(d))<<6*(3-a),a===3||r-d===1){for(o=0;o<3&&u<i;o++,u++)s[u]=c>>>(16>>>o&24)&255;c=0}return s}function xu(e){return e<26?e+65:e<52?e+71:e<62?e-4:e===62?43:e===63?47:65}function Qs(e){for(var t=2,n="",r=e.length,i=0,s=0;s<r;s++)t=s%3,s>0&&s*4/3%76===0&&(n+=""),i|=e[s]<<(16>>>t&24),(t===2||e.length-s===1)&&(n+=String.fromCodePoint(xu(i>>>18&63),xu(i>>>12&63),xu(i>>>6&63),xu(i&63)),i=0);return n.slice(0,n.length-2+t)+(t===2?"":t===1?"=":"==")}function Xh(e){let t=e.replace("0x","").match(/.{1,2}/g).map(n=>parseInt(n,16));if(t===null)throw new Error(`Unable to parse HEX: ${e}`);return Uint8Array.from(t)}function Zh(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}var $k=32;function Hf(e,t){let n=new Uint8Array(t),r=0;for(;e>0;)n[r]=Number(e%BigInt(256)),e=e/BigInt(256),r+=1;return n}var Jh=e=>jw.encode(e),Yh=e=>jw.decode(e),Uk=class{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),n=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let e=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read256(){let e=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:n,length:r}=Nk(t);return this.shift(r),n}readVec(e){let t=this.readULEB(),n=[];for(let r=0;r<t;r++)n.push(e(this,r,t));return n}},Mk=class{constructor({size:e=1024,maxSize:t,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t||e,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(t>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=n;const r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return Hf(BigInt(e),8).forEach(t=>this.write8(t)),this}write128(e){return Hf(BigInt(e),16).forEach(t=>this.write8(t)),this}write256(e){return Hf(BigInt(e),32).forEach(t=>this.write8(t)),this}writeULEB(e){return qk(e).forEach(t=>this.write8(t)),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach((n,r)=>t(this,n,r,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return Dk(this.toBytes(),e)}};function qk(e){let t=[],n=0;if(e===0)return[0];for(;e>0;)t[n]=e&127,(e>>=7)&&(t[n]|=128),n+=1;return t}function Nk(e){let t=0,n=0,r=0;for(;;){let i=e[r];if(r+=1,t|=(i&127)<<n,!(i&128))break;n+=7}return{value:t,length:r}}var oc=class{constructor(e){if(this.types=new Map,this.counter=0,e instanceof oc){this.schema=e.schema,this.types=new Map(e.types);return}if(this.schema=e,this.registerAddressType(oc.ADDRESS,e.addressLength,e.addressEncoding),this.registerVectorType(e.vectorType),e.types&&e.types.structs)for(let t of Object.keys(e.types.structs))this.registerStructType(t,e.types.structs[t]);if(e.types&&e.types.enums)for(let t of Object.keys(e.types.enums))this.registerEnumType(t,e.types.enums[t]);if(e.types&&e.types.aliases)for(let t of Object.keys(e.types.aliases))this.registerAlias(t,e.types.aliases[t]);e.withPrimitives!==!1&&Hk(this)}tempKey(){return`bcs-struct-${++this.counter}`}ser(e,t,n){if(typeof e=="string"||Array.isArray(e)){const{name:r,params:i}=this.parseTypeName(e);return this.getTypeInterface(r).encode(this,t,n,i)}if(typeof e=="object"){const r=this.tempKey();return new oc(this).registerStructType(r,e).ser(r,t,n)}throw new Error(`Incorrect type passed into the '.ser()' function. 
${JSON.stringify(e)}`)}de(e,t,n){if(typeof t=="string")if(n)t=Lk(t,n);else throw new Error("To pass a string to `bcs.de`, specify encoding");if(typeof e=="string"||Array.isArray(e)){const{name:r,params:i}=this.parseTypeName(e);return this.getTypeInterface(r).decode(this,t,i)}if(typeof e=="object"){const r=new oc(this),i=this.tempKey();return r.registerStructType(i,e).de(i,t,n)}throw new Error(`Incorrect type passed into the '.de()' function. 
${JSON.stringify(e)}`)}hasType(e){return this.types.has(e)}registerAlias(e,t){return this.types.set(e,t),this}registerType(e,t,n,r=()=>!0){const{name:i,params:s}=this.parseTypeName(e);return this.types.set(i,{encode(o,a,c,u){const d=s.reduce((l,f,p)=>Object.assign(l,{[f]:u[p]}),{});return this._encodeRaw.call(o,new Mk(c),a,u,d)},decode(o,a,c){const u=s.reduce((d,l,f)=>Object.assign(d,{[l]:c[f]}),{});return this._decodeRaw.call(o,new Uk(a),c,u)},_encodeRaw(o,a,c,u){if(r(a))return t.call(this,o,a,c,u);throw new Error(`Validation failed for type ${i}, data: ${a}`)},_decodeRaw(o,a,c){return n.call(this,o,a,c)}}),this}registerAddressType(e,t,n="hex"){switch(n){case"base64":return this.registerType(e,function(i,s){return ho(s).reduce((o,a)=>o.write8(a),i)},function(i){return Qs(i.readBytes(t))});case"hex":return this.registerType(e,function(i,s){return Xh(s).reduce((o,a)=>o.write8(a),i)},function(i){return Zh(i.readBytes(t))});default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(e){let{name:t,params:n}=this.parseTypeName(e);if(n.length>1)throw new Error("Vector can have only one type parameter; got "+t);return this.registerType(e,function(i,s,o,a){return i.writeVec(s,(c,u)=>{let d=o[0];if(!d)throw new Error(`Incorrect number of type parameters passed a to vector '${e}'`);let{name:l,params:f}=this.parseTypeName(d);if(this.hasType(l))return this.getTypeInterface(l)._encodeRaw.call(this,c,u,f,a);if(!(l in a))throw new Error(`Unable to find a matching type definition for ${l} in vector; make sure you passed a generic`);let{name:p,params:_}=this.parseTypeName(a[l]);return this.getTypeInterface(p)._encodeRaw.call(this,c,u,_,a)})},function(i,s,o){return i.readVec(a=>{let c=s[0];if(!c)throw new Error(`Incorrect number of type parameters passed to a vector '${e}'`);let{name:u,params:d}=this.parseTypeName(c);if(this.hasType(u))return this.getTypeInterface(u)._decodeRaw.call(this,a,d,o);if(!(u in o))throw new Error(`Unable to find a matching type definition for ${u} in vector; make sure you passed a generic`);let{name:l,params:f}=this.parseTypeName(o[u]);this.getTypeInterface(l)._decodeRaw.call(this,a,f,o)})})}registerStructType(e,t){for(let o in t){let a=this.tempKey(),c=t[o];!Array.isArray(c)&&typeof c!="string"&&(t[o]=a,this.registerStructType(a,c))}let n=Object.freeze(t),r=Object.keys(n),{name:i,params:s}=this.parseTypeName(e);return this.registerType(e,function(a,c,u,d){if(!c||c.constructor!==Object)throw new Error(`Expected ${i} to be an Object, got: ${c}`);if(u.length!==s.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${s.length}, got: ${u.length}`);for(let l of r){if(!(l in c))throw new Error(`Struct ${i} requires field ${l}:${n[l]}`);const{name:f,params:p}=this.parseTypeName(n[l]);if(!s.includes(f))this.getTypeInterface(f)._encodeRaw.call(this,a,c[l],p,d);else{const _=s.indexOf(f);let{name:y,params:b}=this.parseTypeName(u[_]);if(this.hasType(y)){this.getTypeInterface(y)._encodeRaw.call(this,a,c[l],b,d);continue}if(!(y in d))throw new Error(`Unable to find a matching type definition for ${y} in ${i}; make sure you passed a generic`);let{name:B,params:E}=this.parseTypeName(d[y]);this.getTypeInterface(B)._encodeRaw.call(this,a,c[l],E,d)}}return a},function(a,c,u){if(c.length!==s.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${s.length}, got: ${c.length}`);let d={};for(let l of r){const{name:f,params:p}=this.parseTypeName(n[l]);if(!s.includes(f))d[l]=this.getTypeInterface(f)._decodeRaw.call(this,a,p,u);else{const _=s.indexOf(f);let{name:y,params:b}=this.parseTypeName(c[_]);if(this.hasType(y)){d[l]=this.getTypeInterface(y)._decodeRaw.call(this,a,b,u);continue}if(!(y in u))throw new Error(`Unable to find a matching type definition for ${y} in ${i}; make sure you passed a generic`);let{name:B,params:E}=this.parseTypeName(u[y]);d[l]=this.getTypeInterface(B)._decodeRaw.call(this,a,E,u)}}return d})}registerEnumType(e,t){for(let o in t){let a=this.tempKey(),c=t[o];c!==null&&!Array.isArray(c)&&typeof c!="string"&&(t[o]=a,this.registerStructType(a,c))}let n=Object.freeze(t),r=Object.keys(n),{name:i,params:s}=this.parseTypeName(e);return this.registerType(e,function(a,c,u,d){if(!c)throw new Error(`Unable to write enum "${i}", missing data.
Received: "${c}"`);if(typeof c!="object")throw new Error(`Incorrect data passed into enum "${i}", expected object with properties: "${r.join(" | ")}".
Received: "${JSON.stringify(c)}"`);let l=Object.keys(c)[0];if(l===void 0)throw new Error(`Empty object passed as invariant of the enum "${i}"`);let f=r.indexOf(l);if(f===-1)throw new Error(`Unknown invariant of the enum "${i}", allowed values: "${r.join(" | ")}"; received "${l}"`);let p=r[f],_=n[p];if(a.write8(f),_===null)return a;let y=s.indexOf(_),b=y===-1?_:u[y];{let{name:B,params:E}=this.parseTypeName(b);return this.getTypeInterface(B)._encodeRaw.call(this,a,c[l],E,d)}},function(a,c,u){let d=a.readULEB(),l=r[d],f=n[l];if(d===-1)throw new Error(`Decoding type mismatch, expected enum "${i}" invariant index, received "${d}"`);if(f===null)return{[l]:!0};let p=s.indexOf(f),_=p===-1?f:c[p];{let{name:y,params:b}=this.parseTypeName(_);return{[l]:this.getTypeInterface(y)._decodeRaw.call(this,a,b,u)}}})}getTypeInterface(e){let t=this.types.get(e);if(typeof t=="string"){let n=[];for(;typeof t=="string";){if(n.includes(t))throw new Error(`Recursive definition found: ${n.join(" -> ")} -> ${t}`);n.push(t),t=this.types.get(t)}}if(t===void 0)throw new Error(`Type ${e} is not registered`);return t}parseTypeName(e){if(Array.isArray(e)){let[a,...c]=e;return{name:a,params:c}}if(typeof e!="string")throw new Error(`Illegal type passed as a name of the type: ${e}`);let[t,n]=this.schema.genericSeparators||["<",">"],r=e.indexOf(t),i=Array.from(e).reverse().indexOf(n);if(r===-1&&i===-1)return{name:e,params:[]};if(r===-1||i===-1)throw new Error(`Unclosed generic in name '${e}'`);let s=e.slice(0,r),o=e.slice(r+1,e.length-i-1).split(",").map(a=>a.trim());return{name:s,params:o}}},Ze=oc;Ze.U8="u8";Ze.U16="u16";Ze.U32="u32";Ze.U64="u64";Ze.U128="u128";Ze.U256="u256";Ze.BOOL="bool";Ze.VECTOR="vector";Ze.ADDRESS="address";Ze.STRING="string";Ze.HEX="hex-string";Ze.BASE58="base58-string";Ze.BASE64="base64-string";function Dk(e,t){switch(t){case"base58":return Jh(e);case"base64":return Qs(e);case"hex":return Zh(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Lk(e,t){switch(t){case"base58":return Yh(e);case"base64":return ho(e);case"hex":return Xh(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Hk(e){e.registerType(Ze.U8,function(t,n){return t.write8(n)},function(t){return t.read8()},t=>t<256),e.registerType(Ze.U16,function(t,n){return t.write16(n)},function(t){return t.read16()},t=>t<65536),e.registerType(Ze.U32,function(t,n){return t.write32(n)},function(t){return t.read32()},t=>t<=4294967296n),e.registerType(Ze.U64,function(t,n){return t.write64(n)},function(t){return t.read64()}),e.registerType(Ze.U128,function(t,n){return t.write128(n)},function(t){return t.read128()}),e.registerType(Ze.U256,function(t,n){return t.write256(n)},function(t){return t.read256()}),e.registerType(Ze.BOOL,function(t,n){return t.write8(n)},function(t){return t.read8().toString(10)==="1"}),e.registerType(Ze.STRING,function(t,n){return t.writeVec(Array.from(n),(r,i)=>r.write8(i.charCodeAt(0)))},function(t){return t.readVec(n=>n.read8()).map(n=>String.fromCharCode(Number(n))).join("")},t=>!0),e.registerType(Ze.HEX,function(t,n){return t.writeVec(Array.from(Xh(n)),(r,i)=>r.write8(i))},function(t){let n=t.readVec(r=>r.read8());return Zh(new Uint8Array(n))}),e.registerType(Ze.BASE58,function(t,n){return t.writeVec(Array.from(Yh(n)),(r,i)=>r.write8(i))},function(t){let n=t.readVec(r=>r.read8());return Jh(new Uint8Array(n))}),e.registerType(Ze.BASE64,function(t,n){return t.writeVec(Array.from(ho(n)),(r,i)=>r.write8(i))},function(t){let n=t.readVec(r=>r.read8());return Qs(new Uint8Array(n))})}function zk(){return{genericSeparators:["<",">"],vectorType:"vector",addressLength:$k,addressEncoding:"hex"}}function I0(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function jk(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Fw(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Fk(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");I0(e.outputLen),I0(e.blockLen)}function Gk(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Wk(e,t){Fw(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const $r={number:I0,bool:jk,bytes:Fw,hash:Fk,exists:Gk,output:Wk},Ju=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,Vk=Object.freeze(Object.defineProperty({__proto__:null,crypto:Ju},Symbol.toStringTag,{value:"Module"}));/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kk=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),kc=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Yu=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ui=(e,t)=>e<<32-t|e>>>t,Gw=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Gw)throw new Error("Non little-endian hardware is not supported");const Xk=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Zk(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Xk[e[n]];return t}function Jk(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=n*2,i=e.slice(r,r+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[n]=s}return t}const Ww=async()=>{};async function Yk(e,t,n){let r=Date.now();for(let i=0;i<e;i++){n(i);const s=Date.now()-r;s>=0&&s<t||(await Ww(),r+=s)}}function Qh(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Wi(e){if(typeof e=="string"&&(e=Qh(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function ep(...e){if(!e.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const t=e.reduce((r,i)=>r+i.length,0),n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const s=e[r];n.set(s,i),i+=s.length}return n}class Yd{clone(){return this._cloneInto()}}const Qk=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function e9(e,t){if(t!==void 0&&(typeof t!="object"||!Qk(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}function Ls(e){const t=r=>e().update(Wi(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Vw(e){const t=(r,i)=>e(i).update(Wi(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function iu(e=32){if(Ju&&typeof Ju.getRandomValues=="function")return Ju.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const t9=Object.freeze(Object.defineProperty({__proto__:null,Hash:Yd,asyncLoop:Yk,bytesToHex:Zk,checkOpts:e9,concatBytes:ep,createView:Yu,hexToBytes:Jk,isLE:Gw,nextTick:Ww,randomBytes:iu,rotr:ui,toBytes:Wi,u32:kc,u8:Kk,utf8ToBytes:Qh,wrapConstructor:Ls,wrapConstructorWithOpts:Vw},Symbol.toStringTag,{value:"Module"}));function n9(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}class tp extends Yd{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Yu(this.buffer)}update(t){$r.exists(this);const{view:n,buffer:r,blockLen:i}=this;t=Wi(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Yu(t);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){$r.exists(this),$r.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let l=o;l<i;l++)n[l]=0;n9(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Yu(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,d[l],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%n&&t.buffer.set(r),t}}const r9=(e,t,n)=>e&t^~e&n,i9=(e,t,n)=>e&t^e&n^t&n,s9=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),hs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ps=new Uint32Array(64);class Kw extends tp{constructor(){super(64,32,8,!1),this.A=hs[0]|0,this.B=hs[1]|0,this.C=hs[2]|0,this.D=hs[3]|0,this.E=hs[4]|0,this.F=hs[5]|0,this.G=hs[6]|0,this.H=hs[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[t,n,r,i,s,o,a,c]}set(t,n,r,i,s,o,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let l=0;l<16;l++,n+=4)ps[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const f=ps[l-15],p=ps[l-2],_=ui(f,7)^ui(f,18)^f>>>3,y=ui(p,17)^ui(p,19)^p>>>10;ps[l]=y+ps[l-7]+_+ps[l-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:u,H:d}=this;for(let l=0;l<64;l++){const f=ui(a,6)^ui(a,11)^ui(a,25),p=d+f+r9(a,c,u)+s9[l]+ps[l]|0,y=(ui(r,2)^ui(r,13)^ui(r,22))+i9(r,i,s)|0;d=u,u=c,c=a,a=o+p|0,o=s,s=i,i=r,r=p+y|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,i,s,o,a,c,u,d)}roundClean(){ps.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class o9 extends Kw{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Ii=Ls(()=>new Kw),a9=Ls(()=>new o9),c9=Object.freeze(Object.defineProperty({__proto__:null,sha224:a9,sha256:Ii},Symbol.toStringTag,{value:"Module"})),u9=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class l9 extends Yd{constructor(t,n,r={},i,s,o){if(super(),this.blockLen=t,this.outputLen=n,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,$r.number(t),$r.number(n),$r.number(i),n<0||n>i)throw new Error("outputLen bigger than keyLen");if(r.key!==void 0&&(r.key.length<1||r.key.length>i))throw new Error(`key must be up 1..${i} byte long or undefined`);if(r.salt!==void 0&&r.salt.length!==s)throw new Error(`salt must be ${s} byte long or undefined`);if(r.personalization!==void 0&&r.personalization.length!==o)throw new Error(`personalization must be ${o} byte long or undefined`);this.buffer32=kc(this.buffer=new Uint8Array(t))}update(t){$r.exists(this);const{blockLen:n,buffer:r,buffer32:i}=this;t=Wi(t);const s=t.length;for(let o=0;o<s;){this.pos===n&&(this.compress(i,0,!1),this.pos=0);const a=Math.min(n-this.pos,s-o),c=t.byteOffset+o;if(a===n&&!(c%4)&&o+a<s){const u=new Uint32Array(t.buffer,c,Math.floor((s-o)/4));for(let d=0;o+n<s;d+=i.length,o+=n)this.length+=n,this.compress(u,d,!1);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,this.length+=a,o+=a}return this}digestInto(t){$r.exists(this),$r.output(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,this.buffer.subarray(n).fill(0),this.compress(r,0,!0);const i=kc(t);this.get().forEach((s,o)=>i[o]=s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:i,destroyed:s,outputLen:o,pos:a}=this;return t||(t=new this.constructor({dkLen:o})),t.set(...this.get()),t.length=r,t.finished=i,t.destroyed=s,t.outputLen=o,t.buffer.set(n),t.pos=a,t}}const Su=BigInt(2**32-1),C0=BigInt(32);function Xw(e,t=!1){return t?{h:Number(e&Su),l:Number(e>>C0&Su)}:{h:Number(e>>C0&Su)|0,l:Number(e&Su)|0}}function d9(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=Xw(e[i],t);[n[i],r[i]]=[s,o]}return[n,r]}const f9=(e,t)=>BigInt(e>>>0)<<C0|BigInt(t>>>0),h9=(e,t,n)=>e>>>n,p9=(e,t,n)=>e<<32-n|t>>>n,g9=(e,t,n)=>e>>>n|t<<32-n,y9=(e,t,n)=>e<<32-n|t>>>n,m9=(e,t,n)=>e<<64-n|t>>>n-32,_9=(e,t,n)=>e>>>n-32|t<<64-n,w9=(e,t)=>t,b9=(e,t)=>e,v9=(e,t,n)=>e<<n|t>>>32-n,x9=(e,t,n)=>t<<n|e>>>32-n,S9=(e,t,n)=>t<<n-32|e>>>64-n,T9=(e,t,n)=>e<<n-32|t>>>64-n;function A9(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const E9=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),k9=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,B9=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),R9=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,P9=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),O9=(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,Xe={fromBig:Xw,split:d9,toBig:f9,shrSH:h9,shrSL:p9,rotrSH:g9,rotrSL:y9,rotrBH:m9,rotrBL:_9,rotr32H:w9,rotr32L:b9,rotlSH:v9,rotlSL:x9,rotlBH:S9,rotlBL:T9,add:A9,add3L:E9,add3H:k9,add4L:B9,add4H:R9,add5H:O9,add5L:P9},Mn=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Ce=new Uint32Array(32);function gs(e,t,n,r,i,s){const o=i[s],a=i[s+1];let c=Ce[2*e],u=Ce[2*e+1],d=Ce[2*t],l=Ce[2*t+1],f=Ce[2*n],p=Ce[2*n+1],_=Ce[2*r],y=Ce[2*r+1],b=Xe.add3L(c,d,o);u=Xe.add3H(b,u,l,a),c=b|0,{Dh:y,Dl:_}={Dh:y^u,Dl:_^c},{Dh:y,Dl:_}={Dh:Xe.rotr32H(y,_),Dl:Xe.rotr32L(y,_)},{h:p,l:f}=Xe.add(p,f,y,_),{Bh:l,Bl:d}={Bh:l^p,Bl:d^f},{Bh:l,Bl:d}={Bh:Xe.rotrSH(l,d,24),Bl:Xe.rotrSL(l,d,24)},Ce[2*e]=c,Ce[2*e+1]=u,Ce[2*t]=d,Ce[2*t+1]=l,Ce[2*n]=f,Ce[2*n+1]=p,Ce[2*r]=_,Ce[2*r+1]=y}function ys(e,t,n,r,i,s){const o=i[s],a=i[s+1];let c=Ce[2*e],u=Ce[2*e+1],d=Ce[2*t],l=Ce[2*t+1],f=Ce[2*n],p=Ce[2*n+1],_=Ce[2*r],y=Ce[2*r+1],b=Xe.add3L(c,d,o);u=Xe.add3H(b,u,l,a),c=b|0,{Dh:y,Dl:_}={Dh:y^u,Dl:_^c},{Dh:y,Dl:_}={Dh:Xe.rotrSH(y,_,16),Dl:Xe.rotrSL(y,_,16)},{h:p,l:f}=Xe.add(p,f,y,_),{Bh:l,Bl:d}={Bh:l^p,Bl:d^f},{Bh:l,Bl:d}={Bh:Xe.rotrBH(l,d,63),Bl:Xe.rotrBL(l,d,63)},Ce[2*e]=c,Ce[2*e+1]=u,Ce[2*t]=d,Ce[2*t+1]=l,Ce[2*n]=f,Ce[2*n+1]=p,Ce[2*r]=_,Ce[2*r+1]=y}class I9 extends l9{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=Mn[0]|0,this.v0h=Mn[1]|0,this.v1l=Mn[2]|0,this.v1h=Mn[3]|0,this.v2l=Mn[4]|0,this.v2h=Mn[5]|0,this.v3l=Mn[6]|0,this.v3h=Mn[7]|0,this.v4l=Mn[8]|0,this.v4h=Mn[9]|0,this.v5l=Mn[10]|0,this.v5h=Mn[11]|0,this.v6l=Mn[12]|0,this.v6h=Mn[13]|0,this.v7l=Mn[14]|0,this.v7h=Mn[15]|0;const n=t.key?t.key.length:0;if(this.v0l^=this.outputLen|n<<8|1<<16|1<<24,t.salt){const r=kc(Wi(t.salt));this.v4l^=r[0],this.v4h^=r[1],this.v5l^=r[2],this.v5h^=r[3]}if(t.personalization){const r=kc(Wi(t.personalization));this.v6l^=r[0],this.v6h^=r[1],this.v7l^=r[2],this.v7h^=r[3]}if(t.key){const r=new Uint8Array(this.blockLen);r.set(Wi(t.key)),this.update(r)}}get(){let{v0l:t,v0h:n,v1l:r,v1h:i,v2l:s,v2h:o,v3l:a,v3h:c,v4l:u,v4h:d,v5l:l,v5h:f,v6l:p,v6h:_,v7l:y,v7h:b}=this;return[t,n,r,i,s,o,a,c,u,d,l,f,p,_,y,b]}set(t,n,r,i,s,o,a,c,u,d,l,f,p,_,y,b){this.v0l=t|0,this.v0h=n|0,this.v1l=r|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=d|0,this.v5l=l|0,this.v5h=f|0,this.v6l=p|0,this.v6h=_|0,this.v7l=y|0,this.v7h=b|0}compress(t,n,r){this.get().forEach((c,u)=>Ce[u]=c),Ce.set(Mn,16);let{h:i,l:s}=Xe.fromBig(BigInt(this.length));Ce[24]=Mn[8]^s,Ce[25]=Mn[9]^i,r&&(Ce[28]=~Ce[28],Ce[29]=~Ce[29]);let o=0;const a=u9;for(let c=0;c<12;c++)gs(0,4,8,12,t,n+2*a[o++]),ys(0,4,8,12,t,n+2*a[o++]),gs(1,5,9,13,t,n+2*a[o++]),ys(1,5,9,13,t,n+2*a[o++]),gs(2,6,10,14,t,n+2*a[o++]),ys(2,6,10,14,t,n+2*a[o++]),gs(3,7,11,15,t,n+2*a[o++]),ys(3,7,11,15,t,n+2*a[o++]),gs(0,5,10,15,t,n+2*a[o++]),ys(0,5,10,15,t,n+2*a[o++]),gs(1,6,11,12,t,n+2*a[o++]),ys(1,6,11,12,t,n+2*a[o++]),gs(2,7,8,13,t,n+2*a[o++]),ys(2,7,8,13,t,n+2*a[o++]),gs(3,4,9,14,t,n+2*a[o++]),ys(3,4,9,14,t,n+2*a[o++]);this.v0l^=Ce[0]^Ce[16],this.v0h^=Ce[1]^Ce[17],this.v1l^=Ce[2]^Ce[18],this.v1h^=Ce[3]^Ce[19],this.v2l^=Ce[4]^Ce[20],this.v2h^=Ce[5]^Ce[21],this.v3l^=Ce[6]^Ce[22],this.v3h^=Ce[7]^Ce[23],this.v4l^=Ce[8]^Ce[24],this.v4h^=Ce[9]^Ce[25],this.v5l^=Ce[10]^Ce[26],this.v5h^=Ce[11]^Ce[27],this.v6l^=Ce[12]^Ce[28],this.v6h^=Ce[13]^Ce[29],this.v7l^=Ce[14]^Ce[30],this.v7h^=Ce[15]^Ce[31],Ce.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const C9=Vw(e=>new I9(e));class $9 extends TypeError{constructor(t,n){let r;const{message:i,explanation:s,...o}=t,{path:a}=t,c=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??c),s!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...n()])}}function U9(e){return ni(e)&&typeof e[Symbol.iterator]=="function"}function ni(e){return typeof e=="object"&&e!=null}function si(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function M9(e){const{done:t,value:n}=e.next();return t?void 0:n}function q9(e,t,n,r){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:i,branch:s}=t,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${si(r)}\``}=e;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...e,message:c}}function*t1(e,t,n,r){U9(e)||(e=[e]);for(const i of e){const s=q9(i,t,n,r);s&&(yield s)}}function*np(e,t,n={}){const{path:r=[],branch:i=[e],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i};if(s&&(e=t.coercer(e,a),o&&t.type!=="type"&&ni(t.schema)&&ni(e)&&!Array.isArray(e)))for(const u in e)t.schema[u]===void 0&&delete e[u];let c="valid";for(const u of t.validator(e,a))u.explanation=n.message,c="not_valid",yield[u,void 0];for(let[u,d,l]of t.entries(e,a)){const f=np(d,l,{path:u===void 0?r:[...r,u],branch:u===void 0?i:[...i,d],coerce:s,mask:o,message:n.message});for(const p of f)p[0]?(c=p[0].refinement!=null?"not_refined":"not_valid",yield[p[0],void 0]):s&&(d=p[1],u===void 0?e=d:e instanceof Map?e.set(u,d):e instanceof Set?e.add(d):ni(e)&&(d!==void 0||u in e)&&(e[u]=d))}if(c!=="not_valid")for(const u of t.refiner(e,a))u.explanation=n.message,c="not_refined",yield[u,void 0];c==="valid"&&(yield[void 0,e])}class Ci{constructor(t){const{type:n,schema:r,validator:i,refiner:s,coercer:o=c=>c,entries:a=function*(){}}=t;this.type=n,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(c,u)=>{const d=i(c,u);return t1(d,u,this,c)}:this.validator=()=>[],s?this.refiner=(c,u)=>{const d=s(c,u);return t1(d,u,this,c)}:this.refiner=()=>[]}assert(t,n){return wl(t,this,n)}create(t,n){return Zw(t,this,n)}is(t){return Fn(t,this)}mask(t,n){return Jw(t,this,n)}validate(t,n={}){return Wa(t,this,n)}}function wl(e,t,n){const r=Wa(e,t,{message:n});if(r[0])throw r[0]}function Zw(e,t,n){const r=Wa(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function Jw(e,t,n){const r=Wa(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function Fn(e,t){return!Wa(e,t)[0]}function Wa(e,t,n={}){const r=np(e,t,n),i=M9(r);return i[0]?[new $9(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function ji(...e){const t=e[0].type==="type",n=e.map(i=>i.schema),r=Object.assign({},...n);return t?N9(r):ie(r)}function vi(e,t){return new Ci({type:e,schema:null,validator:t})}function Zi(){return vi("any",()=>!0)}function Se(e){return new Ci({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,r]of t.entries())yield[n,r,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${si(t)}`}})}function cn(){return vi("boolean",e=>typeof e=="boolean")}function Vi(){return vi("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${si(e)}`)}function Ve(e){const t=si(e),n=typeof e;return new Ci({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?e:null,validator(r){return r===e||`Expected the literal \`${t}\`, but received: ${si(r)}`}})}function Yw(){return vi("never",()=>!1)}function an(e){return new Ci({...e,validator:(t,n)=>t===null||e.validator(t,n),refiner:(t,n)=>t===null||e.refiner(t,n)})}function wt(){return vi("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${si(e)}`)}function ie(e){const t=e?Object.keys(e):[],n=Yw();return new Ci({type:"object",schema:e||null,*entries(r){if(e&&ni(r)){const i=new Set(Object.keys(r));for(const s of t)i.delete(s),yield[s,r[s],e[s]];for(const s of i)yield[s,r[s],n]}},validator(r){return ni(r)||`Expected an object, but received: ${si(r)}`},coercer(r){return ni(r)?{...r}:r}})}function Pe(e){return new Ci({...e,validator:(t,n)=>t===void 0||e.validator(t,n),refiner:(t,n)=>t===void 0||e.refiner(t,n)})}function Ji(e,t){return new Ci({type:"record",schema:null,*entries(n){if(ni(n))for(const r in n){const i=n[r];yield[r,r,e],yield[r,i,t]}},validator(n){return ni(n)||`Expected an object, but received: ${si(n)}`}})}function Z(){return vi("string",e=>typeof e=="string"||`Expected a string, but received: ${si(e)}`)}function Ur(e){const t=Yw();return new Ci({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(e.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],e[i]||t]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${si(n)}`}})}function N9(e){const t=Object.keys(e);return new Ci({type:"type",schema:e,*entries(n){if(ni(n))for(const r of t)yield[r,n[r],e[r]]},validator(n){return ni(n)||`Expected an object, but received: ${si(n)}`},coercer(n){return ni(n)?{...n}:n}})}function Qt(e){const t=e.map(n=>n.type).join(" | ");return new Ci({type:"union",schema:null,coercer(n){for(const r of e){const[i,s]=r.validate(n,{coerce:!0});if(!i)return s}return n},validator(n,r){const i=[];for(const s of e){const[...o]=np(n,s,r),[a]=o;if(a[0])for(const[c]of o)c&&i.push(c);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${si(n)}`,...i]}})}function Qw(e){return/^\d+\.\d+\.\d+$/.test(e)}function _i(e){if(!Qw(e))throw new Error("Invalid semver version: "+e);const[t,n,r]=e.split(".").map(i=>parseInt(i,10));return{major:t,minor:n,patch:r}}function D9(e,t){const n=_i(e),r=_i(t);return n.major!==r.major?n.major<r.major:n.minor!==r.minor?n.minor<r.minor:n.patch!==r.patch?n.patch<r.patch:!1}function L9(e,t){const n=_i(e),r=_i(t);return n.major!==r.major?n.major<=r.major:n.minor!==r.minor?n.minor<=r.minor:n.patch!==r.patch?n.patch<=r.patch:!0}function H9(e,t){const n=_i(e),r=_i(t);return n.major!==r.major?n.major>r.major:n.minor!==r.minor?n.minor>r.minor:n.patch!==r.patch?n.patch>r.patch:!1}function z9(e,t){const n=_i(e),r=_i(t);return n.major!==r.major?n.major>=r.major:n.minor!==r.minor?n.minor>=r.minor:n.patch!==r.patch?n.patch>=r.patch:!0}function j9(e,t){return _i(e),_i(t),e===t}var F9={isValid:Qw,parse:_i,lt:D9,lte:L9,gt:H9,gte:z9,eq:j9};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const G9=BigInt(0),rp=BigInt(1),W9=BigInt(2),Qd=e=>e instanceof Uint8Array,V9=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ka(e){if(!Qd(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=V9[e[n]];return t}function e2(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function ip(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Ba(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(e.length%2)throw new Error("hex string is invalid: unpadded "+e.length);const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=n*2,i=e.slice(r,r+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("invalid byte sequence");t[n]=s}return t}function wr(e){return ip(ka(e))}function sp(e){if(!Qd(e))throw new Error("Uint8Array expected");return ip(ka(Uint8Array.from(e).reverse()))}const Is=(e,t)=>Ba(e.toString(16).padStart(t*2,"0")),t2=(e,t)=>Is(e,t).reverse(),K9=e=>Ba(e2(e));function Jn(e,t,n){let r;if(typeof t=="string")try{r=Ba(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(Qd(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function Mr(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!Qd(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function X9(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ef(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Z9(e){let t;for(t=0;e>0n;e>>=rp,t+=1);return t}const J9=(e,t)=>e>>BigInt(t)&1n,Y9=(e,t,n)=>e|(n?rp:G9)<<BigInt(t),op=e=>(W9<<BigInt(e-1))-rp,zf=e=>new Uint8Array(e),n1=e=>Uint8Array.from(e);function n2(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=zf(e),i=zf(e),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...l)=>n(i,r,...l),c=(l=zf())=>{i=a(n1([0]),l),r=a(),l.length!==0&&(i=a(n1([1]),l),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const f=[];for(;l<t;){r=a();const p=r.slice();f.push(p),l+=r.length}return Mr(...f)};return(l,f)=>{o(),c(l);let p;for(;!(p=f(u()));)c();return o(),p}}const Q9={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Va(e,t,n={}){const r=(i,s,o)=>{const a=Q9[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=e[i];if(!(o&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}const eB=Object.freeze(Object.defineProperty({__proto__:null,bitGet:J9,bitLen:Z9,bitMask:op,bitSet:Y9,bytesToHex:ka,bytesToNumberBE:wr,bytesToNumberLE:sp,concatBytes:Mr,createHmacDrbg:n2,ensureBytes:Jn,equalBytes:X9,hexToBytes:Ba,hexToNumber:ip,numberToBytesBE:Is,numberToBytesLE:t2,numberToHexUnpadded:e2,numberToVarBytesBE:K9,utf8ToBytes:ef,validateObject:Va},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gn=BigInt(0),Rn=BigInt(1),Ks=BigInt(2),tB=BigInt(3),$0=BigInt(4),r1=BigInt(5),i1=BigInt(8);BigInt(9);BigInt(16);function Ln(e,t){const n=e%t;return n>=Gn?n:t+n}function nB(e,t,n){if(n<=Gn||t<Gn)throw new Error("Expected power/modulo > 0");if(n===Rn)return Gn;let r=Rn;for(;t>Gn;)t&Rn&&(r=r*e%n),e=e*e%n,t>>=Rn;return r}function Gr(e,t,n){let r=e;for(;t-- >Gn;)r*=r,r%=n;return r}function U0(e,t){if(e===Gn||t<=Gn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Ln(e,t),r=t,i=Gn,s=Rn;for(;n!==Gn;){const a=r/n,c=r%n,u=i-s*a;r=n,n=c,i=s,s=u}if(r!==Rn)throw new Error("invert: does not exist");return Ln(i,t)}function rB(e){const t=(e-Rn)/Ks;let n,r,i;for(n=e-Rn,r=0;n%Ks===Gn;n/=Ks,r++);for(i=Ks;i<e&&nB(i,t,e)!==e-Rn;i++);if(r===1){const o=(e+Rn)/$0;return function(c,u){const d=c.pow(u,o);if(!c.eql(c.sqr(d),u))throw new Error("Cannot find square root");return d}}const s=(n+Rn)/Ks;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,d=a.pow(a.mul(a.ONE,i),n),l=a.pow(c,s),f=a.pow(c,n);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let p=1;for(let y=a.sqr(f);p<u&&!a.eql(y,a.ONE);p++)y=a.sqr(y);const _=a.pow(d,Rn<<BigInt(u-p-1));d=a.sqr(_),l=a.mul(l,_),f=a.mul(f,d),u=p}return l}}function iB(e){if(e%$0===tB){const t=(e+Rn)/$0;return function(r,i){const s=r.pow(i,t);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%i1===r1){const t=(e-r1)/i1;return function(r,i){const s=r.mul(i,Ks),o=r.pow(s,t),a=r.mul(i,o),c=r.mul(r.mul(a,Ks),o),u=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),i))throw new Error("Cannot find square root");return u}}return rB(e)}const sB=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function r2(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=sB.reduce((r,i)=>(r[i]="function",r),t);return Va(e,n)}function oB(e,t,n){if(n<Gn)throw new Error("Expected power > 0");if(n===Gn)return e.ONE;if(n===Rn)return t;let r=e.ONE,i=t;for(;n>Gn;)n&Rn&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Rn;return r}function aB(e,t){const n=new Array(t.length),r=t.reduce((s,o,a)=>e.is0(o)?s:(n[a]=s,e.mul(s,o)),e.ONE),i=e.inv(r);return t.reduceRight((s,o,a)=>e.is0(o)?s:(n[a]=e.mul(s,n[a]),e.mul(s,o)),i),n}function ap(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function cB(e,t,n=!1,r={}){if(e<=Gn)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=ap(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=iB(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:op(i),ZERO:Gn,ONE:Rn,create:c=>Ln(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Gn<=c&&c<e},is0:c=>c===Gn,isOdd:c=>(c&Rn)===Rn,neg:c=>Ln(-c,e),eql:(c,u)=>c===u,sqr:c=>Ln(c*c,e),add:(c,u)=>Ln(c+u,e),sub:(c,u)=>Ln(c-u,e),mul:(c,u)=>Ln(c*u,e),pow:(c,u)=>oB(a,c,u),div:(c,u)=>Ln(c*U0(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>U0(c,e),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>aB(a,c),cmov:(c,u,d)=>d?u:c,toBytes:c=>n?t2(c,s):Is(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return n?sp(c):wr(c)}});return Object.freeze(a)}function uB(e,t,n=!1){e=Jn("privateHash",e);const r=e.length,i=ap(t).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);const s=n?sp(e):wr(e);return Ln(s,t-Rn)+Rn}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lB=BigInt(0),jf=BigInt(1);function dB(e,t){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(t/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>lB;)s&jf&&(o=o.add(a)),a=a.double(),s>>=jf;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),c=[];let u=i,d=u;for(let l=0;l<o;l++){d=u,c.push(d);for(let f=1;f<a;f++)d=d.add(u),c.push(d);u=d.double()}return c},wNAF(i,s,o){const{windows:a,windowSize:c}=r(i);let u=e.ZERO,d=e.BASE;const l=BigInt(2**i-1),f=2**i,p=BigInt(i);for(let _=0;_<a;_++){const y=_*c;let b=Number(o&l);o>>=p,b>c&&(b-=f,o+=jf);const B=y,E=y+Math.abs(b)-1,x=_%2!==0,S=b<0;b===0?d=d.add(n(x,s[B])):u=u.add(n(S,s[E]))}return{p:u,f:d}},wNAFCached(i,s,o,a){const c=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&s.set(i,a(u))),this.wNAF(c,u,o)}}}function i2(e){return r2(e.Fp),Va(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ap(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function fB(e){const t=i2(e);Va(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:hB,hexToBytes:pB}=eB,eo={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=eo;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new t("Invalid signature integer: trailing length");return{d:hB(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=eo,n=typeof e=="string"?pB(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=eo._parseInt(n.subarray(2)),{d:o,l:a}=eo._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const t=u=>Number.parseInt(u[0],16)>=8?"00"+u:u,n=u=>{const d=u.toString(16);return d.length&1?`0${d}`:d},r=t(n(e.s)),i=t(n(e.r)),s=r.length/2,o=i.length/2,a=n(s),c=n(o);return`30${n(o+s+4)}02${c}${i}02${a}${r}`}},di=BigInt(0),Nn=BigInt(1),Ui=BigInt(2),bl=BigInt(3),s1=BigInt(4);function gB(e){const t=fB(e),{Fp:n}=t,r=t.toBytes||((_,y,b)=>{const B=y.toAffine();return Mr(Uint8Array.from([4]),n.toBytes(B.x),n.toBytes(B.y))}),i=t.fromBytes||(_=>{const y=_.subarray(1),b=n.fromBytes(y.subarray(0,n.BYTES)),B=n.fromBytes(y.subarray(n.BYTES,2*n.BYTES));return{x:b,y:B}});function s(_){const{a:y,b}=t,B=n.sqr(_),E=n.mul(B,_);return n.add(n.add(E,n.mul(_,y)),b)}function o(_){return typeof _=="bigint"&&di<_&&_<t.n}function a(_){if(!o(_))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(_){const{allowedPrivateKeyLengths:y,nByteLength:b,wrapPrivateKey:B,n:E}=t;if(y&&typeof _!="bigint"){if(_ instanceof Uint8Array&&(_=ka(_)),typeof _!="string"||!y.includes(_.length))throw new Error("Invalid key");_=_.padStart(b*2,"0")}let x;try{x=typeof _=="bigint"?_:wr(Jn("private key",_,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof _}`)}return B&&(x=Ln(x,E)),a(x),x}const u=new Map;function d(_){if(!(_ instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(y,b,B){if(this.px=y,this.py=b,this.pz=B,y==null||!n.isValid(y))throw new Error("x required");if(b==null||!n.isValid(b))throw new Error("y required");if(B==null||!n.isValid(B))throw new Error("z required")}static fromAffine(y){const{x:b,y:B}=y||{};if(!y||!n.isValid(b)||!n.isValid(B))throw new Error("invalid affine point");if(y instanceof l)throw new Error("projective point not allowed");const E=x=>n.eql(x,n.ZERO);return E(b)&&E(B)?l.ZERO:new l(b,B,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const b=n.invertBatch(y.map(B=>B.pz));return y.map((B,E)=>B.toAffine(b[E])).map(l.fromAffine)}static fromHex(y){const b=l.fromAffine(i(Jn("pointHex",y)));return b.assertValidity(),b}static fromPrivateKey(y){return l.BASE.multiply(c(y))}_setWindowSize(y){this._WINDOW_SIZE=y,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:y,y:b}=this.toAffine();if(!n.isValid(y)||!n.isValid(b))throw new Error("bad point: x or y not FE");const B=n.sqr(b),E=s(y);if(!n.eql(B,E))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y}=this.toAffine();if(n.isOdd)return!n.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){d(y);const{px:b,py:B,pz:E}=this,{px:x,py:S,pz:T}=y,R=n.eql(n.mul(b,T),n.mul(x,E)),P=n.eql(n.mul(B,T),n.mul(S,E));return R&&P}negate(){return new l(this.px,n.neg(this.py),this.pz)}double(){const{a:y,b}=t,B=n.mul(b,bl),{px:E,py:x,pz:S}=this;let T=n.ZERO,R=n.ZERO,P=n.ZERO,C=n.mul(E,E),G=n.mul(x,x),F=n.mul(S,S),U=n.mul(E,x);return U=n.add(U,U),P=n.mul(E,S),P=n.add(P,P),T=n.mul(y,P),R=n.mul(B,F),R=n.add(T,R),T=n.sub(G,R),R=n.add(G,R),R=n.mul(T,R),T=n.mul(U,T),P=n.mul(B,P),F=n.mul(y,F),U=n.sub(C,F),U=n.mul(y,U),U=n.add(U,P),P=n.add(C,C),C=n.add(P,C),C=n.add(C,F),C=n.mul(C,U),R=n.add(R,C),F=n.mul(x,S),F=n.add(F,F),C=n.mul(F,U),T=n.sub(T,C),P=n.mul(F,G),P=n.add(P,P),P=n.add(P,P),new l(T,R,P)}add(y){d(y);const{px:b,py:B,pz:E}=this,{px:x,py:S,pz:T}=y;let R=n.ZERO,P=n.ZERO,C=n.ZERO;const G=t.a,F=n.mul(t.b,bl);let U=n.mul(b,x),N=n.mul(B,S),k=n.mul(E,T),h=n.add(b,B),g=n.add(x,S);h=n.mul(h,g),g=n.add(U,N),h=n.sub(h,g),g=n.add(b,E);let v=n.add(x,T);return g=n.mul(g,v),v=n.add(U,k),g=n.sub(g,v),v=n.add(B,E),R=n.add(S,T),v=n.mul(v,R),R=n.add(N,k),v=n.sub(v,R),C=n.mul(G,g),R=n.mul(F,k),C=n.add(R,C),R=n.sub(N,C),C=n.add(N,C),P=n.mul(R,C),N=n.add(U,U),N=n.add(N,U),k=n.mul(G,k),g=n.mul(F,g),N=n.add(N,k),k=n.sub(U,k),k=n.mul(G,k),g=n.add(g,k),U=n.mul(N,g),P=n.add(P,U),U=n.mul(v,g),R=n.mul(h,R),R=n.sub(R,U),U=n.mul(h,N),C=n.mul(v,C),C=n.add(C,U),new l(R,P,C)}subtract(y){return this.add(y.negate())}is0(){return this.equals(l.ZERO)}wNAF(y){return p.wNAFCached(this,u,y,b=>{const B=n.invertBatch(b.map(E=>E.pz));return b.map((E,x)=>E.toAffine(B[x])).map(l.fromAffine)})}multiplyUnsafe(y){const b=l.ZERO;if(y===di)return b;if(a(y),y===Nn)return this;const{endo:B}=t;if(!B)return p.unsafeLadder(this,y);let{k1neg:E,k1:x,k2neg:S,k2:T}=B.splitScalar(y),R=b,P=b,C=this;for(;x>di||T>di;)x&Nn&&(R=R.add(C)),T&Nn&&(P=P.add(C)),C=C.double(),x>>=Nn,T>>=Nn;return E&&(R=R.negate()),S&&(P=P.negate()),P=new l(n.mul(P.px,B.beta),P.py,P.pz),R.add(P)}multiply(y){a(y);let b=y,B,E;const{endo:x}=t;if(x){const{k1neg:S,k1:T,k2neg:R,k2:P}=x.splitScalar(b);let{p:C,f:G}=this.wNAF(T),{p:F,f:U}=this.wNAF(P);C=p.constTimeNegate(S,C),F=p.constTimeNegate(R,F),F=new l(n.mul(F.px,x.beta),F.py,F.pz),B=C.add(F),E=G.add(U)}else{const{p:S,f:T}=this.wNAF(b);B=S,E=T}return l.normalizeZ([B,E])[0]}multiplyAndAddUnsafe(y,b,B){const E=l.BASE,x=(T,R)=>R===di||R===Nn||!T.equals(E)?T.multiplyUnsafe(R):T.multiply(R),S=x(this,b).add(x(y,B));return S.is0()?void 0:S}toAffine(y){const{px:b,py:B,pz:E}=this,x=this.is0();y==null&&(y=x?n.ONE:n.inv(E));const S=n.mul(b,y),T=n.mul(B,y),R=n.mul(E,y);if(x)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:S,y:T}}isTorsionFree(){const{h:y,isTorsionFree:b}=t;if(y===Nn)return!0;if(b)return b(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:b}=t;return y===Nn?this:b?b(l,this):this.multiplyUnsafe(t.h)}toRawBytes(y=!0){return this.assertValidity(),r(l,this,y)}toHex(y=!0){return ka(this.toRawBytes(y))}}l.BASE=new l(t.Gx,t.Gy,n.ONE),l.ZERO=new l(n.ZERO,n.ONE,n.ZERO);const f=t.nBitLength,p=dB(l,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function yB(e){const t=i2(e);return Va(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function mB(e){const t=yB(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function o(g){return di<g&&g<n.ORDER}function a(g){return Ln(g,r)}function c(g){return U0(g,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:l,isWithinCurveOrder:f}=gB({...t,toBytes(g,v,O){const L=v.toAffine(),z=n.toBytes(L.x),W=Mr;return O?W(Uint8Array.from([v.hasEvenY()?2:3]),z):W(Uint8Array.from([4]),z,n.toBytes(L.y))},fromBytes(g){const v=g.length,O=g[0],L=g.subarray(1);if(v===i&&(O===2||O===3)){const z=wr(L);if(!o(z))throw new Error("Point is not on curve");const W=l(z);let $=n.sqrt(W);const w=($&Nn)===Nn;return(O&1)===1!==w&&($=n.neg($)),{x:z,y:$}}else if(v===s&&O===4){const z=n.fromBytes(L.subarray(0,n.BYTES)),W=n.fromBytes(L.subarray(n.BYTES,2*n.BYTES));return{x:z,y:W}}else throw new Error(`Point of length ${v} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),p=g=>ka(Is(g,t.nByteLength));function _(g){const v=r>>Nn;return g>v}function y(g){return _(g)?a(-g):g}const b=(g,v,O)=>wr(g.slice(v,O));class B{constructor(v,O,L){this.r=v,this.s=O,this.recovery=L,this.assertValidity()}static fromCompact(v){const O=t.nByteLength;return v=Jn("compactSignature",v,O*2),new B(b(v,0,O),b(v,O,2*O))}static fromDER(v){const{r:O,s:L}=eo.toSig(Jn("DER",v));return new B(O,L)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(v){return new B(this.r,this.s,v)}recoverPublicKey(v){const{r:O,s:L,recovery:z}=this,W=P(Jn("msgHash",v));if(z==null||![0,1,2,3].includes(z))throw new Error("recovery id invalid");const $=z===2||z===3?O+t.n:O;if($>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const w=z&1?"03":"02",H=u.fromHex(w+p($)),re=c($),Q=a(-W*re),ce=a(L*re),Be=u.BASE.multiplyAndAddUnsafe(H,Q,ce);if(!Be)throw new Error("point at infinify");return Be.assertValidity(),Be}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new B(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ba(this.toDERHex())}toDERHex(){return eo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ba(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const E={isValidPrivateKey(g){try{return d(g),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const g=t.randomBytes(n.BYTES+8),v=uB(g,r);return Is(v,t.nByteLength)},precompute(g=8,v=u.BASE){return v._setWindowSize(g),v.multiply(BigInt(3)),v}};function x(g,v=!0){return u.fromPrivateKey(g).toRawBytes(v)}function S(g){const v=g instanceof Uint8Array,O=typeof g=="string",L=(v||O)&&g.length;return v?L===i||L===s:O?L===2*i||L===2*s:g instanceof u}function T(g,v,O=!0){if(S(g))throw new Error("first arg must be private key");if(!S(v))throw new Error("second arg must be public key");return u.fromHex(v).multiply(d(g)).toRawBytes(O)}const R=t.bits2int||function(g){const v=wr(g),O=g.length*8-t.nBitLength;return O>0?v>>BigInt(O):v},P=t.bits2int_modN||function(g){return a(R(g))},C=op(t.nBitLength);function G(g){if(typeof g!="bigint")throw new Error("bigint expected");if(!(di<=g&&g<C))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Is(g,t.nByteLength)}function F(g,v,O=U){if(["recovered","canonical"].some(J=>J in O))throw new Error("sign() legacy options not supported");const{hash:L,randomBytes:z}=t;let{lowS:W,prehash:$,extraEntropy:w}=O;W==null&&(W=!0),g=Jn("msgHash",g),$&&(g=Jn("prehashed msgHash",L(g)));const H=P(g),re=d(v),Q=[G(re),G(H)];if(w!=null){const J=w===!0?z(n.BYTES):w;Q.push(Jn("extraEntropy",J,n.BYTES))}const ce=Mr(...Q),Be=H;function Ue(J){const j=R(J);if(!f(j))return;const K=c(j),Y=u.BASE.multiply(j).toAffine(),ne=a(Y.x);if(ne===di)return;const ue=a(K*a(Be+ne*re));if(ue===di)return;let le=(Y.x===ne?0:2)|Number(Y.y&Nn),fe=ue;return W&&_(ue)&&(fe=y(ue),le^=1),new B(ne,fe,le)}return{seed:ce,k2sig:Ue}}const U={lowS:t.lowS,prehash:!1},N={lowS:t.lowS,prehash:!1};function k(g,v,O=U){const{seed:L,k2sig:z}=F(g,v,O);return n2(t.hash.outputLen,t.nByteLength,t.hmac)(L,z)}u.BASE._setWindowSize(8);function h(g,v,O,L=N){var Y;const z=g;if(v=Jn("msgHash",v),O=Jn("publicKey",O),"strict"in L)throw new Error("options.strict was renamed to lowS");const{lowS:W,prehash:$}=L;let w,H;try{if(typeof z=="string"||z instanceof Uint8Array)try{w=B.fromDER(z)}catch(ne){if(!(ne instanceof eo.Err))throw ne;w=B.fromCompact(z)}else if(typeof z=="object"&&typeof z.r=="bigint"&&typeof z.s=="bigint"){const{r:ne,s:ue}=z;w=new B(ne,ue)}else throw new Error("PARSE");H=u.fromHex(O)}catch(ne){if(ne.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(W&&w.hasHighS())return!1;$&&(v=t.hash(v));const{r:re,s:Q}=w,ce=P(v),Be=c(Q),Ue=a(ce*Be),J=a(re*Be),j=(Y=u.BASE.multiplyAndAddUnsafe(H,Ue,J))==null?void 0:Y.toAffine();return j?a(j.x)===re:!1}return{CURVE:t,getPublicKey:x,getSharedSecret:T,sign:k,verify:h,ProjectivePoint:u,Signature:B,utils:E}}function _B(e,t){const n=e.ORDER;let r=di;for(let f=n-Nn;f%Ui===di;f/=Ui)r+=Nn;const i=r,s=(n-Nn)/Ui**i,o=(s-Nn)/Ui,a=Ui**i-Nn,c=Ui**(i-Nn),u=e.pow(t,s),d=e.pow(t,(s+Nn)/Ui);let l=(f,p)=>{let _=u,y=e.pow(p,a),b=e.sqr(y);b=e.mul(b,p);let B=e.mul(f,b);B=e.pow(B,o),B=e.mul(B,y),y=e.mul(B,p),b=e.mul(B,f);let E=e.mul(b,y);B=e.pow(E,c);let x=e.eql(B,e.ONE);y=e.mul(b,d),B=e.mul(E,_),b=e.cmov(y,b,x),E=e.cmov(B,E,x);for(let S=i;S>1;S--){let T=Ui**(S-Ui),R=e.pow(E,T);const P=e.eql(R,e.ONE);y=e.mul(b,_),_=e.mul(_,_),R=e.mul(E,_),b=e.cmov(y,b,P),E=e.cmov(R,E,P)}return{isValid:x,value:b}};if(e.ORDER%s1===bl){const f=(e.ORDER-bl)/s1,p=e.sqrt(e.neg(t));l=(_,y)=>{let b=e.sqr(y);const B=e.mul(_,y);b=e.mul(b,B);let E=e.pow(b,f);E=e.mul(E,B);const x=e.mul(E,p),S=e.mul(e.sqr(E),y),T=e.eql(S,_);let R=e.cmov(x,E,T);return{isValid:T,value:R}}}return l}function wB(e,t){if(r2(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=_B(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,s,o,a,c,u,d,l;i=e.sqr(r),i=e.mul(i,t.Z),s=e.sqr(i),s=e.add(s,i),o=e.add(s,e.ONE),o=e.mul(o,t.B),a=e.cmov(t.Z,e.neg(s),!e.eql(s,e.ZERO)),a=e.mul(a,t.A),s=e.sqr(o),u=e.sqr(a),c=e.mul(u,t.A),s=e.add(s,c),s=e.mul(s,o),u=e.mul(u,a),c=e.mul(u,t.B),s=e.add(s,c),d=e.mul(i,o);const{isValid:f,value:p}=n(s,u);l=e.mul(i,r),l=e.mul(l,p),d=e.cmov(d,o,f),l=e.cmov(l,p,f);const _=e.isOdd(r)===e.isOdd(l);return l=e.cmov(e.neg(l),l,_),d=e.div(d,a),{x:d,y:l}}}function bB(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return ef(e);throw new Error("DST must be Uint8Array or string")}const vB=wr;function Ts(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=e&255,e>>>=8;return new Uint8Array(n)}function xB(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function Bc(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function cp(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function SB(e,t,n,r){Bc(e),Bc(t),cp(n),t.length>255&&(t=r(Mr(ef("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:s}=r,o=Math.ceil(n/i);if(o>255)throw new Error("Invalid xmd length");const a=Mr(t,Ts(t.length,1)),c=Ts(0,s),u=Ts(n,2),d=new Array(o),l=r(Mr(c,e,u,Ts(0,1),a));d[0]=r(Mr(l,Ts(1,1),a));for(let p=1;p<=o;p++){const _=[xB(l,d[p-1]),Ts(p+1,1),a];d[p]=r(Mr(..._))}return Mr(...d).slice(0,n)}function TB(e,t,n,r,i){if(Bc(e),Bc(t),cp(n),t.length>255){const s=Math.ceil(2*r/8);t=i.create({dkLen:s}).update(ef("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(Ts(n,2)).update(t).update(Ts(t.length,1)).digest()}function o1(e,t,n){Va(n,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:s,hash:o,expand:a,DST:c}=n;Bc(e),cp(t);const u=bB(c),d=r.toString(2).length,l=Math.ceil((d+i)/8),f=t*s*l;let p;if(a==="xmd")p=SB(e,u,f,o);else if(a==="xof")p=TB(e,u,f,i,o);else if(a===void 0)p=e;else throw new Error('expand must be "xmd", "xof" or undefined');const _=new Array(t);for(let y=0;y<t;y++){const b=new Array(s);for(let B=0;B<s;B++){const E=l*(B+y*s),x=p.subarray(E,E+l);b[B]=Ln(vB(x),r)}_[y]=b}return _}function AB(e,t){const n=t.map(r=>Array.from(r).reverse());return(r,i)=>{const[s,o,a,c]=n.map(u=>u.reduce((d,l)=>e.add(e.mul(d,r),l)));return r=e.div(s,o),i=e.mul(i,e.div(a,c)),{x:r,y:i}}}function EB(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){const s=o1(r,2,{...n,DST:n.DST,...i}),o=e.fromAffine(t(s[0])),a=e.fromAffine(t(s[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,i){const s=o1(r,1,{...n,DST:n.encodeDST,...i}),o=e.fromAffine(t(s[0])).clearCofactor();return o.assertValidity(),o}}}class s2 extends Yd{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,$r.hash(t);const r=Wi(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){return $r.exists(this),this.iHash.update(t),this}digestInto(t){$r.exists(this),$r.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const up=(e,t,n)=>new s2(e,t).update(n).digest();up.create=(e,t)=>new s2(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function kB(e){return{hash:e,hmac:(t,...n)=>up(e,t,ep(...n)),randomBytes:iu}}function BB(e,t){const n=r=>mB({...e,...kB(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tf=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),vl=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),o2=BigInt(1),xl=BigInt(2),a1=(e,t)=>(e+t/xl)/t;function a2(e){const t=tf,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,d=u*u*e%t,l=Gr(d,n,t)*d%t,f=Gr(l,n,t)*d%t,p=Gr(f,xl,t)*u%t,_=Gr(p,i,t)*p%t,y=Gr(_,s,t)*_%t,b=Gr(y,a,t)*y%t,B=Gr(b,c,t)*b%t,E=Gr(B,a,t)*y%t,x=Gr(E,n,t)*d%t,S=Gr(x,o,t)*_%t,T=Gr(S,r,t)*u%t,R=Gr(T,xl,t);if(!Us.eql(Us.sqr(R),e))throw new Error("Cannot find square root");return R}const Us=cB(tf,void 0,void 0,{sqrt:a2}),nf=BB({a:BigInt(0),b:BigInt(7),Fp:Us,n:vl,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=vl,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-o2*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=a1(s*e,t),c=a1(-r*e,t);let u=Ln(e-a*n-c*i,t),d=Ln(-a*r-c*s,t);const l=u>o,f=d>o;if(l&&(u=t-u),f&&(d=t-d),u>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:f,k2:d}}}},Ii),rf=BigInt(0),c2=e=>typeof e=="bigint"&&rf<e&&e<tf,RB=e=>typeof e=="bigint"&&rf<e&&e<vl,c1={};function Sl(e,...t){let n=c1[e];if(n===void 0){const r=Ii(Uint8Array.from(e,i=>i.charCodeAt(0)));n=Mr(r,r),c1[e]=n}return Ii(Mr(n,...t))}const lp=e=>e.toRawBytes(!0).slice(1),M0=e=>Is(e,32),Ff=e=>Ln(e,tf),Rc=e=>Ln(e,vl),dp=nf.ProjectivePoint,PB=(e,t,n)=>dp.BASE.multiplyAndAddUnsafe(e,t,n);function q0(e){let t=nf.utils.normPrivateKeyToScalar(e),n=dp.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Rc(-t),bytes:lp(n)}}function u2(e){if(!c2(e))throw new Error("bad x: need 0 < x < p");const t=Ff(e*e),n=Ff(t*e+BigInt(7));let r=a2(n);r%xl!==rf&&(r=Ff(-r));const i=new dp(e,r,o2);return i.assertValidity(),i}function l2(...e){return Rc(wr(Sl("BIP0340/challenge",...e)))}function OB(e){return q0(e).bytes}function IB(e,t,n=iu(32)){const r=Jn("message",e),{bytes:i,scalar:s}=q0(t),o=Jn("auxRand",n,32),a=M0(s^wr(Sl("BIP0340/aux",o))),c=Sl("BIP0340/nonce",a,i,r),u=Rc(wr(c));if(u===rf)throw new Error("sign failed: k is zero");const{bytes:d,scalar:l}=q0(u),f=l2(d,i,r),p=new Uint8Array(64);if(p.set(d,0),p.set(M0(Rc(l+f*s)),32),!d2(p,r,i))throw new Error("sign: Invalid signature produced");return p}function d2(e,t,n){const r=Jn("signature",e,64),i=Jn("message",t),s=Jn("publicKey",n,32);try{const o=u2(wr(s)),a=wr(r.subarray(0,32));if(!c2(a))return!1;const c=wr(r.subarray(32,64));if(!RB(c))return!1;const u=l2(M0(a),lp(o),i),d=PB(o,c,Rc(-u));return!(!d||!d.hasEvenY()||d.toAffine().x!==a)}catch{return!1}}nf.utils.randomPrivateKey;const CB=AB(Us,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),$B=wB(Us,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Us.create(BigInt("-11"))});EB(nf.ProjectivePoint,e=>{const{x:t,y:n}=$B(Us.create(e[0]));return CB(t,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Us.ORDER,m:1,k:128,expand:"xmd",hash:Ii});var qr={},Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.output=Qn.exists=Qn.hash=Qn.bytes=Qn.bool=Qn.number=void 0;function Tl(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}Qn.number=Tl;function f2(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}Qn.bool=f2;function fp(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}Qn.bytes=fp;function h2(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Tl(e.outputLen),Tl(e.blockLen)}Qn.hash=h2;function p2(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}Qn.exists=p2;function g2(e,t){fp(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Qn.output=g2;const UB={number:Tl,bool:f2,bytes:fp,hash:h2,exists:p2,output:g2};Qn.default=UB;var Ra={},y2={},hp={};const MB=Ia(Vk);(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=MB,n=S=>new Uint8Array(S.buffer,S.byteOffset,S.byteLength);e.u8=n;const r=S=>new Uint32Array(S.buffer,S.byteOffset,Math.floor(S.byteLength/4));e.u32=r;const i=S=>new DataView(S.buffer,S.byteOffset,S.byteLength);e.createView=i;const s=(S,T)=>S<<32-T|S>>>T;if(e.rotr=s,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},(S,T)=>T.toString(16).padStart(2,"0"));function a(S){if(!(S instanceof Uint8Array))throw new Error("Uint8Array expected");let T="";for(let R=0;R<S.length;R++)T+=o[S[R]];return T}e.bytesToHex=a;function c(S){if(typeof S!="string")throw new TypeError("hexToBytes: expected string, got "+typeof S);if(S.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const T=new Uint8Array(S.length/2);for(let R=0;R<T.length;R++){const P=R*2,C=S.slice(P,P+2),G=Number.parseInt(C,16);if(Number.isNaN(G)||G<0)throw new Error("Invalid byte sequence");T[R]=G}return T}e.hexToBytes=c;const u=async()=>{};e.nextTick=u;async function d(S,T,R){let P=Date.now();for(let C=0;C<S;C++){R(C);const G=Date.now()-P;G>=0&&G<T||(await(0,e.nextTick)(),P+=G)}}e.asyncLoop=d;function l(S){if(typeof S!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof S}`);return new TextEncoder().encode(S)}e.utf8ToBytes=l;function f(S){if(typeof S=="string"&&(S=l(S)),!(S instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof S})`);return S}e.toBytes=f;function p(...S){if(!S.every(P=>P instanceof Uint8Array))throw new Error("Uint8Array list expected");if(S.length===1)return S[0];const T=S.reduce((P,C)=>P+C.length,0),R=new Uint8Array(T);for(let P=0,C=0;P<S.length;P++){const G=S[P];R.set(G,C),C+=G.length}return R}e.concatBytes=p;class _{clone(){return this._cloneInto()}}e.Hash=_;const y=S=>Object.prototype.toString.call(S)==="[object Object]"&&S.constructor===Object;function b(S,T){if(T!==void 0&&(typeof T!="object"||!y(T)))throw new TypeError("Options should be object or undefined");return Object.assign(S,T)}e.checkOpts=b;function B(S){const T=P=>S().update(f(P)).digest(),R=S();return T.outputLen=R.outputLen,T.blockLen=R.blockLen,T.create=()=>S(),T}e.wrapConstructor=B;function E(S){const T=(P,C)=>S(C).update(f(P)).digest(),R=S({});return T.outputLen=R.outputLen,T.blockLen=R.blockLen,T.create=P=>S(P),T}e.wrapConstructorWithOpts=E;function x(S=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(S));throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=x})(hp);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const t=Qn,n=hp;class r extends n.Hash{constructor(o,a){super(),this.finished=!1,this.destroyed=!1,t.default.hash(o);const c=(0,n.toBytes)(a);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,d=new Uint8Array(u);d.set(c.length>u?o.create().update(c).digest():c);for(let l=0;l<d.length;l++)d[l]^=54;this.iHash.update(d),this.oHash=o.create();for(let l=0;l<d.length;l++)d[l]^=106;this.oHash.update(d),d.fill(0)}update(o){return t.default.exists(this),this.iHash.update(o),this}digestInto(o){t.default.exists(this),t.default.bytes(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:c,finished:u,destroyed:d,blockLen:l,outputLen:f}=this;return o=o,o.finished=u,o.destroyed=d,o.blockLen=l,o.outputLen=f,o.oHash=a._cloneInto(o.oHash),o.iHash=c._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const i=(s,o,a)=>new r(s,o).update(a).digest();e.hmac=i,e.hmac.create=(s,o)=>new r(s,o)})(y2);Object.defineProperty(Ra,"__esModule",{value:!0});Ra.pbkdf2Async=Ra.pbkdf2=void 0;const Tu=Qn,qB=y2,oa=hp;function m2(e,t,n,r){Tu.default.hash(e);const i=(0,oa.checkOpts)({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(Tu.default.number(s),Tu.default.number(o),Tu.default.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=(0,oa.toBytes)(t),u=(0,oa.toBytes)(n),d=new Uint8Array(o),l=qB.hmac.create(e,c),f=l._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:d,PRF:l,PRFSalt:f}}function _2(e,t,n,r,i){return e.destroy(),t.destroy(),r&&r.destroy(),i.fill(0),n}function NB(e,t,n,r){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:c}=m2(e,t,n,r);let u;const d=new Uint8Array(4),l=(0,oa.createView)(d),f=new Uint8Array(a.outputLen);for(let p=1,_=0;_<s;p++,_+=a.outputLen){const y=o.subarray(_,_+a.outputLen);l.setInt32(0,p,!1),(u=c._cloneInto(u)).update(d).digestInto(f),y.set(f.subarray(0,y.length));for(let b=1;b<i;b++){a._cloneInto(u).update(f).digestInto(f);for(let B=0;B<y.length;B++)y[B]^=f[B]}}return _2(a,c,o,u,f)}Ra.pbkdf2=NB;async function DB(e,t,n,r){const{c:i,dkLen:s,asyncTick:o,DK:a,PRF:c,PRFSalt:u}=m2(e,t,n,r);let d;const l=new Uint8Array(4),f=(0,oa.createView)(l),p=new Uint8Array(c.outputLen);for(let _=1,y=0;y<s;_++,y+=c.outputLen){const b=a.subarray(y,y+c.outputLen);f.setInt32(0,_,!1),(d=u._cloneInto(d)).update(l).digestInto(p),b.set(p.subarray(0,b.length)),await(0,oa.asyncLoop)(i-1,o,B=>{c._cloneInto(d).update(p).digestInto(p);for(let E=0;E<b.length;E++)b[E]^=p[E]})}return _2(c,u,a,d,p)}Ra.pbkdf2Async=DB;const LB=Ia(c9),[HB,zB]=Xe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ms=new Uint32Array(80),_s=new Uint32Array(80);class su extends tp{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:u,El:d,Fh:l,Fl:f,Gh:p,Gl:_,Hh:y,Hl:b}=this;return[t,n,r,i,s,o,a,c,u,d,l,f,p,_,y,b]}set(t,n,r,i,s,o,a,c,u,d,l,f,p,_,y,b){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=l|0,this.Fl=f|0,this.Gh=p|0,this.Gl=_|0,this.Hh=y|0,this.Hl=b|0}process(t,n){for(let x=0;x<16;x++,n+=4)ms[x]=t.getUint32(n),_s[x]=t.getUint32(n+=4);for(let x=16;x<80;x++){const S=ms[x-15]|0,T=_s[x-15]|0,R=Xe.rotrSH(S,T,1)^Xe.rotrSH(S,T,8)^Xe.shrSH(S,T,7),P=Xe.rotrSL(S,T,1)^Xe.rotrSL(S,T,8)^Xe.shrSL(S,T,7),C=ms[x-2]|0,G=_s[x-2]|0,F=Xe.rotrSH(C,G,19)^Xe.rotrBH(C,G,61)^Xe.shrSH(C,G,6),U=Xe.rotrSL(C,G,19)^Xe.rotrBL(C,G,61)^Xe.shrSL(C,G,6),N=Xe.add4L(P,U,_s[x-7],_s[x-16]),k=Xe.add4H(N,R,F,ms[x-7],ms[x-16]);ms[x]=k|0,_s[x]=N|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:u,Dl:d,Eh:l,El:f,Fh:p,Fl:_,Gh:y,Gl:b,Hh:B,Hl:E}=this;for(let x=0;x<80;x++){const S=Xe.rotrSH(l,f,14)^Xe.rotrSH(l,f,18)^Xe.rotrBH(l,f,41),T=Xe.rotrSL(l,f,14)^Xe.rotrSL(l,f,18)^Xe.rotrBL(l,f,41),R=l&p^~l&y,P=f&_^~f&b,C=Xe.add5L(E,T,P,zB[x],_s[x]),G=Xe.add5H(C,B,S,R,HB[x],ms[x]),F=C|0,U=Xe.rotrSH(r,i,28)^Xe.rotrBH(r,i,34)^Xe.rotrBH(r,i,39),N=Xe.rotrSL(r,i,28)^Xe.rotrBL(r,i,34)^Xe.rotrBL(r,i,39),k=r&s^r&a^s&a,h=i&o^i&c^o&c;B=y|0,E=b|0,y=p|0,b=_|0,p=l|0,_=f|0,{h:l,l:f}=Xe.add(u|0,d|0,G|0,F|0),u=a|0,d=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const g=Xe.add3L(F,N,h);r=Xe.add3H(g,G,U,k),i=g|0}({h:r,l:i}=Xe.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Xe.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Xe.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=Xe.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:l,l:f}=Xe.add(this.Eh|0,this.El|0,l|0,f|0),{h:p,l:_}=Xe.add(this.Fh|0,this.Fl|0,p|0,_|0),{h:y,l:b}=Xe.add(this.Gh|0,this.Gl|0,y|0,b|0),{h:B,l:E}=Xe.add(this.Hh|0,this.Hl|0,B|0,E|0),this.set(r,i,s,o,a,c,u,d,l,f,p,_,y,b,B,E)}roundClean(){ms.fill(0),_s.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class jB extends su{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class FB extends su{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class GB extends su{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const WB=Ls(()=>new su),VB=Ls(()=>new jB),KB=Ls(()=>new FB),XB=Ls(()=>new GB),ZB=Object.freeze(Object.defineProperty({__proto__:null,SHA512:su,sha384:XB,sha512:WB,sha512_224:VB,sha512_256:KB},Symbol.toStringTag,{value:"Module"})),JB=Ia(ZB),YB=Ia(t9);Object.defineProperty(qr,"__esModule",{value:!0});qr.mnemonicToSeedSync=qr.mnemonicToSeed=qr.validateMnemonic=qr.entropyToMnemonic=qr.mnemonicToEntropy=qr.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const w2=Qn,b2=Ra,QB=LB,v2=JB,eR=YB,Au=Dc,tR=e=>e[0]==="";function x2(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function pp(e){const t=x2(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function S2(e){w2.default.bytes(e,16,20,24,28,32)}function nR(e,t=128){if(w2.default.number(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return E2((0,eR.randomBytes)(t/8),e)}qr.generateMnemonic=nR;const rR=e=>{const t=8-e.length/4;return new Uint8Array([(0,QB.sha256)(e)[0]>>t<<t])};function T2(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(t=>{if(typeof t!="string")throw new Error(`Wordlist: non-string element: ${t}`)}),Au.utils.chain(Au.utils.checksum(1,rR),Au.utils.radix2(11,!0),Au.utils.alphabet(e))}function A2(e,t){const{words:n}=pp(e),r=T2(t).decode(n);return S2(r),r}qr.mnemonicToEntropy=A2;function E2(e,t){return S2(e),T2(t).encode(e).join(tR(t)?"":" ")}qr.entropyToMnemonic=E2;function iR(e,t){try{A2(e,t)}catch{return!1}return!0}qr.validateMnemonic=iR;const k2=e=>x2(`mnemonic${e}`);function sR(e,t=""){return(0,b2.pbkdf2Async)(v2.sha512,pp(e).nfkd,k2(t),{c:2048,dkLen:64})}qr.mnemonicToSeed=sR;function oR(e,t=""){return(0,b2.pbkdf2)(v2.sha512,pp(e).nfkd,k2(t),{c:2048,dkLen:64})}qr.mnemonicToSeedSync=oR;const aR=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),B2=Uint8Array.from({length:16},(e,t)=>t),cR=B2.map(e=>(9*e+5)%16);let gp=[B2],yp=[cR];for(let e=0;e<4;e++)for(let t of[gp,yp])t.push(t[e].map(n=>aR[n]));const R2=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),uR=gp.map((e,t)=>e.map(n=>R2[t][n])),lR=yp.map((e,t)=>e.map(n=>R2[t][n])),dR=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),fR=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Eu=(e,t)=>e<<t|e>>>32-t;function u1(e,t,n,r){return e===0?t^n^r:e===1?t&n|~t&r:e===2?(t|~n)^r:e===3?t&r|n&~r:t^(n|~r)}const ku=new Uint32Array(16);class hR extends tp{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:n,h2:r,h3:i,h4:s}=this;return[t,n,r,i,s]}set(t,n,r,i,s){this.h0=t|0,this.h1=n|0,this.h2=r|0,this.h3=i|0,this.h4=s|0}process(t,n){for(let p=0;p<16;p++,n+=4)ku[p]=t.getUint32(n,!0);let r=this.h0|0,i=r,s=this.h1|0,o=s,a=this.h2|0,c=a,u=this.h3|0,d=u,l=this.h4|0,f=l;for(let p=0;p<5;p++){const _=4-p,y=dR[p],b=fR[p],B=gp[p],E=yp[p],x=uR[p],S=lR[p];for(let T=0;T<16;T++){const R=Eu(r+u1(p,s,a,u)+ku[B[T]]+y,x[T])+l|0;r=l,l=u,u=Eu(a,10)|0,a=s,s=R}for(let T=0;T<16;T++){const R=Eu(i+u1(_,o,c,d)+ku[E[T]]+b,S[T])+f|0;i=f,f=d,d=Eu(c,10)|0,c=o,o=R}}this.set(this.h1+a+d|0,this.h2+u+f|0,this.h3+l+i|0,this.h4+r+o|0,this.h0+s+c|0)}roundClean(){ku.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}Ls(()=>new hR);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const P2=BigInt(0),sf=BigInt(1),pR=BigInt(2),of=e=>e instanceof Uint8Array,gR=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Pa(e){if(!of(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=gR[e[n]];return t}function O2(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function mp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Oa(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(e.length%2)throw new Error("hex string is invalid: unpadded "+e.length);const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=n*2,i=e.slice(r,r+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("invalid byte sequence");t[n]=s}return t}function br(e){return mp(Pa(e))}function _p(e){if(!of(e))throw new Error("Uint8Array expected");return mp(Pa(Uint8Array.from(e).reverse()))}const Cs=(e,t)=>Oa(e.toString(16).padStart(t*2,"0")),I2=(e,t)=>Cs(e,t).reverse(),yR=e=>Oa(O2(e));function Yn(e,t,n){let r;if(typeof t=="string")try{r=Oa(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(of(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function Nr(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!of(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function mR(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function af(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function _R(e){let t;for(t=0;e>P2;e>>=sf,t+=1);return t}const wR=(e,t)=>e>>BigInt(t)&sf,bR=(e,t,n)=>e|(n?sf:P2)<<BigInt(t),wp=e=>(pR<<BigInt(e-1))-sf,Gf=e=>new Uint8Array(e),l1=e=>Uint8Array.from(e);function C2(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Gf(e),i=Gf(e),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...l)=>n(i,r,...l),c=(l=Gf())=>{i=a(l1([0]),l),r=a(),l.length!==0&&(i=a(l1([1]),l),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const f=[];for(;l<t;){r=a();const p=r.slice();f.push(p),l+=r.length}return Nr(...f)};return(l,f)=>{o(),c(l);let p;for(;!(p=f(u()));)c();return o(),p}}const vR={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Ka(e,t,n={}){const r=(i,s,o)=>{const a=vR[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=e[i];if(!(o&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}const xR=Object.freeze(Object.defineProperty({__proto__:null,bitGet:wR,bitLen:_R,bitMask:wp,bitSet:bR,bytesToHex:Pa,bytesToNumberBE:br,bytesToNumberLE:_p,concatBytes:Nr,createHmacDrbg:C2,ensureBytes:Yn,equalBytes:mR,hexToBytes:Oa,hexToNumber:mp,numberToBytesBE:Cs,numberToBytesLE:I2,numberToHexUnpadded:O2,numberToVarBytesBE:yR,utf8ToBytes:af,validateObject:Ka},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wn=BigInt(0),Pn=BigInt(1),Xs=BigInt(2),SR=BigInt(3),N0=BigInt(4),d1=BigInt(5),f1=BigInt(8);BigInt(9);BigInt(16);function Hn(e,t){const n=e%t;return n>=Wn?n:t+n}function TR(e,t,n){if(n<=Wn||t<Wn)throw new Error("Expected power/modulo > 0");if(n===Pn)return Wn;let r=Pn;for(;t>Wn;)t&Pn&&(r=r*e%n),e=e*e%n,t>>=Pn;return r}function Wr(e,t,n){let r=e;for(;t-- >Wn;)r*=r,r%=n;return r}function D0(e,t){if(e===Wn||t<=Wn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Hn(e,t),r=t,i=Wn,s=Pn;for(;n!==Wn;){const a=r/n,c=r%n,u=i-s*a;r=n,n=c,i=s,s=u}if(r!==Pn)throw new Error("invert: does not exist");return Hn(i,t)}function AR(e){const t=(e-Pn)/Xs;let n,r,i;for(n=e-Pn,r=0;n%Xs===Wn;n/=Xs,r++);for(i=Xs;i<e&&TR(i,t,e)!==e-Pn;i++);if(r===1){const o=(e+Pn)/N0;return function(c,u){const d=c.pow(u,o);if(!c.eql(c.sqr(d),u))throw new Error("Cannot find square root");return d}}const s=(n+Pn)/Xs;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,d=a.pow(a.mul(a.ONE,i),n),l=a.pow(c,s),f=a.pow(c,n);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let p=1;for(let y=a.sqr(f);p<u&&!a.eql(y,a.ONE);p++)y=a.sqr(y);const _=a.pow(d,Pn<<BigInt(u-p-1));d=a.sqr(_),l=a.mul(l,_),f=a.mul(f,d),u=p}return l}}function ER(e){if(e%N0===SR){const t=(e+Pn)/N0;return function(r,i){const s=r.pow(i,t);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%f1===d1){const t=(e-d1)/f1;return function(r,i){const s=r.mul(i,Xs),o=r.pow(s,t),a=r.mul(i,o),c=r.mul(r.mul(a,Xs),o),u=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),i))throw new Error("Cannot find square root");return u}}return AR(e)}const kR=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $2(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=kR.reduce((r,i)=>(r[i]="function",r),t);return Ka(e,n)}function BR(e,t,n){if(n<Wn)throw new Error("Expected power > 0");if(n===Wn)return e.ONE;if(n===Pn)return t;let r=e.ONE,i=t;for(;n>Wn;)n&Pn&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Pn;return r}function RR(e,t){const n=new Array(t.length),r=t.reduce((s,o,a)=>e.is0(o)?s:(n[a]=s,e.mul(s,o)),e.ONE),i=e.inv(r);return t.reduceRight((s,o,a)=>e.is0(o)?s:(n[a]=e.mul(s,n[a]),e.mul(s,o)),i),n}function bp(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function PR(e,t,n=!1,r={}){if(e<=Wn)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=bp(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=ER(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:wp(i),ZERO:Wn,ONE:Pn,create:c=>Hn(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Wn<=c&&c<e},is0:c=>c===Wn,isOdd:c=>(c&Pn)===Pn,neg:c=>Hn(-c,e),eql:(c,u)=>c===u,sqr:c=>Hn(c*c,e),add:(c,u)=>Hn(c+u,e),sub:(c,u)=>Hn(c-u,e),mul:(c,u)=>Hn(c*u,e),pow:(c,u)=>BR(a,c,u),div:(c,u)=>Hn(c*D0(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>D0(c,e),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>RR(a,c),cmov:(c,u,d)=>d?u:c,toBytes:c=>n?I2(c,s):Cs(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return n?_p(c):br(c)}});return Object.freeze(a)}function OR(e,t,n=!1){e=Yn("privateHash",e);const r=e.length,i=bp(t).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);const s=n?_p(e):br(e);return Hn(s,t-Pn)+Pn}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const IR=BigInt(0),Wf=BigInt(1);function CR(e,t){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(t/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>IR;)s&Wf&&(o=o.add(a)),a=a.double(),s>>=Wf;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),c=[];let u=i,d=u;for(let l=0;l<o;l++){d=u,c.push(d);for(let f=1;f<a;f++)d=d.add(u),c.push(d);u=d.double()}return c},wNAF(i,s,o){const{windows:a,windowSize:c}=r(i);let u=e.ZERO,d=e.BASE;const l=BigInt(2**i-1),f=2**i,p=BigInt(i);for(let _=0;_<a;_++){const y=_*c;let b=Number(o&l);o>>=p,b>c&&(b-=f,o+=Wf);const B=y,E=y+Math.abs(b)-1,x=_%2!==0,S=b<0;b===0?d=d.add(n(x,s[B])):u=u.add(n(S,s[E]))}return{p:u,f:d}},wNAFCached(i,s,o,a){const c=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&s.set(i,a(u))),this.wNAF(c,u,o)}}}function U2(e){return $2(e.Fp),Ka(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...bp(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $R(e){const t=U2(e);Ka(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:UR,hexToBytes:MR}=xR,to={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=to;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:UR(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=to,n=typeof e=="string"?MR(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=to._parseInt(n.subarray(2)),{d:o,l:a}=to._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,n=u=>{const d=u.toString(16);return d.length&1?`0${d}`:d},r=t(n(e.s)),i=t(n(e.r)),s=r.length/2,o=i.length/2,a=n(s),c=n(o);return`30${n(o+s+4)}02${c}${i}02${a}${r}`}},fi=BigInt(0),On=BigInt(1),Mi=BigInt(2),Al=BigInt(3),h1=BigInt(4);function qR(e){const t=$R(e),{Fp:n}=t,r=t.toBytes||((_,y,b)=>{const B=y.toAffine();return Nr(Uint8Array.from([4]),n.toBytes(B.x),n.toBytes(B.y))}),i=t.fromBytes||(_=>{const y=_.subarray(1),b=n.fromBytes(y.subarray(0,n.BYTES)),B=n.fromBytes(y.subarray(n.BYTES,2*n.BYTES));return{x:b,y:B}});function s(_){const{a:y,b}=t,B=n.sqr(_),E=n.mul(B,_);return n.add(n.add(E,n.mul(_,y)),b)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(_){return typeof _=="bigint"&&fi<_&&_<t.n}function a(_){if(!o(_))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(_){const{allowedPrivateKeyLengths:y,nByteLength:b,wrapPrivateKey:B,n:E}=t;if(y&&typeof _!="bigint"){if(_ instanceof Uint8Array&&(_=Pa(_)),typeof _!="string"||!y.includes(_.length))throw new Error("Invalid key");_=_.padStart(b*2,"0")}let x;try{x=typeof _=="bigint"?_:br(Yn("private key",_,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof _}`)}return B&&(x=Hn(x,E)),a(x),x}const u=new Map;function d(_){if(!(_ instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(y,b,B){if(this.px=y,this.py=b,this.pz=B,y==null||!n.isValid(y))throw new Error("x required");if(b==null||!n.isValid(b))throw new Error("y required");if(B==null||!n.isValid(B))throw new Error("z required")}static fromAffine(y){const{x:b,y:B}=y||{};if(!y||!n.isValid(b)||!n.isValid(B))throw new Error("invalid affine point");if(y instanceof l)throw new Error("projective point not allowed");const E=x=>n.eql(x,n.ZERO);return E(b)&&E(B)?l.ZERO:new l(b,B,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const b=n.invertBatch(y.map(B=>B.pz));return y.map((B,E)=>B.toAffine(b[E])).map(l.fromAffine)}static fromHex(y){const b=l.fromAffine(i(Yn("pointHex",y)));return b.assertValidity(),b}static fromPrivateKey(y){return l.BASE.multiply(c(y))}_setWindowSize(y){this._WINDOW_SIZE=y,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:y,y:b}=this.toAffine();if(!n.isValid(y)||!n.isValid(b))throw new Error("bad point: x or y not FE");const B=n.sqr(b),E=s(y);if(!n.eql(B,E))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y}=this.toAffine();if(n.isOdd)return!n.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){d(y);const{px:b,py:B,pz:E}=this,{px:x,py:S,pz:T}=y,R=n.eql(n.mul(b,T),n.mul(x,E)),P=n.eql(n.mul(B,T),n.mul(S,E));return R&&P}negate(){return new l(this.px,n.neg(this.py),this.pz)}double(){const{a:y,b}=t,B=n.mul(b,Al),{px:E,py:x,pz:S}=this;let T=n.ZERO,R=n.ZERO,P=n.ZERO,C=n.mul(E,E),G=n.mul(x,x),F=n.mul(S,S),U=n.mul(E,x);return U=n.add(U,U),P=n.mul(E,S),P=n.add(P,P),T=n.mul(y,P),R=n.mul(B,F),R=n.add(T,R),T=n.sub(G,R),R=n.add(G,R),R=n.mul(T,R),T=n.mul(U,T),P=n.mul(B,P),F=n.mul(y,F),U=n.sub(C,F),U=n.mul(y,U),U=n.add(U,P),P=n.add(C,C),C=n.add(P,C),C=n.add(C,F),C=n.mul(C,U),R=n.add(R,C),F=n.mul(x,S),F=n.add(F,F),C=n.mul(F,U),T=n.sub(T,C),P=n.mul(F,G),P=n.add(P,P),P=n.add(P,P),new l(T,R,P)}add(y){d(y);const{px:b,py:B,pz:E}=this,{px:x,py:S,pz:T}=y;let R=n.ZERO,P=n.ZERO,C=n.ZERO;const G=t.a,F=n.mul(t.b,Al);let U=n.mul(b,x),N=n.mul(B,S),k=n.mul(E,T),h=n.add(b,B),g=n.add(x,S);h=n.mul(h,g),g=n.add(U,N),h=n.sub(h,g),g=n.add(b,E);let v=n.add(x,T);return g=n.mul(g,v),v=n.add(U,k),g=n.sub(g,v),v=n.add(B,E),R=n.add(S,T),v=n.mul(v,R),R=n.add(N,k),v=n.sub(v,R),C=n.mul(G,g),R=n.mul(F,k),C=n.add(R,C),R=n.sub(N,C),C=n.add(N,C),P=n.mul(R,C),N=n.add(U,U),N=n.add(N,U),k=n.mul(G,k),g=n.mul(F,g),N=n.add(N,k),k=n.sub(U,k),k=n.mul(G,k),g=n.add(g,k),U=n.mul(N,g),P=n.add(P,U),U=n.mul(v,g),R=n.mul(h,R),R=n.sub(R,U),U=n.mul(h,N),C=n.mul(v,C),C=n.add(C,U),new l(R,P,C)}subtract(y){return this.add(y.negate())}is0(){return this.equals(l.ZERO)}wNAF(y){return p.wNAFCached(this,u,y,b=>{const B=n.invertBatch(b.map(E=>E.pz));return b.map((E,x)=>E.toAffine(B[x])).map(l.fromAffine)})}multiplyUnsafe(y){const b=l.ZERO;if(y===fi)return b;if(a(y),y===On)return this;const{endo:B}=t;if(!B)return p.unsafeLadder(this,y);let{k1neg:E,k1:x,k2neg:S,k2:T}=B.splitScalar(y),R=b,P=b,C=this;for(;x>fi||T>fi;)x&On&&(R=R.add(C)),T&On&&(P=P.add(C)),C=C.double(),x>>=On,T>>=On;return E&&(R=R.negate()),S&&(P=P.negate()),P=new l(n.mul(P.px,B.beta),P.py,P.pz),R.add(P)}multiply(y){a(y);let b=y,B,E;const{endo:x}=t;if(x){const{k1neg:S,k1:T,k2neg:R,k2:P}=x.splitScalar(b);let{p:C,f:G}=this.wNAF(T),{p:F,f:U}=this.wNAF(P);C=p.constTimeNegate(S,C),F=p.constTimeNegate(R,F),F=new l(n.mul(F.px,x.beta),F.py,F.pz),B=C.add(F),E=G.add(U)}else{const{p:S,f:T}=this.wNAF(b);B=S,E=T}return l.normalizeZ([B,E])[0]}multiplyAndAddUnsafe(y,b,B){const E=l.BASE,x=(T,R)=>R===fi||R===On||!T.equals(E)?T.multiplyUnsafe(R):T.multiply(R),S=x(this,b).add(x(y,B));return S.is0()?void 0:S}toAffine(y){const{px:b,py:B,pz:E}=this,x=this.is0();y==null&&(y=x?n.ONE:n.inv(E));const S=n.mul(b,y),T=n.mul(B,y),R=n.mul(E,y);if(x)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:S,y:T}}isTorsionFree(){const{h:y,isTorsionFree:b}=t;if(y===On)return!0;if(b)return b(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:b}=t;return y===On?this:b?b(l,this):this.multiplyUnsafe(t.h)}toRawBytes(y=!0){return this.assertValidity(),r(l,this,y)}toHex(y=!0){return Pa(this.toRawBytes(y))}}l.BASE=new l(t.Gx,t.Gy,n.ONE),l.ZERO=new l(n.ZERO,n.ONE,n.ZERO);const f=t.nBitLength,p=CR(l,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function NR(e){const t=U2(e);return Ka(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function DR(e){const t=NR(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function o(g){return fi<g&&g<n.ORDER}function a(g){return Hn(g,r)}function c(g){return D0(g,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:l,isWithinCurveOrder:f}=qR({...t,toBytes(g,v,O){const L=v.toAffine(),z=n.toBytes(L.x),W=Nr;return O?W(Uint8Array.from([v.hasEvenY()?2:3]),z):W(Uint8Array.from([4]),z,n.toBytes(L.y))},fromBytes(g){const v=g.length,O=g[0],L=g.subarray(1);if(v===i&&(O===2||O===3)){const z=br(L);if(!o(z))throw new Error("Point is not on curve");const W=l(z);let $=n.sqrt(W);const w=($&On)===On;return(O&1)===1!==w&&($=n.neg($)),{x:z,y:$}}else if(v===s&&O===4){const z=n.fromBytes(L.subarray(0,n.BYTES)),W=n.fromBytes(L.subarray(n.BYTES,2*n.BYTES));return{x:z,y:W}}else throw new Error(`Point of length ${v} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),p=g=>Pa(Cs(g,t.nByteLength));function _(g){const v=r>>On;return g>v}function y(g){return _(g)?a(-g):g}const b=(g,v,O)=>br(g.slice(v,O));class B{constructor(v,O,L){this.r=v,this.s=O,this.recovery=L,this.assertValidity()}static fromCompact(v){const O=t.nByteLength;return v=Yn("compactSignature",v,O*2),new B(b(v,0,O),b(v,O,2*O))}static fromDER(v){const{r:O,s:L}=to.toSig(Yn("DER",v));return new B(O,L)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(v){return new B(this.r,this.s,v)}recoverPublicKey(v){const{r:O,s:L,recovery:z}=this,W=P(Yn("msgHash",v));if(z==null||![0,1,2,3].includes(z))throw new Error("recovery id invalid");const $=z===2||z===3?O+t.n:O;if($>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const w=z&1?"03":"02",H=u.fromHex(w+p($)),re=c($),Q=a(-W*re),ce=a(L*re),Be=u.BASE.multiplyAndAddUnsafe(H,Q,ce);if(!Be)throw new Error("point at infinify");return Be.assertValidity(),Be}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new B(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Oa(this.toDERHex())}toDERHex(){return to.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Oa(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const E={isValidPrivateKey(g){try{return d(g),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const g=t.randomBytes(n.BYTES+8),v=OR(g,r);return Cs(v,t.nByteLength)},precompute(g=8,v=u.BASE){return v._setWindowSize(g),v.multiply(BigInt(3)),v}};function x(g,v=!0){return u.fromPrivateKey(g).toRawBytes(v)}function S(g){const v=g instanceof Uint8Array,O=typeof g=="string",L=(v||O)&&g.length;return v?L===i||L===s:O?L===2*i||L===2*s:g instanceof u}function T(g,v,O=!0){if(S(g))throw new Error("first arg must be private key");if(!S(v))throw new Error("second arg must be public key");return u.fromHex(v).multiply(d(g)).toRawBytes(O)}const R=t.bits2int||function(g){const v=br(g),O=g.length*8-t.nBitLength;return O>0?v>>BigInt(O):v},P=t.bits2int_modN||function(g){return a(R(g))},C=wp(t.nBitLength);function G(g){if(typeof g!="bigint")throw new Error("bigint expected");if(!(fi<=g&&g<C))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Cs(g,t.nByteLength)}function F(g,v,O=U){if(["recovered","canonical"].some(J=>J in O))throw new Error("sign() legacy options not supported");const{hash:L,randomBytes:z}=t;let{lowS:W,prehash:$,extraEntropy:w}=O;W==null&&(W=!0),g=Yn("msgHash",g),$&&(g=Yn("prehashed msgHash",L(g)));const H=P(g),re=d(v),Q=[G(re),G(H)];if(w!=null){const J=w===!0?z(n.BYTES):w;Q.push(Yn("extraEntropy",J,n.BYTES))}const ce=Nr(...Q),Be=H;function Ue(J){const j=R(J);if(!f(j))return;const K=c(j),Y=u.BASE.multiply(j).toAffine(),ne=a(Y.x);if(ne===fi)return;const ue=a(K*a(Be+ne*re));if(ue===fi)return;let le=(Y.x===ne?0:2)|Number(Y.y&On),fe=ue;return W&&_(ue)&&(fe=y(ue),le^=1),new B(ne,fe,le)}return{seed:ce,k2sig:Ue}}const U={lowS:t.lowS,prehash:!1},N={lowS:t.lowS,prehash:!1};function k(g,v,O=U){const{seed:L,k2sig:z}=F(g,v,O);return C2(t.hash.outputLen,t.nByteLength,t.hmac)(L,z)}u.BASE._setWindowSize(8);function h(g,v,O,L=N){var Y;const z=g;if(v=Yn("msgHash",v),O=Yn("publicKey",O),"strict"in L)throw new Error("options.strict was renamed to lowS");const{lowS:W,prehash:$}=L;let w,H;try{if(typeof z=="string"||z instanceof Uint8Array)try{w=B.fromDER(z)}catch(ne){if(!(ne instanceof to.Err))throw ne;w=B.fromCompact(z)}else if(typeof z=="object"&&typeof z.r=="bigint"&&typeof z.s=="bigint"){const{r:ne,s:ue}=z;w=new B(ne,ue)}else throw new Error("PARSE");H=u.fromHex(O)}catch(ne){if(ne.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(W&&w.hasHighS())return!1;$&&(v=t.hash(v));const{r:re,s:Q}=w,ce=P(v),Be=c(Q),Ue=a(ce*Be),J=a(re*Be),j=(Y=u.BASE.multiplyAndAddUnsafe(H,Ue,J))==null?void 0:Y.toAffine();return j?a(j.x)===re:!1}return{CURVE:t,getPublicKey:x,getSharedSecret:T,sign:k,verify:h,ProjectivePoint:u,Signature:B,utils:E}}function LR(e,t){const n=e.ORDER;let r=fi;for(let f=n-On;f%Mi===fi;f/=Mi)r+=On;const i=r,s=(n-On)/Mi**i,o=(s-On)/Mi,a=Mi**i-On,c=Mi**(i-On),u=e.pow(t,s),d=e.pow(t,(s+On)/Mi);let l=(f,p)=>{let _=u,y=e.pow(p,a),b=e.sqr(y);b=e.mul(b,p);let B=e.mul(f,b);B=e.pow(B,o),B=e.mul(B,y),y=e.mul(B,p),b=e.mul(B,f);let E=e.mul(b,y);B=e.pow(E,c);let x=e.eql(B,e.ONE);y=e.mul(b,d),B=e.mul(E,_),b=e.cmov(y,b,x),E=e.cmov(B,E,x);for(let S=i;S>On;S--){let T=Mi**(S-Mi),R=e.pow(E,T);const P=e.eql(R,e.ONE);y=e.mul(b,_),_=e.mul(_,_),R=e.mul(E,_),b=e.cmov(y,b,P),E=e.cmov(R,E,P)}return{isValid:x,value:b}};if(e.ORDER%h1===Al){const f=(e.ORDER-Al)/h1,p=e.sqrt(e.neg(t));l=(_,y)=>{let b=e.sqr(y);const B=e.mul(_,y);b=e.mul(b,B);let E=e.pow(b,f);E=e.mul(E,B);const x=e.mul(E,p),S=e.mul(e.sqr(E),y),T=e.eql(S,_);let R=e.cmov(x,E,T);return{isValid:T,value:R}}}return l}function HR(e,t){if($2(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=LR(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,s,o,a,c,u,d,l;i=e.sqr(r),i=e.mul(i,t.Z),s=e.sqr(i),s=e.add(s,i),o=e.add(s,e.ONE),o=e.mul(o,t.B),a=e.cmov(t.Z,e.neg(s),!e.eql(s,e.ZERO)),a=e.mul(a,t.A),s=e.sqr(o),u=e.sqr(a),c=e.mul(u,t.A),s=e.add(s,c),s=e.mul(s,o),u=e.mul(u,a),c=e.mul(u,t.B),s=e.add(s,c),d=e.mul(i,o);const{isValid:f,value:p}=n(s,u);l=e.mul(i,r),l=e.mul(l,p),d=e.cmov(d,o,f),l=e.cmov(l,p,f);const _=e.isOdd(r)===e.isOdd(l);return l=e.cmov(e.neg(l),l,_),d=e.div(d,a),{x:d,y:l}}}function zR(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return af(e);throw new Error("DST must be Uint8Array or string")}const jR=br;function As(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=e&255,e>>>=8;return new Uint8Array(n)}function FR(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function Pc(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function vp(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function GR(e,t,n,r){Pc(e),Pc(t),vp(n),t.length>255&&(t=r(Nr(af("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:s}=r,o=Math.ceil(n/i);if(o>255)throw new Error("Invalid xmd length");const a=Nr(t,As(t.length,1)),c=As(0,s),u=As(n,2),d=new Array(o),l=r(Nr(c,e,u,As(0,1),a));d[0]=r(Nr(l,As(1,1),a));for(let p=1;p<=o;p++){const _=[FR(l,d[p-1]),As(p+1,1),a];d[p]=r(Nr(..._))}return Nr(...d).slice(0,n)}function WR(e,t,n,r,i){if(Pc(e),Pc(t),vp(n),t.length>255){const s=Math.ceil(2*r/8);t=i.create({dkLen:s}).update(af("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(As(n,2)).update(t).update(As(t.length,1)).digest()}function p1(e,t,n){Ka(n,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:s,hash:o,expand:a,DST:c}=n;Pc(e),vp(t);const u=zR(c),d=r.toString(2).length,l=Math.ceil((d+i)/8),f=t*s*l;let p;if(a==="xmd")p=GR(e,u,f,o);else if(a==="xof")p=WR(e,u,f,i,o);else if(a==="_internal_pass")p=e;else throw new Error('expand must be "xmd" or "xof"');const _=new Array(t);for(let y=0;y<t;y++){const b=new Array(s);for(let B=0;B<s;B++){const E=l*(B+y*s),x=p.subarray(E,E+l);b[B]=Hn(jR(x),r)}_[y]=b}return _}function VR(e,t){const n=t.map(r=>Array.from(r).reverse());return(r,i)=>{const[s,o,a,c]=n.map(u=>u.reduce((d,l)=>e.add(e.mul(d,r),l)));return r=e.div(s,o),i=e.mul(i,e.div(a,c)),{x:r,y:i}}}function KR(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){const s=p1(r,2,{...n,DST:n.DST,...i}),o=e.fromAffine(t(s[0])),a=e.fromAffine(t(s[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,i){const s=p1(r,1,{...n,DST:n.encodeDST,...i}),o=e.fromAffine(t(s[0])).clearCofactor();return o.assertValidity(),o}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function XR(e){return{hash:e,hmac:(t,...n)=>up(e,t,ep(...n)),randomBytes:iu}}function ZR(e,t){const n=r=>DR({...e,...XR(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cf=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),El=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),M2=BigInt(1),kl=BigInt(2),g1=(e,t)=>(e+t/kl)/t;function q2(e){const t=cf,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,d=u*u*e%t,l=Wr(d,n,t)*d%t,f=Wr(l,n,t)*d%t,p=Wr(f,kl,t)*u%t,_=Wr(p,i,t)*p%t,y=Wr(_,s,t)*_%t,b=Wr(y,a,t)*y%t,B=Wr(b,c,t)*b%t,E=Wr(B,a,t)*y%t,x=Wr(E,n,t)*d%t,S=Wr(x,o,t)*_%t,T=Wr(S,r,t)*u%t,R=Wr(T,kl,t);if(!Ms.eql(Ms.sqr(R),e))throw new Error("Cannot find square root");return R}const Ms=PR(cf,void 0,void 0,{sqrt:q2}),ou=ZR({a:BigInt(0),b:BigInt(7),Fp:Ms,n:El,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=El,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-M2*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=g1(s*e,t),c=g1(-r*e,t);let u=Hn(e-a*n-c*i,t),d=Hn(-a*r-c*s,t);const l=u>o,f=d>o;if(l&&(u=t-u),f&&(d=t-d),u>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:f,k2:d}}}},Ii),uf=BigInt(0),N2=e=>typeof e=="bigint"&&uf<e&&e<cf,JR=e=>typeof e=="bigint"&&uf<e&&e<El,y1={};function Bl(e,...t){let n=y1[e];if(n===void 0){const r=Ii(Uint8Array.from(e,i=>i.charCodeAt(0)));n=Nr(r,r),y1[e]=n}return Ii(Nr(n,...t))}const xp=e=>e.toRawBytes(!0).slice(1),L0=e=>Cs(e,32),Vf=e=>Hn(e,cf),Oc=e=>Hn(e,El),Sp=ou.ProjectivePoint,YR=(e,t,n)=>Sp.BASE.multiplyAndAddUnsafe(e,t,n);function H0(e){let t=ou.utils.normPrivateKeyToScalar(e),n=Sp.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Oc(-t),bytes:xp(n)}}function D2(e){if(!N2(e))throw new Error("bad x: need 0 < x < p");const t=Vf(e*e),n=Vf(t*e+BigInt(7));let r=q2(n);r%kl!==uf&&(r=Vf(-r));const i=new Sp(e,r,M2);return i.assertValidity(),i}function L2(...e){return Oc(br(Bl("BIP0340/challenge",...e)))}function QR(e){return H0(e).bytes}function eP(e,t,n=iu(32)){const r=Yn("message",e),{bytes:i,scalar:s}=H0(t),o=Yn("auxRand",n,32),a=L0(s^br(Bl("BIP0340/aux",o))),c=Bl("BIP0340/nonce",a,i,r),u=Oc(br(c));if(u===uf)throw new Error("sign failed: k is zero");const{bytes:d,scalar:l}=H0(u),f=L2(d,i,r),p=new Uint8Array(64);if(p.set(d,0),p.set(L0(Oc(l+f*s)),32),!H2(p,r,i))throw new Error("sign: Invalid signature produced");return p}function H2(e,t,n){const r=Yn("signature",e,64),i=Yn("message",t),s=Yn("publicKey",n,32);try{const o=D2(br(s)),a=br(r.subarray(0,32));if(!N2(a))return!1;const c=br(r.subarray(32,64));if(!JR(c))return!1;const u=L2(L0(a),xp(o),i),d=YR(o,c,Oc(-u));return!(!d||!d.hasEvenY()||d.toAffine().x!==a)}catch{return!1}}ou.utils.randomPrivateKey;const tP=VR(Ms,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),nP=HR(Ms,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Ms.create(BigInt("-11"))});KR(ou.ProjectivePoint,e=>{const{x:t,y:n}=nP(Ms.create(e[0]));return tP(t,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Ms.ORDER,m:1,k:128,expand:"xmd",hash:Ii});ou.ProjectivePoint;Dc.base58check(Ii);Qh("Bitcoin seed");var Bu,rP=new Uint8Array(16);function z2(){if(!Bu&&(Bu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Bu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bu(rP)}const iP=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function lf(e){return typeof e=="string"&&iP.test(e)}var Vn=[];for(var Kf=0;Kf<256;++Kf)Vn.push((Kf+256).toString(16).substr(1));function df(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Vn[e[t+0]]+Vn[e[t+1]]+Vn[e[t+2]]+Vn[e[t+3]]+"-"+Vn[e[t+4]]+Vn[e[t+5]]+"-"+Vn[e[t+6]]+Vn[e[t+7]]+"-"+Vn[e[t+8]]+Vn[e[t+9]]+"-"+Vn[e[t+10]]+Vn[e[t+11]]+Vn[e[t+12]]+Vn[e[t+13]]+Vn[e[t+14]]+Vn[e[t+15]]).toLowerCase();if(!lf(n))throw TypeError("Stringified UUID is invalid");return n}var m1,Xf,Zf=0,Jf=0;function sP(e,t,n){var r=t&&n||0,i=t||new Array(16);e=e||{};var s=e.node||m1,o=e.clockseq!==void 0?e.clockseq:Xf;if(s==null||o==null){var a=e.random||(e.rng||z2)();s==null&&(s=m1=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Xf=(a[6]<<8|a[7])&16383)}var c=e.msecs!==void 0?e.msecs:Date.now(),u=e.nsecs!==void 0?e.nsecs:Jf+1,d=c-Zf+(u-Jf)/1e4;if(d<0&&e.clockseq===void 0&&(o=o+1&16383),(d<0||c>Zf)&&e.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Zf=c,Jf=u,Xf=o,c+=122192928e5;var l=((c&268435455)*1e4+u)%4294967296;i[r++]=l>>>24&255,i[r++]=l>>>16&255,i[r++]=l>>>8&255,i[r++]=l&255;var f=c/4294967296*1e4&268435455;i[r++]=f>>>8&255,i[r++]=f&255,i[r++]=f>>>24&15|16,i[r++]=f>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var p=0;p<6;++p)i[r+p]=s[p];return t||df(i)}function j2(e){if(!lf(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}function oP(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}var aP="6ba7b810-9dad-11d1-80b4-00c04fd430c8",cP="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function F2(e,t,n){function r(i,s,o,a){if(typeof i=="string"&&(i=oP(i)),typeof s=="string"&&(s=j2(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(s),c.set(i,s.length),c=n(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,o){a=a||0;for(var u=0;u<16;++u)o[a+u]=c[u];return o}return df(c)}try{r.name=e}catch{}return r.DNS=aP,r.URL=cP,r}function uP(e){if(typeof e=="string"){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return lP(dP(fP(e),e.length*8))}function lP(e){for(var t=[],n=e.length*32,r="0123456789abcdef",i=0;i<n;i+=8){var s=e[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);t.push(o)}return t}function G2(e){return(e+64>>>9<<4)+14+1}function dP(e,t){e[t>>5]|=128<<t%32,e[G2(t)-1]=t;for(var n=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<e.length;o+=16){var a=n,c=r,u=i,d=s;n=ar(n,r,i,s,e[o],7,-680876936),s=ar(s,n,r,i,e[o+1],12,-389564586),i=ar(i,s,n,r,e[o+2],17,606105819),r=ar(r,i,s,n,e[o+3],22,-1044525330),n=ar(n,r,i,s,e[o+4],7,-176418897),s=ar(s,n,r,i,e[o+5],12,1200080426),i=ar(i,s,n,r,e[o+6],17,-1473231341),r=ar(r,i,s,n,e[o+7],22,-45705983),n=ar(n,r,i,s,e[o+8],7,1770035416),s=ar(s,n,r,i,e[o+9],12,-1958414417),i=ar(i,s,n,r,e[o+10],17,-42063),r=ar(r,i,s,n,e[o+11],22,-1990404162),n=ar(n,r,i,s,e[o+12],7,1804603682),s=ar(s,n,r,i,e[o+13],12,-40341101),i=ar(i,s,n,r,e[o+14],17,-1502002290),r=ar(r,i,s,n,e[o+15],22,1236535329),n=cr(n,r,i,s,e[o+1],5,-165796510),s=cr(s,n,r,i,e[o+6],9,-1069501632),i=cr(i,s,n,r,e[o+11],14,643717713),r=cr(r,i,s,n,e[o],20,-373897302),n=cr(n,r,i,s,e[o+5],5,-701558691),s=cr(s,n,r,i,e[o+10],9,38016083),i=cr(i,s,n,r,e[o+15],14,-660478335),r=cr(r,i,s,n,e[o+4],20,-405537848),n=cr(n,r,i,s,e[o+9],5,568446438),s=cr(s,n,r,i,e[o+14],9,-1019803690),i=cr(i,s,n,r,e[o+3],14,-187363961),r=cr(r,i,s,n,e[o+8],20,1163531501),n=cr(n,r,i,s,e[o+13],5,-1444681467),s=cr(s,n,r,i,e[o+2],9,-51403784),i=cr(i,s,n,r,e[o+7],14,1735328473),r=cr(r,i,s,n,e[o+12],20,-1926607734),n=ur(n,r,i,s,e[o+5],4,-378558),s=ur(s,n,r,i,e[o+8],11,-2022574463),i=ur(i,s,n,r,e[o+11],16,1839030562),r=ur(r,i,s,n,e[o+14],23,-35309556),n=ur(n,r,i,s,e[o+1],4,-1530992060),s=ur(s,n,r,i,e[o+4],11,1272893353),i=ur(i,s,n,r,e[o+7],16,-155497632),r=ur(r,i,s,n,e[o+10],23,-1094730640),n=ur(n,r,i,s,e[o+13],4,681279174),s=ur(s,n,r,i,e[o],11,-358537222),i=ur(i,s,n,r,e[o+3],16,-722521979),r=ur(r,i,s,n,e[o+6],23,76029189),n=ur(n,r,i,s,e[o+9],4,-640364487),s=ur(s,n,r,i,e[o+12],11,-421815835),i=ur(i,s,n,r,e[o+15],16,530742520),r=ur(r,i,s,n,e[o+2],23,-995338651),n=lr(n,r,i,s,e[o],6,-198630844),s=lr(s,n,r,i,e[o+7],10,1126891415),i=lr(i,s,n,r,e[o+14],15,-1416354905),r=lr(r,i,s,n,e[o+5],21,-57434055),n=lr(n,r,i,s,e[o+12],6,1700485571),s=lr(s,n,r,i,e[o+3],10,-1894986606),i=lr(i,s,n,r,e[o+10],15,-1051523),r=lr(r,i,s,n,e[o+1],21,-2054922799),n=lr(n,r,i,s,e[o+8],6,1873313359),s=lr(s,n,r,i,e[o+15],10,-30611744),i=lr(i,s,n,r,e[o+6],15,-1560198380),r=lr(r,i,s,n,e[o+13],21,1309151649),n=lr(n,r,i,s,e[o+4],6,-145523070),s=lr(s,n,r,i,e[o+11],10,-1120210379),i=lr(i,s,n,r,e[o+2],15,718787259),r=lr(r,i,s,n,e[o+9],21,-343485551),n=Bs(n,a),r=Bs(r,c),i=Bs(i,u),s=Bs(s,d)}return[n,r,i,s]}function fP(e){if(e.length===0)return[];for(var t=e.length*8,n=new Uint32Array(G2(t)),r=0;r<t;r+=8)n[r>>5]|=(e[r/8]&255)<<r%32;return n}function Bs(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}function hP(e,t){return e<<t|e>>>32-t}function ff(e,t,n,r,i,s){return Bs(hP(Bs(Bs(t,e),Bs(r,s)),i),n)}function ar(e,t,n,r,i,s,o){return ff(t&n|~t&r,e,t,i,s,o)}function cr(e,t,n,r,i,s,o){return ff(t&r|n&~r,e,t,i,s,o)}function ur(e,t,n,r,i,s,o){return ff(t^n^r,e,t,i,s,o)}function lr(e,t,n,r,i,s,o){return ff(n^(t|~r),e,t,i,s,o)}var pP=F2("v3",48,uP);const gP=pP;function yP(e,t,n){e=e||{};var r=e.random||(e.rng||z2)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return df(r)}function mP(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function Yf(e,t){return e<<t|e>>>32-t}function _P(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var r=unescape(encodeURIComponent(e));e=[];for(var i=0;i<r.length;++i)e.push(r.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=e.length/4+2,o=Math.ceil(s/16),a=new Array(o),c=0;c<o;++c){for(var u=new Uint32Array(16),d=0;d<16;++d)u[d]=e[c*64+d*4]<<24|e[c*64+d*4+1]<<16|e[c*64+d*4+2]<<8|e[c*64+d*4+3];a[c]=u}a[o-1][14]=(e.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(e.length-1)*8&4294967295;for(var l=0;l<o;++l){for(var f=new Uint32Array(80),p=0;p<16;++p)f[p]=a[l][p];for(var _=16;_<80;++_)f[_]=Yf(f[_-3]^f[_-8]^f[_-14]^f[_-16],1);for(var y=n[0],b=n[1],B=n[2],E=n[3],x=n[4],S=0;S<80;++S){var T=Math.floor(S/20),R=Yf(y,5)+mP(T,b,B,E)+x+t[T]+f[S]>>>0;x=E,E=B,B=Yf(b,30)>>>0,b=y,y=R}n[0]=n[0]+y>>>0,n[1]=n[1]+b>>>0,n[2]=n[2]+B>>>0,n[3]=n[3]+E>>>0,n[4]=n[4]+x>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var wP=F2("v5",80,_P);const bP=wP,vP="00000000-0000-0000-0000-000000000000";function xP(e){if(!lf(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}const SP=Object.freeze(Object.defineProperty({__proto__:null,NIL:vP,parse:j2,stringify:df,v1:sP,v3:gP,v4:yP,v5:bP,validate:lf,version:xP},Symbol.toStringTag,{value:"Module"})),W2=Ia(SP),TP=W2.v4,AP=function(e,t,n,r){if(typeof e!="string")throw new TypeError(e+" must be a string");r=r||{};const i=typeof r.version=="number"?r.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:e};if(i===2&&(s.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");s.params=t}if(typeof n>"u"){const o=typeof r.generator=="function"?r.generator:function(){return TP()};s.id=o(s,r)}else i===2&&n===null?r.notificationIdNull&&(s.id=null):s.id=n;return s};var EP=AP;const kP=W2.v4,BP=EP,Ic=function(e,t){if(!(this instanceof Ic))return new Ic(e,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return kP()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=e};var RP=Ic;Ic.prototype.request=function(e,t,n,r){const i=this;let s=null;const o=Array.isArray(e)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&e&&typeof e=="object"&&typeof t=="function")r=t,s=e;else{typeof n=="function"&&(r=n,n=void 0);const u=typeof r=="function";try{s=BP(e,t,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(d){if(u)return r(d);throw d}if(!u)return s}let c;try{c=JSON.stringify(s,this.options.replacer)}catch(u){return r(u)}return this.callServer(c,function(u,d){i._parseResponse(u,d,r)}),s};Ic.prototype._parseResponse=function(e,t,n){if(e){n(e);return}if(!t)return n();let r;try{r=JSON.parse(t,this.options.reviver)}catch(i){return n(i)}if(n.length===3)if(Array.isArray(r)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};return n(null,r.filter(i),r.filter(s))}else return n(null,r.error,r.result);n(null,r)};var Tp={},Cc={},PP={get exports(){return Cc},set exports(e){Cc=e}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(PP);var Rl={},OP={get exports(){return Rl},set exports(e){Rl=e}},Pl={},IP={get exports(){return Pl},set exports(e){Pl=e}},Ol={},CP={get exports(){return Ol},set exports(e){Ol=e}},_1;function $P(){return _1||(_1=1,function(e){var t=jl.default;function n(r,i){if(t(r)!=="object"||r===null)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var o=s.call(r,i||"default");if(t(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(CP)),Ol}var w1;function UP(){return w1||(w1=1,function(e){var t=jl.default,n=$P();function r(i){var s=n(i,"string");return t(s)==="symbol"?s:String(s)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(IP)),Pl}var b1;function Ap(){return b1||(b1=1,function(e){var t=UP();function n(i,s){for(var o=0;o<s.length;o++){var a=s[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,t(a.key),a)}}function r(i,s,o){return s&&n(i.prototype,s),o&&n(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(OP)),Rl}var Il={},MP={get exports(){return Il},set exports(e){Il=e}},v1;function Ep(){return v1||(v1=1,function(e){function t(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(MP)),Il}var Cl={},qP={get exports(){return Cl},set exports(e){Cl=e}},$l={},NP={get exports(){return $l},set exports(e){$l=e}},x1;function DP(){return x1||(x1=1,function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,o){return s.__proto__=o,s},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(NP)),$l}var S1;function kp(){return S1||(S1=1,function(e){var t=DP();function n(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&t(r,i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(qP)),Cl}var Ul={},LP={get exports(){return Ul},set exports(e){Ul=e}},Ml={},HP={get exports(){return Ml},set exports(e){Ml=e}},T1;function zP(){return T1||(T1=1,function(e){function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(HP)),Ml}var A1;function Bp(){return A1||(A1=1,function(e){var t=jl.default,n=zP();function r(i,s){if(s&&(t(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(i)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(LP)),Ul}var ql={},jP={get exports(){return ql},set exports(e){ql=e}},E1;function Rp(){return E1||(E1=1,function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(jP)),ql}var Qf={},Nl={},FP={get exports(){return Nl},set exports(e){Nl=e}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,l,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,l||c,f),_=n?n+u:u;return c._events[_]?c._events[_].fn?c._events[_]=[c._events[_],p]:c._events[_].push(p):(c._events[_]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],d,l;if(this._eventsCount===0)return u;for(l in d=this._events)t.call(d,l)&&u.push(n?l.slice(1):l);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},a.prototype.listeners=function(u){var d=n?n+u:u,l=this._events[d];if(!l)return[];if(l.fn)return[l.fn];for(var f=0,p=l.length,_=new Array(p);f<p;f++)_[f]=l[f].fn;return _},a.prototype.listenerCount=function(u){var d=n?n+u:u,l=this._events[d];return l?l.fn?1:l.length:0},a.prototype.emit=function(u,d,l,f,p,_){var y=n?n+u:u;if(!this._events[y])return!1;var b=this._events[y],B=arguments.length,E,x;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),B){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,l),!0;case 4:return b.fn.call(b.context,d,l,f),!0;case 5:return b.fn.call(b.context,d,l,f,p),!0;case 6:return b.fn.call(b.context,d,l,f,p,_),!0}for(x=1,E=new Array(B-1);x<B;x++)E[x-1]=arguments[x];b.fn.apply(b.context,E)}else{var S=b.length,T;for(x=0;x<S;x++)switch(b[x].once&&this.removeListener(u,b[x].fn,void 0,!0),B){case 1:b[x].fn.call(b[x].context);break;case 2:b[x].fn.call(b[x].context,d);break;case 3:b[x].fn.call(b[x].context,d,l);break;case 4:b[x].fn.call(b[x].context,d,l,f);break;default:if(!E)for(T=1,E=new Array(B-1);T<B;T++)E[T-1]=arguments[T];b[x].fn.apply(b[x].context,E)}}return!0},a.prototype.on=function(u,d,l){return s(this,u,d,l,!1)},a.prototype.once=function(u,d,l){return s(this,u,d,l,!0)},a.prototype.removeListener=function(u,d,l,f){var p=n?n+u:u;if(!this._events[p])return this;if(!d)return o(this,p),this;var _=this._events[p];if(_.fn)_.fn===d&&(!f||_.once)&&(!l||_.context===l)&&o(this,p);else{for(var y=0,b=[],B=_.length;y<B;y++)(_[y].fn!==d||f&&!_[y].once||l&&_[y].context!==l)&&b.push(_[y]);b.length?this._events[p]=b.length===1?b[0]:b:o(this,p)}return this},a.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(FP);var k1;function GP(){return k1||(k1=1,function(e){var t=Cc;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=t(Ep()),r=t(Ap()),i=t(kp()),s=t(Bp()),o=t(Rp()),a=Nl;function c(f){var p=u();return function(){var y=(0,o.default)(f),b;if(p){var B=(0,o.default)(this).constructor;b=Reflect.construct(y,arguments,B)}else b=y.apply(this,arguments);return(0,s.default)(this,b)}}function u(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var d=function(f){(0,i.default)(_,f);var p=c(_);function _(y,b,B){var E;return(0,n.default)(this,_),E=p.call(this),E.socket=new window.WebSocket(y,B),E.socket.onopen=function(){return E.emit("open")},E.socket.onmessage=function(x){return E.emit("message",x.data)},E.socket.onerror=function(x){return E.emit("error",x)},E.socket.onclose=function(x){E.emit("close",x.code,x.reason)},E}return(0,r.default)(_,[{key:"send",value:function(b,B,E){var x=E||B;try{this.socket.send(b),x()}catch(S){x(S)}}},{key:"close",value:function(b,B){this.socket.close(b,B)}},{key:"addEventListener",value:function(b,B,E){this.socket.addEventListener(b,B,E)}}]),_}(a.EventEmitter);function l(f,p){return new d(f,p)}}(Qf)),Qf}var e0={},Dl={},WP={get exports(){return Dl},set exports(e){Dl=e}},B1;function VP(){return B1||(B1=1,function(e){function t(r,i,s,o,a,c,u){try{var d=r[c](u),l=d.value}catch(f){s(f);return}d.done?i(l):Promise.resolve(l).then(o,a)}function n(r){return function(){var i=this,s=arguments;return new Promise(function(o,a){var c=r.apply(i,s);function u(l){t(c,o,a,u,d,"next",l)}function d(l){t(c,o,a,u,d,"throw",l)}u(void 0)})}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(WP)),Dl}var R1;function KP(){return R1||(R1=1,function(e){var t=Cc;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Kb),r=t(VP()),i=t(jl),s=t(Ep()),o=t(Ap()),a=t(kp()),c=t(Bp()),u=t(Rp()),d=Nl;function l(y){var b=f();return function(){var E=(0,u.default)(y),x;if(b){var S=(0,u.default)(this).constructor;x=Reflect.construct(E,arguments,S)}else x=E.apply(this,arguments);return(0,c.default)(this,x)}}function f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var p=function(y,b){var B={};for(var E in y)Object.prototype.hasOwnProperty.call(y,E)&&b.indexOf(E)<0&&(B[E]=y[E]);if(y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,E=Object.getOwnPropertySymbols(y);x<E.length;x++)b.indexOf(E[x])<0&&Object.prototype.propertyIsEnumerable.call(y,E[x])&&(B[E[x]]=y[E[x]]);return B},_=function(y){(0,a.default)(B,y);var b=l(B);function B(E){var x,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},R=arguments.length>3?arguments[3]:void 0;(0,s.default)(this,B);var P=T.autoconnect,C=P===void 0?!0:P,G=T.reconnect,F=G===void 0?!0:G,U=T.reconnect_interval,N=U===void 0?1e3:U,k=T.max_reconnects,h=k===void 0?5:k,g=p(T,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return x=b.call(this),x.webSocketFactory=E,x.queue={},x.rpc_id=0,x.address=S,x.autoconnect=C,x.ready=!1,x.reconnect=F,x.reconnect_timer_id=void 0,x.reconnect_interval=N,x.max_reconnects=h,x.rest_options=g,x.current_reconnects=0,x.generate_request_id=R||function(){return++x.rpc_id},x.autoconnect&&x._connect(x.address,Object.assign({autoconnect:x.autoconnect,reconnect:x.reconnect,reconnect_interval:x.reconnect_interval,max_reconnects:x.max_reconnects},x.rest_options)),x}return(0,o.default)(B,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(x,S,T,R){var P=this;return!R&&(0,i.default)(T)==="object"&&(R=T,T=null),new Promise(function(C,G){if(!P.ready)return G(new Error("socket not ready"));var F=P.generate_request_id(x,S),U={jsonrpc:"2.0",method:x,params:S||null,id:F};P.socket.send(JSON.stringify(U),R,function(N){if(N)return G(N);P.queue[F]={promise:[C,G]},T&&(P.queue[F].timeout=setTimeout(function(){delete P.queue[F],G(new Error("reply timeout"))},T))})})}},{key:"login",value:function(){var E=(0,r.default)(n.default.mark(function S(T){var R;return n.default.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.call("rpc.login",T);case 2:if(R=C.sent,R){C.next=5;break}throw new Error("authentication failed");case 5:return C.abrupt("return",R);case 6:case"end":return C.stop()}},S,this)}));function x(S){return E.apply(this,arguments)}return x}()},{key:"listMethods",value:function(){var E=(0,r.default)(n.default.mark(function S(){return n.default.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,this.call("__listMethods");case 2:return R.abrupt("return",R.sent);case 3:case"end":return R.stop()}},S,this)}));function x(){return E.apply(this,arguments)}return x}()},{key:"notify",value:function(x,S){var T=this;return new Promise(function(R,P){if(!T.ready)return P(new Error("socket not ready"));var C={jsonrpc:"2.0",method:x,params:S||null};T.socket.send(JSON.stringify(C),function(G){if(G)return P(G);R()})})}},{key:"subscribe",value:function(){var E=(0,r.default)(n.default.mark(function S(T){var R;return n.default.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return typeof T=="string"&&(T=[T]),C.next=3,this.call("rpc.on",T);case 3:if(R=C.sent,!(typeof T=="string"&&R[T]!=="ok")){C.next=6;break}throw new Error("Failed subscribing to an event '"+T+"' with: "+R[T]);case 6:return C.abrupt("return",R);case 7:case"end":return C.stop()}},S,this)}));function x(S){return E.apply(this,arguments)}return x}()},{key:"unsubscribe",value:function(){var E=(0,r.default)(n.default.mark(function S(T){var R;return n.default.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return typeof T=="string"&&(T=[T]),C.next=3,this.call("rpc.off",T);case 3:if(R=C.sent,!(typeof T=="string"&&R[T]!=="ok")){C.next=6;break}throw new Error("Failed unsubscribing from an event with: "+R);case 6:return C.abrupt("return",R);case 7:case"end":return C.stop()}},S,this)}));function x(S){return E.apply(this,arguments)}return x}()},{key:"close",value:function(x,S){this.socket.close(x||1e3,S)}},{key:"_connect",value:function(x,S){var T=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(x,S),this.socket.addEventListener("open",function(){T.ready=!0,T.emit("open"),T.current_reconnects=0}),this.socket.addEventListener("message",function(R){var P=R.data;P instanceof ArrayBuffer&&(P=Buffer.from(P).toString());try{P=JSON.parse(P)}catch{return}if(P.notification&&T.listeners(P.notification).length){if(!Object.keys(P.params).length)return T.emit(P.notification);var C=[P.notification];if(P.params.constructor===Object)C.push(P.params);else for(var G=0;G<P.params.length;G++)C.push(P.params[G]);return Promise.resolve().then(function(){T.emit.apply(T,C)})}if(!T.queue[P.id])return P.method&&P.params?Promise.resolve().then(function(){T.emit(P.method,P.params)}):void 0;"error"in P=="result"in P&&T.queue[P.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),T.queue[P.id].timeout&&clearTimeout(T.queue[P.id].timeout),P.error?T.queue[P.id].promise[1](P.error):T.queue[P.id].promise[0](P.result),delete T.queue[P.id]}),this.socket.addEventListener("error",function(R){return T.emit("error",R)}),this.socket.addEventListener("close",function(R){var P=R.code,C=R.reason;T.ready&&setTimeout(function(){return T.emit("close",P,C)},0),T.ready=!1,T.socket=void 0,P!==1e3&&(T.current_reconnects++,T.reconnect&&(T.max_reconnects>T.current_reconnects||T.max_reconnects===0)&&(T.reconnect_timer_id=setTimeout(function(){return T._connect(x,S)},T.reconnect_interval)))})}}]),B}(d.EventEmitter);e.default=_}(e0)),e0}var Co=Cc;Object.defineProperty(Tp,"__esModule",{value:!0});var V2=Tp.Client=void 0,XP=Co(Ap()),ZP=Co(Ep()),JP=Co(kp()),YP=Co(Bp()),P1=Co(Rp()),QP=Co(GP()),eO=Co(KP());function tO(e){var t=nO();return function(){var r=(0,P1.default)(e),i;if(t){var s=(0,P1.default)(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return(0,YP.default)(this,i)}}function nO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var rO=function(e){(0,JP.default)(n,e);var t=tO(n);function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ws://localhost:8080",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.autoconnect,o=s===void 0?!0:s,a=i.reconnect,c=a===void 0?!0:a,u=i.reconnect_interval,d=u===void 0?1e3:u,l=i.max_reconnects,f=l===void 0?5:l,p=arguments.length>2?arguments[2]:void 0;return(0,ZP.default)(this,n),t.call(this,QP.default,r,{autoconnect:o,reconnect:c,reconnect_interval:d,max_reconnects:f},p)}return(0,XP.default)(n)}(eO.default);V2=Tp.Client=rO;var Pp=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},sn=(e,t,n)=>(Pp(e,t,"read from private field"),n?n.call(e):t.get(e)),ac=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},cc=(e,t,n,r)=>(Pp(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),uc=(e,t,n)=>(Pp(e,t,"access private method"),n),jr=Z(),iO=Z(),sO=Z(),Kt=Z(),Sr=Z(),Er=Z(),Hs=Qt([ie({AddressOwner:Sr}),ie({ObjectOwner:Sr}),ie({Shared:ie({initial_shared_version:wt()})}),Ve("Immutable")]),oO=vi("SuiJsonValue",()=>!0),aO=32;function O1(e){try{return Yh(e).length===aO}catch{return!1}}var K2=32;function Es(e){return cO(e)&&uO(e)===K2}function Ru(e){return Es(e)}function un(e,t=!1){let n=e.toLowerCase();return!t&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(K2*2,"0")}`}function Lr(e,t=!1){return un(e,t)}function cO(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function uO(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}Qt([Z(),Ve("package")]);var Pi=ie({digest:jr,objectId:Z(),version:Qt([wt(),Z()])}),lO=ie({payment:Se(Pi),owner:Z(),price:Z(),budget:Z()}),dO=ji(Pi,ie({type:Z(),owner:Hs,previousTransaction:jr})),fO=Ji(Z(),Zi()),hO=Ji(Z(),Z()),X2=ie({type:Z(),fields:fO,hasPublicTransfer:cn()}),z0=ie({disassembled:hO}),pO=Qt([ji(X2,ie({dataType:Ve("moveObject")})),ji(z0,ie({dataType:Ve("package")}))]);ie({type:Z(),hasPublicTransfer:cn(),version:Er,bcsBytes:Se(wt())});var gO=ie({id:Kt,moduleMap:Ji(Z(),Z())}),yO=Qt([ji(X2,ie({dataType:Ve("moveObject")})),ji(gO,ie({dataType:Ve("package")}))]);BigInt(1e9);var $o=Z(),Z2=ie({code:Z(),error:Pe(Z()),object_id:Pe(Kt),version:Pe(Er),digest:Pe($o)}),J2=ie({data:an(Ji(Z(),Z())),error:an(Z2)}),mO=Qt([J2,Pe(Ji(Z(),Z()))]),_O=ie({objectId:Kt,version:Er,digest:$o,type:Pe(Z()),content:Pe(pO),bcs:Pe(yO),owner:Pe(Hs),previousTransaction:Pe(jr),storageRebate:Pe(Z()),display:Pe(mO)});ie({showType:Pe(cn()),showContent:Pe(cn()),showBcs:Pe(cn()),showOwner:Pe(cn()),showPreviousTransaction:Pe(cn()),showStorageRebate:Pe(cn()),showDisplay:Pe(cn())});Qt([Ve("Exists"),Ve("notExists"),Ve("Deleted")]);Se(dO);var Qu=ie({data:Pe(_O),error:Pe(Z2)});function au(e){return e.data}function wO(e){if(e.error&&"object_id"in e.error&&"version"in e.error&&"digest"in e.error){const t=e.error;return{objectId:t.object_id,version:t.version,digest:t.digest}}}function bO(e){if(e.error&&"object_id"in e.error&&!("version"in e.error)&&!("digest"in e.error))return e.error.object_id}function Y2(e){if("reference"in e)return e.reference;const t=au(e);return t?{objectId:t.objectId,version:t.version,digest:t.digest}:wO(e)}function cu(e){var t;return"objectId"in e?e.objectId:((t=Y2(e))==null?void 0:t.objectId)??bO(e)}function vO(e){return e.data!==void 0}function Q2(e){var n;const t=vO(e)?e.data:e;return!(t!=null&&t.type)&&"data"in e?((n=t==null?void 0:t.content)==null?void 0:n.dataType)==="package"?"package":po(e):t==null?void 0:t.type}function Op(e){var t;return(t=au(e))==null?void 0:t.previousTransaction}function eb(e){var t;return Fn(e,Hs)?e:(t=au(e))==null?void 0:t.owner}function xO(e){var n;const t=(n=au(e))==null?void 0:n.display;return t?Fn(t,J2)?t:{data:t,error:null}:{data:null,error:null}}function SO(e){const t=eb(e);if(typeof t=="object"&&"Shared"in t)return t.Shared.initial_shared_version}function po(e){var t;return(t=Ip(e))==null?void 0:t.type}function gi(e){var t;return"fields"in e?e.fields:(t=Ip(e))==null?void 0:t.fields}function TO(e){return e.content!==void 0}function Ip(e){const t="data"in e?au(e):e;if(!(!t||!TO(t)||t.content.dataType!=="moveObject"))return t.content}var AO=ie({objectId:Kt,atCheckpoint:Pe(wt())}),EO=ie({data:Se(Qu),nextCursor:Qt([an(Kt),an(AO)]),hasNextPage:cn()}),tb=ie({txDigest:jr,eventSeq:Er}),Cp=ie({id:tb,packageId:Kt,transactionModule:Z(),sender:Sr,type:Z(),parsedJson:Pe(Ji(Z(),Zi())),bcs:Pe(Z()),timestampMs:Pe(Z())}),kO=ie({data:Se(Cp),nextCursor:an(tb),hasNextPage:cn()}),BO=wt(),RO=ie({subscription:BO,result:Cp}),go=Z(),PO=ie({epoch:go,storage_charge:Z(),computation_charge:Z(),storage_rebate:Z(),epoch_start_timestamp_ms:Pe(Z())}),OO=ie({epoch:go,round:Z(),commit_timestamp_ms:Z()}),IO=ie({objects:Se(Kt)}),Ei=Qt([Ve("GasCoin"),ie({Input:wt()}),ie({Result:wt()}),ie({NestedResult:Ur([wt(),wt()])})]),CO=ie({arguments:Pe(Se(Ei)),type_arguments:Pe(Se(Z())),package:Kt,module:Z(),function:Z()}),$O=Qt([ie({MoveCall:CO}),ie({TransferObjects:Ur([Se(Ei),Ei])}),ie({SplitCoins:Ur([Ei,Se(Ei)])}),ie({MergeCoins:Ur([Ei,Se(Ei)])}),ie({Publish:Ur([z0,Se(Kt)])}),ie({Upgrade:Ur([z0,Se(Kt),Kt,Ei])}),ie({MakeMoveVec:Ur([an(Z()),Se(Ei)])})]),UO=Qt([ie({type:Ve("pure"),valueType:Pe(Z()),value:oO}),ie({type:Ve("object"),objectType:Ve("immOrOwnedObject"),objectId:Kt,version:Er,digest:$o}),ie({type:Ve("object"),objectType:Ve("sharedObject"),objectId:Kt,initialSharedVersion:Er,mutable:cn()})]),MO=ie({transactions:Se($O),inputs:Se(UO)}),qO=Qt([ji(PO,ie({kind:Ve("ChangeEpoch")})),ji(OO,ie({kind:Ve("ConsensusCommitPrologue")})),ji(IO,ie({kind:Ve("Genesis")})),ji(MO,ie({kind:Ve("ProgrammableTransaction")}))]),nb=ie({messageVersion:Ve("v1"),transaction:qO,sender:Sr,gasData:lO}),I1=Z(),NO=Qt([I1,Se(I1)]);ie({epoch:go,signature:NO,signers_map:Se(wt())});var DO=ie({computationCost:Z(),storageCost:Z(),storageRebate:Z(),nonRefundableStorageFee:Z()}),LO=Qt([Ve("success"),Ve("failure")]),HO=ie({status:LO,error:Pe(Z())}),Pu=ie({owner:Hs,reference:Pi}),zO=ie({objectId:Kt,sequenceNumber:Er}),$p=ie({messageVersion:Ve("v1"),status:HO,executedEpoch:go,modifiedAtVersions:Pe(Se(zO)),gasUsed:DO,sharedObjects:Pe(Se(Pi)),transactionDigest:jr,created:Pe(Se(Pu)),mutated:Pe(Se(Pu)),unwrapped:Pe(Se(Pu)),deleted:Pe(Se(Pi)),unwrapped_then_deleted:Pe(Se(Pi)),wrapped:Pe(Se(Pi)),gasObject:Pu,eventsDigest:Pe(sO),dependencies:Pe(Se(jr))}),Up=Se(Cp),jO=Ur([Se(wt()),Z()]),FO=Ur([Ei,Se(wt()),Z()]),GO=ie({mutableReferenceOutputs:Pe(Se(FO)),returnValues:Pe(Se(jO))}),WO=ie({effects:$p,events:Up,results:Pe(Se(GO)),error:Pe(Z())}),VO=Z(),KO=ie({data:nb,txSignatures:Se(Z())}),XO=ie({type:Ve("published"),packageId:Kt,version:Er,digest:$o,modules:Se(Z())}),ZO=ie({type:Ve("transferred"),sender:Sr,recipient:Hs,objectType:Z(),objectId:Kt,version:Er,digest:$o}),JO=ie({type:Ve("mutated"),sender:Sr,owner:Hs,objectType:Z(),objectId:Kt,version:Er,previousVersion:Er,digest:$o}),YO=ie({type:Ve("deleted"),sender:Sr,objectType:Z(),objectId:Kt,version:Er}),QO=ie({type:Ve("wrapped"),sender:Sr,objectType:Z(),objectId:Kt,version:Er}),eI=ie({type:Ve("created"),sender:Sr,owner:Hs,objectType:Z(),objectId:Kt,version:Er,digest:$o}),rb=Qt([XO,ZO,JO,YO,QO,eI]),ib=ie({owner:Hs,coinType:Z(),amount:Z()}),el=ie({digest:jr,transaction:Pe(KO),effects:Pe($p),events:Pe(Up),timestampMs:Pe(Z()),checkpoint:Pe(Z()),confirmedLocalExecution:Pe(cn()),objectChanges:Pe(Se(rb)),balanceChanges:Pe(Se(ib)),errors:Pe(Se(Z()))});ie({showInput:Pe(cn()),showEffects:Pe(cn()),showEvents:Pe(cn()),showObjectChanges:Pe(cn()),showBalanceChanges:Pe(cn())});var tI=ie({data:Se(el),nextCursor:an(jr),hasNextPage:cn()}),nI=ie({effects:$p,events:Up,objectChanges:Se(rb),balanceChanges:Se(ib),input:Pe(nb)}),sb="0x2",Mp="0x1",rI="object",iI="ID",sI=`${sb}::sui::SUI`;Lr("0x6");var C1=/^0x2::coin::Coin<(.+)>$/;function oI(e){return!!e.data||!!e.type}var aI=ie({decimals:wt(),name:Z(),symbol:Z(),description:Z(),iconUrl:an(Z()),id:an(Kt)}),Vr=class{static isCoin(e){var t;return((t=Vr.getType(e))==null?void 0:t.match(C1))!=null}static getCoinType(e){const[,t]=e.match(C1)??[];return t||null}static getCoinTypeArg(e){const t=Vr.getType(e);return t?Vr.getCoinType(t):null}static isSUI(e){const t=Vr.getCoinTypeArg(e);return t?Vr.getCoinSymbol(t)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getCoinStructTag(e){return{address:Lr(e.split("::")[0]),module:e.split("::")[1],name:e.split("::")[2],typeParams:[]}}static getID(e){return"fields"in e?e.fields.id.id:cu(e)}static totalBalance(e){return e.reduce((t,n)=>t+Vr.getBalanceFromCoinStruct(n),BigInt(0))}static sortByBalance(e){return[...e].sort((t,n)=>Vr.getBalanceFromCoinStruct(t)<Vr.getBalanceFromCoinStruct(n)?-1:Vr.getBalanceFromCoinStruct(t)>Vr.getBalanceFromCoinStruct(n)?1:0)}static getBalanceFromCoinStruct(e){return BigInt(e.balance)}static getBalance(e){var n;if(!Vr.isCoin(e))return;const t=(n=gi(e))==null?void 0:n.balance;return BigInt(t)}static getType(e){return oI(e)?Q2(e):e.type}};function cI(e){e.registerType("utf8string",(t,n)=>{const r=Array.from(new TextEncoder().encode(n));return t.writeVec(r,(i,s)=>i.write8(s))},t=>{let n=t.readVec(r=>r.read8());return new TextDecoder().decode(new Uint8Array(n))})}var No="vector",uI={kind:"TransactionKind",sender:Ze.ADDRESS,gasData:"GasData",expiration:"TransactionExpiration"},lI={enums:{"Option<T>":{None:null,Some:"T"},ObjectArg:{ImmOrOwned:"SuiObjectRef",Shared:"SharedObjectRef"},CallArg:{Pure:[No,Ze.U8],Object:"ObjectArg",ObjVec:[No,"ObjectArg"]},TypeTag:{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:"TypeTag",struct:"StructTag",u16:null,u32:null,u256:null},TransactionKind:{ProgrammableTransaction:"ProgrammableTransaction",ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null},TransactionExpiration:{None:null,Epoch:Ze.U64},TransactionData:{V1:"TransactionDataV1"}},structs:{SuiObjectRef:{objectId:Ze.ADDRESS,version:Ze.U64,digest:"ObjectDigest"},SharedObjectRef:{objectId:Ze.ADDRESS,initialSharedVersion:Ze.U64,mutable:Ze.BOOL},StructTag:{address:Ze.ADDRESS,module:Ze.STRING,name:Ze.STRING,typeParams:[No,"TypeTag"]},GasData:{payment:[No,"SuiObjectRef"],owner:Ze.ADDRESS,price:Ze.U64,budget:Ze.U64},SenderSignedData:{data:"TransactionData",txSignatures:[No,[No,Ze.U8]]},TransactionDataV1:uI},aliases:{ObjectDigest:Ze.BASE58}},ob=new Ze({...zk(),types:lI});cI(ob);function dI(e){return F9.parse(e)}var fI=ie({amount:wt(),id:Kt,transferTxDigest:jr});ie({transferredGasObjects:Se(fI),error:an(Z())});var hI=Qt([Z(),ie({Object:Z()})]),pI=Se(hI),gI=ie({address:Z(),name:Z()}),yI=Qt([Ve("Private"),Ve("Public"),Ve("Friend")]),qp=ie({abilities:Se(Z())}),mI=ie({constraints:qp,isPhantom:cn()}),_I=ie({TypeParameter:wt()});function ab(e){if(!e)return!1;if(typeof e=="string"||Fn(e,_I)||cb(e))return!0;if(typeof e!="object")return!1;const t=e;return!!(Fn(t.Reference,aa)||Fn(t.MutableReference,aa)||Fn(t.Vector,aa))}var aa=vi("SuiMoveNormalizedType",ab);function cb(e){if(!e||typeof e!="object")return!1;const t=e;if(!t.Struct||typeof t.Struct!="object")return!1;const n=t.Struct;return!(typeof n.address!="string"||typeof n.module!="string"||typeof n.name!="string"||!Array.isArray(n.typeArguments)||!n.typeArguments.every(r=>ab(r)))}vi("SuiMoveNormalizedStructType",cb);var ub=ie({visibility:yI,isEntry:cn(),typeParameters:Se(qp),parameters:Se(aa),return:Se(aa)}),wI=ie({name:Z(),type:aa}),lb=ie({abilities:qp,typeParameters:Se(mI),fields:Se(wI)}),db=ie({fileFormatVersion:wt(),address:Z(),name:Z(),friends:Se(gI),structs:Ji(Z(),lb),exposedFunctions:Ji(Z(),ub)}),bI=Ji(Z(),db);function fb(e){return typeof e=="object"&&"MutableReference"in e?e.MutableReference:void 0}function vI(e){return typeof e=="object"&&"Reference"in e?e.Reference:void 0}function hb(e){if(typeof e=="object"&&"Struct"in e)return e;const t=vI(e),n=fb(e);if(typeof t=="object"&&"Struct"in t)return t;if(typeof n=="object"&&"Struct"in n)return n}ie({value:wt()});var xI=ie({stakedSuiId:Kt,stakeRequestEpoch:go,stakeActiveEpoch:go,principal:Z(),status:Qt([Ve("Active"),Ve("Pending"),Ve("Unstaked")]),estimatedReward:Pe(wt())}),$1=ie({validatorAddress:Sr,stakingPool:Kt,stakes:Se(xI)}),SI=ie({balance:ie({value:wt()}),distribution_counter:wt(),current_distribution_amount:wt(),stake_subsidy_period_length:wt(),stake_subsidy_decrease_rate:wt()});ie({type:Z(),fields:SI});ie({value:wt()});var TI=ie({id:Z(),size:wt(),head:ie({vec:Se()}),tail:ie({vec:Se()})});ie({id:Z(),size:wt()});ie({type:Z(),fields:TI});var AI=ie({exchangeRates:ie({id:Z(),size:wt()}),id:Z(),pendingStake:wt(),pendingPoolTokenWithdraw:wt(),pendingTotalSuiWithdraw:wt(),poolTokenBalance:wt(),rewardsPool:ie({value:wt()}),activationEpoch:ie({vec:Se()}),deactivationEpoch:ie({vec:Se()}),suiBalance:wt()});ie({type:Z(),fields:AI});var EI=Se(Ur([VO,Z()])),kI=ie({epoch:go,validators:EI}),pb=ie({suiAddress:Sr,protocolPubkeyBytes:Z(),networkPubkeyBytes:Z(),workerPubkeyBytes:Z(),proofOfPossessionBytes:Z(),operationCapId:Z(),name:Z(),description:Z(),imageUrl:Z(),projectUrl:Z(),p2pAddress:Z(),netAddress:Z(),primaryAddress:Z(),workerAddress:Z(),nextEpochProtocolPubkeyBytes:an(Z()),nextEpochProofOfPossession:an(Z()),nextEpochNetworkPubkeyBytes:an(Z()),nextEpochWorkerPubkeyBytes:an(Z()),nextEpochNetAddress:an(Z()),nextEpochP2pAddress:an(Z()),nextEpochPrimaryAddress:an(Z()),nextEpochWorkerAddress:an(Z()),votingPower:Z(),gasPrice:Z(),commissionRate:Z(),nextEpochStake:Z(),nextEpochGasPrice:Z(),nextEpochCommissionRate:Z(),stakingPoolId:Z(),stakingPoolActivationEpoch:an(Z()),stakingPoolDeactivationEpoch:an(Z()),stakingPoolSuiBalance:Z(),rewardsPool:Z(),poolTokenBalance:Z(),pendingStake:Z(),pendingPoolTokenWithdraw:Z(),pendingTotalSuiWithdraw:Z(),exchangeRatesId:Z(),exchangeRatesSize:Z()}),BI=ie({epoch:Z(),protocolVersion:Z(),systemStateVersion:Z(),storageFundTotalObjectStorageRebates:Z(),storageFundNonRefundableBalance:Z(),referenceGasPrice:Z(),safeMode:cn(),safeModeStorageRewards:Z(),safeModeComputationRewards:Z(),safeModeStorageRebates:Z(),safeModeNonRefundableStorageFee:Z(),epochStartTimestampMs:Z(),epochDurationMs:Z(),stakeSubsidyStartEpoch:Z(),maxValidatorCount:Z(),minValidatorJoiningStake:Z(),validatorLowStakeThreshold:Z(),validatorVeryLowStakeThreshold:Z(),validatorLowStakeGracePeriod:Z(),stakeSubsidyBalance:Z(),stakeSubsidyDistributionCounter:Z(),stakeSubsidyCurrentDistributionAmount:Z(),stakeSubsidyPeriodLength:Z(),stakeSubsidyDecreaseRate:wt(),totalStake:Z(),activeValidators:Se(pb),pendingActiveValidatorsId:Z(),pendingActiveValidatorsSize:Z(),pendingRemovals:Se(Z()),stakingPoolMappingsId:Z(),stakingPoolMappingsSize:Z(),inactivePoolsId:Z(),inactivePoolsSize:Z(),validatorCandidatesId:Z(),validatorCandidatesSize:Z(),atRiskValidators:Se(Ur([Sr,Z()])),validatorReportRecords:Se(Ur([Sr,Se(Sr)]))}),RI=ie({coinType:Z(),coinObjectId:Kt,version:Z(),digest:jr,balance:Z(),lockedUntilEpoch:an(wt()),previousTransaction:jr}),U1=ie({data:Se(RI),nextCursor:an(Kt),hasNextPage:cn()}),M1=ie({coinType:Z(),coinObjectCount:wt(),totalBalance:Z(),lockedBalance:ie({epochId:Pe(wt()),number:Pe(wt())})}),PI=ie({value:Z()}),OI=ie({computationCost:Z(),storageCost:Z(),storageRebate:Z(),nonRefundableStorageFee:Z()});Z();var q1=Z();ie({digest:Se(wt())});var gb=Zi(),II=Z(),CI=ie({nextEpochCommittee:Se(Ur([Z(),Z()])),nextEpochProtocolVersion:Z(),epochCommitments:Se(gb)});ie({transaction:jr,effects:iO});var yb=ie({epoch:Z(),sequenceNumber:Z(),digest:q1,networkTotalTransactions:Z(),previousDigest:Pe(q1),epochRollingGasCostSummary:OI,timestampMs:Z(),endOfEpochData:Pe(CI),validatorSignature:Pe(II),transactions:Se(jr),checkpointCommitments:Se(gb)}),$I=ie({data:Se(yb),nextCursor:an(Z()),hasNextPage:cn()}),UI="0.32.1",j0=class extends Error{constructor(e){super("RPC Error",{cause:e.cause}),this.req=e.req,this.code=e.code,this.data=e.data}},N1=class extends Error{constructor(e){super("RPC Validation Error: The response returned from RPC server does not match the TypeScript definition. This is likely because the SDK version is not compatible with the RPC server.",{cause:e.cause}),this.req=e.req,this.result=e.result,this.message=this.toString()}toString(){let e=super.toString();return this.cause&&(e+=`
Cause: ${this.cause}`),this.result&&(e+=`
Reponse Received: ${JSON.stringify(this.result,null,2)}`),e}},MI=class extends Error{},qI=ie({jsonrpc:Ve("2.0"),id:Z(),result:Zi()}),mb=ie({jsonrpc:Ve("2.0"),id:Z(),error:ie({code:Zi(),message:Z(),data:Pe(Zi())})}),NI=class{constructor(e,t){this.rpcClient=new RP(async(n,r)=>{const i={method:"POST",body:n,headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":UI,"Client-Target-Api-Version":RC,...t}};try{let s=await fetch(e,i);const o=await s.text();if(s.ok)r(null,o);else{const a=s.headers.get("content-type")==="text/html";r(new Error(`${s.status} ${s.statusText}${a?"":`: ${o}`}`))}}catch(s){r(s)}},{})}async requestWithType(e,t,n,r=!1){const i={method:e,args:t},s=await this.request(e,t);if(Fn(s,mb))throw new j0({req:i,code:s.error.code,data:s.error.data,cause:new Error(s.error.message)});if(Fn(s,qI)){const[o]=Wa(s.result,n);if(r&&o)return console.warn(new N1({req:i,result:s.result,cause:o})),s.result;if(o)throw new N1({req:i,result:s.result,cause:o});return s.result}throw new j0({req:i,data:s})}async request(e,t){return new Promise((n,r)=>{this.rpcClient.request(e,t,(i,s)=>{if(i){r(i);return}n(s)})})}},DI=Qt([Ve("DynamicField"),Ve("DynamicObject")]),LI=ie({type:Z(),value:Zi()}),HI=ie({name:LI,bcsName:Z(),type:DI,objectType:Z(),objectId:Kt,version:wt(),digest:Z()}),zI=ie({data:Se(HI),nextCursor:an(Kt),hasNextPage:cn()}),jI=(e,t)=>{const n=new URL(e);return n.protocol=n.protocol.replace("http","ws"),t&&(n.port=t.toString()),n.toString()},FI=e=>e&&"subscription"in e&&typeof e.subscription=="number"&&"result"in e&&typeof e.result=="object",_b={connectTimeout:15e3,callTimeout:3e4,reconnectInterval:3e3,maxReconnects:5},D1="suix_subscribeEvent",GI="suix_unsubscribeEvent",WI=class{constructor(e,t,n=_b){this.endpoint=e,this.skipValidation=t,this.options=n,this.connectionState=0,this.connectionTimeout=null,this.isSetup=!1,this.connectionPromise=null,this.eventSubscriptions=new Map,this.endpoint.startsWith("http")&&(this.endpoint=jI(this.endpoint)),this.rpcClient=new V2(this.endpoint,{reconnect_interval:this.options.reconnectInterval,max_reconnects:this.options.maxReconnects,autoconnect:!1})}setupSocket(){this.isSetup||(this.rpcClient.on("open",()=>{this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.connectionState=2,this.rpcClient.socket.on("message",this.onSocketMessage.bind(this))}),this.rpcClient.on("close",()=>{this.connectionState=0}),this.rpcClient.on("error",console.error),this.isSetup=!0)}onSocketMessage(e){const t=JSON.parse(e),n=t.params;if(t.method===D1){if(this.skipValidation&&FI(n)){const r=this.eventSubscriptions.get(n.subscription);r&&r.onMessage(n.result)}else if(Fn(n,RO)){const r=this.eventSubscriptions.get(n.subscription);r&&r.onMessage(n.result)}}}async connect(){return this.connectionPromise?this.connectionPromise:this.connectionState===2?Promise.resolve():(this.setupSocket(),this.rpcClient.connect(),this.connectionState=1,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeout=setTimeout(()=>t(new Error("timeout")),this.options.connectTimeout),this.rpcClient.once("open",()=>{this.refreshSubscriptions(),this.connectionPromise=null,e()}),this.rpcClient.once("error",n=>{this.connectionPromise=null,t(n)})}),this.connectionPromise)}async refreshSubscriptions(){if(this.eventSubscriptions.size!==0)try{let e=new Map;(await Promise.all(Array.from(this.eventSubscriptions.values()).map(async n=>{const r=n.onMessage,i=n.filter;return!i||!r?Promise.resolve(null):{id:await this.subscribeEvent(i,r),onMessage:r,filter:i}}))).forEach(n=>{if(n===null)return;const r=n.filter,i=n.onMessage;e.set(n.id,{filter:r,onMessage:i})}),this.eventSubscriptions=e}catch(e){throw new Error(`error refreshing event subscriptions: ${e}`)}}async subscribeEvent(e,t){try{this.connectionState!==2&&await this.connect();let n=await this.rpcClient.call(D1,[e],this.options.callTimeout);return this.eventSubscriptions.set(n,{filter:e,onMessage:t}),n}catch(n){throw new Error(`Error subscribing to event: ${JSON.stringify(n,null,2)}, filter: ${JSON.stringify(e)}`)}}async unsubscribeEvent(e){try{this.connectionState!==2&&await this.connect();let t=await this.rpcClient.call(GI,[e],this.options.callTimeout);return this.eventSubscriptions.delete(e)||t}catch(t){throw new Error(`Error unsubscribing from event: ${t}, subscription: ${e}`)}}};async function VI(e,t,n){const r=await fetch(e,{method:"POST",body:JSON.stringify({FixedAmountRequest:{recipient:t}}),headers:{"Content-Type":"application/json",...n||{}}});if(r.status===429)throw new MI("Too many requests from this client have been sent to the faucet. Please retry later");let i;try{i=await r.json()}catch(s){throw new Error(`Ecountered error when parsing response from faucet, error: ${s}, status ${r.status}, response ${r}`)}if(i.error)throw new Error(`Faucet returns error: ${i.error}`);return i}var Vs,hf=class{constructor(e){ac(this,Vs,void 0),cc(this,Vs,e)}get fullnode(){return sn(this,Vs).fullnode}get websocket(){return sn(this,Vs).websocket||sn(this,Vs).fullnode}get faucet(){return sn(this,Vs).faucet}};Vs=new WeakMap;new hf({fullnode:"http://127.0.0.1:9000",faucet:"http://127.0.0.1:9123/gas"});var KI=new hf({fullnode:"https://fullnode.devnet.sui.io:443/",faucet:"https://faucet.devnet.sui.io/gas"});new hf({fullnode:"https://fullnode.testnet.sui.io:443/",faucet:"https://faucet.testnet.sui.io/gas"});function Br(e,t){return Zw(e,t)}var Ll=Symbol("transaction-argument-type"),XI=e=>Qt([ie({None:Ve(null)}),ie({Some:e})]),$c=ie({kind:Ve("Input"),index:Vi(),value:Pe(Zi()),type:Pe(Qt([Ve("pure"),Ve("object")]))}),Np=[$c,ie({kind:Ve("GasCoin")}),ie({kind:Ve("Result"),index:Vi()}),ie({kind:Ve("NestedResult"),index:Vi(),resultIndex:Vi()})],ZI=Qt([...Np]),yo=Qt([...Np]);yo[Ll]={kind:"object"};var wb=e=>{const t=Qt([...Np]);return t[Ll]={kind:"pure",type:e},t},bb=ie({kind:Ve("MoveCall"),target:vi("target",Z().validator),typeArguments:Se(Z()),arguments:Se(ZI)}),vb=ie({kind:Ve("TransferObjects"),objects:Se(yo),address:wb(Ze.ADDRESS)}),xb=ie({kind:Ve("SplitCoins"),coin:yo,amounts:Se(wb("u64"))}),Sb=ie({kind:Ve("MergeCoins"),destination:yo,sources:Se(yo)}),Tb=ie({kind:Ve("MakeMoveVec"),type:Pe(XI(Z())),objects:Se(yo)}),Ab=ie({kind:Ve("Publish"),modules:Se(Se(Vi())),dependencies:Se(Kt)}),Eb=ie({kind:Ve("Upgrade"),modules:Se(Se(Vi())),dependencies:Se(Kt),packageId:Kt,ticket:yo}),kb=[bb,vb,xb,Sb,Ab,Eb,Tb],Bb=Qt([...kb]);function JI(e){return wl(e,Bb),kb.find(t=>Fn(e,t))}var ws={MoveCall(e){return Br({kind:"MoveCall",target:e.target,arguments:e.arguments??[],typeArguments:e.typeArguments??[]},bb)},TransferObjects(e,t){return Br({kind:"TransferObjects",objects:e,address:t},vb)},SplitCoins(e,t){return Br({kind:"SplitCoins",coin:e,amounts:t},xb)},MergeCoins(e,t){return Br({kind:"MergeCoins",destination:e,sources:t},Sb)},Publish({modules:e,dependencies:t}){return Br({kind:"Publish",modules:e.map(n=>typeof n=="string"?Array.from(ho(n)):n),dependencies:t.map(n=>Lr(n))},Ab)},Upgrade({modules:e,dependencies:t,packageId:n,ticket:r}){return Br({kind:"Upgrade",modules:e.map(i=>typeof i=="string"?Array.from(ho(i)):i),dependencies:t.map(i=>Lr(i)),packageId:n,ticket:r},Eb)},MakeMoveVec({type:e,objects:t}){return Br({kind:"MakeMoveVec",type:e?{Some:e}:{None:null},objects:t},Tb)}},YI=/^vector<(.+)>$/,QI=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,Zs=class{static parseFromStr(e,t=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const n=e.match(YI);if(n)return{vector:Zs.parseFromStr(n[1],t)};const r=e.match(QI);if(r)return{struct:{address:t?un(r[1]):r[1],module:r[2],name:r[3],typeParams:r[5]===void 0?[]:Zs.parseStructTypeArgs(r[5],t)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,t=!1){const n=[];let r="",i=0;for(let s=0;s<e.length;s++){const o=e[s];if(o==="<"&&i++,o===">"&&i--,i===0&&o===","){n.push(r.trim()),r="";continue}r+=o}return n.push(r.trim()),n.map(s=>Zs.parseFromStr(s,t))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${Zs.tagToString(e.vector)}>`;if("struct"in e){const t=e.struct,n=t.typeParams.map(Zs.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}},Rb="Argument",vr="vector",eC="Option",tC="CallArg",L1="TypeTag",nC="ProgrammableTransaction",F0="ProgrammableMoveCall",Pb="Transaction",Dp="EnumKind",rC=[Dp,Pb],qi=[Dp,Rb],Ob="SimpleProgrammableMoveCall",Rs=new Ze(ob).registerStructType(nC,{inputs:[vr,tC],transactions:[vr,rC]}).registerEnumType(Rb,{GasCoin:null,Input:{index:Ze.U16},Result:{index:Ze.U16},NestedResult:{index:Ze.U16,resultIndex:Ze.U16}}).registerStructType(F0,{package:Ze.ADDRESS,module:Ze.STRING,function:Ze.STRING,type_arguments:[vr,L1],arguments:[vr,qi]}).registerEnumType(Pb,{MoveCall:Ob,TransferObjects:{objects:[vr,qi],address:qi},SplitCoins:{coin:qi,amounts:[vr,qi]},MergeCoins:{destination:qi,sources:[vr,qi]},Publish:{modules:[vr,[vr,Ze.U8]],dependencies:[vr,Ze.ADDRESS]},MakeMoveVec:{type:[eC,L1],objects:[vr,qi]},Upgrade:{modules:[vr,[vr,Ze.U8]],dependencies:[vr,Ze.ADDRESS],packageId:Ze.ADDRESS,ticket:qi}});Rs.registerType([Dp,"T"],function(t,n,r,i){const o={[n.kind]:n},[a]=r;return this.getTypeInterface(a)._encodeRaw.call(this,t,o,r,i)},function(t,n,r){const[i]=n,s=this.getTypeInterface(i)._decodeRaw.call(this,t,n,r),o=Object.keys(s)[0];return{kind:o,...s[o]}},e=>{if(typeof e!="object"&&!("kind"in e))throw new Error(`EnumKind: Missing property "kind" in the input ${JSON.stringify(e)}`);return!0});Rs.registerType(Ob,function(t,n,r,i){const[s,o,a]=n.target.split("::"),c=n.typeArguments.map(u=>Zs.parseFromStr(u,!0));return this.getTypeInterface(F0)._encodeRaw.call(this,t,{package:un(s),module:o,function:a,type_arguments:c,arguments:n.arguments},r,i)},function(t,n,r){let i=Rs.getTypeInterface(F0)._decodeRaw.call(this,t,n,r);return{target:[i.package,i.module,i.function].join("::"),arguments:i.arguments,typeArguments:i.type_arguments.map(Zs.tagToString)}},e=>e.target.split("::").length===3);var iC=Qt([ie({ImmOrOwned:Pi}),ie({Shared:ie({objectId:Z(),initialSharedVersion:Qt([Vi(),Z()]),mutable:cn()})})]),G0=ie({Pure:Se(Vi())}),sC=ie({Object:iC}),yc=Qt([G0,sC]),Li={Pure(e,t){return{Pure:Array.from(e instanceof Uint8Array?e:Rs.ser(t,e).toBytes())}},ObjectRef({objectId:e,digest:t,version:n}){return{Object:{ImmOrOwned:{digest:t,version:n,objectId:un(e)}}}},SharedObjectRef({objectId:e,mutable:t,initialSharedVersion:n}){return{Object:{Shared:{mutable:t,initialSharedVersion:n,objectId:un(e)}}}}};function H1(e){return typeof e=="string"?un(e):"ImmOrOwned"in e.Object?un(e.Object.ImmOrOwned.objectId):un(e.Object.Shared.objectId)}function oC(e){return typeof e=="object"&&"Object"in e&&"Shared"in e.Object?e.Object.Shared:void 0}function aC(e){var t;return((t=oC(e))==null?void 0:t.mutable)??!1}var cC="ascii",uC="String",lC="string",dC="String",fC="option",hC="Option",pC={address:sb,module:rI,name:iI},gC={address:Mp,module:cC,name:uC},yC={address:Mp,module:lC,name:dC},mC={address:Mp,module:fC,name:hC},Ou=(e,t)=>e.address===t.address&&e.module===t.module&&e.name===t.name;function _C(e){var n;const t=(n=hb(e))==null?void 0:n.Struct;return(t==null?void 0:t.address)==="0x2"&&(t==null?void 0:t.module)==="tx_context"&&(t==null?void 0:t.name)==="TxContext"}function t0(e,t){if(!(typeof t>"u")&&typeof t!==e)throw new Error(`Expect ${t} to be ${e}, received ${typeof t}`)}var wC=["Address","Bool","U8","U16","U32","U64","U128","U256"];function W0(e,t){if(typeof e=="string"&&wC.includes(e)){if(e in["U8","U16","U32","U64","U128","U256"])t0("number",t);else if(e==="Bool")t0("boolean",t);else if(e==="Address"&&(t0("string",t),t&&!Es(t)))throw new Error("Invalid Sui Address");return e.toLowerCase()}else if(typeof e=="string")throw new Error(`Unknown pure normalized type ${JSON.stringify(e,null,2)}`);if("Vector"in e){if((t===void 0||typeof t=="string")&&e.Vector==="U8")return"string";if(t!==void 0&&!Array.isArray(t))throw new Error(`Expect ${t} to be a array, received ${typeof t}`);const n=W0(e.Vector,t?t[0]:void 0);return n===void 0?void 0:`vector<${n}>`}if("Struct"in e){if(Ou(e.Struct,gC))return"string";if(Ou(e.Struct,yC))return"utf8string";if(Ou(e.Struct,pC))return"address";if(Ou(e.Struct,mC)){const n={Vector:e.Struct.typeArguments[0]};return W0(n,t)}}}function bC(e,t){const n=Array.from(`${e}::`).map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+t.length);return r.set(n),r.set(t,n.length),C9(r,{dkLen:32})}var vC=Pe(an(Qt([ie({Epoch:Vi()}),ie({None:Qt([Ve(!0),Ve(null)])})]))),Ib=Z(),z1=vi("StringEncodedBigint",e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}}),xC=ie({budget:Pe(z1),price:Pe(z1),payment:Pe(Se(Pi)),owner:Pe(Ib)}),Iu=ie({version:Ve(1),sender:Pe(Ib),expiration:vC,gasConfig:xC,inputs:Se($c),transactions:Se(Bb)});function j1(e){return un(e).replace("0x","")}var F1=128*1024,Ps=class{constructor(e){this.version=1,this.sender=e==null?void 0:e.sender,this.expiration=e==null?void 0:e.expiration,this.gasConfig=(e==null?void 0:e.gasConfig)??{},this.inputs=(e==null?void 0:e.inputs)??[],this.transactions=(e==null?void 0:e.transactions)??[]}static fromKindBytes(e){const t=Rs.de("TransactionKind",e),n=t==null?void 0:t.ProgrammableTransaction;if(!n)throw new Error("Unable to deserialize from bytes.");const r=Br({version:1,gasConfig:{},inputs:n.inputs.map((i,s)=>Br({kind:"Input",value:i,index:s,type:Fn(i,G0)?"pure":"object"},$c)),transactions:n.transactions},Iu);return Ps.restore(r)}static fromBytes(e){var s;const t=Rs.de("TransactionData",e),n=t==null?void 0:t.V1,r=(s=n==null?void 0:n.kind)==null?void 0:s.ProgrammableTransaction;if(!n||!r)throw new Error("Unable to deserialize from bytes.");const i=Br({version:1,sender:n.sender,expiration:n.expiration,gasConfig:n.gasData,inputs:r.inputs.map((o,a)=>Br({kind:"Input",value:o,index:a,type:Fn(o,G0)?"pure":"object"},$c)),transactions:r.transactions},Iu);return Ps.restore(i)}static restore(e){wl(e,Iu);const t=new Ps;return Object.assign(t,e),t}static getDigestFromBytes(e){const t=bC("TransactionData",e);return Jh(t)}build({overrides:e,onlyTransactionKind:t}={}){const n=this.inputs.map(c=>(wl(c.value,yc),c.value)),r={ProgrammableTransaction:{inputs:n,transactions:this.transactions}};if(t)return Rs.ser("TransactionKind",r,{maxSize:F1}).toBytes();const i=(e==null?void 0:e.expiration)??this.expiration,s=(e==null?void 0:e.sender)??this.sender,o={...this.gasConfig,...e==null?void 0:e.gasConfig};if(!s)throw new Error("Missing transaction sender");if(!o.budget)throw new Error("Missing gas budget");if(!o.payment)throw new Error("Missing gas payment");if(!o.price)throw new Error("Missing gas price");const a={sender:j1(s),expiration:i||{None:!0},gasData:{payment:o.payment,owner:j1(this.gasConfig.owner??s),price:BigInt(o.price),budget:BigInt(o.budget)},kind:{ProgrammableTransaction:{inputs:n,transactions:this.transactions}}};return Rs.ser("TransactionData",{V1:a},{maxSize:F1}).toBytes()}getDigest(){const e=this.build({onlyTransactionKind:!1});return Ps.getDigestFromBytes(e)}snapshot(){return Br(this,Iu)}};function SC(e){const t={kind:"Result",index:e},n=[],r=i=>n[i]??(n[i]={kind:"NestedResult",index:e,resultIndex:i});return new Proxy(t,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(i,s){if(s in i)return Reflect.get(i,s);if(s===Symbol.iterator)return function*(){let a=0;for(;;)yield r(a),a++};if(typeof s=="symbol")return;const o=parseInt(s,10);if(!(Number.isNaN(o)||o<0))return r(o)}})}function lc(e){if(!e)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e}var G1=Symbol.for("@mysten/transaction"),V0=256,TC=1e9,AC=10n,Gt,tl,K0,Lp,Cb,nl,X0,Z0=class{constructor(e){ac(this,tl),ac(this,Lp),ac(this,nl),ac(this,Gt,void 0),cc(this,Gt,new Ps(e?e.blockData:void 0))}static is(e){return!!e&&typeof e=="object"&&e[G1]===!0}static fromKind(e){const t=new Z0;return cc(t,Gt,Ps.fromKindBytes(typeof e=="string"?ho(e):e)),t}static from(e){const t=new Z0;return typeof e!="string"||!e.startsWith("{")?cc(t,Gt,Ps.fromBytes(typeof e=="string"?ho(e):e)):cc(t,Gt,Ps.restore(JSON.parse(e))),t}static get Transactions(){return ws}static get Inputs(){return Li}setSender(e){sn(this,Gt).sender=e}setSenderIfNotSet(e){sn(this,Gt).sender||(sn(this,Gt).sender=e)}setExpiration(e){sn(this,Gt).expiration=e}setGasPrice(e){sn(this,Gt).gasConfig.price=String(e)}setGasBudget(e){sn(this,Gt).gasConfig.budget=String(e)}setGasOwner(e){sn(this,Gt).gasConfig.owner=e}setGasPayment(e){if(e.length>=V0)throw new Error(`Payment objects exceed maximum amount ${V0}`);sn(this,Gt).gasConfig.payment=e.map(t=>Jw(t,Pi))}get blockData(){return sn(this,Gt).snapshot()}get[G1](){return!0}get gas(){return{kind:"GasCoin"}}object(e){const t=H1(e);return sn(this,Gt).inputs.find(r=>r.type==="object"&&t===H1(r.value))??uc(this,tl,K0).call(this,"object",e)}objectRef(...e){return this.object(Li.ObjectRef(...e))}sharedObjectRef(...e){return this.object(Li.SharedObjectRef(...e))}pure(e,t){return uc(this,tl,K0).call(this,"pure",e instanceof Uint8Array?Li.Pure(e):t?Li.Pure(e,t):e)}add(e){const t=sn(this,Gt).transactions.push(e);return SC(t-1)}splitCoins(...e){return this.add(ws.SplitCoins(...e))}mergeCoins(...e){return this.add(ws.MergeCoins(...e))}publish(...e){return this.add(ws.Publish(...e))}upgrade(...e){return this.add(ws.Upgrade(...e))}moveCall(...e){return this.add(ws.MoveCall(...e))}transferObjects(...e){return this.add(ws.TransferObjects(...e))}makeMoveVec(...e){return this.add(ws.MakeMoveVec(...e))}serialize(){return JSON.stringify(sn(this,Gt).snapshot())}async build({provider:e,onlyTransactionKind:t}={}){return await uc(this,nl,X0).call(this,{provider:e,onlyTransactionKind:t}),sn(this,Gt).build({onlyTransactionKind:t})}async getDigest({provider:e}={}){return await uc(this,nl,X0).call(this,{provider:e}),sn(this,Gt).getDigest()}},Ut=Z0;Gt=new WeakMap;tl=new WeakSet;K0=function(e,t){const n=sn(this,Gt).inputs.length,r=Br({kind:"Input",value:typeof t=="bigint"?String(t):t,index:n,type:e},$c);return sn(this,Gt).inputs.push(r),r};Lp=new WeakSet;Cb=async function(e){const t=sn(this,Gt).gasConfig.owner??sn(this,Gt).sender,r=(await lc(e).getCoins({owner:t,coinType:sI})).data.filter(i=>!sn(this,Gt).inputs.find(o=>Fn(o.value,yc)&&"Object"in o.value&&"ImmOrOwned"in o.value.Object?i.coinObjectId===o.value.Object.ImmOrOwned.objectId:!1)).slice(0,V0-1).map(i=>({objectId:i.coinObjectId,digest:i.digest,version:i.version}));if(!r.length)throw new Error("No valid gas coins found for the transaction.");return r};nl=new WeakSet;X0=async function({provider:e,onlyTransactionKind:t}){var o;if(!t&&!sn(this,Gt).sender)throw new Error("Missing transaction sender");const{inputs:n,transactions:r}=sn(this,Gt),i=[],s=[];if(r.forEach(a=>{if(a.kind==="MoveCall"){a.arguments.some(d=>d.kind==="Input"&&!Fn(n[d.index].value,yc))&&i.push(a);return}const c=JI(a);c.schema&&Object.entries(a).forEach(([u,d])=>{if(u==="kind")return;const l=c.schema[u],f=l.type==="array",p=f?l.schema[Ll]:l[Ll];if(!p)return;const _=y=>{const b=n[y];if(!b)throw new Error(`Missing input ${d.index}`);if(!Fn(b.value,yc))if(p.kind==="object"&&typeof b.value=="string")s.push({id:b.value,input:b});else if(p.kind==="pure")b.value=Li.Pure(b.value,p.type);else throw new Error("Unexpected input format.")};if(f)d.forEach(y=>{y.kind==="Input"&&_(y.index)});else{if(d.kind!=="Input")return;_(d.index)}})}),i.length&&await Promise.all(i.map(async a=>{const[c,u,d]=a.target.split("::"),l=await lc(e).getNormalizedMoveFunction({package:Lr(c),module:u,function:d}),p=l.parameters.length>0&&_C(l.parameters.at(-1))?l.parameters.slice(0,l.parameters.length-1):l.parameters;if(p.length!==a.arguments.length)throw new Error("Incorrect number of arguments.");p.forEach((_,y)=>{const b=a.arguments[y];if(b.kind!=="Input")return;const B=n[b.index];if(Fn(B.value,yc))return;const E=B.value,x=W0(_,E);if(x){B.value=Li.Pure(E,x);return}if(hb(_)!=null||typeof _=="object"&&"TypeParameter"in _){if(typeof E!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(E,null,2)}`);s.push({id:E,input:B,normalizedType:_});return}throw new Error(`Unknown call arg type ${JSON.stringify(_,null,2)} for value ${JSON.stringify(E,null,2)}`)})})),s.length){const a=[...new Set(s.map(({id:l})=>l))],c=await lc(e).multiGetObjects({ids:a,options:{showOwner:!0}});let u=new Map(a.map((l,f)=>[l,c[f]]));const d=Array.from(u).filter(([l,f])=>f.error).map(([l,f])=>l);if(d.length)throw new Error(`The following input objects are not invalid: ${d.join(", ")}`);s.forEach(({id:l,input:f,normalizedType:p})=>{const _=u.get(l),y=SO(_);if(y){const b=aC(f.value)||p!=null&&fb(p)!=null;f.value=Li.SharedObjectRef({objectId:l,initialSharedVersion:y,mutable:b})}else f.value=Li.ObjectRef(Y2(_))})}if(!t&&(sn(this,Gt).gasConfig.price||this.setGasPrice(await lc(e).getReferenceGasPrice()),sn(this,Gt).gasConfig.payment||(sn(this,Gt).gasConfig.payment=await uc(this,Lp,Cb).call(this,e)),!this.blockData.gasConfig.budget)){const a=await lc(e).dryRunTransactionBlock({transactionBlock:sn(this,Gt).build({overrides:{gasConfig:{budget:String(TC),payment:[]}}})});if(a.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${a.effects.status.error}`,{cause:a});const c=AC*BigInt(((o=this.blockData.gasConfig.payment)==null?void 0:o.length)||0n)*BigInt(this.blockData.gasConfig.price||1n);this.setGasBudget(BigInt(a.effects.gasUsed.computationCost)+BigInt(a.effects.gasUsed.storageCost)+c)}};var EC=ie({currentTps:wt(),tps30Days:wt(),currentCheckpoint:Z(),currentEpoch:Z(),totalAddresses:Z(),totalObjects:Z(),totalPackages:Z()}),kC=ie({lastCheckpointId:Z(),epochEndTimestamp:Z(),protocolVersion:Z(),referenceGasPrice:Z(),totalStake:Z(),storageFundReinvestment:Z(),storageCharge:Z(),storageRebate:Z(),storageFundBalance:Z(),stakeSubsidyAmount:Z(),totalGasFees:Z(),totalStakeRewardsDistributed:Z(),leftoverStorageFundInflow:Z()}),$b=ie({epoch:Z(),validators:Se(pb),epochTotalTransactions:Z(),firstCheckpointId:Z(),epochStartTimestamp:Z(),endOfEpochInfo:an(kC)}),BC=ie({data:Se($b),nextCursor:an(Z()),hasNextPage:cn()}),RC="0.29.0",W1={skipDataValidation:!0,socketOptions:_b,versionCacheTimeoutInSeconds:600},PC=class{constructor(e=KI,t=W1){this.options=t,this.connection=e;const n={...W1,...t};this.options=n,this.client=n.rpcClient??new NI(this.connection.fullnode),this.wsClient=n.websocketClient??new WI(this.connection.websocket,n.skipDataValidation,n.socketOptions)}async getRpcApiVersion(){if(this.rpcApiVersion&&this.cacheExpiry&&this.cacheExpiry<=Date.now())return this.rpcApiVersion;try{const e=await this.client.requestWithType("rpc.discover",[],Zi(),this.options.skipDataValidation);return this.rpcApiVersion=dI(e.info.version),this.cacheExpiry=Date.now()+(this.options.versionCacheTimeoutInSeconds??0)*1e3,this.rpcApiVersion}catch(e){console.warn("Error fetching version number of the RPC API",e)}}async requestSuiFromFaucet(e,t){if(!this.connection.faucet)throw new Error("Faucet URL is not specified");return VI(this.connection.faucet,e,t)}async getCoins(e){if(!e.owner||!Es(un(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getCoins",[e.owner,e.coinType,e.cursor,e.limit],U1,this.options.skipDataValidation)}async getAllCoins(e){if(!e.owner||!Es(un(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getAllCoins",[e.owner,e.cursor,e.limit],U1,this.options.skipDataValidation)}async getBalance(e){if(!e.owner||!Es(un(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getBalance",[e.owner,e.coinType],M1,this.options.skipDataValidation)}async getAllBalances(e){if(!e.owner||!Es(un(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getAllBalances",[e.owner],Se(M1),this.options.skipDataValidation)}async getCoinMetadata(e){return await this.client.requestWithType("suix_getCoinMetadata",[e.coinType],aI,this.options.skipDataValidation)}async getTotalSupply(e){return await this.client.requestWithType("suix_getTotalSupply",[e.coinType],PI,this.options.skipDataValidation)}async call(e,t){const n=await this.client.request(e,t);if(Fn(n,mb))throw new j0({req:{method:e,args:t},code:n.error.code,data:n.error.data,cause:new Error(n.error.message)});return n.result}async getMoveFunctionArgTypes(e){return await this.client.requestWithType("sui_getMoveFunctionArgTypes",[e.package,e.module,e.function],pI,this.options.skipDataValidation)}async getNormalizedMoveModulesByPackage(e){return await this.client.requestWithType("sui_getNormalizedMoveModulesByPackage",[e.package],bI,this.options.skipDataValidation)}async getNormalizedMoveModule(e){return await this.client.requestWithType("sui_getNormalizedMoveModule",[e.package,e.module],db,this.options.skipDataValidation)}async getNormalizedMoveFunction(e){return await this.client.requestWithType("sui_getNormalizedMoveFunction",[e.package,e.module,e.function],ub,this.options.skipDataValidation)}async getNormalizedMoveStruct(e){return await this.client.requestWithType("sui_getNormalizedMoveStruct",[e.package,e.module,e.struct],lb,this.options.skipDataValidation)}async getOwnedObjects(e){if(!e.owner||!Es(un(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getOwnedObjects",[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit],EO,this.options.skipDataValidation)}async getObject(e){if(!e.id||!Ru(Lr(e.id)))throw new Error("Invalid Sui Object id");return await this.client.requestWithType("sui_getObject",[e.id,e.options],Qu,this.options.skipDataValidation)}async multiGetObjects(e){if(e.ids.forEach(n=>{if(!n||!Ru(Lr(n)))throw new Error(`Invalid Sui Object id ${n}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.client.requestWithType("sui_multiGetObjects",[e.ids,e.options],Se(Qu),this.options.skipDataValidation)}async queryTransactionBlocks(e){return await this.client.requestWithType("suix_queryTransactionBlocks",[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"],tI,this.options.skipDataValidation)}async getTransactionBlock(e){if(!O1(e.digest))throw new Error("Invalid Transaction digest");return await this.client.requestWithType("sui_getTransactionBlock",[e.digest,e.options],el,this.options.skipDataValidation)}async multiGetTransactionBlocks(e){if(e.digests.forEach(n=>{if(!O1(n))throw new Error(`Invalid Transaction digest ${n}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.client.requestWithType("sui_multiGetTransactionBlocks",[e.digests,e.options],Se(el),this.options.skipDataValidation)}async executeTransactionBlock(e){return await this.client.requestWithType("sui_executeTransactionBlock",[typeof e.transactionBlock=="string"?e.transactionBlock:Qs(e.transactionBlock),Array.isArray(e.signature)?e.signature:[e.signature],e.options,e.requestType],el,this.options.skipDataValidation)}async getTotalTransactionBlocks(){const e=await this.client.requestWithType("sui_getTotalTransactionBlocks",[],Z(),this.options.skipDataValidation);return BigInt(e)}async getReferenceGasPrice(){const e=await this.client.requestWithType("suix_getReferenceGasPrice",[],Z(),this.options.skipDataValidation);return BigInt(e)}async getStakes(e){if(!e.owner||!Es(un(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getStakes",[e.owner],Se($1),this.options.skipDataValidation)}async getStakesByIds(e){return e.stakedSuiIds.forEach(t=>{if(!t||!Ru(Lr(t)))throw new Error(`Invalid Sui Stake id ${t}`)}),await this.client.requestWithType("suix_getStakesByIds",[e.stakedSuiIds],Se($1),this.options.skipDataValidation)}async getLatestSuiSystemState(){return await this.client.requestWithType("suix_getLatestSuiSystemState",[],BI,this.options.skipDataValidation)}async queryEvents(e){return await this.client.requestWithType("suix_queryEvents",[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"],kO,this.options.skipDataValidation)}async subscribeEvent(e){return this.wsClient.subscribeEvent(e.filter,e.onMessage)}async unsubscribeEvent(e){return this.wsClient.unsubscribeEvent(e.id)}async devInspectTransactionBlock(e){let t;if(Ut.is(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),t=Qs(await e.transactionBlock.build({provider:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")t=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)t=Qs(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.client.requestWithType("sui_devInspectTransactionBlock",[e.sender,t,e.gasPrice,e.epoch],WO,this.options.skipDataValidation)}async dryRunTransactionBlock(e){return await this.client.requestWithType("sui_dryRunTransactionBlock",[typeof e.transactionBlock=="string"?e.transactionBlock:Qs(e.transactionBlock)],nI,this.options.skipDataValidation)}async getDynamicFields(e){if(!e.parentId||!Ru(Lr(e.parentId)))throw new Error("Invalid Sui Object id");return await this.client.requestWithType("suix_getDynamicFields",[e.parentId,e.cursor,e.limit],zI,this.options.skipDataValidation)}async getDynamicFieldObject(e){return await this.client.requestWithType("suix_getDynamicFieldObject",[e.parentId,e.name],Qu,this.options.skipDataValidation)}async getLatestCheckpointSequenceNumber(){const e=await this.client.requestWithType("sui_getLatestCheckpointSequenceNumber",[],Z(),this.options.skipDataValidation);return String(e)}async getCheckpoint(e){return await this.client.requestWithType("sui_getCheckpoint",[e.id],yb,this.options.skipDataValidation)}async getCheckpoints(e){return await this.client.requestWithType("sui_getCheckpoints",[e.cursor,e.limit,e.descendingOrder],$I,this.options.skipDataValidation)}async getCommitteeInfo(e){return await this.client.requestWithType("suix_getCommitteeInfo",[e==null?void 0:e.epoch],kI)}async getNetworkMetrics(){return await this.client.requestWithType("suix_getNetworkMetrics",[],EC,this.options.skipDataValidation)}async getEpochs(e){return await this.client.requestWithType("suix_getEpochs",[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder],BC,this.options.skipDataValidation)}async getCurrentEpoch(){return await this.client.requestWithType("suix_getCurrentEpoch",[],$b,this.options.skipDataValidation)}};Lr("0x5");function OC(e){return e.startsWith("0x")?e:`0x${e}`}function IC(e){const t=new ArrayBuffer(4),n=new DataView(t);for(let i=0;i<e.length;i++)n.setUint8(i,e.charCodeAt(i));return n.getUint32(0,!0)}var CC=0,Ub=1,$C=2;function V1(e,t){return e===t?CC:e<t?Ub:$C}function UC(e,t){let n=0;const r=e.length<=t.length?e.length:t.length,i=V1(e.length,t.length);for(;n<r;){const s=V1(e.charCodeAt(n),t.charCodeAt(n));if(n+=1,s!==0)return s}return i}function Hl(e,t){return UC(e,t)===Ub}function Uc(e,...t){const n=Array.isArray(t[t.length-1])?t.pop():[];let i=[e,...t].filter(Boolean).join("::");return n&&n.length&&(i+=`<${n.join(", ")}>`),i}function Et(e){var o;let t=e.replace(/\s/g,"");const n=t.match(/(<.+>)$/),r=(o=n==null?void 0:n[0])==null?void 0:o.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(r){t=t.slice(0,t.indexOf("<"));const c={...Et(t),type_arguments:[...r]};return c.type_arguments=c.type_arguments.map(u=>An.isSuiCoin(u)?u:Et(u).source_address),c.source_address=Uc(c.full_address,c.type_arguments),c}const i=t.split("::"),s={full_address:t,address:i[2]==="SUI"?"0x2":Lr(i[0]),module:i[1],name:i[2],type_arguments:[],source_address:""};return s.full_address=`${s.address}::${s.module}::${s.name}`,s.source_address=Uc(s.full_address,s.type_arguments),s}var MC="0x2::coin::Coin",qC=/^0x2::coin::Coin<(.+)>$/,NC="0x2::sui::SUI",An=class{static getCoinTypeArg(e){const t=e.type.match(qC);return t?t[1]:null}static isSUI(e){const t=An.getCoinTypeArg(e);return t?An.getCoinSymbol(t)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getBalance(e){return BigInt(e.fields.balance)}static totalBalance(e,t){let n=BigInt(0);return e.forEach(r=>{t===r.coinAddress&&(n+=BigInt(r.balance))}),n}static getID(e){return e.fields.id.id}static getCoinTypeFromArg(e){return`${MC}<${e}>`}static getFaucetCoins(e){const{events:t}=e,n=[];return t==null||t.forEach(r=>{const{type:i}=r;if(Et(i).name==="InitEvent"){const s=r.parsedJson;n.push({transactionModule:r.transactionModule,suplyID:s.suplyID,decimals:s.decimals})}}),n}static getCoinAssets(e,t){const n=[];return t.forEach(r=>{r.coinAddress===e&&n.push(r)}),n}static isSuiCoin(e){return Et(e).full_address===NC}static selectCoinObjectIdGreaterThanOrEqual(e,t,n=[]){return An.selectCoinAssetGreaterThanOrEqual(e,t,n).map(r=>r.coinObjectId)}static selectCoinAssetGreaterThanOrEqual(e,t,n=[]){const r=An.sortByBalance(e.filter(a=>!n.includes(a.coinObjectId))),i=An.calculateTotalBalance(r);if(i<t)return[];if(i===t)return r;let s=BigInt(0);const o=[];for(;s<i;){const a=t-s,c=r.find(d=>d.balance>=a);if(c){o.push(c);break}const u=r.pop();u.balance>0&&(o.push(u),s+=u.balance)}return An.sortByBalance(o)}static sortByBalance(e){return e.sort((t,n)=>t.balance<n.balance?-1:t.balance>n.balance?1:0)}static sortByBalanceDes(e){return e.sort((t,n)=>t.balance>n.balance?-1:t.balance<n.balance?0:1)}static calculateTotalBalance(e){return e.reduce((t,n)=>t+n.balance,BigInt(0))}},qt="0x0000000000000000000000000000000000000000000000000000000000000006",xr="pool_script",Mb="fetcher_script",K1="PoolLiquidityCoin";function Hp(e){const t=An.isSuiCoin(e.coinTypeA),n=An.isSuiCoin(e.coinTypeB);return{isAdjustCoinA:t,isAdjustCoinB:n}}var Wt=class{static async adjustTransactionForGas(e,t,n,r){r.setSender(e.senderAddress);const i=An.selectCoinAssetGreaterThanOrEqual(t,n);if(i.length===0)throw new Error("Insufficient balance");if(An.calculateTotalBalance(t)-An.calculateTotalBalance(i)>e.gasConfig.GasBudgetHigh2*2)return{fixAmount:n};const s=await Wt.calculationTxGas(e.fullClient,r);if(console.log("estimateGas: ",s),An.selectCoinAssetGreaterThanOrEqual(t,BigInt(s),i.map(a=>a.coinObjectId)).length===0){if(n-=BigInt(500),n-=BigInt(s),n<0)throw new Error("gas Insufficient balance");const a=new Ut,c=a.splitCoins(a.gas,[a.pure(n)]);return a.setGasBudget(s+500),{fixAmount:n,fixCoinInput:c,newTx:a}}return{fixAmount:n}}static async buildAddLiquidityTransactionForGas(e,t,n,r){let i=await Wt.buildAddLiquidityTransaction(e,t,n);const{isAdjustCoinA:s}=Hp(n),o=s?n.amount_a:n.amount_b,a=await Wt.adjustTransactionForGas(e,An.getCoinAssets(s?n.coinTypeA:n.coinTypeB,t),BigInt(o),i),{fixAmount:c}=a,{fixCoinInput:u}=a,{newTx:d}=a;if(u!==void 0&&d!==void 0){let l,f;if(s)n.amount_a=Number(c),l=u,f=Wt.buildCoinInputForAmount(d,t,BigInt(n.amount_b),n.coinTypeB);else return n.amount_b=Number(c),l=Wt.buildCoinInputForAmount(d,t,BigInt(n.amount_a),n.coinTypeA),f=u,n=Wt.fixAddLiquidityFixTokenParams(n,r.slippage,r.curSqrtPrice),i=Wt.buildAddLiquidityFixTokenArgs(d,e.sdkOptions,n,l,f),i}return i}static async buildAddLiquidityTransaction(e,t,n){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const r=!("delta_liquidity"in n);let i=new Ut;const s=Wt.buildCoinInputForAmount(i,t,BigInt(r?n.amount_a:n.max_amount_a),n.coinTypeA),o=Wt.buildCoinInputForAmount(i,t,BigInt(r?n.amount_b:n.max_amount_b),n.coinTypeB);return r?(i.setGasBudget(e.gasConfig.GasBudgetHigh2),i=Wt.buildAddLiquidityFixTokenArgs(i,e.sdkOptions,n,s,o)):(i.setGasBudget(e.gasConfig.GasBudgetLow),i=Wt.buildAddLiquidityArgs(i,e.sdkOptions,n,s,o)),i}static fixAddLiquidityFixTokenParams(e,t,n){const r=e.fix_amount_a?e.amount_a:e.amount_b,i=Js.estLiquidityAndcoinAmountFromOneAmounts(Number(e.tick_lower),Number(e.tick_upper),new I(r),e.fix_amount_a,!0,t,n);return e.amount_a=e.fix_amount_a?e.amount_a:i.tokenMaxA.toNumber(),e.amount_b=e.fix_amount_a?i.tokenMaxB.toNumber():e.amount_b,e}static buildAddLiquidityFixTokenArgs(e,t,n,r,i){const s=[n.coinTypeA,n.coinTypeB];let o="add_liquidity_fix_coin_with_all";const{clmm:a}=t,c=[];r&&c.push({coinInput:r,coinAmount:n.amount_a.toString()}),i&&c.push({coinInput:i,coinAmount:n.amount_b.toString()});const u=c.length===2;u?o=n.is_open?"open_position_with_liquidity_with_all":"add_liquidity_fix_coin_with_all":o=n.is_open?r!==void 0?"open_position_with_liquidity_only_a":"open_position_with_liquidity_only_b":r!==void 0?"add_liquidity_fix_coin_only_a":"add_liquidity_fix_coin_only_b";const d=n.is_open?u?[e.pure(a.config.global_config_id),e.pure(n.pool_id),e.pure(Fi(BigInt(n.tick_lower)).toString()),e.pure(Fi(BigInt(n.tick_upper)).toString()),...c.map(l=>l.coinInput),...c.map(l=>e.pure(l.coinAmount)),e.pure(n.fix_amount_a),e.pure(qt)]:[e.pure(a.config.global_config_id),e.pure(n.pool_id),e.pure(Fi(BigInt(n.tick_lower)).toString()),e.pure(Fi(BigInt(n.tick_upper)).toString()),...c.map(l=>l.coinInput),...c.map(l=>e.pure(l.coinAmount)),e.pure(qt)]:u?[e.pure(a.config.global_config_id),e.pure(n.pool_id),e.pure(n.pos_id),...c.map(l=>l.coinInput),...c.map(l=>e.pure(l.coinAmount)),e.pure(n.fix_amount_a),e.pure(qt)]:[e.pure(a.config.global_config_id),e.pure(n.pool_id),e.pure(n.pos_id),...c.map(l=>l.coinInput),...c.map(l=>e.pure(l.coinAmount)),e.pure(qt)];return e.moveCall({target:`${a.clmm_router}::${xr}::${o}`,typeArguments:s,arguments:d}),e}static buildAddLiquidityArgs(e,t,n,r,i){var d,l;const{clmm:s}=t,o=[n.coinTypeA,n.coinTypeB];let a="add_liquidity_with_all",c;const u=[];return r&&u.push(r),i&&u.push(i),u.length===2?a="add_liquidity_with_all":a=r!==void 0?"add_liquidity_only_a":"add_liquidity_only_b",r!==void 0&&i!==void 0?(a="add_liquidity_with_all",c=[e.pure((d=s.config)==null?void 0:d.global_config_id),e.pure(n.pool_id),e.pure(n.pos_id),r,i,e.pure(n.max_amount_a.toString()),e.pure(n.max_amount_b.toString()),e.pure(n.delta_liquidity),e.pure(qt)]):c=[e.pure((l=s.config)==null?void 0:l.global_config_id),e.pure(n.pool_id),e.pure(n.pos_id),r!==void 0?r:i,e.pure(n.max_amount_a.toString()),e.pure(n.max_amount_b.toString()),e.pure(n.delta_liquidity),e.pure(qt)],e.moveCall({target:`${s.clmm_router}::${xr}::${a}`,typeArguments:o,arguments:c}),e}static async buildSwapTransactionForGas(e,t,n,r){let i=Wt.buildSwapTransaction(e,t,n);const s=await Wt.adjustTransactionForGas(e,An.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,n),BigInt(t.by_amount_in?t.amount:t.amount_limit),i),{fixAmount:o,fixCoinInput:a,newTx:c}=s;return a!==void 0&&c!==void 0&&(t.by_amount_in?t.amount=o.toString():t.amount_limit=o.toString(),t=Wt.fixSwapParams(e,t,r),i=Wt.buildSwapTransactionArgs(c,t,e.sdkOptions,a)),i}static buildSwapTransaction(e,t,n){let r=new Ut;r.setGasBudget(e.gasConfig.GasBudgetHigh2);const i=Wt.buildCoinInputForAmount(r,n,BigInt(t.by_amount_in?t.amount:t.amount_limit),t.a2b?t.coinTypeA:t.coinTypeB);return r=Wt.buildSwapTransactionArgs(r,t,e.sdkOptions,i),r}static buildSwapTransactionArgs(e,t,n,r){var l;const{clmm:i}=n,s=Mc.getDefaultSqrtPriceLimit(t.a2b),o=[t.coinTypeA,t.coinTypeB],a=(l=i.config)==null?void 0:l.global_config_id;if(a===void 0)throw Error("clmm.config.global_config_id is undefined");const c=t.swap_partner!==void 0,u=c?t.a2b?"swap_a2b_with_partner":"swap_b2a_with_partner":t.a2b?"swap_a2b":"swap_b2a",d=c?[e.pure(a),e.pure(t.pool_id),e.pure(t.swap_partner),r,e.pure(t.by_amount_in),e.pure(t.amount),e.pure(t.amount_limit),e.pure(s.toString()),e.pure(qt)]:[e.pure(a),e.pure(t.pool_id),r,e.pure(t.by_amount_in),e.pure(t.amount),e.pure(t.amount_limit),e.pure(s.toString()),e.pure(qt)];return e.moveCall({target:`${i.clmm_router}::${xr}::${u}`,typeArguments:o,arguments:d}),e}static fixSwapParams(e,t,n){const r=e.Swap.calculateRates({decimalsA:n.decimalsA,decimalsB:n.decimalsB,a2b:t.a2b,byAmountIn:t.by_amount_in,amount:new I(t.amount),swapTicks:n.swapTicks,currentPool:n.currentPool}),i=n.byAmountIn?r.estimatedAmountOut:r.estimatedAmountIn,s=ey(i,n.slippage,!n.byAmountIn);return t.amount_limit=s.toString(),t}static async syncBuildCoinInputForAmount(e,t,n,r){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const i=await e.Resources.getOwnerCoinAssets(e.senderAddress,r);return Wt.buildCoinInputForAmount(t,i,n,r)}static buildCoinInputForAmount(e,t,n,r,i=!0){const s=An.getCoinAssets(r,t);if(n===BigInt(0))return;const o=An.calculateTotalBalance(s);if(o<n)throw new Error(`The amount(${o}) is Insufficient balance for ${r} , expect ${n} `);if(An.isSuiCoin(r)){const l=e.splitCoins(e.gas,[e.pure(n.toString())]);return i?e.makeMoveVec({objects:[l]}):l}const a=An.selectCoinObjectIdGreaterThanOrEqual(s,n);if(i)return e.makeMoveVec({objects:a.map(l=>e.object(l))});const[c,...u]=a,d=e.object(c);return u.length>0&&e.mergeCoins(d,u.map(l=>e.object(l))),d}static async calculationTxGas(e,t){const{sender:n}=t.blockData;if(n===void 0)throw Error("sender is empty");const r=await e.devInspectTransactionBlock({transactionBlock:t,sender:n}),{gasUsed:i}=r.effects;return Number(i.computationCost)+Number(i.storageCost)-Number(i.storageRebate)}static buildRouterSwapTransaction(e,t,n,r){var c;const i=new Ut;i.setGasBudget(e.gasConfig.GasBudgetHigh3);const{clmm:s}=e.sdkOptions,o=(c=s.config)==null?void 0:c.global_config_id,a=this.buildCoinTypePair(t.coinTypes);for(let u=0;u<t.partitionQuantities.length;u+=1)for(let d=0;d<t.partitionQuantities[u];d+=1){const l={pool_id:t.poolAddresses[u][d],a2b:t.swapDirects[u][d],byAmountIn:n,amount:new I(t.totalAmounts[u]).muln(t.percents[u][d]).divn(100).toString(),amount_limit:ey(new I(t.estAmountInOrOut[u][d]),Q0.fromDecimal(me(t.priceSplitPoint)),!n).toString(),swap_partner:"",coinTypeA:a[u][0],coinTypeB:a[u][1]},f=Wt.buildCoinInputForAmount(i,r,BigInt(n?l.amount:l.amount_limit),l.a2b?l.coinTypeA:l.coinTypeB),p=l.a2b?"swap_a2b":"swap_b2a",_=Mc.getDefaultSqrtPriceLimit(t.swapDirects[u][d]),y=[i.pure(o),i.pure(l.pool_id),f,i.pure(n),i.pure(l.amount),i.pure(l.amount_limit),i.pure(_.toString()),i.pure(qt)],b=[l.coinTypeA,l.coinTypeB];i.moveCall({target:`${s.clmm_router}::${xr}::${p}`,typeArguments:b,arguments:y})}return i}static buildCoinTypePair(e){const t=[];for(let n=1;n<e.length-1;n+=1)t.push([e[0],e[n]]);for(let n=2;n<e.length;n+=1)t.push([e[1],e[n]]);return t}},pf=class{constructor(e,t=0){Le(this,"overdueTime");Le(this,"value");this.overdueTime=t,this.value=e}getCacheData(){return this.value===null?null:this.overdueTime===0?this.value:Date.parse(new Date().toString())>this.overdueTime?null:this.value}};function me(e){return Fe.isDecimal(e)?e:new Fe(e===void 0?0:e)}function Fi(e,t=32){return BigInt.asUintN(t,BigInt(e)).toString()}function mo(e,t=32){return Number(BigInt.asIntN(t,BigInt(e)))}function DC(e,t,n){const r=Et(e).name,i=Et(t).name;return`${r}-${i}[${n}]`}function X1(e){const t=po(e),n=Et(t),r=gi(e),i=[];r.rewarder_manager.fields.rewarders.forEach(o=>{const{emissions_per_second:a}=o.fields,c=kt.fromX64(new I(a)),u=Math.floor(c.toNumber()*60*60*24);i.push({emissions_per_second:a,coinAddress:Et(o.fields.reward_coin.fields.name).source_address,growth_global:o.fields.growth_global,emissionsEveryDay:u})});const s={poolAddress:cu(e),poolType:t,coinTypeA:n.type_arguments[0],coinTypeB:n.type_arguments[1],coinAmountA:r.coin_a,coinAmountB:r.coin_b,current_sqrt_price:r.current_sqrt_price,current_tick_index:mo(BigInt(r.current_tick_index.fields.bits)),fee_growth_global_a:r.fee_growth_global_a,fee_growth_global_b:r.fee_growth_global_b,fee_protocol_coin_a:r.fee_protocol_coin_a,fee_protocol_coin_b:r.fee_protocol_coin_b,fee_rate:r.fee_rate,is_pause:r.is_pause,liquidity:r.liquidity,positions_handle:r.position_manager.fields.positions.fields.id.id,rewarder_infos:i,rewarder_last_updated_time:r.rewarder_manager.fields.last_updated_time,tickSpacing:r.tick_spacing,ticks_handle:r.tick_manager.fields.ticks.fields.id.id,uri:r.url,index:Number(r.index),name:""};return s.name=DC(s.coinTypeA,s.coinTypeB,s.tickSpacing),s}function J0(e){const t=po(e);let n=gi(e),r={creator:"",description:"",image_url:"",link:"",name:"",project_url:""};return"nft"in n?(n=n.nft.fields,r.description=n.description,r.name=n.name,r.link=n.url):r=qb(e),{...r,pos_object_id:cu(e),type:t,coin_type_a:n.coin_type_a.fields.name,coin_type_b:n.coin_type_b.fields.name,liquidity:n.liquidity,tick_lower_index:mo(BigInt(n.tick_lower_index.fields.bits)),tick_upper_index:mo(BigInt(n.tick_upper_index.fields.bits)),index:n.index,pool:n.pool,reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0"}}function LC(e,t){const n=gi(e),r={reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0"};return n.rewards.forEach((s,o)=>{const{amount_owned:a}=s.fields,{growth_inside:c}=s.fields;o===0?(r.reward_amount_owed_0=a,r.reward_growth_inside_0=c):o===1?(r.reward_amount_owed_1=a,r.reward_growth_inside_1=c):o===2&&(r.reward_amount_owed_2=a,r.reward_growth_inside_2=c)}),{...t,liquidity:n.liquidity,...r,fee_growth_inside_a:n.fee_growth_inside_a,fee_owed_a:n.fee_owned_a,fee_growth_inside_b:n.fee_growth_inside_b,fee_owed_b:n.fee_owned_b}}function qb(e){const t=xO(e).data,n={creator:"",description:"",image_url:"",link:"",name:"",project_url:""};return t&&(n.creator=t.creator,n.description=t.description,n.image_url=t.image_url,n.link=t.link,n.name=t.name,n.project_url=t.project_url),n}function n0(e){const n=gi(e).value.fields.value.fields;return{objectId:cu(e),index:mo(BigInt(n.index.fields.bits)),sqrtPrice:new I(n.sqrt_price),liquidityNet:new I(n.liquidity_net.fields.bits),liquidityGross:new I(n.liquidity_gross),feeGrowthOutsideA:new I(n.fee_growth_outside_a),feeGrowthOutsideB:new I(n.fee_growth_outside_b),rewardersGrowthOutside:n.rewards_growth_outside}}function HC(e){return{objectId:"",index:mo(BigInt(e.index.bits)),sqrtPrice:new I(e.sqrt_price),liquidityNet:new I(e.liquidity_net.bits),liquidityGross:new I(e.liquidity_gross),feeGrowthOutsideA:new I(e.fee_growth_outside_a),feeGrowthOutsideB:new I(e.fee_growth_outside_b),rewardersGrowthOutside:e.rewards_growth_outside}}Fe.config({precision:64,rounding:Fe.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var Dr=Fe,gr="router",Y0=1e9,Di=class{static priceRealToFix(e,t,n){const r=me(t-n).toNumber();return Number(me(e).div(me(10).pow(me(r))).toString())}static priceFixToReal(e,t,n){const r=me(t-n).toNumber();return Number(me(e).mul(me(10).pow(me(r))).toString())}static raiseTotalAmount(e,t,n){const r=me(t-n).abs().toNumber();return t>n?Number(me(e.sale_total).mul(e.current_price).div(me(10).pow(me(r))).toString()):Number(me(e.sale_total).mul(e.current_price).mul(me(10).pow(me(r))).toString())}static buildLaunchPadPool(e){const t=po(e),n=Et(t),r=gi(e),i={coin_type_sale:n.type_arguments[0],coin_type_raise:n.type_arguments[1],pool_address:Lr(cu(e)),pool_type:Uc(n.full_address,n.type_arguments),is_settle:r.is_settle,current_price:me(r.initialize_price).div(me(Y0)).toString(),min_price:"0",max_price:"0",sale_coin_amount:r.sale_coin,raise_coin_amount:r.raise_coin,reality_raise_total:r.reality_raise_total,sale_total:r.sale_total,min_purchase:r.min_purchase,max_purchase:r.max_purchase,least_raise_amount:r.least_raise_amount,softcap:r.softcap,hardcap:r.hardcap,liquidity_rate:Number(r.liquidity_rate)/100,activity_start_time:Number(r.duration_manager.fields.start_time),activity_end_time:0,settle_end_time:0,activity_duration:Number(r.duration_manager.fields.activity_duration),settle_duration:Number(r.duration_manager.fields.settle_duration),locked_duration:Number(r.duration_manager.fields.locked_duration),is_cancel:r.is_cancel,white_summary:{white_handle:r.white_list.fields.users.fields.id.id,white_each_safe_cap:r.white_list.fields.each_safe_cap,white_hard_cap_total:r.white_list.fields.hard_cap_total,white_purchase_total:r.white_list.fields.purchase_total,size:Number(r.white_list.fields.users.fields.size)},unused_sale:r.unused_sale,unused_raise:r.unused_raise,tick_spacing:Number(r.tick_spacing),recipient:r.recipient,purchase_summary:{purchase_handle:r.purchase_list.fields.id.id,size:Number(r.purchase_list.fields.size)},pool_status:"Failed"};return Di.updatePoolStatus(i),i}static updatePoolStatus(e){const t=Number(me(Date.now()/1e3).toFixed(0)),n=e.activity_start_time+e.activity_duration,r=n+e.settle_duration;if(e.activity_end_time=n,e.settle_end_time=r,e.is_settle)e.pool_status="Ended";else if(e.is_cancel)e.pool_status="Canceled";else if(t<e.activity_start_time)e.pool_status="Upcoming";else if(t>e.activity_start_time&&t<n)e.pool_status="Live";else if(t>n&&t<r){const i=e.raise_coin_amount;Number(i)<Number(e.least_raise_amount)?e.pool_status="Failed":e.pool_status="Settle"}return e}static updatePoolCurrentPrice(e,t,n){const r=BigInt(e.reality_raise_total);return r<BigInt(e.softcap)?e.current_price=e.min_price:r<=BigInt(e.hardcap)?e.current_price=this.priceFixToReal(me(r.toString()).div(me(e.sale_total)).toNumber(),t,n).toString():r>BigInt(e.hardcap)&&(e.current_price=e.max_price),Number(e.current_price)}static async calculatePoolPrice(e,t){const n=await e.Token.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),r=n[t.coin_type_sale].decimals,i=n[t.coin_type_raise].decimals;t.min_price=this.priceFixToReal(Number(me(t.softcap).div(me(t.sale_total))),r,i).toString(),t.max_price=this.priceFixToReal(Number(me(t.hardcap).div(me(t.sale_total))),r,i).toString(),Di.updatePoolCurrentPrice(t,r,i)}static async getWithdrawRaise(e){return e.pool_status==="Ended"?me(e.raise_coin_amount).sub(me(e.unused_raise)).toString():"0"}static async getWithdrawSale(e){return e.pool_status==="Ended"?e.unused_sale:e.sale_coin_amount}static async getHistoryWithdrawRaise(e,t){if(t.pool_status==="Ended"){if(me(t.unused_raise).equals(me(0))){const r=await e.Launchpad.getSettleEvent(t.pool_address);r&&(t.unused_raise=r.unused_raise)}const n=I.min(new I(t.reality_raise_total),new I(t.hardcap));return me(n.toString()).mul(1-t.liquidity_rate)}return"0"}static async getHistoryWithdrawSale(e,t){if(t.pool_status==="Ended"){const n=await e.Launchpad.getSettleEvent(t.pool_address);return n&&(t.unused_sale=n.unused_sale),t.unused_sale}return"0"}static async getOverrecruitReverseAmount(e,t){const n=await e.Launchpad.getPurchaseMark(e.senderAddress,t.pool_address,!1);if(n){const r=n.total_amount,i=await e.Launchpad.getPurchaseAmount(t.white_summary.white_handle,e.senderAddress),{white_purchase_total:s}=t.white_summary;return me(r).sub(i).div(me(t.reality_raise_total).sub(s)).mul(t.unused_raise).toString()}return"0"}static async getCanPurchaseAmount(e,t){const n=await Di.getOverrecruitReverseAmount(e,t),r=await e.Launchpad.getPurchaseMark(e.senderAddress,t.pool_address,!1);if(r){const i=r.total_amount;me(i).sub(n).div(t.current_price)}return"0"}},Xn=class extends Error{constructor(t,n){super(t);Le(this,"message");Le(this,"errorCode");this.message=t,this.errorCode=n}static isClmmpoolsErrorCode(t,n){return t instanceof Xn&&t.errorCode===n}},we=new I(0),so=new I(1),gf=new I(2);gf.pow(new I(128));var zl=gf.pow(new I(64)).sub(so),zC=gf.pow(new I(128)).sub(so),kt=class{static toX64_BN(e){return e.mul(new I(2).pow(new I(64)))}static toX64_Decimal(e){return e.mul(Dr.pow(2,64))}static toX64(e){return new I(e.mul(Dr.pow(2,64)).floor().toFixed())}static fromX64(e){return new Dr(e.toString()).mul(Dr.pow(2,-64))}static fromX64_Decimal(e){return e.mul(Dr.pow(2,-64))}static fromX64_BN(e){return e.div(new I(2).pow(new I(64)))}static shiftRightRoundUp(e){let t=e.shrn(64);return e.mod(zl).gt(we)&&(t=t.add(so)),t}static divRoundUp(e,t){return e.mod(t).eq(we)?e.div(t):e.div(t).add(new I(1))}static subUnderflowU128(e,t){return e.lt(t)?e.sub(t).add(zC):e.sub(t)}static checkUnsignedSub(e,t){const n=e.sub(t);if(n.isNeg())throw new Xn("Unsigned integer sub overflow","UnsignedIntegerOverflow");return n}static checkMul(e,t,n){const r=e.mul(t);if(this.isOverflow(r,n))throw new Xn("Multiplication overflow","MultiplicationOverflow");return r}static checkMulDivFloor(e,t,n,r){if(n.eq(we))throw new Xn("Devide by zero","DivideByZero");const i=e.mul(t).div(n);if(this.isOverflow(i,r))throw new Xn("Multiplication div overflow","MulDivOverflow");return i}static checkMulDivCeil(e,t,n,r){if(n.eq(we))throw new Xn("Devide by zero","DivideByZero");const i=e.mul(t).add(n.sub(so)).div(n);if(this.isOverflow(i,r))throw new Xn("Multiplication div overflow","MulDivOverflow");return i}static checkMulDivRound(e,t,n,r){if(n.eq(we))throw new Xn("Devide by zero","DivideByZero");const i=e.mul(t.add(n.shrn(1))).div(n);if(this.isOverflow(i,r))throw new Xn("Multiplication div overflow","MulDivOverflow");return i}static checkMulShiftRight(e,t,n,r){const i=e.mul(t).div(new I(2).pow(new I(n)));if(this.isOverflow(i,r))throw new Xn("Multiplication shift right overflow","MulShiftRightOverflow");return i}static checkMulShiftRight64RoundUpIf(e,t,n,r){const i=e.mul(t),o=r&&i.and(zl).gt(we)?i.shrn(64).add(so):i.shrn(64);if(this.isOverflow(o,n))throw new Xn("Multiplication shift right overflow","MulShiftRightOverflow");return o}static checkMulShiftLeft(e,t,n,r){const i=e.mul(t).shln(n);if(this.isOverflow(i,r))throw new Xn("Multiplication shift left overflow","MulShiftLeftOverflow");return i}static checkDivRoundUpIf(e,t,n){if(t.eq(we))throw new Xn("Devide by zero","DivideByZero");return n?this.divRoundUp(e,t):e.div(t)}static isOverflow(e,t){return e.gte(gf.pow(new I(t)))}},Z1=443636,J1=-443636,yf="79226673515401279992447579055",mf="4295048016",Zo=new I(1e6),r0=class{static getMinIndex(e){return J1+Math.abs(J1)%e}static getMaxIndex(e){return Z1-Z1%e}};function i0(e,t){const n=Math.abs(e)%t;return e>0?n>t/2?e+t-n:e-n:n>t/2?e-t+n:e+n}function jC(e,t,n,r,i,s){const o=e.rewarder_infos,a=[];for(let c=0;c<o.length;c+=1){let u=s[c];t!==null&&(e.current_tick_index<r?u=s[c].sub(new I(t.rewardersGrowthOutside[c])):u=t.rewardersGrowthOutside[c]);let d=new I(0);n!==null&&(e.current_tick_index>=i?d=s[c].sub(new I(n.rewardersGrowthOutside[c])):d=n.rewardersGrowthOutside[c]);const l=kt.subUnderflowU128(kt.subUnderflowU128(new I(s[c]),new I(u)),new I(d));a.push(l)}return a}var Do="router",FC="router",s0=24*3600,Cu=1e3,bs=1e11,Jo=class{static buildVeNFTDividendInfo(e){const t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(n=>{const r=[];n.fields.value.fields.contents.forEach(i=>{r.push({coin_type:Et(i.fields.key.fields.name).source_address,amount:i.fields.value})}),t.rewards.push({period:Number(n.fields.key),rewards:r})}),t}static buildDividendManager(e){const t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),settled_phase:Number(e.settled_phase),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:!0};return e.bonus_types.forEach(n=>{t.bonus_types.push(Et(n.fields.name).source_address)}),t}static buildLockWhale(e){const t=e.fields,n={id:t.id.id,type:Et(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),whale_amount:t.balance,xwhale_amount:"0",lock_day:0};return n.lock_day=(n.locked_until_time-n.locked_start_time)/s0,n}static getAvailableXWhale(e,t){let n=me(0);return t.forEach(r=>{n=n.add(r.xwhale_amount)}),me(e.xwhale_balance).sub(n).toString()}static getWaitUnLockWhales(e){return e.filter(t=>!Jo.isLocked(t))}static getLockingWhales(e){return e.filter(t=>Jo.isLocked(t))}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static getNextStartTime(e){const t=Date.parse(new Date().toString())/1e3,n=me(t).sub(e.start_time).mul(me(e.interval_day).div(s0)).toFixed(0,Fe.ROUND_UP);return me(e.start_time).add(me(n).add(1).mul(s0))}},Nb=class{constructor(e=1){Le(this,"price",1);Le(this,"GasBudgetLow",6e7);Le(this,"GasBudgetMiddle",75e6);Le(this,"GasBudgetMiddle2",9e7);Le(this,"GasBudgetHigh",105e6);Le(this,"GasBudgetHigh2",24e7);Le(this,"GasBudgetHigh3",8e8);this.price=e,this.GasBudgetLow=Number(me(this.GasBudgetLow).mul(this.price).toFixed(0)),this.GasBudgetMiddle=Number(me(this.GasBudgetMiddle).mul(this.price).toFixed(0)),this.GasBudgetMiddle2=Number(me(this.GasBudgetMiddle2).mul(this.price).toFixed(0)),this.GasBudgetHigh=Number(me(this.GasBudgetHigh).mul(this.price).toFixed(0)),this.GasBudgetHigh2=Number(me(this.GasBudgetHigh2).mul(this.price).toFixed(0))}},GC=14,WC="59543866431248",VC="184467440737095516",KC="15793534762490258745",XC=443636;function ZC(e,t,n){const r=e.toTwos(n).shln(t);return r.imaskn(n+1),r.fromTwos(n)}function Pt(e,t,n){const r=e.toTwos(n).shrn(t);return r.imaskn(n-t+1),r.fromTwos(n-t)}function JC(e){let t;return e&1?t=new I("79232123823359799118286999567"):t=new I("79228162514264337593543950336"),e&2&&(t=Pt(t.mul(new I("79236085330515764027303304731")),96,256)),e&4&&(t=Pt(t.mul(new I("79244008939048815603706035061")),96,256)),e&8&&(t=Pt(t.mul(new I("79259858533276714757314932305")),96,256)),e&16&&(t=Pt(t.mul(new I("79291567232598584799939703904")),96,256)),e&32&&(t=Pt(t.mul(new I("79355022692464371645785046466")),96,256)),e&64&&(t=Pt(t.mul(new I("79482085999252804386437311141")),96,256)),e&128&&(t=Pt(t.mul(new I("79736823300114093921829183326")),96,256)),e&256&&(t=Pt(t.mul(new I("80248749790819932309965073892")),96,256)),e&512&&(t=Pt(t.mul(new I("81282483887344747381513967011")),96,256)),e&1024&&(t=Pt(t.mul(new I("83390072131320151908154831281")),96,256)),e&2048&&(t=Pt(t.mul(new I("87770609709833776024991924138")),96,256)),e&4096&&(t=Pt(t.mul(new I("97234110755111693312479820773")),96,256)),e&8192&&(t=Pt(t.mul(new I("119332217159966728226237229890")),96,256)),e&16384&&(t=Pt(t.mul(new I("179736315981702064433883588727")),96,256)),e&32768&&(t=Pt(t.mul(new I("407748233172238350107850275304")),96,256)),e&65536&&(t=Pt(t.mul(new I("2098478828474011932436660412517")),96,256)),e&131072&&(t=Pt(t.mul(new I("55581415166113811149459800483533")),96,256)),e&262144&&(t=Pt(t.mul(new I("38992368544603139932233054999993551")),96,256)),Pt(t,32,256)}function YC(e){const t=Math.abs(e);let n;return t&1?n=new I("18445821805675392311"):n=new I("18446744073709551616"),t&2&&(n=Pt(n.mul(new I("18444899583751176498")),64,256)),t&4&&(n=Pt(n.mul(new I("18443055278223354162")),64,256)),t&8&&(n=Pt(n.mul(new I("18439367220385604838")),64,256)),t&16&&(n=Pt(n.mul(new I("18431993317065449817")),64,256)),t&32&&(n=Pt(n.mul(new I("18417254355718160513")),64,256)),t&64&&(n=Pt(n.mul(new I("18387811781193591352")),64,256)),t&128&&(n=Pt(n.mul(new I("18329067761203520168")),64,256)),t&256&&(n=Pt(n.mul(new I("18212142134806087854")),64,256)),t&512&&(n=Pt(n.mul(new I("17980523815641551639")),64,256)),t&1024&&(n=Pt(n.mul(new I("17526086738831147013")),64,256)),t&2048&&(n=Pt(n.mul(new I("16651378430235024244")),64,256)),t&4096&&(n=Pt(n.mul(new I("15030750278693429944")),64,256)),t&8192&&(n=Pt(n.mul(new I("12247334978882834399")),64,256)),t&16384&&(n=Pt(n.mul(new I("8131365268884726200")),64,256)),t&32768&&(n=Pt(n.mul(new I("3584323654723342297")),64,256)),t&65536&&(n=Pt(n.mul(new I("696457651847595233")),64,256)),t&131072&&(n=Pt(n.mul(new I("26294789957452057")),64,256)),t&262144&&(n=Pt(n.mul(new I("37481735321082")),64,256)),n}var $t=class{static priceToSqrtPriceX64(e,t,n){return kt.toX64(e.mul(Dr.pow(10,n-t)).sqrt())}static sqrtPriceX64ToPrice(e,t,n){return kt.fromX64(e).pow(2).mul(Dr.pow(10,t-n))}static tickIndexToSqrtPriceX64(e){return e>0?new I(JC(e)):new I(YC(e))}static sqrtPriceX64ToTickIndex(e){if(e.gt(new I(yf))||e.lt(new I(mf)))throw new Error("Provided sqrtPrice is not within the supported sqrtPrice range.");const t=e.bitLength()-1,n=new I(t-64),r=ZC(n,32,128);let i=new I("8000000000000000","hex"),s=0,o=new I(0),a=t>=64?e.shrn(t-63):e.shln(63-t);for(;i.gt(new I(0))&&s<GC;){a=a.mul(a);const _=a.shrn(127);a=a.shrn(63+_.toNumber()),o=o.add(i.mul(_)),i=i.shrn(1),s+=1}const c=o.shrn(32),d=r.add(c).mul(new I(WC)),l=Pt(d.sub(new I(VC)),64,128).toNumber(),f=Pt(d.add(new I(KC)),64,128).toNumber();return l===f?l:$t.tickIndexToSqrtPriceX64(f).lte(e)?f:l}static tickIndexToPrice(e,t,n){return $t.sqrtPriceX64ToPrice($t.tickIndexToSqrtPriceX64(e),t,n)}static priceToTickIndex(e,t,n){return $t.sqrtPriceX64ToTickIndex($t.priceToSqrtPriceX64(e,t,n))}static priceToInitializableTickIndex(e,t,n,r){return $t.getInitializableTickIndex($t.priceToTickIndex(e,t,n),r)}static getInitializableTickIndex(e,t){return e-e%t}static getNextInitializableTickIndex(e,t){return $t.getInitializableTickIndex(e,t)+t}static getPrevInitializableTickIndex(e,t){return $t.getInitializableTickIndex(e,t)-t}};function Db(e){const t=[];for(const n of e){const r={objectId:n.objectId,index:Number(mo(BigInt(n.index)).toString()),sqrtPrice:n.sqrtPrice,liquidityNet:new I(mo(BigInt(n.liquidityNet.toString())).toString()),liquidityGross:n.liquidityGross,feeGrowthOutsideA:n.feeGrowthOutsideA,feeGrowthOutsideB:n.feeGrowthOutsideB,rewardersGrowthOutside:[new I(n.rewardersGrowthOutside[0]),new I(n.rewardersGrowthOutside[1]),new I(n.rewardersGrowthOutside[2])]};t.push(r)}return t}function QC(e){return me(e).add(me(XC))}new I(365);new I(24);new I(3600);new I(.5);function e$(e,t,n,r){const i=Math.max(e,n),o=Math.min(t,r)-i,a=t-e,c=r-n,u=new Fe(a.toString()),d=new Fe(c.toString()),l=new Fe(o.toString());let f=new Fe("0");return o<0?f=new Fe("0"):a===o?f=d.div(l):c===o?f=l.div(u):f=l.mul(l).div(d).div(u),f}var Mc=class{static getDefaultSqrtPriceLimit(e){return new I(e?mf:yf)}static getDefaultOtherAmountThreshold(e){return e?we:zl}};function Lb(e,t,n,r){if(n.eq(we))return e;const i=kt.checkMulShiftLeft(e,t,64,256),s=t.shln(64),o=kt.checkMul(e,n,256);if(!r&&s.lte(o))throw new Xn("getNextSqrtPriceAUp - Unable to divide liquidityShl64 by product","DivideByZero");const a=r?kt.checkDivRoundUpIf(i,s.add(o),!0):kt.checkDivRoundUpIf(i,s.sub(o),!0);if(a.lt(new I(mf)))throw new Xn("getNextSqrtPriceAUp - Next sqrt price less than min sqrt price","CoinAmountMinSubceeded ");if(a.gt(new I(yf)))throw new Xn("getNextSqrtPriceAUp - Next sqrt price greater than max sqrt price","CoinAmountMaxExceeded");return a}function Hb(e,t,n,r){const i=kt.checkDivRoundUpIf(n.shln(64),t,!r),s=r?e.add(i):e.sub(i);if(s.lt(new I(mf))||s.gt(new I(yf)))throw new Xn("getNextSqrtPriceAUp - Next sqrt price out of bounds","SqrtPriceOutOfBounds");return s}function t$(e,t,n,r){return r?Lb(e,t,n,!0):Hb(e,t,n,!0)}function n$(e,t,n,r){return r?Hb(e,t,n,!1):Lb(e,t,n,!1)}function Y1(e,t,n,r){const i=e.gt(t)?e.sub(t):t.sub(e);if(n.lte(we)||i.eq(we))return we;let s;if(r){const o=new I(n).mul(new I(i)).shln(64),a=t.mul(e),c=o.div(a);s=o.mod(a).eq(we)?c:c.add(so)}else{const o=new I(n).mul(new I(i));s=o.and(zl).gt(we)?o.shrn(64).add(so):o.shrn(64)}return s}function Q1(e,t,n,r){const i=e.gt(t)?e.sub(t):t.sub(e);if(n.lte(we)||i.eq(we))return we;let s;if(r)s=n.mul(i).shrn(64);else{const o=n.mul(i).shln(64),a=t.mul(e);s=o.div(a)}return s}function zb(e,t,n,r,i,s){if(n===we)return{amountIn:we,amountOut:we,nextSqrtPrice:t,feeAmount:we};const o=e.gte(t);let a,c,u,d;if(s){const l=kt.checkMulDivFloor(r,kt.checkUnsignedSub(Zo,i),Zo,64),f=Y1(e,t,n,o);f.gt(l)?(a=l,d=kt.checkUnsignedSub(r,l),u=t$(e,n,l,o)):(a=f,d=kt.checkMulDivCeil(a,i,Zo.sub(i),64),u=t),c=Q1(e,u,n,o)}else{const l=Q1(e,t,n,o);l.gt(r)?(c=r,u=n$(e,n,r,o)):(c=l,u=t),a=Y1(e,u,n,o),d=kt.checkMulDivCeil(a,i,Zo.sub(i),64)}return{amountIn:a,amountOut:c,nextSqrtPrice:u,feeAmount:d}}function r$(e,t,n,r,i){let s=n,o=r.liquidity,{currentSqrtPrice:a}=r;const c={amountIn:we,amountOut:we,feeAmount:we,refAmount:we,nextSqrtPrice:we,crossTickNum:0};let u,d;const l=Mc.getDefaultSqrtPriceLimit(e);for(const f of i){if(e&&r.currentTickIndex<f.index||!e&&r.currentTickIndex>f.index||f===null)continue;e&&l.gt(f.sqrtPrice)||!e&&l.lt(f.sqrtPrice)?u=l:u=f.sqrtPrice;const p=zb(a,u,o,s,r.feeRate,t);if(p.amountIn.eq(we)||(s=t?s.sub(p.amountIn.add(p.feeAmount)):s.sub(p.amountOut)),c.amountIn=c.amountIn.add(p.amountIn),c.amountOut=c.amountOut.add(p.amountOut),c.feeAmount=c.feeAmount.add(p.feeAmount),p.nextSqrtPrice.eq(f.sqrtPrice)?(d=e?f.liquidityNet.mul(new I(-1)):f.liquidityNet,o=d.gt(we)?o.add(d):o.sub(d.abs()),a=f.sqrtPrice):a=p.nextSqrtPrice,c.crossTickNum+=1,s.eq(we))break}return c.amountIn=c.amountIn.add(c.feeAmount),c.nextSqrtPrice=a,c}function dc(e,t,n){const r=I.min(e,t),i=I.max(e,t),s=kt.fromX64_BN(n.mul(i).mul(r)),o=i.sub(r);return s.div(o)}function fc(e,t,n){const r=I.min(e,t),s=I.max(e,t).sub(r);return n.shln(64).div(s)}var Js=class{static updateFeeRate(e,t,n,r,i){const s=kt.checkMulDivCeil(t,new I(r),Zo,64),o=n===0?we:kt.checkMulDivFloor(t,new I(n),Zo,64),a=t.mul(s).mul(o);if(i?e.feeProtocolCoinA=e.feeProtocolCoinA.add(s):e.feeProtocolCoinB=e.feeProtocolCoinB.add(s),a.eq(we)||e.liquidity.eq(we))return{refFee:o,clmm:e};const c=a.shln(64).div(e.liquidity);return i?e.feeGrowthGlobalA=e.feeGrowthGlobalA.add(c):e.feeGrowthGlobalB=e.feeGrowthGlobalB.add(c),{refFee:o,clmm:e}}static getCoinAmountFromLiquidity(e,t,n,r,i){const s=new Dr(e.toString()),o=new Dr(t.toString()),a=new Dr(n.toString()),c=new Dr(r.toString());let u,d;return t.lt(n)?(u=kt.toX64_Decimal(s).mul(c.sub(a)).div(a.mul(c)),d=new Dr(0)):t.lt(r)?(u=kt.toX64_Decimal(s).mul(c.sub(o)).div(o.mul(c)),d=kt.fromX64_Decimal(s.mul(o.sub(a)))):(u=new Dr(0),d=kt.fromX64_Decimal(s.mul(c.sub(a)))),i?{coinA:new I(u.ceil().toString()),coinB:new I(d.ceil().toString())}:{coinA:new I(u.floor().toString()),coinB:new I(d.floor().toString())}}static estimateLiquidityFromcoinAmounts(e,t,n,r){if(t>n)throw new Error("lower tick cannot be greater than lower tick");const i=$t.sqrtPriceX64ToTickIndex(e),s=$t.tickIndexToSqrtPriceX64(t),o=$t.tickIndexToSqrtPriceX64(n);if(i<t)return dc(s,o,r.coinA);if(i>=n)return fc(o,s,r.coinB);const a=dc(e,o,r.coinA),c=fc(e,s,r.coinB);return I.min(a,c)}static estLiquidityAndcoinAmountFromOneAmounts(e,t,n,r,i,s,o){const a=$t.sqrtPriceX64ToTickIndex(o),c=$t.tickIndexToSqrtPriceX64(e),u=$t.tickIndexToSqrtPriceX64(t);let d;if(a<=e){if(!r)throw new Error("lower tick cannot calculate liquidity by coinB");d=dc(c,u,n)}else if(a>=t){if(r)throw new Error("upper tick cannot calculate liquidity by coinA");d=fc(u,c,n)}else r?d=dc(o,u,n):d=fc(o,c,n);const l=Js.getCoinAmountFromLiquidity(d,o,c,u,i),f=l.coinA.mul(new I(1+s)),p=l.coinB.mul(new I(1+s));return{tokenMaxA:f,tokenMaxB:p,liquidityAmount:d}}};function i$(e,t,n){let r=new I(0),i=new I(0);e.current_tick_index<t.index?(r=kt.subUnderflowU128(new I(e.fee_growth_global_a),new I(t.feeGrowthOutsideA)),i=kt.subUnderflowU128(new I(e.fee_growth_global_b),new I(t.feeGrowthOutsideB))):(r=new I(t.feeGrowthOutsideA),i=new I(t.feeGrowthOutsideB));let s=new I(0),o=new I(0);e.current_tick_index<n.index?(s=new I(n.feeGrowthOutsideA),o=new I(n.feeGrowthOutsideB)):(s=kt.subUnderflowU128(new I(e.fee_growth_global_a),new I(n.feeGrowthOutsideA)),o=kt.subUnderflowU128(new I(e.fee_growth_global_b),new I(n.feeGrowthOutsideB)));const a=kt.subUnderflowU128(kt.subUnderflowU128(new I(e.fee_growth_global_a),r),s),c=kt.subUnderflowU128(kt.subUnderflowU128(new I(e.fee_growth_global_b),i),o);return{fee_growth_inside_a:a,fee_growth_inside_b:c}}function s$(e,t,n){const r=kt.subUnderflowU128(t,new I(e.fee_growth_inside_a)),i=new I(e.liquidity).mul(r).shrn(64),s=kt.subUnderflowU128(n,new I(e.fee_growth_inside_b)),o=new I(e.liquidity).mul(s).shrn(64),a=new I(e.fee_owed_a).add(i),c=new I(e.fee_owed_b).add(o);return{feeOwedA:a,feeOwedB:c}}function o$(e){const{fee_growth_inside_a:t,fee_growth_inside_b:n}=i$(e.clmmpool,e.tickLower,e.tickUpper);return s$(e.position,t,n)}var Q0=class{constructor(e,t){Le(this,"numerator");Le(this,"denominator");this.toString=()=>`${this.numerator.toString()}/${this.denominator.toString()}`,this.numerator=e,this.denominator=t}static fromDecimal(e){return Q0.fromFraction(e.toDecimalPlaces(1).mul(10).toNumber(),1e3)}static fromFraction(e,t){const n=typeof e=="number"?new I(e.toString()):e,r=typeof t=="number"?new I(t.toString()):t;return new Q0(n,r)}};function ey(e,{numerator:t,denominator:n},r){return r?e.mul(n.add(t)).div(n):e.mul(n).div(n.add(t))}function jb(e){return{coinA:e.coinTypeA,coinB:e.coinTypeB,currentSqrtPrice:new I(e.current_sqrt_price),currentTickIndex:e.current_tick_index,feeGrowthGlobalA:new I(e.fee_growth_global_a),feeGrowthGlobalB:new I(e.fee_growth_global_b),feeProtocolCoinA:new I(e.fee_protocol_coin_a),feeProtocolCoinB:new I(e.fee_protocol_coin_b),feeRate:new I(e.fee_rate),liquidity:new I(e.liquidity),tickIndexes:[],tickSpacing:Number(e.tickSpacing),ticks:[],collection_name:""}}function a$(e){let t;switch(e){case 5:t=5;break;case 10:t=10;break;case 20:t=20;break;case 25:t=25;break;case 50:t=50;break;case 100:t=100;break;default:t=1}const n=100/t+1,r=new Array(n);for(let i=0;i<n;i+=1)r[i]=i*t;return r}function rl(e,t){const n=a$(t),r=new Array(n.length);for(let i=0;i<n.length;i+=1)r[i]=e.muln(n[i]).divn(100);return r}function c$(e,t,n,r){for(let i=t;i<e;i+=1)n.amountInArray[i]=n.amountInArray[i].add(r.amountIn),n.amountOutArray[i]=n.amountOutArray[i].add(r.amountOut),n.feeAmountArray[i]=n.feeAmountArray[i].add(r.feeAmount);return n}function u$(e,t,n,r,i){let s=new I(r.liquidity),{currentSqrtPrice:o}=r,a={amountInArray:[],amountOutArray:[],feeAmountArray:[],nextSqrtPriceArray:[],isExceed:[]};n.forEach(()=>{a.amountInArray.push(we),a.amountOutArray.push(we),a.feeAmountArray.push(we),a.nextSqrtPriceArray.push(we)});let c,u;const d=Mc.getDefaultSqrtPriceLimit(e),l=n.length;let f=n[1],p=1,_;e?_=i.sort((y,b)=>b.index-y.index):_=i.sort((y,b)=>y.index-b.index);for(const y of _){if(e){if(r.currentTickIndex<y.index)continue}else if(r.currentTickIndex>y.index)continue;if(y===null)continue;e&&d.gt(y.sqrtPrice)||!e&&d.lt(y.sqrtPrice)?c=d:c=y.sqrtPrice;let b={amountIn:we,amountOut:we,nextSqrtPrice:we,feeAmount:we};const B=o,E=s;let x=f,S=p;for(let T=p;T<l;T+=1){const R=zb(o,c,s,f,new I(r.feeRate),t);if(b=R,R.amountIn.eq(we)||(f=t?f.sub(R.amountIn.add(R.feeAmount)):f.sub(R.amountOut)),f.eq(we))a.amountInArray[T]=a.amountInArray[T].add(R.amountIn),a.amountOutArray[T]=a.amountOutArray[T].add(R.amountOut),a.feeAmountArray[T]=a.feeAmountArray[T].add(R.feeAmount),R.nextSqrtPrice.eq(y.sqrtPrice)?(u=e?y.liquidityNet.mul(new I(-1)):y.liquidityNet,s=u.gt(we)?s.add(u):s.sub(u.abs()),o=y.sqrtPrice):o=R.nextSqrtPrice,a.amountInArray[T]=a.amountInArray[T].add(a.feeAmountArray[T]),a.nextSqrtPriceArray[T]=o,s=E,o=B,T!==l-1&&(f=x.add(n[T+1].sub(n[S]))),p+=1;else{a=c$(l,T,a,R),x=f,S=p;break}}if(p===l)break;b.nextSqrtPrice.eq(y.sqrtPrice)?(u=e?y.liquidityNet.mul(new I(-1)):y.liquidityNet,s=u.gt(we)?s.add(u):s.sub(u.abs()),o=y.sqrtPrice):o=b.nextSqrtPrice}return t?n.forEach((y,b)=>{a.isExceed.push(a.amountInArray[b].lt(y))}):n.forEach((y,b)=>{a.isExceed.push(a.amountOutArray[b].lt(y))}),a}var l$=class{constructor(e,t,n,r,i,s){Le(this,"minSplitUnit");Le(this,"amountArray");Le(this,"byAmountIn");Le(this,"a2b");Le(this,"clmmpool");Le(this,"ticks");Le(this,"splitSwapResult");this.minSplitUnit=t,this.a2b=r,this.byAmountIn=i,this.clmmpool=n,this.ticks=s,this.amountArray=[],this.createSplitSwapParams=this.createSplitSwapParams.bind(this),this.createSplitSwapParams(e,t),this.splitSwapResult={amountInArray:[],amountOutArray:[],feeAmountArray:[],nextSqrtPriceArray:[],isExceed:[]},this.computeSwap=this.computeSwap.bind(this)}createSplitSwapParams(e,t){const n=rl(e,t);this.amountArray=n}computeSwap(){const e=jb(this.clmmpool);return this.splitSwapResult=u$(this.a2b,this.byAmountIn,this.amountArray,e,this.ticks),this.splitSwapResult}},d$=5*60*1e3,zs=24*60*60*1e3;function ty(e){return Date.parse(new Date().toString())+e}var f$=class{constructor(e){Le(this,"_sdk");Le(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=[],t=0,n=100,r=!1){const{ido_display:i}=this._sdk.sdkOptions.launchpad;if(i===void 0)throw Error("sdk.sdkOptions.launchpad is undefined");const s=`${i}_getInitPoolEvent`,o=this._cache[s],a=[],c=[];if(o!==void 0&&o.getCacheData()&&!r&&a.push(...o.value),a.length===0)try{(await this._sdk.fullClient.queryEvents({query:{MoveEventType:`${i}::factory::CreatePoolEvent`}})).data.forEach(l=>{const f=l.parsedJson;f&&a.push({pool_address:f.pool_id,coin_type_sale:Et(f.sale_coin).full_address,coin_type_raise:Et(f.raise_coin).full_address})}),this.updateCache(s,a,zs)}catch(d){console.log("getPoolImmutables",d)}const u=e.length>0;for(let d=0;d<a.length;d+=1){const l=a[d];if(!(u&&!e.includes(l.pool_address))){if(!u){const f=d;if(f<t||f>=t+n)continue}c.push(l)}}return c}async getPools(e=[],t=0,n=100){const r=[];let i=[];e.length>0?i=[...e]:(await this.getPoolImmutables([],t,n,!1)).forEach(a=>{i.push(a.pool_address)});const s=await this.sdk.fullClient.multiGetObjects({ids:i,options:{showType:!0,showContent:!0}});for(const o of s){const a=Di.buildLaunchPadPool(o);await Di.calculatePoolPrice(this._sdk,a),r.push(a);const c=`${a.pool_address}_getPoolObject`;this.updateCache(c,a,zs)}return r}async getPool(e,t=!0){const n=`${e}_getPoolObject`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!t){const o=r.value;return Di.updatePoolStatus(o),o}const i=await this._sdk.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=Di.buildLaunchPadPool(i);return await Di.calculatePoolPrice(this._sdk,s),this.updateCache(n,s),s}async getInitFactoryEvent(e=!1){const t=this._sdk.sdkOptions.launchpad.ido_display,n=`${t}_getInitEvent`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!e)return r.value;const i=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=Op(i),o=(await this._sdk.fullClient.queryEvents({query:{Transaction:s}})).data,a={pools_id:"",admin_cap_id:"",config_cap_id:""};return o.length>0&&(o.forEach(c=>{const u=c.parsedJson;if(u)switch(Et(c.type).full_address){case`${t}::config::InitConfigEvent`:a.admin_cap_id=u.admin_cap_id,a.config_cap_id=u.config_cap_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=u.pools_id;break}}),this.updateCache(n,a,zs)),a}async getInitLockEvent(e=!1){const{lock_display:t}=this._sdk.sdkOptions.launchpad,n=`${t}_getInitLockEvent`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!e)return r.value;const i={lock_manager_id:""};try{(await this._sdk.fullClient.queryEvents({query:{MoveEventType:`${t}::lock::InitManagerEvent`}})).data.forEach(o=>{const a=o.parsedJson;a&&(i.lock_manager_id=a.lock_manager_id)}),this.updateCache(n,i,zs)}catch(s){console.log("getInitLockEvent",s)}return i}async getLockNFT(e,t=!1){const n=`${e}_getLockNFT`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!t)return r.value;const i=await this._sdk.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0}});if(!i.error)return J0(i)}async getLockNFTEvent(e,t,n,r=!1){const{sdkOptions:i}=this._sdk,s=`${e}_getInitLockEvent`,o=this._cache[s];if(o!==void 0&&o.getCacheData()&&!r)return o.value;try{const a=(await this._sdk.fullClient.queryEvents({query:{MoveEventType:`${i.launchpad.lock_display}::lock::LockNFTEvent`}})).data,c=Et(e);for(const u of a){const d=u.parsedJson;if(d){const l={locked_time:Number(d.locked_time),end_lock_time:Number(d.end_lock_time),nft_type:d.nft_type_name.name,lock_nft_id:d.lock_nft_id,recipient:d.recipient},f=d.description.split(","),p=IC(f[2]),_=Et(f[0]).full_address,y=Et(f[1]).full_address;if(n===l.recipient&&`${i.clmm.clmm_display}`===Et(l.nft_type).address&&t===p&&(c.type_arguments[0]===_&&c.type_arguments[1]===y||c.type_arguments[0]===y&&c.type_arguments[1]===_))return this.updateCache(s,l,zs),l}}}catch(a){console.log("getLockNFTEvent:",a)}}async creatPoolTransactionPayload(e){var l;const{launchpad:t,clmm:n}=this.sdk.sdkOptions,r=t.config;if(this.assertLuanchpadConfig(),this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const i=e.clmm_args!==void 0,s=Di.priceRealToFix(Number(e.initialize_price),e.sale_decimals,e.raise_decimals),o=new Ut,a=me(e.sale_total).add(me(e.sale_total).mul(me(e.liquidity_rate))).toNumber(),c=await Wt.syncBuildCoinInputForAmount(this._sdk,o,BigInt(a),e.coin_type_sale);let u=[];if(i){const f=n.config;let p;Hl(un(e.coin_type_sale),un(e.coin_type_raise))?p=$t.priceToSqrtPriceX64(me(1).div(e.initialize_price),e.raise_decimals,e.sale_decimals).toString():p=$t.priceToSqrtPriceX64(me(e.initialize_price),e.sale_decimals,e.raise_decimals).toString(),o.setGasBudget(this._sdk.gasConfig.GasBudgetHigh2),u=[o.pure(r.admin_cap_id),o.pure(r.config_cap_id),o.pure(r.pools_id),o.pure(un(e.recipient)),o.pure((s*Y0).toString()),c,o.pure(e.sale_total.toString()),o.pure(e.min_purchase.toString()),o.pure(e.max_purchase.toString()),o.pure(e.least_raise_amount.toString()),o.pure(e.hardcap.toString()),o.pure((e.liquidity_rate*100).toString()),o.pure(e.start_time.toString()),o.pure(e.activity_duration.toString()),o.pure(e.settle_duration.toString()),o.pure(e.locked_duration.toString()),o.pure(f.global_config_id),o.pure(e.tick_spacing.toString()),o.pure(p),o.pure(f.pools_id),o.pure((l=e.clmm_args)==null?void 0:l.url),o.pure(qt)]}else o.setGasBudget(this._sdk.gasConfig.GasBudgetHigh2),u=[o.pure(r.admin_cap_id),o.pure(r.config_cap_id),o.pure(r.pools_id),o.pure(un(e.recipient)),o.pure((s*Y0).toString()),c,o.pure(e.sale_total.toString()),o.pure(e.min_purchase.toString()),o.pure(e.max_purchase.toString()),o.pure(e.least_raise_amount.toString()),o.pure(e.hardcap.toString()),o.pure((e.liquidity_rate*100).toString()),o.pure(e.start_time.toString()),o.pure(e.activity_duration.toString()),o.pure(e.settle_duration.toString()),o.pure(e.locked_duration.toString()),o.pure(e.tick_spacing.toString()),o.pure(qt)];const d=[e.coin_type_sale,e.coin_type_raise];return o.moveCall({target:`${t.ido_router}::${gr}::${i?"create_clmm_and_launchpad_pool":"create_launch_pool_single"}`,typeArguments:d,arguments:u}),o}async creatPurchasePayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=new Ut;n.setGasBudget(this._sdk.gasConfig.GasBudgetHigh2);const r=await Wt.syncBuildCoinInputForAmount(this._sdk,n,BigInt(e.purchase_amount),e.coin_type_raise),i=await this.getPurchaseMark(this._sdk.senderAddress,e.pool_address,!1),s=[e.coin_type_sale,e.coin_type_raise];let o;return i?o=[n.pure(e.pool_address),n.pure(t.config.config_cap_id),n.pure(i.id),r,n.pure(e.purchase_amount.toString()),n.pure(qt)]:o=[n.pure(e.pool_address),n.pure(t.config.config_cap_id),r,n.pure(e.purchase_amount.toString()),n.pure(qt)],n.moveCall({target:`${t.ido_router}::${gr}::${i===void 0?"purchase":"mark_purchase"}`,typeArguments:s,arguments:o}),n}async creatClaimPayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=await this.getPurchaseMark(this._sdk.senderAddress,e.pool_address,!1),r=new Ut;r.setGasBudget(this._sdk.gasConfig.GasBudgetHigh2);const i=[e.coin_type_sale,e.coin_type_raise],s=[r.pure(e.pool_address),r.pure(t.config.config_cap_id),r.pure(n==null?void 0:n.id),r.pure(e.amount_lp.toString()),r.pure(qt)];return r.moveCall({target:`${t.ido_router}::${gr}::claim`,typeArguments:i,arguments:s}),r}async creatSettlePayload(e){const{launchpad:t,clmm:n}=this.sdk.sdkOptions;if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");this.assertLuanchpadConfig();const r=n.config,{clmm_args:i}=e,s=new Ut;s.setSender(this.sdk.senderAddress);const o=[e.coin_type_sale,e.coin_type_raise];if(i){const a=i.opposite?$t.priceToSqrtPriceX64(me(me(1).div(i.current_price).toFixed(9)),i.raise_decimals,i.sale_decimals).toString():$t.priceToSqrtPriceX64(me(i.current_price),i.sale_decimals,i.raise_decimals).toString(),c=BigInt(a)<BigInt(i.clmm_sqrt_price),u=i.opposite?c?e.coin_type_raise:e.coin_type_sale:c?e.coin_type_sale:e.coin_type_raise,d=await this._sdk.Resources.getOwnerCoinAssets(this._sdk.senderAddress,u);let l=An.calculateTotalBalance(d);s.setGasBudget(this._sdk.gasConfig.GasBudgetHigh),An.isSuiCoin(u)&&(l-=BigInt(this._sdk.gasConfig.GasBudgetHigh));const f=Wt.buildCoinInputForAmount(s,d,l,u),p=i.opposite?c?"opposite_settle_only_with_a":"opposite_settle_only_with_b":c?"settle_only_with_a":"settle_only_with_b",_=[s.pure(e.pool_address),s.pure(t.config.config_cap_id),s.pure(i.clmm_pool_address),s.pure(r.global_config_id),s.pure(t.config.lock_manager_id),s.pure(a),f,s.pure(qt)];s.moveCall({target:`${t.ido_router}::${gr}::${p}`,typeArguments:o,arguments:_})}else s.moveCall({target:`${t.ido_router}::${gr}::simple_settle`,typeArguments:o,arguments:[s.pure(e.pool_address),s.pure(t.config.config_cap_id),s.pure(qt)]});return s}creatWithdrawPayload(e){const{launchpad:t}=this.sdk.sdkOptions,n=new Ut;n.setGasBudget(this._sdk.gasConfig.GasBudgetMiddle);const r=[e.coin_type_sale,e.coin_type_raise],i=[n.object(e.pool_address),n.object(t.config.config_cap_id),n.object(qt)];return e.sale_amount>BigInt(0)&&n.moveCall({target:`${t.ido_router}::${gr}::withdraw_sale`,typeArguments:r,arguments:i}),e.raise_amount>BigInt(0)&&n.moveCall({target:`${t.ido_router}::${gr}::withdraw_raise`,typeArguments:r,arguments:i}),n}configWhitelistPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new Ut;n.setGasBudget(this._sdk.gasConfig.GasBudgetHigh2);const r=[e.coin_type_sale,e.coin_type_raise];return e.each_safe_cap>0&&n.moveCall({target:`${t.ido_router}::${gr}::config_white_list_each_safe_cap`,typeArguments:r,arguments:[n.object(t.config.admin_cap_id),n.object(t.config.config_cap_id),n.object(e.pool_address),n.pure(e.each_safe_cap),n.object(qt)]}),e.hard_cap_total>0&&n.moveCall({target:`${t.ido_router}::${gr}::config_white_list_hard_cap_total`,typeArguments:r,arguments:[n.object(t.config.admin_cap_id),n.object(t.config.config_cap_id),n.object(e.pool_address),n.pure(e.hard_cap_total),n.object(qt)]}),e.each_safe_cap===0&&e.hard_cap_total===0&&e.user_addrs.forEach(i=>{const s=[n.object(t.config.admin_cap_id),n.object(t.config.config_cap_id),n.object(e.pool_address),n.object(i),n.object(qt)];n.moveCall({target:`${t.ido_router}::${gr}::add_user_to_whitelist`,typeArguments:r,arguments:s})}),n}creatRemoveWhitelistPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new Ut;n.setGasBudget(this._sdk.gasConfig.GasBudgetMiddle);const r=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(i=>{const s=[n.pure(t.config.admin_cap_id),n.pure(t.config.config_cap_id),n.pure(e.pool_address),n.pure(i),n.pure(qt)];n.moveCall({target:`${t.ido_router}::${gr}::remove_user_from_whitelist`,typeArguments:r,arguments:s})}),n}creatCancelPoolPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new Ut;n.setGasBudget(this._sdk.gasConfig.GasBudgetLow);const r=[e.coin_type_sale,e.coin_type_raise],i=[n.pure(t.config.admin_cap_id),n.pure(t.config.config_cap_id),n.pure(e.pool_address),n.pure(qt)];return n.moveCall({target:`${t.ido_router}::${gr}::cancel`,typeArguments:r,arguments:i}),n}creatResertRecipientPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new Ut;n.setGasBudget(this._sdk.gasConfig.GasBudgetLow);const r=[e.coin_type_sale,e.coin_type_raise],i=[n.pure(t.config.admin_cap_id),n.pure(t.config.config_cap_id),n.pure(e.pool_address),n.pure(e.new_recipient),n.pure(qt)];return n.moveCall({target:`${t.ido_router}::${gr}::resert_recipient_address`,typeArguments:r,arguments:i}),n}creatResertStartTimePayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new Ut;n.setGasBudget(this._sdk.gasConfig.GasBudgetLow);const r=[e.coin_type_sale,e.coin_type_raise],i=[n.pure(t.config.admin_cap_id),n.pure(e.pool_address),n.pure(e.new_start_time),n.pure(qt)];return n.moveCall({target:`${t.ido_router}::${gr}::reset_start_time`,typeArguments:r,arguments:i}),n}creatResertPoolDuractionPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new Ut;n.setGasBudget(this._sdk.gasConfig.GasBudgetLow);const r=[e.coin_type_sale,e.coin_type_raise],i=[n.pure(t.config.admin_cap_id),n.pure(t.config.config_cap_id),n.pure(e.pool_address),n.pure(e.activity_duration),n.pure(e.settle_duration),n.pure(e.lock_duration),n.pure(qt)];return n.moveCall({target:`${t.ido_router}::${gr}::resert_pool_duraction`,typeArguments:r,arguments:i}),n}creatUnlockNftPayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(t.config===void 0)throw Error("launchpad.config  is null");const n=new Ut;n.setGasBudget(this._sdk.gasConfig.GasBudgetLow);const r=[e.nft_type],i=[n.pure(t.config.lock_manager_id),n.pure(e.lock_nft),n.pure(qt)];return n.moveCall({target:`${t.lock_router}::lock::unlock_nft`,typeArguments:r,arguments:i}),n}async getOwnerLaunchpadCoins(e,t){let n=null;if(t){const i=Et(t);n=this.buildLaunchpadCoinType(i.type_arguments[0],i.type_arguments[1])}const r=await this._sdk.Resources.getOwnerCoinAssets(e,n);return t?r.filter(i=>i.coinAddress===n):r.filter(i=>Et(i.coinAddress).full_address===Uc(this._sdk.sdkOptions.launchpad.ido_display,"pool",K1))}async isAdminCap(e){const{launchpad:t}=this._sdk.sdkOptions;if(t.config===void 0)throw Error("launchpad config is empty");const n=await this._sdk.fullClient.getObject({id:t.config.admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(n);const r=Q2(n),i=eb(n);return i&&r&&Et(r).source_address===`${t.ido_display}::config::AdminCap`?un(i.AddressOwner)===un(e):!1}async isWhiteListUser(e,t){const n={type:"address",value:t};try{return await this._sdk.fullClient.getDynamicFieldObject({parentId:e,name:n}),!0}catch{return!1}}async getPurchaseAmount(e,t){const n={type:"address",value:t};try{const r=await this._sdk.fullClient.getDynamicFieldObject({parentId:e,name:n}),i=gi(r);return i?i.value:"0"}catch{return"0"}}async getPurchaseMark(e,t,n=!0){const{launchpad:r}=this._sdk.sdkOptions,i=`${t}_getPurchaseMark`,s=this._cache[i];if(!n&&s!==void 0&&s.getCacheData())return s.value;let o=null;for(;;){const a=await this._sdk.fullClient.getOwnedObjects({owner:e,options:{showType:!0,showContent:!0,showDisplay:!0},cursor:o});for(const c of a.data){const{fields:u}=c.data.content;if(Et(po(c)).source_address===`${r.ido_display}::pool::PurchaseMark`&&t===Et(u.pool_info).address){const l={id:u.id.id,pool_id:u.pool_info,current_amount:u.current_amount,total_amount:u.total_amount,claim_raise:u.claim_raise,claim_sale:u.claim_sale};return this.updateCache(i,l,zs),l}}if(a.hasNextPage)o=a.nextCursor;else break}}async getSettleEvent(e){const{launchpad:t}=this._sdk.sdkOptions,n=`${e}_getPurchaseMark`,r=this._cache[n];if(r!==void 0&&r.getCacheData())return r.value;const i=await this._sdk.fullClient.queryEvents({query:{MoveEventType:`${t.ido_display}::pool::SettleEvent`}});for(const s of i.data){const o=s.parsedJson;if(e===Lr(o.pool_id)){const a={pool_id:o.pool_id,settle_price:o.settle_price,unused_sale:o.unused_sale,unused_raise:o.unused_raise,white_purchase_total:o.white_purchase_total};return this.updateCache(n,a,zs),a}}}buildLaunchpadCoinType(e,t){return Uc(this._sdk.sdkOptions.launchpad.ido_display,"pool",K1,[e,t])}assertLuanchpadConfig(){const{launchpad:e}=this.sdk.sdkOptions;if(e.config===void 0)throw Error("sdk launchpad.config is null")}updateCache(e,t,n=d$){let r=this._cache[e];r?(r.overdueTime=ty(n),r.value=t):r=new pf(t,ty(n)),this._cache[e]=r}},h$=class{constructor(e){Le(this,"_sdk");this._sdk=e}get sdk(){return this._sdk}async creatPoolsTransactionPayload(e){for(const t of e)if(Hl(un(t.coinTypeA),un(t.coinTypeB))){const n=t.coinTypeB;t.coinTypeB=t.coinTypeA,t.coinTypeA=n}return await this.creatPool(e)}async creatPoolTransactionPayload(e){if(Hl(un(e.coinTypeA),un(e.coinTypeB))){const t=e.coinTypeB;e.coinTypeB=e.coinTypeA,e.coinTypeA=t}return"fix_amount_a"in e?await this.creatPoolAndAddLiquidity(e):await this.creatPool([e])}async creatPool(e){const t=new Ut,{clmm:n}=this.sdk.sdkOptions,r=n.config;if(r===void 0)throw Error("eventConfig is null");const i=r.global_config_id,s=r.pools_id;return t.setGasBudget(this._sdk.gasConfig.GasBudgetHigh2),e.forEach(o=>{const a=[t.object(i),t.object(s),t.pure(o.tick_spacing.toString()),t.pure(o.initialize_sqrt_price),t.pure(o.uri),t.object(qt)];t.moveCall({target:`${n.clmm_router}::${xr}::create_pool`,typeArguments:[o.coinTypeA,o.coinTypeB],arguments:a})}),t}async creatPoolAndAddLiquidity(e){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const t=new Ut,{clmm:n}=this.sdk.sdkOptions,r=n.config;if(r===void 0)throw Error("eventConfig is null");const i=r.global_config_id,s=r.pools_id,o=await this._sdk.Resources.getOwnerCoinAssets(this._sdk.senderAddress);t.setGasBudget(this._sdk.gasConfig.GasBudgetHigh2);const a=Wt.buildCoinInputForAmount(t,o,BigInt(e.amount_a),e.coinTypeA),c=Wt.buildCoinInputForAmount(t,o,BigInt(e.amount_b),e.coinTypeB),u=[];a&&u.push({coinInput:a,coinAmount:e.amount_a.toString()}),c&&u.push({coinInput:c,coinAmount:e.amount_b.toString()});let d;u.length===2?d="create_pool_with_liquidity_with_all":d=a!==void 0?"create_pool_with_liquidity_only_a":"create_pool_with_liquidity_only_b";const l=[t.pure(i),t.pure(s),t.pure(e.tick_spacing.toString()),t.pure(e.initialize_sqrt_price),t.pure(e.uri),...u.map(f=>f.coinInput),t.pure(Fi(BigInt(e.tick_lower)).toString()),t.pure(Fi(BigInt(e.tick_upper)).toString()),...u.map(f=>t.pure(f.coinAmount)),t.pure(e.fix_amount_a),t.pure(qt)];return t.moveCall({target:`${n.clmm_router}::${xr}::${d}`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:l}),t}async fetchTicks(e){let t=[],n=[];for(;;){const i=await this.getTicks({pool_id:e.pool_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,start:n,limit:512});if(t=[...t,...i],i.length<512)break;n=[i[i.length-1].index]}return t}async getTicks(e){var c;const{clmm:t,simulationAccount:n}=this.sdk.sdkOptions,r=[],i=[e.coinTypeA,e.coinTypeB],s=new Ut,o=[s.pure(e.pool_id),s.pure(e.start),s.pure(e.limit.toString())];return s.moveCall({target:`${t.clmm_router}::${Mb}::fetch_ticks`,arguments:o,typeArguments:i}),console.log("payload: ",s.blockData.transactions[0]),(c=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:n.address})).events)==null||c.forEach(u=>{Et(u.type).name==="FetchTicksResultEvent"&&u.parsedJson.ticks.forEach(d=>{r.push(HC(d))})}),r}async fetchTicksByRpc(e){let t=[],n=null;const r=512;for(;;){const i=[],s=await this.sdk.fullClient.getDynamicFields({parentId:e,cursor:n,limit:r});if(n=s.nextCursor,s.data.forEach(o=>{Et(o.objectType).module==="skip_list"&&i.push(o.objectId)}),t=[...t,...await this.getTicksByRpc(i)],n===null||s.data.length<r)break}return t}async getTicksByRpc(e){const t=[],n=await this.sdk.fullClient.multiGetObjects({ids:e,options:{showContent:!0,showType:!0}});for(const r of n)t.push(n0(r));return t}async getTickDataByIndex(e,t){const n={type:"u64",value:Fi(BigInt(QC(t).toString())).toString()},r=await this.sdk.fullClient.getDynamicFieldObject({parentId:e,name:n});return n0(r)}async getTickDataByObjectId(e){const t=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0}});return n0(t)}},p$=class{constructor(e){Le(this,"_sdk");this._sdk=e}get sdk(){return this._sdk}async createAddLiquidityTransactionPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=await this._sdk.Resources.getOwnerCoinAssets(this._sdk.senderAddress),r=!("delta_liquidity"in e);if(t){const{isAdjustCoinA:i,isAdjustCoinB:s}=Hp(e);if(r&&(e=e,e.fix_amount_a&&i||!e.fix_amount_a&&s))return await Wt.buildAddLiquidityTransactionForGas(this._sdk,n,e,t)}return Wt.buildAddLiquidityTransaction(this._sdk,n,e)}removeLiquidityTransactionPayload(e){const{clmm:t}=this.sdk.sdkOptions,n="remove_liquidity",r=new Ut;r.setGasBudget(this._sdk.gasConfig.GasBudgetHigh2);const i=[e.coinTypeA,e.coinTypeB];e.collect_fee&&r.moveCall({target:`${t.clmm_router}::${xr}::collect_fee`,typeArguments:i,arguments:[r.object(t.config.global_config_id),r.object(e.pool_id),r.object(e.pos_id)]});const s=[r.object(t.config.global_config_id),r.object(e.pool_id),r.object(e.pos_id),r.pure(e.delta_liquidity),r.pure(e.min_amount_a),r.pure(e.min_amount_b),r.object(qt)];return r.moveCall({target:`${t.clmm_router}::${xr}::${n}`,typeArguments:i,arguments:s}),r}closePositionTransactionPayload(e){const{clmm:t}=this.sdk.sdkOptions,n=new Ut;n.setGasBudget(this._sdk.gasConfig.GasBudgetHigh2);const r=[e.coinTypeA,e.coinTypeB];return n.moveCall({target:`${t.clmm_router}::${xr}::collect_fee`,typeArguments:r,arguments:[n.object(t.config.global_config_id),n.object(e.pool_id),n.object(e.pos_id)]}),e.rewarder_coin_types.forEach(i=>{n.moveCall({target:`${t.clmm_router}::${xr}::collect_reward`,typeArguments:[...r,i],arguments:[n.object(t.config.global_config_id),n.object(e.pool_id),n.object(e.pos_id),n.object(t.config.global_vault_id),n.object(qt)]})}),n.moveCall({target:`${t.clmm_router}::${xr}::close_position`,typeArguments:r,arguments:[n.object(t.config.global_config_id),n.object(e.pool_id),n.object(e.pos_id),n.pure(e.min_amount_a),n.pure(e.min_amount_b),n.object(qt)]}),n}openPositionTransactionPayload(e){const{clmm:t}=this.sdk.sdkOptions,n=new Ut;n.setGasBudget(this._sdk.gasConfig.GasBudgetHigh);const r=[e.coinTypeA,e.coinTypeB],i=Fi(BigInt(e.tick_lower)).toString(),s=Fi(BigInt(e.tick_upper)).toString(),o=[n.pure(t.config.global_config_id),n.pure(e.pool_id),n.pure(i),n.pure(s)];return n.moveCall({target:`${t.clmm_router}::${xr}::open_position`,typeArguments:r,arguments:o}),n}collectFeeTransactionPayload(e){const{clmm:t}=this.sdk.sdkOptions,n=new Ut;n.setGasBudget(this._sdk.gasConfig.GasBudgetLow);const r=[e.coinTypeA,e.coinTypeB],i=[n.object(t.config.global_config_id),n.pure(e.pool_id),n.pure(e.pos_id)];return n.moveCall({target:`${t.clmm_router}::${xr}::collect_fee`,typeArguments:r,arguments:i}),n}},g$=5*60*1e3,js=24*60*60*1e3;function ny(e){return Date.parse(new Date().toString())+e}var y$=class{constructor(e){Le(this,"_sdk");Le(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getSuiTransactionResponse(e,t=!1){const n=`${e}_getSuiTransactionResponse`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!t)return r.value;let i;try{i=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0,showBalanceChanges:!0,showInput:!0,showObjectChanges:!0}})}catch{i=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0}})}return this.updateCache(n,i,js),i}async getFaucetEvent(e,t,n=!0){const r=`${e}_${t}_getFaucetEvent`,i=this._cache[r];if(i!==void 0&&i.getCacheData()&&!n)return i.value;const s=(await this._sdk.fullClient.queryEvents({query:{MoveEventType:`${e}::faucet::FaucetEvent`}})).data;let o={id:"",time:0};return s.forEach(a=>{if(OC(t)===a.sender){const c=a.parsedJson;if(c){const u={id:c.id,time:Number(c.time)},d=o.time;d>0?u.time>d&&(o=u):o=u}}}),o.time>0?(this.updateCache(r,o,js),o):null}async getInitEvent(e=!1){const t=this._sdk.sdkOptions.clmm.clmm_display,n=`${t}_getInitEvent`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!e)return r.value;const i=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=Op(i),o=(await this._sdk.fullClient.queryEvents({query:{Transaction:s}})).data,a={pools_id:"",global_config_id:"",global_vault_id:""};return o.length>0&&(o.forEach(c=>{const u=c.parsedJson;if(c.type)switch(Et(c.type).full_address){case`${t}::config::InitConfigEvent`:a.global_config_id=u.global_config_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=u.pools_id;break;case`${t}::rewarder::RewarderInitEvent`:a.global_vault_id=u.global_vault_id;break}}),this.updateCache(n,a,js)),a}async getCreatePartnerEvent(e=!1){const t=this._sdk.sdkOptions.clmm.clmm_display,n=`${t}_getInitEvent`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!e)return r.value;const i=(await this._sdk.fullClient.queryEvents({query:{MoveEventType:`${t}::partner::CreatePartnerEvent`}})).data,s=[];return i.length>0&&(i.forEach(o=>{s.push(o.parsedJson)}),this.updateCache(n,s,js)),s}async getPoolImmutables(e=[],t=0,n=100,r=!1){const i=this._sdk.sdkOptions.clmm.clmm_display,s=`${i}_getInitPoolEvent`,o=this._cache[s],a=[],c=[];if(o!==void 0&&o.getCacheData()&&!r&&a.push(...o.value),a.length===0)try{(await this._sdk.fullClient.queryEvents({query:{MoveEventType:`${i}::factory::CreatePoolEvent`}})).data.forEach(l=>{const f=l.parsedJson;f&&a.push({poolAddress:f.pool_id,tickSpacing:f.tick_spacing,coinTypeA:Et(f.coin_type_a).full_address,coinTypeB:Et(f.coin_type_b).full_address})}),this.updateCache(s,a,js)}catch(d){console.log("getPoolImmutables",d)}const u=e.length>0;for(let d=0;d<a.length;d+=1){const l=a[d];if(!(u&&!e.includes(l.poolAddress))){if(!u){const f=d;if(f<t||f>=t+n)continue}c.push(l)}}return c}async getPools(e=[],t=0,n=100){const r=[];let i=[];e.length>0?i=[...e]:(await this.getPoolImmutables([],t,n,!1)).forEach(a=>{i.push(a.poolAddress)});const s=await this.sdk.fullClient.multiGetObjects({ids:i,options:{showContent:!0,showType:!0}});for(const o of s){const a=X1(o);r.push(a);const c=`${a.poolAddress}_getPoolObject`;this.updateCache(c,a,js)}return r}async getPool(e,t=!0){const n=`${e}_getPoolObject`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!t)return r.value;const i=await this._sdk.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}}),s=X1(i);return this.updateCache(n,s),s}async getPositionList(e,t=[]){const n=this._sdk.sdkOptions.clmm.clmm_display,r=[];let i=null;for(;;){const s=await this._sdk.fullClient.getOwnedObjects({owner:e,options:{showType:!0,showContent:!0,showDisplay:!0},cursor:i}),o=t.length>0;for(const a of s.data)if(Et(a.data.type).full_address===`${n}::position::Position`){const u=J0(a),d=`${u.pos_object_id}_getPositionList`;this.updateCache(d,u,js),o?t.includes(u.pool)&&r.push(u):r.push(u)}if(s.hasNextPage)i=s.nextCursor;else break}return r}async getPosition(e,t){let n=await this.getSipmlePosition(t);return n=await this.updatePositionRewarders(e,n),n}async getPositionById(e){const t=await this.getSipmlePosition(e),n=await this.getPool(t.pool,!1);return await this.updatePositionRewarders(n.positions_handle,t)}async getSipmlePosition(e){const t=`${e}_getPositionList`,n=this._cache[t];let r=null;if(n!==void 0&&n.getCacheData()&&(r=n.value),r===null){const i=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0,showType:!0,showDisplay:!0}});r=J0(i)}return r}async updatePositionRewarders(e,t){const n=await this._sdk.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t.pos_object_id}}),r=gi(n.data).value.fields.value;return LC(r,t)}async getOwnerCoinAssets(e,t){const n=[];let r=null;for(;;){const i=await(t?this._sdk.fullClient.getCoins({owner:e,coinType:t,cursor:r}):this._sdk.fullClient.getAllCoins({owner:e,cursor:r}));if(i.data.forEach(s=>{BigInt(s.balance)>0&&n.push({coinAddress:Et(s.coinType).source_address,coinObjectId:s.coinObjectId,balance:BigInt(s.balance)})}),r=i.nextCursor,!i.hasNextPage)break}return n}async getSuiObjectOwnedByAddress(e){const t=[],r=(await this._sdk.fullClient.getOwnedObjects({owner:e})).data.map(s=>s.objectId);return(await this._sdk.fullClient.multiGetObjects({ids:r})).forEach(s=>{const o=Ip(s);if(o){const a=An.getCoinTypeArg(o),c=Vr.getBalance(o),u={coinAddress:a,balance:c,...o};t.push(u)}}),t}updateCache(e,t,n=g$){let r=this._cache[e];r?(r.overdueTime=ny(n),r.value=t):r=new pf(t,ny(n)),this._cache[e]=r}},m$=class{constructor(e){Le(this,"_sdk");Le(this,"growthGlobal");this._sdk=e,this.growthGlobal=[we,we,we]}get sdk(){return this._sdk}async emissionsEveryDay(e){const n=(await this.sdk.Resources.getPool(e)).rewarder_infos;if(!n)return null;const r=[];for(const i of n){const s=kt.fromX64(new I(i.emissions_per_second));r.push({emissions:Math.floor(s.toNumber()*60*60*24),coin_address:i.coinAddress})}return r}async updatePoolRewarder(e,t){const n=await this.sdk.Resources.getPool(e),r=n.rewarder_last_updated_time;if(n.rewarder_last_updated_time=t.toString(),Number(n.liquidity)===0||t.eq(new I(r)))return n;const i=t.div(new I(1e3)).sub(new I(r)).add(new I(15)),s=n.rewarder_infos;for(let o=0;o<s.length;o+=1){const a=s[o],c=kt.checkMulDivFloor(i,new I(a.emissions_per_second),new I(n.liquidity),128);this.growthGlobal[o]=new I(a.growth_global).add(new I(c))}return n}async posRewardersAmount(e,t,n){const r=Date.parse(new Date().toString()),i=await this.updatePoolRewarder(e,new I(r)),s=await this.sdk.Resources.getPosition(t,n);if(s===void 0)return[];const o=i.ticks_handle,a=await this.sdk.Pool.getTickDataByIndex(o,s.tick_lower_index),c=await this.sdk.Pool.getTickDataByIndex(o,s.tick_upper_index);return await this.posRewardersAmountInternal(i,s,a,c)}async poolRewardersAmount(e,t){const n=Date.parse(new Date().toString()),r=await this.updatePoolRewarder(t,new I(n)),i=await this.sdk.Resources.getPositionList(e,[t]),s=await this.getPoolLowerAndUpperTicks(r.ticks_handle,i),o=[we,we,we];for(let a=0;a<i.length;a+=1){const c=await this.posRewardersAmountInternal(r,i[a],s[0][a],s[1][a]);for(let u=0;u<3;u+=1)o[u]=o[u].add(c[u].amount_owed)}return o}posRewardersAmountInternal(e,t,n,r){const i=t.tick_lower_index,s=t.tick_upper_index,o=jC(e,n,r,i,s,this.growthGlobal),a=[],c=[];if(o.length>0){const u=kt.subUnderflowU128(o[0],new I(t.reward_growth_inside_0)),d=kt.checkMulShiftRight(new I(t.liquidity),u,64,256);a.push(o[0]),c.push({amount_owed:new I(t.reward_amount_owed_0).add(d),coin_address:e.rewarder_infos[0].coinAddress})}if(o.length>1){const u=kt.subUnderflowU128(o[1],new I(t.reward_growth_inside_1)),d=kt.checkMulShiftRight(new I(t.liquidity),u,64,256);a.push(o[1]),c.push({amount_owed:new I(t.reward_amount_owed_1).add(d),coin_address:e.rewarder_infos[1].coinAddress})}if(o.length>2){const u=kt.subUnderflowU128(o[2],new I(t.reward_growth_inside_2)),d=kt.checkMulShiftRight(new I(t.liquidity),u,64,256);a.push(o[2]),c.push({amount_owed:new I(t.reward_amount_owed_2).add(d),coin_address:e.rewarder_infos[2].coinAddress})}return c}async getPoolLowerAndUpperTicks(e,t){const n=[],r=[];for(const i of t){const s=await this.sdk.Pool.getTickDataByIndex(e,i.tick_lower_index),o=await this.sdk.Pool.getTickDataByIndex(e,i.tick_upper_index);n.push(s),r.push(o)}return[n,r]}collectRewarderTransactionPayload(e){const{clmm:t}=this.sdk.sdkOptions,n=[e.coinTypeA,e.coinTypeB,...e.rewarder_coin_types],r=new Ut;return r.setGasBudget(this._sdk.gasConfig.GasBudgetLow),e.rewarder_coin_types.forEach(i=>{r.moveCall({target:`${t.clmm_router}::${xr}::collect_reward`,typeArguments:[...n,i],arguments:[r.object(t.config.global_config_id),r.object(e.pool_id),r.object(e.pos_id),r.object(t.config.global_vault_id),r.pure(qt)]})}),r}},_$=3e4,gn={maxAmountOut:we,isExceed:!1,path:[]};function ry(e,t){return{pair:`${e}-${t}`,reversePair:`${t}-${e}`}}function w$(e,t,n,r){const i=e.length;if(!e.length)throw new Error("routerTable is empty");if(i!==t.length)throw new Error("routerTable length not equal to feeRateArray length");let s=r?we:new I(2).pow(new I(64)),o=[];const a=100/(e[0].length-1);switch(i){case 1:{n[0][n[0].length-1]||o.push({feeRate:t[0],percent:100,amountOut:e[0][e[0].length-1].toString()});break}case 2:{for(let c=0;c<e[0].length;c+=1){const u=e[0].length-c-1,d=e[0][c].add(e[1][u]);if(d.gt(s)&&r||d.lt(s)&&!r)if(!n[0][c]&&!n[1][u])o=[],s=d,c>0&&o.push({feeRate:t[0],percent:c*a,amountOut:e[0][c].toString()}),u>0&&o.push({feeRate:t[1],percent:u*a,amountOut:e[1][u].toString()});else continue}break}case 3:{for(let c=0;c<e[0].length;c+=1)for(let u=0;u<e[0].length-c;u+=1){const d=e[0].length-c-u-1,l=e[0][c].add(e[1][u]).add(e[2][d]);if(l.gt(s)&&r||l.lt(s)&&!r){if(n[0][c]||n[1][u]||n[2][d])continue;o=[],s=l,c>0&&o.push({feeRate:t[0],percent:a*c,amountOut:e[0][c].toString()}),u>0&&o.push({feeRate:t[1],percent:u*a,amountOut:e[1][u].toString()}),d>0&&o.push({feeRate:t[2],percent:d*a,amountOut:e[2][d].toString()})}}break}case 4:{for(let c=0;c<e[0].length;c+=1)for(let u=0;u<e[0].length-c;u+=1)for(let d=0;d<e[0].length-c-u;d+=1){const l=e[0].length-c-u-d-1,f=e[0][c].add(e[1][u]).add(e[2][d]).add(e[3][l]);if(f.gt(s)&&r||f.lt(s)&&!r){if(n[0][c]||n[1][u]||n[2][d]||n[3][l])continue;o=[],s=f,c>0&&o.push({feeRate:t[0],percent:a*c,amountOut:e[0][c].toString()}),u>0&&o.push({feeRate:t[1],percent:u*a,amountOut:e[1][u].toString()}),d>0&&o.push({feeRate:t[2],percent:d*a,amountOut:e[2][d].toString()}),l>0&&o.push({feeRate:t[3],percent:l*a,amountOut:e[3][l].toString()})}}break}}return o.length===0||s.eq(we)?{maxAmountOut:we,path:[],isExceed:!0}:{maxAmountOut:s,path:o,isExceed:!1}}var b$=class{constructor(e){Le(this,"pathProviders");Le(this,"graph");Le(this,"coinProviders");Le(this,"_coinSymbolMap");Le(this,"_coinAddressMap");Le(this,"poolAddressMap");Le(this,"poolMap");Le(this,"ticksMap");Le(this,"leastRefreshTime");Le(this,"createTxParams");Le(this,"splitUnit");Le(this,"poolDirectionMap");Le(this,"isInited");Le(this,"_sdk");this.pathProviders=[],this.coinProviders={coins:[]},this.graph=new Rw,this._coinSymbolMap=new Map,this._coinAddressMap=new Map,this.poolAddressMap=new Map,this.poolMap=new Map,this.ticksMap=new Map,this._sdk=e,this.leastRefreshTime=Date.now(),this.createTxParams={partitionQuantities:[],swapDirects:[],poolAddresses:[],percents:[],totalAmounts:[],partner:"",amountOut:"0",coinTypes:[],estAmountInOrOut:[],priceSplitPoint:1},this.splitUnit=50,this.poolDirectionMap=new Map,this.isInited=!1,this.getPoolAddressMapAndDirection=this.getPoolAddressMapAndDirection.bind(this),this.setCoinList=this.setCoinList.bind(this),this.loadGraph=this.loadGraph.bind(this),this.addCoinProvider=this.addCoinProvider.bind(this),this.addPathProvider=this.addPathProvider.bind(this),this.splitOrRouterSwap=this.splitOrRouterSwap.bind(this),this.refreshPoolofSwapRouter=this.refreshPoolofSwapRouter.bind(this),this.getBestSplitResultInOnePair=this.getBestSplitResultInOnePair.bind(this),this.findBestSplitPriceWithOneSkip=this.findBestSplitPriceWithOneSkip.bind(this),this.findBestSplitPriceWithTwoSkip=this.findBestSplitPriceWithTwoSkip.bind(this),this.findBestSplitPriceWithThreeSkip=this.findBestSplitPriceWithThreeSkip.bind(this),this.findBestSplitPrice=this.findBestSplitPrice.bind(this),this.price=this.price.bind(this)}get sdk(){return this._sdk}getPoolAddressMapAndDirection(e,t){const{pair:n,reversePair:r}=ry(e,t);let i=this.poolAddressMap.get(n);if(i!=null)return{addressMap:i,direction:!0};if(i=this.poolAddressMap.get(r),i!=null)return{addressMap:i,direction:!1}}async setCoinList(){this.coinProviders.coins.forEach(e=>{this._coinSymbolMap.set(e.symbol,e),this._coinAddressMap.set(e.address,e)})}loadGraph(){return this.pathProviders.forEach(e=>{const{paths:t}=e;t.forEach(n=>{const r=this.graph.getVertexByKey(n.base)??new pl(n.base),i=this.graph.getVertexByKey(n.quote)??new pl(n.quote);this.graph.addEdge(new Bw(r,i));const s=this._coinSymbolMap.get(n.base),o=this._coinSymbolMap.get(n.quote);if(s!=null&&o!=null){const a=ry(n.base,n.quote).pair;this.poolAddressMap.set(a,n.addressMap)}})}),this}addPathProvider(e){return this.pathProviders.push(e),this}addCoinProvider(e){return this.coinProviders=e,this}tokenInfo(e){return this._coinAddressMap.has(e)?this._coinAddressMap.get(e):this._coinSymbolMap.get(e)}getCreateTxParams(){return this.createTxParams}isPoolDirectionSet(e){return this.poolDirectionMap.get(e)!=null}getPoolDirection(e){if(this.isPoolDirectionSet(e))return this.poolDirectionMap.get(e)}setPoolDirection(e,t){this.poolDirectionMap.set(e,t)}getBestSplitResultInOnePair(e,t,n,r,i,s){if(r.eq(we))return{maxAmountOut:we,path:[],isExceed:!1};const o=[],a=[],c=[],u=this.getPoolAddressMapAndDirection(t,n),d=u==null?void 0:u.addressMap;if(d)for(const[l,f]of d.entries()){const p=this.poolMap.get(f),_=this.poolDirectionMap.get(f),y=i===_,b=this.ticksMap.get(f),E=new l$(r,e,p,y,s,b).computeSwap();s?o.push(E.amountOutArray):o.push(E.amountInArray),c.push(E.isExceed),a.push(l)}return w$(o.slice(0,4),a.slice(0,4),c.slice(0,4),s)}findBestSplitPriceWithOneSkip(e,t,n,r,i){const s={maxAmountOut:new I(0),path:[],poolAddresses:[],totalAmounts:[],percents:[],isExceed:!1},o=[],a=[],c=[],u=[];if(!i){let f=gn,p=gn;if(r){if(f=this.getBestSplitResultInOnePair(100,e[0][0],e[0][1],t,n[0][0],r),f.isExceed||(p=this.getBestSplitResultInOnePair(100,e[0][2],e[0][3],f.maxAmountOut,n[0][1],r),p.isExceed))return s.isExceed=!0,s;s.maxAmountOut=p.maxAmountOut}else{if(p=this.getBestSplitResultInOnePair(100,e[0][2],e[0][3],t,n[0][1],r),p.isExceed||(f=this.getBestSplitResultInOnePair(100,e[0][0],e[0][1],p.maxAmountOut,n[0][0],r),f.isExceed))return s.isExceed=!0,s;s.maxAmountOut=f.maxAmountOut}o.push(f.path),o.push([]),o.push(p.path);const _=[],y=[],b=[];f.path.forEach(R=>{var C;r?_.push(t.muln(R.percent).divn(100)):_.push(p.maxAmountOut.muln(R.percent).divn(100)),b.push(R.percent);const P=(C=this.getPoolAddressMapAndDirection(e[0][0],e[0][1]))==null?void 0:C.addressMap.get(R.feeRate);y.push(P)});const B=[],E=[],x=[];p.path.forEach(R=>{var C;r?B.push(f.maxAmountOut.muln(R.percent).divn(100)):B.push(t.muln(R.percent).divn(100)),x.push(R.percent);const P=(C=this.getPoolAddressMapAndDirection(e[0][2],e[0][3]))==null?void 0:C.addressMap.get(R.feeRate);E.push(P)});let S=we;_.forEach(R=>{S=S.add(R)});let T=we;return B.forEach(R=>{T=T.add(R)}),a.push(S.toString()),a.push(we.toString()),a.push(T.toString()),c.push(b),c.push([]),c.push(x),u.push(y),u.push([]),u.push(E),s.totalAmounts=a,s.path=o,s.percents=c,s.poolAddresses=u,r?s.maxAmountOut=p.maxAmountOut:s.maxAmountOut=f.maxAmountOut,s}let d=we;r||(d=new I(2).pow(new I(64)));const l=rl(t,this.splitUnit);for(let f=0;f<l.length;f+=1){const p=this.getBestSplitResultInOnePair(5,e[0][0],e[0][1],l[f],n[0][0],r);if(p.isExceed)continue;let _=gn,y=gn;if(r){if(_=this.getBestSplitResultInOnePair(100,e[1][0],e[1][1],l[l.length-f-1],n[1][0],r),_.isExceed||(y=this.getBestSplitResultInOnePair(100,e[1][2],e[1][3],_.maxAmountOut,n[1][1],r),y.isExceed))continue}else if(y=this.getBestSplitResultInOnePair(100,e[1][2],e[1][3],l[l.length-f-1],n[1][1],r),y.isExceed||(_=this.getBestSplitResultInOnePair(100,e[1][0],e[1][1],y.maxAmountOut,n[1][0],r),_.isExceed))continue;const b=[],B=[],E=[];p.path.forEach(N=>{var h;b.push(t.muln(f*this.splitUnit).divn(100).muln(N.percent).divn(100)),E.push(N.percent);const k=(h=this.getPoolAddressMapAndDirection(e[0][0],e[0][1]))==null?void 0:h.addressMap.get(N.feeRate);B.push(k)});const x=[],S=[],T=[];_.path.forEach(N=>{var h;r?x.push(t.muln((l.length-f-1)*this.splitUnit).divn(100).muln(N.percent).divn(100)):x.push(y.maxAmountOut.muln(N.percent).divn(100)),T.push(N.percent);const k=(h=this.getPoolAddressMapAndDirection(e[1][0],e[1][1]))==null?void 0:h.addressMap.get(N.feeRate);S.push(k)});const R=[],P=[],C=[];y.path.forEach(N=>{var h;r?R.push(_.maxAmountOut.muln(N.percent).divn(100)):R.push(t.muln((l.length-f-1)*this.splitUnit).divn(100).muln(N.percent).divn(100)),C.push(N.percent);const k=(h=this.getPoolAddressMapAndDirection(e[1][2],e[1][3]))==null?void 0:h.addressMap.get(N.feeRate);P.push(k)});const G=[],F=[],U=[];if(y.maxAmountOut.add(p.maxAmountOut).gt(d)||_.maxAmountOut.add(p.maxAmountOut).lt(d)){r?d=y.maxAmountOut.add(p.maxAmountOut):d=_.maxAmountOut.add(p.maxAmountOut);let N=we;b.forEach(h=>{N=N.add(h)});let k=we;x.forEach(h=>{k=k.add(h)}),G.push(_.path),G.push(p.path),G.push(y.path),F.push(k.toString()),F.push(N.toString()),c.push(T),c.push(E),c.push(C),U.push(S),U.push(B),U.push(P),s.maxAmountOut=d,s.path=G,s.totalAmounts=F,s.percents=c,s.poolAddresses=U}}return s.path.length||(s.isExceed=!0),s}findBestSplitPriceWithTwoSkip(e,t,n,r,i){const s={maxAmountOut:we,path:[],totalAmounts:[],percents:[],poolAddresses:[],isExceed:!1},o=rl(t,this.splitUnit);let a=we;if(r||(a=new I(2).pow(new I(64))),!i){for(let c=0;c<o.length;c+=1){let u=gn,d=gn,l=gn,f=gn;if(r){if(u=this.getBestSplitResultInOnePair(100,e[0][0],e[0][1],o[c],n[1][0],r),u.isExceed||(d=this.getBestSplitResultInOnePair(100,e[0][2],e[0][3],u.maxAmountOut,n[1][1],r),d.isExceed)||(l=this.getBestSplitResultInOnePair(100,e[1][0],e[1][1],o[o.length-c-1],n[1][0],r),l.isExceed)||(f=this.getBestSplitResultInOnePair(100,e[1][2],e[1][3],l.maxAmountOut,n[1][1],r),f.isExceed))continue}else if(d=this.getBestSplitResultInOnePair(100,e[0][2],e[0][3],o[c],n[1][1],r),d.isExceed||(u=this.getBestSplitResultInOnePair(100,e[0][0],e[0][1],d.maxAmountOut,n[1][0],r),u.isExceed)||(f=this.getBestSplitResultInOnePair(100,e[1][2],e[1][3],o[o.length-c-1],n[1][1],r),f.isExceed)||(l=this.getBestSplitResultInOnePair(100,e[1][0],e[1][1],f.maxAmountOut,n[1][0],r),l.isExceed))continue;const p=[],_=[],y=[];u.path.forEach(k=>{var g;r?p.push(t.muln(c*this.splitUnit).divn(100).muln(k.percent).divn(100)):p.push(d.maxAmountOut.muln(k.percent).divn(100)),y.push(k.percent);const h=(g=this.getPoolAddressMapAndDirection(e[0][0],e[0][1]))==null?void 0:g.addressMap.get(k.feeRate);_.push(h)});const b=[],B=[],E=[];d.path.forEach(k=>{var g;r?b.push(u.maxAmountOut.muln(k.percent).divn(100)):b.push(t.muln(c*this.splitUnit).divn(100).muln(k.percent).divn(100)),E.push(k.percent);const h=(g=this.getPoolAddressMapAndDirection(e[0][2],e[0][3]))==null?void 0:g.addressMap.get(k.feeRate);B.push(h)});const x=[],S=[],T=[];l.path.forEach(k=>{var g;r?x.push(t.muln((o.length-c-1)*this.splitUnit).divn(100).muln(k.percent).divn(100)):x.push(f.maxAmountOut.muln(k.percent).divn(100)),T.push(k.percent);const h=(g=this.getPoolAddressMapAndDirection(e[1][0],e[1][1]))==null?void 0:g.addressMap.get(k.feeRate);S.push(h)});const R=[],P=[],C=[];f.path.forEach(k=>{var g;r?R.push(l.maxAmountOut.muln(k.percent).divn(100)):R.push(t.muln((o.length-c-1)*this.splitUnit).divn(100).muln(k.percent).divn(100)),C.push(k.percent);const h=(g=this.getPoolAddressMapAndDirection(e[1][1],e[1][2]))==null?void 0:g.addressMap.get(k.feeRate);P.push(h)});const G=[],F=[],U=[],N=[];if(d.maxAmountOut.add(f.maxAmountOut).gt(a)&&r||!r&&u.maxAmountOut.add(l.maxAmountOut).lt(a)){r?a=d.maxAmountOut.add(f.maxAmountOut):a=u.maxAmountOut.add(l.maxAmountOut);let k=we;p.forEach(O=>{k=k.add(O)});let h=we;b.forEach(O=>{h=h.add(O)});let g=we;x.forEach(O=>{g=g.add(O)});let v=we;R.forEach(O=>{v=v.add(O)}),G.push(u.path),G.push(d.path),G.push([]),G.push(l.path),G.push(f.path),F.push(k.toString()),F.push(g.toString()),F.push(we.toString()),F.push(h.toString()),F.push(v.toString()),N.push(y),N.push(T),N.push([]),N.push(E),N.push(C),U.push(_),U.push(S),U.push([]),U.push(B),U.push(P),s.maxAmountOut=a,s.percents=N,s.totalAmounts=F,s.path=G,s.poolAddresses=U}}return s.path.length||(s.isExceed=!0),s}for(let c=0;c<o.length;c+=1)for(let u=0;u<o.length-c-1;u+=1){const d=o.length-c-u-1,l=this.getBestSplitResultInOnePair(5,e[0][0],e[0][1],o[d],n[0][0],r);if(l.isExceed)continue;let f=gn,p=gn,_=gn,y=gn;if(r){if(f=this.getBestSplitResultInOnePair(100,e[1][0],e[1][1],o[u],n[1][0],r),f.isExceed||(p=this.getBestSplitResultInOnePair(100,e[1][2],e[1][3],f.maxAmountOut,n[1][1],r),p.isExceed)||(_=this.getBestSplitResultInOnePair(100,e[2][0],e[2][1],o[c],n[2][0],r),_.isExceed)||(y=this.getBestSplitResultInOnePair(100,e[2][2],e[2][3],_.maxAmountOut,n[2][1],r),y.isExceed))continue}else if(p=this.getBestSplitResultInOnePair(100,e[1][2],e[1][3],o[u],n[1][1],r),p.isExceed||(f=this.getBestSplitResultInOnePair(100,e[1][0],e[1][1],p.maxAmountOut,n[1][0],r),f.isExceed)||(y=this.getBestSplitResultInOnePair(100,e[2][2],e[2][3],o[c],n[2][1],r),y.isExceed)||(_=this.getBestSplitResultInOnePair(100,e[2][0],e[2][1],y.maxAmountOut,n[2][0],r),_.isExceed))continue;const b=[],B=[],E=[];f.path.forEach(W=>{var w;r?b.push(t.muln(u*this.splitUnit).divn(100).muln(W.percent).divn(100)):b.push(p.maxAmountOut.muln(W.percent).divn(100)),E.push(W.percent);const $=(w=this.getPoolAddressMapAndDirection(e[1][0],e[1][1]))==null?void 0:w.addressMap.get(W.feeRate);B.push($)});const x=[],S=[],T=[];p.path.forEach(W=>{var w;r?x.push(f.maxAmountOut.muln(W.percent).divn(100)):x.push(t.muln(u*this.splitUnit).divn(100).muln(W.percent).divn(100)),T.push(W.percent);const $=(w=this.getPoolAddressMapAndDirection(e[1][2],e[1][3]))==null?void 0:w.addressMap.get(W.feeRate);S.push($)});const R=[],P=[],C=[];_.path.forEach(W=>{var w;r?R.push(t.muln(c*this.splitUnit).divn(100).muln(W.percent).divn(100)):R.push(y.maxAmountOut.muln(W.percent).divn(100)),C.push(W.percent);const $=(w=this.getPoolAddressMapAndDirection(e[2][0],e[2][1]))==null?void 0:w.addressMap.get(W.feeRate);P.push($)});const G=[],F=[],U=[];y.path.forEach(W=>{var w;r?G.push(_.maxAmountOut.muln(W.percent).divn(100)):G.push(t.muln(c*this.splitUnit).divn(100).muln(W.percent).divn(100)),U.push(W.percent);const $=(w=this.getPoolAddressMapAndDirection(e[2][2],e[2][3]))==null?void 0:w.addressMap.get(W.feeRate);F.push($)});const N=[],k=[],h=[];l.path.forEach(W=>{var w;N.push(t.muln(d*this.splitUnit).divn(100).muln(W.percent).divn(100)),h.push(W.percent);const $=(w=this.getPoolAddressMapAndDirection(e[0][0],e[0][1]))==null?void 0:w.addressMap.get(W.feeRate);k.push($)});let g=we;r?g=l.maxAmountOut.add(p.maxAmountOut).add(y.maxAmountOut):g=l.maxAmountOut.add(f.maxAmountOut).add(_.maxAmountOut);const v=[],O=[],L=[],z=[];if(g.gt(a)&&r||g.lt(a)&&!r){let W=we;b.forEach(Q=>{W=W.add(Q)});let $=we;R.forEach(Q=>{$=$.add(Q)});let w=we;N.forEach(Q=>{w=w.add(Q)});let H=we;x.forEach(Q=>{H=H.add(Q)});let re=we;G.forEach(Q=>{re=re.add(Q)}),a=g,v.push(f.path),v.push(_.path),v.push(l.path),v.push(p.path),v.push(y.path),O.push(W.toString()),O.push($.toString()),O.push(w.toString()),O.push(H.toString()),O.push(re.toString()),L.push(E),L.push(C),L.push(h),L.push(T),L.push(U),z.push(B),z.push(P),z.push(k),z.push(S),z.push(F),s.maxAmountOut=g,s.path=v,s.totalAmounts=O,s.poolAddresses=z,s.percents=L}}return s.path.length||(s.isExceed=!0),s}findBestSplitPriceWithThreeSkip(e,t,n,r,i){const s={maxAmountOut:new I(0),path:[],totalAmounts:[],percents:[],poolAddresses:[],isExceed:!1};let o=we;r||(o=new I(2).pow(new I(64)));const a=rl(t,this.splitUnit);for(let c=0;c<a.length;c+=1)for(let u=0;u<a.length-c-1;u+=1)if(i)for(let d=0;d<a.length-c-u-1;d+=1){const l=a.length-c-u-d-1,f=this.getBestSplitResultInOnePair(5,e[0][0],e[0][1],a[d],n[0][0],r);let p=gn,_=gn,y=gn,b=gn,B=gn,E=gn;if(r){if(p=this.getBestSplitResultInOnePair(100,e[1][0],e[1][1],a[u],n[1][0],r),p.isExceed||(_=this.getBestSplitResultInOnePair(100,e[1][2],e[1][3],p.maxAmountOut,n[1][1],r),_.isExceed)||(y=this.getBestSplitResultInOnePair(100,e[2][0],e[2][1],a[c],n[2][0],r),y.isExceed)||(b=this.getBestSplitResultInOnePair(100,e[2][2],e[2][3],y.maxAmountOut,n[2][1],r),b.isExceed)||(B=this.getBestSplitResultInOnePair(100,e[3][0],e[3][1],a[l],n[3][0],r),B.isExceed)||(E=this.getBestSplitResultInOnePair(100,e[3][2],e[3][3],B.maxAmountOut,n[3][1],r),E.isExceed))continue}else if(_=this.getBestSplitResultInOnePair(100,e[1][2],e[1][3],a[u],n[1][1],r),_.isExceed||(p=this.getBestSplitResultInOnePair(100,e[1][0],e[1][1],_.maxAmountOut,n[1][0],r),p.isExceed)||(b=this.getBestSplitResultInOnePair(100,e[2][2],e[2][3],a[c],n[2][1],r),b.isExceed)||(y=this.getBestSplitResultInOnePair(100,e[2][0],e[2][1],b.maxAmountOut,n[2][0],r),y.isExceed)||(E=this.getBestSplitResultInOnePair(100,e[3][2],e[3][3],a[l],n[3][1],r),E.isExceed)||(B=this.getBestSplitResultInOnePair(100,e[3][0],e[3][1],E.maxAmountOut,n[3][0],r),B.isExceed))continue;const x=[],S=[],T=[];p.path.forEach(J=>{var K;r?x.push(t.muln(u*this.splitUnit).divn(100).muln(J.percent).divn(100)):x.push(_.maxAmountOut.muln(J.percent).divn(100)),T.push(J.percent);const j=(K=this.getPoolAddressMapAndDirection(e[1][0],e[1][1]))==null?void 0:K.addressMap.get(J.feeRate);S.push(j)});const R=[],P=[],C=[];_.path.forEach(J=>{var K;r?R.push(p.maxAmountOut.muln(J.percent).divn(100)):R.push(t.muln(u*this.splitUnit).divn(100).muln(J.percent).divn(100)),C.push(J.percent);const j=(K=this.getPoolAddressMapAndDirection(e[1][2],e[1][3]))==null?void 0:K.addressMap.get(J.feeRate);P.push(j)});const G=[],F=[],U=[];y.path.forEach(J=>{var K;r?G.push(t.muln(c*this.splitUnit).divn(100).muln(J.percent).divn(100)):G.push(b.maxAmountOut.muln(J.percent).divn(100)),U.push(J.percent);const j=(K=this.getPoolAddressMapAndDirection(e[2][0],e[2][1]))==null?void 0:K.addressMap.get(J.feeRate);F.push(j)});const N=[],k=[],h=[];b.path.forEach(J=>{var K;r?N.push(y.maxAmountOut.muln(J.percent).divn(100)):N.push(t.muln(c*this.splitUnit).divn(100).muln(J.percent).divn(100)),h.push(J.percent);const j=(K=this.getPoolAddressMapAndDirection(e[2][2],e[2][3]))==null?void 0:K.addressMap.get(J.feeRate);k.push(j)});const g=[],v=[],O=[];B.path.forEach(J=>{var K;r?g.push(t.muln(l*this.splitUnit).divn(100).muln(J.percent).divn(100)):g.push(E.maxAmountOut.muln(J.percent).divn(100)),O.push(J.percent);const j=(K=this.getPoolAddressMapAndDirection(e[3][0],e[3][1]))==null?void 0:K.addressMap.get(J.feeRate);v.push(j)});const L=[],z=[],W=[];E.path.forEach(J=>{var K;r?L.push(B.maxAmountOut.muln(J.percent).divn(100)):L.push(t.muln(l*this.splitUnit).divn(100).muln(J.percent).divn(100)),W.push(J.percent);const j=(K=this.getPoolAddressMapAndDirection(e[3][2],e[3][3]))==null?void 0:K.addressMap.get(J.feeRate);z.push(j)});const $=[],w=[],H=[];f.path.forEach(J=>{var K;$.push(t.muln(d*this.splitUnit).divn(100).muln(J.percent).divn(100)),H.push(J.percent);const j=(K=this.getPoolAddressMapAndDirection(e[0][0],e[0][1]))==null?void 0:K.addressMap.get(J.feeRate);w.push(j)});let re=we;r?re=f.maxAmountOut.add(_.maxAmountOut).add(b.maxAmountOut).add(E.maxAmountOut):re=f.maxAmountOut.add(p.maxAmountOut).add(y.maxAmountOut).add(B.maxAmountOut);const Q=[],ce=[],Be=[],Ue=[];if(re.gt(o)&&r||!r&&re.lt(o)){let J=we;x.forEach(fe=>{J=J.add(fe)});let j=we;G.forEach(fe=>{j=j.add(fe)});let K=we;g.forEach(fe=>{K=K.add(fe)});let Y=we;$.forEach(fe=>{Y=Y.add(fe)});let ne=we;R.forEach(fe=>{ne=ne.add(fe)});let ue=we;N.forEach(fe=>{ue=ue.add(fe)});let le=we;L.forEach(fe=>{le=le.add(fe)}),o=re,Q.push(p.path),Q.push(y.path),Q.push(B.path),Q.push(f.path),Q.push(_.path),Q.push(b.path),Q.push(E.path),ce.push(J.toString()),ce.push(j.toString()),ce.push(K.toString()),ce.push(Y.toString()),ce.push(ne.toString()),ce.push(ue.toString()),ce.push(le.toString()),Be.push(T),Be.push(U),Be.push(O),Be.push(H),Be.push(C),Be.push(h),Be.push(W),Ue.push(S),Ue.push(F),Ue.push(v),Ue.push(w),Ue.push(P),Ue.push(k),Ue.push(z),s.maxAmountOut=re,s.path=Q,s.totalAmounts=ce,s.percents=Be,s.poolAddresses=Ue}}else{const d=a.length-c-u-1;let l=gn,f=gn,p=gn,_=gn,y=gn,b=gn;if(r){if(l=this.getBestSplitResultInOnePair(100,e[0][0],e[0][1],a[u],n[0][0],r),l.isExceed||(f=this.getBestSplitResultInOnePair(100,e[0][2],e[0][3],l.maxAmountOut,n[0][1],r),f.isExceed)||(p=this.getBestSplitResultInOnePair(100,e[1][0],e[1][1],a[c],n[1][0],r),p.isExceed)||(_=this.getBestSplitResultInOnePair(100,e[1][2],e[1][3],p.maxAmountOut,n[1][1],r),_.isExceed)||(y=this.getBestSplitResultInOnePair(100,e[2][0],e[2][1],a[d],n[2][0],r),y.isExceed)||(b=this.getBestSplitResultInOnePair(100,e[2][2],e[2][3],p.maxAmountOut,n[2][1],r),b.isExceed))continue}else if(f=this.getBestSplitResultInOnePair(100,e[0][2],e[0][3],a[u],n[0][1],r),f.isExceed||(l=this.getBestSplitResultInOnePair(100,e[0][0],e[0][1],f.maxAmountOut,n[0][0],r),l.isExceed)||(_=this.getBestSplitResultInOnePair(100,e[1][2],e[1][3],a[c],n[1][1],r),_.isExceed)||(p=this.getBestSplitResultInOnePair(100,e[1][0],e[1][1],_.maxAmountOut,n[1][0],r),p.isExceed)||(b=this.getBestSplitResultInOnePair(5,e[2][2],e[2][3],a[d],n[2][1],r),b.isExceed)||(y=this.getBestSplitResultInOnePair(100,e[2][0],e[2][1],_.maxAmountOut,n[2][0],r),y.isExceed))continue;const B=[],E=[],x=[];l.path.forEach(re=>{var ce;r?B.push(t.muln(u*this.splitUnit).divn(100).muln(re.percent).divn(100)):B.push(f.maxAmountOut.muln(re.percent).divn(100)),x.push(re.percent);const Q=(ce=this.getPoolAddressMapAndDirection(e[0][0],e[0][1]))==null?void 0:ce.addressMap.get(re.feeRate);E.push(Q)});const S=[],T=[],R=[];f.path.forEach(re=>{var ce;r?S.push(l.maxAmountOut.muln(re.percent).divn(100)):S.push(t.muln(u*this.splitUnit).divn(100).muln(re.percent).divn(100)),R.push(re.percent);const Q=(ce=this.getPoolAddressMapAndDirection(e[0][2],e[0][3]))==null?void 0:ce.addressMap.get(re.feeRate);T.push(Q)});const P=[],C=[],G=[];p.path.forEach(re=>{var ce;r?P.push(t.muln(c*this.splitUnit).divn(100).muln(re.percent).divn(100)):P.push(_.maxAmountOut.muln(re.percent).divn(100)),G.push(re.percent);const Q=(ce=this.getPoolAddressMapAndDirection(e[1][0],e[1][1]))==null?void 0:ce.addressMap.get(re.feeRate);C.push(Q)});const F=[],U=[],N=[];_.path.forEach(re=>{var ce;r?F.push(p.maxAmountOut.muln(re.percent).divn(100)):F.push(t.muln(c*this.splitUnit).divn(100).muln(re.percent).divn(100)),N.push(re.percent);const Q=(ce=this.getPoolAddressMapAndDirection(e[1][2],e[1][3]))==null?void 0:ce.addressMap.get(re.feeRate);U.push(Q)});const k=[],h=[],g=[];y.path.forEach(re=>{var ce;r?k.push(t.muln(d*this.splitUnit).divn(100).muln(re.percent).divn(100)):k.push(b.maxAmountOut.muln(re.percent).divn(100)),g.push(re.percent);const Q=(ce=this.getPoolAddressMapAndDirection(e[2][0],e[2][1]))==null?void 0:ce.addressMap.get(re.feeRate);h.push(Q)});const v=[],O=[],L=[];b.path.forEach(re=>{var ce;r?v.push(y.maxAmountOut.muln(re.percent).divn(100)):v.push(t.muln(d*this.splitUnit).divn(100).muln(re.percent).divn(100)),L.push(re.percent);const Q=(ce=this.getPoolAddressMapAndDirection(e[2][2],e[2][3]))==null?void 0:ce.addressMap.get(re.feeRate);O.push(Q)});const z=[],W=[],$=[],w=[];let H=we;if(r?H=f.maxAmountOut.add(_.maxAmountOut).add(b.maxAmountOut):H=l.maxAmountOut.add(p.maxAmountOut).add(y.maxAmountOut),H.gt(o)&&r||H.lt(o)&&!r){let re=we;B.forEach(j=>{re=re.add(j)});let Q=we;P.forEach(j=>{Q=Q.add(j)});let ce=we;k.forEach(j=>{ce=ce.add(j)});let Be=we;S.forEach(j=>{Be=Be.add(j)});let Ue=we;F.forEach(j=>{Ue=Ue.add(j)});let J=we;v.forEach(j=>{J=J.add(j)}),o=H,z.push(l.path),z.push(p.path),z.push(y.path),z.push([]),z.push(f.path),z.push(_.path),z.push(b.path),W.push(re.toString()),W.push(Q.toString()),W.push(ce.toString()),W.push(we.toString()),W.push(Be.toString()),W.push(Ue.toString()),W.push(J.toString()),$.push(x),$.push(G),$.push(g),$.push([]),$.push(R),$.push(N),$.push(L),w.push(E),w.push(C),w.push(h),w.push([]),w.push(T),w.push(U),w.push(O),s.maxAmountOut=H,s.path=z,s.percents=$,s.totalAmounts=W,s.poolAddresses=w}}return s.path.length||(s.isExceed=!0),s}findBestSplitPrice(e,t,n,r,i,s){var x,S,T,R;let o=e.length,a=!1;e[0].length===2&&(a=!0,o-=1);let c={maxAmountOut:we,path:[],poolAddresses:[],totalAmounts:[],percents:[],isExceed:!1},u={maxAmountOut:we,path:[],isExceed:!1};const d=[],l=[];let f=we;const p=[];switch(o){case 0:u=this.getBestSplitResultInOnePair(50,e[0][0],e[0][1],t,n[0][0],r),c.maxAmountOut=u.maxAmountOut,c.path.push(u.path),u.path.forEach(P=>{var F;const C=(F=this.getPoolAddressMapAndDirection(e[0][0],e[0][1]))==null?void 0:F.addressMap.get(P.feeRate);d.push(C);const G=t.muln(P.percent).divn(100);l.push(G),p.push(P.percent)}),l.forEach(P=>{f=f.add(P)}),c.percents.push(p),c.totalAmounts.push(f.toString()),c.poolAddresses.push(d);break;case 1:c=this.findBestSplitPriceWithOneSkip(e,t,n,r,a);break;case 2:c=this.findBestSplitPriceWithTwoSkip(e,t,n,r,a);break;case 3:c=this.findBestSplitPriceWithThreeSkip(e,t,n,r,a);break}if(c.isExceed)return c;const _=[];for(let P=0;P<c.path.length;P+=1){const{length:C}=c.path[P];_.push(C)}const y=[];if(o!==0)if(a){for(let C=1;C<1+o;C+=1){const G=[];if(_[C-1]>0)for(let F=0;F<_[C-1];F+=1)G.push(n[C][0]);y.push(G)}const P=[];for(let C=0;C<_[o];C+=1)if(_[o]>0)for(let G=0;G<_[o];G+=1)P.push(n[0][0]);y.push(P);for(let C=1;C<1+o;C+=1){const G=[];if(_[C+o]>0)for(let F=0;F<_[C+o];F+=1)G.push(n[C][1]);y.push(G)}}else{for(let P=0;P<o;P+=1){const C=[];if(_[P]>0)for(let G=0;G<_[P];G+=1)C.push(n[P][0]);y.push(C)}y.push([]);for(let P=0;P<o;P+=1){const C=[];if(_[P+o+1]>0)for(let G=0;G<_[P+o+1];G+=1)C.push(n[P][1]);y.push(C)}}else y.push([n[0][0]]);for(let P=0;P<c.poolAddresses.length;P+=1)for(let C=0;C<c.poolAddresses[P].length;C+=1){const G=this.getPoolDirection(c.poolAddresses[P][C]);G&&(y[P][C]=y[P][C]&&G)}const b=[],B=(x=this._coinSymbolMap.get(e[0][0]))==null?void 0:x.address;b.push(B);for(let P=0;P<e.length;P+=1)if(e[P].length!==2){const C=(S=this._coinSymbolMap.get(e[P][1]))==null?void 0:S.address;b.push(C)}if(e[0].length===2){const P=(T=this._coinSymbolMap.get(e[0][1]))==null?void 0:T.address;b.push(P)}else{const P=(R=this._coinSymbolMap.get(e[0][e[0].length-1]))==null?void 0:R.address;b.push(P)}const E=[];for(let P=0;P<c.path.length;P+=1){const C=[];for(let G=0;G<c.path[P].length;G+=1)C.push(c.path[P][G].amountOut);E.push(C)}return this.createTxParams={partitionQuantities:_,swapDirects:y,poolAddresses:c.poolAddresses,totalAmounts:c.totalAmounts,percents:c.percents,estAmountInOrOut:E,amountOut:t.toString(),partner:s,coinTypes:b,priceSplitPoint:i},c}findUnFetchPools(e){const t=[];for(const n of e)this.poolMap.get(n)==null&&t.push(n);return t}async refreshPoolofSwapRouter(e){var r,i,s;const t=Date.now();if(this.isInited){const o=this.findUnFetchPools(e);if(t-this.leastRefreshTime<_$&&o.length===0)return}else this.isInited=!0;const n=await this._sdk.Resources.getPools(e);for(let o=0;o<e.length;o+=1)if(this.poolMap.set(n[o].poolAddress,n[o]),this.getPoolDirection(n[o].poolAddress)==null){const a=(r=this._coinAddressMap.get(n[o].coinTypeA))==null?void 0:r.symbol,c=(i=this._coinAddressMap.get(n[o].coinTypeB))==null?void 0:i.symbol,u=(s=this.getPoolAddressMapAndDirection(a,c))==null?void 0:s.direction;this.poolDirectionMap.set(n[o].poolAddress,u);const d=await this._sdk.Pool.fetchTicksByRpc(n[o].ticks_handle),l=Db(d);this.ticksMap.set(n[o].poolAddress,l)}this.leastRefreshTime=t}async price(e,t,n,r,i,s){var y,b;const o=this.tokenInfo(e),a=this.tokenInfo(t);if(o===void 0||a===void 0)return;const c=this.graph.getVertexByKey(o.symbol),u=this.graph.getVertexByKey(a.symbol),d=this.graph.findAllPath(c,u),l=Array.from(d),f=[],p=[],_=[];for(let B=0;B<l.length;B+=1){const E=l[B];if(E.length>3)continue;const x=[],S=[];for(let T=0;T<E.length-1;T+=1){const R=E[T].value.toString(),P=E[T+1].value.toString(),C=(y=this.getPoolAddressMapAndDirection(R,P))==null?void 0:y.addressMap,G=(b=this.getPoolAddressMapAndDirection(R,P))==null?void 0:b.direction;C!==void 0&&G!==void 0&&(S.push(G),x.push(R),x.push(P),C.forEach(F=>{f.push(F)}))}if(_.push(S),p.push(x),x.length===2&&p.length>1){const T=p[0].slice();p[0]=x,p[p.length-1]=T;const R=_[0].slice();_[0]=S,_[p.length-1]=R}}return await this.refreshPoolofSwapRouter(f),this.findBestSplitPrice(p,n,_,r,i,s)}async splitOrRouterSwap(e,t,n,r,i,s){const o=await this.price(e,t,n,r,i,s);if(o.isExceed||o==null)return{maxAmountOut:o.maxAmountOut,path:o.path,poolAddresses:o.poolAddresses,percents:o.percents,totalAmounts:o.totalAmounts,isExceed:o.isExceed,totalPercents:[],showRouters:[],gasFee:0};const a=[];let c=we;o.totalAmounts.orEach(p=>{c=c.add(new I(p))}),o.totalAmounts.forEach(p=>{let _;c.isZero()?_=0:_=Number(p)/Number(c.toString())*100,a.push(_)});const u=[];for(let p=0;p<o.totalAmounts.length/2+1;p+=1){const _={amount:o.totalAmounts[p],poolAddress:[]};p===Math.floor(o.poolAddresses.length/2)?o.poolAddresses[p].length>0&&(_.poolAddress.push(o.poolAddresses[p]),u.unshift(_)):o.poolAddresses[p].length>0&&(_.poolAddress.push(o.poolAddresses[p],o.poolAddresses[p+Math.floor(o.poolAddresses.length/2)+1]),u.push(_))}const d=await this._sdk.Resources.getOwnerCoinAssets(this._sdk.senderAddress),l=Wt.buildRouterSwapTransaction(this.sdk,this.createTxParams,r,d),f=await Wt.calculationTxGas(this.sdk.fullClient,l);return{maxAmountOut:o.maxAmountOut,path:o.path,poolAddresses:o.poolAddresses,percents:o.percents,totalAmounts:o.totalAmounts,isExceed:o.isExceed,totalPercents:a,showRouters:u,gasFee:f}}},v$=class{constructor(e){Le(this,"_sdk");Le(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async preswap(e){var c;const{clmm:t,simulationAccount:n}=this.sdk.sdkOptions,r=new Ut,i=[e.coinTypeA,e.coinTypeB],s=[r.pure(e.pool.poolAddress),r.pure(e.a2b),r.pure(e.by_amount_in),r.pure(e.amount)];r.moveCall({target:`${t.clmm_router}::${Mb}::calculate_swap_result`,arguments:s,typeArguments:i});const a=(c=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:n.address})).events)==null?void 0:c.filter(u=>Et(u.type).name==="CalculatedSwapResultEvent");return a.length===0?null:this.transformSwapData(e,a[0].parsedJson.data)}transformSwapData(e,t){const n=$t.sqrtPriceX64ToPrice(new I(e.pool.current_sqrt_price),e.decimalsA,e.decimalsB).toNumber(),r=$t.sqrtPriceX64ToPrice(new I(t.after_sqrt_price),e.decimalsA,e.decimalsB).toNumber(),i=Math.abs(n-r)/n*100;return{estimatedAmountIn:t.amount_in&&t.fee_amount?new I(t.amount_in).add(new I(t.fee_amount)).toString():"",estimatedAmountOut:t.amount_out,estimatedEndSqrtPrice:t.after_sqrt_price,estimatedFeeAmount:t.fee_amount,isExceed:t.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.by_amount_in,priceImpactPct:i}}calculateRates(e){const{currentPool:t}=e,n=jb(t);let r;e.a2b?r=e.swapTicks.sort((l,f)=>f.index-l.index):r=e.swapTicks.sort((l,f)=>l.index-f.index);const i=r$(e.a2b,e.byAmountIn,e.amount,n,r);let s=!1;e.byAmountIn?(console.log(i.amountIn.toString(),e.amount.toString(),e.byAmountIn),s=i.amountIn.lt(e.amount)):(console.log(i.amountOut.toString(),e.amount.toString(),e.byAmountIn),s=i.amountOut.lt(e.amount));const o=Mc.getDefaultSqrtPriceLimit(e.a2b);e.a2b&&i.nextSqrtPrice.lt(o)&&(s=!0),!e.a2b&&i.nextSqrtPrice.gt(o)&&(s=!0);let a=0;i.crossTickNum>6&&i.crossTickNum<40&&(a=22e3*(i.crossTickNum-6)),i.crossTickNum>40&&(s=!0);const c=$t.sqrtPriceX64ToPrice(n.currentSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),u=$t.sqrtPriceX64ToPrice(i.nextSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),d=Math.abs(c-u)/c*100;return{estimatedAmountIn:i.amountIn,estimatedAmountOut:i.amountOut,estimatedEndSqrtPrice:i.nextSqrtPrice,estimatedFeeAmount:i.feeAmount,isExceed:s,extraComputeLimit:a,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn,priceImpactPct:d}}async createSwapTransactionPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=await this._sdk.Resources.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:r,isAdjustCoinB:i}=Hp(e);if(e.a2b&&r||!e.a2b&&i)return await Wt.buildSwapTransactionForGas(this._sdk,e,n,t)}return Wt.buildSwapTransaction(this.sdk,e,n)}},x$=5*60*1e3,$u=24*60*60*1e3;function iy(e){return Date.parse(new Date().toString())+e}var S$=class{constructor(e){Le(this,"_sdk");Le(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getAllRegisteredTokenList(e=!1){return await this.factchTokenList("",e)}async getOwnerTokenList(e="",t=!1){return await this.factchTokenList(e,t)}async getAllRegisteredPoolList(e=!1){return await this.factchPoolList("",e)}async getOwnerPoolList(e="",t=!1){return await this.factchPoolList(e,t)}async getWarpPoolList(e=!1){return await this.factchWarpPoolList("","",e)}async getOwnerWarpPoolList(e="",t="",n=!1){return await this.factchWarpPoolList(e,t,n)}async getTokenListByCoinTypes(e){const t={},n="getAllRegisteredTokenList",r=this.getCacheData(n);if(r!==null){const s=r;for(const o of e)for(const a of s)if(o===a.address){t[o]=a;continue}}const i=e.filter(s=>t[s]===void 0);for(const s of i){const o=`${s}_metadata`,a=this.getCacheData(o);if(a!==null)t[s]=a;else{const c=await this._sdk.fullClient.getCoinMetadata({coinType:s}),u={name:c.name,symbol:c.symbol,official_symbol:c.symbol,coingecko_id:"",decimals:c.decimals,project_url:"",logo_url:c.iconUrl,address:s};t[s]=u,this.updateCache(o,u,$u)}}return t}async factchTokenList(e="",t=!1){var u;const{simulationAccount:n,token:r}=this.sdk.sdkOptions,i="getAllRegisteredTokenList";if(!t){const d=this.getCacheData(i);if(d!==null)return d}const s=e.length>0,o=new Ut;o.moveCall({target:`${r.token_display}::coin_list::${s?"fetch_full_list":"fetch_all_registered_coin_info"}`,arguments:s?[o.pure(r.config.coin_registry_id),o.pure(e)]:[o.pure(r.config.coin_registry_id)]});const a=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:n.address}),c=[];return(u=a.events)==null||u.forEach(d=>{Et(d.type).full_address===`${r.token_display}::coin_list::FetchCoinListEvent`&&d.parsedJson.full_list.value_list.forEach(f=>{c.push(this.transformData(f,!1))})}),this.updateCache(i,c,$u),c}async factchPoolList(e="",t=!1){var f;const{simulationAccount:n,token:r}=this.sdk.sdkOptions,i="getAllRegisteredPoolList";if(!t){const p=this.getCacheData(i);if(p!==null)return p}const s=e.length>0,o=[],a=s?[r.config.pool_registry_id,e]:[r.config.pool_registry_id],c={packageObjectId:r.token_display,module:"lp_list",function:s?"fetch_full_list":"fetch_all_registered_coin_info",gasBudget:1e4,typeArguments:o,arguments:a};console.log("payload: ",c);const u=new Ut;u.moveCall({target:`${r.token_display}::lp_list::${s?"fetch_full_list":"fetch_all_registered_coin_info"}`,arguments:s?[u.pure(r.config.pool_registry_id),u.pure(e)]:[u.pure(r.config.pool_registry_id)]});const d=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:u,sender:n.address}),l=[];return(f=d.events)==null||f.forEach(p=>{Et(p.type).full_address===`${r.token_display}::lp_list::FetchPoolListEvent`&&p.parsedJson.full_list.value_list.forEach(y=>{l.push(this.transformData(y,!0))})}),this.updateCache(i,l,$u),l}async factchWarpPoolList(e="",t="",n=!1){const r=await this.factchPoolList(e,n);if(r.length===0)return[];const i=await this.factchTokenList(t,n),s=[];for(const o of r){for(const a of i)a.address===o.coin_a_address&&(o.coinA=a),a.address===o.coin_b_address&&(o.coinB=a);s.push(o)}return s}async getTokenConfigEvent(e=!1){const t=this._sdk.sdkOptions.token.token_display,n=`${t}_getTokenConfigEvent`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!e)return r.value;const i=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=Op(i),o=await this._sdk.fullClient.queryEvents({query:{Transaction:s}}),a={coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""};return o.data.length>0&&o.data.forEach(c=>{const u=Et(c.type);if(c.transactionModule==="coin_list")switch(u.name){case"InitListEvent":a.coin_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent":a.coin_registry_id=c.parsedJson.registry_id;break}else if(c.transactionModule==="lp_list")switch(u.name){case"InitListEvent<address>":a.pool_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent<address>":a.pool_registry_id=c.parsedJson.registry_id;break}}),a.coin_registry_id.length>0&&this.updateCache(n,a,$u),a}transformData(e,t){const n={...e};if(t?(n.coin_a_address=Et(n.coin_a_address).full_address,n.coin_b_address=Et(n.coin_b_address).full_address):n.address=Et(n.address).full_address,e.extensions){const r=e.extensions.contents;for(const i of r){const{key:s}=i;let{value:o}=i;if(s==="labels")try{o=JSON.parse(decodeURIComponent(A0.decode(o)))}catch{}n[s]=o}delete n.extensions}return n}updateCache(e,t,n=x$){let r=this._cache[e];r?(r.overdueTime=iy(n),r.value=t):r=new pf(t,iy(n)),this._cache[e]=r}getCacheData(e){const t=this._cache[e];return t!==void 0&&t.getCacheData()?t.value:null}},T$=5*60*1e3,Uu=24*60*60*1e3;function sy(e){return Date.parse(new Date().toString())+e}var A$=class{constructor(e){Le(this,"_sdk");Le(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){var a;const{xwhale:n}=this.sdk.sdkOptions,r=`${e}_getLockUpManagerEvent`,i=this._cache[r];if(!t&&i!==void 0&&i.getCacheData())return i.value;let s=null,o;for(;;){const c=await this._sdk.fullClient.getOwnedObjects({owner:e,options:{showType:!0,showContent:!0,showDisplay:!0},cursor:s});if((a=c.data)==null||a.forEach(u=>{const d=Et(po(u)).source_address;if(d===`${n.xwhale_display}::xwhale::VeNFT`&&u.data&&u.data.content){const{fields:l}=u.data.content;o={...qb(u),id:l.id.id,index:l.index,type:d,xwhale_balance:l.xwhale_balance},this.updateCache(r,o,Uu)}}),c.hasNextPage)s=c.nextCursor;else break}return o}async getOwnerLockWhales(e){const{xwhale:t}=this.sdk.sdkOptions,n=[];let r=null;for(;;){const i=(await this._sdk.fullClient.getOwnedObjects({owner:e,options:{showType:!0,showContent:!0},cursor:r})).data;for(const s of i)if(Et(po(s)).source_address===`${t.xwhale_display}::lock_coin::LockedCoin<${this.buileWhaleCoinType()}>`&&s.data){const a=Jo.buildLockWhale(s.data.content);a.xwhale_amount=await this.reverseRedeemNum(a.whale_amount,a.lock_day),n.push(a)}if(i.hasNextPage)r=i.nextCursor;else break}return n}async getLockWhale(e){var n;const t=await this._sdk.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((n=t.data)!=null&&n.content){const r=Jo.buildLockWhale(t.data.content);return r.xwhale_amount=await this.reverseRedeemNum(r.whale_amount,r.lock_day),r}}async getOwnerWhaleCoins(e){return await this._sdk.Resources.getOwnerCoinAssets(e,this.buileWhaleCoinType())}mintVeNFTPayload(){const{xwhale:e}=this.sdk.sdkOptions,t=new Ut;return t.setGasBudget(this._sdk.gasConfig.GasBudgetLow),t.moveCall({target:`${e.xwhale_router}::${Do}::mint_venft`,typeArguments:[],arguments:[t.pure(e.config.xwhale_manager_id)]}),t}async convertPayload(e){const{xwhale:t}=this.sdk.sdkOptions,n=new Ut,r=this.buileWhaleCoinType(),i=await Wt.syncBuildCoinInputForAmount(this._sdk,n,BigInt(e.amount),r);return e.venft_id===void 0?(n.setGasBudget(this._sdk.gasConfig.GasBudgetHigh),n.moveCall({target:`${t.xwhale_router}::${Do}::mint_and_convert`,typeArguments:[r],arguments:[n.object(t.config.lock_manager_id),n.object(t.config.xwhale_manager_id),i,n.pure(e.amount)]})):(n.setGasBudget(this._sdk.gasConfig.GasBudgetLow),n.moveCall({target:`${t.xwhale_router}::${Do}::convert`,typeArguments:[r],arguments:[n.object(t.config.lock_manager_id),n.object(t.config.xwhale_manager_id),i,n.pure(e.amount),n.pure(e.venft_id)]})),n}redeemLockPayload(e){const{xwhale:t}=this.sdk.sdkOptions,n=new Ut;return n.setGasBudget(this._sdk.gasConfig.GasBudgetLow),n.moveCall({target:`${t.xwhale_router}::${Do}::redeem_lock`,typeArguments:[this.buileWhaleCoinType()],arguments:[n.pure(t.config.lock_manager_id),n.pure(t.config.xwhale_manager_id),n.pure(e.venft_id),n.pure(e.amount),n.pure(e.lock_day),n.pure(qt)]}),n}redeemPayload(e){const{xwhale:t}=this.sdk.sdkOptions,n=new Ut;return n.setGasBudget(this._sdk.gasConfig.GasBudgetLow),n.moveCall({target:`${t.xwhale_router}::${Do}::redeem`,typeArguments:[this.buileWhaleCoinType()],arguments:[n.pure(t.config.lock_manager_id),n.pure(t.config.xwhale_manager_id),n.pure(e.venft_id),n.pure(e.lock_id),n.pure(qt)]}),n}redeemDividendPayload(e,t){const{xwhale:n}=this.sdk.sdkOptions,r=new Ut;return r.setGasBudget(this._sdk.gasConfig.GasBudgetLow),t.forEach(i=>{r.moveCall({target:`${n.dividends_router}::${FC}::redeem`,typeArguments:[i],arguments:[r.object(n.config.dividend_manager_id),r.object(e)]})}),r}buileWhaleCoinType(){return`${this.sdk.sdkOptions.xwhale.whale_faucet}::cetus::CETUS`}cancelRedeemPayload(e){const{xwhale:t}=this.sdk.sdkOptions,n=new Ut;return n.setGasBudget(this._sdk.gasConfig.GasBudgetLow),n.moveCall({target:`${t.xwhale_router}::${Do}::cancel_redeem_lock`,typeArguments:[this.buileWhaleCoinType()],arguments:[n.pure(t.config.lock_manager_id),n.pure(t.config.xwhale_manager_id),n.pure(e.venft_id),n.pure(e.lock_id),n.pure(qt)]}),n}async getInitFactoryEvent(){const{xwhale_display:e}=this.sdk.sdkOptions.xwhale,t=(await this._sdk.fullClient.queryEvents({query:{MoveEventType:`${e}::xwhale::InitEvent`}})).data,n={xwhale_manager_id:""};return t.length>0&&t.forEach(r=>{const i=r.parsedJson;i&&(n.xwhale_manager_id=i.xwhale_manager)}),n}async getLockUpManagerEvent(){const{xwhale_display:e}=this.sdk.sdkOptions.xwhale,t=`${e}_getLockUpManagerEvent`,n=this._cache[t];if(n!==void 0&&n.getCacheData())return n.value;const r=(await this._sdk.fullClient.queryEvents({query:{MoveEventType:`${e}::locking::InitializeEvent`}})).data,i={lock_manager_id:"",max_lock_day:0,max_percent_numerator:0,min_lock_day:0,min_percent_numerator:0};return r.length>0&&r.forEach(s=>{const o=s.parsedJson;o&&(i.lock_manager_id=o.lock_manager,i.max_lock_day=Number(o.max_lock_day),i.max_percent_numerator=Number(o.max_percent_numerator),i.min_lock_day=Number(o.min_lock_day),i.min_percent_numerator=Number(o.min_percent_numerator),this.updateCache(t,i,Uu))}),i}async getDividendManagerEvent(){const{dividends_display:e}=this.sdk.sdkOptions.xwhale,t=`${e}_getDividendManagerEvent`,n=this._cache[t];if(n!==void 0&&n.getCacheData())return n.value;const r=(await this._sdk.fullClient.queryEvents({query:{MoveEventType:`${e}::dividend::InitializeEvent`}})).data,i={dividend_manager_id:""};return r.length>0&&r.forEach(s=>{const o=s.parsedJson;o&&(i.dividend_manager_id=o.manager_id,this.updateCache(t,i,Uu))}),i}async getDividendManager(e=!1){const{dividend_manager_id:t}=this.sdk.sdkOptions.xwhale.config,n=`${t}_getDividendManager`,r=this._cache[n];if(!e&&r!==void 0&&r.getCacheData())return r.value;const i=await this._sdk.fullClient.getObject({id:t,options:{showContent:!0}}),s=gi(i),o=Jo.buildDividendManager(s);return this.updateCache(n,o,Uu),o}async getXwhaleManager(){const{xwhale:e}=this.sdk.sdkOptions,t=await this._sdk.fullClient.getObject({id:e.config.xwhale_manager_id,options:{showContent:!0}}),n=gi(t);return{id:n.id.id,index:Number(n.index),has_venft:{handle:n.has_venft.fields.id.id,size:n.has_venft.fields.size},nfts:{handle:n.nfts.fields.id.id,size:n.nfts.fields.size},total_locked:n.total_locked,treasury:n.treasury.fields.total_supply.fields.value}}async getVeNFTDividendInfo(e,t){try{const n=await this._sdk.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),r=gi(n);return Jo.buildVeNFTDividendInfo(r)}catch{return}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:0};const n=await this.getLockUpManagerEvent();if(n.max_lock_day===n.min_lock_day)return{amountOut:me(e).mul(me(Cu)).div(me(n.min_percent_numerator)).div(bs).toString(),percent:0};const r=me(bs).mul(me(n.max_lock_day).sub(me(t))).mul(me(n.max_percent_numerator).sub(me(n.min_percent_numerator))).div(me(n.max_lock_day).sub(me(n.min_lock_day))),i=me(bs).mul(me(n.max_percent_numerator)).sub(r).div(me(Cu)).div(bs);return{amountOut:i.mul(me(e)).round().toString(),percent:Number(i.toFixed(2))}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return"0";const n=await this.getLockUpManagerEvent();if(n.max_lock_day===n.min_lock_day)return me(e).mul(bs).mul(me(n.min_percent_numerator)).div(me(Cu)).toString();const r=me(bs).mul(me(n.max_lock_day).sub(me(t))).mul(me(n.max_percent_numerator).sub(me(n.min_percent_numerator))).div(me(n.max_lock_day).sub(me(n.min_lock_day))),i=me(bs).mul(n.max_percent_numerator).sub(r);return me(e).mul(bs).mul(Cu).div(i).toFixed(0,Fe.ROUND_UP)}updateCache(e,t,n=T$){let r=this._cache[e];r?(r.overdueTime=sy(n),r.value=t):r=new pf(t,sy(n)),this._cache[e]=r}},oy=class{constructor(e){Le(this,"_fullClient");Le(this,"_pool");Le(this,"_position");Le(this,"_swap");Le(this,"_resources");Le(this,"_rewarder");Le(this,"_router");Le(this,"_token");Le(this,"_sdkOptions");Le(this,"_launchpad");Le(this,"_xwhaleModule");Le(this,"_senderAddress","");Le(this,"_gasConfig");this._sdkOptions=e,this._fullClient=new PC(new hf({fullnode:e.fullRpcUrl,faucet:e.faucetURL})),this._swap=new v$(this),this._resources=new y$(this),this._pool=new h$(this),this._position=new p$(this),this._rewarder=new m$(this),this._router=new b$(this),this._token=new S$(this),this._launchpad=new f$(this),this._xwhaleModule=new A$(this),this._gasConfig=new Nb(1)}get senderAddress(){return this._senderAddress}set senderAddress(e){this._senderAddress=e}set gasConfig(e){this._gasConfig=e}get gasConfig(){return this._gasConfig}get Swap(){return this._swap}get fullClient(){return this._fullClient}get Resources(){return this._resources}get sdkOptions(){return this._sdkOptions}get Pool(){return this._pool}get Position(){return this._position}get Rewarder(){return this._rewarder}get Router(){return this._router}get Token(){return this._token}get Launchpad(){return this._launchpad}get XWhaleModule(){return this._xwhaleModule}};function E$(e){const t={gasConfig:new Nb(1.1),fullRpcUrl:localStorage.getItem(`${e}-current-rpc`)||ct[e||"Sui"].fullRpcUrl,faucetURL:localStorage.getItem(`${e}-current-rpc`)||ct[e||"Sui"].faucetURL,faucet_router:ct[e||"Sui"].faucet_router,simulationAccount:ct[e||"Sui"].simulationAccount,token:ct[e||"Sui"].token,clmm:ct[e||"Sui"].clmm,launchpad:ct[e||"Sui"].launchpad,xwhale:ct[e||"Sui"].xwhale},n=ay(new oy(t)),r=zw(),i=o0(()=>r),s=cy(),o=o0(()=>s);Xb(()=>{i.value.address&&(n.senderAddress=i.value.address,n.gasConfig=t.gasConfig)});const{$notify:a}=Yo(),c=j=>{const{$notify:K}=Yo();K.success({key:j.hash+"loading",icon:_t("img",{class:{"notify-icon":!0,"loading-animate":!0},src:o.value.theme=="default"?"/image/img-loading@2x.png":"/sui-image/img-loading.png"}),message:_t("div",{class:"notification-title"},[_t("span",{innerHTML:j.title},null)]),description:_t("div",{class:"notification-title"},[_t("div",{class:"notification-text",innerHTML:Rr.global.t("newAdd.confirmingTransaction")},null),_t("a",{href:`https://explorer.sui.io/transaction/${window.encodeURIComponent(j.hash)}?network=${ct[e||"Sui"].network}`,target:"_blank",innerHTML:Rr.global.t("common.viewTransaction")},null)]),duration:0,class:"ant-notification-copy ant-notification-swap"})},u=j=>{a.success({icon:_t("svg",{class:{icon:!0},"aria-hidden":!0},[_t("use",{"xlink:href":"#icon-icon-change1"})]),message:_t("div",{class:"notification-title"},[_t("span",{innerHTML:`${j.title} `+Rr.global.t("newAdd.success")},null)]),description:_t("div",{class:"notification-title"},[_t("div",{class:"notification-text",innerHTML:j.desc},null),_t("a",{href:`https://explorer.sui.io/transaction/${window.encodeURIComponent(j.hash)}?network=${ct[e||"Sui"].network}`,target:"_blank",innerHTML:Rr.global.t("common.viewTransaction")},null)]),duration:4.5,class:"ant-notification-copy ant-notification-swap"})},d=j=>{a.error({icon:_t("svg",{class:{icon:!0},"aria-hidden":!0},[_t("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:_t("div",{class:"notification-title"},[_t("span",{innerHTML:`${j} `+Rr.global.t("newAdd.failed")},null)]),description:Rr.global.t("newAdd.somethingWrong"),duration:4.5,class:"ant-notification-copy ant-notification-error"})},l=async(j,K=!1)=>{var ne,ue,le;const{$notify:Y}=Yo();try{let fe={};if(j.res)fe=j.res;else{const _e=await gc(2e3);fe=await n.Resources.getSuiTransactionResponse(j.hash)}if(((ue=(ne=fe==null?void 0:fe.effects)==null?void 0:ne.status)==null?void 0:ue.status)==="success"){Y.close(j.hash+"loading"),u(j);const _e={walletAddress:r.address,chainName:"Sui",...j,...fe,date:new Date().getTime()+6048e5};if(s.setTransactionList(_e),K)if(fe.events){const Ne=fe.events.filter(Ee=>Ee.type.includes("OpenPositionEvent"));return{status:!0,nftInfo:Ne[0]&&((le=Ne[0])==null?void 0:le.parsedJson)}}else return{status:!0,nftInfo:fe.effects.events};return!0}else{if(fe&&fe.effects&&fe.effects.status&&fe.effects.status.status!=="success")return Y.close(j.hash+"loading"),d(j.title),!1;setTimeout(()=>l(j),3e3)}}catch{return Y.close(j.hash+"loading"),Y.error({icon:_t("svg",{class:{icon:!0},"aria-hidden":!0},[_t("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:_t("div",{class:"notification-title"},[_t("span",{innerHTML:`${j.title} Failed`},null)]),duration:4.5,description:"Something went wrong",class:"ant-notification-copy ant-notification-error"}),!0}},f=async(j,K=!1)=>{var ne,ue;await gc(2e3);const Y=await n.Resources.getSuiTransactionResponse(j.hash);if(((ue=(ne=Y==null?void 0:Y.effects)==null?void 0:ne.status)==null?void 0:ue.status)==="success"){a.close(j.hash+"loading"),u(j);const le={walletAddress:r.address,chainName:"Sui",...j,...Y,date:new Date().getTime()+6048e5};s.setTransactionList(le)}},p=async(j,K)=>{var le,fe,_e,ke,Ne,Ee,He;const Y=i.value.assets[j];if(!Y)return[];const ne=Y.objects.filter(Ge=>Ge.balance&&Ge.balance!=="0"),ue=ne.reduce((Ge,Ie)=>Number(Ge.balance)<Number(Ie.balance)?Ie:Ge);if(me(K).lte(me(ue.balance))&&ne.length>1)return[ue==null?void 0:ue.coinObjectId];{const Ge=[];if(j==="0x2::sui::SUI"){const Ie=ne.sort((xt,Ke)=>Number(xt.balance)-Number(Ke.balance));let ze=me(0);for(let xt=0;xt<Ie.length;xt++){const Ke=Ie[xt];if(ze.lte(me(K)))Ge.push((_e=(fe=(le=Ke==null?void 0:Ke.data)==null?void 0:le.fields)==null?void 0:fe.id)==null?void 0:_e.id),ze=ze.plus(me(Ke.balance));else break}return Ge.length===Ie.length&&await _((He=(Ee=(Ne=(ke=Ie[Ie.length-1])==null?void 0:ke.data)==null?void 0:Ne.fields)==null?void 0:Ee.id)==null?void 0:He.id,Ie[Ie.length-1].balance),Ge}else return ne.forEach(Ie=>{Ge.push(Ie==null?void 0:Ie.coinObjectId)}),Ge}},_=async(j,K)=>{var ue;const Y={kind:"transferSui",data:{suiObjectId:j,gasBudget:1e3,recipient:i.value.address,amount:5e4}},ne=new Ut;ne.moveCall({target:`${ct[e||"Sui"].faucet_router}::${info.transactionModule}::faucet`,typeArguments:[],arguments:[ne.pure(info.suplyID)]});try{const le=await i.value.currentWallet.signAndExecuteTransactionBlock(Y),fe=(ue=le==null?void 0:le.effects)==null?void 0:ue.events;for(let _e=0;_e<fe.length;_e++)if(fe[_e].coinBalanceChange.changeType==="Receive"&&fe[_e].coinBalanceChange.amount===5e4)return fe[_e].coinBalanceChange.coinObjectId;return""}catch{}return[]},y=async(j,K,Y)=>{var fe,_e,ke,Ne,Ee,He,Ge,Ie,ze,xt,Ke,bt,yn,lt,Ct,Fr,Ft,Xt,oi,Zt,nn,xi;const ne=i.value.address;let ue={};j!=="0x2::sui::SUI"?ue={kind:"pay",data:{inputCoins:K,recipients:[ne],amounts:[Number(Y)],gasBudget:1e5}}:ue={kind:"payAllSui",data:{inputCoins:K,recipient:ne,gasBudget:1e3}};const le=await i.value.currentWallet.signAndExecuteTransaction(ue);if(((_e=(fe=le==null?void 0:le.effects)==null?void 0:fe.status)==null?void 0:_e.status)==="success"||((He=(Ee=(Ne=(ke=le==null?void 0:le.EffectsCert)==null?void 0:ke.effects)==null?void 0:Ne.effects)==null?void 0:Ee.status)==null?void 0:He.status)==="success")if(j!=="0x2::sui::SUI"){const jt=((ze=(Ie=(Ge=le==null?void 0:le.effects)==null?void 0:Ge.created[0])==null?void 0:Ie.reference)==null?void 0:ze.objectId)||((lt=(yn=(bt=(Ke=(xt=le==null?void 0:le.EffectsCert)==null?void 0:xt.effects)==null?void 0:Ke.effects)==null?void 0:bt.created[0])==null?void 0:yn.reference)==null?void 0:lt.objectId);if(jt)return jt}else{const jt=((Ft=(Fr=(Ct=le==null?void 0:le.effects)==null?void 0:Ct.mutated[0])==null?void 0:Fr.reference)==null?void 0:Ft.objectId)||((xi=(nn=(Zt=(oi=(Xt=le==null?void 0:le.EffectsCert)==null?void 0:Xt.effects)==null?void 0:oi.effects)==null?void 0:Zt.mutated[0])==null?void 0:nn.reference)==null?void 0:xi.objectId);if(jt)return jt}else{d("MergeCoin Error");return}},b=async j=>{try{r.setLoading(!0);const K=await n.Resources.getOwnerCoinAssets(j),Y={};return K.forEach(ne=>{var ue,le;if(ne&&ne.coinAddress){const fe=ne?ne.balance.toString():"0",_e={...ne,balance:fe};Y[ne.coinAddress]={...ne,balance:(ue=Y[ne.coinAddress])!=null&&ue.balance?me(fe).plus(Y[ne.coinAddress].balance).toString():fe,objects:(le=Y[ne.coinAddress])!=null&&le.objects?[...Y[ne.coinAddress].objects,_e]:[_e]}}}),r.setAssets(Y),r.setLoading(!1),Y}catch{r.setLoading(!1)}},B=async()=>await n.Token.getAllRegisteredTokenList(),E=async()=>{var j;try{const K=await n.Token.getOwnerWarpPoolList(ct[e||"Sui"].token.config.pool_list_owner,ct[e||"Sui"].token.config.coin_list_owner),ne=(await fetch(`${ct[e||"Sui"].api}/v2/sui/swap/count`).then(fe=>fe.json())).data,ue=Object.fromEntries(ne.pools.map(fe=>[fe.swap_account,fe])),le=[];for(let fe=0;fe<K.length;fe++){const _e=K[fe];if(_e.coinA&&ue[_e.address]){const ke=((j=ue[_e.address])==null?void 0:j.is_forward)===!1;le.push({..._e,needReverse:ke})}}return le}catch{}},x=async(j=[])=>{const K=await n.Resources.getPools(j);if(j.length===0){const Y={};return K.forEach(ne=>{Y[ne.poolAddress]={...ne,rate:me(ne.fee_rate).div(Math.pow(10,6)).toString()}}),Y}else return K},S=async j=>await n.Resources.getPool(j);return{setTransations:f,showTransitionPending:c,showTransitionSuccess:u,showTransitionError:d,watchTransaction:l,getCoinId:p,mergeCoinObject:y,getAccount:b,getTokenList:B,getLpList:E,getPools:x,getPool:S,mintCoin:j=>{const K=new Ut;return K.moveCall({target:`${ct[e||"Sui"].faucet_router}::${j.transactionModule}::faucet`,typeArguments:[],arguments:[K.pure(j.suplyID)]}),K.setGasBudget(2e7),{transactionBlock:K,options:{showEffects:!0}}},handleTx:j=>{var Y,ne;let K;return j!=null&&j.digest&&(K={hash:j==null?void 0:j.digest,status:(ne=(Y=j==null?void 0:j.effects)==null?void 0:Y.status)==null?void 0:ne.status,res:j}),K},TickUtil:r0,TickMath:$t,getNearestTickByTick:i0,getTicks:async j=>{try{return await n.Pool.fetchTicks({pool_id:j.poolAddress,coinTypeA:j.coinTypeA,coinTypeB:j.coinTypeB})}catch{}},getEstPositionAPRWithMulti:async(j,K,Y,ne)=>await e$(j,K,Y,ne),getCoinAmountFromLiquidity:j=>{const{pool:K,position:Y,roundUp:ne}=j,ue=Number(Y.tick_lower_index),le=Number(Y.tick_upper_index),fe=$t.tickIndexToSqrtPriceX64(ue),_e=$t.tickIndexToSqrtPriceX64(le),ke=Js.getCoinAmountFromLiquidity(new I(Y.liquidity),new I(K.current_sqrt_price),fe,_e,ne),Ne=fr(ke.coinA.toString(),K.coinA.decimals),Ee=fr(ke.coinB.toString(),K.coinB.decimals);return{coinaAmount:Ne,coinbAmount:Ee}},estLiquidityAndcoinAmountFromOneAmounts:j=>{const{tokenA:K,tokenB:Y,lowerTick:ne,upperTick:ue,coinAmount:le,iscoinA:fe,roundUp:_e,slippage:ke,curSqrtPrice:Ne}=j,Ee=Js.estLiquidityAndcoinAmountFromOneAmounts(ne,ue,le,fe,_e,ke,Ne),He=K.decimals,Ge=Y.decimals,{tokenMaxA:Ie,tokenMaxB:ze,liquidityAmount:xt}=Ee;return{tokenMaxAOrigin:Ie.toString(),tokenMaxBOrigin:ze.toString(),tokenMaxA:fr(Ie.toString(),He),tokenMaxB:fr(ze.toString(),Ge),liquidityAmount:xt}},getAddLiquidityTransactionPayload:async j=>{const{pool:K,amount:Y,fix_amount_a:ne,roundUp:ue,tick_lower:le,tick_upper:fe,index:_e,slippage:ke}=j,Ne=await S(K.poolAddress),Ee=ne?hr(Y,K.token_a.decimals):hr(Y,K.token_b.decimals),He=$t.sqrtPriceX64ToTickIndex(new I(Ne.current_sqrt_price));let Ge,Ie;if(He>le&&He<fe){const xt=Js.estLiquidityAndcoinAmountFromOneAmounts(le,fe,new I(Ee.toString()),ne,ue,ke,new I(Ne.current_sqrt_price));Ge=ne?Ee.toNumber():xt.tokenMaxA.toNumber(),Ie=ne?xt.tokenMaxB.toNumber():Ee.toNumber()}else He>=fe?(Ge=0,Ie=Ee.toNumber()):He<=le&&(Ge=Ee.toNumber(),Ie=0);return{transactionBlock:await n.Position.createAddLiquidityTransactionPayload({coinTypeA:K.token_a.address,coinTypeB:K.token_b.address,pool_id:K.poolAddress,tick_lower:le,tick_upper:fe,fix_amount_a:ne,amount_a:Ge,amount_b:Ie,is_open:!_e,pos_id:_e}),options:{showEffects:!0,showEvents:!0}}},getTickDataFromUrlData:Db,getPriceImpactPct:(j,K,Y)=>{const ne=$t.sqrtPriceX64ToPrice(new I(j.current_sqrt_price),j.coinA.decimals,j.coinB.decimals).toNumber(),ue=Y?ne:1/ne,le=Math.abs(ue-Number(K))/Number(K)*100;return Number(In(le,2))},preSwap:async j=>{const{pool:K,a2b:Y,byAmountIn:ne,amount:ue}=j,le=K.coinA.decimals,fe=K.coinB.decimals,_e=K!=null&&K.current_sqrt_price?K:await S(K.address);let ke;Y&&ne||!Y&&!ne?ke=hr(ue,le):ke=hr(ue,fe);const Ne=await n.Swap.preswap({pool:_e,current_sqrt_price:_e.current_sqrt_price,coinTypeA:_e.coinTypeA,coinTypeB:_e.coinTypeB,decimalsA:le,decimalsB:fe,a2b:Y,by_amount_in:ne,amount:ke.toString()});return{...Ne,estimatedAmountIn:fo(fr(Ne.estimatedAmountIn.toString(),Y?le:fe),Y?le:fe),estimatedAmountOut:fo(fr(Ne.estimatedAmountOut.toString(),Y?fe:le),Y?fe:le),priceImpactPct:In(Ne.priceImpactPct,2)}},getSwapTransactionPayload:async j=>{const{pool:K,a2b:Y,byAmountIn:ne,amount:ue,slippage:le}=j,fe=K.poolAddress,_e=K.token_a.decimals,ke=K.token_b.decimals;let Ne;Y&&ne||!Y&&!ne?Ne=hr(ue,_e):Ne=hr(ue,ke);const Ee=await n.Swap.preswap({pool:K,current_sqrt_price:K.current_sqrt_price,coinTypeA:K.coinTypeA,coinTypeB:K.coinTypeB,decimalsA:_e,decimalsB:ke,a2b:Y,by_amount_in:ne,amount:Ne.toString()}),He=me(Ee.estimatedAmountOut.toString()),Ge=me(Ee.estimatedAmountIn.toString()),Ie=ne?He.sub(He.mul(le)):Ge.add(Ge.mul(le));return{transactionBlock:await n.Swap.createSwapTransactionPayload({pool_id:fe,a2b:Ee.aToB,by_amount_in:Ee.byAmountIn,amount:Ee.amount.toString(),amount_limit:In(Ie.toString(),0)||"",coinTypeA:K.token_a.address,coinTypeB:K.token_b.address}),options:{showEffects:!0}}},getPositionList:async(j,K)=>{const Y=Object.values(K).map(ue=>ue.poolAddress);return await n.Resources.getPositionList(j,Y)},getTickDataByIndex:async(j,K)=>await n.Pool.getTickDataByIndex(j,K),getCollectFeesQuote:async j=>{const{pool:K,position:Y,tickLowerData:ne,tickUpperData:ue}=j,le=await S(K.poolAddress),fe=o$({clmmpool:le,position:Y,tickLower:ne,tickUpper:ue}),_e=fr(fe.feeOwedA.toString(),K.token_a.decimals),ke=fr(fe.feeOwedB.toString(),K.token_b.decimals);return{feeOwedA:Number(_e)>99999999999||Number(_e)<0?"0":_e,feeOwedB:Number(ke)>99999999999||Number(ke)<0?"0":ke}},getPosRewardersAmount:async j=>{const{poolAddress:K,pos:Y,positionHandle:ne}=j;return await n.Rewarder.posRewardersAmount(K,ne,Y)},getNftHash:j=>j.pos_object_id,getPositionInfo:async(j,K,Y,ne="")=>({...await new oy(t).Resources.getPosition(j.positions_handle,ne),tokenName:Y,collectionName:K}),getRemoveLiquidityTransactionPayload:async j=>{const{pool:K,coinTypeA:Y,coinTypeB:ne,coinTypeC:ue,coinTypeD:le,coinTypeE:fe,position:_e,delta_liquidity:ke,rewards_num:Ne}=j,Ee=await S(K.poolAddress),He={...K,...Ee},Ge=Number(_e.tick_lower_index),Ie=Number(_e.tick_upper_index),ze=$t.tickIndexToSqrtPriceX64(Ge),xt=$t.tickIndexToSqrtPriceX64(Ie),Ke=Js.getCoinAmountFromLiquidity(ke,new I(He.current_sqrt_price),ze,xt,!0),bt=me(Ke.coinA.toString()).mul(me(1-j.slippage)),yn=me(Ke.coinB.toString()).mul(me(1-j.slippage));let lt;if(ke.toString()===_e.liquidity){const Ct=[];ue&&Ct.push(ue),le&&Ct.push(le),fe&&Ct.push(fe),lt=await n.Position.closePositionTransactionPayload({coinTypeA:Y,coinTypeB:ne,min_amount_a:In(bt.toString(),0),min_amount_b:In(yn.toString(),0),rewarder_coin_types:[...Ct],pool_id:K.poolAddress,pos_id:j.position.pos_object_id})}else lt=await n.Position.removeLiquidityTransactionPayload({coinTypeA:Y,coinTypeB:ne,delta_liquidity:ke.toString(),min_amount_a:In(bt.toString(),0),min_amount_b:In(yn.toString(),0),pool_id:K.poolAddress,pos_id:j.position.pos_object_id,collect_fee:!0});return{transactionBlock:lt,options:{showEffects:!0,showEvents:!0}}},getCollectRewarderTransactionPayload:async j=>{const K=[];return j.coinTypeC&&K.push(j.coinTypeC),j.coinTypeD&&K.push(j.coinTypeD),j.coinTypeE&&K.push(j.coinTypeE),{transactionBlock:await n.Rewarder.collectRewarderTransactionPayload({pool_id:j.pool_address,pos_id:j.pos_index,rewarder_coin_types:[...K],coinTypeA:j.coinTypeA,coinTypeB:j.coinTypeB,collect_fee:!1}),options:{showEffects:!0,showEvents:!0}}},getCollectFeeTransactionPayload:async j=>({transactionBlock:await n.Position.collectFeeTransactionPayload({coinTypeA:j.pool.token_a.address,coinTypeB:j.pool.token_b.address,pool_id:j.pool.poolAddress,pos_id:j.position.pos_object_id}),options:{showEffects:!0,showEvents:!0}}),getTokenListByCoinType:async()=>[],getPoolImmutables:async()=>await n.Resources.getPoolImmutables(),estimateLiquidityForCoinA:dc,estimateLiquidityForCoinB:fc,getCreatPoolTransactionPayload:async j=>{const{coinTypeA:K,coinTypeB:Y,decimalsA:ne,decimalsB:ue,amountA:le,amountB:fe,minPrice:_e,maxPrice:ke,fix_amount_a:Ne,tick_spacing:Ee,slippage:He,price:Ge}=j,Ie=$t.priceToSqrtPriceX64(me(Ge),ne,ue),ze=$t.priceToTickIndex(me(Ge),ne,ue,Ee);let xt,Ke;if(_e==="0"&&ke==="")xt=r0.getMinIndex(Number(Ee)),Ke=r0.getMaxIndex(Number(Ee));else{const Ft=Number(_e)==0?-443630:$t.priceToTickIndex(me(_e),ne,ue),Xt=$t.priceToTickIndex(me(ke),ne,ue);xt=i0(Ft,Number(Ee)),Ke=i0(Xt,Number(Ee))}const bt=Ne?hr(le,ne):hr(fe,ue);let yn,lt;$t.tickIndexToSqrtPriceX64(xt),$t.tickIndexToSqrtPriceX64(Ke);let Ct;return ze>xt&&ze<Ke?(Ct=Js.estLiquidityAndcoinAmountFromOneAmounts(xt,Ke,new I(bt.toString()),Ne,!0,He,Ie),yn=Ne?bt.toString():Ct.tokenMaxA.toString(),lt=Ne?Ct.tokenMaxB.toString():bt.toString()):ze>=Ke?(yn="0",lt=me(fe).mul(me(Math.pow(10,ue))).toString()):ze<=xt&&(yn=me(le).mul(me(Math.pow(10,ne))).toString(),lt="0"),{transactionBlock:await n.Pool.creatPoolTransactionPayload({tick_spacing:Ee,initialize_sqrt_price:Ie.toString(),uri:"",fix_amount_a:Ne,amount_a:yn,amount_b:lt,tick_lower:xt,tick_upper:Ke,coinTypeA:K,coinTypeB:Y}),options:{showEffects:!0,showEvents:!0}}},getTokenListByCoinTypes:async j=>{try{const K=await n.Token.getTokenListByCoinTypes([j]);return Object.values(K)}catch{return[]}},getIsSortedSymbols:(j,K)=>!!Hl(un(j),un(K)),getPositionById:async j=>await n.Resources.getPositionById(j),d:me}}function Ai(e){let t={};return!e||e==="Aptos"?t=Bk():t=E$(e),{...t}}const Hi="0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",k$=[{base_symbol:`${Hi}::btc::BTC`,price:"175181.584616",quote_symbol:"USD"},{base_symbol:`${Hi}::eth::ETH`,price:"1471.343485",quote_symbol:"USD"},{base_symbol:`${Hi}::usdc::USDC`,price:"0.998772",quote_symbol:"USD"},{base_symbol:`${Hi}::usdt::USDT`,price:"0.949513",quote_symbol:"USD"},{base_symbol:`${Hi}::busd::BUSD`,price:"1",quote_symbol:"USD"},{base_symbol:"0x2::sui::SUI",price:"1",quote_symbol:"USD"}],Sq=[{symbol:"USDT",name:"CetusUSDT",num:"200",amount:"200000000",transactionModule:"usdt",address:`${Hi}::usdt::USDT`,suplyID:"0xe1f4bdaa469a0930e7dd6e6f7438ed6a72b2d4085d2f6c20d97213d8f4dd861c",decimals:6},{symbol:"USDC",name:"CetusUSDC",num:"200",amount:"200000000",transactionModule:"usdc",address:`${Hi}::usdc::USDC`,suplyID:"0xf9db65a36b991de2864b27c0b636800236e31087a7299ded025b2068751b744d",decimals:6},{symbol:"ETH",name:"CetusETH",num:"0.1",amount:"100000000",transactionModule:"eth",address:`${Hi}::eth::ETH`,suplyID:"0x010f8ea766c72e793eb540e21fd795fefd05661b6fb6521cc9c7af581178bad5",decimals:8},{symbol:"BTC",name:"CetusBTC",num:"0.01",amount:"10000000",transactionModule:"btc",address:`${Hi}::btc::BTC`,suplyID:"0xdf17a296e80416827b9bab70ca2f84a293fdf967815b365c6c7f7b12141703fb",decimals:8}],Tq=eh("pool",{state:()=>({tokens:[],tokensObj:{},newTokens:[],newTokenObj:{},tokensNameObj:{},pools:[],poolsObj:{},myPositions:[],addressLpTokens:{},addressTokens:{},currentPositionLoading:!1,myPositionsLoading:!0,poolsLoading:!0,RATES:{},currentPositionInfo:{},poolConfigList:[],feeOwedObj:{},rewarderObj:{},chinaTokens:[],chinaTokensObj:{},getPoolInfoSuccess:!1,recommendRangesObj:{},allTokenObj:{},isTokenLoading:!0,poolPriceConfigObj:{},defaultPoolInfo:{}}),actions:{async setChainPoolConfigList(e){this.poolConfigList=e,this.pools=e},async setPoolConfigList(e){const n=await Ai(e).getLpList(),r=[];n.forEach(i=>{var s,o;r.push({...i,token_a:{...i==null?void 0:i.coinA,logoURI:(s=i==null?void 0:i.coinA)==null?void 0:s.logo_url},token_b:{...i==null?void 0:i.coinB,logoURI:(o=i==null?void 0:i.coinB)==null?void 0:o.logo_url},isFarming:i.is_display_rewarder&&(i.rewarder_display1||i.rewarder_display2||i.rewarder_display3),chain:e==="Aptos"?"aptos":"sui"})}),this.poolConfigList=r},async getRecommendRanges(e){var n;let t=null;if(e&&e.includes("Sui")?t=await $fetch(`${ct[e].api}/v2/sui/liquidity/recommend_ranges`):t=await $fetch(`${ct.Aptos.api}/v2/liquidity/recommend_ranges`),(n=t==null?void 0:t.data)!=null&&n.list){const r=Object.fromEntries(t.data.list.map((i,s)=>[i.address,i]));this.recommendRangesObj=r,this.poolPriceConfigObj=r}else this.recommendRangesObj={},this.poolPriceConfigObj={}},async newSetPools(e,t){this.poolsLoading=!0,this.getPoolInfoSuccess=!1,this.poolsObj={};const n=Ai(t);if(e&&e.length>0){for(let r=0;r<e.length;r++){const i=e[r],s=await n.getPools([i.address]);this.defaultPoolInfo[s[0].poolAddress]=s[0],this.poolsObj[s[0].poolAddress]={...i,...s[0],fee:Number(s[0].fee_rate)/1e6},this.addressLpTokens=this.poolsObj,this.poolsLoading=!1,await gc(500)}this.getPoolInfoSuccess=!0}},async setSinglePool(e,t,n){const i=await Ai(n).getPool(e.address),s={...e,...i,fee:i.fee_rate/1e6,priceConfigObj:t.recommend_ranges||{},type:t.type||""};this.poolsObj[e.address]=s,this.addressLpTokens[e.address]=s},async updateCurrentPools(e,t){const n=Ai(t),r=this.poolsObj[e];if(r){let i={};t&&t.includes("Sui")?i=await n.getPool(r.poolAddress):i=await n.getPoolState(r.poolAddress,r.poolType,!1);const s={...this.poolsObj},o={...s[e],...i};s[e]={...o},this.poolsObj=s}},async setTokens(e){const t=[];(await Ai(e).getTokenList()).forEach(i=>{t.push({...i,logoURI:i.logo_url,chain:e.toLowerCase()})}),this.tokens=t,this.tokensObj=Object.fromEntries(t.map((i,s)=>[i.address,i])),this.tokensNameObj=Object.fromEntries(t.map((i,s)=>[i.address,i])),this.newTokenObj=Object.fromEntries(t.map((i,s)=>[i.address,i])),this.isTokenLoading=!1,this.newTokens=t},async setChinaTokens(e){const n=await Ai(e).getTokenListByCoinType(),r=[];n.forEach(i=>{r.push({...i,logoURI:e=="Aptos"?"https://archive.cetus.zone/assets/image/default1.png":"https://archive.cetus.zone/assets/image/default2.png",logo_url:e=="Aptos"?"https://archive.cetus.zone/assets/image/default1.png":"https://archive.cetus.zone/assets/image/default2.png"})}),this.chinaTokens=r,this.chinaTokensObj=Object.fromEntries(r.map((i,s)=>[i.address,i]))},setCurrentPositionLoading(e){this.currentPositionLoading=e},setMyPositionsLoading(e){this.myPositionsLoading=e},async setRates(e){let t={};if(e&&e.includes("Sui"))try{t=await $fetch(`${ct.Sui.api}/v2/sui/price`)}catch{t={data:{prices:k$}}}else t=await $fetch(`${ct.Aptos.api}/v2/price`);const n=t.data.prices||[];this.RATES=Object.fromEntries(n.map(r=>[r.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":r.base_symbol,{...r,base_symbol:r.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":r.base_symbol}]))},async getMyPositons(e,t,n){this.setMyPositionsLoading(!0);const r=Ai(n),i=await r.getPositionList(e,t)||[];i.length<1&&this.setMyPositionsLoading(!1);const s=[];i.forEach(a=>{const c=this.poolsObj[a.pool];let u,d,l,f="",p,_,y,b;if(a.liquidity&&a.liquidity!=="0"&&c){const B={creator:a.creator,collection:a.collection,name:a.name};n==="Aptos"?b=r.getNftHash(B):b=r.getNftHash(a);const E=c.token_a.decimals,x=c.token_b.decimals;l=fo(r.TickMath.sqrtPriceX64ToPrice(c.current_sqrt_price,E,x).toString(),6),u=r.TickMath.tickIndexToPrice(Number(a.tick_lower_index),E,x).toString(),d=r.TickMath.tickIndexToPrice(Number(a.tick_upper_index),E,x).toString();const S=r.getCoinAmountFromLiquidity({pool:c,position:a,roundUp:!0}),T=S.coinaAmount,R=S.coinbAmount,P=Number(R)+Number(T)*Number(l),C=(Number(l)/P*100).toFixed(0),G=(R/P*100).toFixed(0);c.isPause?f="Closed":Number(l)>=Number(u)&&Number(l)<=Number(d)?f="Active":(Number(l)>Number(d)||Number(l)<Number(u))&&(f="Inactive"),s.push({...c,...a,token_a:{...c.token_a,...this.tokensObj[c.token_a.address],logoURI:this.tokensObj[c.token_a.address].logo_url},token_b:{...c.token_b,...this.tokensObj[c.token_b.address],logoURI:this.tokensObj[c.token_b.address].logo_url},tokenARates:p,tokenBRates:_,amountA:T,amountB:R,fromPercent:C,toPercent:G,amountUSD:y,tokenName:a.tokenName||a.name,currentStatus:f,positionLiquidity:a.liquidity,nftHash:b,currentPrice:In(l,12),minPrice:In(u,12),maxPrice:In(d,12)})}});const o=s.sort((a,c)=>c.amountUSD-a.amountUSD);this.myPositions=o,this.setMyPositionsLoading(!1),this.getPendingFees(o,n),this.getRewarder(o,n)},async setCurrentPositionInfo(e,t,n,r,i=""){const s=Ai(r);let o=null,a=null,c=null,u=null;if(e&&i||r==="Aptos"?(o=this.addressLpTokens&&this.addressLpTokens[e],a=await s.getPool(e),c={...o,...a},u=await s.getPositionInfo(c,t,n,i)):r!=="Aptos"&&(u=await s.getPositionById(i),a=await s.getPool(u.pool),o=this.addressLpTokens&&this.addressLpTokens[u.pool],c={...o,...a}),u&&c){let d,l,f,p="",_,y,b,B,E,x,S,T=0,R=0,P;const C={creator:u.pool,collection:u.collectionName,name:u.name};if(r==="Aptos"?P=s.getNftHash(C):P=s.getNftHash(u),c){try{const g=await s.getTickDataByIndex(c.ticks_handle,Number(u.tick_lower_index)),v=await s.getTickDataByIndex(c.ticks_handle,Number(u.tick_upper_index)),O=await s.getCollectFeesQuote({pool:c,position:u,tickLowerData:g,tickUpperData:v});O&&(T=Number(O.feeOwedA),R=Number(O.feeOwedB))}catch{}const G=c.token_a.decimals,F=c.token_b.decimals;f=s.TickMath.sqrtPriceX64ToPrice(c.current_sqrt_price,G,F).toString(),d=s.TickMath.tickIndexToPrice(Number(u.tick_lower_index),G,F).toString(),l=s.TickMath.tickIndexToPrice(Number(u.tick_upper_index),G,F).toString(),_=u.tick_lower_index,y=u.tick_upper_index;const U=s.getCoinAmountFromLiquidity({pool:c,position:u,roundUp:!0});x=U.coinaAmount,S=U.coinbAmount;const N=Number(S)+Number(x)*Number(f),k=(Number(x)*Number(f)/N*100).toFixed(0),h=(Number(S/Number(N))*100).toFixed(0);c.isPause?p="Closed":Number(f)>=Number(d)&&Number(f)<=Number(l)?p="Active":(Number(f)>Number(l)||Number(f)<Number(d))&&(p="Inactive"),this.setCurrentPositionLoading(!1),this.currentPositionInfo={...u,poolInfo:c,token_a:{...c.token_a,...this.tokensObj[c.token_a.address]},token_b:{...c.token_b,...this.tokensObj[c.token_b.address]},current_tick_index:c.current_tick_index,current_sqrt_price:c.current_sqrt_price,tickSpacing:c.tickSpacing,fee:c.fee,poolAddress:c.poolAddress,address:c.address,is_display_rewarder:c.is_display_rewarder,nftHash:P,feeOwedA:T,feeOwedB:R,currentStatus:p,amountA:x,amountB:S,tokenARates:b,tokenBRates:B,amountUSD:E,currentPrice:f,minPrice:In(d,12),minTick:_,maxTick:y,maxPrice:In(l,12),fromPercent:k,toPercent:h,tokenName:u.tokenName||u.name}}}},async getPendingFees(e,t){var i,s;const n=this.RATES,r=Ai(t);for(let o=0;o<e.length;o++){const a=e[o],c=await r.getPool(a.poolAddress);if(c){const u=await r.getTickDataByIndex(c.ticks_handle,Number(a.tick_lower_index)),d=await r.getTickDataByIndex(c.ticks_handle,Number(a.tick_upper_index)),l=t==="Aptos"?"":a.pos_object_id,f=await r.getPositionInfo(c,a.collection,a.tokenName,l),p={...c,token_a:this.tokensObj&&this.tokensObj[c.coinTypeA]||this.chinaTokensObj&&this.chinaTokensObj[c.coinTypeA],token_b:this.tokensObj&&this.tokensObj[c.coinTypeB]||this.chinaTokensObj&&this.chinaTokensObj[c.coinTypeB]},_=await r.getCollectFeesQuote({pool:p,position:f,tickLowerData:u,tickUpperData:d}),y=[],b=Number(_.feeOwedA),B=Number(_.feeOwedB);let E,x,S;n&&n[p.token_a.address]&&n[p.token_b.address]?(x=b*((i=n[p.token_a.address])==null?void 0:i.price),S=B*((s=n[p.token_b.address])==null?void 0:s.price),E=x+S):E="--",y.push({amount:b,amountUSD:x,...p.token_a,logoURI:p.token_a.logo_url},{amount:B,amountUSD:S,...p.token_b,logoURI:p.token_b.logo_url}),this.feeOwedObj[a.tokenName]={feesResult:y,feeOwed:E},await gc(1e3)}}},async getRewarder(e,t){const n=Ai(t),r=this;for(let i=0;i<e.length;i++)if(e[i].rewarder_infos&&e[i].rewarder_infos.length>0){const s=e[i],o=await n.getTickDataByIndex(s.ticks_handle,Number(s.tick_lower_index)),a=await n.getTickDataByIndex(s.ticks_handle,Number(s.tick_upper_index));let c=[];t==="Aptos"?c=await n.getPosRewardersAmount({poolAddress:s.poolAddress,positionName:s.tokenName,tickLowerData:o,tickUpperData:a}):c=await n.getPosRewardersAmount({poolAddress:s.poolAddress,pos:s.pos_object_id,positionHandle:s.positions_handle});const u=[];let d=0;c.forEach((l,f)=>{var p;if(s[`rewarder_display${f+1}`]){const _=r.newTokenObj[l.coin_address].decimals,y=r.newTokenObj[l.coin_address],b=Number(l.amount_owed.toString())>99999999999999?0:Number(l.amount_owed.toString()),B=In(b/Math.pow(10,_),_),E=(p=r.RATES[l.coin_address])==null?void 0:p.price,x=Number(B)*E;d+=x,u.push({...l,...y,amount:B,amountUSD:x,amount_owed:l.amount_owed.toString(),rewarder_display:s[`rewarder_display${f+1}`]}),r.rewarderObj[s.tokenName]={pendingRewarderArr:u.filter(S=>S.rewarder_display),pendingRewarderView:Number(In(d,2)),pendingRewarder:d}}}),await gc(1e3)}},setAllTokenObj(e){this.allTokenObj=e}}});function Aq(e){return new URL(e,import.meta.url).href}export{KP as A,GP as B,Ws as C,Fe as D,Xe as E,Ls as F,Vw as G,Yd as H,$r as I,kc as J,Wi as K,WB as L,up as M,Ii as N,it as O,yP as P,uy as Q,dq as R,Sq as S,Mt as T,ct as _,cy as a,Ai as b,gq as c,I as d,P0 as e,In as f,fo as g,wk as h,Aq as i,zw as j,yq as k,_q as l,Ko as m,bq as n,Vo as o,fr as p,pq as q,fq as r,hq as s,wq as t,Tq as u,mq as v,Nl as w,IM as x,ev as y,W2 as z};
