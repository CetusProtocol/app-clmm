import{_ as te}from"./token-warning.c64039ed.js";import{i as y}from"./import-icon.de3e6c66.js";import{D as ke,i as le,u as ie,f as ge,b as D,A as re,a as ye,p as Ce,B as we}from"./pool.0ee2ab8c.js";import{a as de,l as ue,m as p,a2 as $e,a3 as ce,D as q,e as me,q as pe,o as a,f as r,h as t,c as N,v as u,z as U,t as E,u as k,i as O,w as _,x as B,j as Z,I as Se,K as ve,ab as Te,S as Ie,B as Le,p as be,k as fe,M as Ne,r as P,y as Oe,ac as Be,L as K,a4 as je,F as se,s as ae,G as Ae,ad as Pe}from"./entry.97513d1f.js";/* empty css              *//* empty css              *//* empty css              */import{u as G}from"./index.f0ad319f.js";/* empty css              */import{_ as De,a as Me}from"./img-no-Positions_2x.dcaf63e0.js";const Fe=de({components:{TokenWarning:te},props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,d){const{t:i,locale:W}=ue(),F=G(),v=p(()=>F),C=p(()=>new ke(Number(e.balance)).div(2)),c=$e(ce,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function T(){this.$emit("onSelect")}const h=s=>{const f=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(b==null?void 0:b.value)&&(b==null?void 0:b.value)}})?).*$`);s.target.value=s.target.value.replace(f,"$1")},$=le(),S=p(()=>$),m=ie(),n=p(()=>m);let g={};q(()=>n.value.RATES,s=>{s&&(g=s)},{immediate:!0});const j=p(()=>ge(Number(e.inputValue)*Number(g&&g[e.address]&&g[e.address].price),2)),I=p(()=>{var s,f;return n.value.tokensObj&&e.address&&n.value.tokensObj[e.address]&&((s=n.value.tokensObj[e.address])==null?void 0:s.labels)&&((f=n.value.tokensObj[e.address])==null?void 0:f.labels[0])}),b=p(()=>{var s;return n.value.tokensObj&&e.address&&n.value.tokensObj[e.address]&&((s=n.value.tokensObj[e.address])==null?void 0:s.decimals)}),R=p(()=>{var s,f;return e.coinIcon||((f=(s=n==null?void 0:n.value)==null?void 0:s.tokensObj[e.address])==null?void 0:f.logo_url)||(v.value.theme==="default"?y("/image/coins/unknown.png"):y("/image/coins/sui-unknown.png"))}),V=p(()=>n.value.tokensObj);return{theme:p(()=>v.value.theme),currentIcon:R,tokensObj:V,pool:n,halfBalance:C,coinLabels:I,t:i,addCommom:D,store:v,wallet:S,indicator:c,inputChange:h,importIcon:y,selectCoin:T,amountPirce:j,coinDecimals:b,formatNumber:re}}});const Re=e=>(be("data-v-51c91a81"),e=e(),fe(),e),Ve={class:"card"},ze={class:"top"},Ze={key:1,class:"input-div"},qe={key:0},Ee={class:"loading-token"},Ue=["onerror"],We={key:0},He=Re(()=>t("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ke=[He],Ge={class:"bottom"},Je={key:0,class:"amount-price"},Qe={key:1},Xe={class:"top"},Ye={class:"right"},xe={class:"balance"};function eo(e,d,i,W,F,v){const C=Se,c=ve,T=Te,h=te,$=Ie,S=Le,m=pe("image");return a(),r("div",Ve,[t("div",ze,[e.inputDisabled?(a(),r("div",Ze,[e.inputValue?(a(),r("span",qe,u(e.inputValue),1)):(a(),N(c,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(a(),N(C,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:d[0]||(d[0]=n=>e.$emit("onInput",n.target.value)),onFocus:d[1]||(d[1]=n=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),t("div",{class:U(["left",e.hasArrow?"":"nohands"]),onClick:d[2]||(d[2]=n=>e.hasArrow&&!e.pool.isTokenLoading?e.selectCoin():"")},[t("div",Ee,[e.pool.isTokenLoading?(a(),N(T,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):E((a(),r("img",{key:1,onerror:e.theme=="default"?("importIcon"in e?e.importIcon:k(y))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:k(y))("/image/coins/sui-unknown.png")},null,8,Ue)),[[m,e.currentIcon]]),O(h,{address:e.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),O($,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:_(()=>[t("div",null,[t("p",null,u(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(a(),r("p",We,u(e.coinLabels),1)):B("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(a(),r("svg",{key:0,class:U(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},Ke,2)):B("",!0)],2)]),t("div",Ge,[e.inputValue&&e.amountPirce!="--"?(a(),r("div",Je," $"+u(("formatNumber"in e?e.formatNumber:k(re))(e.amountPirce)),1)):(a(),r("div",Qe)),t("div",Xe,[t("div",Ye,[Z(u(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),t("span",xe,u(e.wallet.connected?("addCommom"in e?e.addCommom:k(D))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(a(),N(S,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:k(D))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:d[3]||(d[3]=n=>e.$emit("onHalf"))},{default:_(()=>[Z(u("Half"))]),_:1},8,["disabled"])):B("",!0),e.havemax&&e.wallet.connected?(a(),N(S,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:k(D))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:d[4]||(d[4]=n=>e.$emit("onMax"))},{default:_(()=>[Z(u(e.$t("button.max")),1)]),_:1},8,["disabled"])):B("",!0)])])])])}const Ho=me(Fe,[["render",eo],["__scopeId","data-v-51c91a81"]]);const oo=de({components:{Modal:Ne,LoadingOutlined:ce},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""},isCreatePoolToCoin:{type:Boolean,default:!1},isCreatePoolFromCoin:{type:Boolean,default:!1}},setup(e,d){const{t:i,locale:W}=ue(),F=le(),v=p(()=>F),C=ie(),c=p(()=>C),T=G(),h=p(()=>T),$=p(()=>{var s;return(s=h.value)==null?void 0:s.filterCreatePoolCoin}),S=P([i("tab.all"),i("tab.native"),i("tab.layerZero"),i("tab.wormhole"),i("tab.celer")]),m=P(i("tab.all")),n=P(i("tab.all")),g=G(),j=p(()=>g.chainName),I=P([]),b=P(null);Oe(()=>{});const R=P(!1);q(m,s=>{s!==i("tab.all")&&(R.value=!1),s==i("tab.all")?n.value=i("tab.all"):s==i("tab.layerZero")?n.value=i("tab.layerZero"):s==i("tab.wormhole")?n.value=i("tab.wormhole"):s==i("tab.celer")?n.value=i("tab.celer"):s==i("tab.native")&&(n.value=i("tab.native")),V(b.value)});const V=async s=>{var Q,X,Y,x,ee,oe,ne;let f=[],A=c.value.tokens;if(!(h.value.chainName&&A&&A[0]&&h.value.chainName.toLowerCase().includes((Q=A[0])==null?void 0:Q.chain))){I.value=[];return}let H=A;if(s&&s.split("::")&&s.split("::").length==3&&j.value=="Sui"){const l=ye("Sui");try{const o=c.value.tokensObj[s]||await l.getTokenBySymbol(c.value.tokens,s);o&&((X=A.filter(w=>(w==null?void 0:w.address)===(o==null?void 0:o.address)))==null?void 0:X.length)<1&&(C.setNewTokens({[s]:o}),H=A.concat(o))}catch{}}for(const l of Object.keys(H)){let o=Be(H[l]);const w=v.value.assets[o.address]&&v.value.assets[o.address].balance?Ce(v.value.assets&&v.value.assets[o.address].balance,o.decimals):0;e.lastSelectCoin&&o&&o.address===e.lastSelectCoin?o.unusable=!0:o.unusable=!1;const he=((Y=c.value.tokensObj[o.address])==null?void 0:Y.labels)&&((x=c.value.tokensObj[o.address])==null?void 0:x.labels[0]),_e=c.value.tokensObj[o.address]?(ee=c.value.tokensObj[o.address])==null?void 0:ee.name:o.name;o={...o,balance:w,labels:he,name:_e,sort:(h.value.chainName==="Aptos"?o.symbol=="APT":o.symbol=="SUI")?1:-1},f.push(o)}let z;v.value.address?z=f.sort((l,o)=>o.balance-l.balance):z=f;let L=[];if(s){const l=z.filter(o=>o.symbol.toLowerCase().indexOf(s.toLowerCase())!==-1||o.address.toLowerCase().indexOf(s.toLowerCase())!==-1||o.address.toLowerCase().indexOf(we(s).full_address.toLowerCase())!==-1);m.value!==i("tab.all")?L=l.filter(w=>m.value==i("tab.native")?!w.labels:w.labels&&w.labels.toLowerCase()==m.value.toLowerCase()):L=l}else m.value!==i("tab.all")?L=z.filter(o=>m.value==i("tab.native")?!o.labels:o.labels&&o.labels.toLowerCase()==m.value.toLowerCase()):L=z;e.isCreatePoolToCoin?I.value=(oe=L.filter(l=>$.value[l==null?void 0:l.address]))==null?void 0:oe.sort((l,o)=>o.sort-l.sort).sort((l,o)=>o.unusable-l.unusable):I.value=L.sort((l,o)=>o.sort-l.sort).sort((l,o)=>o.unusable-l.unusable),e.isCreatePoolFromCoin&&(I.value=(ne=L.filter(l=>!$.value[l==null?void 0:l.address]))==null?void 0:ne.sort((l,o)=>o.sort-l.sort).sort((l,o)=>o.unusable-l.unusable))},J=s=>{s.unusable||(d.emit("onSelect",s),d.emit("onClose"))};return q(()=>[b.value,R.value],([s,f])=>{V(s)},{immediate:!0}),q(()=>c.value.tokens,s=>{s&&V(b.value)},{immediate:!0}),{pools:c,t:i,chainName:j,tabList:S,currentTab:m,addCommom:D,tokenList:I,importIcon:y,keyword:b,wallet:v,toSelect:J,store:h,isShowAll:R}}}),no=""+globalThis.__publicAssetsURL("image/warning@2x.png");const M=e=>(be("data-v-ef581b23"),e=e(),fe(),e),so=M(()=>t("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ao={class:"coin-select-modal"},to={class:"search-input"},lo=["placeholder"],io=M(()=>t("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),ro=[io],uo={key:0,class:"tab-list"},co=["onClick"],mo={class:"item"},po=M(()=>t("div",{class:"line"},null,-1)),vo={class:"coin-list-box"},bo={key:0,class:"coin-list"},fo=["onClick"],ho={class:"left"},_o={key:0},ko={key:1,alt:""},go={class:"name-box"},yo=M(()=>t("img",{src:no,alt:""},null,-1)),Co={class:"balance-box"},wo={class:"balance"},$o={key:0},So={key:1},To={key:2},Io={key:3},Lo=M(()=>t("p",null,null,-1)),No={key:1,class:"no-data"},Oo={key:0,class:"token-loading"},Bo={key:1,class:"no-data-content"},jo={key:0,src:De},Ao={key:1,src:Me},Po=M(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-information"})],-1));function Do(e,d,i,W,F,v){const C=Ae,c=K("loading-outlined"),T=Pe,h=ve,$=K("vue-scroll"),S=K("Modal"),m=pe("image");return a(),N(S,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:d[2]||(d[2]=n=>e.$emit("onClose"))},{closeIcon:_(()=>[so]),default:_(()=>[t("div",ao,[t("div",to,[E(t("input",{"onUpdate:modelValue":d[0]||(d[0]=n=>e.keyword=n),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,lo),[[je,e.keyword]]),e.keyword?(a(),r("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:d[1]||(d[1]=n=>e.keyword="")},ro)):B("",!0)]),e.chainName!=="Sui"?(a(),r("div",uo,[(a(!0),r(se,null,ae(e.tabList,(n,g)=>(a(),r("div",{key:g,class:U(["item-container",e.currentTab==n?"item-container-active item-container":"item-container"]),onClick:j=>e.currentTab=n},[t("div",mo,u(n),1)],10,co))),128))])):B("",!0),po,t("div",vo,[O($,null,{default:_(()=>[e.tokenList&&e.tokenList.length>0?(a(),r("ul",bo,[(a(!0),r(se,null,ae(e.tokenList,(n,g)=>(a(),r("li",{key:g,class:U(n.unusable?"unusable":""),onClick:j=>e.toSelect(n)},[t("div",ho,[n.isChinaToken?E((a(),r("img",ko,null,512)),[[m,e.store.theme=="default"?("importIcon"in e?e.importIcon:k(y))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:k(y))("/image/coins/sui-unknown.png")]]):E((a(),r("img",_o,null,512)),[[m,n.icon||n.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:k(y))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:k(y))("/image/coins/sui-unknown.png"))]]),t("div",go,[t("span",null,[Z(u(n.symbol)+" ",1),n.isSelfBuilt?(a(),N(C,{key:0,placement:"right","arrow-point-at-center":""},{title:_(()=>[t("span",null,u(e.t("newAdd.notCetusTokenList")),1)]),default:_(()=>[yo]),_:1})):B("",!0)]),t("p",null,u(n.name)+" "+u(n.labels?`(${n.labels})`:""),1)])]),t("div",Co,[t("div",wo,[e.wallet.loading?(a(),r("div",$o,[O(T,null,{default:_(()=>[O(c)]),_:1})])):n.balance&&e.wallet.connected?(a(),r("div",So,u(("addCommom"in e?e.addCommom:k(D))(n.balance,n.decimals)),1)):!n.balance&&e.wallet.connected?(a(),r("div",To,"0")):(a(),r("div",Io))]),Lo])],10,fo))),128))])):(a(),r("div",No,[e.pools.isTokenLoading?(a(),r("div",Oo,[O(h)])):(a(),r("div",Bo,[e.store.theme=="default"?(a(),r("img",jo)):(a(),r("img",Ao)),t("p",null,u(e.t("newAdd.noTokensFound")),1),t("div",null,[Z(u(e.t("newAdd.enterCoinType"))+" ",1),O(C,{placement:"bottom","arrow-point-at-center":""},{title:_(()=>[t("span",null,u(e.t("newAdd.uniqueIdOfCoin")),1)]),default:_(()=>[Po]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const Ko=me(oo,[["render",Do],["__scopeId","data-v-ef581b23"]]);export{Ho as _,Ko as a};
