import{_ as le}from"./status-block.66700156.js";import{a as E,s as B,v as p,J as re,b as V,o,e as n,l as v,t,c as G,m as w,f as s,h as k,q as O,a2 as de,L as J,G as Y,F as Z,ad as ue,A as me,H as ce,i as pe,Y as Q,k as _e,a0 as F,a1 as L,a3 as X,p as x,j as ee,r as $,N as ve,x as he,O as ke,aj as fe,w as P,K as H,ax as W,y as R,at as be,B as ge,au as Ie}from"./entry.68afc284.js";import{_ as se,a as te}from"./icon-arrow_2x.db44c7c5.js";import{_ as oe}from"./icon_on_2x.92294e56.js";import{_ as $e,a as ye}from"./img-no-Positions_2x.3a4bda32.js";const we=E({props:{pItem:{type:Object,required:!0},currentStatus:{type:String,required:!0},rewarderInfo:{type:Number,required:!0}},setup(){const e=B(),l=p(()=>e),f=p(()=>l.value.chainName),y=p(()=>re[f.value]);return{store:l,config:y}}});const Ne={key:0,class:"owner-addres"},Se=["href"],Ue=["href"],Ce={class:"fee-tier"};function De(e,l,f,y,S,U){const b=le,i=de;return o(),n("div",{class:O(["position-status",`position-status-${e.pItem.currentStatus.toLowerCase()}`])},[v(b,{class:"status-block","current-status":e.pItem.currentStatus||"",isPause:e.pItem.is_pause},null,8,["current-status","isPause"]),e.pItem.tokenName?(o(),n("div",Ne,[e.pItem.tokenName.length<=24?(o(),n("a",{key:0,href:e.store.theme=="default"?`https://explorer.aptoslabs.com/token/${e.pItem.nftHash}/0`:`https://explorer.devnet.sui.io/addresses/${e.nftTokenAccount}`,target:"_blank"},t(e.pItem.tokenName),9,Se)):(o(),G(i,{key:1,placement:"bottom","arrow-point-at-center":""},{title:w(()=>[s("span",null,t(e.pItem.tokenName),1)]),default:w(()=>[s("a",{target:"_blank",href:e.store.theme=="default"?`https://explorer.aptoslabs.com/token/${e.pItem.nftHash}/0?network=${e.config.network}`:`https://explorer.devnet.sui.io/addresses/${e.nftTokenAccount}`},t(e.pItem.tokenName.substr(0,4))+" ... "+t(e.pItem.tokenName.substr(e.pItem.tokenName.length-4,4)),9,Ue)]),_:1}))])):k("",!0),s("div",Ce,"Fee "+t(e.pItem.fee)+"%",1)],2)}const Pe=V(we,[["render",De],["__scopeId","data-v-cc30fd0e"]]),Re=E({props:{pItem:{type:Object,required:!0}},setup(e){const{t:l}=J(),f=Y(),y=B(),S=p(()=>y);function U(c){return!c.liquity||c.liquity.toString()=="0"?"Closed":Number(c.currentPriceView)>=Number(c.minPrice)&&Number(c.currentPriceView)<=Number(c.maxPrice)||!Number(c.minPrice)&&isNaN(Number(c.maxPrice))?"Active":"Inactive"}const b=Z(),i=p(()=>b),a=()=>{f.push(`/position-detail/1?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`)},m=p(()=>i.value.tokensObj&&e.pItem.token_a.address&&i.value.tokensObj[e.pItem.token_a.address]&&i.value.tokensObj[e.pItem.token_a.address].logoURI),D=p(()=>i.value.tokensObj&&e.pItem.token_b.address&&i.value.tokensObj[e.pItem.token_b.address]&&i.value.tokensObj[e.pItem.token_b.address].logoURI),h=p(()=>i.value.feeOwedObj[e.pItem.tokenName]&&i.value.feeOwedObj[e.pItem.tokenName].feeOwed),N=p(()=>i.value.feeOwedObj[e.pItem.tokenName]&&i.value.feeOwedObj[e.pItem.tokenName].feesResult),r=p(()=>i.value.rewarderObj[e.pItem.tokenName]&&i.value.rewarderObj[e.pItem.tokenName].pendingRewarder),g=p(()=>i.value.rewarderObj[e.pItem.tokenName]&&i.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr);return console.log(e.pItem,"===>pItem"),{showNum:ue,fromCoinUrl:m,toCoinUrl:D,decimalFormat:me,clickDetails:a,t:l,addCommom:ce,importIcon:pe,getCurrentStatus:U,router:f,store:S,pendingRewarder:r,pendingFees:h,pendingRewarderArr:g,pendingFeesArr:N,checkNullObj:Q,fixD:_e}}});const j=e=>(x("data-v-f48986ad"),e=e(),ee(),e),Oe={class:"position-item"},Fe={class:"card-content"},Le={class:"left"},je={class:"top card-header"},Ae={class:"token-item"},Ee={class:"item"},Be=["src"],Ve={class:"item"},Te=["src"],qe={class:"min-and-max"},Ke={class:"text"},Me={key:0,src:se,alt:""},ze={key:1,src:te,alt:""},He={class:"text"},We={class:"bottom"},Ge={class:"info-block-container"},Je={class:"info-block cursor-block"},Ye={class:"leabl"},Ze={class:"text"},Qe={key:0,class:"hover-rewarder"},Xe={class:"rewarder-info"},xe={class:"left-rewarder"},es=["src"],ss={class:"right-rewarder"},ts={class:"amount"},os={class:"amount-usd"},ns={class:"rewarder-info"},as={class:"left-rewarder"},is=["src"],ls={class:"right-rewarder"},rs={class:"amount"},ds={class:"amount-usd"},us={class:"info-block cursor-block"},ms=j(()=>s("div",{class:"leabl"},"Pending fees",-1)),cs={key:0,class:"text"},ps={key:1,class:"text"},_s={key:2,class:"hover-rewarder"},vs={class:"left-rewarder"},hs=["src"],ks={class:"right-rewarder"},fs={class:"amount"},bs={class:"amount-usd"},gs=j(()=>s("div",{class:"more-img"},null,-1)),Is={class:"min-and-max"},$s={class:"text"},ys={key:0,src:se,alt:""},ws={key:1,src:te,alt:""},Ns={class:"text"},Ss={class:"info-block-container"},Us={class:"info-block"},Cs={class:"leabl"},Ds={class:"text"},Ps={class:"info-block cursor-block"},Rs=j(()=>s("div",{class:"leabl"},"Pending fees",-1)),Os={key:0,class:"text"},Fs={key:1,class:"text"},Ls={key:2,class:"hover-rewarder"},js={class:"left-rewarder"},As=["src"],Es={class:"right-rewarder"},Bs={class:"amount"},Vs={class:"amount-usd"},Ts=j(()=>s("div",{class:"more-img"},null,-1));function qs(e,l,f,y,S,U){const b=Pe,i=X;return o(),n("div",Oe,[s("div",Fe,[s("div",Le,[v(b,{"p-item":e.pItem,"current-status":e.getCurrentStatus(e.pItem)||"","rewarder-info":e.pendingRewarder},null,8,["p-item","current-status","rewarder-info"])]),s("div",{class:"right",onClick:l[0]||(l[0]=(...a)=>e.clickDetails&&e.clickDetails(...a))},[s("div",je,[s("div",Ae,[s("div",Ee,[s("img",{src:e.fromCoinUrl||e.importIcon(`/image/coins/${e.pItem.token_a.symbol.toLowerCase()}.png`)},null,8,Be),s("div",null,[s("span",null,t(e.pItem.token_a.symbol),1),s("p",null,t(e.pItem.token_a.name),1)])]),s("div",Ve,[s("img",{src:e.toCoinUrl||e.importIcon(`/image/coins/${e.pItem.token_b.symbol.toLowerCase()}.png`)},null,8,Te),s("div",null,[s("span",null,t(e.pItem.token_b.symbol),1),s("p",null,t(e.pItem.token_b.name),1)])])]),s("div",qe,[s("div",Ke,t(e.addCommom(e.decimalFormat(e.pItem.minPrice,6))),1),e.store.theme=="default"?(o(),n("img",Me)):(o(),n("img",ze)),s("div",He,t(e.pItem.maxPrice.indexOf("+")>-1?"\u221E":e.addCommom(e.decimalFormat(e.pItem.maxPrice,6)))+" "+t(e.pItem.token_b.symbol)+" per "+t(e.pItem.token_a.symbol),1)])]),s("div",We,[s("div",Ge,[s("div",Je,[s("div",Ye,t(e.$t("common.liquidity")),1),s("div",Ze," $"+t(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":e.addCommom(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(o(),n("div",Qe,[s("div",Xe,[s("div",xe,[s("img",{src:e.pItem.token_a.logoURI,alt:""},null,8,es),s("span",null,t(e.pItem.token_a.symbol),1)]),s("div",ss,[s("div",ts,t(e.showNum(e.pItem.amountA,e.pItem.token_a.decimals)),1),s("div",os,t(e.pItem.tokenARates>.01?"$"+e.fixD(e.pItem.tokenARates,2):"<$0.01"),1)])]),s("div",ns,[s("div",as,[s("img",{src:e.pItem.token_b.logoURI,alt:""},null,8,is),s("span",null,t(e.pItem.token_b.symbol),1)]),s("div",ls,[s("div",rs,t(e.showNum(e.pItem.amountB,e.pItem.token_b.decimals)),1),s("div",ds,t(e.pItem.tokenBRates>.01?"$"+e.fixD(e.pItem.tokenBRates,2):"<$0.01"),1)])])])):k("",!0)]),s("div",us,[ms,isNaN(e.pendingFees)?(o(),n("div",ps,[v(i,{size:"small"})])):(o(),n("div",cs,t(e.pendingFees==0?"$"+0:e.pendingFees<.01?"<$0.01":"$"+e.addCommom(e.pendingFees,2)),1)),e.pendingFees>0?(o(),n("div",_s,[(o(!0),n(F,null,L(e.pendingFeesArr,a=>(o(),n("div",{key:a,class:"rewarder-info"},[s("div",vs,[s("img",{src:a.logoURI,alt:""},null,8,hs),s("span",null,t(a.symbol),1)]),s("div",ks,[s("div",fs,t(Number(a.amount)==0?0:Number(a.amount)>1e-6?e.addCommom(e.decimalFormat(a.amount,a.decimals)):"<0.000001"),1),s("div",bs,t(Number(a.amountUSD)==0?"$"+0:Number(a.amountUSD)>.01?"$"+e.addCommom(a.amountUSD,2):"<$0.01"),1)])]))),128))])):k("",!0)]),gs])])])]),s("div",{class:"h5-bottom",onClick:l[1]||(l[1]=(...a)=>e.clickDetails&&e.clickDetails(...a))},[s("div",Is,[s("div",$s,t(e.decimalFormat(e.pItem.minPrice,6)),1),e.store.theme=="default"?(o(),n("img",ys)):(o(),n("img",ws)),s("div",Ns,t(e.pItem.maxPrice.indexOf("+")>-1?"\u221E":e.decimalFormat(e.pItem.maxPrice,6))+" "+t(e.pItem.token_b.symbol)+" per "+t(e.pItem.token_a.symbol),1)]),s("div",Ss,[s("div",Us,[s("div",Cs,t(e.$t("common.liquidity")),1),s("div",Ds," $"+t(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":e.addCommom(e.pItem.amountUSD,2)),1)]),s("div",Ps,[Rs,isNaN(e.pendingFees)?(o(),n("div",Fs,[v(i,{size:"small"})])):(o(),n("div",Os,t(e.pendingFees==0?"$"+0:e.pendingFees<.01?"<$0.01":"$"+e.addCommom(e.pendingFees,2)),1)),e.pendingFees>0?(o(),n("div",Ls,[(o(!0),n(F,null,L(e.pendingFeesArr,a=>(o(),n("div",{key:a,class:"rewarder-info"},[s("div",js,[s("img",{src:a.logoURI,alt:""},null,8,As),s("span",null,t(a.symbol),1)]),s("div",Es,[s("div",Bs,t(Number(a.amount)==0?0:Number(a.amount)>1e-6?e.addCommom(e.decimalFormat(a.amount,a.decimals)):"<0.000001"),1),s("div",Vs,t(Number(a.amountUSD)==0?"$"+0:Number(a.amountUSD)>.01?"$"+e.addCommom(a.amountUSD,2):"<$0.01"),1)])]))),128))])):k("",!0)]),Ts])])])}const Ks=V(Re,[["render",qs],["__scopeId","data-v-f48986ad"]]),Ms=E({setup(){const e=$(!1),{t:l}=J(),f=$(["position"]),y=Y(),S=$(""),U=B(),b=p(()=>U);let i=$([]);const a=Z(),m=p(()=>a),D=ve(),h=p(()=>D),N=$(!1),r=$(l("tab.all")),g=$([l("tab.layerZero"),l("tab.wormhole"),l("tab.celer")]),c=$(!0),ae=$("TVL"),ie=()=>{e.value=!0,i.value=[],h.value.address&&a.getMyPositons(h.value.address,m.value.poolsObj),setTimeout(()=>{e.value=!1},1e3)};he(()=>{i.value=[],document.addEventListener("click",()=>{N.value=!1})}),ke(()=>{document.addEventListener("click",()=>{N.value=!1})}),fe(()=>{h.value.connected||(i.value=[])});const A=I=>{e.value=!0;let _=[];if(m.value.myPositions.forEach(d=>{var q,K,M,z;let u;const C=d.amountA*((q=m.value.RATES[d.token_a.name.toUpperCase()])==null?void 0:q.price),T=d.amountB*((K=m.value.RATES[d.token_b.name.toUpperCase()])==null?void 0:K.price);((M=m.value.RATES[d.token_a.name.toUpperCase()])==null?void 0:M.price)&&((z=m.value.RATES[d.token_b.name.toUpperCase()])==null?void 0:z.price)?u=C+T:u=" --",_.push({...d,amountUSD:u,tokenARates:C,tokenBRates:T})}),r.value!="All"){const d=[];_.forEach(u=>{u.labels.indexOf(r.value)!==-1&&d.push(u)}),c.value?(i.value=d.sort((u,C)=>C.amountUSD-u.amountUSD),e.value=!1):(i.value=d.sort((u,C)=>u.amountUSD-C.amountUSD),e.value=!1)}else c.value?(i.value=_.sort((d,u)=>u.amountUSD-d.amountUSD),e.value=!1):(i.value=_.sort((d,u)=>d.amountUSD-u.amountUSD),e.value=!1)};return P(()=>[m.value.myPositions,m.value.RATES],([I,_])=>{I&&_&&A()},{immediate:!0}),P(()=>[h.value.address,m.value.poolsObj],([I,_])=>{I&&!Q(_)&&a.getMyPositons(h.value.address,_)},{immediate:!0}),P(()=>r.value,I=>{A()}),P(()=>c.value,I=>{A()}),{changeSortLabel:I=>{const _=[];g.value.forEach((d,u)=>{d==I?_[u]=r.value:_[u]=d}),g.value=_,r.value=I},label:N,labelList:g,labelValue:r,select:c,selectValue:ae,t:l,pools:m,store:b,wallet:h,list:i,clickRefresh:ie,refresh:e,current:f,router:y,searchKey:S}}}),zs=""+new URL("img-connect-wallet_2x.ff62feba.png",import.meta.url).href,Hs=""+new URL("img-connect-wallet_2x.deb6e876.png",import.meta.url).href;const ne=e=>(x("data-v-513a0eae"),e=e(),ee(),e),Ws={class:"position-title"},Gs=ne(()=>s("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),Js=[Gs],Ys={class:"position-tab"},Zs={class:"search-tab"},Qs={key:0,class:"positionNum"},Xs={class:"search-container"},xs={class:"value"},et=ne(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),st=[et],tt={key:0,class:"select-item"},ot=["onClick"],nt={key:0,src:oe,alt:""},at={key:1,class:"fan-img",src:oe,alt:""},it={key:0,class:"loading-global"},lt={key:1,class:"position-list"},rt={key:2,class:"no-data"},dt={key:0,src:$e,alt:""},ut={key:1,src:ye,alt:""},mt={key:3,class:"no-data"},ct={key:0,src:zs,alt:""},pt={key:1,src:Hs,alt:""};function _t(e,l,f,y,S,U){const b=H("mail-outlined"),i=Ie,a=H("appstore-outlined"),m=be,D=X,h=Ks,N=ge;return o(),n("div",{class:O(e.list&&e.list.length===0&&e.wallet.connected||!e.wallet.connected?"position-center position-list-container":"position-list-container")},[s("div",Ws,[s("div",null,t(e.$t("common.concentratedPools")),1),(o(),n("svg",{"aria-hidden":"true",class:O(e.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:l[0]||(l[0]=(...r)=>e.clickRefresh&&e.clickRefresh(...r))},Js,2))]),s("div",Ys,[s("div",Zs,[v(m,{selectedKeys:e.current,"onUpdate:selectedKeys":l[2]||(l[2]=r=>e.current=r),mode:"horizontal"},{default:w(()=>[v(i,{key:"pools",onClick:l[1]||(l[1]=r=>e.router.push("/pools"))},{icon:w(()=>[v(b)]),default:w(()=>[R(" "+t(e.$t("menu.pools")),1)]),_:1}),v(i,{key:"position"},{icon:w(()=>[v(a)]),default:w(()=>[R(" "+t(e.$t("common.myPosition")),1),e.list.length>0?(o(),n("span",Qs,"("+t(e.list.length)+")",1)):k("",!0)]),_:1})]),_:1},8,["selectedKeys"])]),s("div",Xs,[s("div",{class:"search-label",onClick:l[3]||(l[3]=W(r=>e.label=!e.label,["stop"]))},[s("span",null,t(e.$t("newAdd.label")),1),s("div",xs,t(e.labelValue),1),(o(),n("svg",{"aria-hidden":"true",class:O(e.label?"show-icon icon":"icon")},st,2)),e.label?(o(),n("div",tt,[(o(!0),n(F,null,L(e.labelList,(r,g)=>(o(),n("div",{key:g,class:"select-menu-item",onClick:c=>e.changeSortLabel(r)},t(r),9,ot))),128))])):k("",!0)]),s("div",{class:"search-select",onClick:l[4]||(l[4]=W(r=>e.select=!e.select,["stop"]))},[s("div",null,[R(" TVL "),e.select?(o(),n("img",nt)):(o(),n("img",at))])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(o(),n("div",it,[v(D)])):k("",!0),e.list&&e.list.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(o(),n("div",lt,[(o(!0),n(F,null,L(e.list,(r,g)=>(o(),G(h,{key:g,"p-item":r},null,8,["p-item"]))),128))])):k("",!0),e.list&&e.list.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(o(),n("div",rt,[e.store.theme=="default"?(o(),n("img",dt)):(o(),n("img",ut)),s("span",null,t(e.$t("common.noLiquidityPositions")),1)])):k("",!0),e.wallet.connected?k("",!0):(o(),n("div",mt,[e.store.theme=="default"?(o(),n("img",ct)):(o(),n("img",pt)),v(N,{class:"connect-wallet",onClick:l[5]||(l[5]=r=>e.wallet.setIsShowWalletModal(!0))},{default:w(()=>[R(t(e.$t("button.connectWallet")),1)]),_:1})]))],2)}const It=V(Ms,[["render",_t],["__scopeId","data-v-513a0eae"]]);export{It as default};
