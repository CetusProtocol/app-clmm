import{m as yo,e as wo,s as G,a as U,o as qo,u as fo,d as ro,q as Ro,c as oo,k as Oo}from"./pool.065c1ad3.js";import{a as J,l as r,r as q,e as K,o as n,f as e,h as s,i as w,v as h,u as b,c as j,w as A,S as Vo,B as go,j as T,p as ao,k as io,s as ko,t as eo,x as D,b as Po,A as po,F as W,E as no,P as cs,q as $o,z as vo,N as Wo,M as Ao,H as Ho,Q as us}from"./entry.271506b4.js";/* empty css              */import{a as lo,u as Io}from"./sha256.8e951594.js";import{u as co}from"./farms.b6cec05a.js";import{R as Fo}from"./farms-range.d7dbb9e3.js";import{_ as zo}from"./apr-tips.4d67563d.js";import{i as Lo}from"./import-icon.de3e6c66.js";/* empty css              *//* empty css              */import{_ as Qo}from"./img-connect-wallet_2x.d3b3de96.js";import{_ as Go}from"./img-no-Positions_2x.8c52a29e.js";import{_ as ms}from"./upgrade-loading.d2227823.js";import{p as _s}from"./precision.9d58cda5.js";import"./decimal.0bdeb344.js";import"./icon_rewards_2x.859a6fe6.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const ps=J({setup(){const o=lo(),l=r(()=>o),_=co(),u=r(()=>_),p=r(()=>Object.values(u.value.farmsRewardObj)),a=r(()=>p.value.reduce(function(X,F){const O=F&&F.amountUsd?F.amountUsd:0;return Number(O)>.01?qo(Number(X)).plus(G(Number(O),2)).toString():qo(Number(X)).plus(Number(O)).toString()},0)),i=r(()=>u.value.farmsPositionList),d=r(()=>u.value.farmsAllPositionLoading),v=r(()=>u.value.farmsPoolListLoading),$=Io(),m=yo("Sui"),f=wo("Sui"),{setIsShowSuccess:k,setIsShowRejected:C,setIsShowWaiting:t,setTransactionDesc:B,setTransactionTxid:S}=$,P=q(!1);return{farmsPoolListLoading:v,wallet:l,farms:u,totalRwadrdUsd:a,sFixD:G,claimAllPoolReward:async Z=>{P.value=!0;const X=[];i.value.forEach(F=>{F.positionSource=="farming"&&X.push({pool_id:F.pool_id,position_nft_id:F.id})}),S(""),B("Claim Rewards"),t(!0);try{const F=await m.batchHarvest(X),O=await l.value.currentWallet.signAndExecuteTransactionBlock(F);let R=f.handleTx(O);if(R&&R.hash){S(R.hash),t(!1),k(!0);let H={res:R.res,title:"Claim",hash:R.hash};f.showTransitionPending(H),await f.watchTransaction(H)&&setTimeout(()=>{_.getFarmsPoolList()},4e3)}else t(!1),C(!0);P.value=!1}catch{t(!1),C(!0),P.value=!1}},loading:P,addCommom:U,farmsAllPositionLoading:d}}});const Jo=o=>(ao("data-v-d521a357"),o=o(),io(),o),fs={class:"farms-banner-bg"},hs={class:"farms-banner"},vs={class:"farms-banner-center"},gs=Jo(()=>s("div",{class:"title"},"Farms",-1)),bs=Jo(()=>s("div",{class:"desc"},"Stake your positions to earn higher yield.",-1)),$s={class:"claim-rewards"},ys={class:"claim-title"},ws={key:0,class:"loading-spin"},ks={key:1},Is={key:2},Ss={class:"claim-content"};function Ps(o,l,_,u,p,a){const i=Vo,d=go;return n(),e("div",fs,[s("div",hs,[s("div",vs,[gs,bs,s("div",$s,[s("div",ys,[o.farmsAllPositionLoading||o.farmsPoolListLoading?(n(),e("span",ws,[w(i)])):o.wallet.address?(n(),e("span",ks,h(Number(o.totalRwadrdUsd)>0&&Number(o.totalRwadrdUsd)<.01?"<$0.01":`$${("addCommom"in o?o.addCommom:b(U))(("sFixD"in o?o.sFixD:b(G))(o.totalRwadrdUsd||0,2))}`),1)):(n(),e("span",Is,"--"))]),s("div",Ss,[o.wallet.address?(n(),j(d,{key:0,class:"claim-btn",loading:o.loading,disabled:Number(o.totalRwadrdUsd)==0||o.farmsAllPositionLoading,onClick:o.claimAllPoolReward},{default:A(()=>[T(" Claim All Rewards ")]),_:1},8,["loading","disabled","onClick"])):(n(),j(d,{key:1,class:"claim-btn",onClick:l[0]||(l[0]=v=>o.wallet.setIsShowWalletModal(!0))},{default:A(()=>[T("Connect")]),_:1}))])])])])])}const Ko=K(ps,[["render",Ps],["__scopeId","data-v-d521a357"]]),Ls=J({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=q(!0);return{sFixD:G,direct:o}}});const Cs=o=>(ao("data-v-14f67ada"),o=o(),io(),o),Us={class:"valid-range"},Ts=Cs(()=>s("div",{class:"title"},"Valid Range",-1));function js(o,l,_,u,p,a){const i=Fo;return n(),e("div",Us,[Ts,w(i,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const Os=K(Ls,[["render",js],["__scopeId","data-v-14f67ada"]]),Rs=J({props:{poolInfo:{type:Object,default:()=>({})}},setup(){return{}}});const As={class:"pool"},Fs={class:"pool-info"},Ns={class:"token-logo"},Ds={alt:""},Bs={alt:""},Es={class:"token-symbol"},Ms={class:"symbol"},qs={class:"fee-rate"};function Vs(o,l,_,u,p,a){var v,$,m,f;const i=Os,d=ko("image");return n(),e("div",As,[s("div",Fs,[s("div",Ns,[eo(s("img",Ds,null,512),[[d,(v=o.poolInfo.coinA)==null?void 0:v.logo_url]]),eo(s("img",Bs,null,512),[[d,($=o.poolInfo.coinB)==null?void 0:$.logo_url]])]),s("div",Es,[s("div",Ms,h((m=o.poolInfo.coinA)==null?void 0:m.symbol)+" - "+h((f=o.poolInfo.coinB)==null?void 0:f.symbol),1),s("div",qs,h(o.poolInfo.fee),1)])]),w(i,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const Xo=K(Rs,[["render",Vs],["__scopeId","data-v-c027f63c"]]),Ws=J({props:{currentTab:{type:String,default:""},rewardInfo:{type:Object,default:()=>({})}},setup(){const o=fo(),l=r(()=>o);return{sFixD:G,addCommom:U,getCoinIcon:u=>{var p;return((p=l.value.tokensObj[u])==null?void 0:p.logo_url)||Lo("/image/coins/sui-unknown.png")}}}});const Hs={key:0,class:"rewards-day"},zs={class:"rewards-day-box"},Qs={alt:""};function Gs(o,l,_,u,p,a){const i=ko("image");return o.rewardInfo.allocate_point>0||o.currentTab!=="Live"?(n(),e("div",Hs,[s("div",null,[s("div",zs,[eo(s("img",Qs,null,512),[[i,o.getCoinIcon(o.rewardInfo.reward_coin)]]),s("span",null,h(("addCommom"in o?o.addCommom:b(U))(("sFixD"in o?o.sFixD:b(G))(o.rewardInfo.emission_per_day,4)))+" "+h(o.rewardInfo.symbol),1)])])])):D("",!0)}const Yo=K(Ws,[["render",Gs],["__scopeId","data-v-48e4e83a"]]),Js=J({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const l=fo(),_=r(()=>l);return{addCommom:U,decimalUi:ro,fixD:Ro,getCoinIcon:p=>{var a;return((a=_.value.tokensObj[p])==null?void 0:a.logo_url)||Lo("/image/coins/sui-unknown.png")}}}});const Ks={class:"hover-rewarder"},Xs={class:"rewarder-info"},Ys={class:"left-rewarder"},Zs={alt:""},xs={class:"right-rewarder"},ot={class:"amount"},st={key:0,class:"amount-usd"},tt={key:1,class:"amount-usd"},nt={class:"rewarder-info"},et={class:"left-rewarder"},at={alt:""},it={class:"right-rewarder"},lt={class:"amount"},rt={key:0,class:"amount-usd"},dt={key:1,class:"amount-usd"};function ct(o,l,_,u,p,a){const i=ko("image");return n(),e("div",Ks,[s("div",Xs,[s("div",Ys,[eo(s("img",Zs,null,512),[[i,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinB.address:o.positionInfo.coinA.address)]]),s("span",null,h(o.positionInfo.needReverse?o.positionInfo.coinB.symbol:o.positionInfo.coinA.symbol),1)]),s("div",xs,[s("div",ot,h(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:b(U))(("decimalUi"in o?o.decimalUi:b(ro))(o.positionInfo.amountB,o.positionInfo.coinB.decimals)):("addCommom"in o?o.addCommom:b(U))(("decimalUi"in o?o.decimalUi:b(ro))(o.positionInfo.amountA,o.positionInfo.coinA.decimals))),1),o.positionInfo.needReverse?(n(),e("div",tt,h(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("fixD"in o?o.fixD:b(Ro))(o.positionInfo.amountBUsd,2):"<$0.01"),1)):(n(),e("div",st,h(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("fixD"in o?o.fixD:b(Ro))(o.positionInfo.amountAUsd,2):"<$0.01"),1))])]),s("div",nt,[s("div",et,[eo(s("img",at,null,512),[[i,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinA.address:o.positionInfo.coinB.address)]]),s("span",null,h(o.positionInfo.needReverse?o.positionInfo.coinA.symbol:o.positionInfo.coinB.symbol),1)]),s("div",it,[s("div",lt,h(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:b(U))(("decimalUi"in o?o.decimalUi:b(ro))(o.positionInfo.amountA,o.positionInfo.coinA.decimals)):("addCommom"in o?o.addCommom:b(U))(("decimalUi"in o?o.decimalUi:b(ro))(o.positionInfo.amountB,o.positionInfo.coinB.decimals))),1),o.positionInfo.needReverse?(n(),e("div",dt,h(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("addCommom"in o?o.addCommom:b(U))(("decimalUi"in o?o.decimalUi:b(ro))(o.positionInfo.amountAUsd,2)):"<$0.01"),1)):(n(),e("div",rt,h(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("addCommom"in o?o.addCommom:b(U))(("decimalUi"in o?o.decimalUi:b(ro))(o.positionInfo.amountBUsd,2)):"<$0.01"),1))])])])}const Zo=K(Js,[["render",ct],["__scopeId","data-v-0ca1f131"]]),ut=J({components:{FarmsPositionAmountTips:Zo},props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const l=lo(),_=r(()=>l),u=co(),p=r(()=>u),a=wo("Sui"),i=yo("Sui"),d=q(!1),v=Io();r(()=>v);const $=Po(),{setIsShowSuccess:m,setIsShowRejected:f,setIsShowWaiting:k,setTransactionDesc:C,setTransactionTxid:t}=v,B=async()=>{d.value=!0,t(""),C(`Stake ${o.positionInfo.name}`),k(!0);const y={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},I=O.value[o.positionInfo.clmmPool||o.positionInfo.poolAddress].id;try{const E=await i.farmsDeposit(y,I),z=await _.value.currentWallet.signAndExecuteTransactionBlock(E);u.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let M=a.handleTx(z);if(M&&M.hash){t(M.hash),k(!1),m(!0);let to={res:M.res,title:"Staked",hash:M.hash};a.showTransitionPending(to),await a.watchTransaction(to)&&setTimeout(()=>{u.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else k(!1),f(!0)}catch{k(!1),f(!0),d.value=!1}},S=async()=>{d.value=!0,t(""),C(`Unstake ${o.positionInfo.name}`),k(!0);const y=O.value[o.positionInfo.clmmPool].id,I=o.positionInfo.id;try{const E=await i.farmsWithdraw(y,I),z=await _.value.currentWallet.signAndExecuteTransactionBlock(E);u.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let M=a.handleTx(z);if(M&&M.hash){t(M.hash),k(!1),m(!0);let to={res:M.res,title:"Unstaked",hash:M.hash};a.showTransitionPending(to),await a.watchTransaction(to)&&setTimeout(()=>{u.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else k(!1),f(!0)}catch{k(!1),f(!0),d.value=!1}},P=async()=>{d.value=!0,t(""),C("Claim rewards"),k(!0);const y={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const I=await i.harvestFarms(y),E=await _.value.currentWallet.signAndExecuteTransactionBlock(I);u.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let z=a.handleTx(E);if(z&&z.hash){t(z.hash),k(!1),m(!0);let M={title:"Claim",res:z.res,hash:z.hash};a.showTransitionPending(M),await a.watchTransaction(M)&&setTimeout(()=>{u.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else k(!1),f(!0);d.value=!1}catch{k(!1),f(!0),d.value=!1}},V=r(()=>p.value.farmsRewardObj),Z=fo(),X=r(()=>Z),F=r(()=>p.value.farmsLoadingObj),O=r(()=>p.value.farmsPoolObj);return{sFixD:G,stake:B,loading:d,unStake:S,router:$,claim:P,farmsRewardObj:V,getCoinIcon:y=>{var I;return((I=X.value.tokensObj[y])==null?void 0:I.logo_url)||Lo("/image/coins/sui-unknown.png")},toPositionDetails:y=>{y.positionSource=="clmm"?$.push(`/new-position-detail?collect=${y.collectionName}&token=${y.name}&address=${y.pool}&pos=${y.pos_object_id}`):$.push(`/new-position-detail?position_nft_id=${y.id}&positionSource=farming`)},farmsLoadingObj:F,addCommom:U}}}),xo=""+globalThis.__publicAssetsURL("sui-image/position-active.png");const Co=o=>(ao("data-v-bedebc46"),o=o(),io(),o),mt={class:"farms-position-item"},_t=Co(()=>s("thead",null,[s("tr",null,[s("th",null,"Position"),s("th",null,"Liquidity"),s("th",null,"Earnings"),s("th")])],-1)),pt={class:"position-info"},ft={key:0,class:"status-bg"},ht=Co(()=>s("img",{src:xo,alt:""},null,-1)),vt=[ht],gt={class:"status-text"},bt={class:"name-range"},$t=Co(()=>s("span",null,"Details",-1)),yt=Co(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),wt=[$t,yt],kt={class:"liquidity"},It={class:"rewards-day-box"},St={alt:""},Pt={key:1,class:"rewards-day"},Lt={class:"action-btn"};function Ct(o,l,_,u,p,a){const i=Fo,d=Zo,v=go,$=cs,m=ko("image");return n(),e("div",mt,[s("table",null,[_t,s("tbody",null,[s("tr",null,[s("td",null,[s("div",pt,[s("div",{class:po(["position-status",o.positionInfo.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionInfo.positionStatus=="Active"?(n(),e("div",ft,vt)):D("",!0),s("div",gt,h(o.positionInfo.positionStatus),1)],2),s("div",bt,[s("span",null,h(o.positionInfo.name),1),w(i,{"pool-info":o.positionInfo},null,8,["pool-info"])]),s("div",{class:"details",onClick:l[0]||(l[0]=f=>o.toPositionDetails(o.positionInfo))},wt)])]),s("td",null,[s("div",kt,[s("span",null,[T(h(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("addCommom"in o?o.addCommom:b(U))(("sFixD"in o?o.sFixD:b(G))(o.positionInfo.positionUSD,2))}`)+" ",1),w(d,{"position-info":o.positionInfo},null,8,["position-info"])])])]),s("td",null,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),e(W,{key:0},no(o.positionInfo.rewards,f=>(n(),e("div",{key:f.rewarder_type,class:"rewards-day"},[s("div",null,[s("div",It,[eo(s("img",St,null,512),[[m,o.getCoinIcon(f.rewarder_type)]]),s("span",null,h(f.rewarderAmount),1)])])]))),128)):(n(),e("div",Pt,"0"))]),s("td",null,[s("div",Lt,[o.positionInfo.positionSource=="clmm"?(n(),e(W,{key:0},[o.positionInfo&&o.positionInfo.positionStatus!=="Active"?(n(),j($,{key:0},{title:A(()=>[T("Farming rewards are only available for active positions.")]),default:A(()=>[w(v,{class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:A(()=>[T("Stake")]),_:1},8,["loading","disabled","onClick"])]),_:1})):(n(),j(v,{key:1,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:A(()=>[T("Stake")]),_:1},8,["loading","disabled","onClick"]))],64)):(n(),j(v,{key:1,class:"unstake-btn",onClick:o.unStake},{default:A(()=>[T("Unstake")]),_:1},8,["onClick"])),o.positionInfo.positionSource=="clmm"?(n(),j(v,{key:2,class:"claim-btn",disabled:!0},{default:A(()=>[T("↑ Claim")]),_:1})):(n(),j(v,{key:3,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0,onClick:o.claim},{default:A(()=>[T("↑ Claim")]),_:1},8,["disabled","onClick"]))])])])])])])}const os=K(ut,[["render",Ct],["__scopeId","data-v-bedebc46"]]),Ut=J({props:{noDataImg:{type:String,default:""},desc:{type:String,default:""},type:{type:String,default:""},addLiquidityUrl:{type:String,default:""}},setup(){return{walletStore:lo()}}});const Tt={class:"no-data"},jt=["src"],Ot={key:0,class:"desc"};function Rt(o,l,_,u,p,a){const i=go;return n(),e("div",Tt,[s("img",{src:o.noDataImg,alt:""},null,8,jt),o.desc?(n(),e("div",Ot,h(o.desc),1)):D("",!0),o.type=="addLiquidity"?(n(),j(i,{key:1,class:"add-liquidity-btn",onClick:l[0]||(l[0]=d=>o.addLiquidityUrl?o.$router.push(o.addLiquidityUrl):"")},{default:A(()=>[T("Add Liquidity")]),_:1})):D("",!0),o.type=="connectWallet"?(n(),j(i,{key:2,class:"add-liquidity-btn",onClick:l[1]||(l[1]=d=>o.walletStore.setIsShowWalletModal(!0))},{default:A(()=>[T("Connect Wallet")]),_:1})):D("",!0)])}const ss=K(Ut,[["render",Rt],["__scopeId","data-v-130f9462"]]),At=J({components:{FarmsPositionItem:os},props:{currentTab:{type:String,default:""},sortValue:{type:String,default:"APR"}},setup(o){const l=q({}),_=lo(),u=r(()=>_),p=co(),a=r(()=>p),i=r(()=>a.value.farmsPoolList),d=r(()=>a.value.farmsPoolList),v=Io(),$=r(()=>v),m=r(()=>$.value.addressLpTokens),f=q([]),k=r(()=>a.value.myFarmsPoolList),C=Q=>{let Y,x;o.currentTab=="My Farms"&&(Y=u.value.address?k.value:[]),o.currentTab=="Ended"&&(Y=a.value.farmsPoolList.filter(c=>c.status=="Ended")),o.currentTab=="Live"&&(Y=a.value.farmsPoolList.filter(c=>c.status=="Live")),Q=="APR"?x=Y.sort((c,g)=>g.stable_farming.apr-c.stable_farming.apr):x=Y.sort((c,g)=>g.stable_farming.tvl-c.stable_farming.tvl),f.value=x.map(c=>{var g;return{...c,needReverse:c.is_forward===!1,coinA:c.coin_a,coinB:c.coin_b,liquidity:c.tvl_in_usd,vol:c.vol_in_usd_24h,stableFarmingApr:c.stable_farming&&c.stable_farming.apr*100,apr:c.apr_24h.replace("%",""),is_display_rewarder:(g=c==null?void 0:c.rewarder)==null?void 0:g.is_display_rewarder}})};$o(()=>[d.value,o.sortValue,o.currentTab,k.value],([Q,Y])=>{Q&&Q.length>0&&Y&&C(Y)},{immediate:!0});const t=Q=>{if(l.value[Q.clmm_pool_id])l.value[Q.clmm_pool_id]=!1;else{if(l.value[Q.clmm_pool_id]=!0,!u.value.address)return!1;p.getPositionByPool(u.value.address,Q.clmm_pool_id,Q.id)}},B=r(()=>a.value.farmsPositionObj),S=r(()=>a.value.farmsLoadingObj),P=r(()=>a.value.farmsUserUsd),V=r(()=>a.value.farmsRewardObj),Z=r(()=>a.value.farmsPositionList),X=r(()=>a.value.farmsAllPositionLoading),F=Po(),O=yo("Sui"),R=wo("Sui"),{setIsShowSuccess:H,setIsShowRejected:y,setIsShowWaiting:I,setTransactionDesc:E,setTransactionTxid:z}=v,M=async Q=>{const Y=[];Z.value.forEach(x=>{Q==x.clmm_pool_id&&Y.push({pool_id:x.pool_id,position_nft_id:x.id})}),z(""),E("Claim rewards"),I(!0);try{const x=await O.batchHarvest(Y),c=await u.value.currentWallet.signAndExecuteTransactionBlock(x);let g=R.handleTx(c);if(g&&g.hash){z(g.hash),I(!1),H(!0);let L={res:g.res,title:"Claim",hash:g.hash};R.showTransitionPending(L),await R.watchTransaction(L)&&setTimeout(()=>{p.getFarmsPoolList()},4e3)}else I(!1),y(!0)}catch{I(!1),y(!0)}},to=fo(),mo=r(()=>to),Uo=r(()=>mo.value.poolsObj);r(()=>mo.value.tokensObj);const To=q({}),ho=r(()=>a.value.farmsPoolObj);return{wallet:u,walletStore:_,farmsPoolList:i,openMore:t,openMoreObj:l,checkNullObj:oo,router:F,farmsPositionObj:B,farmsLoadingObj:S,farmsUserUsd:P,sFixD:G,farmsRewardObj:V,claimPoolReward:M,farmsAllPositionLoading:X,addCommom:U,addressLpTokens:m,poolsObj:Uo,rewardInfoObj:To,pageList:f,farmsPoolObj:ho}}});const uo=o=>(ao("data-v-8bda247e"),o=o(),io(),o),Ft={class:"farms-table"},Nt=uo(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")]),s("tr",{style:{height:"4px"}})],-1)),Dt={key:0},Bt=["onClick"],Et={class:"staked-tvl"},Mt={class:"apr"},qt={key:0,class:"apr-hover-box"},Vt={class:"farms-reward-box"},Wt={key:0,class:"my-staked"},Ht={key:0,class:"my-staked-loading"},zt={key:0,class:"position-usd"},Qt={key:1,class:"position-usd"},Gt={key:2,class:"position-usd"},Jt={key:3,class:"position-num"},Kt={key:1,class:"my-staked"},Xt=uo(()=>s("div",{class:"position-usd"},"--",-1)),Yt=[Xt],Zt={class:"earned"},xt={key:0,class:"my-staked-loading"},on={key:0,class:"ratio-bg"},sn=uo(()=>s("div",{class:"ratio"},null,-1)),tn=[sn],nn={key:1},en={key:2},an={key:3},ln={key:2},rn={class:"actions"},dn={class:"actions-btn"},cn=["onClick"],un=uo(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),mn=[un],_n={colspan:"7",style:{padding:"0 16px 16px"}},pn={key:0,class:"farm-position-list"},fn={key:0,class:"farm-position-loading"},hn={key:1,class:"farm-position-list"},vn=uo(()=>s("tr",{style:{height:"8px"}},null,-1)),gn={key:1},bn={colspan:"7"},$n={key:0,class:"no-data"},yn=uo(()=>s("img",{src:Qo,alt:""},null,-1)),wn={key:1,class:"no-data"},kn=uo(()=>s("img",{src:Go,alt:""},null,-1)),In=uo(()=>s("span",null,"No farms found",-1)),Sn=[kn,In];function Pn(o,l,_,u,p,a){const i=Xo,d=zo,v=Yo,$=Ao,m=go,f=Vo,k=os,C=ss;return n(),e("div",Ft,[s("table",null,[Nt,o.pageList&&o.pageList.length>0?(n(),e("tbody",Dt,[(n(!0),e(W,null,no(o.pageList,t=>{var B;return n(),e(W,{key:t.id},[s("tr",{onClick:S=>o.openMore(t)},[s("td",null,[w(i,{"pool-info":t},null,8,["pool-info"])]),s("td",null,[s("div",Et," $"+h(("addCommom"in o?o.addCommom:b(U))(t.stable_farming.tvl,2)),1)]),s("td",null,[s("div",Mt,[t.isStableFarming||t.rewarderInfo&&t.rewarderInfo.length>0||(B=t==null?void 0:t.stable_farming)!=null&&B.stable_farming_pool?(n(),e("div",qt,[w(d,{"l-item":t,"rewarder-info":t.rewarder.rewardList,class:"noHover apr-hover-con"},null,8,["l-item","rewarder-info"])])):D("",!0),s("span",null,h((t==null?void 0:t.total_apr)>0&&t.total_apr<1e-4?"<0.01%":`${("addCommom"in o?o.addCommom:b(U))(t.total_apr*100,2)}%`),1)])]),s("td",null,[s("div",Vt,[(n(!0),e(W,null,no(t.rewarders,S=>(n(),j(v,{key:S.reward_coin,"reward-info":S,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("td",null,[o.wallet.address?(n(),e("div",Wt,[o.farmsLoadingObj[t.clmm_pool_id]||o.farmsAllPositionLoading?(n(),e("div",Ht,[w($,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),e(W,{key:1},[o.farmsUserUsd&&o.farmsUserUsd[t.clmm_pool_id]&&o.farmsUserUsd[t.clmm_pool_id].amount>0&&o.farmsUserUsd[t.clmm_pool_id].amount>.01?(n(),e("div",zt,h(Number(o.farmsUserUsd[t.clmm_pool_id].amount)>0&&Number(o.farmsUserUsd[t.clmm_pool_id].amount)<.01?"<$0.01":"$"+("addCommom"in o?o.addCommom:b(U))(o.farmsUserUsd[t.clmm_pool_id].amount,2)),1)):o.farmsUserUsd&&o.farmsUserUsd[t.clmm_pool_id]&&o.farmsUserUsd[t.clmm_pool_id].amount>0&&o.farmsUserUsd[t.clmm_pool_id].amount<.01?(n(),e("div",Qt," <$0.01 ")):(n(),e("div",Gt,"0")),o.farmsUserUsd&&o.farmsUserUsd[t.clmm_pool_id]&&o.farmsUserUsd[t.clmm_pool_id].positionNum?(n(),e("div",Jt,h(o.farmsUserUsd[t.clmm_pool_id].positionNum)+" "+h(o.farmsUserUsd[t.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):D("",!0)],64))])):(n(),e("div",Kt,Yt))]),s("td",null,[s("div",Zt,[o.farmsLoadingObj[t.clmm_pool_id]||o.farmsAllPositionLoading?(n(),e("div",xt,[w($,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[t.clmm_pool_id]&&o.farmsRewardObj[t.clmm_pool_id].amountUsd?(n(),e(W,{key:1},[o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[t.clmm_pool_id]&&o.farmsRewardObj[t.clmm_pool_id].amountUsd>0?(n(),e("div",on,tn)):D("",!0),Number(o.farmsRewardObj[t.clmm_pool_id].amountUsd)>.01?(n(),e("span",nn,"$"+h(("addCommom"in o?o.addCommom:b(U))(("sFixD"in o?o.sFixD:b(G))(o.farmsRewardObj[t.clmm_pool_id].amountUsd||0,2))),1)):Number(o.farmsRewardObj[t.clmm_pool_id].amountUsd)>0&&Number(o.farmsRewardObj[t.clmm_pool_id].amountUsd)<.01?(n(),e("span",en,"<$0.01")):(n(),e("span",an,"0"))],64)):(n(),e("span",ln,"0"))])]),s("td",null,[s("div",rn,[s("div",dn,[w(m,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[t.clmm_pool_id]||!o.farmsRewardObj[t.clmm_pool_id].amountUsd||o.farmsRewardObj[t.clmm_pool_id].amountUsd<=0||o.farmsLoadingObj[t.clmm_pool_id],onClick:vo(S=>o.claimPoolReward(t.clmm_pool_id),["stop"])},{default:A(()=>[T("Claim")]),_:2},1032,["disabled","onClick"]),w(m,{class:"add-liquidity-btn",onClick:vo(S=>o.router.push(`/liquidity/deposit?poolAddress=${t.clmm_pool_id}`),["stop"])},{default:A(()=>[T("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more",onClick:vo(S=>o.openMore(t),["stop"])},[(n(),e("svg",{class:po(["arrow-icon",o.openMoreObj[t.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},mn,2))],8,cn)])])],8,Bt),eo(s("tr",null,[s("td",_n,[o.wallet.address?(n(),e("div",pn,[!("checkNullObj"in o?o.checkNullObj:b(oo))(o.farmsLoadingObj)&&o.farmsLoadingObj[t.clmm_pool_id]||o.farmsAllPositionLoading?(n(),e("div",fn,[w(f)])):o.farmsPositionObj[t.clmm_pool_id]&&o.farmsPositionObj[t.clmm_pool_id].length>0?(n(!0),e(W,{key:1},no(o.farmsPositionObj[t.clmm_pool_id],S=>(n(),j(k,{key:S.clmm_position_id,"current-tab":o.currentTab,"position-info":{...S,clmm_pool_id:t.clmm_pool_id}},null,8,["current-tab","position-info"]))),128)):(n(),j(C,{key:2,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${t.clmm_pool_id}`},null,8,["add-liquidity-url"]))])):(n(),e("div",hn,[w(C,{"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"})]))])],512),[[Wo,!("checkNullObj"in o?o.checkNullObj:b(oo))(o.openMoreObj)&&o.openMoreObj[t==null?void 0:t.clmm_pool_id]]]),vn],64)}),128))])):(n(),e("tbody",gn,[s("tr",null,[s("td",bn,[!o.wallet.connected&&o.currentTab=="My Farms"?(n(),e("div",$n,[yn,w(m,{class:"connect-wallet",onClick:l[0]||(l[0]=t=>o.wallet.setIsShowWalletModal(!0))},{default:A(()=>[T(h(o.$t("button.connectWallet")),1)]),_:1})])):o.pageList.length==0?(n(),e("div",wn,Sn)):D("",!0)])])]))])])}const ts=K(At,[["render",Pn],["__scopeId","data-v-8bda247e"]]),Ln=J({props:{currentTab:{type:String,default:""}},setup(){const o=q(!1),l=lo(),_=r(()=>l),u=co(),p=r(()=>u),a=r(()=>p.value.farmsPoolList);return{isShowMore:o,wallet:_,walletStore:l,farmsPoolList:a}}});const ns=o=>(ao("data-v-f521ea67"),o=o(),io(),o),Cn={class:"farms-table"},Un=ns(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")]),s("tr",{style:{height:"4px",background:"unset"}})],-1)),Tn={class:"pool"},jn={class:"staked-tvl"},On={class:"apr"},Rn={class:"my-staked"},An={class:"actions"},Fn={class:"actions"},Nn={class:"actions"},Dn=ns(()=>s("tr",{style:{height:"8px",background:"unset !important"}},null,-1));function Bn(o,l,_,u,p,a){const i=Ao;return n(),e("div",Cn,[s("table",null,[Un,s("tbody",null,[(n(),e(W,null,no(4,(d,v)=>(n(),e(W,{key:v},[s("tr",null,[s("td",null,[s("div",Tn,[w(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),w(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",jn,[w(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",On,[s("span",null,[w(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),s("td",null,[s("div",Rn,[w(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",An,[w(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Fn,[w(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Nn,[w(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),Dn],64))),64))])])])}const En=K(Ln,[["render",Bn],["__scopeId","data-v-f521ea67"]]),Mn=J({props:{positionStatus:{type:String,default:"Active"},positionInfo:{type:Object,default:()=>({})}},setup(){return{}}});const qn=o=>(ao("data-v-882c76c0"),o=o(),io(),o),Vn={class:"position-info"},Wn={key:0,class:"status-bg"},Hn=qn(()=>s("img",{src:xo,alt:""},null,-1)),zn=[Hn],Qn={class:"status-text"},Gn={class:"name-range"};function Jn(o,l,_,u,p,a){const i=Fo;return n(),e("div",Vn,[s("div",{class:po(["position-status",o.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionStatus=="Active"?(n(),e("div",Wn,zn)):D("",!0),s("div",Qn,h(o.positionStatus),1)],2),s("div",Gn,[s("span",null,h(o.positionInfo.name),1),o.positionStatus=="Active"?(n(),j(i,{key:0,"pool-info":o.positionInfo},null,8,["pool-info"])):D("",!0)])])}const Kn=K(Mn,[["render",Jn],["__scopeId","data-v-882c76c0"]]),Xn=J({props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const l=fo(),_=r(()=>l),u=Po(),p=O=>{var R;return((R=_.value.tokensObj[O])==null?void 0:R.logo_url)||Lo("/image/coins/sui-unknown.png")},a=wo("Sui"),i=yo("Sui"),d=q(!1),v=Io(),$=lo(),m=co(),f=r(()=>$),{setIsShowSuccess:k,setIsShowRejected:C,setIsShowWaiting:t,setTransactionDesc:B,setTransactionTxid:S}=v,P=async()=>{d.value=!0,S(""),B("Claim rewards"),t(!0);const O={pool_id:F.value[o.positionInfo.clmmPool].id,position_nft_id:o.positionInfo.id};try{const R=await i.harvestFarms(O),H=await f.value.currentWallet.signAndExecuteTransactionBlock(R);m.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let y=a.handleTx(H);if(y&&y.hash){S(y.hash),t(!1),k(!0);let I={title:"Claim",res:y.res,hash:y.hash};a.showTransitionPending(I),await a.watchTransaction(I)&&setTimeout(()=>{m.getPositionByPool(f.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else t(!1),C(!0);d.value=!1}catch{t(!1),C(!0),d.value=!1}},V=async()=>{d.value=!0,S(""),B(`Unstake ${o.positionInfo.name}`),t(!0);const O=F.value[o.positionInfo.clmmPool].id,R=o.positionInfo.id;try{const H=await i.farmsWithdraw(O,R),y=await f.value.currentWallet.signAndExecuteTransactionBlock(H);m.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let I=a.handleTx(y);if(I&&I.hash){S(I.hash),t(!1),k(!0);let E={res:I.res,title:"Unstaked",hash:I.hash};a.showTransitionPending(E),await a.watchTransaction(E)&&setTimeout(()=>{m.getPositionByPool(f.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else t(!1),C(!0)}catch{t(!1),C(!0),d.value=!1}},Z=async()=>{d.value=!0,S(""),B(`Stake ${o.positionInfo.name}`),t(!0);const O={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},R=F.value[o.positionInfo.clmmPool].id;try{const H=await i.farmsDeposit(O,R),y=await f.value.currentWallet.signAndExecuteTransactionBlock(H);m.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let I=a.handleTx(y);if(I&&I.hash){S(I.hash),t(!1),k(!0);let E={res:I.res,title:"Staked",hash:I.hash};a.showTransitionPending(E),await a.watchTransaction(E)&&setTimeout(()=>{m.getPositionByPool(f.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else t(!1),C(!0)}catch{t(!1),C(!0),d.value=!1}},X=r(()=>m),F=r(()=>X.value.farmsPoolObj);return{getCoinIcon:p,router:u,claim:P,unStake:V,loading:d,stake:Z,sFixD:G,addCommom:U}}});const es=o=>(ao("data-v-d5540146"),o=o(),io(),o),Yn={class:"farms-position"},Zn={class:"farms-position-box"},xn={class:"position-info-block"},oe={class:"block-item"},se=es(()=>s("div",{class:"leabl"},"Liquidity",-1)),te={class:"text"},ne={class:"earnings"},ee={class:"block-item"},ae=es(()=>s("div",{class:"leabl"},"Earnings",-1)),ie={class:"text"},le={key:0},re={alt:""},de={key:1,class:"rewards-day"},ce={class:"unstake-btn-box"};function ue(o,l,_,u,p,a){const i=Kn,d=go,v=ko("image");return n(),e("div",Yn,[s("div",Zn,[w(i,{"position-info":o.positionInfo},null,8,["position-info"])]),s("div",xn,[s("div",oe,[se,s("div",te,h(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("addCommom"in o?o.addCommom:b(U))(("sFixD"in o?o.sFixD:b(G))(o.positionInfo.positionUSD,2))}`),1)])]),s("div",ne,[s("div",ee,[ae,s("div",ie,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),e(W,{key:0},no(o.positionInfo.rewards,$=>(n(),e("div",{key:$.rewarder_type,class:"rewards-day"},[$.rewarderAmount>0?(n(),e("div",le,[eo(s("img",re,null,512),[[v,o.getCoinIcon($.rewarder_type)]]),s("span",null,h($.rewarderAmount),1)])):D("",!0)]))),128)):(n(),e("div",de,"--"))])]),o.positionInfo.positionSource=="clmm"?(n(),j(d,{key:0,class:"add-liquidity-btn claim-btn",onClick:l[0]||(l[0]=$=>o.router.push(`/new-position-detail?collect=${o.positionInfo.collectionName}&token=${o.positionInfo.name}&address=${o.positionInfo.pool}&pos=${o.positionInfo.pos_object_id}`))},{default:A(()=>[T("+ Add liquidity")]),_:1})):(n(),j(d,{key:1,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0||o.currentTab=="Ended",onClick:o.claim},{default:A(()=>[T("↑ Claim")]),_:1},8,["disabled","onClick"]))]),s("div",ce,[s("div",null,[o.positionInfo.positionSource=="clmm"?(n(),j(d,{key:0,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:A(()=>[T("Stake")]),_:1},8,["loading","disabled","onClick"])):(n(),j(d,{key:1,class:"unstake-btn",onClick:o.unStake},{default:A(()=>[T("Unstake")]),_:1},8,["onClick"]))])])])}const as=K(Xn,[["render",ue],["__scopeId","data-v-d5540146"]]),me=J({components:{FarmsH5Position:as},props:{currentTab:{type:String,default:""},sortValue:{type:String,default:"APR"}},setup(o){const l=q(!1),_=lo(),u=r(()=>_),p=co(),a=r(()=>p),i=r(()=>o.currentTab=="My Farms"?u.value.address?a.value.myFarmsPoolList:[]:o.currentTab=="Ended"?a.value.farmsPoolList.filter(c=>c.status=="Ended"):a.value.farmsPoolList.filter(c=>c.status=="Live")),d=q([]),v=Io(),$=r(()=>v),m=r(()=>$.value.addressLpTokens),f=c=>{const g=i.value.map(L=>{const{stable_farming:N}=m.value[L.clmm_pool_id];return{...L,apr:N.apr,tvl:N.tvl}});c=="APR"?d.value=g.sort((L,N)=>N.apr-L.apr):d.value=g.sort((L,N)=>N.tvl-L.tvl)};$o(()=>[i.value,o.sortValue,m.value],([c,g,L])=>{c&&c.length>0&&g&&L&&!oo(L)&&f(g)},{immediate:!0});const k=r(()=>a.value.farmsUserUsd),C=r(()=>a.value.farmsRewardObj),t=r(()=>a.value.farmsPositionObj),B=r(()=>a.value.farmsPoolListLoading),S=r(()=>a.value.farmsPositionList),P=r(()=>a.value.farmsLoadingObj),V=r(()=>a.value.farmsAllPositionLoading),Z=q({}),X=c=>{if(Z.value[c.clmm_pool_id])Z.value[c.clmm_pool_id]=!1;else{if(Z.value[c.clmm_pool_id]=!0,!u.value.address)return!1;p.getPositionByPool(u.value.address,c.clmm_pool_id,c.id)}},F=yo("Sui"),O=wo("Sui"),{setIsShowSuccess:R,setIsShowRejected:H,setIsShowWaiting:y,setTransactionDesc:I,setTransactionTxid:E}=v,z=async c=>{const g=[];S.value.forEach(L=>{c==L.clmm_pool_id&&g.push({pool_id:L.pool_id,position_nft_id:L.id})}),E(""),I("Claim rewards"),y(!0);try{const L=await F.batchHarvest(g),N=await u.value.currentWallet.signAndExecuteTransactionBlock(L);let _o=O.handleTx(N);if(_o&&_o.hash){E(_o.hash),y(!1),R(!0);let So={res:_o.res,title:"Claim",hash:_o.hash};O.showTransitionPending(So),await O.watchTransaction(So)&&setTimeout(()=>{p.getFarmsPoolList()},4e3)}else y(!1),H(!0)}catch{y(!1),H(!0)}},M=Po(),to=fo(),mo=r(()=>to),Uo=r(()=>mo.value.poolsObj),To=r(()=>mo.value.tokensObj),ho=q({}),Q=(c,g)=>c&&g?_s.plus(Oo(c),Oo(g)):c||0,Y=c=>{let g=0;return c&&c.forEach(L=>{g+=Oo(String(L))}),String(ro(String(g),2))},x=(c,g,L)=>{Object.keys(c).forEach(N=>{var jo,No,Do;const _o=(jo=g[N])==null?void 0:jo.apr_7day,So=Q((No=g[N])==null?void 0:No.apr_7day,Y((Do=g[N])==null?void 0:Do.rewarder_apr));ho.value[N]={...c[N],apr:String(_o).replace("%",""),aprTotal:So},ho.value[N].rewards=[],c[N].rewarderInfo.forEach((ls,Bo)=>{var Eo,Mo;const rs=(Eo=L[ls.coinAddress])==null?void 0:Eo.symbol,ds=(Mo=g[N])==null?void 0:Mo.rewarder_apr[Bo];ho.value[N].rewards.push({symbol:rs,rewarderApr:ds,rewarder_display:c[N][`rewarder_display${Bo+1}`]})})})};return $o(()=>[Uo.value,m.value,To.value],([c,g,L])=>{c&&!oo(c)&&g&&!oo(g)&&L&&!oo(L)&&x(c,g,L)},{immediate:!0}),{isShowMore:l,wallet:u,farmsPoolList:d,farmsUserUsd:k,sFixD:G,farmsRewardObj:C,farmsPositionObj:t,openMore:X,checkNullObj:oo,openMoreObj:Z,farmsPoolListLoading:B,claimPoolReward:z,router:M,addCommom:U,farmsLoadingObj:P,farmsAllPositionLoading:V,addressLpTokens:m,rewardInfoObj:ho}}});const so=o=>(ao("data-v-e50cf02b"),o=o(),io(),o),_e={key:0,class:"farms-pool-list"},pe={class:"farms-block"},fe={class:"item-block"},he=so(()=>s("div",{class:"leabl"},"Staked TVL",-1)),ve={class:"text"},ge={class:"item-block apr"},be=so(()=>s("div",{class:"leabl"},"APR",-1)),$e={class:"text"},ye={class:"apr-hover-box"},we={class:"item-block"},ke=so(()=>s("div",{class:"leabl"},"Rewards / day",-1)),Ie={class:"text"},Se={class:"item-block my-staked"},Pe=so(()=>s("div",{class:"leabl"},"My Staked",-1)),Le={key:0,class:"text"},Ce={class:"position-usd"},Ue={key:0,class:"position-num"},Te={key:1,class:"text"},je=so(()=>s("div",{class:"position-usd"},"--",-1)),Oe=[je],Re={class:"item-block"},Ae=so(()=>s("div",{class:"leabl"},"Earned",-1)),Fe={class:"text earned-box"},Ne={class:"earned"},De={key:0,class:"my-staked-loading"},Be=so(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),Ee={key:0},Me={key:1},qe={key:2},Ve={key:2},We={class:"add-liquidity-box"},He=["onClick"],ze=so(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Qe=[ze],Ge={key:1,class:"upgrade-loading"},Je={key:2,class:"no-data"},Ke=so(()=>s("img",{src:Qo,alt:""},null,-1)),Xe={key:3,class:"no-data"},Ye=so(()=>s("img",{src:Go,alt:""},null,-1)),Ze=so(()=>s("span",null,"No Data",-1)),xe=[Ye,Ze];function oa(o,l,_,u,p,a){const i=Xo,d=zo,v=Yo,$=Ao,m=go,f=as,k=ss,C=ms;return n(),e(W,null,[o.farmsPoolListLoading?o.farmsPoolListLoading?(n(),e("div",Ge,[w(C,{type:"poolsCard",loading:!0})])):D("",!0):(n(),e("div",_e,[(n(!0),e(W,null,no(o.farmsPoolList,t=>{var B,S,P;return n(),e("div",{key:t.id,class:"farms-item"},[w(i,{"pool-info":t},null,8,["pool-info"]),s("div",pe,[s("div",fe,[he,s("div",ve,"$"+h(("addCommom"in o?o.addCommom:b(U))(t.tvl,2)),1)]),s("div",ge,[be,s("div",$e,[T(h(t.total_apr>0&&t.total_apr<1e-4?"<0.01%":("addCommom"in o?o.addCommom:b(U))(t.total_apr*100,2))+"% ",1),s("div",ye,[t.isStableFarming||t.rewarderInfo&&t.rewarderInfo.length>0||(B=t==null?void 0:t.stable_farming)!=null&&B.stable_farming_pool?(n(),j(d,{key:0,"l-item":t,"rewarder-info":t.rewarder.rewardList,class:"noHover apr-hover-con"},null,8,["l-item","rewarder-info"])):D("",!0)])])]),s("div",we,[ke,s("div",Ie,[(n(!0),e(W,null,no(t.rewarders,V=>(n(),j(v,{key:V.reward_coin,"reward-info":V,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("div",Se,[Pe,o.wallet.address?(n(),e("div",Le,[s("div",Ce,h(Number((S=o.farmsUserUsd[t.clmm_pool_id])==null?void 0:S.amount)>0&&Number((P=o.farmsUserUsd[t.clmm_pool_id])==null?void 0:P.amount)<.01?"<$0.01":"$"+("addCommom"in o?o.addCommom:b(U))(o.farmsUserUsd&&o.farmsUserUsd[t.clmm_pool_id]&&o.farmsUserUsd[t.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[t.clmm_pool_id]&&o.farmsUserUsd[t.clmm_pool_id].positionNum?(n(),e("div",Ue,h(o.farmsUserUsd[t.clmm_pool_id].positionNum)+" "+h(o.farmsUserUsd[t.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):D("",!0)])):(n(),e("div",Te,Oe))]),s("div",Re,[Ae,s("div",Fe,[s("div",Ne,[o.farmsLoadingObj[t.clmm_pool_id]||o.farmsAllPositionLoading?(n(),e("div",De,[w($,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[t.clmm_pool_id]&&o.farmsRewardObj[t.clmm_pool_id].amountUsd?(n(),e(W,{key:1},[Be,o.farmsRewardObj[t.clmm_pool_id].amountUsd>.01?(n(),e("span",Ee,"$"+h(("addCommom"in o?o.addCommom:b(U))(("sFixD"in o?o.sFixD:b(G))(o.farmsRewardObj[t.clmm_pool_id].amountUsd||0,2))),1)):o.farmsRewardObj[t.clmm_pool_id].amountUsd>0&&o.farmsRewardObj[t.clmm_pool_id].amountUsd<.01?(n(),e("span",Me,"<$0.01")):(n(),e("span",qe,"0"))],64)):(n(),e("span",Ve,"--"))]),w(m,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[t.clmm_pool_id]||o.farmsRewardObj[t.clmm_pool_id].amountUsd<=0,onClick:vo(V=>o.claimPoolReward(t.clmm_pool_id),["stop"])},{default:A(()=>[T("Claim")]),_:2},1032,["disabled","onClick"])])])]),s("div",We,[w(m,{class:"add-liquidity-btn",onClick:vo(V=>o.router.push(`/liquidity/deposit?poolAddress=${t.clmm_pool_id}`),["stop"])},{default:A(()=>[T("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more-btn",onClick:V=>o.openMore(t)},[(n(),e("svg",{class:po(["arrow-icon",!("checkNullObj"in o?o.checkNullObj:b(oo))(o.openMoreObj)&&o.openMoreObj[t==null?void 0:t.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},Qe,2))],8,He),(n(!0),e(W,null,no(o.farmsPositionObj[t.clmm_pool_id],V=>eo((n(),j(f,{key:V.clmm_pool_id,"current-tab":o.currentTab,"position-info":{...V,clmm_pool_id:t.clmm_pool_id}},null,8,["current-tab","position-info"])),[[Wo,!("checkNullObj"in o?o.checkNullObj:b(oo))(o.openMoreObj)&&o.openMoreObj[t==null?void 0:t.clmm_pool_id]]])),128)),o.farmsPositionObj&&o.farmsPositionObj[t.clmm_pool_id]&&o.farmsPositionObj[t.clmm_pool_id].length==0?(n(),j(k,{key:0,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${t.clmm_pool_id}`},null,8,["add-liquidity-url"])):D("",!0),o.wallet.address?D("",!0):(n(),j(k,{key:1,"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"},null,8,["no-data-img"]))])}),128))])),!o.wallet.connected&&o.currentTab=="My Farms"?(n(),e("div",Je,[Ke,w(m,{class:"connect-wallet",onClick:l[0]||(l[0]=t=>o.wallet.setIsShowWalletModal(!0))},{default:A(()=>[T(h(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(n(),e("div",Xe,xe)):D("",!0)],64)}const is=K(me,[["render",oa],["__scopeId","data-v-e50cf02b"]]),sa=J({setup(o,l){const _=q("Live"),u=q("TVL"),p=q(!1),a=q(!1),i=co(),d=r(()=>i),v=lo(),$=r(()=>v),m=r(()=>_.value=="My Farms"?$.value.address?d.value.myFarmsPoolList:[]:_.value=="Ended"?d.value.farmsPoolList.filter(P=>P.status=="Ended"):d.value.farmsPoolList.filter(P=>P.status=="Live")),f=r(()=>d.value.farmsPoolList.filter(P=>P.status=="Ended")),k=r(()=>f.value.length>0?["Live","Ended","My Farms"]:["Live","My Farms"]),C=P=>m.value.length,t=()=>{p.value=!0,i.getFarmsPoolList(),setTimeout(()=>{p.value=!1},1e3)},B=P=>{_.value=P,l.emit("changeTab",P)},S=P=>{u.value=P,l.emit("changeSortValue",P)};return Ho(()=>{document.addEventListener("click",()=>{a.value=!1})}),{isOpenList:a,tabList:k,currentTab:_,sortValue:u,clickRefresh:t,isRefresh:p,farmsPoolList:m,getListNum:C,changeTab:B,changeSortValue:S}}});const bo=o=>(ao("data-v-29027bb0"),o=o(),io(),o),ta={class:"farms-tab"},na={class:"tab-left"},ea=["onClick"],aa={key:0},ia={class:"tab-right"},la={class:"sort-select"},ra=bo(()=>s("div",null,"Sort by",-1)),da={class:"showSort"},ca=bo(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),ua=bo(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),ma=[ua],_a={key:0,class:"sort-list"},pa=bo(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),fa=bo(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),ha={class:"refresh"},va=bo(()=>s("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),ga=[va];function ba(o,l,_,u,p,a){return n(),e("div",ta,[s("div",na,[(n(!0),e(W,null,no(o.tabList,i=>(n(),e("div",{key:i,class:po(["tab-item",o.currentTab==i?"tab-item-active":""]),onClick:d=>o.changeTab(i)},[s("span",null,h(i=="Ended"?"Finished":i),1),o.currentTab==i&&o.getListNum(i)?(n(),e("p",aa,h(o.getListNum(i)),1)):D("",!0)],10,ea))),128))]),s("div",ia,[s("div",la,[s("div",{class:"sort-select-box",onClick:l[0]||(l[0]=vo(i=>o.isOpenList=!o.isOpenList,["stop"]))},[ra,s("div",da,[s("span",null,h(o.sortValue),1),ca,(n(),e("svg",{class:po(["arrow-icon",o.isOpenList?"arrow-icon-active":""]),"aria-hidden":"true"},ma,2))])]),o.isOpenList?(n(),e("div",_a,[s("div",{class:"sort-item",onClick:l[1]||(l[1]=i=>o.changeSortValue("APR"))},[T("APR "),pa]),s("div",{class:"sort-item",onClick:l[2]||(l[2]=i=>o.changeSortValue("TVL"))},[T("TVL "),fa])])):D("",!0)]),s("div",ha,[(n(),e("svg",{"aria-hidden":"true",class:po(["refresh-icon",o.isRefresh?"refreshing":""]),onClick:l[3]||(l[3]=(...i)=>o.clickRefresh&&o.clickRefresh(...i))},ga,2))])])])}const $a=K(sa,[["render",ba],["__scopeId","data-v-29027bb0"]]),ya=J({components:{FarmsBanner:Ko,FarmsTabs:$a,FarmsTable:ts,FarmsH5List:is},setup(){const o=co(),l=r(()=>o),_=r(()=>l.value.farmsPoolListLoading),u=q("TVL"),p=r(()=>l.value.farmsPoolList),a=lo(),i=r(()=>a),d=fo(),v=r(()=>d);$o(()=>[i.value.address,p.value,v.value.tokensObj,v.value.RATES],([m,f,k,C])=>{m&&f.length>0&&!oo(k)&&!oo(C)&&o.getPositionByAllPool(m)},{immediate:!0}),Ho(()=>{o.getFarmsPoolList()}),$o(()=>i.value.address,m=>{m||o.logOut()},{immediate:!0});const $=q("Live");return{farmsPoolListLoading:_,currentTab:$,sortValue:u}}});const wa={class:"farm-container"},ka={class:"farm-container-center"};function Ia(o,l,_,u,p,a){const i=Ko,d=us("FarmsTabs"),v=ts,$=En,m=is;return n(),e("div",wa,[w(i),s("div",ka,[w(d,{onChangeTab:l[0]||(l[0]=f=>{o.currentTab=f}),onChangeSortValue:l[1]||(l[1]=f=>{o.sortValue=f})}),o.farmsPoolListLoading?(n(),j($,{key:1,"current-tab":o.currentTab},null,8,["current-tab"])):(n(),j(v,{key:0,"current-tab":o.currentTab,"sort-value":o.sortValue},null,8,["current-tab","sort-value"])),w(m,{"current-tab":o.currentTab,"sort-value":o.sortValue},null,8,["current-tab","sort-value"])])])}const Wa=K(ya,[["render",Ia],["__scopeId","data-v-656fe488"]]);export{Wa as default};
