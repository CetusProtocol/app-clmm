import{i as y}from"./import-icon.de3e6c66.js";import{u as ue,e as te,a as ce,p as de,A as pe}from"./pool.07080a73.js";import{a as be,M as ve,a5 as _e,l as me,m as N,r as g,y as fe,D as Z,ab as he,e as ke,K as z,q as ge,o as i,c as oe,w as m,h as a,t as j,a3 as Ce,f as r,x as M,F as q,s as K,z as E,u as C,v as p,i as O,j as J,L as ye,N as we,ac as Se,J as Le,p as Ie,k as Te}from"./entry.5ea44be7.js";/* empty css              *//* empty css              */import{a as $e,u as ne}from"./sha256.449ab3b5.js";import{_ as Ne,a as Oe}from"./img-no-Positions_2x.b37def12.js";const Ae=be({components:{Modal:ve,LoadingOutlined:_e},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""},isCreatePoolToCoin:{type:Boolean,default:!1},isCreatePoolFromCoin:{type:Boolean,default:!1}},setup(e,b){const{t:l,locale:ae}=me(),W=$e(),f=N(()=>W),L=ue(),u=N(()=>L),B=ne(),h=N(()=>B),A=N(()=>{var t;return(t=h.value)==null?void 0:t.filterCreatePoolCoin}),F=g([l("tab.all"),l("tab.native"),l("tab.layerZero"),l("tab.wormhole"),l("tab.celer")]),d=g(l("tab.all")),o=g(l("tab.all")),S=ne(),I=N(()=>S.chainName),T=g([]),P=g(null);fe(()=>{});const R=g(!1);Z(d,t=>{t!==l("tab.all")&&(R.value=!1),t==l("tab.all")?o.value=l("tab.all"):t==l("tab.layerZero")?o.value=l("tab.layerZero"):t==l("tab.wormhole")?o.value=l("tab.wormhole"):t==l("tab.celer")?o.value=l("tab.celer"):t==l("tab.native")&&(o.value=l("tab.native")),D(P.value)});const D=async t=>{var Q,X,Y,V,x,ee,se;let c=[],_=u.value.tokens;if(!(h.value.chainName&&_&&_[0]&&h.value.chainName.toLowerCase().includes((Q=_[0])==null?void 0:Q.chain))){T.value=[];return}let U=_;if(t&&t.split("::")&&t.split("::").length==3&&I.value=="Sui"){const n=ce("Sui");try{const s=u.value.tokensObj[t]||await n.getTokenBySymbol(u.value.tokens,t);s&&((X=_.filter(v=>(v==null?void 0:v.address)===(s==null?void 0:s.address)))==null?void 0:X.length)<1&&(L.setNewTokens({[t]:s}),U=_.concat(s))}catch{}}let H=!1;for(const n of Object.keys(U)){let s=he(U[n]);const v=f.value.assets[s.address]&&f.value.assets[s.address].balance?de(f.value.assets&&f.value.assets[s.address].balance,s.decimals):0;e.lastSelectCoin&&s&&s.address===e.lastSelectCoin?(s.unusable=!0,H=!0):s.unusable=!1;const ie=((Y=u.value.tokensObj[s.address])==null?void 0:Y.labels)&&((V=u.value.tokensObj[s.address])==null?void 0:V.labels[0]),re=u.value.tokensObj[s.address]?(x=u.value.tokensObj[s.address])==null?void 0:x.name:s.name;s={...s,balance:v,labels:ie,name:re,sort:(h.value.chainName==="Aptos"?s.symbol=="APT":s.symbol=="SUI")?1:-1},c.push(s)}if(!H&&u.value.tokensObj[e.lastSelectCoin]){const n={...u.value.tokensObj[e.lastSelectCoin],unusable:!0};c.push(n)}let $;f.value.address?$=c.sort((n,s)=>s.balance-n.balance):$=c;let k=[];if(t){const n=$.filter(s=>s.symbol.toLowerCase().indexOf(t.toLowerCase())!==-1||s.address.toLowerCase().indexOf(t.toLowerCase())!==-1||s.address.toLowerCase().indexOf(pe(t).full_address.toLowerCase())!==-1||s.name.toLowerCase().indexOf(t.toLowerCase())!==-1);d.value!==l("tab.all")?k=n.filter(v=>d.value==l("tab.native")?!v.labels:v.labels&&v.labels.toLowerCase()==d.value.toLowerCase()):k=n}else d.value!==l("tab.all")?k=$.filter(s=>d.value==l("tab.native")?!s.labels:s.labels&&s.labels.toLowerCase()==d.value.toLowerCase()):k=$;e.isCreatePoolToCoin?T.value=(ee=k.filter(n=>A.value[n==null?void 0:n.address]))==null?void 0:ee.sort((n,s)=>s.sort-n.sort).sort((n,s)=>s.unusable-n.unusable):T.value=k.sort((n,s)=>s.sort-n.sort).sort((n,s)=>s.unusable-n.unusable),e.isCreatePoolFromCoin&&(T.value=(se=k.filter(n=>!A.value[n==null?void 0:n.address]))==null?void 0:se.sort((n,s)=>s.sort-n.sort).sort((n,s)=>s.unusable-n.unusable))},le=t=>{t.unusable||(b.emit("onSelect",t),b.emit("onClose"))};Z(()=>[P.value,R.value],([t,c])=>{D(t)},{immediate:!0});const G=g([]);return Z(()=>u.value.tokens,t=>{t&&(D(P.value),G.value=t.filter(c=>(e.lastSelectCoin&&c.address===e.lastSelectCoin?c.unusable=!0:c.unusable=!1,c.suggested_priority&&c.suggested_priority>0)).sort((c,_)=>Number(_.suggested_priority)-Number(c.suggested_priority)))},{immediate:!0}),{popularList:G,pools:u,t:l,chainName:I,tabList:F,currentTab:d,addCommom:te,tokenList:T,importIcon:y,keyword:P,wallet:f,toSelect:le,store:h,isShowAll:R}}}),Pe=""+globalThis.__publicAssetsURL("sui-image/token-warning@2x.png");const w=e=>(Ie("data-v-97d36aca"),e=e(),Te(),e),je=w(()=>a("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Me={class:"coin-select-modal"},Be={class:"search-input"},Fe=["placeholder"],Re=w(()=>a("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),De=[Re],Ue={key:0,class:"popular"},Ze=["onClick"],ze={key:1,class:"tab-list"},qe=["onClick"],Ke={class:"item"},Ee=w(()=>a("div",{class:"line"},null,-1)),Je={class:"coin-list-box"},We={key:0,class:"coin-list"},Ge=["onClick"],He={class:"left"},Qe={key:0},Xe={key:1,alt:""},Ye={class:"name-box"},Ve=["onClick"],xe=w(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-copy"})],-1)),es=w(()=>a("img",{src:Pe,alt:""},null,-1)),ss={class:"balance-box"},os={class:"balance"},ns={key:0},ts={key:1},as={key:2},ls={key:3},is=w(()=>a("p",null,null,-1)),rs={key:1,class:"no-data"},us={key:0,class:"token-loading"},cs={key:1,class:"no-data-content"},ds={key:0,src:Ne},ps={key:1,src:Oe},bs=w(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1));function vs(e,b,l,ae,W,f){const L=we,u=z("loading-outlined"),B=Se,h=Le,A=z("vue-scroll"),F=z("Modal"),d=ge("image");return i(),oe(F,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:b[2]||(b[2]=o=>e.$emit("onClose"))},{closeIcon:m(()=>[je]),default:m(()=>[a("div",Me,[a("div",Be,[j(a("input",{"onUpdate:modelValue":b[0]||(b[0]=o=>e.keyword=o),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,Fe),[[Ce,e.keyword]]),e.keyword?(i(),r("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:b[1]||(b[1]=o=>e.keyword="")},De)):M("",!0)]),e.popularList&&e.popularList.length>0?(i(),r("div",Ue,[(i(!0),r(q,null,K(e.popularList,o=>(i(),r("div",{key:o.address,class:E(["img-box",o.unusable?"img-box-unusable":"img-box-usable"]),onClick:S=>e.toSelect(o)},[j(a("img",null,null,512),[[d,o.icon||o.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:C(y))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:C(y))("/image/coins/sui-unknown.png"))]]),a("span",null,p(o.symbol),1)],10,Ze))),128))])):M("",!0),e.chainName!=="Sui"?(i(),r("div",ze,[(i(!0),r(q,null,K(e.tabList,(o,S)=>(i(),r("div",{key:S,class:E(["item-container",e.currentTab==o?"item-container-active item-container":"item-container"]),onClick:I=>e.currentTab=o},[a("div",Ke,p(o),1)],10,qe))),128))])):M("",!0),Ee,a("div",Je,[O(A,null,{default:m(()=>[e.tokenList&&e.tokenList.length>0?(i(),r("ul",We,[(i(!0),r(q,null,K(e.tokenList,(o,S)=>(i(),r("li",{key:S,class:E(o.unusable?"unusable":""),onClick:I=>e.toSelect(o)},[a("div",He,[o.isChinaToken?j((i(),r("img",Xe,null,512)),[[d,e.store.theme=="default"?("importIcon"in e?e.importIcon:C(y))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:C(y))("/image/coins/sui-unknown.png")]]):j((i(),r("img",Qe,null,512)),[[d,o.icon||o.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:C(y))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:C(y))("/image/coins/sui-unknown.png"))]]),a("div",Ye,[a("span",null,[J(p(o.symbol)+" ",1),a("span",{class:"copy-text",onClick:ye(I=>e.store.copy(o&&o.address),["stop"])},[J(p(o.address&&o.address.substr(0,4))+" ... "+p(o.address&&o.address.substr(o.address.length-4,4))+" ",1),xe],8,Ve),o.isSelfBuilt?(i(),oe(L,{key:0,placement:"right","arrow-point-at-center":""},{title:m(()=>[a("span",null,p(e.t("newAdd.notCetusTokenList")),1)]),default:m(()=>[es]),_:1})):M("",!0)]),a("p",null,p(o.name)+" "+p(o.labels?`(${o.labels})`:""),1)])]),a("div",ss,[a("div",os,[e.wallet.loading?(i(),r("div",ns,[O(B,null,{default:m(()=>[O(u)]),_:1})])):o.balance&&e.wallet.connected?(i(),r("div",ts,p(("addCommom"in e?e.addCommom:C(te))(o.balance,o.decimals)),1)):!o.balance&&e.wallet.connected?(i(),r("div",as,"0")):(i(),r("div",ls))]),is])],10,Ge))),128))])):(i(),r("div",rs,[e.pools.isTokenLoading?(i(),r("div",us,[O(h)])):(i(),r("div",cs,[e.store.theme=="default"?(i(),r("img",ds)):(i(),r("img",ps)),a("p",null,p(e.t("newAdd.noTokensFound")),1),a("div",null,[J(p(e.t("newAdd.enterCoinType"))+" ",1),O(L,{placement:"bottom","arrow-point-at-center":""},{title:m(()=>[a("span",null,p(e.t("newAdd.uniqueIdOfCoin")),1)]),default:m(()=>[bs]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const ys=ke(Ae,[["render",vs],["__scopeId","data-v-97d36aca"]]);export{ys as _,Pe as a};
