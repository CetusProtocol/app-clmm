import{_ as Ee}from"./upgrade-select-input.3bd3a611.js";import{_ as Fe}from"./upgrade-loading.04de17e7.js";import{_ as Ve}from"./status-block.74ce7b62.js";import{g as le,a as He,u as _e,s as Ge,j as me,e as p,i as qe,b as We,c as ue,d as v,D as Me}from"./pool.a4b7d0f1.js";import{a as he,l as ke,m as k,e as be,o as t,f as r,h as s,i as V,u as o,v as a,c as Re,w as ve,x as w,j as ne,z as oe,N as ze,p as ge,k as Ie,b as $e,r as U,D as W,y as Ue,q as Je,t as T,F as K,s as Z,S as Ke,C as Ze,O as Qe,W as Xe,L as ye,B as Ye}from"./entry.9c77bcdd.js";/* empty css              */import{u as we,c as Ne,a as xe}from"./sha256.0f465d87.js";/* empty css              */import{i as ae}from"./import-icon.de3e6c66.js";import{_ as Ce}from"./icon-arrow_2x.948aedb2.js";import{_ as Se}from"./icon-arrow_2x.4ffddb8e.js";import{u as es}from"./notifi.135eb94a.js";import{_ as Ae}from"./icon_on_2x.5e96733d.js";import{_ as ss,a as os}from"./img-no-Positions_2x.7b23d927.js";import{_ as as,a as ns}from"./img-connect-wallet_2x.771c9d0e.js";import"./coin-select.3b7fbe1a.js";/* empty css              *//* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";import"./useWhale.229507f3.js";import"./index.bfd3c32c.js";const ts=he({props:{pItem:{type:Object,required:!0},currentStatus:{type:String,required:!0},rewarderInfo:{type:Number,required:!0},aprAmount:{type:Number,required:!0}},setup(e){const{t:b}=ke(),j=we(),N=k(()=>j),g=k(()=>N.value.chainName),L=k(()=>Ne[g.value]);return{getExplorerUrl:le,store:N,config:L,t:b}}});const Pe=e=>(ge("data-v-4530e4e6"),e=e(),Ie(),e),rs={class:"status-block-box"},is={key:0,class:"owner-addres"},ds=["href"],ls=["href"],ms={class:"copy-link"},us=Pe(()=>s("use",{"xlink:href":"#icon-icon-copy"},null,-1)),ps=["href"],cs=Pe(()=>s("svg",{class:"icon","aria-hidden":"true"},[ne(" > "),s("use",{"xlink:href":"#icon-icon-link"})],-1)),vs=[cs];function hs(e,b,j,N,g,L){const R=Ve,c=ze;return t(),r("div",{class:oe(["upgrade-position-status",`position-status-${e.pItem.currentStatus.toLowerCase()}`])},[s("div",rs,[V(R,{class:"status-block","current-status":e.pItem.currentStatus||"","is-pause":e.pItem.is_pause,"apr-amount":e.aprAmount,"block-name":"position"},null,8,["current-status","is-pause","apr-amount"])]),e.pItem.tokenName?(t(),r("div",is,[e.pItem.tokenName.length<=24?(t(),r("a",{key:0,href:("getExplorerUrl"in e?e.getExplorerUrl:o(le))("nftAddress",e.pItem.nftHash),target:"_blank"},a(e.pItem.tokenName.split("|")[1]),9,ds)):(t(),Re(c,{key:1,placement:"bottom","arrow-point-at-center":""},{title:ve(()=>[s("span",null,a(e.pItem.tokenName),1)]),default:ve(()=>[s("a",{target:"_blank",href:("getExplorerUrl"in e?e.getExplorerUrl:o(le))("nftAddress",e.pItem.nftHash)},a(e.pItem.tokenName.substr(0,4))+" ... "+a(e.pItem.tokenName.substr(e.pItem.tokenName.length-4,4)),9,ls)]),_:1}))])):w("",!0),s("div",ms,[(t(),r("svg",{class:"icon","aria-hidden":"true",onClick:b[0]||(b[0]=h=>e.store.copy(e.pItem.nftHash))},[ne(" > "),us])),e.pItem.tokenName.length<=24?(t(),r("a",{key:0,href:("getExplorerUrl"in e?e.getExplorerUrl:o(le))("nftAddress",e.pItem.nftHash),target:"_blank"},vs,8,ps)):w("",!0)])],2)}const ks=be(ts,[["render",hs],["__scopeId","data-v-4530e4e6"]]),bs=he({props:{pItem:{type:Object,required:!0}},setup(e){const{t:b}=ke(),j=$e(),N=we(),g=k(()=>N),L=k(()=>g.value.chainName?He(g.value.chainName):{}),R=_e(),c=k(()=>R),h=()=>{g.value.chainName==="Aptos"?j.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`):j.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}&pos=${e.pItem.pos_object_id}`)},C=k(()=>c.value.allTokenObj&&e.pItem.token_a.address&&c.value.allTokenObj[e.pItem.token_a.address]&&c.value.allTokenObj[e.pItem.token_a.address].logo_url),n=k(()=>c.value.allTokenObj&&e.pItem.token_b.address&&c.value.allTokenObj[e.pItem.token_b.address]&&c.value.allTokenObj[e.pItem.token_b.address].logo_url),H=k(()=>c.value.feeOwedObj[e.pItem.tokenName]&&c.value.feeOwedObj[e.pItem.tokenName].feeOwed),B=k(()=>c.value.feeOwedObj[e.pItem.tokenName]&&c.value.feeOwedObj[e.pItem.tokenName].feesResult),Q=k(()=>c.value.rewarderObj[e.pItem.tokenName]&&c.value.rewarderObj[e.pItem.tokenName].pendingRewarder),G=k(()=>c.value.rewarderObj[e.pItem.tokenName]&&c.value.rewarderObj[e.pItem.tokenName].pendingRewarderView),X=k(()=>c.value.rewarderObj[e.pItem.tokenName]&&c.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr),M=U(0),pe=U();W(()=>c.value.RATES,u=>{u&&(pe.value=u)},{immediate:!0});const te=u=>{var S;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((S=c.value.tokensObj[u==null?void 0:u.address])==null?void 0:S.logo_url)||(g.value.theme==="default"?ae("/image/coins/unknown.png"):ae("/image/coins/sui-unknown.png"))},Y=k(()=>c.value.tokensObj);Ue(()=>{ce(e.pItem),q(e.pItem.minPrice,e.pItem.maxPrice)});const x=U("--"),q=(u,S)=>{u!=="0"&&S!=="∞"?x.value=Ge(1/(1-Number((u/S)**.25)),2)+"x":x.value=1},$=U(30),f=U(null),ce=async u=>{var _,O,E;const S=Number(e.pItem.minPrice),A=isNaN(Number(e.pItem.maxPrice))||e.pItem.maxPrice=="∞"?2**50:Number(e.pItem.maxPrice);let y=[];y=g.value&&g.value.addressHistTokens&&g.value.addressHistTokens[u.poolAddress]&&g.value.addressHistTokens[u.poolAddress].data&&g.value.addressHistTokens[u.poolAddress].data.length>0&&Object.fromEntries(g.value.addressHistTokens[u.poolAddress].data.map(F=>[F.key,F.value]));const P=Number(Number($.value==7?y.before_7_d_contract_price_lowest:$.value==24?y.before_24_h_contract_price_lowest:y.before_30_d_contract_price_lowest)),z=Number(Number($.value==7?y.before_7_d_contract_price_highest:$.value==24?y.before_24_h_contract_price_highest:y.before_30_d_contract_price_highest)),i=c.value.tokensObj,d=await L.value.getEstPositionAPRWithMulti(S,A,P,z),l=Number(d.toString()),m=g.value.newTopPoolsObj[u.poolAddress];let I;if(m){$.value==7?I=m.apr_7day?Number(m.apr_7day.substring(0,m.apr_7day.length-1)):0:$.value==24?I=m.apr_24h?Number(m.apr_24h.substring(0,m.apr_24h.length-1)):0:I=m.apr_30day?Number(m.apr_30day.substring(0,m.apr_30day.length-1)):0;const F=m.rewarder_apr[0]?Number(m.rewarder_apr[0].substring(0,m.rewarder_apr[0].length-1)):0,J=m.rewarder_apr[1]?Number(m.rewarder_apr[1].substring(0,m.rewarder_apr[1].length-1)):0,De=m.rewarder_apr[2]?Number(m.rewarder_apr[2].substring(0,m.rewarder_apr[2].length-1)):0,ee=Number(l*I),re=Number(l*F),ie=Number(l*J),de=Number(l*De),se=ee+(u.rewarder_display1?re:0)+(u.rewarder_display2?ie:0)+(u.rewarder_display3?de:0),je=u.rewarder_infos[0]?(_=i[u.rewarder_infos[0].coinAddress])==null?void 0:_.symbol:"--",Le=u.rewarder_infos[1]?(O=i[u.rewarder_infos[1].coinAddress])==null?void 0:O.symbol:"--",Te=u.rewarder_infos[2]?(E=i[u.rewarder_infos[2].coinAddress])==null?void 0:E.symbol:"--",Be={aprFee:ee==1/0||isNaN(ee)?0:ee,rewardAprList:[{rewarder_name:je,rewarder_apr:re==1/0||isNaN(re)?0:re,styleName:"one",rewarder_display:u.rewarder_display1},{rewarder_name:Le,rewarder_apr:ie==1/0||isNaN(ie)?0:ie,styleName:"two",rewarder_display:u.rewarder_display2},{rewarder_name:Te,rewarder_apr:de==1/0||isNaN(de)?0:de,styleName:"three",rewarder_display:u.rewarder_display2}],aprPercentageTotal:se==1/0||isNaN(se)||se===0?0:se,aprPercentage:me(ee/se,2),is_display_rewarder:u.is_display_rewarder};f.value=Be}};return{aprNum:k(()=>{var u,S,A,y,P,z,i,d,l,m,I,_;return f.value?f.value.is_display_rewarder?(u=f.value)!=null&&u.aprPercentageTotal?((S=f.value)==null?void 0:S.aprPercentageTotal)>1e4?">10,000":((A=f.value)==null?void 0:A.aprPercentageTotal)<.01&&((y=f.value)==null?void 0:y.aprPercentageTotal)>0?"<0.01":p((P=f.value)==null?void 0:P.aprPercentageTotal,2):(z=f.value)!=null&&z.rewardAprList?"0":"--":(i=f.value)!=null&&i.aprFee?((d=f.value)==null?void 0:d.aprFee)>1e4?">10,000":((l=f.value)==null?void 0:l.aprFee)<.01&&((m=f.value)==null?void 0:m.aprFee)>0?"<0.01":p((I=f.value)==null?void 0:I.aprFee,2):(_=f.value)!=null&&_.rewardAprList?"0":"--":"--"}),lever:x,tokensObj:Y,showNum:qe,fromCoinUrl:C,toCoinUrl:n,decimalFormat:We,clickDetails:h,t:b,addCommom:p,importIcon:ae,router:j,store:g,pendingRewarder:Q,pendingFees:H,pendingRewarderArr:X,pendingFeesArr:B,checkNullObj:ue,fixD:me,decimalUi:v,pendingRewarderView:G,aprAmount:M,getCoinIcon:te,Decimal:Me}}});const D=e=>(ge("data-v-c7be2eec"),e=e(),Ie(),e),gs={class:"upgrade-position-item"},Is={class:"card-content"},ws={class:"left"},fs={class:"top card-header"},ys={class:"token-item"},_s={class:"item"},Rs={key:0,class:"token-warning"},$s={class:"item"},Us={key:0,class:"token-warning"},Ns={class:"card-header-right"},Cs={key:0,class:"item"},Ss=D(()=>s("span",null,"Leverage",-1)),As={class:"item"},Ps=D(()=>s("span",null,"Estimated APR",-1)),Os=D(()=>s("div",{class:"more-img"},null,-1)),Ds={class:"bottom"},js={class:"info-block-container"},Ls={class:"info-block"},Ts=D(()=>s("div",{class:"leabl"},"Fee Tier",-1)),Bs={class:"text"},Es={class:"info-block"},Fs=D(()=>s("div",{class:"leabl"},"Price Range",-1)),Vs={class:"text"},Hs={class:"min-and-max"},Gs={class:"left-text"},qs={class:"text"},Ws={class:"hover-text"},Ms={key:0,src:Ce,alt:""},zs={key:1,src:Se,alt:""},Js={class:"right-text"},Ks={class:"text"},Zs={class:"hover-text"},Qs={class:"leabl"},Xs={class:"text"},Ys={key:0,class:"hover-rewarder"},xs={class:"rewarder-info"},eo={class:"left-rewarder"},so={alt:""},oo={class:"right-rewarder"},ao={class:"amount"},no={key:0,class:"amount-usd"},to={key:1,class:"amount-usd"},ro={class:"rewarder-info"},io={class:"left-rewarder"},lo={alt:""},mo={class:"right-rewarder"},uo={class:"amount"},po={key:0,class:"amount-usd"},co={key:1,class:"amount-usd"},vo={class:"leabl"},ho={key:0,class:"text"},ko={key:1,class:"text"},bo={key:2,class:"text"},go={key:3,class:"hover-rewarder"},Io={class:"left-rewarder"},wo={alt:""},fo={class:"right-rewarder"},yo={class:"amount"},_o={class:"amount-usd"},Ro={class:"leabl"},$o={key:0,class:"text"},Uo={key:1,class:"text"},No={key:2,class:"hover-rewarder"},Co={class:"left-rewarder"},So={alt:""},Ao={class:"right-rewarder"},Po={class:"amount"},Oo={class:"amount-usd"},Do={class:"h5-bottom"},jo={class:"item"},Lo=D(()=>s("span",null,"Leverage",-1)),To={class:"item"},Bo=D(()=>s("span",null,"Estimated APR",-1)),Eo=D(()=>s("div",{class:"more-img"},null,-1)),Fo={class:"info"},Vo={class:"info-item"},Ho=D(()=>s("div",{class:"left"},"Fee Tier",-1)),Go={class:"right"},qo={class:"info-item range-item"},Wo={class:"left"},Mo={class:"right"},zo={class:"min-and-max"},Jo={class:"text"},Ko={key:0,src:Ce,alt:""},Zo={key:1,src:Se,alt:""},Qo={class:"text"},Xo={class:"info-item"},Yo=D(()=>s("div",{class:"left"},"Liquidity",-1)),xo={class:"right"},ea={key:0,class:"hover-rewarder"},sa={class:"rewarder-info"},oa={class:"left-rewarder"},aa={alt:""},na={class:"right-rewarder"},ta={class:"amount"},ra={key:0,class:"amount-usd"},ia={key:1,class:"amount-usd"},da={class:"rewarder-info"},la={class:"left-rewarder"},ma={alt:""},ua={class:"right-rewarder"},pa={class:"amount"},ca={key:0,class:"amount-usd"},va={key:1,class:"amount-usd"},ha={class:"info-item"},ka=D(()=>s("div",{class:"left"},"Pending Fees",-1)),ba={key:0,class:"right"},ga={key:1,class:"right"},Ia={key:2,class:"right"},wa={key:3,class:"hover-rewarder"},fa={class:"left-rewarder"},ya={alt:""},_a={class:"right-rewarder"},Ra={class:"amount"},$a={class:"amount-usd"},Ua={key:0,class:"info-item"},Na={class:"left"},Ca={key:0,class:"right"},Sa={key:1,class:"right"},Aa={key:2,class:"hover-rewarder"},Pa={class:"left-rewarder"},Oa={alt:""},Da={class:"right-rewarder"},ja={class:"amount"},La={class:"amount-usd"};function Ta(e,b,j,N,g,L){var C;const R=ks,c=Ke,h=Je("image");return t(),r("div",gs,[s("div",Is,[s("div",ws,[V(R,{"p-item":e.pItem,"current-status":((C=e.pItem)==null?void 0:C.currentStatus)||"","rewarder-info":e.pendingRewarder,"apr-amount":e.aprAmount},null,8,["p-item","current-status","rewarder-info","apr-amount"])]),s("div",{class:"right",onClick:b[0]||(b[0]=(...n)=>e.clickDetails&&e.clickDetails(...n))},[s("div",fs,[s("div",ys,[s("div",_s,[s("div",null,[T(s("img",null,null,512),[[h,(e.pItem.needReverse?e.toCoinUrl:e.fromCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt)?(t(),r("div",Rs)):w("",!0),s("span",null,a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("p",null,a(e.pItem.needReverse?e.pItem.token_b.name:e.pItem.token_a.name)+" "+a(e.pItem.needReverse?e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:"":e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:""),1)]),s("div",$s,[s("div",null,[T(s("img",null,null,512),[[h,(e.pItem.needReverse?e.fromCoinUrl:e.toCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt)?(t(),r("div",Us)):w("",!0),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("p",null,a(e.pItem.needReverse?e.pItem.token_a.name:e.pItem.token_b.name)+" "+a(e.pItem.needReverse?e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:"":e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:""),1)])]),s("div",Ns,[e.pItem.minPrice!=="0"&&e.pItem.maxPrice!=="∞"?(t(),r("div",Cs,[s("p",null,a(e.lever),1),Ss])):w("",!0),s("div",As,[s("p",null,a(e.aprNum)+"%",1),Ps]),Os])]),s("div",Ds,[s("div",js,[s("div",Ls,[Ts,s("div",Bs,a(e.pItem.fee*100)+"%",1)]),s("div",Es,[Fs,s("div",Vs,[s("div",Hs,[s("div",Gs,[s("div",qs,a(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.minPrice,6))),1),s("div",Ws,a(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.minPrice,6))),1)]),e.store.theme=="default"?(t(),r("img",Ms)):(t(),r("img",zs)),s("div",Js,[s("div",Ks,a((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.maxPrice,6))),1),s("div",Zs,a((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.maxPrice,6))),1)]),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)])])]),s("div",{class:oe(["info-block cursor-block",e.pItem.amountUSD=="--"||Number(e.pItem.amountUSD)==0?"block-none":""])},[s("div",Qs,a(e.$t("common.liquidity")),1),s("div",Xs," $"+a(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:o(p))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(t(),r("div",Ys,[s("div",xs,[s("div",eo,[T(s("img",so,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",oo,[s("div",ao,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountB,e.pItem.token_b.decimals)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountA,e.pItem.token_a.decimals))),1),e.pItem.needReverse?(t(),r("div",to,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:o(me))(e.pItem.tokenBRates,2):"<$0.01"),1)):(t(),r("div",no,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:o(me))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",ro,[s("div",io,[T(s("img",lo,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",mo,[s("div",uo,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountA,e.pItem.token_a.decimals)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountB,e.pItem.token_b.decimals))),1),e.pItem.needReverse?(t(),r("div",co,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.tokenARates,2)):"<$0.01"),1)):(t(),r("div",po,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.tokenBRates,2)):"<$0.01"),1))])])])):w("",!0)],2),s("div",{class:oe(["info-block cursor-block",e.pendingFees==0?"block-none":""])},[s("div",vo,a(e.$t("newAdd.pendingFees")),1),e.pendingFees==="--"?(t(),r("div",ho,"$ --")):isNaN(e.pendingFees)?(t(),r("div",bo,[V(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),r("div",ko,a(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:o(p))(e.pendingFees,2)),1)),e.pendingFees>0?(t(),r("div",go,[(t(!0),r(K,null,Z(e.pendingFeesArr,n=>(t(),r("div",{key:n,class:"rewarder-info"},[s("div",Io,[T(s("img",wo,null,512),[[h,e.getCoinIcon(n)]]),s("span",null,a(n.symbol),1)]),s("div",fo,[s("div",yo,a(Number(n.amount)==0?0:Number(n.amount)>1e-6?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(n.amount,n.decimals),n.decimals):"<0.000001"),1),s("div",_o,a(Number(n.amountUSD)==0?"$0":Number(n.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:o(p))(n.amountUSD,2):"<$0.01"),1)])]))),128))])):w("",!0)],2),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:o(ue))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(t(),r("div",{key:0,class:oe(["info-block cursor-block",e.pendingRewarder==0?"block-none":""])},[s("div",Ro,a(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(t(),r("div",$o," $"+a(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(t(),r("div",Uo,[V(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(t(),r("div",No,[(t(!0),r(K,null,Z(e.pendingRewarderArr,n=>(t(),r("div",{key:n,class:"rewarder-info"},[s("div",Co,[T(s("img",So,null,512),[[h,n.logoURI]]),s("span",null,a(n.symbol),1)]),s("div",Ao,[s("div",Po,a(("decimalUi"in e?e.decimalUi:o(v))(n.amount,n.decimals)),1),s("div",Oo,a(Number(n.amountUSD)==0?"$0":Number(n.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:o(p))(n.amountUSD,2):"<$0.01"),1)])]))),128))])):w("",!0)],2)):w("",!0)])])])]),s("div",Do,[s("div",{class:"card-header-right",onClick:b[1]||(b[1]=(...n)=>e.clickDetails&&e.clickDetails(...n))},[s("div",jo,[s("p",null,a(e.lever),1),Lo]),s("div",To,[s("p",null,a(e.aprNum)+"%",1),Bo]),Eo]),s("div",Fo,[s("div",Vo,[Ho,s("div",Go,a(e.pItem.fee*100)+"%",1)]),s("div",qo,[s("div",Wo,[ne("Price Range ("),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol)+")",1)]),s("div",Mo,[s("div",zo,[s("div",Jo,a(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.minPrice,6))),1),e.store.theme=="default"?(t(),r("img",Ko)):(t(),r("img",Zo)),s("div",Qo,a((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.maxPrice,6))),1)])])]),s("div",Xo,[Yo,s("div",xo," $"+a(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:o(p))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(t(),r("div",ea,[s("div",sa,[s("div",oa,[T(s("img",aa,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",na,[s("div",ta,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountB,e.pItem.token_b.decimals)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountA,e.pItem.token_a.decimals))),1),e.pItem.needReverse?(t(),r("div",ia,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:o(p))(e.pItem.tokenBRates,2):"<$0.01"),1)):(t(),r("div",ra,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:o(p))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",da,[s("div",la,[T(s("img",ma,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",ua,[s("div",pa,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountA,e.pItem.token_a.decimals)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountB,e.pItem.token_b.decimals))),1),e.pItem.needReverse?(t(),r("div",va,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.tokenARates,2)):"<$0.01"),1)):(t(),r("div",ca,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.tokenBRates,2)):"<$0.01"),1))])])])):w("",!0)]),s("div",ha,[ka,e.pendingFees==="--"?(t(),r("div",ba,"$ --")):isNaN(e.pendingFees)?(t(),r("div",Ia,[V(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),r("div",ga,a(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:o(p))(e.pendingFees,2)),1)),e.pendingFees>0?(t(),r("div",wa,[(t(!0),r(K,null,Z(e.pendingFeesArr,n=>(t(),r("div",{key:n,class:"rewarder-info"},[s("div",fa,[T(s("img",ya,null,512),[[h,e.getCoinIcon(n)]]),s("span",null,a(n.symbol),1)]),s("div",_a,[s("div",Ra,a(Number(n.amount)==0?0:Number(n.amount)>1e-6?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(n.amount,n.decimals),n.decimals):"<0.000001"),1),s("div",$a,a(Number(n.amountUSD)==0?"$0":Number(n.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:o(p))(n.amountUSD,2):"<$0.01"),1)])]))),128))])):w("",!0)]),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:o(ue))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(t(),r("div",Ua,[s("div",Na,a(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(t(),r("div",Ca," $"+a(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(t(),r("div",Sa,[V(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(t(),r("div",Aa,[(t(!0),r(K,null,Z(e.pendingRewarderArr,n=>(t(),r("div",{key:n,class:"rewarder-info"},[s("div",Pa,[T(s("img",Oa,null,512),[[h,n.logoURI]]),s("span",null,a(n.symbol),1)]),s("div",Da,[s("div",ja,a(("decimalUi"in e?e.decimalUi:o(v))(n.amount,n.decimals)),1),s("div",La,a(Number(n.amountUSD)==0?"$0":Number(n.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:o(p))(n.amountUSD,2):"<$0.01"),1)])]))),128))])):w("",!0)])):w("",!0)])])])}const Ba=be(bs,[["render",Ta],["__scopeId","data-v-c7be2eec"]]),Ea=he({setup(){const e=U(!1),{t:b}=ke(),j=U(["position"]),N=$e(),g=U(""),L=we(),R=k(()=>L),c=k(()=>R.value.chainName?Ne[R.value.chainName]:{});let h=U([]);const C=_e(),n=k(()=>C),H=xe(),B=k(()=>H),Q=U(!1),G=U(b("tab.all")),X=U([b("tab.layerZero"),b("tab.wormhole"),b("tab.celer")]),M=U(!0),pe=U("TVL"),te=()=>{e.value=!0,h.value=[],B.value.address&&C.getMyPositons(B.value.address,n.value.poolsObj,R.value.chainName),setTimeout(()=>{e.value=!1},1e3)};W(()=>R.value.isRefresh,i=>{var d;i&&((d=N==null?void 0:N.currentRoute)==null?void 0:d.value.name.split("-")[1])=="position"&&te()}),Ue(()=>{h.value=[],document.addEventListener("click",()=>{Q.value=!1}),C.setMyPositionsLoading(!0)}),Ze(()=>{document.addEventListener("click",()=>{Q.value=!1})}),Qe(()=>{B.value.connected||(h.value=[])});const Y=()=>{e.value=!0;let i=[];n.value.myPositions.forEach(d=>{var O,E,F,J;let l,m;const I=d.amountA*((O=n.value.RATES[d.token_a.address])==null?void 0:O.price),_=d.amountB*((E=n.value.RATES[d.token_b.address])==null?void 0:E.price);(F=n.value.RATES[d.token_a.address])!=null&&F.price&&((J=n.value.RATES[d.token_b.address])!=null&&J.price)?(l=I+_,m=I+_):(l=" --",m=0),i.push({...d,amountUSD:l,amountUSDOrigin:m,tokenARates:I,tokenBRates:_})}),G.value!="All"?M.value?(h.value=i.sort((d,l)=>Number(l.amountUSDOrigin)-Number(d.amountUSDOrigin)),e.value=!1):(h.value=i.sort((d,l)=>Number(d.amountUSDOrigin)-Number(l.amountUSDOrigin)),e.value=!1):M.value?(h.value=i.sort((d,l)=>l.amountUSDOrigin-d.amountUSDOrigin),e.value=!1):(h.value=i.sort((d,l)=>d.amountUSDOrigin-l.amountUSDOrigin),e.value=!1)};W(()=>[n.value.myPositions,n.value.RATES],([i,d])=>{i&&d&&Y()},{immediate:!0}),W(()=>[B.value.address,n.value.poolConfigList,n.value.poolsObj,R.value.chainName],([i,d,l,m])=>{var I,_,O;i&&d&&d.length>0&&m&&(m!=null&&m.toLowerCase().includes((I=d[0])==null?void 0:I.chain))&&!ue(l)&&(m==="Aptos"?d.length===Object.values(l).length:(O=(_=Object.values(l)[0])==null?void 0:_.chain)!=null&&O.includes("sui"))&&C.getMyPositons(B.value.address,l,m)},{immediate:!0,deep:!0}),W(()=>G.value,i=>{Y()}),W(()=>M.value,i=>{Y()});const x=i=>{const d=[];X.value.forEach((l,m)=>{l==i?d[m]=G.value:d[m]=l}),X.value=d,G.value=i},q=es(),$=k(()=>q),f=k(()=>C),ce=async i=>{await q.getSourceGroups();const d=$.value.sourceGroups&&$.value.sourceGroups.length>0&&$.value.sourceGroups[0]&&$.value.sourceGroups[0].sources||[];for(let l=0;l<d.length;l++){const{pool_address:m,position_index:I}=JSON.parse(d[l].blockchainAddress);let _=!1,O;for(let E=0;E<i.length;E++){const{poolAddress:F,index:J}=i[E];m==F&&Number(J)==Number(I)&&(_=!0),O={pool_address:m,position_index:I}}_||await q.subscribePosition(O,"",!1,!1)}},fe=async()=>{await q.getSourceGroups();const i=$.value.sourceGroups&&$.value.sourceGroups.length>0&&$.value.sourceGroups[0]&&$.value.sourceGroups[0].sources||[];for(let d=0;d<i.length;d++){const{pool_address:l,position_index:m}=JSON.parse(i[d].blockchainAddress),{name:I}=i[d],_={pool_address:l,position_index:m};await q.subscribePosition(_,I,!1,!1)}},u=k(()=>f.value.myPositionsLoading);W(()=>f.value.myPositions,(i,d)=>{c.value.hasNotifi&&(i&&i.length>0&&d&&d.length!==i.length?ce(i):i&&i.length==0&&!u.value&&fe())},{immediate:!0});const S=i=>{var d;return(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((d=n.value.tokensObj[i==null?void 0:i.address])==null?void 0:d.logo_url)||(R.value.theme==="default"?ae("/image/coins/unknown.png"):ae("/image/coins/sui-unknown.png"))},A=U(null),y=k(()=>A.value&&A.value.firstToken?A.value.firstToken:null),P=k(()=>A.value&&A.value.lastToken?A.value.lastToken:null),z=k(()=>{let i=[];i=h.value;const d=i.filter((l,m)=>y.value&&P.value?l.coinA.symbol==y.value.symbol&&l.coinB.symbol==P.value.symbol||l.coinA.symbol==P.value.symbol&&l.coinB.symbol==y.value.symbol:y.value?l.coinA.symbol.toLowerCase().includes(y.value.symbol.toLowerCase())||l.coinB.symbol.toLowerCase().includes(y.value.symbol.toLowerCase()):P.value?l.coinA.symbol.toLowerCase().includes(P.value.symbol.toLowerCase())||l.coinB.symbol.toLowerCase().includes(P.value.symbol.toLowerCase()):i);return n.value.myPositionsLoading||L.setPositiomAmount(d.length),d});return Xe(()=>{L.setPositiomAmount("--")}),{showList:z,childTokenSelectRef:A,firstToken:y,lastToken:P,getCoinIcon:S,changeSortLabel:x,label:Q,labelList:X,labelValue:G,select:M,selectValue:pe,t:b,pools:n,store:R,wallet:B,list:h,clickRefresh:te,refresh:e,current:j,router:N,searchKey:g}}});const Oe=e=>(ge("data-v-a9330e48"),e=e(),Ie(),e),Fa={class:"upgrade-position-list-container"},Va={class:"content-top"},Ha={class:"content-top-left"},Ga={class:"content-top-right"},qa={class:"value"},Wa=Oe(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ma=[Wa],za={key:0,class:"select-item"},Ja=["onClick"],Ka={class:"search-select-box"},Za=Oe(()=>s("span",null,"TVL",-1)),Qa={key:0,src:Ae,alt:""},Xa={key:1,class:"fan-img",src:Ae,alt:""},Ya={key:0,class:"upgrade-loading"},xa={key:1,class:"position-list"},en={key:2,class:"no-data"},sn={key:0,src:ss,alt:""},on={key:1,src:os,alt:""},an={key:3,class:"no-data"},nn={key:0,src:as,alt:""},tn={key:1,src:ns,alt:""};function rn(e,b,j,N,g,L){const R=Ee,c=Fe,h=Ba,C=Ye;return t(),r("div",Fa,[s("div",Va,[s("div",Ha,[V(R,{ref:"childTokenSelectRef"},null,512)]),s("div",Ga,[e.store.theme=="default"?(t(),r("div",{key:0,class:"search-label",onClick:b[0]||(b[0]=ye(n=>e.label=!e.label,["stop"]))},[s("span",null,a(e.$t("newAdd.label")),1),s("div",qa,a(e.labelValue),1),(t(),r("svg",{"aria-hidden":"true",class:oe(e.label?"show-icon icon":"icon")},Ma,2)),e.label?(t(),r("div",za,[(t(!0),r(K,null,Z(e.labelList,(n,H)=>(t(),r("div",{key:H,class:"select-menu-item",onClick:B=>e.changeSortLabel(n)},a(n),9,Ja))),128))])):w("",!0)])):w("",!0),s("div",Ka,[s("div",{class:"search-select",onClick:b[1]||(b[1]=ye(n=>e.select=!e.select,["stop"]))},[ne(a(e.$t("newAdd.sortBy"))+" ",1),s("div",null,[Za,e.select?(t(),r("img",Qa)):(t(),r("img",Xa))])])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(t(),r("div",Ya,[V(c,{loading:e.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):w("",!0),e.showList&&e.showList.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(t(),r("div",xa,[(t(!0),r(K,null,Z(e.showList,(n,H)=>(t(),Re(h,{key:H,"p-item":n},null,8,["p-item"]))),128))])):w("",!0),e.showList&&e.showList.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(t(),r("div",en,[e.store.theme=="default"?(t(),r("img",sn)):(t(),r("img",on)),s("span",null,a(e.$t("common.noLiquidityPositions")),1)])):w("",!0),e.wallet.connected?w("",!0):(t(),r("div",an,[e.store.theme=="default"?(t(),r("img",nn)):(t(),r("img",tn)),V(C,{class:"connect-wallet",onClick:b[2]||(b[2]=n=>e.wallet.setIsShowWalletModal(!0))},{default:ve(()=>[ne(a(e.$t("button.connectWallet")),1)]),_:1})]))])}const Sn=be(Ea,[["render",rn],["__scopeId","data-v-a9330e48"]]);export{Sn as default};
