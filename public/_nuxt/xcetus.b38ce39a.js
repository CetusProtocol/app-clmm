import{_ as lt}from"./xwhale-header.b325fe63.js";import{r as w,Y as Ye,q as V,e as Z,o as u,f as b,h as a,v as T,j as x,y as se,l as i,s as st,x as W,t as Fe,c as $,O as Xe,p as z,k as ee,i as M,w as Y,F as Se,G as Te,B as ie,z as je,u as Ee,C as Ce,a as $e,D as it,L as rt,I as ut,M as dt,J as ct,N as mt,a9 as vt,H as gt}from"./entry.4aebf40a.js";/* empty css              */import{a as ne,u as re}from"./sha256.934be29f.js";import{u as Le}from"./xcetus.85763cc3.js";import{i as Q}from"./import-icon.de3e6c66.js";import{a as U,s as be,b as Ue,u as Pe,c as ye,p as J,x as we}from"./pool.b6ad4907.js";import{u as Me}from"./useWhale.c62f79bb.js";import{_ as Ze}from"./xWHALE-icon.2df34cd4.js";import{_ as qe}from"./WHALE-icon.28f954ba.js";import{_ as ht}from"./head-switch.f1d85fe7.js";/* empty css              */import{_ as ft}from"./icon-selected_3x.09e9a6f0.js";/* empty css              *//* empty css              */import{D as He}from"./decimal.0e8aa3f1.js";import{u as pt}from"./useTheme.73cf1d10.js";import{_ as _t}from"./img-leverage_2x.1c577303.js";import"./index.bab95d66.js";const wt={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,n){const s=w("--"),t=w("--"),k=w("--"),S=w("--");let d=null;Ye(()=>{window.clearInterval(d)});const y=()=>{const g=new Date().getTime()/1e3;Number(g)<=Number(e.startTime)&&p(e.startTime),Number(g)>Number(e.startTime)&&Number(g)<=Number(e.endTime)&&p(e.endTime)},p=g=>{clearInterval(d),window.clearInterval(d),d=setInterval(()=>{let h=new Date().getTime()/1e3,c=g-parseInt(String(h));if(c==0){n.emit("countDown"),clearInterval(d),window.clearInterval(d),d=null;return}else c<0&&(clearInterval(d),window.clearInterval(d),n.emit("countDown"),d=null);c--;let v=parseInt(String(c/60/60/24));v=(v<10,v);let l=parseInt(String(c/60/60%24));l=(l<10,l);let A=parseInt(String(c/60%60));A=(A<10,A);let R=parseInt(String(c%60));R=R<10?+R:R,s.value=v,t.value=l,k.value=A,S.value=R},1e3)};return V(()=>e.startTime,(g,h)=>{g!==h&&y()},{immediate:!0}),{day:s,hour:t,min:k,sec:S}}};const Ct={class:"count-time"};function bt(e,n,s,t,k,S){return u(),b("div",Ct,[a("p",null,T(t.day)+"d",1),x(" : "),a("p",null,T(t.hour)+"h",1),x(" : "),a("p",null,T(t.min)+"m",1),x(" : "),a("p",null,T(t.sec)+"s",1)])}const yt=Z(wt,[["render",bt],["__scopeId","data-v-ce10c596"]]),St={props:{titleText:{type:String,default:""},tipsText:{type:String,default:""},imgIcon:{type:String,default:""},value:{type:String,default:"--"},tokenSymbol:{type:String,default:""}},setup(e){const{t:n}=se(),s=ne(),t=i(()=>s);return{t:n,wallet:t}}};const Tt=e=>(z("data-v-48ce6bb2"),e=e(),ee(),e),kt={class:"table-rewards"},At={class:"text-top-all"},It={key:0,class:"icon-hover-box"},Bt=Tt(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1)),Nt={class:"tips-text-box"},xt={key:0},Rt={key:0,alt:""},Dt={key:2};function Et(e,n,s,t,k,S){const d=Xe,y=st("image");return u(),b("div",kt,[a("div",At,[a("p",null,T(s.titleText),1),s.tipsText?(u(),b("div",It,[Bt,a("div",Nt,T(s.titleText=="est.APR"?"Estimated APR of the current epoch for all xCETUS holders.":"The number of qualified positions in this epoch."),1)])):W("",!0)]),a("span",null,[s.value!=="--"?(u(),b("p",xt,[s.imgIcon?Fe((u(),b("img",Rt,null,512)),[[y,s.imgIcon]]):W("",!0),x(T(s.value)+" ",1),a("span",null,T(s.tokenSymbol),1)])):s.value=="--"&&t.wallet&&t.wallet.address?(u(),$(d,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})):(u(),b("p",Dt,"--"))])])}const $t=Z(St,[["render",Et],["__scopeId","data-v-48ce6bb2"]]),Lt={setup(e){const{t:n}=se(),s=Le(),t=i(()=>s),k=i(()=>t.value.pendingAmount),S=i(()=>t.value.newPendingAmount),d=i(()=>t.value.rewardCoinAmount),y=i(()=>t.value.nextStartTime),p=i(()=>1683094391),g=i(()=>t.value.xcetusShare&&U(t.value.xcetusShare,3)),h=ne(),r=i(()=>h),c=i(()=>t.value.cetusApr&&t.value.cetusApr>.01?U(be(t.value.cetusApr,2),2):U(t.value.cetusApr,2)),v=i(()=>t.value.pendingCoinInfo),l=i(()=>t.value.newPendingCoinInfo),A=i(()=>t.value.rewardCoin),R=w("");V(()=>v.value,_=>{_&&ye(_),R.value="Pending yield"},{immediate:!0});const ae=w("");V(()=>l.value,_=>{_&&!ye(_)?ae.value=`Pending yield (${_.symbol})`:ae.value="Pending yield"},{immediate:!0});const oe=w();V(()=>A.value,_=>{_&&!ye(_)?oe.value=`Pending yield (${_.symbol})`:oe.value="Pending yield"},{immediate:!0});const Ie=()=>{setTimeout(()=>{s.getDividendManager()},3e3)},de=i(()=>t.value.dividendManagerInfo),q=i(()=>{const _=parseInt(String(new Date().getTime()/1e3)),N=de.value.interval_day,f=(_-Number(de.value.start_time))/(N*60);return parseInt(String(f))>0}),ce=re(),j=i(()=>ce),{setIsShowSuccess:Be,setIsShowRejected:me,setIsShowWaiting:I,setTransactionDesc:le,setTransactionTxid:ve}=ce,Ne=Me("Sui"),G=w(!1),B=i(()=>t.value.venft_id),H=i(()=>j.value.chainName?Ue(j.value.chainName):{}),ge=async()=>{G.value=!0,I(!0),ve("");let _=`${n("tips.claimingPendingYield")} `,N="";F.value.forEach((f,X)=>{N=N+`${U(f.amount)} ${f.symbol} ${X==F.value.length-1?"":"and "}`}),le(_+N);try{let f;const X=await Ne.getRedeemDividendV2Payload(B.value),O=await r.value.currentWallet.signAndExecuteTransactionBlock(X);if(f=H.value.handleTx(O),f&&f.hash){ve(f.hash),I(!1),Be(!0);const te={title:"Claim",desc:`Claimed ${N} successfully.`,hash:f.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:v.value.symbol,numa:`+ ${k.value}`,logoa:v.value.logo_url}};H.value.showTransitionPending(te),await H.value.watchTransaction(te)&&setTimeout(()=>{s.getVeNFTDividendInfo(),G.value=!1},3e3),s.getOwnerLockCetuss(r.value.address)}else I(!1),me(!0),G.value=!1}catch{I(!1),me(!0),G.value=!1}},C=Pe(),he=i(()=>C),D=_=>{var N;return(_==null?void 0:_.logoURI)||(_==null?void 0:_.logo_url)||((N=he.value.tokensObj[_==null?void 0:_.address])==null?void 0:N.logo_url)},F=i(()=>t.value.xcetusRewardList);return{t:n,pendingAmount:k,nextStartTime:y,wallet:r,myShare:g,importIcon:Q,nextEndTime:p,pendingYieldText:R,cetusApr:c,pendingCoinInfo:v,getNextEpoch:Ie,canClaim:q,claimPendingYield:ge,claimLoading:G,addCommom:U,newPendingCoinInfo:l,newPendingAmount:S,newPendingYieldText:ae,rewardCoin:A,rewardCoinAmount:d,rewardCoinYieldText:oe,getCoinIcon:D,xcetusRewardList:F}}},Ut=""+new URL("staking-rewards-banner-h5.1c7401db.png",import.meta.url).href,Pt="data:image/png;base64,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";const ke=e=>(z("data-v-a7de5830"),e=e(),ee(),e),Mt={class:"top-banner"},Wt=ke(()=>a("img",{src:Ut,alt:""},null,-1)),Ot=ke(()=>a("p",null,"Convert CETUS to xCETUS to start earning",-1)),Vt={class:"bot-count"},Ht=ke(()=>a("span",null,"Reward distribution in ",-1)),Yt={class:"holder-rewards"},Ft={class:"title"},Xt=ke(()=>a("div",{class:"left"},[a("img",{src:Pt,alt:""}),a("span",null,"xCETUS Staking Rewards")],-1)),jt={class:"right"},Zt={class:"rewards-value"},qt={key:0,class:"rewards-value rewards-value-active"},Gt={class:"claim-h5"};function Kt(e,n,s,t,k,S){const d=yt,y=ie,p=$t;return u(),b("div",null,[a("div",Mt,[Wt,Ot,a("div",Vt,[Ht,M(d,{"start-time":t.nextStartTime,onCountDown:n[0]||(n[0]=g=>e.$emit("getNextEpoch"))},null,8,["start-time"])])]),a("div",Yt,[a("div",Ft,[Xt,a("div",jt,[t.wallet&&t.wallet.address?(u(),$(y,{key:0,loading:t.claimLoading,disabled:!t.canClaim||t.xcetusRewardList&&t.xcetusRewardList.length==0,onClick:t.claimPendingYield},{default:Y(()=>[x(" Claim ")]),_:1},8,["loading","disabled","onClick"])):W("",!0)])]),a("div",Zt,[M(p,{"title-text":"est.APR","tips-text":"good",value:"≈"+t.cetusApr+"%"},null,8,["title-text","value"]),M(p,{"title-text":"My share",value:t.myShare!=="--"?"≈"+t.myShare+"%":"--"},null,8,["value"]),t.xcetusRewardList&&t.xcetusRewardList.length==0?(u(),$(p,{key:0,"title-text":"Pending yield",value:"0"})):W("",!0),t.xcetusRewardList&&t.xcetusRewardList.length==1?(u(!0),b(Se,{key:1},Te(t.xcetusRewardList,(g,h)=>(u(),$(p,{key:h,"title-text":h==0?"Pending yield":"","img-icon":t.getCoinIcon(g),value:t.addCommom(g.amount,6),"token-symbol":g.symbol},null,8,["title-text","img-icon","value","token-symbol"]))),128)):W("",!0)]),t.xcetusRewardList&&t.xcetusRewardList.length>1?(u(),b("div",qt,[(u(!0),b(Se,null,Te(t.xcetusRewardList,(g,h)=>(u(),$(p,{key:h,"title-text":h==0?"Pending yield":"","img-icon":t.getCoinIcon(g),value:t.addCommom(g.amount,6),"token-symbol":g.symbol},null,8,["title-text","img-icon","value","token-symbol"]))),128))])):W("",!0),a("div",Gt,[t.wallet&&t.wallet.address?(u(),$(y,{key:0,disabled:!t.canClaim||t.xcetusRewardList&&t.xcetusRewardList.length==0,loading:t.claimLoading,onClick:t.claimPendingYield},{default:Y(()=>[x(" Claim ")]),_:1},8,["disabled","loading","onClick"])):W("",!0)])])])}const Jt=Z(Lt,[["render",Kt],["__scopeId","data-v-a7de5830"]]),Qt={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,n){const s=w("--"),t=w("--"),k=w("--"),S=w("--");let d=null;Ye(()=>{window.clearInterval(d)});const y=()=>{const g=new Date().getTime()/1e3;Number(g)<=Number(e.startTime)&&p(e.startTime),Number(g)>Number(e.startTime)&&Number(g)<=Number(e.endTime)&&p(e.endTime)},p=g=>{d=setInterval(()=>{let h=new Date().getTime()/1e3,c=g-parseInt(String(h));if(c==0){n.emit("countDown"),clearInterval(d),window.clearInterval(d),d=null;return}else c<0&&(clearInterval(d),window.clearInterval(d),n.emit("countDown"),d=null);c--;let v=parseInt(String(c/60/60/24));v=v<10?"0"+v:v;let l=parseInt(String(c/60/60%24));l=l<10?"0"+l:l;let A=parseInt(String(c/60%60));A=A<10?"0"+A:A;let R=parseInt(String(c%60));R=R<10?"0"+R:R,s.value=v,t.value=l,k.value=A,S.value=R},1e3)};return V(()=>e.startTime,(g,h)=>{g!==h&&y()},{immediate:!0}),{day:s,hour:t,min:k,sec:S}}};const Ae=e=>(z("data-v-131b3f4e"),e=e(),ee(),e),zt={class:"count-down"},en=Ae(()=>a("span",null,"D : ",-1)),tn=Ae(()=>a("span",null,"H : ",-1)),nn=Ae(()=>a("span",null,"M : ",-1)),an=Ae(()=>a("span",null,"S",-1));function on(e,n,s,t,k,S){return u(),b("div",zt,[x(T(t.day)+" ",1),en,x(" "+T(t.hour)+" ",1),tn,x(" "+T(t.min)+" ",1),nn,x(" "+T(t.sec)+" ",1),an])}const ln=Z(Qt,[["render",on],["__scopeId","data-v-131b3f4e"]]),sn={components:{WcountDown:ln},props:{vItem:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},setup(e,n){const{t:s}=se(),t=Le(),k=re(),S=i(()=>k),d=v=>{n.emit("claim",v),t.setClaimLoading(v.id)},y=i(()=>t),p=i(()=>new Date().getTime()/1e3>e.vItem.locked_until_time),g=v=>{n.emit("cancelRedeemPayload",v),t.setClaimLoading(v.id)};i(()=>S.value.chainName),Me("Sui");const h=ne();return i(()=>h),i(()=>y.value.venft_id),i(()=>S.value.chainName?Ue(S.value.chainName):{}),{t:s,prettyAmount:J,claimBoolean:p,toClaim:d,toCancel:g,claimWhale:v=>{n.emit("claimWhale",v)},cancelRedeemPayload:v=>{n.emit("cancelRedeemPayload",v)}}}};const We=e=>(z("data-v-22a782cd"),e=e(),ee(),e),rn={class:"vesting-box"},un={class:"left"},dn=We(()=>a("img",{src:Ze,alt:""},null,-1)),cn=We(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-swap2"})],-1)),mn=We(()=>a("img",{src:qe,alt:""},null,-1)),vn={class:"available-all"},gn={class:"available"},hn={key:0},fn={key:1};function pn(e,n,s,t,k,S){const d=je("WcountDown"),y=ie;return u(),b("div",rn,[a("div",un,[a("p",null,[a("span",null,[dn,x(" "+T(("addCommom"in e?e.addCommom:Ee(U))(t.prettyAmount(s.vItem.xcetus_amount,9),9))+" xCETUS ",1)]),cn,a("span",null,[mn,x(" "+T(("addCommom"in e?e.addCommom:Ee(U))(t.prettyAmount(s.vItem.cetus_amount,9),9))+" CETUS ",1)])]),a("div",vn,[a("div",gn,[a("span",null,T(t.claimBoolean?"Available":"Available in"),1),t.claimBoolean?W("",!0):(u(),$(d,{key:0,"start-time":s.vItem.locked_start_time,"end-time":s.vItem.locked_until_time,onCountDown:n[0]||(n[0]=p=>e.$emit("countDown"))},null,8,["start-time","end-time"]))]),a("div",{class:Ce(t.claimBoolean?"highlight right-h5":"right-h5")},[t.claimBoolean?(u(),b("span",hn,"Claim")):(u(),b("span",fn,"Cancel"))],2)])]),t.claimBoolean?(u(),$(y,{key:0,disabled:!t.claimBoolean||s.loading,loading:s.loading,onClick:n[1]||(n[1]=p=>t.claimWhale(s.vItem))},{default:Y(()=>[x(T(t.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"])):(u(),$(y,{key:1,type:"text",class:"right",disabled:s.loading,loading:s.loading,onClick:n[2]||(n[2]=p=>t.cancelRedeemPayload(s.vItem))},{default:Y(()=>[x(T(t.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"]))])}const _n=Z(sn,[["render",pn],["__scopeId","data-v-22a782cd"]]),wn=$e({props:{inputValue:{type:String,default:""},coinSymbol:{type:String,default:""},whaleDirection:{type:String,default:""},address:{type:String,default:""},balance:{type:String,default:""}},setup(e,n){const{t:s,locale:t}=se(),k=re(),S=i(()=>k),d=it(rt,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),y=ne(),p=i(()=>y),g=Pe(),h=i(()=>g),r=v=>{const A=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");v.target.value=v.target.value.replace(A,"$1")},c=i(()=>{var v;return h.value.tokensObj&&e.address&&h.value.tokensObj[e.address]&&((v=h.value.tokensObj[e.address])==null?void 0:v.decimals)});return V(()=>h.value.RATES,v=>{},{immediate:!0}),{pool:h,t:s,addCommom:U,store:S,wallet:p,indicator:d,inputChange:r,importIcon:Q,coinDecimals:c}}});const Cn=e=>(z("data-v-c5336450"),e=e(),ee(),e),bn={class:"card"},yn={class:"top"},Sn={class:"left"},Tn={class:"loading-token"},kn={key:0,src:qe,alt:""},An={key:1,src:Ze,alt:""},In={class:"bottom"},Bn=Cn(()=>a("div",null,null,-1)),Nn={class:"top"},xn={class:"right"},Rn={key:0,class:"balance"},Dn={key:2,class:"balance"};function En(e,n,s,t,k,S){var g,h;const d=ut,y=Xe,p=ie;return u(),b("div",bn,[a("div",yn,[M(d,{value:e.inputValue,placeholder:"0.0",onChange:e.inputChange,onInput:n[0]||(n[0]=r=>e.$emit("onInput",r.target.value)),onFocus:n[1]||(n[1]=r=>e.$emit("onFocus"))},null,8,["value","onChange"]),a("div",Sn,[a("div",Tn,[e.coinSymbol=="CETUS"?(u(),b("img",kn)):(u(),b("img",An)),a("div",null,[a("p",null,T(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1)])])])]),a("div",In,[Bn,a("div",Nn,[a("div",xn,[a("span",null,T(e.$t("common.balance")),1),e.balance!=="--"?(u(),b("span",Rn,T(e.balance>1?("addCommom"in e?e.addCommom:Ee(U))(e.balance):e.balance),1)):e.balance=="--"&&e.wallet&&e.wallet.address?(u(),$(y,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})):(u(),b("span",Dn,"--")),e.whaleDirection=="From"?(u(),$(p,{key:3,class:"max-btn",disabled:!e.balance||e.balance==0||!((g=e.wallet)!=null&&g.address),onClick:n[2]||(n[2]=r=>e.$emit("halfBalanne"))},{default:Y(()=>[x(T("Half"))]),_:1},8,["disabled"])):W("",!0),e.whaleDirection=="From"?(u(),$(p,{key:4,class:"max-btn",disabled:!e.balance||e.balance==0||!((h=e.wallet)!=null&&h.address),onClick:n[3]||(n[3]=r=>e.$emit("maxBalanne"))},{default:Y(()=>[x(T(e.$t("button.max")),1)]),_:1},8,["disabled"])):W("",!0)])])])])}const $n=Z(wn,[["render",En],["__scopeId","data-v-c5336450"]]);const Ln=$e({components:{Modal:dt},setup(e,n){const s=re(),t=w(!1);i(()=>s);const k=ne(),S=i(()=>k);return{store:s,isSelect:t,clickConvert:()=>{t.value&&localStorage.setItem(`notRemind${S.value.address}`,!0),n.emit("clickConvert")}}}}),Oe=e=>(z("data-v-ee04003a"),e=e(),ee(),e),Un=Oe(()=>a("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),Pn=[Un],Mn={class:"token-waring-conetnt"},Wn=Oe(()=>a("div",{class:"tips-text"},[x(" Please note that after conversion, if you want to convert xCETUS back to CETUS, a vesting period will be applied & different vesting durations correspond to different redeem ratios. "),a("a",{href:"https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus",target:"_blank"}," Learn more")],-1)),On={class:"read-text"},Vn={key:0,src:ft},Hn=Oe(()=>a("span",null," Do not remind again. ",-1));function Yn(e,n,s,t,k,S){const d=ie,y=je("Modal");return u(),$(y,{width:"440px",visible:!0,footer:null,title:null,"mask-closable":!0,onCancel:n[3]||(n[3]=p=>e.$emit("close"))},{closeIcon:Y(()=>[(u(),b("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:n[0]||(n[0]=p=>e.$emit("close"))},Pn))]),default:Y(()=>[a("div",Mn,[Wn,a("div",On,[a("div",{class:"radio",onClick:n[1]||(n[1]=p=>e.isSelect=!e.isSelect)},[e.isSelect?(u(),b("img",Vn)):W("",!0)]),Hn]),M(d,{class:"big-btn continue",onClick:n[2]||(n[2]=()=>e.clickConvert())},{default:Y(()=>[x("Convert")]),_:1})])]),_:1})}const Fn=Z(Ln,[["render",Yn],["__scopeId","data-v-ee04003a"]]),Xn=$e({setup(){const e=Le(),n=i(()=>e),s=i(()=>n.value.venft_id),t=i(()=>n.value.venftInfo),k=Pe(),S=i(()=>k),d=re(),y=i(()=>d),p=pt();i(()=>S.value.tokensObj&&S.value.tokensObj["0x2a4f647bc73f070182436658bff75060246019857c769ad9268c22c4472bca7f::cetus::CETUS"]);const g=w("");let h=w(!1);const r=w(""),c=w(""),v=w(!1),l=w("convert"),{t:A}=se(),R=w([{time:"15 D",num:15},{time:"30 D",num:30},{time:"90 D",num:90},{time:"180 D",num:180}]),ae=w([{name:"est.APR",value:"100.12%"},{name:"My share",value:"<0.1%"},{name:"Pending yield (USDC)",value:0}]),oe=w([{name:"My total locked",value:"$100.12"},{name:"Pending rewards (xCETUS)",value:"100.12"},{name:"",value:""}]),Ie=w([{name:"My positions",value:"12"},{name:"My qualified positions",value:"0"},{name:"Pending rewards (xCETUS)",value:"100.12"}]),de=window.setInterval(()=>{e.getXcetusApr(),C.value.address&&(e.getMyShare(C.value.address),e.getVeNFTDividendInfo())},6e4);ct(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||e.getDividendManager()}),e.getXcetusApr(),e.getDividendManager()}),mt(()=>{window.clearInterval(de),document.removeEventListener("visibilitychange",()=>{})}),V(()=>y.value.theme,o=>{o!=="sui"&&p.selectSuiTheme()},{immediate:!0});const q=i(()=>n.value.whaleBalance),ce=i(()=>n.value.xWhaleBalance),j=i(()=>n.value.availableXwhale),Be=i(()=>n.value.redeemingXwhale),me=i(()=>{if(l.value=="convert"){if(Number(r.value)>Number(q.value))return!0}else if(Number(r.value)>Number(j.value))return!0;return!r.value||!c.value||Number(r.value)==0||Number(c.value)==0}),I=w("180"),le=i(()=>l.value=="convert"&&Number(r.value)>Number(q.value)?A("button.insufficientBalance",{name:"CETUS"}):l.value!=="convert"&&Number(r.value)>Number(j.value)?A("button.insufficientBalance",{name:"xCETUS"}):Number(I.value)<15?"Minimum vesting duration is 15 days":l.value=="convert"&&s?"Convert":l.value!=="convert"&&s?"Redeem":"Convert"),ve=o=>{r.value="",c.value="",l.value=o},Ne=()=>{h.value=!0,setTimeout(()=>{h.value=!1},300)},G=o=>{I.value=o},B=w(!1),H=Me("Sui"),ge=ne(),C=i(()=>ge),he=i(()=>n.value.ownerLocks);V(()=>C.value.address,o=>{o?(e.getOwnerVeNFT(o),e.getAccountWhaleBalance(o),e.getOwnerLockCetuss(o),e.getMyShare(o)):e.loginOut()},{immediate:!0});const D=i(()=>y.value.chainName?Ue(y.value.chainName):{}),F=i(()=>y.value.chainName),{setIsShowSuccess:_,setIsShowRejected:N,setIsShowWaiting:f,setTransactionDesc:X,setTransactionTxid:O}=d,te=async()=>{B.value=!0,f(!0),O(""),X(A("tips.converting",{from:`${U(r.value,9)} CETUS`,and:"to",to:`${U(r.value,9)} xCETUS`}));try{let o;const m=we(r.value,9),E=await H.depositCetus(m,s.value),P=await C.value.currentWallet.signAndExecuteTransactionBlock(E);if(o=D.value.handleTx(P),o&&o.hash){O(o.hash),f(!1),_(!0);const L={title:"Converted",desc:`Converted ${U(r.value,9)} xCETUS successfully`,hash:o.hash,tit:"Converted",icon:"icon-icon-Swap",tokenInfo:{tokena:"CETUS",numa:`- ${r.value}`,logoa:Q("/sui-image/WHALE-icon.png"),tokenb:"xCETUS",numb:`+ ${r.value}`,logob:Q("/sui-image/xWHALE-icon.png")}};F.value!=="Aptos"&&(L.res=o.res),D.value.showTransitionPending(L),await D.value.watchTransaction(L)&&setTimeout(()=>{e.getAccountWhaleBalance(C.value.address),e.getOwnerVeNFT(C.value.address),e.getOwnerLockCetuss(C.value.address),e.getMyShare(C.value.address)},3e3),B.value=!1}else f(!1),N(!0),B.value=!1;r.value=""}catch{f(!1),N(!0),B.value=!1,r.value=""}},K=w(!0),xe=w("0"),Ge=async()=>{const o=we(r.value,9),m=await H.redeemNum(o,Number(I.value));c.value=J(m.amountOut,9),xe.value=m.percent},Ke=async()=>{const o=we(c.value,9),m=await H.reverseRedeemNum(o,Number(I.value));r.value=J(m.amountOut,9),xe.value=m.percent};V(()=>[r.value,I.value,K.value],([o,m,E])=>{o&&m&&E&&Number(m)>=15&&Ge(),!o&&E&&(c.value="")},{immediate:!0}),V(()=>[c.value,I.value,K.value],([o,m,E])=>{o&&m&&!E&&Number(m)>=15&&Ke(),!o&&!E&&(r.value="")},{immediate:!0}),V(()=>[I.value,K.value],([o,m])=>{Number(o)>180?I.value="180":Number(o)<15?m?c.value="":r.value="":o||(m?r.value="":c.value="")},{immediate:!0});const Je=()=>{K.value=!0,r.value=be(new He(l.value!=="convert"?j.value:q.value).div(new He(2)).toString(),9)},Qe=()=>{K.value=!0,r.value=l.value!=="convert"?be(j.value,9):be(q.value,9)},Ve=async()=>{B.value=!0,f(!0),O(""),X(A("tips.redeeming",{from:`${U(r.value,9)} xCETUS`,to:`${U(c.value,9)} CETUS`}));try{let o;const m=we(r.value,9),E=await H.getRedeemLockPayload(m,s.value,Number(I.value)),P=await C.value.currentWallet.signAndExecuteTransactionBlock(E);if(o=D.value.handleTx(P),o&&o.hash){O(o.hash),f(!1),_(!0);const L={title:"Redemption",desc:"Redemption transaction submitted successfully.",hash:o.hash,tit:"Vesting",icon:"icon-icon-Removed",tokenInfo:{tokena:"xCETUS",numa:`- ${r.value}`,logoa:Q("/sui-image/xWHALE-icon.png")}};F.value!=="Aptos"&&(L.res=o.res),D.value.showTransitionPending(L),await D.value.watchTransaction(L)&&setTimeout(()=>{e.getAccountWhaleBalance(C.value.address),e.getOwnerVeNFT(C.value.address),e.getOwnerLockCetuss(C.value.address),e.getMyShare(C.value.address)},3e3),B.value=!1}else f(!1),N(!0),B.value=!1;r.value="",c.value=""}catch{f(!1),N(!0),B.value=!1,r.value="",c.value=""}};V(()=>[s.value,he.value,t.value,C.value.address],([o,m,E,P])=>{P&&(o&&e.getVeNFTDividendInfo(),o&&!ye(E)&&m&&m.length>0&&e.getAvailableXCetus())},{immediate:!0,deep:!0});const ze=async o=>{B.value=!0,f(!0),O(""),X("");try{let m;const E=await H.getCancelRedeemPayload(o.id,s.value),P=await C.value.currentWallet.signAndExecuteTransactionBlock(E);if(m=D.value.handleTx(P),m&&m.hash){O(m.hash),f(!1),_(!0);const L={title:"Cancelled Redemption",desc:"Cancelled redemption successfully.",hash:m.hash,tit:"Cancelled Redemption",icon:"icon-a-icon-Shutdown",tokenInfo:{tokena:"xCETUS",numa:`+ ${J(o.xcetus_amount,9)}`,logoa:Q("/sui-image/xWHALE-icon.png")}};F.value!=="Aptos"&&(L.res=m.res),D.value.showTransitionPending(L),await D.value.watchTransaction(L)&&setTimeout(()=>{e.getOwnerVeNFT(C.value.address),e.getOwnerLockCetuss(C.value.address),B.value=!1},3e3)}else f(!1),N(!0),B.value=!1;r.value="",c.value=""}catch{f(!1),N(!0),B.value=!1,r.value="",c.value="",e.setClaimLoading("")}},et=w({}),tt=()=>{e.getOwnerLockCetuss(C.value.address)},nt=async o=>{B.value=!0,f(!0),O(""),X(`${A("tips.claimingPendingYield")} ${U(J(o.cetus_amount,9),9)} CETUS`);try{let m;const E=await H.getRedeemPayload(o.id,s.value),P=await C.value.currentWallet.signAndExecuteTransactionBlock(E);if(m=D.value.handleTx(P),m&&m.hash){O(m.hash),f(!1),_(!0);const L={title:"Claimed",desc:`Claimed ${U(J(o.cetus_amount,9),9)} CETUS successfully.`,hash:m.hash,tit:"CETUS Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:"CETUS",numa:`+ ${J(o.cetus_amount,9)}`,logoa:Q("/sui-image/WHALE-icon.png")}};F.value!=="Aptos"&&(L.res=m.res),D.value.showTransitionPending(L),await D.value.watchTransaction(L)&&setTimeout(()=>{e.getOwnerLockCetuss(C.value.address),e.getAccountWhaleBalance(C.value.address),e.getOwnerVeNFT(C.value.address),e.getMyShare(C.value.address),e.getAvailableXCetus(),B.value=!1},3e3)}else f(!1),N(!0),B.value=!1;r.value="",c.value=""}catch{f(!1),N(!0),B.value=!1,r.value="",c.value="",e.setClaimLoading("")}},Re=w(!1),at=()=>{!localStorage.getItem(`notRemind${C.value.address}`)&&le.value=="Convert"?Re.value=!0:le.value=="Redeem"?Ve():te()},ot=()=>{Re.value=!1,te()},fe=i(()=>n.value.pendingCoinInfo),pe=i(()=>n.value.pendingAmount),_e=w(!1);return{clickModalConvert:ot,openConfirmModal:Re,validateInput:()=>{I.value&&(I.value=I.value.replace(/[^\d]/g,""),I.value.charAt(0)==="0"&&(I.value=I.value.slice(1)))},countDown:tt,value:g,change:h,clickExchange:Ne,fromCoinAmount:r,toCoinAmount:c,showCoinSelect:v,headSwitchValue:l,headSwitchChange:ve,vestingDateList:R,vestingParameter:I,vestingTab:G,holderList:ae,lockupList:oe,leaderboardList:Ie,whaleBalance:q,depositCetus:te,btnText:le,loading:B,redeemRatio:xe,halfBalanne:Je,maxBalanne:Qe,xWhaleBalance:ce,availableXwhale:j,redeemingXwhale:Be,withdrawWhale:Ve,ownerLocks:he,cancelRedeemPayload:ze,holderInfo:et,btnDisabled:me,fixedFromCoin:K,walletStore:ge,claimWhale:nt,wallet:C,depositOrWithdraw:at,pendingAmount:pe,claimPendingYield:async()=>{_e.value=!0,f(!0),O(""),X(`${A("tips.claimingPendingYield")} ${pe.value} ${fe.value.symbol}`);try{let o;const m=await H.getRedeemDividendV2Payload(s.value),E=await C.value.currentWallet.signAndExecuteTransactionBlock(m);if(o=D.value.handleTx(E),o&&o.hash){O(o.hash),f(!1),_(!0);const P={title:"Claim",desc:`Claimed ${pe.value} ${fe.value.symbol} successfully.`,hash:o.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:fe.value.symbol,numa:`+ ${pe.value}`,logoa:fe.value.logo_url}};F.value!=="Aptos"&&(P.res=o.res),D.value.showTransitionPending(P),await D.value.watchTransaction(P)&&setTimeout(()=>{e.getVeNFTDividendInfo(),_e.value=!1},3e3),e.getOwnerLockCetuss(C.value.address)}else f(!1),N(!0),_e.value=!1,B.value=!1}catch{f(!1),N(!0),_e.value=!1}},inputBlur:()=>{Number(I.value)<15&&(I.value="15")},getNextEpoch:()=>{e.getDividendManager()}}}});const ue=e=>(z("data-v-821c97a6"),e=e(),ee(),e),jn={class:"dashboard-all"},Zn={class:"dashboard-content"},qn={class:"content-left"},Gn={key:0,class:"vesting"},Kn=ue(()=>a("p",null,"Vesting",-1)),Jn={class:"content-right"},Qn={key:0,class:"card-container"},zn={class:"card-item"},ea={class:"card-item"},ta={class:"exchange"},na=ue(()=>a("use",{"xlink:href":"#icon-icon-swap2"},null,-1)),aa=[na],oa={key:1,class:"card-redeem"},la={class:"card-item"},sa={class:"vesting-duration"},ia=ue(()=>a("p",null,"Vesting duration",-1)),ra={class:"vesting-content"},ua={class:"vesting-left"},da={class:"value-days"},ca=ue(()=>a("span",null,"days",-1)),ma={class:"vesting-right"},va=["onClick"],ga={class:"card-item"},ha={class:"redeem-ratio"},fa=ue(()=>a("span",null,"Redeem ratio",-1));function pa(e,n,s,t,k,S){const d=lt,y=Jt,p=_n,g=ht,h=$n,r=gt,c=ie,v=Fn;return u(),b("div",jn,[M(d,{title:"Dashboard","total-xwhale":e.xWhaleBalance,"available-xwhale":e.availableXwhale,"redeeming-xwhale":e.redeemingXwhale},null,8,["total-xwhale","available-xwhale","redeeming-xwhale"]),a("div",Zn,[a("div",qn,[M(y,{"holder-info":e.holderInfo,"pending-amount":e.pendingAmount,"claim-loading":e.claimLoading,onClaimPendingYield:e.claimPendingYield,onGetNextEpoch:e.getNextEpoch},null,8,["holder-info","pending-amount","claim-loading","onClaimPendingYield","onGetNextEpoch"]),e.ownerLocks&&e.ownerLocks.length>0?(u(),b("div",Gn,[Kn,(u(!0),b(Se,null,Te(e.ownerLocks,l=>(u(),$(p,{key:l,"v-item":l,loading:e.loading,onCountDown:e.countDown,onClaimWhale:e.claimWhale,onCancelRedeemPayload:e.cancelRedeemPayload},null,8,["v-item","loading","onCountDown","onClaimWhale","onCancelRedeemPayload"]))),128))])):W("",!0)]),a("div",Jn,[M(g,{"head-switch-value":e.headSwitchValue,"left-text":"Get xCETUS","right-text":"Redeem CETUS",onHeadSwitchChange:n[0]||(n[0]=l=>{e.headSwitchChange(l)})},null,8,["head-switch-value"]),e.headSwitchValue=="convert"?(u(),b("div",Qn,[a("div",zn,[M(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[1]||(n[1]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"CETUS","whale-direction":"From",balance:e.whaleBalance,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:n[2]||(n[2]=l=>{e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),a("div",ea,[M(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[3]||(n[3]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"To",balance:e.availableXwhale,onOnInput:n[4]||(n[4]=l=>{e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance"])]),a("img",{class:Ce(e.change?"gang animationex":"gang"),src:_t,alt:""},null,2),a("div",ta,[(u(),b("svg",{class:Ce(e.change?"icon animationex":"icon"),"aria-hidden":"true"},aa,2))])])):(u(),b("div",oa,[a("div",la,[M(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[5]||(n[5]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"From",balance:e.availableXwhale,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:n[6]||(n[6]=l=>{e.fixedFromCoin=!0,e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),a("div",sa,[ia,a("div",ra,[a("div",ua,[a("div",da,[Fe(a("input",{"onUpdate:modelValue":n[7]||(n[7]=l=>e.vestingParameter=l),onInput:n[8]||(n[8]=(...l)=>e.validateInput&&e.validateInput(...l)),onBlur:n[9]||(n[9]=(...l)=>e.inputBlur&&e.inputBlur(...l))},null,544),[[vt,e.vestingParameter]])]),ca]),a("div",ma,[(u(!0),b(Se,null,Te(e.vestingDateList,l=>(u(),b("div",{key:l.time,class:Ce(["box-table",{"box-table-active":l.num===Number(e.vestingParameter)}]),onClick:A=>e.vestingTab(l.num)},T(l.time),11,va))),128))])]),M(r,{value:e.vestingParameter,"onUpdate:value":n[10]||(n[10]=l=>e.vestingParameter=l),max:180,min:15},null,8,["value"])]),a("div",ga,[M(h,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[11]||(n[11]=l=>e.toCoinAmount=l),"input-value":e.toCoinAmount,"coin-symbol":"CETUS","whale-direction":"To",balance:e.whaleBalance,onOnInput:n[12]||(n[12]=l=>{e.fixedFromCoin=!1,e.toCoinAmount=l})},null,8,["modelValue","input-value","balance"])]),a("div",ha,[fa,a("p",null,T(e.redeemRatio)+"%",1)])])),e.wallet&&e.wallet.address?(u(),$(c,{key:2,class:"big-btn",loading:e.loading,disabled:e.btnDisabled,onClick:e.depositOrWithdraw},{default:Y(()=>[a("span",null,T(e.btnText),1)]),_:1},8,["loading","disabled","onClick"])):(u(),$(c,{key:3,class:"big-btn",onClick:n[13]||(n[13]=l=>e.walletStore.setIsShowWalletModal(!0))},{default:Y(()=>[a("span",null,T(e.$t("button.connectWallet")),1)]),_:1}))])]),e.openConfirmModal?(u(),$(v,{key:0,onClickConvert:e.clickModalConvert,onClose:n[14]||(n[14]=()=>e.openConfirmModal=!e.openConfirmModal)},null,8,["onClickConvert"])):W("",!0)])}const Va=Z(Xn,[["render",pa],["__scopeId","data-v-821c97a6"]]);export{Va as default};
