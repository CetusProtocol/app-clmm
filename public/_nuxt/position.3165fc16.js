import{_ as _e}from"./status-block.c2057c78.js";import{a as x,_ as j,b as ye,u as re,l as Re,g as Ue,h as $,i as X,c as Z,f as Y,e as c,j as Se}from"./import-icon.ebd1e745.js";import{a as ee,J as se,q as v,e as oe,o as n,f as t,i as _,u as i,t as o,c as de,w as D,h as s,v as g,x as L,z as Ne,b as me,r as S,s as G,F as q,E as z,G as ue,p as pe,k as ce,l as Ce,m as Ae,K as De,O as ie,j as Q,Q as Oe,B as je,H as le,R as Le}from"./entry.86b83171.js";/* empty css              *//* empty css              */import{_ as ve,a as ke}from"./icon-arrow_2x.45808d19.js";import{_ as he}from"./icon_on_2x.ae77fc4a.js";import{u as Pe}from"./notifi.2a9bf78d.js";import{_ as Fe,a as Te}from"./img-no-Positions_2x.666cad18.js";const Ee=ee({props:{pItem:{type:Object,required:!0},currentStatus:{type:String,required:!0},rewarderInfo:{type:Number,required:!0},aprAmount:{type:Number,required:!0}},setup(){const{t:e}=se(),m=x(),U=v(()=>m),C=v(()=>U.value.chainName),y=v(()=>j[C.value]);return{store:U,config:y,t:e}}});const Be={key:0,class:"owner-addres"},Ve=["href"],Ge=["href"],qe={class:"fee-tier"};function ze(e,m,U,C,y,P){const d=_e,w=Ne;return n(),t("div",{class:L(["position-status",`position-status-${e.pItem.currentStatus.toLowerCase()}`])},[_(d,{class:"status-block","current-status":e.pItem.currentStatus||"","is-pause":e.pItem.is_pause,"apr-amount":e.aprAmount,"block-name":"position"},null,8,["current-status","is-pause","apr-amount"]),e.pItem.tokenName?(n(),t("div",Be,[e.pItem.tokenName.length<=24?(n(),t("a",{key:0,href:e.store.theme=="default"?`${("config"in e?e.config:i(j)).explorerUrl}/token/${e.pItem.nftHash}/0`:`${("config"in e?e.config:i(j)).explorerUrl}/object/${e.pItem.nftHash}`,target:"_blank"},o(e.pItem.tokenName),9,Ve)):(n(),de(w,{key:1,placement:"bottom","arrow-point-at-center":""},{title:D(()=>[s("span",null,o(e.pItem.tokenName),1)]),default:D(()=>[s("a",{target:"_blank",href:e.store.theme=="default"?`${("config"in e?e.config:i(j)).explorerUrl}/token/${e.pItem.nftHash}/0?network=${("config"in e?e.config:i(j)).network}`:`${("config"in e?e.config:i(j)).explorerUrl}/object/${e.pItem.nftHash}`},o(e.pItem.tokenName.substr(0,4))+" ... "+o(e.pItem.tokenName.substr(e.pItem.tokenName.length-4,4)),9,Ge)]),_:1}))])):g("",!0),s("div",qe,o(e.$t("common.fee"))+" "+o(e.pItem.fee*100)+"%",1)],2)}const Ke=oe(Ee,[["render",ze],["__scopeId","data-v-0a37ba0d"]]),He=ee({props:{pItem:{type:Object,required:!0}},setup(e){const{t:m}=se(),U=me(),C=x(),y=v(()=>C);v(()=>y.value.chainName?ye(y.value.chainName):{});const P=re(),d=v(()=>P),w=()=>{y.value.chainName==="Aptos"?U.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`):U.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}&pos=${e.pItem.pos_object_id}`)},I=v(()=>d.value.allTokenObj&&e.pItem.token_a.address&&d.value.allTokenObj[e.pItem.token_a.address]&&d.value.allTokenObj[e.pItem.token_a.address].logo_url),a=v(()=>d.value.allTokenObj&&e.pItem.token_b.address&&d.value.allTokenObj[e.pItem.token_b.address]&&d.value.allTokenObj[e.pItem.token_b.address].logo_url),h=v(()=>d.value.feeOwedObj[e.pItem.tokenName]&&d.value.feeOwedObj[e.pItem.tokenName].feeOwed),K=v(()=>d.value.feeOwedObj[e.pItem.tokenName]&&d.value.feeOwedObj[e.pItem.tokenName].feesResult),N=v(()=>d.value.rewarderObj[e.pItem.tokenName]&&d.value.rewarderObj[e.pItem.tokenName].pendingRewarder),k=v(()=>d.value.rewarderObj[e.pItem.tokenName]&&d.value.rewarderObj[e.pItem.tokenName].pendingRewarderView),R=v(()=>d.value.rewarderObj[e.pItem.tokenName]&&d.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr),F=S(0),T=S();return G(()=>d.value.RATES,f=>{f&&(T.value=f)},{immediate:!0}),{showNum:Re,fromCoinUrl:I,toCoinUrl:a,decimalFormat:Ue,clickDetails:w,t:m,addCommom:$,importIcon:X,router:U,store:y,pendingRewarder:N,pendingFees:h,pendingRewarderArr:R,pendingFeesArr:K,checkNullObj:Z,fixD:Y,decimalUi:c,pendingRewarderView:k,aprAmount:F,getCoinIcon:f=>{var E;return(f==null?void 0:f.logoURI)||(f==null?void 0:f.logo_url)||((E=d.value.tokensObj[f==null?void 0:f.address])==null?void 0:E.logo_url)||(y.value.theme==="default"?X("/image/coins/unknown.png"):X("/image/coins/sui-unknown.png"))}}}});const be=e=>(pe("data-v-810946e6"),e=e(),ce(),e),Je={class:"position-item"},We={class:"card-content"},Me={class:"left"},Qe={class:"top card-header"},Ze={class:"token-item"},Xe={class:"item"},Ye=["src"],xe={class:"item"},es=["src"],ss={class:"min-and-max"},os={class:"text"},ns={key:0,src:ve,alt:""},ts={key:1,src:ke,alt:""},as={class:"text"},is={class:"bottom"},ls={class:"info-block-container"},rs={class:"leabl"},ds={class:"text"},ms={key:0,class:"hover-rewarder"},us={class:"rewarder-info"},ps={class:"left-rewarder"},cs=["src"],vs={class:"right-rewarder"},ks={class:"amount"},hs={key:0,class:"amount-usd"},bs={key:1,class:"amount-usd"},Is={class:"rewarder-info"},gs={class:"left-rewarder"},fs=["src"],$s={class:"right-rewarder"},ws={class:"amount"},_s={key:0,class:"amount-usd"},ys={key:1,class:"amount-usd"},Rs={class:"leabl"},Us={key:0,class:"text"},Ss={key:1,class:"text"},Ns={key:2,class:"text"},Cs={key:3,class:"hover-rewarder"},As={class:"left-rewarder"},Ds=["src"],Os={class:"right-rewarder"},js={class:"amount"},Ls={class:"amount-usd"},Ps={class:"leabl"},Fs={key:0,class:"text"},Ts={key:1,class:"text"},Es={key:2,class:"hover-rewarder"},Bs={class:"left-rewarder"},Vs=["src"],Gs={class:"right-rewarder"},qs={class:"amount"},zs={class:"amount-usd"},Ks=be(()=>s("div",{class:"more-img"},null,-1)),Hs={class:"min-and-max"},Js={class:"text"},Ws={key:0,src:ve,alt:""},Ms={key:1,src:ke,alt:""},Qs={class:"text"},Zs={class:"info-block-container"},Xs={class:"left"},Ys={class:"info-block"},xs={class:"leabl"},eo={class:"text"},so={class:"info-block cursor-block"},oo={class:"leabl"},no={key:0,class:"text"},to={key:1,class:"text"},ao={key:2,class:"hover-rewarder"},io={class:"left-rewarder"},lo=["src"],ro={class:"right-rewarder"},mo={class:"amount"},uo={class:"amount-usd"},po={key:0,class:"info-block cursor-block"},co={class:"leabl"},vo={key:0,class:"text"},ko={key:1,class:"text"},ho={key:2,class:"hover-rewarder"},bo={class:"left-rewarder"},Io=["src"],go={class:"right-rewarder"},fo={class:"amount"},$o={class:"amount-usd"},wo=be(()=>s("div",{class:"right"},[s("div",{class:"more-img"})],-1));function _o(e,m,U,C,y,P){var I;const d=Ke,w=ue;return n(),t("div",Je,[s("div",We,[s("div",Me,[_(d,{"p-item":e.pItem,"current-status":((I=e.pItem)==null?void 0:I.currentStatus)||"","rewarder-info":e.pendingRewarder,"apr-amount":e.aprAmount},null,8,["p-item","current-status","rewarder-info","apr-amount"])]),s("div",{class:"right",onClick:m[0]||(m[0]=(...a)=>e.clickDetails&&e.clickDetails(...a))},[s("div",Qe,[s("div",Ze,[s("div",Xe,[s("img",{src:(e.pItem.needReverse?e.toCoinUrl:e.fromCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)},null,8,Ye),s("div",null,[s("span",null,o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1),s("p",null,o(e.pItem.needReverse?e.pItem.token_b.name:e.pItem.token_a.name)+" "+o(e.pItem.needReverse?e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:"":e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:""),1)])]),s("div",xe,[s("img",{src:(e.pItem.needReverse?e.fromCoinUrl:e.toCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)},null,8,es),s("div",null,[s("span",null,o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1),s("p",null,o(e.pItem.needReverse?e.pItem.token_a.name:e.pItem.token_b.name)+" "+o(e.pItem.needReverse?e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:"":e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:""),1)])])]),s("div",ss,[s("div",os,o(e.pItem.needReverse?("addCommom"in e?e.addCommom:i($))(("decimalUi"in e?e.decimalUi:i(c))(1/e.pItem.maxPrice,6)):("addCommom"in e?e.addCommom:i($))(("decimalUi"in e?e.decimalUi:i(c))(e.pItem.minPrice,6))),1),e.store.theme=="default"?(n(),t("img",ns)):(n(),t("img",ts)),s("div",as,o(e.pItem.maxPrice.indexOf("+")>-1?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:i($))(("decimalUi"in e?e.decimalUi:i(c))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:i($))(("decimalUi"in e?e.decimalUi:i(c))(e.pItem.maxPrice,6)))+" "+o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)])]),s("div",is,[s("div",ls,[s("div",{class:L(["info-block cursor-block",e.pItem.amountUSD=="--"||Number(e.pItem.amountUSD)==0?"block-none":""])},[s("div",rs,o(e.$t("common.liquidity")),1),s("div",ds," $"+o(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:i($))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(n(),t("div",ms,[s("div",us,[s("div",ps,[s("img",{src:e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a),alt:""},null,8,cs),s("span",null,o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",vs,[s("div",ks,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:i(c))(e.pItem.amountB,e.pItem.token_b.decimals):("decimalUi"in e?e.decimalUi:i(c))(e.pItem.amountA,e.pItem.token_a.decimals)),1),e.pItem.needReverse?(n(),t("div",bs,o(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:i(Y))(e.pItem.tokenBRates,2):"<$0.01"),1)):(n(),t("div",hs,o(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:i(Y))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",Is,[s("div",gs,[s("img",{src:e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b),alt:""},null,8,fs),s("span",null,o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",$s,[s("div",ws,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:i(c))(e.pItem.amountA,e.pItem.token_a.decimals):("decimalUi"in e?e.decimalUi:i(c))(e.pItem.amountB,e.pItem.token_b.decimals)),1),e.pItem.needReverse?(n(),t("div",ys,o(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("decimalUi"in e?e.decimalUi:i(c))(e.pItem.tokenARates,2):"<$0.01"),1)):(n(),t("div",_s,o(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("decimalUi"in e?e.decimalUi:i(c))(e.pItem.tokenBRates,2):"<$0.01"),1))])])])):g("",!0)],2),s("div",{class:L(["info-block cursor-block",e.pendingFees==0?"block-none":""])},[s("div",Rs,o(e.$t("newAdd.pendingFees")),1),e.pendingFees==="--"?(n(),t("div",Us," $ -- ")):isNaN(e.pendingFees)?(n(),t("div",Ns,[_(w,{size:"small"})])):(n(),t("div",Ss,o(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:i($))(e.pendingFees,2)),1)),e.pendingFees>0?(n(),t("div",Cs,[(n(!0),t(q,null,z(e.pendingFeesArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",As,[s("img",{src:e.getCoinIcon(a),alt:""},null,8,Ds),s("span",null,o(a.symbol),1)]),s("div",Os,[s("div",js,o(Number(a.amount)==0?0:Number(a.amount)>1e-6?("addCommom"in e?e.addCommom:i($))(("decimalUi"in e?e.decimalUi:i(c))(a.amount,a.decimals),a.decimals):"<0.000001"),1),s("div",Ls,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:i($))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):g("",!0)],2),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:i(Z))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(n(),t("div",{key:0,class:L(["info-block cursor-block",e.pendingRewarder==0?"block-none":""])},[s("div",Ps,o(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(n(),t("div",Fs," $"+o(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(n(),t("div",Ts,[_(w,{size:"small"})])),e.pendingRewarder>0?(n(),t("div",Es,[(n(!0),t(q,null,z(e.pendingRewarderArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",Bs,[s("img",{src:a.logoURI,alt:""},null,8,Vs),s("span",null,o(a.symbol),1)]),s("div",Gs,[s("div",qs,o(("decimalUi"in e?e.decimalUi:i(c))(a.amount,a.decimals)),1),s("div",zs,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:i($))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):g("",!0)],2)):g("",!0),Ks])])])]),s("div",{class:"h5-bottom",onClick:m[1]||(m[1]=(...a)=>e.clickDetails&&e.clickDetails(...a))},[s("div",Hs,[s("div",Js,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:i(c))(1/e.pItem.minPrice,6):("decimalUi"in e?e.decimalUi:i(c))(e.pItem.minPrice,6)),1),e.store.theme=="default"?(n(),t("img",Ws)):(n(),t("img",Ms)),s("div",Qs,o(e.pItem.maxPrice.indexOf("+")>-1?"∞":e.pItem.needReverse?("decimalUi"in e?e.decimalUi:i(c))(1/e.pItem.maxPrice,6):("decimalUi"in e?e.decimalUi:i(c))(e.pItem.maxPrice,6))+" "+o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",Zs,[s("div",Xs,[s("div",Ys,[s("div",xs,o(e.$t("common.liquidity")),1),s("div",eo," $"+o(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:i($))(e.pItem.amountUSD,2)),1)]),s("div",so,[s("div",oo,o(e.$t("newAdd.pendingFees")),1),isNaN(e.pendingFees)?(n(),t("div",to,[_(w,{size:"small"})])):(n(),t("div",no,o(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:i($))(e.pendingFees,2)),1)),e.pendingFees>0?(n(),t("div",ao,[(n(!0),t(q,null,z(e.pendingFeesArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",io,[s("img",{src:e.getCoinIcon(a),alt:""},null,8,lo),s("span",null,o(a.symbol),1)]),s("div",ro,[s("div",mo,o(Number(a.amount)==0?0:Number(a.amount)>1e-6?("addCommom"in e?e.addCommom:i($))(("decimalUi"in e?e.decimalUi:i(c))(a.amount,a.decimals),a.decimals):"<0.000001"),1),s("div",uo,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:i($))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):g("",!0)]),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:i(Z))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(n(),t("div",po,[s("div",co,o(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(n(),t("div",vo," $"+o(e.pendingRewarder>0?("decimalUi"in e?e.decimalUi:i(c))(e.pendingRewarder,2):0),1)):(n(),t("div",ko,[_(w,{size:"small"})])),e.pendingRewarder>0?(n(),t("div",ho,[(n(!0),t(q,null,z(e.pendingRewarderArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",bo,[s("img",{src:a.logoURI,alt:""},null,8,Io),s("span",null,o(a.symbol),1)]),s("div",go,[s("div",fo,o(a.amount),1),s("div",$o,"$"+o(("decimalUi"in e?e.decimalUi:i(c))(a.amountUSD,2)),1)])]))),128))])):g("",!0)])):g("",!0)]),wo])])])}const yo=oe(He,[["render",_o],["__scopeId","data-v-810946e6"]]),Ro=ee({setup(){const e=S(!1),{t:m}=se(),U=S(["position"]),C=me(),y=S(""),P=x(),d=v(()=>P),w=v(()=>d.value.chainName?j[d.value.chainName]:{});let I=S([]);const a=re(),h=v(()=>a),K=Se(),N=v(()=>K),k=S(!1),R=S(m("tab.all")),F=S([m("tab.layerZero"),m("tab.wormhole"),m("tab.celer")]),T=S(!0),ne=S("TVL"),f=()=>{e.value=!0,I.value=[],N.value.address&&a.getMyPositons(N.value.address,h.value.poolsObj,d.value.chainName),setTimeout(()=>{e.value=!1},1e3)};Ce(()=>{I.value=[],document.addEventListener("click",()=>{k.value=!1}),a.setMyPositionsLoading(!0)}),Ae(()=>{document.addEventListener("click",()=>{k.value=!1})}),De(()=>{N.value.connected||(I.value=[])});const E=p=>{e.value=!0;let u=[];if(h.value.myPositions.forEach(l=>{var J,B,V,W,M,ae;let r;const b=l.amountA*((J=h.value.RATES[l.token_a.address])==null?void 0:J.price),O=l.amountB*((B=h.value.RATES[l.token_b.address])==null?void 0:B.price);console.log("0330###updateLpList####ele.amountA##",l.amountA),console.log("0330###updateLpList####ele.amountB##",l.amountB),console.log("0330###updateLpList####ele.token_a.address##",l.token_a.address),console.log("0330###updateLpList####ele.token_b.address##",l.token_b.address),console.log("0330###updateLpList####pools.value.RATES[ele.token_a.address]?.price##",(V=h.value.RATES[l.token_a.address])==null?void 0:V.price),console.log("0330###updateLpList####pools.value.RATES[ele.token_b.address]?.price##",(W=h.value.RATES[l.token_b.address])==null?void 0:W.price),(M=h.value.RATES[l.token_a.address])!=null&&M.price&&((ae=h.value.RATES[l.token_b.address])!=null&&ae.price)?r=b+O:r=" --",u.push({...l,amountUSD:r,tokenARates:b,tokenBRates:O})}),R.value!="All"){const l=[];u.forEach(r=>{var b;((b=r==null?void 0:r.labels)==null?void 0:b.indexOf(R.value))!==-1&&l.push(r)}),T.value?(I.value=l.sort((r,b)=>b.amountUSD-r.amountUSD),e.value=!1):(I.value=l.sort((r,b)=>r.amountUSD-b.amountUSD),e.value=!1)}else T.value?(I.value=u.sort((l,r)=>r.amountUSD-l.amountUSD),e.value=!1):(I.value=u.sort((l,r)=>l.amountUSD-r.amountUSD),e.value=!1);console.log(I.value,"list.value========>")};G(()=>[h.value.myPositions,h.value.RATES],([p,u])=>{p&&u&&E()},{immediate:!0}),G(()=>[N.value.address,h.value.poolConfigList,h.value.poolsObj,d.value.chainName],([p,u,l,r])=>{var b;p&&u&&u.length>0&&r&&(r!=null&&r.toLowerCase().includes((b=u[0])==null?void 0:b.chain))&&!Z(l)&&u.length===Object.values(l).length&&(console.log("0503@@@是没走到这里吗####"),a.getMyPositons(N.value.address,l,r))},{immediate:!0,deep:!0}),G(()=>R.value,p=>{E()}),G(()=>T.value,p=>{E()});const ge=p=>{const u=[];F.value.forEach((l,r)=>{l==p?u[r]=R.value:u[r]=l}),F.value=u,R.value=p},H=Pe(),A=v(()=>H),te=v(()=>a),fe=async p=>{console.log("执行了"),await H.getSourceGroups();const u=A.value.sourceGroups&&A.value.sourceGroups.length>0&&A.value.sourceGroups[0]&&A.value.sourceGroups[0].sources||[];let l;for(let r=0;r<u.length;r++){const{pool_address:b,position_index:O}=JSON.parse(u[r].blockchainAddress);let J=!1,B;for(let V=0;V<p.length;V++){const{poolAddress:W,index:M}=p[V];b==W&&Number(M)==Number(O)&&(J=!0),B={pool_address:b,position_index:O},console.log(l,"====>hasPositionInfo"),console.log(B,"","取消订阅的仓位")}J||await H.subscribePosition(B,"",!1,!1)}},$e=async()=>{await H.getSourceGroups(),console.log("全部取消");const p=A.value.sourceGroups&&A.value.sourceGroups.length>0&&A.value.sourceGroups[0]&&A.value.sourceGroups[0].sources||[];for(let u=0;u<p.length;u++){const{pool_address:l,position_index:r}=JSON.parse(p[u].blockchainAddress),{name:b}=p[u],O={pool_address:l,position_index:r};await H.subscribePosition(O,b,!1,!1)}},we=v(()=>te.value.myPositionsLoading);return G(()=>te.value.myPositions,(p,u)=>{console.log(p,u,"===>newMyPositions, oldMyposition"),w.value.hasNotifi&&(p&&p.length>0&&u&&u.length!==p.length?fe(p):p&&p.length==0&&!we.value&&$e())},{immediate:!0}),{changeSortLabel:ge,label:k,labelList:F,labelValue:R,select:T,selectValue:ne,t:m,pools:h,store:d,wallet:N,list:I,clickRefresh:f,refresh:e,current:U,router:C,searchKey:y}}}),Uo=""+new URL("img-connect-wallet_2x.ff62feba.png",import.meta.url).href,So=""+new URL("img-connect-wallet_2x.deb6e876.png",import.meta.url).href;const Ie=e=>(pe("data-v-a7d8d0cc"),e=e(),ce(),e),No={class:"position-title"},Co=Ie(()=>s("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),Ao=[Co],Do={class:"position-tab"},Oo={class:"search-tab"},jo={key:0,class:"positionNum"},Lo={class:"search-container"},Po={class:"value"},Fo=Ie(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),To=[Fo],Eo={key:0,class:"select-item"},Bo=["onClick"],Vo={key:0,src:he,alt:""},Go={key:1,class:"fan-img",src:he,alt:""},qo={key:0,class:"loading-global position-loading"},zo={key:1,class:"position-list"},Ko={key:2,class:"no-data"},Ho={key:0,src:Fe,alt:""},Jo={key:1,src:Te,alt:""},Wo={key:3,class:"no-data"},Mo={key:0,src:Uo,alt:""},Qo={key:1,src:So,alt:""};function Zo(e,m,U,C,y,P){const d=le("mail-outlined"),w=Le,I=le("appstore-outlined"),a=Oe,h=ue,K=yo,N=je;return n(),t("div",{class:L(e.list&&e.list.length===0&&e.wallet.connected||!e.wallet.connected?"position-center position-list-container":"position-list-container")},[s("div",No,[s("div",null,o(e.$t("common.concentratedPools")),1),(n(),t("svg",{"aria-hidden":"true",class:L(e.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:m[0]||(m[0]=(...k)=>e.clickRefresh&&e.clickRefresh(...k))},Ao,2))]),s("div",Do,[s("div",Oo,[_(a,{selectedKeys:e.current,"onUpdate:selectedKeys":m[2]||(m[2]=k=>e.current=k),mode:"horizontal"},{default:D(()=>[_(w,{key:"pools",onClick:m[1]||(m[1]=k=>e.router.push("/pools"))},{icon:D(()=>[_(d)]),default:D(()=>[Q(" "+o(e.$t("menu.pools")),1)]),_:1}),_(w,{key:"position"},{icon:D(()=>[_(I)]),default:D(()=>[Q(" "+o(e.$t("common.myPosition")),1),e.list.length>0?(n(),t("span",jo," ("+o(e.list.length)+")",1)):g("",!0)]),_:1})]),_:1},8,["selectedKeys"])]),s("div",Lo,[e.store.theme=="default"?(n(),t("div",{key:0,class:"search-label",onClick:m[3]||(m[3]=ie(k=>e.label=!e.label,["stop"]))},[s("span",null,o(e.$t("newAdd.label")),1),s("div",Po,o(e.labelValue),1),(n(),t("svg",{"aria-hidden":"true",class:L(e.label?"show-icon icon":"icon")},To,2)),e.label?(n(),t("div",Eo,[(n(!0),t(q,null,z(e.labelList,(k,R)=>(n(),t("div",{key:R,class:"select-menu-item",onClick:F=>e.changeSortLabel(k)},o(k),9,Bo))),128))])):g("",!0)])):g("",!0),s("div",{class:"search-select",onClick:m[4]||(m[4]=ie(k=>e.select=!e.select,["stop"]))},[s("div",null,[Q(" TVL "),e.select?(n(),t("img",Vo)):(n(),t("img",Go))])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(n(),t("div",qo,[_(h)])):g("",!0),e.list&&e.list.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(n(),t("div",zo,[(n(!0),t(q,null,z(e.list,(k,R)=>(n(),de(K,{key:R,"p-item":k},null,8,["p-item"]))),128))])):g("",!0),e.list&&e.list.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(n(),t("div",Ko,[e.store.theme=="default"?(n(),t("img",Ho)):(n(),t("img",Jo)),s("span",null,o(e.$t("common.noLiquidityPositions")),1)])):g("",!0),e.wallet.connected?g("",!0):(n(),t("div",Wo,[e.store.theme=="default"?(n(),t("img",Mo)):(n(),t("img",Qo)),_(N,{class:"connect-wallet",onClick:m[5]||(m[5]=k=>e.wallet.setIsShowWalletModal(!0))},{default:D(()=>[Q(o(e.$t("button.connectWallet")),1)]),_:1})]))],2)}const ln=oe(Ro,[["render",Zo],["__scopeId","data-v-a7d8d0cc"]]);export{ln as default};
