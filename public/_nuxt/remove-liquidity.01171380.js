import{_ as Lo}from"./back.6dd0d309.js";import{_ as Do}from"./coin-pair-name.146798a1.js";import{_ as Eo}from"./status-block.014ec674.js";import{a as Wo,_ as Fo}from"./network-tips.3270dfe6.js";import{a as Vo,u as Mo,j as Xo,l as g,h as b,i as W,b as zo,c as Q,T as go,C as Go,d as fo,g as wo,f as yo}from"./import-icon.9d757206.js";import{p as Z}from"./precision.9d58cda5.js";import{a as Jo,J as Ko,r,f as U,K as Ho,w as Y,W as Qo,G as Yo,h as Zo,o as T,i as L,v as D,j as e,t as a,l as bo,c as No,k as ao,F as Ao,D as $o,u as k,s as E,x as xo,z as oe,A as ee,I as ne,X as se,B as ie,E as ae,p as te,m as le}from"./entry.94f2f2cc.js";/* empty css              *//* empty css              */const ue=Jo({setup(){const{t:o,locale:c}=Ko();let ko=r(!1),J=r(!1);const x=r(!1),ho=()=>{no(),x.value=!0,setTimeout(()=>{x.value=!1},1e3)},lo=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],K=Vo(),w=U(()=>K),uo=Mo(),F=r(""),V=r(""),M=r(""),oo=r(""),eo=r(""),l=r(""),X=r(""),ro=r(""),Ro=t=>{let d=t.replace(/[^\d.]/g,"");const _=/^\d+(\.\d+)?$/;d.split(".").length>2&&!_.exec(d)&&(d=d.substr(0,d.length-1)),N.value=d},s=U(()=>uo),m=r({}),v=r({}),n=r(s.value.currentPositionInfo||{}),To=Xo(),H=U(()=>To),C=Yo();Ho(()=>{H.value.connected||C.push("/position")});const y=U(()=>w.value.chainName?zo(w.value.chainName):{}),no=async()=>{s.value.setCurrentPositionLoading(!0);const t=C.currentRoute.value.query.token||"",d=C.currentRoute.value.query.collect||"",_=C.currentRoute.value.query.pos||"";w.value.chainName==="Aptos"?t&&d&&(F.value=d,V.value=C.currentRoute.value.query.address,M.value=t,s.value.setCurrentPositionInfo(V.value,F.value,M.value,w.value.chainName),n.value=s.value.currentPositionInfo):_&&(F.value=d,V.value=C.currentRoute.value.query.address,M.value=t,s.value.setCurrentPositionInfo(V.value,F.value,M.value,w.value.chainName,_),n.value=s.value.currentPositionInfo)};Y(()=>s.value.addressLpTokens,t=>{Q(t)||no()},{immediate:!0}),Y(()=>s.value.currentPositionInfo,t=>{t&&(n.value=s.value.currentPositionInfo,m.value=n.value.token_a,v.value=n.value.token_b,co({value:N.value/100}))});const N=r(50),h=r(0),I=r(0),mo=r(0),vo=U(()=>K.slippage);Y(N,Qo((t,d)=>{Number(t)>100?N.value=100:t&&n.value&&(N.value=t,co({value:N.value/100}))},300)),Y(vo,t=>{t&&n.value&&co({value:N.value/100})});const co=t=>{var f,R;const d=n.value.token_a.decimals,_=n.value.token_b.decimals,O=n.value.tick_lower_index,j=n.value.tick_upper_index,z=go.tickIndexToSqrtPriceX64(O),G=go.tickIndexToSqrtPriceX64(j);mo.value=n.value.liquidity*Number(t.value);const A=Go.getCoinAmountFromLiquidity(new fo(mo.value),new fo(n.value.current_sqrt_price),z,G,!0),q=Number(A.coinA.toString())/Math.pow(10,d),B=Number(A.coinB.toString())/Math.pow(10,_);h.value=q,I.value=B;const p=(f=s.value.RATES[n.value.token_a.address])==null?void 0:f.price,$=(R=s.value.RATES[n.value.token_b.address])==null?void 0:R.price;oo.value=Number(h.value*p)<.01?Number(h.value*p)===0?"0":"<0.01":b(h.value*p,2),eo.value=Number(I.value*$)<.01?Number(I.value*$)===0?"0":"<0.01":b(I.value*$,2);const u=Z.minus(Number(n.value.amountA),Number(h.value))*p;l.value=Number(u)<.01?Number(u)===0?"0":"<0.01":b(u,2);const i=Z.minus(Number(n.value.amountB),Number(I.value))*$;X.value=Number(i)<.01?Number(i)===0?"0":"<0.01":b(i,2);const P=Number(wo(u,2))+Number(wo(i,2));ro.value=Number(P)<.01?Number(P)===0?"0":"<0.01":b(P,2)},{setIsShowSuccess:So,setIsShowRejected:Io,setIsShowWaiting:so,setTransactionDesc:Co,setTransactionTxid:_o,setPositiomNum:mn,setTransactionDescText:Oo}=K,jo=async()=>{var d,_,O,j,z,G,A,q,B,p,$;J.value=!0,_o(""),Co(o("tips.removeLiquidiyText",{from:b(h.value,m.value.decimals)==0?"":`${g(h.value,m.value.decimals)} ${m.value.symbol}`,and:b(h.value,m.value.decimals)==0||b(I.value,v.value.decimals)==0?"":"and",to:b(I.value,v.value.decimals)==0?"":`${g(I.value,v.value.decimals)} ${v.value.symbol}`})),so(!0);const t=S.value&&S.value.length>0?o("modal.removeLiquidityText1"):o("modal.removeLiquidityText2");Oo(t);try{let u={};u={pool:{...n.value.poolInfo,coinA:n.value.token_a,coinB:n.value.token_b},coinTypeA:n.value.poolInfo.coinTypeA,coinTypeB:n.value.poolInfo.coinTypeB,position:n.value,delta_liquidity:new fo(yo(mo.value,0)),slippage:Number(vo.value),rewards_num:S.value.length};const i=S.value;u.coinTypeC=i[0]?i[0].coin_address:"",u.coinTypeD=i[1]?i[1].coin_address:"",u.coinTypeE=i[2]?i[2].coin_address:"";const P=await y.value.getRemoveLiquidityTransactionPayload(u);let f;if(w.value.chainName==="Aptos")f=await H.value.currentWallet.signAndSubmitTransaction(P);else{const R=await H.value.currentWallet.signAndExecuteTransaction(P);f=y.value.handleTx(R)}if(f&&f.hash){_o(f.hash),so(!1),So(!0);const R={title:o("common.removeLiquidity"),desc:"",hash:f.hash,descTransactions:`Remove ${h.value} ${(d=m.value)==null?void 0:d.symbol} and ${I.value} ${(_=v.value)==null?void 0:_.symbol} 
             from the pool`,sender:H.value.address,chainName:w.value.chainName,tit:"Liquidity Removed",icon:"icon-icon-Removed",tokenInfo:{tokena:`${(O=m.value)==null?void 0:O.symbol}`,numa:`+ ${h.value}`,logoa:s.value.tokensObj&&m.value&&m.value.address&&s.value.tokensObj[m.value.address]&&s.value.tokensObj[m.value.address].logoURI,tokenb:`${(j=v.value)==null?void 0:j.symbol}`,numb:`+ ${I.value}`,logob:s.value.tokensObj&&v.value&&v.value.address&&s.value.tokensObj[v.value.address]&&s.value.tokensObj[v.value.address].logoURI},text:`Withdraw ${h.value} ${(z=m.value)==null?void 0:z.symbol} and ${I.value} ${(G=v.value)==null?void 0:G.symbol}`};y.value.showTransitionPending(R);const io=await y.value.watchTransaction(R);if(S.value&&S.value.length>0&&(Number((A=i[0])==null?void 0:A.amount)!==0||u.coinTypeD&&Number((q=i[1])==null?void 0:q.amount)!==0||u.coinTypeE&&Number((B=i[2])==null?void 0:B.amount)!==0)){const po={title:o("common.removeLiquidity"),desc:"",hash:f.hash,tit:"Bonus Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:i[0].symbol,numa:`+ ${Number(i[0].amount)}`,logoa:s.value.tokensObj&&i[0]&&i[0].address&&s.value.tokensObj[i[0].address]&&s.value.tokensObj[i[0].address].logoURI,tokenb:u.coinTypeD?i[1].symbol:"",numb:u.coinTypeD?`+ ${Number(i[1].amount)}`:"",logob:u.coinTypeD?s.value.tokensObj&&i[1]&&i[1].address&&s.value.tokensObj[i[1].address]&&s.value.tokensObj[i[1].address].logoURI:"",tokenc:u.coinTypeE?i[2].symbol:"",numc:u.coinTypeE?`+ ${Number(i[2].amount)}`:"",logoc:u.coinTypeE?s.value.tokensObj&&i[2]&&i[2].address&&s.value.tokensObj[i[2].address]&&s.value.tokensObj[i[2].address].logoURI:""},text:`Withdraw ${h.value} ${(p=m.value)==null?void 0:p.symbol} and ${I.value} ${($=v.value)==null?void 0:$.symbol}`},Uo=await y.value.setTransations(po)}if(g(n.value.feeOwedA,n.value.token_a.decimals)!==0||g(n.value.feeOwedB,n.value.token_b.decimals)!==0){const po={title:"Claim",desc:"",hash:f.hash,chainName:w.value.chainName,tit:"Fees Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:`${n.value.token_a.symbol}`,numa:b(n.value.feeOwedA,n.value.token_a.decimals)==0?"":`+ ${g(n.value.feeOwedA,n.value.token_a.decimals)}`,logoa:b(n.value.feeOwedA,n.value.token_a.decimals)==0?"":s.value.tokensObj&&n.value&&n.value.token_a.address&&s.value.tokensObj[n.value.token_a.address]&&s.value.tokensObj[n.value.token_a.address].logoURI,tokenb:`${n.value.token_b.symbol}`,numb:b(n.value.feeOwedB,n.value.token_b.decimals)==0?"":`+ ${g(n.value.feeOwedB,n.value.token_b.decimals)}`,logob:b(n.value.feeOwedB,n.value.token_b.decimals)==0?"":s.value.tokensObj&&n.value&&n.value.token_b.address&&s.value.tokensObj[n.value.token_b.address]&&s.value.tokensObj[n.value.token_b.address].logoURI}},Uo=await y.value.setTransations(po)}io&&(setTimeout(()=>{no()},3e3),setTimeout(()=>{no()},6e3),Number(N.value)==100&&C.push("/position"))}else so(!1),Io(!0);J.value=!1}catch{J.value=!1,so(!1),Io(!0)}},qo=U(()=>s.value.tokensObj&&m.value.address&&s.value.tokensObj[m.value.address]&&s.value.tokensObj[m.value.address].logoURI),Bo=U(()=>s.value.tokensObj&&v.value.address&&s.value.tokensObj[v.value.address]&&s.value.tokensObj[v.value.address].logoURI),Po=r(0),S=r([]);return Y(()=>[n.value,s.value.addressLpTokens,s.value.newTokenObj,s.value.RATES],async([t,d,_,O])=>{if(!Q(t)&&!Q(d)&&!Q(_)&&!Q(O)){const j=d[t.poolAddress],z=await y.value.getTickDataByIndex(j.ticks_handle,Number(t.tick_lower_index)),G=await y.value.getTickDataByIndex(j.ticks_handle,Number(t.tick_upper_index));let A={};w.value.chainName==="Aptos"?A=await y.value.getPosRewardersAmount({poolAddress:t.poolAddress,positionName:t.tokenName,tickLowerData:z,tickUpperData:G}):A=await y.value.getPosRewardersAmount({poolAddress:t.poolAddress,pos:t.pos_object_id});const q=[];let B=0;A.forEach((p,$)=>{if(n.value.poolInfo[`rewarder_display${$+1}`]){const u=_[p.coin_address].decimals,i=_[p.coin_address],f=(Number(p.amount_owed.toString())>99999999999999?0:Number(p.amount_owed.toString()))/Math.pow(10,u),R=O[p.coin_address].price,io=f*R;B+=io,q.push({...p,...i,amount:f,amountUSD:io})}}),S.value=q,Po.value=Number(yo(B,2))}},{immediate:!0}),{removeAmountARates:l,removeAmountBRates:X,removeAmountRates:ro,receiveAmountARates:oo,receiveAmountBRates:eo,showNum:g,fromCoinUrl:qo,toCoinUrl:Bo,precision:Z,addCommom:b,loading:J,wallet:H,toRemove:jo,fromCoinAmount:h,toCoinAmount:I,pools:s,refresh:x,amountArr:lo,sliderVal:N,positionInfo:n,slippage:vo,importIcon:W,clickRefresh:ho,isShowSwapSetting:ko,pendingRewarderArr:S,changeValue:Ro}}});const to=o=>(te("data-v-78ecb289"),o=o(),le(),o),re={class:"remove-liquidity"},de={class:"remove-liquidity-top"},me={class:"remove-title"},ve={class:"right title-right"},ce=to(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),pe=to(()=>e("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),fe=[pe],be={class:"remove-liquidity-center"},ke={class:"top"},he={class:"left"},Ie={class:"right"},_e={class:"fee"},ge={class:"bottom"},we={class:"add-amount"},ye={class:"add-amount-header"},Ne={class:"amount-list"},Ae=["onClick"],$e={class:"slider-box"},Re={class:"receive"},Te={class:"receiveTit"},Se={class:"item"},Ce={class:"left"},Oe=["src"],je={class:"right"},qe={class:"item"},Be={class:"left"},Pe=["src"],Ue={class:"right"},Le={class:"remove-liquidity-bottom-box"},De={class:"induction remove-liquidity-bottom"},Ee={class:"item"},We={class:"induction-text"},Fe={class:"induction-value"},Ve=["src"],Me=to(()=>e("div",{class:"induction-text"},null,-1)),Xe={class:"induction-value"},ze=["src"],Ge={class:"induction-text"},Je={class:"induction-value"},Ke=["src"],He=to(()=>e("svg",{"aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-Remove"})],-1)),Qe={key:0,class:"receive"},Ye={class:"receiveTit"},Ze={class:"left"},xe={class:"right"},on={class:"item"},en={class:"left"},nn=["src"],sn={class:"right"},an={class:"item"},tn={class:"left"},ln=["src"],un={class:"right"},rn={class:"loading-global"};function dn(o,c,ko,J,x,ho){const lo=Lo,K=Do,w=Eo,uo=ne,F=se,V=ie,M=Wo,oo=Fo,eo=ae;return T(),L("div",re,[D(lo),e("div",de,[e("div",me,a(o.$t("common.removeLiquidity")),1),e("div",ve,[e("div",{class:"slippage-icon",onClick:c[0]||(c[0]=l=>o.isShowSwapSetting=!0)},[ce,e("span",null,a(o.slippage)+"%",1)]),(T(),L("svg",{"aria-hidden":"true",class:bo(o.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:c[1]||(c[1]=(...l)=>o.clickRefresh&&o.clickRefresh(...l))},fe,2))])]),e("div",be,[e("div",ke,[e("div",he,[o.positionInfo?(T(),No(K,{key:0,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b},null,8,["from-coin","to-coin"])):ao("",!0),e("div",Ie,[e("div",_e,a(o.positionInfo.fee*100)+"%",1)])]),D(w,{"current-status":o.positionInfo.currentStatus||""},null,8,["current-status"])]),e("div",ge,[e("div",we,[e("div",ye,[e("span",null,a(o.$t("common.amount")),1),e("div",Ne,[(T(!0),L(Ao,null,$o(o.amountArr,(l,X)=>(T(),L("div",{key:X,class:bo(["amount-item",o.sliderVal==l.value?"amount-item-active":""]),onClick:ro=>o.sliderVal=l.value},a(l.name),11,Ae))),128))])]),e("div",$e,[D(uo,{value:o.sliderVal,"onUpdate:value":c[2]||(c[2]=l=>o.sliderVal=l),suffix:"%",onChange:c[3]||(c[3]=l=>o.changeValue(l.target.value))},null,8,["value"]),D(F,{value:o.sliderVal,"onUpdate:value":c[4]||(c[4]=l=>o.sliderVal=l)},null,8,["value"])])])])]),e("div",Re,[e("div",Te,a(o.$t("newAdd.receive")),1),e("div",Se,[e("div",Ce,[e("img",{src:o.fromCoinUrl||("importIcon"in o?o.importIcon:k(W))(`/image/coins/${o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,Oe),e("span",null,a(("showNum"in o?o.showNum:k(g))(o.fromCoinAmount,o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals)),1),E(" "+a(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" "+a(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.labels&&o.positionInfo.token_a.labels[0]?`(${o.positionInfo.token_a.labels[0]})`:""),1)]),e("div",je,"≈ $"+a(o.receiveAmountARates),1)]),e("div",qe,[e("div",Be,[e("img",{src:o.toCoinUrl||("importIcon"in o?o.importIcon:k(W))(`/image/coins/${o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,Pe),e("span",null,a(("showNum"in o?o.showNum:k(g))(o.toCoinAmount,o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals)),1),E(" "+a(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol)+" "+a(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.labels&&o.positionInfo.token_b.labels[0]?`(${o.positionInfo.token_b.labels[0]})`:""),1)]),e("div",Ue,"≈ $"+a(o.receiveAmountBRates),1)])]),e("div",Le,[e("div",De,[e("div",Ee,[e("div",We,a(o.$t("common.fees")),1),e("div",Fe,[e("img",{src:o.fromCoinUrl||("importIcon"in o?o.importIcon:k(W))(`/image/coins/${o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,Ve),E(" "+a(("showNum"in o?o.showNum:k(g))(o.positionInfo&&o.positionInfo.feeOwedA,o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals))+" ",1),e("span",null,a(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)])]),e("div",{class:bo(o.pendingRewarderArr.length>0?"item item-boder":"item")},[Me,e("div",Xe,[e("img",{src:o.toCoinUrl||("importIcon"in o?o.importIcon:k(W))(`/image/coins/${o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,ze),E(" "+a(("showNum"in o?o.showNum:k(g))(o.positionInfo&&o.positionInfo.feeOwedB,o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals))+" ",1),e("span",null,a(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)])],2),o.positionInfo.is_display_rewarder?(T(!0),L(Ao,{key:0},$o(o.pendingRewarderArr,(l,X)=>(T(),L("div",{key:l,class:"item"},[e("div",Ge,a(X==0?o.$t("common.rewards"):""),1),e("div",Je,[e("img",{src:l.logoURI},null,8,Ke),E(" "+a(l.amount>1e-6?l.amount:l.amount===0?"0":"<0.000001")+" ",1),e("span",null,a(l.symbol),1)])]))),128)):ao("",!0)])]),D(V,{disabled:o.wallet.connected?Number(o.sliderVal)==0||o.loading:!1,class:"remove-btn big-btn",onClick:c[5]||(c[5]=l=>o.wallet.connected?o.toRemove():o.wallet.setIsShowWalletModal(!0))},{default:xo(()=>[He,e("span",null,a(o.wallet.connected?o.$t("button.remove"):o.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),D(M),o.sliderVal<100?(T(),L("div",Qe,[e("div",Ye,[e("div",Ze,a(o.$t("newAdd.remainingPosition")),1),e("div",xe,"$"+a(o.removeAmountRates),1)]),e("div",on,[e("div",en,[e("img",{src:o.fromCoinUrl||("importIcon"in o?o.importIcon:k(W))(`/image/coins/${o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,nn),e("span",null,a(("showNum"in o?o.showNum:k(g))(("precision"in o?o.precision:k(Z)).minus(Number(o.positionInfo.amountA),Number(o.fromCoinAmount)),o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals)),1),E(" "+a(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" "+a(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.labels&&o.positionInfo.token_a.labels[0]?`(${o.positionInfo.token_a.labels[0]})`:""),1)]),e("div",sn,"≈ $"+a(o.removeAmountARates),1)]),e("div",an,[e("div",tn,[e("img",{src:o.toCoinUrl||("importIcon"in o?o.importIcon:k(W))(`/image/coins/${o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,ln),e("span",null,a(("showNum"in o?o.showNum:k(g))(("precision"in o?o.precision:k(Z)).minus(Number(o.positionInfo.amountB),Number(o.toCoinAmount)),o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals)),1),E(" "+a(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol)+" "+a(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.labels&&o.positionInfo.token_b.labels[0]?`(${o.positionInfo.token_b.labels[0]})`:""),1)]),e("div",un,"≈ $"+a(o.removeAmountBRates),1)])])):ao("",!0),o.isShowSwapSetting?(T(),No(oo,{key:1,onOnClose:c[6]||(c[6]=l=>o.isShowSwapSetting=!1)})):ao("",!0),oe(e("div",rn,[D(eo)],512),[[ee,o.pools.currentPositionLoading]])])}const gn=Zo(ue,[["render",dn],["__scopeId","data-v-78ecb289"]]);export{gn as default};
