import{_ as se}from"./token-warning.966bf6d3.js";import{i as y}from"./import-icon.de3e6c66.js";import{a as K,j as ae,u as te,b as D,D as ve,f as fe,d as he,p as _e}from"./pool.3e14b6aa.js";import{a as le,l as ie,m as f,a1 as ke,a2 as de,A as V,e as re,o as a,f as i,h as t,c as j,t as p,x as z,u as g,i as B,w as k,s as N,j as E,I as ge,J as ue,aa as ye,S as Ce,B as we,p as ce,k as pe,M as $e,r as P,v as Se,ab as Ie,K as H,E as Te,a3 as Le,F as oe,q as ne,D as Oe,ac as je}from"./entry.1ec3126e.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{_ as Be,a as Ne}from"./img-no-Positions_2x.83ba3d3f.js";const Ae=le({components:{TokenWarning:se},props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,r){const{t:l,locale:Z}=ie(),R=K(),h=f(()=>R),C=f(()=>new ve(Number(e.balance)).div(2)),m=ke(de,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function I(){this.$emit("onSelect")}const w=c=>{const v=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(_==null?void 0:_.value)&&(_==null?void 0:_.value)}})?).*$`);c.target.value=c.target.value.replace(v,"$1")},T=ae(),b=f(()=>T),s=te(),u=f(()=>s);let $={};V(()=>u.value.RATES,c=>{c&&($=c)},{immediate:!0});const L=f(()=>fe(Number(e.inputValue)*Number($&&$[e.address]&&$[e.address].price),2)),A=f(()=>{var c,v;return u.value.tokensObj&&e.address&&u.value.tokensObj[e.address]&&((c=u.value.tokensObj[e.address])==null?void 0:c.labels)&&((v=u.value.tokensObj[e.address])==null?void 0:v.labels[0])}),_=f(()=>{var c;return u.value.tokensObj&&e.address&&u.value.tokensObj[e.address]&&((c=u.value.tokensObj[e.address])==null?void 0:c.decimals)}),F=f(()=>{var c,v;return e.coinIcon||((v=(c=u==null?void 0:u.value)==null?void 0:c.tokensObj[e.address])==null?void 0:v.logo_url)||(h.value.theme==="default"?y("/image/coins/unknown.png"):y("/image/coins/sui-unknown.png"))}),q=f(()=>u.value.tokensObj);return{theme:f(()=>h.value.theme),currentIcon:F,tokensObj:q,pool:u,halfBalance:C,coinLabels:A,t:l,addCommom:D,store:h,wallet:b,indicator:m,inputChange:w,importIcon:y,selectCoin:I,amountPirce:L,coinDecimals:_}}});const Pe=e=>(ce("data-v-80d76574"),e=e(),pe(),e),De={class:"card"},Me={class:"top"},Re={key:1,class:"input-div"},Fe={key:0},Ue={class:"loading-token"},Ee=["src","onerror"],Ve={key:0},ze=Pe(()=>t("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ze=[ze],qe={class:"bottom"},We={key:0,class:"amount-price"},He={key:1},Ke={class:"top"},Je={class:"right"},Ge={class:"balance"};function Qe(e,r,l,Z,R,h){const C=ge,m=ue,I=ye,w=se,T=Ce,b=we;return a(),i("div",De,[t("div",Me,[e.inputDisabled?(a(),i("div",Re,[e.inputValue?(a(),i("span",Fe,p(e.inputValue),1)):(a(),j(m,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(a(),j(C,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:r[0]||(r[0]=s=>e.$emit("onInput",s.target.value)),onFocus:r[1]||(r[1]=s=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),t("div",{class:z(["left",e.hasArrow?"":"nohands"]),onClick:r[2]||(r[2]=s=>e.hasArrow&&!e.pool.isTokenLoading?e.selectCoin():"")},[t("div",Ue,[e.pool.isTokenLoading?(a(),j(I,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):(a(),i("img",{key:1,src:e.currentIcon,onerror:e.theme=="default"?("importIcon"in e?e.importIcon:g(y))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(y))("/image/coins/sui-unknown.png")},null,8,Ee)),B(w,{address:e.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),B(T,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:k(()=>[t("div",null,[t("p",null,p(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(a(),i("p",Ve,p(e.coinLabels),1)):N("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(a(),i("svg",{key:0,class:z(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},Ze,2)):N("",!0)],2)]),t("div",qe,[e.inputValue&&e.amountPirce!="--"?(a(),i("div",We," $"+p(e.amountPirce),1)):(a(),i("div",He)),t("div",Ke,[t("div",Je,[E(p(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),t("span",Ge,p(e.wallet.connected?("addCommom"in e?e.addCommom:g(D))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(a(),j(b,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:g(D))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:r[3]||(r[3]=s=>e.$emit("onHalf"))},{default:k(()=>[E(p("Half"))]),_:1},8,["disabled"])):N("",!0),e.havemax&&e.wallet.connected?(a(),j(b,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:g(D))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:r[4]||(r[4]=s=>e.$emit("onMax"))},{default:k(()=>[E(p(e.$t("button.max")),1)]),_:1},8,["disabled"])):N("",!0)])])])])}const Vo=re(Ae,[["render",Qe],["__scopeId","data-v-80d76574"]]);const Xe=le({components:{Modal:$e,LoadingOutlined:de},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""},isCreatePoolToCoin:{type:Boolean,default:!1},isCreatePoolFromCoin:{type:Boolean,default:!1}},setup(e,r){const{t:l,locale:Z}=ie(),R=ae(),h=f(()=>R),C=te(),m=f(()=>C),I=K(),w=f(()=>I),T=P([l("tab.all"),l("tab.native"),l("tab.layerZero"),l("tab.wormhole"),l("tab.celer")]),b=P(l("tab.all")),s=P(l("tab.all")),u=K(),$=f(()=>u.chainName),L=P([]),A=P(null);Se(()=>{});const _=P(!1);V(b,d=>{d!==l("tab.all")&&(_.value=!1),d==l("tab.all")?s.value=l("tab.all"):d==l("tab.layerZero")?s.value=l("tab.layerZero"):d==l("tab.wormhole")?s.value=l("tab.wormhole"):d==l("tab.celer")?s.value=l("tab.celer"):d==l("tab.native")&&(s.value=l("tab.native")),F(A.value)});const F=async d=>{var J,G,Q,X,Y,x,ee;let c=[],v=m.value.tokens;if(!(w.value.chainName&&v&&v[0]&&w.value.chainName.toLowerCase().includes((J=v[0])==null?void 0:J.chain))){L.value=[];return}let W=v;if(d&&d.split("::")&&d.split("::").length==3&&$.value=="Sui"){const n=he("Sui");try{const o=m.value.tokensObj[d]||await n.getTokenBySymbol(m.value.tokens,d);o&&((G=v.filter(S=>(S==null?void 0:S.address)===(o==null?void 0:o.address)))==null?void 0:G.length)<1&&(C.setNewTokens({[d]:o}),W=v.concat(o))}catch{}}for(const n of Object.keys(W)){let o=Ie(W[n]);const S=h.value.assets[o.address]&&h.value.assets[o.address].balance?_e(h.value.assets&&h.value.assets[o.address].balance,o.decimals):0;e.lastSelectCoin&&o&&o.address===e.lastSelectCoin?o.unusable=!0:o.unusable=!1;const me=((Q=m.value.tokensObj[o.address])==null?void 0:Q.labels)&&((X=m.value.tokensObj[o.address])==null?void 0:X.labels[0]),be=m.value.tokensObj[o.address]?(Y=m.value.tokensObj[o.address])==null?void 0:Y.name:o.name;o={...o,balance:S,labels:me,name:be,sort:o.symbol=="APT"||o.symbol=="SUI"?1:-1},c.push(o)}let U;h.value.address?U=c.sort((n,o)=>o.coin_priority>n.coin_priority?1:-1).sort((n,o)=>o.balance-n.balance):U=c.sort((n,o)=>o.coin_priority>n.coin_priority?1:-1);let O=[];if(d){const n=U.filter(o=>o.symbol.toLowerCase().indexOf(d.toLowerCase())!==-1||o.address.toLowerCase().indexOf(d.toLowerCase())!==-1);b.value!==l("tab.all")?O=n.filter(S=>b.value==l("tab.native")?!S.labels:S.labels&&S.labels.toLowerCase()==b.value.toLowerCase()):O=n}else b.value!==l("tab.all")?O=U.filter(o=>b.value==l("tab.native")?!o.labels:o.labels&&o.labels.toLowerCase()==b.value.toLowerCase()):O=U;e.isCreatePoolToCoin?L.value=(x=O.filter(n=>(n==null?void 0:n.address)==="0x2::sui::SUI"||(n==null?void 0:n.address)==="0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::cetus::CETUS"))==null?void 0:x.sort((n,o)=>o.sort-n.sort).sort((n,o)=>o.unusable-n.unusable):L.value=O.sort((n,o)=>o.sort-n.sort).sort((n,o)=>o.unusable-n.unusable),e.isCreatePoolFromCoin&&(L.value=(ee=O.filter(n=>(n==null?void 0:n.address)!=="0x2::sui::SUI"&&(n==null?void 0:n.address)!=="0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::cetus::CETUS"))==null?void 0:ee.sort((n,o)=>o.sort-n.sort).sort((n,o)=>o.unusable-n.unusable))},q=d=>{r.emit("onSelect",d),r.emit("onClose")};return V(()=>[A.value,_.value],([d,c])=>{F(d)},{immediate:!0}),V(()=>m.value.tokens,d=>{d&&F(A.value)},{immediate:!0}),{pools:m,t:l,chainName:$,tabList:T,currentTab:b,addCommom:D,tokenList:L,importIcon:y,keyword:A,wallet:h,toSelect:q,store:w,isShowAll:_}}}),Ye=""+globalThis.__publicAssetsURL("image/warning@2x.png");const M=e=>(ce("data-v-5db0ed9e"),e=e(),pe(),e),xe=M(()=>t("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),eo={class:"coin-select-modal"},oo={class:"search-input"},no=["placeholder"],so=M(()=>t("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),ao=[so],to={key:0,class:"tab-list"},lo=["onClick"],io={class:"item"},ro=M(()=>t("div",{class:"line"},null,-1)),uo={class:"coin-list-box"},co={key:0,class:"coin-list"},po=["onClick"],mo={class:"left"},bo=["src"],vo=["src"],fo={class:"name-box"},ho=M(()=>t("img",{src:Ye,alt:""},null,-1)),_o={class:"balance-box"},ko={class:"balance"},go={key:0},yo={key:1},Co={key:2},wo={key:3},$o=M(()=>t("p",null,null,-1)),So={key:1,class:"no-data"},Io={key:0,class:"token-loading"},To={key:1,class:"no-data-content"},Lo={key:0,src:Be},Oo={key:1,src:Ne},jo=M(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-information"})],-1));function Bo(e,r,l,Z,R,h){const C=Oe,m=H("loading-outlined"),I=je,w=ue,T=H("vue-scroll"),b=H("Modal");return a(),j(b,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:r[2]||(r[2]=s=>e.$emit("onClose"))},{closeIcon:k(()=>[xe]),default:k(()=>[t("div",eo,[t("div",oo,[Te(t("input",{"onUpdate:modelValue":r[0]||(r[0]=s=>e.keyword=s),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,no),[[Le,e.keyword]]),e.keyword?(a(),i("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:r[1]||(r[1]=s=>e.keyword="")},ao)):N("",!0)]),e.chainName!=="Sui"?(a(),i("div",to,[(a(!0),i(oe,null,ne(e.tabList,(s,u)=>(a(),i("div",{key:u,class:z(["item-container",e.currentTab==s?"item-container-active item-container":"item-container"]),onClick:$=>e.currentTab=s},[t("div",io,p(s),1)],10,lo))),128))])):N("",!0),ro,t("div",uo,[B(T,null,{default:k(()=>[e.tokenList&&e.tokenList.length>0?(a(),i("ul",co,[(a(!0),i(oe,null,ne(e.tokenList,(s,u)=>(a(),i("li",{key:u,class:z(s.unusable?"unusable":""),onClick:$=>e.toSelect(s)},[t("div",mo,[s.isChinaToken?(a(),i("img",{key:1,src:e.store.theme=="default"?("importIcon"in e?e.importIcon:g(y))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(y))("/image/coins/sui-unknown.png"),alt:""},null,8,vo)):(a(),i("img",{key:0,src:s.icon||s.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:g(y))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(y))("/image/coins/sui-unknown.png"))},null,8,bo)),t("div",fo,[t("span",null,[E(p(s.symbol)+" ",1),s.isSelfBuilt?(a(),j(C,{key:0,placement:"right","arrow-point-at-center":""},{title:k(()=>[t("span",null,p(e.t("newAdd.notCetusTokenList")),1)]),default:k(()=>[ho]),_:1})):N("",!0)]),t("p",null,p(s.name)+" "+p(s.labels?`(${s.labels})`:""),1)])]),t("div",_o,[t("div",ko,[e.wallet.loading?(a(),i("div",go,[B(I,null,{default:k(()=>[B(m)]),_:1})])):s.balance&&e.wallet.connected?(a(),i("div",yo,p(("addCommom"in e?e.addCommom:g(D))(s.balance,s.decimals)),1)):!s.balance&&e.wallet.connected?(a(),i("div",Co,"0")):(a(),i("div",wo))]),$o])],10,po))),128))])):(a(),i("div",So,[e.pools.isTokenLoading?(a(),i("div",Io,[B(w)])):(a(),i("div",To,[e.store.theme=="default"?(a(),i("img",Lo)):(a(),i("img",Oo)),t("p",null,p(e.t("newAdd.noTokensFound")),1),t("div",null,[E(p(e.t("newAdd.enterCoinType"))+" ",1),B(C,{placement:"bottom","arrow-point-at-center":""},{title:k(()=>[t("span",null,p(e.t("newAdd.uniqueIdOfCoin")),1)]),default:k(()=>[jo]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const zo=re(Xe,[["render",Bo],["__scopeId","data-v-5db0ed9e"]]);export{Vo as _,zo as a};
