import{u as x,e as j,i as A,f as ue}from"./import-icon.b48b973f.js";import{a as ee,J as oe,f as h,L as ce,N as ne,w as F,i as se,o as n,j as l,k as a,c as I,t as p,m as Z,u as g,x as P,y,l as T,v as E,I as me,G as ae,eK as pe,S as ve,B as be,p as te,q as le,M as he,r as L,b as fe,eL as ke,H as q,A as _e,P as ye,F as X,E as Y,z as ge,eM as Ce}from"./entry.7dbcdae4.js";/* empty css              *//* empty css              *//* empty css              */import{u as ie}from"./wallet.3fc4a512.js";import{u as K,D as $e,p as we}from"./common.ce6f3df4.js";/* empty css              */import{_ as Se,a as Le}from"./img-no-Positions_2x.a15f4dca.js";const Ie=ee({props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,i){const{t,locale:H}=oe(),B=K(),f=h(()=>B),w=h(()=>new $e(Number(e.balance)).div(2)),v=ce(ne,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function S(){this.$emit("onSelect")}const _=m=>{const N=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(b==null?void 0:b.value)&&(b==null?void 0:b.value)}})?).*$`);m.target.value=m.target.value.replace(N,"$1")},C=ie(),d=h(()=>C),s=x(),c=h(()=>s);let $={};F(()=>c.value.RATES,m=>{m&&($=m)},{immediate:!0});const k=h(()=>ue(Number(e.inputValue)*Number($&&$[e.address]&&$[e.address].price),2)),O=h(()=>{var m,N;return c.value.tokensObj&&e.address&&c.value.tokensObj[e.address]&&((m=c.value.tokensObj[e.address])==null?void 0:m.labels)&&((N=c.value.tokensObj[e.address])==null?void 0:N.labels[0])}),b=h(()=>{var m;return c.value.tokensObj&&e.address&&c.value.tokensObj[e.address]&&((m=c.value.tokensObj[e.address])==null?void 0:m.decimals)});return{pool:c,halfBalance:w,coinLabels:O,t,addCommom:j,store:f,wallet:d,indicator:v,inputChange:_,importIcon:A,selectCoin:S,amountPirce:k,coinDecimals:b}}});const Te=e=>(te("data-v-a3f41120"),e=e(),le(),e),Ae={class:"card"},Oe={class:"top"},Ne={key:1,class:"input-div"},je={key:0},Be={class:"loading-token"},Me=["src"],De={key:0},Pe=Te(()=>a("use",{"xlink:href":"#icon-icon_on"},null,-1)),Re=[Pe],Ve={class:"bottom"},ze={key:0,class:"amount-price"},Fe={key:1},Ee={class:"top"},Ze={class:"right"},He={class:"balance"};function Ue(e,i,t,H,B,f){const w=me,v=ae,S=pe,_=ve,C=be;return n(),l("div",Ae,[a("div",Oe,[e.inputDisabled?(n(),l("div",Ne,[e.inputValue?(n(),l("span",je,p(e.inputValue),1)):(n(),I(v,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(n(),I(w,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:i[0]||(i[0]=d=>e.$emit("onInput",d.target.value)),onFocus:i[1]||(i[1]=d=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),a("div",{class:Z(["left",e.hasArrow?"":"nohands"]),onClick:i[2]||(i[2]=d=>e.hasArrow&&!e.pool.isTokenLoading?e.selectCoin():"")},[a("div",Be,[e.pool.isTokenLoading?(n(),I(S,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):(n(),l("img",{key:1,src:e.coinIcon?e.coinIcon:e.store.theme=="default"?("importIcon"in e?e.importIcon:g(A))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(A))("/image/coins/sui-unknown.png")},null,8,Me)),P(_,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:y(()=>[a("div",null,[a("p",null,p(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(n(),l("p",De,p(e.coinLabels),1)):T("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(n(),l("svg",{key:0,class:Z(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},Re,2)):T("",!0)],2)]),a("div",Ve,[e.inputValue&&e.amountPirce!="--"?(n(),l("div",ze," $"+p(e.amountPirce),1)):(n(),l("div",Fe)),a("div",Ee,[a("div",Ze,[E(p(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),a("span",He,p(e.wallet.connected?("addCommom"in e?e.addCommom:g(j))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(n(),I(C,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:g(j))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:i[3]||(i[3]=d=>e.$emit("onHalf"))},{default:y(()=>[E(p("Half"))]),_:1},8,["disabled"])):T("",!0),e.havemax&&e.wallet.connected?(n(),I(C,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:g(j))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:i[4]||(i[4]=d=>e.$emit("onMax"))},{default:y(()=>[E(p(e.$t("button.max")),1)]),_:1},8,["disabled"])):T("",!0)])])])])}const Bo=se(Ie,[["render",Ue],["__scopeId","data-v-a3f41120"]]);const qe=ee({components:{Modal:he,LoadingOutlined:ne},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""}},setup(e,i){const{t,locale:H}=oe(),B=ie(),f=h(()=>B),w=x(),v=h(()=>w),S=K(),_=h(()=>S),C=L([t("tab.all"),t("tab.native"),t("tab.layerZero"),t("tab.wormhole"),t("tab.celer")]),d=L(t("tab.all")),s=L(t("tab.all")),c=K(),$=h(()=>c.chainName),k=L([]),O=L(null);fe(()=>{});const b=L(!1);F(d,r=>{r!==t("tab.all")&&(b.value=!1),r==t("tab.all")?s.value=t("tab.all"):r==t("tab.layerZero")?s.value=t("tab.layerZero"):r==t("tab.wormhole")?s.value=t("tab.wormhole"):r==t("tab.celer")?s.value=t("tab.celer"):r==t("tab.native")&&(s.value=t("tab.native")),m(O.value)});const m=async r=>{var G,J,W,Q;let V=L([]),z=Object.values(v.value.newTokenObj);if(!(_.value.chainName&&z&&z[0]&&_.value.chainName.toLowerCase().includes((G=z[0])==null?void 0:G.chain))){k.value=[];return}let U;U=z;for(const u of Object.keys(U)){let o=ke(U[u]);const D=f.value.assets[o.address]&&f.value.assets[o.address].balance?we(f.value.assets&&f.value.assets[o.address].balance,o.decimals):0;e.lastSelectCoin&&o&&o.address===e.lastSelectCoin?o.unusable=!0:o.unusable=!1;const de=((J=v.value.tokensObj[o.address])==null?void 0:J.labels)&&((W=v.value.tokensObj[o.address])==null?void 0:W.labels[0]),re=v.value.tokensObj[o.address]?(Q=v.value.tokensObj[o.address])==null?void 0:Q.name:o.name;o={...o,balance:D,labels:de,name:re,sort:o.symbol=="APT"||o.symbol=="SUI"?1:-1},V.value.push(o)}let M;if(f.value.address?M=V.value.sort((u,o)=>u.symbol.charCodeAt(0)-o.symbol.charCodeAt(0)).sort((u,o)=>o.balance-u.balance):M=V.value.sort((u,o)=>u.symbol.charCodeAt(0)-o.symbol.charCodeAt(0)),r){const u=M.filter(o=>o.symbol.toLowerCase().indexOf(r.toLowerCase())!==-1||o.address.toLowerCase().indexOf(r.toLowerCase())!==-1);if(d.value!==t("tab.all")){const o=u.filter(D=>d.value==t("tab.native")?!D.labels:D.labels&&D.labels.toLowerCase()==d.value.toLowerCase());k.value=o}else k.value=u}else if(d.value!==t("tab.all")){const u=M.filter(o=>d.value==t("tab.native")?!o.labels:o.labels&&o.labels.toLowerCase()==d.value.toLowerCase());k.value=u}else k.value=M;k.value=k.value.sort((u,o)=>o.sort-u.sort).sort((u,o)=>o.unusable-u.unusable)},N=r=>{i.emit("onSelect",r),i.emit("onClose")};return F(()=>[O.value,b.value],([r,V])=>{m(r)},{immediate:!0}),F(()=>v.value.tokens,r=>{r&&m(O.value)},{immediate:!0}),{pools:v,t,chainName:$,tabList:C,currentTab:d,addCommom:j,tokenList:k,importIcon:A,keyword:O,wallet:f,toSelect:N,store:_,isShowAll:b}}}),Ke=""+globalThis.__publicAssetsURL("image/warning@2x.png");const R=e=>(te("data-v-fa731a23"),e=e(),le(),e),Ge=R(()=>a("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Je={class:"coin-select-modal"},We={class:"search-input"},Qe=["placeholder"],Xe=R(()=>a("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),Ye=[Xe],xe={key:0,class:"tab-list"},eo=["onClick"],oo={class:"item"},no=R(()=>a("div",{class:"line"},null,-1)),so={class:"coin-list-box"},ao={key:0,class:"coin-list"},to=["onClick"],lo={class:"left"},io=["src"],ro=["src"],uo={class:"name-box"},co=R(()=>a("img",{src:Ke,alt:""},null,-1)),mo={class:"balance-box"},po={class:"balance"},vo={key:0},bo={key:1},ho={key:2},fo=R(()=>a("p",null,null,-1)),ko={key:1,class:"no-data"},_o={key:0,class:"token-loading"},yo={key:1,class:"no-data-content"},go={key:0,src:Se},Co={key:1,src:Le};function $o(e,i,t,H,B,f){const w=ge,v=q("loading-outlined"),S=Ce,_=ae,C=q("vue-scroll"),d=q("Modal");return n(),I(d,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:i[2]||(i[2]=s=>e.$emit("onClose"))},{closeIcon:y(()=>[Ge]),default:y(()=>[a("div",Je,[a("div",We,[_e(a("input",{"onUpdate:modelValue":i[0]||(i[0]=s=>e.keyword=s),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,Qe),[[ye,e.keyword]]),e.keyword?(n(),l("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:i[1]||(i[1]=s=>e.keyword="")},Ye)):T("",!0)]),e.chainName!=="Sui"?(n(),l("div",xe,[(n(!0),l(X,null,Y(e.tabList,(s,c)=>(n(),l("div",{key:c,class:Z(["item-container",e.currentTab==s?"item-container-active item-container":"item-container"]),onClick:$=>e.currentTab=s},[a("div",oo,p(s),1)],10,eo))),128))])):T("",!0),no,a("div",so,[P(C,null,{default:y(()=>[e.tokenList&&e.tokenList.length>0?(n(),l("ul",ao,[(n(!0),l(X,null,Y(e.tokenList,(s,c)=>(n(),l("li",{key:c,class:Z(s.unusable?"unusable":""),onClick:$=>e.toSelect(s)},[a("div",lo,[s.isChinaToken?(n(),l("img",{key:1,src:e.store.theme=="default"?("importIcon"in e?e.importIcon:g(A))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(A))("/image/coins/sui-unknown.png"),alt:""},null,8,ro)):(n(),l("img",{key:0,src:s.icon||s.logo_url||("importIcon"in e?e.importIcon:g(A))(`/image/coins/${s.symbol.toLowerCase()}.png`)},null,8,io)),a("div",uo,[a("span",null,[E(p(s.symbol)+" ",1),s.isChinaToken?(n(),I(w,{key:0,placement:"right","arrow-point-at-center":""},{title:y(()=>[a("span",null,p(e.t("newAdd.notCetusTokenList")),1)]),default:y(()=>[co]),_:1})):T("",!0)]),a("p",null,p(s.name)+" "+p(s.labels?`(${s.labels})`:""),1)])]),a("div",mo,[a("div",po,[e.wallet.loading?(n(),l("div",vo,[P(S,null,{default:y(()=>[P(v)]),_:1})])):s.balance&&e.wallet.connected?(n(),l("div",bo,p(("addCommom"in e?e.addCommom:g(j))(s.balance,s.decimals)),1)):(n(),l("div",ho,"0"))]),fo])],10,to))),128))])):(n(),l("div",ko,[e.pools.isTokenLoading?(n(),l("div",_o,[P(_)])):(n(),l("div",yo,[e.store.theme=="default"?(n(),l("img",go)):(n(),l("img",Co)),a("p",null,p(e.t("newAdd.noTokensFound")),1)]))]))]),_:1})])])]),_:1},8,["title"])}const Mo=se(qe,[["render",$o],["__scopeId","data-v-fa731a23"]]);export{Bo as _,Mo as a};
