import{a as q,j as x,u as ee,h as N,i as O,D as ue,f as ce,p as me}from"./import-icon.9d757206.js";import{a as oe,J as ne,f as h,L as pe,N as se,w as F,h as ae,o as n,i as l,j as a,c as I,t as p,l as Z,u as g,v as P,x as y,k as T,s as E,I as ve,E as te,eK as be,S as he,B as ke,p as le,m as ie,M as _e,r as L,b as fe,eL as ye,H as K,z as ge,O as Ce,F as X,D as Y,y as $e,eM as we}from"./entry.94f2f2cc.js";/* empty css              *//* empty css              */import"./network-tips.3270dfe6.js";/* empty css              */import{_ as Se,a as Le}from"./img-no-Positions_2x.599b642e.js";const Ie=oe({props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,i){const{t,locale:H}=ne(),B=q(),k=h(()=>B),w=h(()=>new ue(Number(e.balance)).div(2)),v=pe(se,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function S(){this.$emit("onSelect")}const f=m=>{const A=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(b==null?void 0:b.value)&&(b==null?void 0:b.value)}})?).*$`);m.target.value=m.target.value.replace(A,"$1")},C=x(),d=h(()=>C),s=ee(),c=h(()=>s);let $={};F(()=>c.value.RATES,m=>{m&&($=m)},{immediate:!0});const _=h(()=>ce(Number(e.inputValue)*Number($&&$[e.address]&&$[e.address].price),2)),j=h(()=>{var m,A;return c.value.tokensObj&&e.address&&c.value.tokensObj[e.address]&&((m=c.value.tokensObj[e.address])==null?void 0:m.labels)&&((A=c.value.tokensObj[e.address])==null?void 0:A.labels[0])}),b=h(()=>{var m;return c.value.tokensObj&&e.address&&c.value.tokensObj[e.address]&&((m=c.value.tokensObj[e.address])==null?void 0:m.decimals)});return{pool:c,halfBalance:w,coinLabels:j,t,addCommom:N,store:k,wallet:d,indicator:v,inputChange:f,importIcon:O,selectCoin:S,amountPirce:_,coinDecimals:b}}});const Te=e=>(le("data-v-a3f41120"),e=e(),ie(),e),Oe={class:"card"},je={class:"top"},Ae={key:1,class:"input-div"},Ne={key:0},Be={class:"loading-token"},Me=["src"],De={key:0},Pe=Te(()=>a("use",{"xlink:href":"#icon-icon_on"},null,-1)),Re=[Pe],Ve={class:"bottom"},ze={key:0,class:"amount-price"},Fe={key:1},Ee={class:"top"},Ze={class:"right"},He={class:"balance"};function Ue(e,i,t,H,B,k){const w=ve,v=te,S=be,f=he,C=ke;return n(),l("div",Oe,[a("div",je,[e.inputDisabled?(n(),l("div",Ae,[e.inputValue?(n(),l("span",Ne,p(e.inputValue),1)):(n(),I(v,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(n(),I(w,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:i[0]||(i[0]=d=>e.$emit("onInput",d.target.value)),onFocus:i[1]||(i[1]=d=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),a("div",{class:Z(["left",e.hasArrow?"":"nohands"]),onClick:i[2]||(i[2]=d=>e.hasArrow&&!e.pool.isTokenLoading?e.selectCoin():"")},[a("div",Be,[e.pool.isTokenLoading?(n(),I(S,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):(n(),l("img",{key:1,src:e.coinIcon?e.coinIcon:e.store.theme=="default"?("importIcon"in e?e.importIcon:g(O))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(O))("/image/coins/sui-unknown.png")},null,8,Me)),P(f,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:y(()=>[a("div",null,[a("p",null,p(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(n(),l("p",De,p(e.coinLabels),1)):T("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(n(),l("svg",{key:0,class:Z(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},Re,2)):T("",!0)],2)]),a("div",Ve,[e.inputValue&&e.amountPirce!="--"?(n(),l("div",ze," $"+p(e.amountPirce),1)):(n(),l("div",Fe)),a("div",Ee,[a("div",Ze,[E(p(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),a("span",He,p(e.wallet.connected?("addCommom"in e?e.addCommom:g(N))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(n(),I(C,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:g(N))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:i[3]||(i[3]=d=>e.$emit("onHalf"))},{default:y(()=>[E(p("Half"))]),_:1},8,["disabled"])):T("",!0),e.havemax&&e.wallet.connected?(n(),I(C,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:g(N))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:i[4]||(i[4]=d=>e.$emit("onMax"))},{default:y(()=>[E(p(e.$t("button.max")),1)]),_:1},8,["disabled"])):T("",!0)])])])])}const Ao=ae(Ie,[["render",Ue],["__scopeId","data-v-a3f41120"]]);const Ke=oe({components:{Modal:_e,LoadingOutlined:se},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""}},setup(e,i){const{t,locale:H}=ne(),B=x(),k=h(()=>B),w=ee(),v=h(()=>w),S=q(),f=h(()=>S),C=L([t("tab.all"),t("tab.native"),t("tab.layerZero"),t("tab.wormhole"),t("tab.celer")]),d=L(t("tab.all")),s=L(t("tab.all")),c=q(),$=h(()=>c.chainName),_=L([]),j=L(null);fe(()=>{});const b=L(!1);F(d,r=>{r!==t("tab.all")&&(b.value=!1),r==t("tab.all")?s.value=t("tab.all"):r==t("tab.layerZero")?s.value=t("tab.layerZero"):r==t("tab.wormhole")?s.value=t("tab.wormhole"):r==t("tab.celer")?s.value=t("tab.celer"):r==t("tab.native")&&(s.value=t("tab.native")),m(j.value)});const m=async r=>{var J,W,G,Q;let V=L([]),z=Object.values(v.value.newTokenObj);if(!(f.value.chainName&&z&&z[0]&&f.value.chainName.toLowerCase().includes((J=z[0])==null?void 0:J.chain))){_.value=[];return}let U;U=z;for(const u of Object.keys(U)){let o=ye(U[u]);const D=k.value.assets[o.address]&&k.value.assets[o.address].balance?me(k.value.assets&&k.value.assets[o.address].balance,o.decimals):0;e.lastSelectCoin&&o&&o.address===e.lastSelectCoin?o.unusable=!0:o.unusable=!1;const de=((W=v.value.tokensObj[o.address])==null?void 0:W.labels)&&((G=v.value.tokensObj[o.address])==null?void 0:G.labels[0]),re=v.value.tokensObj[o.address]?(Q=v.value.tokensObj[o.address])==null?void 0:Q.name:o.name;o={...o,balance:D,labels:de,name:re,sort:o.symbol=="APT"||o.symbol=="SUI"?1:-1},V.value.push(o)}let M;if(k.value.address?M=V.value.sort((u,o)=>u.symbol.charCodeAt(0)-o.symbol.charCodeAt(0)).sort((u,o)=>o.balance-u.balance):M=V.value.sort((u,o)=>u.symbol.charCodeAt(0)-o.symbol.charCodeAt(0)),r){const u=M.filter(o=>o.symbol.toLowerCase().indexOf(r.toLowerCase())!==-1||o.address.toLowerCase().indexOf(r.toLowerCase())!==-1);if(d.value!==t("tab.all")){const o=u.filter(D=>d.value==t("tab.native")?!D.labels:D.labels&&D.labels.toLowerCase()==d.value.toLowerCase());_.value=o}else _.value=u}else if(d.value!==t("tab.all")){const u=M.filter(o=>d.value==t("tab.native")?!o.labels:o.labels&&o.labels.toLowerCase()==d.value.toLowerCase());_.value=u}else _.value=M;_.value=_.value.sort((u,o)=>o.sort-u.sort).sort((u,o)=>o.unusable-u.unusable)},A=r=>{i.emit("onSelect",r),i.emit("onClose")};return F(()=>[j.value,b.value],([r,V])=>{m(r)},{immediate:!0}),F(()=>v.value.tokens,r=>{r&&m(j.value)},{immediate:!0}),{pools:v,t,chainName:$,tabList:C,currentTab:d,addCommom:N,tokenList:_,importIcon:O,keyword:j,wallet:k,toSelect:A,store:f,isShowAll:b}}}),qe=""+globalThis.__publicAssetsURL("image/warning@2x.png");const R=e=>(le("data-v-fa731a23"),e=e(),ie(),e),Je=R(()=>a("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),We={class:"coin-select-modal"},Ge={class:"search-input"},Qe=["placeholder"],Xe=R(()=>a("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),Ye=[Xe],xe={key:0,class:"tab-list"},eo=["onClick"],oo={class:"item"},no=R(()=>a("div",{class:"line"},null,-1)),so={class:"coin-list-box"},ao={key:0,class:"coin-list"},to=["onClick"],lo={class:"left"},io=["src"],ro=["src"],uo={class:"name-box"},co=R(()=>a("img",{src:qe,alt:""},null,-1)),mo={class:"balance-box"},po={class:"balance"},vo={key:0},bo={key:1},ho={key:2},ko=R(()=>a("p",null,null,-1)),_o={key:1,class:"no-data"},fo={key:0,class:"token-loading"},yo={key:1,class:"no-data-content"},go={key:0,src:Se},Co={key:1,src:Le};function $o(e,i,t,H,B,k){const w=$e,v=K("loading-outlined"),S=we,f=te,C=K("vue-scroll"),d=K("Modal");return n(),I(d,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:i[2]||(i[2]=s=>e.$emit("onClose"))},{closeIcon:y(()=>[Je]),default:y(()=>[a("div",We,[a("div",Ge,[ge(a("input",{"onUpdate:modelValue":i[0]||(i[0]=s=>e.keyword=s),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,Qe),[[Ce,e.keyword]]),e.keyword?(n(),l("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:i[1]||(i[1]=s=>e.keyword="")},Ye)):T("",!0)]),e.chainName!=="Sui"?(n(),l("div",xe,[(n(!0),l(X,null,Y(e.tabList,(s,c)=>(n(),l("div",{key:c,class:Z(["item-container",e.currentTab==s?"item-container-active item-container":"item-container"]),onClick:$=>e.currentTab=s},[a("div",oo,p(s),1)],10,eo))),128))])):T("",!0),no,a("div",so,[P(C,null,{default:y(()=>[e.tokenList&&e.tokenList.length>0?(n(),l("ul",ao,[(n(!0),l(X,null,Y(e.tokenList,(s,c)=>(n(),l("li",{key:c,class:Z(s.unusable?"unusable":""),onClick:$=>e.toSelect(s)},[a("div",lo,[s.isChinaToken?(n(),l("img",{key:1,src:e.store.theme=="default"?("importIcon"in e?e.importIcon:g(O))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(O))("/image/coins/sui-unknown.png"),alt:""},null,8,ro)):(n(),l("img",{key:0,src:s.icon||s.logo_url||("importIcon"in e?e.importIcon:g(O))(`/image/coins/${s.symbol.toLowerCase()}.png`)},null,8,io)),a("div",uo,[a("span",null,[E(p(s.symbol)+" ",1),s.isChinaToken?(n(),I(w,{key:0,placement:"right","arrow-point-at-center":""},{title:y(()=>[a("span",null,p(e.t("newAdd.notCetusTokenList")),1)]),default:y(()=>[co]),_:1})):T("",!0)]),a("p",null,p(s.name)+" "+p(s.labels?`(${s.labels})`:""),1)])]),a("div",mo,[a("div",po,[e.wallet.loading?(n(),l("div",vo,[P(S,null,{default:y(()=>[P(v)]),_:1})])):s.balance&&e.wallet.connected?(n(),l("div",bo,p(("addCommom"in e?e.addCommom:g(N))(s.balance,s.decimals)),1)):(n(),l("div",ho,"0"))]),ko])],10,to))),128))])):(n(),l("div",_o,[e.pools.isTokenLoading?(n(),l("div",fo,[P(f)])):(n(),l("div",yo,[e.store.theme=="default"?(n(),l("img",go)):(n(),l("img",Co)),a("p",null,p(e.t("newAdd.noTokensFound")),1)]))]))]),_:1})])])]),_:1},8,["title"])}const No=ae(Ke,[["render",$o],["__scopeId","data-v-fa731a23"]]);export{Ao as _,No as a};
