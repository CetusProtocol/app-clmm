import{j as ai,n as pt,d as de,e as _t,u as Bt,a as qe,c as J,s as bt,T as rt,G as ni,b as je,l as Lt,p as qt}from"./pool.2069f4f3.js";import{a as tt,r as F,l as T,H as Ot,q as ke,e as it,o as L,f as D,t as Rt,N as ri,h as o,O as ht,v as ee,u as le,x as G,c as We,p as wt,k as Ct,S as Ut,y as jt,m as Pt,K as zt,s as oi,F as kt,E as Mt,i as ze,A as vt,w as st,j as St,P as Ht,a2 as si,b as li,B as ui}from"./entry.e9f8e70a.js";/* empty css              */import{s as ut,m as ci,l as di,b as mi,a as vi}from"./transform.c672907f.js";import{D as r}from"./decimal.0bdeb344.js";import{u as dt,a as fi}from"./sha256.29b0ebac.js";import{d as Xt,_ as Et,c as Wt,a as Dt,b as gi}from"./new-liquidity-title.8b10d5a1.js";import{i as yt}from"./import-icon.de3e6c66.js";/* empty css              */import{positionError as et,fromCoin as _,toCoin as p,tickList as Ve,currentPrice as ot,currentPriceReverse as ct,direction as ce,currentPriceTab as W,defaultMinPrice as ft,defaultMaxPrice as gt,minPrice as $,maxPrice as w,toggle as Zt,isStableFarmingRange as Oe,isInputTotalAmount as Xe,priceConfigObj as Je,fromCoinAmount as C,toCoinAmount as P,fixedFromCoin as Ie,resetTickList as $t,resetData as pi}from"./data.d6193ab2.js";import{u as Tt}from"./farms.6fdc0285.js";import{_ as bi}from"./coin-lock.53a615b1.js";import{_ as hi}from"./coin-select.bbd2fc73.js";import{_ as ki}from"./viewDetail.1e20f95f.js";import{a as yi}from"./new-add-or-create.db63f574.js";import{u as _i}from"./notifi.9903c923.js";import{_ as wi,a as Ci}from"./icon-Add-Liquidity_2x.0acb06cb.js";import"./img-lock_2x.a28135f4.js";import"./lock.9e877620.js";/* empty css              *//* empty css              */import"./token-warning.ef8ffdad.js";import"./swap-setting.e84059c4.js";/* empty css              */import"./icon-error_2x.446ef670.js";import"./img-lock_2x.023061b5.js";import"./img-no-Positions_2x.a1f2b6e9.js";import"./img-no-Positions_2x.0be0ddd9.js";import"./status-block.dbedf618.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./useWhale.39761e90.js";function Ft(e,s,ue){const Q=new r(10).pow(s-ue);return new r(1.0001).pow(e).mul(Q)}const Pi=tt({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""},zoom:{type:Number,default:1}},setup(e,s){const ue=F(""),Q=F(""),q=T(()=>{var n,N,m,v,U,re;return(n=e.poolInfo)!=null&&n.current_sqrt_price&&((N=e.poolInfo)!=null&&N.coinA)&&((m=e.poolInfo)!=null&&m.coinB)?a.sqrtPriceX64ToPrice((v=e.poolInfo)==null?void 0:v.current_sqrt_price,(U=e.poolInfo)==null?void 0:U.coinA.decimals,(re=e.poolInfo)==null?void 0:re.coinB.decimals).toString():"0"}),te=T(()=>{let n=0;return e.direction?n=(Number(e.minPrice)/Number(q.value)-1)*100:n=(Number(e.minPrice)/Number(1/Number(q.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),z=T(()=>{let n=0;return e.direction?n=(Number(e.maxPrice)/Number(q.value)-1)*100:n=(Number(e.maxPrice)/Number(1/Number(q.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),R=dt(),A=T(()=>R),Y=T(()=>A.value.chainName?_t(A.value.chainName):{}),{TickMath:a,getNearestTickByTick:b}=Y.value,Z=(n=[])=>{let N=6;const m=Math.abs(Number(n[0])-Number(n[n.length-1]));return m>=6?N=0:m>=1?N=1:m>=.1?N=2:m>=.01?N=3:m>=.001?N=4:m>=1e-4?N=5:m>=1e-5?N=6:m>=1e-6?N=7:m>=1e-7&&(N=8),N},Pe=(n,N=1)=>{if(n&&n.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const m=Number(e.poolInfo.current_tick_index);let v=m+100*N,U=m-100*N,re,me;if(e.maxPrice==="âˆž")me=Y.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?me=a.priceToTickIndex(new r(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):me=a.priceToTickIndex(new r(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{me=443636}if(e.minPrice==="0")re=Y.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?re=a.priceToTickIndex(new r(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):re=a.priceToTickIndex(new r(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{re=-443636}let Se=0;if(e.currentPriceTab!=="full range"){if(m>=re&&m<=me){const I=m-re,oe=me-m;Se=Math.max(Math.abs(I),Math.abs(oe))}else m<re?Se=Math.abs(me-m):Se=Math.abs(m-re);v=m+Se+100*N,U=m-Se-100*N}else{const I=(Math.abs(m)>5e3,2e4);v=m+I*N,U=m-I*N}U<-443636&&(U=-443636),v>443636&&(v=443636);const g=new r(n.liquidity).div(Math.pow(10,8)).toString(),M=e.tickList,j=[],ye=[];let k={};for(let I=0;I<M.length;I++){if(k=M[I],k.index<=m&&k.index>=U){if(j.length<1&&I!==0){const oe=M[I-1];j.unshift({...oe,index:U,source:"left"})}j.unshift(k)}else if(k.index>m&&k.index<=v&&(ye.push(k),j.length<1&&I!==0)){const oe=M[I-1];j.push({...oe,index:U,source:"left"})}if(k.index>v){const oe=M[I];if(ye.push({...oe,index:v,source:"right"}),j.length<1&&I!==0){const xe=M[I-1];j.push({...xe,index:U,source:"left"})}break}}let O="0";for(let I=j.length-1;I>=0;I--)O=new r(O).plus(new r(j[I].liquidityNet.toString()).div(Math.pow(10,8))).toString(),j[I].liquityAmount=O;let K=g;for(let I=0;I<ye.length;I++)K=new r(K).plus(new r(ye[I].liquidityNet.toString()).div(Math.pow(10,8))).toString(),ye[I].liquityAmount=K;let ae=[];const H=M&&M.length>0?{index:m,liquityAmount:Number(g)}:{index:m,liquityAmount:0};(j.length>0||ye.length>0)&&(ae=[...j.reverse(),H,...ye],e.direction||(ae=ae.reverse()));const He=[];M.forEach(I=>{He.push({...I,liquidityGross:I.liquidityGross.toString(),liquidityNet:I.liquidityNet.toString()})}),f(ae,U,v,re,me,m)}};let Ae=F(!1);const ie=F(!1);Ot(()=>{const n=document.body.clientWidth;ie.value=!0,n<750?Ae.value=!1:Ae.value=!0,window.onresize=()=>{document.body.clientWidth<750?Ae.value=!1:Ae.value=!0,Pe(e.poolInfo,e.zoom)}});const f=(n,N,m,v,U,re)=>{let me,Se;e.direction?(me=e.before7dContractPriceLowest?a.priceToTickIndex(new r(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",Se=e.before7dContractPriceHighest?a.priceToTickIndex(new r(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(me=e.before7dContractPriceLowest?a.priceToTickIndex(new r(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",Se=e.before7dContractPriceHighest?a.priceToTickIndex(new r(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const g={top:30,right:35,bottom:20,left:80};let M,j;Ae.value?(M=460-g.left-g.right,j=205-g.top-g.bottom):(M=340-g.left-g.right,j=205-g.top-g.bottom);const ye=m-N,k=parseInt(String(ye/4));let O=[N+k/4,N+k,N+2*k,m-k,m-k/4];const K=N,ae=m,H=M/(ae-K);e.currentPriceTab==="full range"&&(O=[N,N+2*k,m]);const He=O.map(c=>e.direction?Ft(c,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new r(1).div(Ft(c,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),I=Z(He);ut("#chart").selectAll("*").remove();const oe=ut("#chart").attr("width",M+g.left+g.right).attr("height",j+g.top+g.bottom).append("g").attr("transform",`translate(${g.left},${g.right})`),xe=ci(n,function(c){return Number(Math.abs(c.liquityAmount))})||0,Ne=di().range([0,j]).domain([xe,0]);mi().rangeRound([0,M]).padding(.1);const Qe=oe.append("g").attr("id","barsBox").selectAll("rect").data(n).enter().append("rect");A.value.theme=="default"?Qe.attr("x",function(c,l){return l===0?0:e.direction?Math.abs(c.index-K)*H:Math.abs(ae-c.index)*H}).attr("y",function(c,l){return e.direction?l===n.length-1?0:Ne(c.liquityAmount):l===n.length-1?0:Ne(n[l+1].liquityAmount)}).attr("width",function(c,l){return l===0&&n.length===1&&c.liquityAmount>0?M:(e.direction,l!==n.length-1?Math.abs(n[l+1].index-c.index)*H:0)}).attr("height",function(c,l){return l===0&&n.length===1&&c.liquityAmount>0?j:e.direction?l===n.length-1?0:j-Ne(c.liquityAmount):l===n.length-1?0:j-Ne(n[l+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):Qe.attr("x",function(c,l){return l===0?0:e.direction?Math.abs(c.index-K)*H:Math.abs(ae-c.index)*H}).attr("y",function(c,l){return e.direction?l===n.length-1?0:Ne(Math.abs(c.liquityAmount)):l===n.length-1?0:Ne(Math.abs(n[l+1].liquityAmount))}).attr("width",function(c,l){return l===0&&n.length===1&&c.liquityAmount>0?M:(e.direction,l!==n.length-1?Math.abs(n[l+1].index-c.index)*H:0)}).attr("height",function(c,l){if(l===0&&n.length===1&&c.liquityAmount>0)return j;if(e.direction)return l===n.length-1?0:Number(c.liquityAmount)?j-Ne(Math.abs(c.liquityAmount)):0;{if(l===n.length-1)return 0;const Te=j-Ne(Math.abs(n[l+1].liquityAmount));return Number(n[l+1].liquityAmount)?Te:0}}).attr("fill",function(c,l){return"#417494"}).attr("class","bars").attr("stroke-width",1).attr("stroke",function(c,l){return"#417494"});const Ge=oe.append("g");Ge.append("line").attr("x1",0).attr("y1",155).attr("x2",M).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const De=Ge.append("g");let X=0;if(e.direction){for(let c=0;c<O.length;c++){const l=de(He[c],I)||"0";He.push(l);const Te=Math.abs(O[c]-K)*H;let ne=0;for(let he=0;he<l.length;he++)l[he]==="1"?ne+=4.02:l[he]==="."?ne+=2.64:l[he]==="7"?ne+=5.48:ne+=6;De.append("text").text(l).attr("x",Te-ne/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}X=Math.abs(re-K)*H}else{for(let c=O.length-1;c>=0;c--){const l=de(He[c],I)||0;He.push(l);const Te=Math.abs(O[c]-ae)*H;let ne=0;for(let he=0;he<l.length;he++)l[he]==="1"?ne+=4.02:l[he]==="."?ne+=2.64:l[he]==="7"?ne+=5.48:ne+=6;De.append("text").text(l).attr("x",Te-ne/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}X=Math.abs(re-ae)*H}(A.value.theme=="default"?oe.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):oe.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+X+", 0)");let t,d,h,S;e.direction?(t=v<K?-100:parseInt(String(Math.abs(v-K)*H)),d=U<K?-100:parseInt(String(Math.abs(U-K)*H)),h=me<K?-100:Math.abs(me-K)*H,S=Se<K?-100:Math.abs(Se-K)*H):(d=v<K?-100:Math.abs(ae-v)*H,t=U<K?-100:Math.abs(ae-U)*H,S=me>ae?-100:Math.abs(ae-me)*H,h=Se>ae?-100:Math.abs(ae-Se)*H),e.minPrice==="0"&&(t=0),e.maxPrice==="âˆž"&&(d=M),Ae.value,ue.value=M-t+87+"px",Q.value=d+98+"px",me&&h<M&&oe.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+h+", 0)"),Se&&S<M&&oe.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+S+", 0)");const B=oe.append("g").attr("id","left-handle"),E=oe.append("g").attr("id","right-handle");A.value.theme=="default"?(B.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),B.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),B.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),B.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),E.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),E.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),E.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),E.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(B.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),B.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),B.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),B.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),E.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),E.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),E.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),E.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),B.attr("transform","translate("+t+", 0)"),E.attr("transform","translate("+d+", 0)");const _e=vi().extent([[0,0],[M,j]]).handleSize(30).on("end",Ye);oe.append("g").attr("class","brush").call(_e).call(_e.move,[t,d]);function Ye(c){if(!c.sourceEvent||!c.selection)return;B.attr("transform","translate("+c.selection[0]+", 0)"),E.attr("transform","translate("+c.selection[1]+", 0)"),Ae.value,ue.value=M-c.selection[0]+87+"px",Q.value=c.selection[1]+74+"px";let l,Te,ne=0,he=0;e.direction?(ne=b(parseInt(String(c.selection[0]/H+K)),Number(e.poolInfo.tickSpacing)),l=a.tickIndexToPrice(ne,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),he=b(parseInt(String(c.selection[1]/H+K)),Number(e.poolInfo.tickSpacing)),Te=a.tickIndexToPrice(he,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()):(he=b(ae-c.selection[0]/H,Number(e.poolInfo.tickSpacing)),l=1/a.tickIndexToPrice(he,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),ne=b(ae-c.selection[1]/H,Number(e.poolInfo.tickSpacing)),Te=1/a.tickIndexToPrice(ne,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),s.emit("onChangeMinPrice",String(de(String(l),6))),s.emit("onChangeMaxPrice",String(de(String(Te),6)))}A.value.theme=="default"?ut(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):ut(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632")};return F(""),ke(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab,e.zoom,e.tickList],([n,N,m,v,U,re])=>{n&&N&&m&&(n!=null&&n.liquidity)&&Pe(n,U)},{immediate:!0}),{store:A,loading:ie,rangeSizeLower:te,rangeSizeUpper:z,rangeSizeLowerPosition:ue,rangeSizeUpperPosition:Q,decimalFormat:ai,numberformat:pt}}});const Si=e=>(wt("data-v-62417b0b"),e=e(),Ct(),e),Ti={class:"chart-box"},Ii={class:"chart"},Ai=Si(()=>o("svg",{id:"chart"},null,-1));function Ni(e,s,ue,Q,q,te){const z=Ut;return L(),D("div",Ti,[Rt(o("div",Ii,[e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="âˆž"?(L(),D("div",{key:0,class:"range-size range-size-lower",style:ht({right:e.rangeSizeLowerPosition})},ee(("numberformat"in e?e.numberformat:le(pt))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):G("",!0),e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="âˆž"?(L(),D("div",{key:1,class:"range-size range-size-upper",style:ht({left:e.rangeSizeUpperPosition})},ee(("numberformat"in e?e.numberformat:le(pt))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):G("",!0),Ai],512),[[ri,!e.chartLoading]]),e.chartLoading?(L(),We(z,{key:0})):G("",!0)])}const xt=it(Pi,[["render",Ni],["__scopeId","data-v-62417b0b"]]),Li=tt({props:{lever:{type:String,default:""}},setup(){return{}}});const qi=e=>(wt("data-v-619778e2"),e=e(),Ct(),e),Mi={class:"lever"},$i=qi(()=>o("div",{class:"lever-title"},"Leverage",-1)),Fi={class:"lever-text"};function Bi(e,s,ue,Q,q,te){return L(),D("div",Mi,[$i,o("div",Fi,ee(e.lever),1)])}const Oi=it(Li,[["render",Bi],["__scopeId","data-v-619778e2"]]),Ri=tt({components:{NewLiquidityD3Chart:xt,NewLiquidityPrice:Xt},setup(){const{t:e,locale:s}=jt(),ue=F("liquidity"),Q=dt(),q=T(()=>Q),te=T(()=>q.value.chainName),z=Bt(),R=T(()=>z),A=T(()=>q.value.chainName?_t(q.value.chainName):{});Ot(()=>{et.value=!1});const Y=Pt(),a=T(()=>{let t=null;for(let d=0;d<R.value.poolConfigList.length;d++){const h=R.value.poolConfigList[d];h.address==Y.query.poolAddress&&(t=h)}return t}),b=T(()=>{let t=null;for(const d in R.value.poolsObj){const h=R.value.poolsObj[d];h.address==Y.query.poolAddress&&(t=h)}return t}),Z=F(),Pe=F(!0),Ae=async(t,d)=>{if(Pe.value=!0,d){Ve.value=[],f.value=[],Oe.value=!1;const h=t.token_a.decimals,S=t.token_b.decimals;rt.tickIndexToPrice(t.current_tick_index,h,S),ot.value=rt.sqrtPriceX64ToPrice((t==null?void 0:t.current_sqrt_price)||(t==null?void 0:t.object.current_sqrt_price),h,S).toString(),ct.value=new r(1).div(rt.sqrtPriceX64ToPrice((t==null?void 0:t.current_sqrt_price)||(t==null?void 0:t.object.current_sqrt_price),h,S)).toString(),_.value=t.needReverse?t.token_b:t.token_a,p.value=t.needReverse?t.token_a:t.token_b,Z.value=t.needReverse,t.token_a.address.toLowerCase()===_.value.address.toLowerCase()&&t.token_b.address.toLowerCase()===p.value.address.toLowerCase()?ce.value=!0:ce.value=!1;let B={poolAddress:t.address,coinTypeA:t.coin_a_address,coinTypeB:t.coin_b_address};const{list:E,address:_e}=await A.value.getTicks(B);Ve.value=E&&_e==t.address?A.value.getTickDataFromUrlData(E):[],Pe.value=!1,N(t)}},ie=t=>{var S,B;const d=t.token_a.decimals,h=t.token_b.decimals;ot.value=rt.sqrtPriceX64ToPrice((t==null?void 0:t.current_sqrt_price)||((S=t==null?void 0:t.object)==null?void 0:S.current_sqrt_price),d,h).toString(),ct.value=new r(1).div(rt.sqrtPriceX64ToPrice((t==null?void 0:t.current_sqrt_price)||((B=t==null?void 0:t.object)==null?void 0:B.current_sqrt_price),d,h)).toString()},f=F([]),n=F(),N=async t=>{const d=t.token_a.decimals,h=t.token_b.decimals;let S=R.value.poolPriceConfigObj&&R.value.poolPriceConfigObj[t.address]&&R.value.poolPriceConfigObj[t.address].recommend_ranges||{};const B=R.value.poolPriceConfigObj&&R.value.poolPriceConfigObj[t.address]&&R.value.poolPriceConfigObj[t.address].type||"";let E,_e;const Ye=ni(t.current_tick_index,t.tickSpacing);n.value=t.current_tick_index,E=Ye-Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3),_e=Ye+Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3);const c=A.value.TickMath.tickIndexToPrice(E,d,h).toString(),l=A.value.TickMath.tickIndexToPrice(_e,d,h).toString();S["full range"]={lower:A.value.TickUtil.getMinIndex(Number(b.value.tickSpacing)),upper:A.value.TickUtil.getMaxIndex(Number(b.value.tickSpacing))},S.custom={lower:E,upper:_e,minPrice:c,maxPrice:l};const Te=[];for(let ne in S)S[ne]&&Te.push({...S[ne],key:ne});B&&Te&&Te.length>2?t.isSelfBuilt?W.value="custom":B=="stable"?W.value="suggested":W.value="passive":W.value="custom",f.value=Te||{},Je.value=S,U({key:W.value,...S[W.value]})},m=F(""),v=F(""),U=t=>{W.value=t.key.toLowerCase();const d=b.value.token_a.decimals,h=b.value.token_b.decimals,{lower:S,upper:B}=t;Xe.value=!1;const E=A.value.TickMath.tickIndexToPrice(S,d,h).toString(),_e=A.value.TickMath.tickIndexToPrice(B,d,h).toString();if(t.key=="full range"){m.value=S,v.value=B,re();return}ce.value?(ft.value=String(E),$.value=String(E),gt.value=String(_e),w.value=String(_e),m.value=S,v.value=B):(ft.value=new r(1).div(new r(_e)).toString(),$.value=new r(1).div(new r(_e)).toString(),gt.value=new r(1).div(new r(E)).toString(),w.value=new r(1).div(new r(E)).toString(),m.value=A.value.TickMath.priceToTickIndex(new r(1/Number(_e)),d,h),v.value=A.value.TickMath.priceToTickIndex(new r(1/Number(E)),d,h))},re=t=>{$.value="0",w.value="âˆž"};ke(()=>b.value,(t,d)=>{(!d&&t&&!J(t)||d&&t&&d.address!==t.address)&&Ae(t,!d||t.address!==d.address),t&&!J(t)&&ie(t),t||(Ve.value=[])},{immediate:!0}),zt(()=>{_.value=F(),p.value=F(),Ve.value=[]}),ke(()=>[a.value,b.value,R.value.recommendRangesObj],(t,d)=>{var h,S;(!d||t[0]&&t[1]&&t[2]&&!J(t[0])&&!J(t[1]&&!J(t[2]))||((h=t[0])==null?void 0:h.address)!==((S=d[0])==null?void 0:S.address))&&t[0]&&t[2]&&!J(t[0])&&!J(t[2])&&z.setSinglePool(t[0],t[2],te.value)},{immediate:!0,deep:!0});const me=t=>{if(te.value=="Sui")switch(t){case"passive":return"/sui-image/icon_ conservative@2x.png";case"active":return"/sui-image/icon_active@2x.png";case"full range":return"/sui-image/icon_fullrange@2x.png";case"custom":return"/sui-image/icon_costom@2x.png";case"suggested":return"/sui-image/icon_stabel@2x.png"}else switch(t){case"passive":return"/image/icon_ conservative@2x.png";case"active":return"/image/icon_active@2x.png";case"full range":return"/image/icon_fullrange@2x.png";case"custom":return"/image/icon_costom@2x.png";case"suggested":return"/image/icon_stabel@2x.png"}},Se=t=>{switch(t){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"full range":return e("newAdd.fullRange");case"custom":return e("newAdd.custom")}},g=t=>{var h,S;const d=R.value.poolPriceConfigObj&&R.value.poolPriceConfigObj[(h=b.value)==null?void 0:h.address]&&R.value.poolPriceConfigObj[(S=b.value)==null?void 0:S.address].type||"";if(f.value.length>2)if(d=="unstable")switch(t){case"active":return{top:"35%"};case"passive":return{top:"10%"};case"full range":return{top:"60%"};case"custom":return{top:"85%"}}else switch(t){case"suggested":return{top:"23%"};case"full range":return{top:"48%"};case"custom":return{top:"73%"}}else if(d=="unstable")switch(t){case"active":return{top:"35%"};case"passive":return{top:"10%"};case"full range":return{top:"60%"};case"custom":return{top:"85%"}}else switch(t){case"full range":return{top:"35%"};case"custom":return{top:"60%"}}},M=F(1),j=()=>{const t=M.value/2;M.value=t},ye=()=>{const t=M.value*2;M.value=t},k=T(()=>{var t,d,h;return!b.value||J(q.value.addressHistTokens)||!q.value.addressHistTokens[(t=b.value)==null?void 0:t.poolAddress]?null:Object.fromEntries((h=q.value.addressHistTokens[(d=b.value)==null?void 0:d.poolAddress])==null?void 0:h.data.map(S=>[S.key,S.value]))}),O=F(30),K=F("30D"),ae=T(()=>ce.value?k.value&&de(O.value==7?k.value.before_7_d_contract_price_lowest:O.value==24?k.value.before_24_h_contract_price_lowest:k.value.before_30_d_contract_price_lowest,6)||0:k.value&&de(new r(1).div(O.value==7?k.value.before_7_d_contract_price_highest:O.value==24?k.value.before_24_h_contract_price_highest:k.value.before_30_d_contract_price_highest).toString(),6)||0),H=T(()=>ce.value?k.value&&de(O.value==7?k.value.before_7_d_contract_price_highest:O.value==24?k.value.before_24_h_contract_price_highest:k.value.before_30_d_contract_price_highest,6)||0:(k.value&&de(1/Number(O.value==7?k.value.before_7_d_contract_price_lowest:O.value==24?k.value.before_24_h_contract_price_lowest:k.value.before_30_d_contract_price_lowest),6))==1/0?0:k.value&&de(1/Number(O.value==7?k.value.before_7_d_contract_price_lowest:O.value==24?k.value.before_24_h_contract_price_lowest:k.value.before_30_d_contract_price_lowest),6)||0),He=T(()=>{const t=Number($.value),d=Number(w.value);if($.value=="0"&&w.value=="âˆž"||W.value=="full range")return"1x";if($.value==w.value||W.value=="full range")return"--";if($.value&&w.value&&$.value!=="0"&&w.value!=="âˆž"){const h=bt(1/(1-Number((t/d)**.25)),2);return Number(h)>0?h+"x":"--"}else return 1}),I=T(()=>{var t,d,h,S,B,E;return((t=_.value)==null?void 0:t.isSelfBuilt)||((d=p.value)==null?void 0:d.isSelfBuilt)||((S=R.value.tokensObj[(h=_.value)==null?void 0:h.address])==null?void 0:S.isSelfBuilt)||((E=R.value.tokensObj[(B=p.value)==null?void 0:B.address])==null?void 0:E.isSelfBuilt)}),oe=(t,d)=>{t!==$.value&&W.value=="full range"?U({key:"custom",...f.value.custom}):W.value!=="full range"&&W.value!=="custom"?(W.value="custom",$.value=t):$.value=t,X.value&&(Oe.value?(ce.value&&$.value!==X.value.minPrice&&(Oe.value=!1),!ce.value&&Number($.value)!==1/Number(X.value.maxPrice)&&(Oe.value=!1)):(ce.value&&$.value==X.value.minPrice&&w.value==X.value.maxPrice&&(Oe.value=!0),!ce.value&&Number($.value)==1/Number(X.value.maxPrice)&&Number(w.value)==1/Number(X.value.minPrice)&&(Oe.value=!0)))},xe=(t,d)=>{t!==w.value&&W.value=="full range"?U({key:"custom",...f.value.custom}):W.value!=="full range"&&W.value!=="custom"?(W.value="custom",t=="0"?w.value="âˆž":w.value=t):t=="0"?w.value="âˆž":w.value=t,X.value&&(Oe.value?(ce.value&&w.value!==X.value.maxPrice&&(Oe.value=!1),!ce.value&&Number(w.value)!==1/Number(X.value.minPrice)&&(Oe.value=!1)):(ce.value&&$.value==X.value.minPrice&&w.value==X.value.maxPrice&&(Oe.value=!0),!ce.value&&Number($.value)==1/Number(X.value.maxPrice)&&Number(w.value)==1/Number(X.value.minPrice)&&(Oe.value=!0)))};ke(()=>[$.value,w.value],([t,d])=>{},{deep:!0,immediate:!0});const Ne=t=>{var d;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((d=R.value.tokensObj[t==null?void 0:t.address])==null?void 0:d.logo_url)||(q.value.theme==="default"?yt("/image/coins/unknown.png"):yt("/image/coins/sui-unknown.png"))},at=t=>{switch(t){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"full range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"custom":return e("newAdd.customTips")}},Qe=[{label:"24H",value:24},{label:"7D",value:7},{label:"30D",value:30}],Ge=Tt(),De=T(()=>Ge),X=T(()=>{var t;return De.value.farmsPoolObj[(t=b==null?void 0:b.value)==null?void 0:t.address]}),nt=T(()=>R.value.poolPriceConfigObj);return ke(()=>[Oe.value,b.value,f.value,nt.value,X.value,ce.value],(t,d)=>{var h,S;if(t[0]&&t[4]&&!J(t[4]))W.value="custom",$.value=t[5]?t[4].minPrice:String(1/t[4].maxPrice),w.value=t[5]?t[4].maxPrice:String(1/t[4].minPrice);else if(t[1]&&!J(t[1])&&t[2]&&!J(t[2])&&t[3]&&!J(t[3])&&t[4]&&!J(t[4])){t[3]&&t[3][(h=t[1])==null?void 0:h.address]&&t[3][(S=t[1])==null?void 0:S.address].type;const B=t[2].filter(E=>E.key===(t[2].length==4?"passive":"suggested"));B!=null&&B[0]&&(!d||d[0]!==t[0])&&U({...B[0]})}},{immediate:!0}),{positionError:et,getCoinIcon:Ne,chainName:te,store:q,currentTab:ue,currentPrice:ot,currentPriceReverse:ct,fromCoin:_,toCoin:p,direction:ce,needReverse:Z,addCommom:qe,decimalUi:de,priceTablList:f,currentPriceTab:W,sliderStyle:g,poolInfo:b,tickList:Ve,getPriceTabImage:me,getPriceTabText:Se,defaultMinPrice:ft,defaultMaxPrice:gt,minPrice:$,maxPrice:w,currentTick:n,chartLoading:Pe,zoomOut:j,zoomIn:ye,zoom:M,priceTab:U,before7dContractPriceLowest:ae,before7dContractPriceHighest:H,aprRewardsTime:K,lever:He,aprRewardsParameter:O,isSelfBuilt:I,priceRangeChangeMin:oe,priceRangeChangeMax:xe,toggle:Zt,getPirceTabTips:at,timeList:Qe,farmsPoolInfo:X,checkNullObj:J,isStableFarmingRange:Oe}}}),Gt=""+globalThis.__publicAssetsURL("sui-image/icon_sel@2x.png");const Ui={class:"new-liquidity-left"},ji=o("span",{class:"selectRange"},"Select Range",-1),zi={class:"price-info"},Hi={class:"left"},Xi={class:"base-coin"},Ei={class:"base-coin-title"},Wi=o("span",null,"Base coin",-1),Di=o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})],-1),Zi=o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})],-1),xi=[Di,Zi],Gi={class:"base-coin-bottom"},Ki={alt:""},Ji={class:"current-price"},Qi=o("div",{class:"current-price-title"},"Current Price",-1),Yi={key:0,class:"from-pre-to"},Vi={class:"right"},ea={class:"price-range"},ta={class:"left"},ia={class:"price-slider"},aa={class:"slider"},na=o("div",{class:"slider-ratio-content"},null,-1),ra=[na],oa={class:"price-tab-list"},sa=["onClick"],la=["src"],ua={class:"right"},ca={class:"price-zoom"},da={class:"current-price"},ma=o("div",{class:"current-price-title"},"Current Price",-1),va={key:0,class:"from-pre-to"},fa={class:"price-zoom-right"},ga={class:"leverage"},pa=o("div",{class:"left"},null,-1),ba={class:"right"},ha={class:"right-time"},ka={key:0,class:"day-7-price-range"},ya=o("i",null,null,-1),_a={class:"gray"},wa={class:"time-list"},Ca=["onClick"],Pa={class:"right-price-h5"},Sa={key:0,class:"stable-farming-range"},Ta={key:0,src:Gt,alt:""},Ia={class:"apr-leverage"},Aa={key:0,class:"position-tips"},Na=["src"],La={class:"error"};function qa(e,s,ue,Q,q,te){var b,Z,Pe,Ae,ie,f,n,N,m;const z=Ht,R=xt,A=Oi,Y=Xt,a=oi("image");return L(),D("div",Ui,[ji,o("div",zi,[o("div",Hi,[o("div",Xi,[o("div",Ei,[Wi,o("div",{class:"change-price",onClick:s[0]||(s[0]=(...v)=>e.toggle&&e.toggle(...v))},xi)]),o("div",Gi,[Rt(o("img",Ki,null,512),[[a,e.getCoinIcon(e.fromCoin)]]),o("span",null,ee((b=e.fromCoin)==null?void 0:b.symbol),1)])]),o("div",Ji,[Qi,o("div",null,[o("span",null,ee(e.poolInfo?e.direction?("addCommom"in e?e.addCommom:le(qe))(("decimalUi"in e?e.decimalUi:le(de))(e.currentPrice,6)):("addCommom"in e?e.addCommom:le(qe))(("decimalUi"in e?e.decimalUi:le(de))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(L(),D("span",Yi,ee((Z=e.toCoin)==null?void 0:Z.symbol)+" per "+ee((Pe=e.fromCoin)==null?void 0:Pe.symbol),1)):G("",!0)])])]),o("div",Vi,[e.currentTab=="liquidity"?(L(),D("div",{key:0,class:"zoom-out",onClick:s[1]||(s[1]=(...v)=>e.zoomOut&&e.zoomOut(...v))}," + ")):G("",!0),e.currentTab=="liquidity"?(L(),D("div",{key:1,class:"zoom-in",onClick:s[2]||(s[2]=(...v)=>e.zoomIn&&e.zoomIn(...v))}," - ")):G("",!0)])]),o("div",ea,[o("div",ta,[o("div",ia,[o("div",aa,[o("div",{class:"slider-ratio",style:ht(e.sliderStyle(e.currentPriceTab))},ra,4)])]),o("div",oa,[(L(!0),D(kt,null,Mt(e.priceTablList,v=>(L(),D("div",{key:v.key,class:vt(["price-tab-item",e.currentPriceTab==v.key?"price-tab-item-active":""]),onClick:U=>e.priceTab(v)},[ze(z,{placement:"bottom","arrow-point-at-center":""},{title:st(()=>[St(ee(e.getPirceTabTips(v.key)),1)]),default:st(()=>[o("img",{src:e.getPriceTabImage(v.key),alt:""},null,8,la),o("span",null,ee(e.getPriceTabText(v.key)),1)]),_:2},1024)],10,sa))),128))])]),o("div",ua,[o("div",ca,[o("div",da,[ma,o("div",null,[o("span",null,ee(e.poolInfo?e.direction&&!e.needReverse?("addCommom"in e?e.addCommom:le(qe))(("decimalUi"in e?e.decimalUi:le(de))(e.currentPrice,6)):("addCommom"in e?e.addCommom:le(qe))(("decimalUi"in e?e.decimalUi:le(de))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(L(),D("span",va,ee(e.direction&&!e.needReverse?`${(Ae=e.fromCoin)==null?void 0:Ae.symbol} per ${(ie=e.toCoin)==null?void 0:ie.symbol}`:`${(f=e.toCoin)==null?void 0:f.symbol} per ${(n=e.fromCoin)==null?void 0:n.symbol}`),1)):G("",!0)])]),o("div",fa,[e.currentTab=="liquidity"?(L(),D("div",{key:0,class:"zoom-out",onClick:s[3]||(s[3]=(...v)=>e.zoomOut&&e.zoomOut(...v))}," + ")):G("",!0),e.currentTab=="liquidity"?(L(),D("div",{key:1,class:"zoom-in",onClick:s[4]||(s[4]=(...v)=>e.zoomIn&&e.zoomIn(...v))}," - ")):G("",!0)])]),e.poolInfo?(L(),We(R,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direction,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,zoom:e.zoom,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","zoom","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):G("",!0)])]),o("div",ga,[pa,o("div",ba,[o("div",ha,[e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(L(),D("div",ka,[ya,o("span",_a,ee(e.aprRewardsParameter==7?"7D":e.aprRewardsParameter==24?"24H":"30D")+" Price Range",1),o("span",null,ee(("addCommom"in e?e.addCommom:le(qe))(("decimalUi"in e?e.decimalUi:le(de))(e.before7dContractPriceLowest,6)))+" - "+ee(("addCommom"in e?e.addCommom:le(qe))(("decimalUi"in e?e.decimalUi:le(de))(e.before7dContractPriceHighest,6))),1)])):G("",!0),o("div",wa,[(L(!0),D(kt,null,Mt(e.timeList,v=>(L(),D("div",{key:v.value,class:vt(["time-item",v.value==e.aprRewardsParameter?"time-item-active":""]),onClick:U=>e.aprRewardsParameter=v.value},ee(v.label),11,Ca))),128))])]),o("div",Pa,[o("span",null,ee(("addCommom"in e?e.addCommom:le(qe))(("decimalUi"in e?e.decimalUi:le(de))(e.before7dContractPriceLowest,6)))+" - "+ee(("addCommom"in e?e.addCommom:le(qe))(("decimalUi"in e?e.decimalUi:le(de))(e.before7dContractPriceHighest,6))),1)])])]),e.farmsPoolInfo&&!("checkNullObj"in e?e.checkNullObj:le(J))(e.farmsPoolInfo)&&e.fromCoin&&e.toCoin?(L(),D("div",Sa,[o("span",null," Farm rewards rangeï¼š"+ee(("decimalUi"in e?e.decimalUi:le(de))(e.direction?e.farmsPoolInfo.minPrice:1/e.farmsPoolInfo.maxPrice,6))+" - "+ee(("decimalUi"in e?e.decimalUi:le(de))(e.direction?e.farmsPoolInfo.maxPrice:1/e.farmsPoolInfo.minPrice,6))+" "+ee((N=e.toCoin)==null?void 0:N.symbol)+" per "+ee((m=e.fromCoin)==null?void 0:m.symbol),1),o("div",{class:"check-box-active",onClick:s[5]||(s[5]=v=>e.isStableFarmingRange=!e.isStableFarmingRange)},[e.isStableFarmingRange?(L(),D("img",Ta)):G("",!0)])])):G("",!0),o("div",{class:vt(["apr-and-price",e.positionError&&e.poolInfo?"padding-apr-and-price":""])},[o("div",Ia,[ze(A,{lever:e.lever},null,8,["lever"])]),ze(Y,{min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direction,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["min","max","from-coin","to-coin","direct","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice"]),e.positionError&&e.poolInfo?(L(),D("div",Aa,[o("img",{src:("importIcon"in e?e.importIcon:le(yt))("/image/icon-tips-error@2x.png"),alt:""},null,8,Na),o("p",La,ee(e.$t("tips.positionError")),1)])):G("",!0)],2)])}const Kt=it(Ri,[["render",qa]]),Ma=tt({props:{poolInfo:{type:Object,default:()=>({})},isActive:{type:Boolean,default:!0}},setup(e,s){const ue=Tt(),Q=F(!1),q=F(),te=F(!0),z=T(()=>ue),R=T(()=>z.value.farmsPoolList.filter(a=>a.status=="Live"));ke(()=>e.poolInfo,a=>{a&&!J(a)&&ue.getFarmsPoolList()},{immediate:!0});const A=a=>{const b=a.filter(Z=>{var Pe;return Z.status=="Live"&&Z.clmm_pool_id==((Pe=e.poolInfo)==null?void 0:Pe.poolAddress)});b&&b.length>0?(Q.value=!0,q.value=b[0],s.emit("sendFarmsPoolInfo",te.value&&e.isActive?q.value:"")):Q.value=!1};return ke(()=>R.value,a=>{a&&a.length>0&&A(a)},{immediate:!0}),ke(()=>[e.isActive,te.value,q.value],([a,b,Z])=>{s.emit("sendFarmsPoolInfo",b&&e.isActive?Z:"")},{immediate:!0}),{isShowAutoStake:Q,changeIsOpen:()=>{te.value=!te.value,s.emit("sendFarmsPoolInfo",te.value&&e.isActive?q.value:"")},isOpen:te}}}),$a=""+globalThis.__publicAssetsURL("sui-image/farming_huo.png");const It=e=>(wt("data-v-fb4559d6"),e=e(),Ct(),e),Fa={key:0,class:"farms-auto-stake"},Ba=It(()=>o("img",{class:"farms-icon",src:$a,alt:""},null,-1)),Oa=It(()=>o("div",{class:"desc"},"Automatically stake your position into the farm to enjoy higher yield.",-1)),Ra={key:0,src:Gt,alt:""},Ua=It(()=>o("div",{class:"check-box"},null,-1));function ja(e,s,ue,Q,q,te){const z=Ht;return e.isShowAutoStake?(L(),D("div",Fa,[Ba,Oa,e.isActive?(L(),D("div",{key:0,class:"check-box-active",onClick:s[0]||(s[0]=(...R)=>e.changeIsOpen&&e.changeIsOpen(...R))},[e.isOpen?(L(),D("img",Ra)):G("",!0)])):(L(),We(z,{key:1,"overlay-style":{"min-width":"200px"}},si({default:st(()=>[Ua]),_:2},[e.isActive?void 0:{name:"title",fn:st(()=>[St("Farming rewards only available for active positions.")]),key:"0"}]),1024))])):G("",!0)}const za=it(Ma,[["render",ja],["__scopeId","data-v-fb4559d6"]]),Ha=tt({components:{NewLiquidityTitle:Et,NewLiquidityAssetsCard:Wt,NewLiquidityDepositRatio:Dt},setup(){const{t:e,locale:s}=jt(),ue=dt(),Q=T(()=>ue),q=T(()=>Q.value.chainName),te=Bt(),z=T(()=>te),R=fi(),A=T(()=>R),Y=Pt(),a=T(()=>{let i=null;for(const u in z.value.poolsObj){const y=z.value.poolsObj[u];y.address==Y.query.poolAddress&&(i=y)}return i}),b=F(!1),Z=F(!1),Pe=T(()=>Q.value.theme),Ae=async(i,u)=>{_.value=i.needReverse?i.token_b:i.token_a,p.value=i.needReverse?i.token_a:i.token_b,C.value="",P.value=""},ie=T(()=>A.value.assets&&_.value&&A.value.assets[_.value.address]?qt(A.value.assets[_.value.address].balance,_.value.decimals):"0"),f=T(()=>A.value.assets&&p.value&&A.value.assets[p.value.address]?qt(A.value.assets[p.value.address].balance,p.value.decimals):"0"),n=i=>{i==="fromCoin"?(Ie.value=!0,q.value==="Aptos"?C.value=Number(ie.value)>0?_.value.symbol=="APT"?new r(Number(ie.value)).sub(new r(.1)).lt(new r(0))?"0":new r(Number(ie.value)).sub(new r(.1)).toString():String(ie.value):"":C.value=Number(ie.value)>0?_.value.symbol=="SUI"?new r(Number(ie.value)).sub(new r(.05)).lt(new r(0))?"0":new r(Number(ie.value)).sub(new r(.05)).toString():String(ie.value):""):(Ie.value=!1,q.value==="Aptos"?P.value=Number(f.value)>0?p.value.symbol=="APT"?new r(Number(f.value)).sub(new r(.1)).lt(new r(0))?"0":new r(Number(f.value)).sub(new r(.1)).toString():String(f.value):"":P.value=Number(f.value)>0?p.value.symbol=="SUI"?new r(Number(f.value)).sub(new r(.05)).lt(new r(0))?"0":new r(Number(f.value)).sub(new r(.05)).toString():String(f.value):"")},N=i=>{i==="fromCoin"?(Ie.value=!0,C.value=Number(ie.value)>0?bt(new r(Number(ie.value)).div(2).toString(),_.value.decimals).toString():""):(Ie.value=!1,P.value=Number(f.value)>0?bt(new r(Number(f.value)).div(2).toString(),p.value.decimals).toString():"")},m=F(),v=F(),U=F(),re=F(!1),me=i=>{var u,y,ve,x;m.value=i,i==="fromCoin"?(v.value=((u=p.value)==null?void 0:u.address)||"",U.value=Y.query.actions=="new-position"?(y=_.value)==null?void 0:y.address:a.value.needReverse?a.value.token_b.address:a.value.token_a.address):(v.value=((ve=_.value)==null?void 0:ve.address)||"",U.value=Y.query.actions=="new-position"?(x=p.value)==null?void 0:x.address:a.value.needReverse?a.value.token_a.address:a.value.token_b.address),re.value=!0},Se=i=>{var ve,x,fe,ge,se,pe,be,we;const u=a.value.needReverse?a.value.token_b:a.value.token_a,y=a.value.needReverse?a.value.token_a:a.value.token_b;m.value==="fromCoin"?(((ve=_.value)==null?void 0:ve.address)===(u==null?void 0:u.address)||!((x=_.value)!=null&&x.address)?(p.value&&i.address.toLowerCase()===((fe=p)==null?void 0:fe.value.address.toLowerCase())&&(p.value=null),_.value=i):(_.value&&i.address.toLowerCase()===((ge=_)==null?void 0:ge.value.address.toLowerCase())&&(_.value=null),p.value=i),Y.query.action||(Y.query.fee="")):((se=p.value)==null?void 0:se.address)===(y==null?void 0:y.address)||!((pe=p.value)!=null&&pe.address)?(_.value&&i.address.toLowerCase()===((be=_)==null?void 0:be.value.address.toLowerCase())&&(_.value=null),p.value=i):(p.value&&i.address.toLowerCase()===((we=p)==null?void 0:we.value.address.toLowerCase())&&(p.value=null),_.value=i),re.value=!1},g=T(()=>Q.value.chainName?_t(Q.value.chainName):{}),M=T(()=>Q.value.slippage),j=F(),ye=async()=>{var Re,Fe,Be,Ue;if(Xe.value||!$.value&&!w.value)return!1;if(!C.value&&!P.value&&!$.value&&!w.value)return;const i=a.value||{};if(J(i))return;const{TickUtil:u,TickMath:y,getNearestTickByTick:ve}=g.value,x=i==null?void 0:i.token_a.decimals,fe=i==null?void 0:i.token_b.decimals;let ge,se,pe,be,we,Le,Ee,Ze,Me=i==null?void 0:i.current_tick_index,V;if(i.token_a.address.toLowerCase()===_.value.address.toLowerCase()&&i.token_b.address.toLowerCase()===p.value.address.toLowerCase()?V=!0:V=!1,$.value==="0"&&w.value==="âˆž")pe=u.getMinIndex(Number(i.tickSpacing)),be=u.getMaxIndex(Number(i.tickSpacing)),we=y.tickIndexToSqrtPriceX64(pe),Le=y.tickIndexToSqrtPriceX64(be);else if(W.value=="custom"){V?(ge=$.value,se=w.value):(ge=w.value!=="âˆž"?new r(1).div(w.value).toString():1/0,se=new r(1).div($.value).toString());try{Ee=new r(ge).equals(new r(0))?-443636:y.priceToTickIndex(new r(ge),x,fe)}catch{Ee=-443636}try{Ze=y.priceToTickIndex(new r(se),x,fe)}catch{Ze=443636}pe=ve(Ee,Number(i.tickSpacing),!0),be=ve(Ze,Number(i.tickSpacing),!0);try{we=y.priceToSqrtPriceX64(new r(ge),x,fe)}catch{(se===1/0||se==="âˆž")&&(we=y.tickIndexToSqrtPriceX64(u.getMinIndex(Number(i.tickSpacing))))}try{Le=y.priceToSqrtPriceX64(new r(se),x,fe)}catch{(se===1/0||se==="âˆž")&&(Le=y.tickIndexToSqrtPriceX64(u.getMaxIndex(Number(i.tickSpacing))))}}else pe=(Re=Je.value[W.value])==null?void 0:Re.lower,be=(Fe=Je.value[W.value])==null?void 0:Fe.upper,we=y.tickIndexToSqrtPriceX64(pe),Le=y.tickIndexToSqrtPriceX64(be);if(w.value!=="âˆž"&&pe>=be){b.value=!0,C.value="",Z.value=!0,P.value="";return}if(w.value==="âˆž"||Me>=pe&&Me<be){b.value=!1,Z.value=!1;let Ce;if(C.value||P.value){if(Ie.value){const mt=new r(C.value).mul(Math.pow(10,_.value.decimals)).toString();Ce=new je(mt)}else{const mt=new r(P.value).mul(Math.pow(10,p.value.decimals)).toString();Ce=new je(mt)}y.tickIndexToSqrtPriceX64(a.value.current_tick_index);const{liquidityAmount:$e,tokenMaxA:Ke,tokenMaxB:lt,tokenMaxAOrigin:ti,tokenMaxBOrigin:ii}=g.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:i.token_a,tokenB:i.token_b,lowerTick:pe,upperTick:be,coinAmount:Ce,iscoinA:V?Ie.value:!Ie.value,roundUp:!0,slippage:Number(M.value)/100,curSqrtPrice:new je(a.value.current_sqrt_price)});j.value={liquidityAmount:$e,tokenMaxA:Ke,tokenMaxB:lt,tokenMaxAOrigin:ti,tokenMaxBOrigin:ii},V?Ie.value?P.value=Number(lt)>0?lt:"":C.value=Number(Ke)>0?Ke:"":Ie.value?P.value=Ke:C.value=lt}}else if(Me>=be){if(V?C.value="":P.value="",b.value=V,Z.value=!V,C.value||P.value){let Ce;if(V){const $e=new r(P.value).mul(Math.pow(10,(Be=p.value)==null?void 0:Be.decimals)).toString();Ce=new je($e),j.value={liquidityAmount:g.value.estimateLiquidityForCoinB(we,Le,Ce),tokenMaxA:0,tokenMaxB:P.value}}else{const $e=new r(C.value).mul(Math.pow(10,(Ue=_.value)==null?void 0:Ue.decimals)).toString();Ce=new je($e),j.value={liquidityAmount:g.value.estimateLiquidityForCoinB(we,Le,Ce),tokenMaxA:0,tokenMaxB:C.value}}}}else if(Me<pe){if(b.value=!V,Z.value=V,V?P.value="":C.value="",C.value||P.value){let Ce;if(V){const $e=new r(C.value).mul(Math.pow(10,_.value.decimals)).toString();Ce=new je($e),j.value={liquidityAmount:g.value.estimateLiquidityForCoinA(we,Le,Ce),tokenMaxA:C.value,tokenMaxB:0}}else{const $e=new r(P.value).mul(Math.pow(10,p.value.decimals)).toString();Ce=new je($e),j.value={liquidityAmount:g.value.estimateLiquidityForCoinA(we,Le,Ce),tokenMaxA:P.value,tokenMaxB:0}}}}else b.value=!0,C.value="",Z.value=!0,P.value=""};ke(()=>a.value,(i,u)=>{(!u&&i&&!J(i)||u&&i&&u.address!==i.address)&&Ae(i,!u||i.address!==u.address),i&&!J(i)&&ye()},{immediate:!0}),ke(C,(i,u)=>{i==""&&Ie.value&&(P.value=""),i&&Ie.value&&!Xe.value&&ye()}),ke(P,(i,u)=>{i==""&&!Ie.value&&(C.value=""),i&&!Ie.value&&!Xe.value&&ye()}),ke(()=>ce.value,(i,u)=>{ye()}),ke(()=>[_.value,p.value],([i,u])=>{i&&u&&(b.value=!1,Z.value=!1)});const k=F("--"),O=T(()=>z.value.RATES),K=()=>{const i=O.value&&O.value[_.value.address]&&O.value[_.value.address].price,u=O.value&&O.value[p.value.address]&&O.value[p.value.address].price;if(i&&u){const y=new r(C.value>0?C.value:0).mul(i),ve=new r(P.value>0?P.value:0).mul(u),x=y.add(ve).toNumber();k.value=x>0&&x<.01?"<$0.01":"$"+qe(x,2)}else k.value="--"};ke(()=>[C.value,P.value,Xe.value],([i,u,y])=>{(i||u)&&!y?K():(!i||!u)&&!y&&(k.value="--")},{immediate:!0}),ke(()=>k,i=>{},{immediate:!0});const ae=F(),H=async()=>{var V,Re;if(!$.value&&!w.value)return!1;if(!C.value&&!P.value&&!$.value&&!w.value)return;const i=a.value;if(J(i))return;const{TickUtil:u,TickMath:y,getNearestTickByTick:ve}=g.value,x=i==null?void 0:i.token_a.decimals,fe=i==null?void 0:i.token_b.decimals;let ge,se,pe,be,we,Le,Ee;if(i.token_a.address.toLowerCase()===_.value.address.toLowerCase()&&i.token_b.address.toLowerCase()===p.value.address.toLowerCase()?Ee=!0:Ee=!1,$.value==="0"&&w.value==="âˆž")pe=u.getMinIndex(Number(i.tickSpacing)),be=u.getMaxIndex(Number(i.tickSpacing));else if(W.value=="custom"){Ee?(ge=Number($.value),se=Number(w.value)):(ge=new r(1).div(w.value).toString(),se=new r(1).div($.value).toString());try{we=ge==0?-443636:y.priceToTickIndex(new r(ge),x,fe)}catch{we=-443636}try{Le=y.priceToTickIndex(new r(se),x,fe)}catch{Le=443636}pe=ve(we,Number(i.tickSpacing),!0),be=ve(Le,Number(i.tickSpacing),!0)}else pe=(V=Je.value[W.value])==null?void 0:V.lower,be=(Re=Je.value[W.value])==null?void 0:Re.upper;const Ze=O.value[i==null?void 0:i.token_a.address].price,Me=O.value[i==null?void 0:i.token_b.address].price;ce.value?new je(i.current_sqrt_price):new je(1/i.current_sqrt_price);try{const{amountA:Fe,amountB:Be,tokenAmountsInfo:Ue}=await g.value.estCoinAmountsFromTotalAmount({lowerTick:pe,upperTick:be,decimalsA:x,decimalsB:fe,curSqrtPrice:new je(i.current_sqrt_price),totalAmount:k.value.replace(/[^\d.]/g,""),tokenPriceA:Ze,tokenPriceB:Me});ae.value=Ue,i.needReverse?ce.value?(C.value=Fe,P.value=Be):(C.value=Be,P.value=Fe):(C.value=Fe,P.value=Be)}catch{}};ke([$,w],([i,u])=>{Xe.value?Xe.value&&H():ye(),u!=="âˆž"&&Number(i)!==0&&Number(u)!==0&&Number(i)>=Number(u)?et.value=!0:et.value=!1,Number(i)==0&&Number(u)==0&&ot.value&&(et.value=!0)},{deep:!0,immediate:!0});const He=i=>{const u=i.replace(/[^\d.]/g,""),y="$"+qe(u);Xe.value=!0,k.value=y,u>0?H():(C.value="",P.value="")},I=F(!1),{setTransactionTxid:oe,setTransactionDesc:xe,setIsShowWaiting:Ne,setIsShowSuccess:at,setPositiomNum:Qe,setIsShowRejected:Ge}=ue,De=_i(),X=T(()=>z.value.currentPositionInfo),nt=F(!1),t=F(!0),d=Tt(),h=T(()=>d),S=T(()=>h.value.farmsPoolObj);ke(()=>[S.value,a.value],([i,u])=>{i&&!J(i)&&u&&!J(u)&&(i[u.address]||(t.value=!1))},{immediate:!0});const B=F(),E=i=>{B.value=i,i?t.value=!0:t.value=!1},_e=async i=>{var we,Le,Ee,Ze;I.value=!1,z.value.currentPositionInfo={},oe(""),xe(e("tips.increaseLiquiditySuccess",{from:b.value?"":`${qe(C.value)} ${(we=_.value)==null?void 0:we.symbol}`,and:!b.value&&!Z.value?"and":"",to:Z.value?"":`${qe(P.value)} ${(Le=p.value)==null?void 0:Le.symbol}`})),Ne(!0);const u=ce.value?Ie.value:!Ie.value;let y,ve,x,fe,ge,se;const pe=a.value.token_a.decimals,be=a.value.token_b.decimals;if($.value==="0"&&w.value==="âˆž")x=g.value.TickUtil.getMinIndex(Number(a.value.tickSpacing)),fe=g.value.TickUtil.getMaxIndex(Number(a.value.tickSpacing));else if(W.value=="custom"){ce.value?(y=$.value,ve=w.value):(y=new r(1).div(w.value).toString(),ve=new r(1).div($.value).toString());try{ge=y==0?g.value.TickUtil.getMinIndex(Number(a.value.tickSpacing)):g.value.TickMath.priceToTickIndex(new r(y),pe,be)}catch{ge=g.value.TickUtil.getMinIndex(Number(a.value.tickSpacing))}try{se=g.value.TickMath.priceToTickIndex(new r(ve),pe,be)}catch{se=g.value.TickUtil.getMaxIndex(Number(a.value.tickSpacing))}x=g.value.getNearestTickByTick(ge,Number(a.value.tickSpacing),!0),fe=g.value.getNearestTickByTick(se,Number(a.value.tickSpacing),!0)}else x=Je.value[W.value].lower,fe=Je.value[W.value].upper;try{let Me;Xe.value?Me=await g.value.getCreateAddLiquidityPayload({pool:a.value,curSqrtPrice:new je(a.value.current_sqrt_price),tickLower:x,tickUpper:fe,slippage:Number(M.value)/100,tokenAmounts:ae.value}):Me=await g.value.getAddLiquidityTransactionPayload({pool:{poolAddress:a.value.poolAddress,token_a:a.value.token_a,token_b:a.value.token_b},amount:Ie.value?C.value:P.value,fix_amount_a:u,tick_lower:x,tick_upper:fe,index:0,slippage:Number(M.value)/100,roundUp:!0,collect_fee:!1,curSqrtPrice:new je(a.value.current_sqrt_price),farmPoolInfo:B.value});let V;if(q.value==="Aptos")V=await A.value.currentWallet.signAndSubmitTransaction(Me);else{const Re=await g.value.signAndExecuteTransactionBlock(A.value.currentWallet,Me);V=g.value.handleTx(Re)}if(V&&V.hash){oe(V.hash),Ne(!1),at(!0);let Re;a.value.needReverse?a.value.token_a.address.toLowerCase()===_.value.address.toLowerCase()&&a.value.token_b.address.toLowerCase()===p.value.address.toLowerCase()?Re=!1:Re=!0:a.value.token_a.address.toLowerCase()===_.value.address.toLowerCase()&&a.value.token_b.address.toLowerCase()===p.value.address.toLowerCase()?Re=!0:Re=!1;const Fe={title:"Supplied",desc:e("tips.addLiquiditySuccessText",{from:b.value?"":`${qe(C.value)} ${(Ee=_.value)==null?void 0:Ee.symbol}`,and:!b.value&&!Z.value?"and":"",to:Z.value?"":`${qe(P.value)} ${(Ze=p.value)==null?void 0:Ze.symbol}`}),hash:V.hash,tit:"Position Created",icon:"icon-icon-Position-Created"};q.value!=="Aptos"&&(Fe.res=V.res),g.value.showTransitionPending(Fe);const Be=await g.value.watchTransaction(Fe,!0);if(Be.status){if(at(!1),z.value.setCurrentPositionLoading(!0),nt.value=!0,q.value==="Aptos"){if(await z.value.setCurrentPositionInfo(Be.nftInfo[0].data.id.creator,Be.nftInfo[0].data.id.collection,Be.nftInfo[0].data.name,q.value),i)try{await De.subscribePosition({pool_address:X.value.poolAddress,position_index:X.value.index},X.value.nftHash)}catch{}}else{const Ue=Be.nftInfo,Ce=await Lt(2e3);if(t.value){let $e;Be.res.events.forEach(Ke=>{Ke.type.indexOf("::pool::DepositEvent")>-1&&($e=Ke.parsedJson.wrapped_position_id)}),await z.value.setCurrentPositionInfo("","","","Sui",$e,"farming")}else await z.value.setCurrentPositionInfo(Ue==null?void 0:Ue.pool,"","",q.value,Ue==null?void 0:Ue.position);if(await Lt(1e3),i&&!t.value)try{await De.subscribePosition({pool_address:X.value.poolAddress,position_index:X.value.index},X.value.nftHash)}catch{}else if(i&&t.value)try{await De.subscribePosition({pool_address:X.value.clmm_pool_id,position_index:X.value.name.split("-")[1]},X.value.clmm_position_id)}catch{}}setTimeout(()=>{te.updateCurrentPools(a.value.poolAddress,q.value),g.value.getAccount(A.value.address)},3e3),setTimeout(async()=>{$t(g,a)},7e3)}Qe()}else Ne(!1),Ge(!0);C.value="",P.value=""}catch{C.value="",P.value="",Ne(!1),Ge(!0)}},Ye=T(()=>!!(!C.value&&!P.value||Number(C.value)>Number(ie.value)||Number(P.value)>Number(f.value)||l.value!==e("button.addLiquidity")&&l.value!==e("newAdd.preview")||a.value&&a.value&&a.value.is_pause||Number(C.value)<=0&&Number(P.value)<=0||!b.value&&Number(C.value)==0||!Z.value&&Number(P.value)==0)),c=T(()=>!_.value||!p.value),l=T(()=>a.value&&a.value.is_pause?"Pool Closed":!_.value||!p.value||c.value?e("modal.selectTokenModalTitle"):Number(C.value)>Number(ie.value)?e("button.insufficientBalance",{name:_.value.symbol}):Number(P.value)>Number(f.value)?e("button.insufficientBalance",{name:p.value.symbol}):!Number(C.value)&&!Number(P.value)?e("button.enterAmount"):w.value!=="âˆž"&&Number($.value)>=Number(w.value)?e("newAdd.invalidRange"):e("button.addLiquidity")),Te=F({}),ne=F({}),he=F(!1),At=(i,u)=>{const y=localStorage.getItem(i.address);z.value.tokensObj&&z.value.tokensObj[i.address]&&z.value.tokensObj[i.address].isSelfBuilt&&!y&&(u=="fromCoin"&&(Te.value=i),u=="toCoin"&&(ne.value=i),he.value=!0)};ke(()=>[_.value,p.value],([i,u])=>{i&&!J(i)&&At(i,"fromCoin"),u&&!J(u)&&At(u,"toCoin")},{immediate:!0});const Nt=li(),Qt=()=>{q.value!=="Aptos"?Nt.push("/pool/list"):Nt.push("/pools")},Yt=i=>{Xe.value,_e(i)},Vt=()=>{Y.query.action!=="create-pool"&&Y.query.actions!=="new-position"&&($t(g,a),ye(),te.updateCurrentPools(a.value.poolAddress,q.value)),te.setPoolConfigList(q.value,Q.value.filterCoinsObj)},ei=T(()=>{var y,ve,x,fe,ge,se;const i=(x=O.value[(ve=(y=_)==null?void 0:y.value)==null?void 0:ve.address])==null?void 0:x.price,u=(se=O.value[(ge=(fe=p)==null?void 0:fe.value)==null?void 0:ge.address])==null?void 0:se.price;return!!(i&&u)});return ke(()=>[Y,z.value.tokensObj],([i,u])=>{var y;u&&!J(u)&&(p.value||(p.value=z.value.tokensObj[(y=i==null?void 0:i.query)==null?void 0:y.toCoin]))},{immediate:!0,deep:!0}),{positionError:et,decimalUi:de,poolInfo:a,fromCoinAmount:C,toCoinAmount:P,fromCoin:_,toCoin:p,theme:Pe,showFromCoinLock:b,showToCoinLock:Z,fromCoinBlance:ie,toCoinBlance:f,maxBtnSelect:n,halfBtnSelect:N,fixedFromCoin:Ie,openCoinSelect:me,currentCoinKey:m,existingCoins:v,lastSelectCoin:U,showCoinSelect:re,onCoinSelect:Se,liquidityTotalAmount:k,toggle:Zt,onInput:He,isInputTotalAmount:Xe,isViewDetail:nt,addLiquidityBtnDisabled:Ye,addLiquidityBtnText:l,isShowTokenWarning:he,chainName:q,closeTokenWarning:Qt,warningFromCoin:Te,warningToCoin:ne,isShowLiquidityModal:I,currentPrice:ot,currentPriceReverse:ct,currentPriceTab:W,minPrice:$,maxPrice:w,toAdd:_e,direction:ce,wallet:A,getAddLiquidityType:Yt,clickRefresh:Vt,isShowtotalAmount:ei,isAutoStakeFarming:t,farmPoolInfo:B,getFarmsPoolInfo:E}}});const Xa={class:"new-liquidity-right"},Ea={class:"deposit-title"},Wa={class:"card-container"},Da={key:0,class:"lock"},Za={class:"card-item"},xa={class:"card-item"},Ga={key:0,class:"total-amount"},Ka=o("span",null,"Total Amount",-1);function Ja(e,s,ue,Q,q,te){const z=Et,R=gi,A=Wt,Y=bi,a=Dt,b=ui,Z=hi,Pe=ki,Ae=yi,ie=za;return L(),D("div",Xa,[o("div",Ea,[ze(z,{"pool-info":e.poolInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"])]),o("div",Wa,[e.positionError?(L(),D("div",Da,[ze(R)])):G("",!0),o("div",Za,[ze(A,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":s[0]||(s[0]=f=>e.fromCoinAmount=f),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[1]||(s[1]=f=>e.maxBtnSelect("fromCoin")),onOnHalf:s[2]||(s[2]=f=>e.halfBtnSelect("fromCoin")),onOnInput:s[3]||(s[3]=f=>{e.fromCoinAmount=f,e.fixedFromCoin=!0,e.isInputTotalAmount=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.positionError?(L(),We(Y,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):G("",!0)]),o("div",xa,[ze(A,{modelValue:e.toCoinAmount,"onUpdate:modelValue":s[4]||(s[4]=f=>e.toCoinAmount=f),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[5]||(s[5]=f=>e.maxBtnSelect("toCoin")),onOnHalf:s[6]||(s[6]=f=>e.halfBtnSelect("toCoin")),onOnInput:s[7]||(s[7]=f=>{e.toCoinAmount=f,e.fixedFromCoin=!1,e.isInputTotalAmount=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.positionError?(L(),We(Y,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):G("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme=="default"?(L(),D("img",{key:1,class:"add",src:wi,alt:"",onClick:s[8]||(s[8]=(...f)=>e.toggle&&e.toggle(...f))})):G("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme!=="default"?(L(),D("img",{key:2,class:"add",src:Ci,alt:"",onClick:s[9]||(s[9]=(...f)=>e.toggle&&e.toggle(...f))})):G("",!0)]),e.isShowtotalAmount?(L(),D("div",Ga,[Ka,o("span",null,ee(e.liquidityTotalAmount)+" ",1)])):G("",!0),ze(a,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"fixed-from-coin":e.fixedFromCoin,"is-input-total-amount":e.isInputTotalAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price-tab":e.currentPriceTab,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","fixed-from-coin","is-input-total-amount","min-price","max-price","current-price-tab","current-price","current-price-reverse"]),ze(b,{class:"add-liquidity-btn",disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,onClick:s[10]||(s[10]=f=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:st(()=>[St(ee(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),e.showCoinSelect?(L(),We(Z,{key:1,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:s[11]||(s[11]=f=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):G("",!0),e.isViewDetail?(L(),We(Pe,{key:2,"pool-info":e.poolInfo,"farm-pool-info":e.farmPoolInfo,"is-auto-stake-farming":e.isAutoStakeFarming,onOnClose:s[12]||(s[12]=f=>e.isViewDetail=!1)},null,8,["pool-info","farm-pool-info","is-auto-stake-farming"])):G("",!0),e.isShowLiquidityModal?(L(),We(Ae,{key:3,"pool-info":e.poolInfo,title:e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direction,"is-increase":!1,onToAdd:e.getAddLiquidityType,onOnClose:s[13]||(s[13]=f=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onToAdd"])):G("",!0),e.chainName=="Sui"?(L(),We(ie,{key:4,"pool-info":e.poolInfo,"is-active":!e.showFromCoinLock&&!e.showToCoinLock,"is-auto-stake-farming":e.isAutoStakeFarming,onSendFarmsPoolInfo:e.getFarmsPoolInfo},null,8,["pool-info","is-active","is-auto-stake-farming","onSendFarmsPoolInfo"])):G("",!0)])}const Jt=it(Ha,[["render",Ja]]),Qa=tt({components:{NewLiquidityLeft:Kt,NewLiquidityRight:Jt},setup(){zt(()=>{pi()});const e=Pt(),s=dt();return T(()=>s),{tickList:Ve,route:e}}});const Ya={key:0,class:"loading-spin-liquidity loading-global"},Va={class:"privide-liquidity"};function en(e,s,ue,Q,q,te){var Y,a;const z=Ut,R=Kt,A=Jt;return L(),D(kt,null,[!e.tickList&&((a=(Y=e.route)==null?void 0:Y.query)!=null&&a.poolAddress)?(L(),D("div",Ya,[ze(z)])):G("",!0),o("div",Va,[ze(R),ze(A)])],64)}const Fn=it(Qa,[["render",en],["__scopeId","data-v-1b76f12f"]]);export{Fn as default};
