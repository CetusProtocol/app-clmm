import{m as yo,e as wo,s as q,a as U,o as Vo,u as ho,d as ro,q as Ro,c as oo,k as Ao}from"./pool.266f8bfb.js";import{a as G,l as r,r as F,e as J,o as e,f as t,h as s,i as w,v as m,u as g,c as j,w as R,S as Wo,B as $o,j as T,p as to,k as ao,q as go,z as _o,s as ko,t as io,x as N,b as Po,A as fo,F as H,E as eo,P as ms,N as Ho,M as Fo,H as zo,Q as ps}from"./entry.ad49fe05.js";/* empty css              */import{a as lo,u as Io}from"./sha256.0e82021f.js";import{u as co}from"./farms.f84ed763.js";import{_ as Qo}from"./apr-tips.001b2464.js";import{i as Lo}from"./import-icon.de3e6c66.js";/* empty css              *//* empty css              */import{_ as Go}from"./img-connect-wallet_2x.3ff9229c.js";import{_ as Jo}from"./img-no-Positions_2x.21a89445.js";import{_ as _s}from"./upgrade-loading.d71ba96d.js";import{p as fs}from"./precision.9d58cda5.js";import"./decimal.0bdeb344.js";import"./icon_rewards_2x.3be59c56.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const hs=G({setup(){const o=lo(),i=r(()=>o),p=co(),u=r(()=>p),_=r(()=>Object.values(u.value.farmsRewardObj)),l=r(()=>_.value.reduce(function(X,D){const O=D&&D.amountUsd?D.amountUsd:0;return Number(O)>.01?Vo(Number(X)).plus(q(Number(O),2)).toString():Vo(Number(X)).plus(Number(O)).toString()},0)),a=r(()=>u.value.farmsPositionList),d=r(()=>u.value.farmsAllPositionLoading),v=r(()=>u.value.farmsPoolListLoading),$=Io(),f=yo("Sui"),h=wo("Sui"),{setIsShowSuccess:k,setIsShowRejected:C,setIsShowWaiting:n,setTransactionDesc:E,setTransactionTxid:S}=$,P=F(!1);return{farmsPoolListLoading:v,wallet:i,farms:u,totalRwadrdUsd:l,sFixD:q,claimAllPoolReward:async Z=>{P.value=!0;const X=[];a.value.forEach(D=>{D.positionSource=="farming"&&X.push({pool_id:D.pool_id,position_nft_id:D.id})}),S(""),E("Claim Rewards"),n(!0);try{const D=await f.batchHarvest(X),O=await i.value.currentWallet.signAndExecuteTransactionBlock(D);let A=h.handleTx(O);if(A&&A.hash){S(A.hash),n(!1),k(!0);let z={res:A.res,title:"Claim",hash:A.hash};h.showTransitionPending(z),await h.watchTransaction(z)&&setTimeout(()=>{p.getFarmsPoolList()},4e3)}else n(!1),C(!0);P.value=!1}catch{n(!1),C(!0),P.value=!1}},loading:P,addCommom:U,farmsAllPositionLoading:d}}});const Ko=o=>(to("data-v-d521a357"),o=o(),ao(),o),vs={class:"farms-banner-bg"},gs={class:"farms-banner"},$s={class:"farms-banner-center"},bs=Ko(()=>s("div",{class:"title"},"Farms",-1)),ys=Ko(()=>s("div",{class:"desc"},"Stake your positions to earn higher yield.",-1)),ws={class:"claim-rewards"},ks={class:"claim-title"},Is={key:0,class:"loading-spin"},Ss={key:1},Ps={key:2},Ls={class:"claim-content"};function Cs(o,i,p,u,_,l){const a=Wo,d=$o;return e(),t("div",vs,[s("div",gs,[s("div",$s,[bs,ys,s("div",ws,[s("div",ks,[o.farmsAllPositionLoading||o.farmsPoolListLoading?(e(),t("span",Is,[w(a)])):o.wallet.address?(e(),t("span",Ss,m(Number(o.totalRwadrdUsd)>0&&Number(o.totalRwadrdUsd)<.01?"<$0.01":`$${("addCommom"in o?o.addCommom:g(U))(("sFixD"in o?o.sFixD:g(q))(o.totalRwadrdUsd||0,2))}`),1)):(e(),t("span",Ps,"--"))]),s("div",Ls,[o.wallet.address?(e(),j(d,{key:0,class:"claim-btn",loading:o.loading,disabled:Number(o.totalRwadrdUsd)==0||o.farmsAllPositionLoading,onClick:o.claimAllPoolReward},{default:R(()=>[T(" Claim All Rewards ")]),_:1},8,["loading","disabled","onClick"])):(e(),j(d,{key:1,class:"claim-btn",onClick:i[0]||(i[0]=v=>o.wallet.setIsShowWalletModal(!0))},{default:R(()=>[T("Connect")]),_:1}))])])])])])}const Xo=J(hs,[["render",Cs],["__scopeId","data-v-d521a357"]]),Us=G({props:{poolInfo:{type:Object,default:()=>({})},usePropsDirect:{type:Boolean,require:!1,default:!1},propDirect:{type:Boolean,require:!1,default:!1}},setup(o,i){const p=F(!0),u=F(o.usePropsDirect),_=F(o.propDirect);return go(()=>o.propDirect,a=>{_.value=a},{immediate:!0}),{sFixD:q,direct:p,isUsepropsDirect:u,propsDirect:_,clickChange:()=>{p.value=!p.value,u.value&&i.emit("clickChange")}}}}),Yo=""+globalThis.__publicAssetsURL("sui-image/range.png");const Co=o=>(to("data-v-1fbaf879"),o=o(),ao(),o),Ts={class:"range"},js={key:0},Os={class:"num"},As=Co(()=>s("img",{src:Yo,alt:""},null,-1)),Rs={class:"num"},Fs={class:"per"},Ds={key:1},Bs={class:"num"},Ns=Co(()=>s("img",{src:Yo,alt:""},null,-1)),Es={class:"num"},Ms={class:"per"},qs=Co(()=>s("div",null,[s("svg",{class:"icon icon-up","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Vs=Co(()=>s("div",null,[s("svg",{class:"icon icon-down","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Ws=[qs,Vs];function Hs(o,i,p,u,_,l){var a,d,v,$;return e(),t("div",Ts,[(o.isUsepropsDirect?o.propsDirect:o.direct)?(e(),t("p",js,[s("span",Os,m(("sFixD"in o?o.sFixD:g(q))(o.poolInfo.minPrice,6))+" ",1),As,s("span",Rs," "+m(("sFixD"in o?o.sFixD:g(q))(o.poolInfo.maxPrice,6))+" ",1),s("span",Fs,m((a=o.poolInfo.coinB)==null?void 0:a.symbol)+" per "+m((d=o.poolInfo.coinA)==null?void 0:d.symbol),1)])):(e(),t("p",Ds,[s("span",Bs,m(o.poolInfo.maxPrice!=="∞"?("sFixD"in o?o.sFixD:g(q))(1/o.poolInfo.maxPrice,6):"0")+" ",1),Ns,s("span",Es," "+m(o.poolInfo.minPrice!=="0"?("sFixD"in o?o.sFixD:g(q))(1/o.poolInfo.minPrice,6):"∞")+" ",1),s("span",Ms,m((v=o.poolInfo.coinA)==null?void 0:v.symbol)+" per "+m(($=o.poolInfo.coinB)==null?void 0:$.symbol),1)])),s("div",{class:"icon-change",onClick:i[0]||(i[0]=_o(()=>o.clickChange(),["stop"]))},Ws)])}const Do=J(Us,[["render",Hs],["__scopeId","data-v-1fbaf879"]]),zs=G({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=F(!0);return{sFixD:q,direct:o}}});const Qs=o=>(to("data-v-14f67ada"),o=o(),ao(),o),Gs={class:"valid-range"},Js=Qs(()=>s("div",{class:"title"},"Valid Range",-1));function Ks(o,i,p,u,_,l){const a=Do;return e(),t("div",Gs,[Js,w(a,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const Xs=J(zs,[["render",Ks],["__scopeId","data-v-14f67ada"]]),Ys=G({props:{poolInfo:{type:Object,default:()=>({})}},setup(){return{}}});const Zs={class:"pool"},xs={class:"pool-info"},on={class:"token-logo"},sn={alt:""},nn={alt:""},en={class:"token-symbol"},tn={class:"symbol"},an={class:"fee-rate"};function ln(o,i,p,u,_,l){var v,$,f,h;const a=Xs,d=ko("image");return e(),t("div",Zs,[s("div",xs,[s("div",on,[io(s("img",sn,null,512),[[d,(v=o.poolInfo.coinA)==null?void 0:v.logo_url]]),io(s("img",nn,null,512),[[d,($=o.poolInfo.coinB)==null?void 0:$.logo_url]])]),s("div",en,[s("div",tn,m((f=o.poolInfo.coinA)==null?void 0:f.symbol)+" - "+m((h=o.poolInfo.coinB)==null?void 0:h.symbol),1),s("div",an,m(o.poolInfo.fee),1)])]),w(a,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const Zo=J(Ys,[["render",ln],["__scopeId","data-v-c027f63c"]]),rn=G({props:{currentTab:{type:String,default:""},rewardInfo:{type:Object,default:()=>({})}},setup(){const o=ho(),i=r(()=>o);return{sFixD:q,addCommom:U,getCoinIcon:u=>{var _;return((_=i.value.tokensObj[u])==null?void 0:_.logo_url)||Lo("/image/coins/sui-unknown.png")}}}});const dn={key:0,class:"rewards-day"},cn={class:"rewards-day-box"},un={alt:""};function mn(o,i,p,u,_,l){const a=ko("image");return o.rewardInfo.allocate_point>0||o.currentTab!=="Live"?(e(),t("div",dn,[s("div",null,[s("div",cn,[io(s("img",un,null,512),[[a,o.getCoinIcon(o.rewardInfo.reward_coin)]]),s("span",null,m(("addCommom"in o?o.addCommom:g(U))(("sFixD"in o?o.sFixD:g(q))(o.rewardInfo.emission_per_day,4)))+" "+m(o.rewardInfo.symbol),1)])])])):N("",!0)}const xo=J(rn,[["render",mn],["__scopeId","data-v-48e4e83a"]]),pn=G({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const i=ho(),p=r(()=>i);return{addCommom:U,decimalUi:ro,fixD:Ro,getCoinIcon:_=>{var l;return((l=p.value.tokensObj[_])==null?void 0:l.logo_url)||Lo("/image/coins/sui-unknown.png")}}}});const _n={class:"hover-rewarder"},fn={class:"rewarder-info"},hn={class:"left-rewarder"},vn={alt:""},gn={class:"right-rewarder"},$n={class:"amount"},bn={key:0,class:"amount-usd"},yn={key:1,class:"amount-usd"},wn={class:"rewarder-info"},kn={class:"left-rewarder"},In={alt:""},Sn={class:"right-rewarder"},Pn={class:"amount"},Ln={key:0,class:"amount-usd"},Cn={key:1,class:"amount-usd"};function Un(o,i,p,u,_,l){const a=ko("image");return e(),t("div",_n,[s("div",fn,[s("div",hn,[io(s("img",vn,null,512),[[a,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinB.address:o.positionInfo.coinA.address)]]),s("span",null,m(o.positionInfo.needReverse?o.positionInfo.coinB.symbol:o.positionInfo.coinA.symbol),1)]),s("div",gn,[s("div",$n,m(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:g(U))(("decimalUi"in o?o.decimalUi:g(ro))(o.positionInfo.amountB,o.positionInfo.coinB.decimals)):("addCommom"in o?o.addCommom:g(U))(("decimalUi"in o?o.decimalUi:g(ro))(o.positionInfo.amountA,o.positionInfo.coinA.decimals))),1),o.positionInfo.needReverse?(e(),t("div",yn,m(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("fixD"in o?o.fixD:g(Ro))(o.positionInfo.amountBUsd,2):"<$0.01"),1)):(e(),t("div",bn,m(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("fixD"in o?o.fixD:g(Ro))(o.positionInfo.amountAUsd,2):"<$0.01"),1))])]),s("div",wn,[s("div",kn,[io(s("img",In,null,512),[[a,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinA.address:o.positionInfo.coinB.address)]]),s("span",null,m(o.positionInfo.needReverse?o.positionInfo.coinA.symbol:o.positionInfo.coinB.symbol),1)]),s("div",Sn,[s("div",Pn,m(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:g(U))(("decimalUi"in o?o.decimalUi:g(ro))(o.positionInfo.amountA,o.positionInfo.coinA.decimals)):("addCommom"in o?o.addCommom:g(U))(("decimalUi"in o?o.decimalUi:g(ro))(o.positionInfo.amountB,o.positionInfo.coinB.decimals))),1),o.positionInfo.needReverse?(e(),t("div",Cn,m(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("addCommom"in o?o.addCommom:g(U))(("decimalUi"in o?o.decimalUi:g(ro))(o.positionInfo.amountAUsd,2)):"<$0.01"),1)):(e(),t("div",Ln,m(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("addCommom"in o?o.addCommom:g(U))(("decimalUi"in o?o.decimalUi:g(ro))(o.positionInfo.amountBUsd,2)):"<$0.01"),1))])])])}const os=J(pn,[["render",Un],["__scopeId","data-v-0ca1f131"]]),Tn=G({components:{FarmsPositionAmountTips:os},props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const i=lo(),p=r(()=>i),u=co(),_=r(()=>u),l=wo("Sui"),a=yo("Sui"),d=F(!1),v=Io();r(()=>v);const $=Po(),{setIsShowSuccess:f,setIsShowRejected:h,setIsShowWaiting:k,setTransactionDesc:C,setTransactionTxid:n}=v,E=async()=>{d.value=!0,n(""),C(`Stake ${o.positionInfo.name}`),k(!0);const y={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},I=O.value[o.positionInfo.clmmPool||o.positionInfo.poolAddress].id;try{const M=await a.farmsDeposit(y,I),Q=await p.value.currentWallet.signAndExecuteTransactionBlock(M);u.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let V=l.handleTx(Q);if(V&&V.hash){n(V.hash),k(!1),f(!0);let no={res:V.res,title:"Staked",hash:V.hash};l.showTransitionPending(no),await l.watchTransaction(no)&&setTimeout(()=>{u.getPositionByPool(p.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else k(!1),h(!0)}catch{k(!1),h(!0),d.value=!1}},S=async()=>{d.value=!0,n(""),C(`Unstake ${o.positionInfo.name}`),k(!0);const y=O.value[o.positionInfo.clmmPool].id,I=o.positionInfo.id;try{const M=await a.farmsWithdraw(y,I),Q=await p.value.currentWallet.signAndExecuteTransactionBlock(M);u.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let V=l.handleTx(Q);if(V&&V.hash){n(V.hash),k(!1),f(!0);let no={res:V.res,title:"Unstaked",hash:V.hash};l.showTransitionPending(no),await l.watchTransaction(no)&&setTimeout(()=>{u.getPositionByPool(p.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else k(!1),h(!0)}catch{k(!1),h(!0),d.value=!1}},P=async()=>{d.value=!0,n(""),C("Claim rewards"),k(!0);const y={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const I=await a.harvestFarms(y),M=await p.value.currentWallet.signAndExecuteTransactionBlock(I);u.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let Q=l.handleTx(M);if(Q&&Q.hash){n(Q.hash),k(!1),f(!0);let V={title:"Claim",res:Q.res,hash:Q.hash};l.showTransitionPending(V),await l.watchTransaction(V)&&setTimeout(()=>{u.getPositionByPool(p.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else k(!1),h(!0);d.value=!1}catch{k(!1),h(!0),d.value=!1}},W=r(()=>_.value.farmsRewardObj),Z=ho(),X=r(()=>Z),D=r(()=>_.value.farmsLoadingObj),O=r(()=>_.value.farmsPoolObj);return{sFixD:q,stake:E,loading:d,unStake:S,router:$,claim:P,farmsRewardObj:W,getCoinIcon:y=>{var I;return((I=X.value.tokensObj[y])==null?void 0:I.logo_url)||Lo("/image/coins/sui-unknown.png")},toPositionDetails:y=>{y.positionSource=="clmm"?$.push(`/new-position-detail?collect=${y.collectionName}&token=${y.name}&address=${y.pool}&pos=${y.pos_object_id}`):$.push(`/new-position-detail?position_nft_id=${y.id}&positionSource=farming`)},farmsLoadingObj:D,addCommom:U}}}),ss=""+globalThis.__publicAssetsURL("sui-image/position-active.png");const Uo=o=>(to("data-v-bedebc46"),o=o(),ao(),o),jn={class:"farms-position-item"},On=Uo(()=>s("thead",null,[s("tr",null,[s("th",null,"Position"),s("th",null,"Liquidity"),s("th",null,"Earnings"),s("th")])],-1)),An={class:"position-info"},Rn={key:0,class:"status-bg"},Fn=Uo(()=>s("img",{src:ss,alt:""},null,-1)),Dn=[Fn],Bn={class:"status-text"},Nn={class:"name-range"},En=Uo(()=>s("span",null,"Details",-1)),Mn=Uo(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),qn=[En,Mn],Vn={class:"liquidity"},Wn={class:"rewards-day-box"},Hn={alt:""},zn={key:1,class:"rewards-day"},Qn={class:"action-btn"};function Gn(o,i,p,u,_,l){const a=Do,d=os,v=$o,$=ms,f=ko("image");return e(),t("div",jn,[s("table",null,[On,s("tbody",null,[s("tr",null,[s("td",null,[s("div",An,[s("div",{class:fo(["position-status",o.positionInfo.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionInfo.positionStatus=="Active"?(e(),t("div",Rn,Dn)):N("",!0),s("div",Bn,m(o.positionInfo.positionStatus),1)],2),s("div",Nn,[s("span",null,m(o.positionInfo.name),1),w(a,{"pool-info":o.positionInfo},null,8,["pool-info"])]),s("div",{class:"details",onClick:i[0]||(i[0]=h=>o.toPositionDetails(o.positionInfo))},qn)])]),s("td",null,[s("div",Vn,[s("span",null,[T(m(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("addCommom"in o?o.addCommom:g(U))(("sFixD"in o?o.sFixD:g(q))(o.positionInfo.positionUSD,2))}`)+" ",1),w(d,{"position-info":o.positionInfo},null,8,["position-info"])])])]),s("td",null,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(e(!0),t(H,{key:0},eo(o.positionInfo.rewards,h=>(e(),t("div",{key:h.rewarder_type,class:"rewards-day"},[s("div",null,[s("div",Wn,[io(s("img",Hn,null,512),[[f,o.getCoinIcon(h.rewarder_type)]]),s("span",null,m(h.rewarderAmount),1)])])]))),128)):(e(),t("div",zn,"0"))]),s("td",null,[s("div",Qn,[o.positionInfo.positionSource=="clmm"?(e(),t(H,{key:0},[o.positionInfo&&o.positionInfo.positionStatus!=="Active"?(e(),j($,{key:0},{title:R(()=>[T("Farming rewards are only available for active positions.")]),default:R(()=>[w(v,{class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:R(()=>[T("Stake")]),_:1},8,["loading","disabled","onClick"])]),_:1})):(e(),j(v,{key:1,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:R(()=>[T("Stake")]),_:1},8,["loading","disabled","onClick"]))],64)):(e(),j(v,{key:1,class:"unstake-btn",onClick:o.unStake},{default:R(()=>[T("Unstake")]),_:1},8,["onClick"])),o.positionInfo.positionSource=="clmm"?(e(),j(v,{key:2,class:"claim-btn",disabled:!0},{default:R(()=>[T("↑ Claim")]),_:1})):(e(),j(v,{key:3,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0,onClick:o.claim},{default:R(()=>[T("↑ Claim")]),_:1},8,["disabled","onClick"]))])])])])])])}const ns=J(Tn,[["render",Gn],["__scopeId","data-v-bedebc46"]]),Jn=G({props:{noDataImg:{type:String,default:""},desc:{type:String,default:""},type:{type:String,default:""},addLiquidityUrl:{type:String,default:""}},setup(){return{walletStore:lo()}}});const Kn={class:"no-data"},Xn=["src"],Yn={key:0,class:"desc"};function Zn(o,i,p,u,_,l){const a=$o;return e(),t("div",Kn,[s("img",{src:o.noDataImg,alt:""},null,8,Xn),o.desc?(e(),t("div",Yn,m(o.desc),1)):N("",!0),o.type=="addLiquidity"?(e(),j(a,{key:1,class:"add-liquidity-btn",onClick:i[0]||(i[0]=d=>o.addLiquidityUrl?o.$router.push(o.addLiquidityUrl):"")},{default:R(()=>[T("Add Liquidity")]),_:1})):N("",!0),o.type=="connectWallet"?(e(),j(a,{key:2,class:"add-liquidity-btn",onClick:i[1]||(i[1]=d=>o.walletStore.setIsShowWalletModal(!0))},{default:R(()=>[T("Connect Wallet")]),_:1})):N("",!0)])}const es=J(Jn,[["render",Zn],["__scopeId","data-v-130f9462"]]),xn=G({components:{FarmsPositionItem:ns},props:{currentTab:{type:String,default:""},sortValue:{type:String,default:"APR"}},setup(o){const i=F({}),p=lo(),u=r(()=>p),_=co(),l=r(()=>_),a=r(()=>l.value.farmsPoolList),d=r(()=>l.value.farmsPoolList),v=Io(),$=r(()=>v),f=r(()=>$.value.addressLpTokens),h=F([]),k=r(()=>l.value.myFarmsPoolList),C=K=>{let Y,x;o.currentTab=="My Farms"&&(Y=u.value.address?k.value:[]),o.currentTab=="Ended"&&(Y=l.value.farmsPoolList.filter(c=>c.status=="Ended")),o.currentTab=="Live"&&(Y=l.value.farmsPoolList.filter(c=>c.status=="Live")),K=="APR"?x=Y.sort((c,b)=>b.stable_farming.apr-c.stable_farming.apr):x=Y.sort((c,b)=>b.stable_farming.tvl-c.stable_farming.tvl),h.value=x.map(c=>{var b;return{...c,needReverse:c.is_forward===!1,coinA:c.coin_a,coinB:c.coin_b,liquidity:c.tvl_in_usd,vol:c.vol_in_usd_24h,stableFarmingApr:c.stable_farming&&c.stable_farming.apr*100,apr:c.apr_24h.replace("%",""),is_display_rewarder:(b=c==null?void 0:c.rewarder)==null?void 0:b.is_display_rewarder}})};go(()=>[d.value,o.sortValue,o.currentTab,k.value],([K,Y])=>{K&&K.length>0&&Y&&C(Y)},{immediate:!0});const n=K=>{if(i.value[K.clmm_pool_id])i.value[K.clmm_pool_id]=!1;else{if(i.value[K.clmm_pool_id]=!0,!u.value.address)return!1;_.getPositionByPool(u.value.address,K.clmm_pool_id,K.id)}},E=r(()=>l.value.farmsPositionObj),S=r(()=>l.value.farmsLoadingObj),P=r(()=>l.value.farmsUserUsd),W=r(()=>l.value.farmsRewardObj),Z=r(()=>l.value.farmsPositionList),X=r(()=>l.value.farmsAllPositionLoading),D=Po(),O=yo("Sui"),A=wo("Sui"),{setIsShowSuccess:z,setIsShowRejected:y,setIsShowWaiting:I,setTransactionDesc:M,setTransactionTxid:Q}=v,V=async K=>{const Y=[];Z.value.forEach(x=>{K==x.clmm_pool_id&&Y.push({pool_id:x.pool_id,position_nft_id:x.id})}),Q(""),M("Claim rewards"),I(!0);try{const x=await O.batchHarvest(Y),c=await u.value.currentWallet.signAndExecuteTransactionBlock(x);let b=A.handleTx(c);if(b&&b.hash){Q(b.hash),I(!1),z(!0);let L={res:b.res,title:"Claim",hash:b.hash};A.showTransitionPending(L),await A.watchTransaction(L)&&setTimeout(()=>{_.getFarmsPoolList()},4e3)}else I(!1),y(!0)}catch{I(!1),y(!0)}},no=ho(),mo=r(()=>no),To=r(()=>mo.value.poolsObj);r(()=>mo.value.tokensObj);const jo=F({}),vo=r(()=>l.value.farmsPoolObj);return{wallet:u,walletStore:p,farmsPoolList:a,openMore:n,openMoreObj:i,checkNullObj:oo,router:D,farmsPositionObj:E,farmsLoadingObj:S,farmsUserUsd:P,sFixD:q,farmsRewardObj:W,claimPoolReward:V,farmsAllPositionLoading:X,addCommom:U,addressLpTokens:f,poolsObj:To,rewardInfoObj:jo,pageList:h,farmsPoolObj:vo}}});const uo=o=>(to("data-v-8bda247e"),o=o(),ao(),o),oe={class:"farms-table"},se=uo(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")]),s("tr",{style:{height:"4px"}})],-1)),ne={key:0},ee=["onClick"],te={class:"staked-tvl"},ae={class:"apr"},ie={key:0,class:"apr-hover-box"},le={class:"farms-reward-box"},re={key:0,class:"my-staked"},de={key:0,class:"my-staked-loading"},ce={key:0,class:"position-usd"},ue={key:1,class:"position-usd"},me={key:2,class:"position-usd"},pe={key:3,class:"position-num"},_e={key:1,class:"my-staked"},fe=uo(()=>s("div",{class:"position-usd"},"--",-1)),he=[fe],ve={class:"earned"},ge={key:0,class:"my-staked-loading"},$e={key:0,class:"ratio-bg"},be=uo(()=>s("div",{class:"ratio"},null,-1)),ye=[be],we={key:1},ke={key:2},Ie={key:3},Se={key:2},Pe={class:"actions"},Le={class:"actions-btn"},Ce=["onClick"],Ue=uo(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Te=[Ue],je={colspan:"7",style:{padding:"0 16px 16px"}},Oe={key:0,class:"farm-position-list"},Ae={key:0,class:"farm-position-loading"},Re={key:1,class:"farm-position-list"},Fe=uo(()=>s("tr",{style:{height:"8px"}},null,-1)),De={key:1},Be={colspan:"7"},Ne={key:0,class:"no-data"},Ee=uo(()=>s("img",{src:Go,alt:""},null,-1)),Me={key:1,class:"no-data"},qe=uo(()=>s("img",{src:Jo,alt:""},null,-1)),Ve=uo(()=>s("span",null,"No farms found",-1)),We=[qe,Ve];function He(o,i,p,u,_,l){const a=Zo,d=Qo,v=xo,$=Fo,f=$o,h=Wo,k=ns,C=es;return e(),t("div",oe,[s("table",null,[se,o.pageList&&o.pageList.length>0?(e(),t("tbody",ne,[(e(!0),t(H,null,eo(o.pageList,n=>{var E;return e(),t(H,{key:n.id},[s("tr",{onClick:S=>o.openMore(n)},[s("td",null,[w(a,{"pool-info":n},null,8,["pool-info"])]),s("td",null,[s("div",te," $"+m(("addCommom"in o?o.addCommom:g(U))(n.stable_farming.tvl,2)),1)]),s("td",null,[s("div",ae,[n.isStableFarming||n.rewarderInfo&&n.rewarderInfo.length>0||(E=n==null?void 0:n.stable_farming)!=null&&E.stable_farming_pool?(e(),t("div",ie,[w(d,{"l-item":n,"rewarder-info":n.rewarder.rewardList,class:"noHover apr-hover-con"},null,8,["l-item","rewarder-info"])])):N("",!0),s("span",null,m((n==null?void 0:n.total_apr)>0&&n.total_apr<1e-4?"<0.01%":`${("addCommom"in o?o.addCommom:g(U))(n.total_apr*100,2)}%`),1)])]),s("td",null,[s("div",le,[(e(!0),t(H,null,eo(n.rewarders,S=>(e(),j(v,{key:S.reward_coin,"reward-info":S,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("td",null,[o.wallet.address?(e(),t("div",re,[o.farmsLoadingObj[n.clmm_pool_id]||o.farmsAllPositionLoading?(e(),t("div",de,[w($,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):(e(),t(H,{key:1},[o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].amount>0&&o.farmsUserUsd[n.clmm_pool_id].amount>.01?(e(),t("div",ce,m(Number(o.farmsUserUsd[n.clmm_pool_id].amount)>0&&Number(o.farmsUserUsd[n.clmm_pool_id].amount)<.01?"<$0.01":"$"+("addCommom"in o?o.addCommom:g(U))(o.farmsUserUsd[n.clmm_pool_id].amount,2)),1)):o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].amount>0&&o.farmsUserUsd[n.clmm_pool_id].amount<.01?(e(),t("div",ue," <$0.01 ")):(e(),t("div",me,"0")),o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].positionNum?(e(),t("div",pe,m(o.farmsUserUsd[n.clmm_pool_id].positionNum)+" "+m(o.farmsUserUsd[n.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):N("",!0)],64))])):(e(),t("div",_e,he))]),s("td",null,[s("div",ve,[o.farmsLoadingObj[n.clmm_pool_id]||o.farmsAllPositionLoading?(e(),t("div",ge,[w($,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[n.clmm_pool_id]&&o.farmsRewardObj[n.clmm_pool_id].amountUsd?(e(),t(H,{key:1},[o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[n.clmm_pool_id]&&o.farmsRewardObj[n.clmm_pool_id].amountUsd>0?(e(),t("div",$e,ye)):N("",!0),Number(o.farmsRewardObj[n.clmm_pool_id].amountUsd)>.01?(e(),t("span",we,"$"+m(("addCommom"in o?o.addCommom:g(U))(("sFixD"in o?o.sFixD:g(q))(o.farmsRewardObj[n.clmm_pool_id].amountUsd||0,2))),1)):Number(o.farmsRewardObj[n.clmm_pool_id].amountUsd)>0&&Number(o.farmsRewardObj[n.clmm_pool_id].amountUsd)<.01?(e(),t("span",ke,"<$0.01")):(e(),t("span",Ie,"0"))],64)):(e(),t("span",Se,"0"))])]),s("td",null,[s("div",Pe,[s("div",Le,[w(f,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[n.clmm_pool_id]||!o.farmsRewardObj[n.clmm_pool_id].amountUsd||o.farmsRewardObj[n.clmm_pool_id].amountUsd<=0||o.farmsLoadingObj[n.clmm_pool_id],onClick:_o(S=>o.claimPoolReward(n.clmm_pool_id),["stop"])},{default:R(()=>[T("Claim")]),_:2},1032,["disabled","onClick"]),w(f,{class:"add-liquidity-btn",onClick:_o(S=>o.router.push(`/liquidity/deposit?poolAddress=${n.clmm_pool_id}`),["stop"])},{default:R(()=>[T("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more",onClick:_o(S=>o.openMore(n),["stop"])},[(e(),t("svg",{class:fo(["arrow-icon",o.openMoreObj[n.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},Te,2))],8,Ce)])])],8,ee),io(s("tr",null,[s("td",je,[o.wallet.address?(e(),t("div",Oe,[!("checkNullObj"in o?o.checkNullObj:g(oo))(o.farmsLoadingObj)&&o.farmsLoadingObj[n.clmm_pool_id]||o.farmsAllPositionLoading?(e(),t("div",Ae,[w(h)])):o.farmsPositionObj[n.clmm_pool_id]&&o.farmsPositionObj[n.clmm_pool_id].length>0?(e(!0),t(H,{key:1},eo(o.farmsPositionObj[n.clmm_pool_id],S=>(e(),j(k,{key:S.clmm_position_id,"current-tab":o.currentTab,"position-info":{...S,clmm_pool_id:n.clmm_pool_id}},null,8,["current-tab","position-info"]))),128)):(e(),j(C,{key:2,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${n.clmm_pool_id}`},null,8,["add-liquidity-url"]))])):(e(),t("div",Re,[w(C,{"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"})]))])],512),[[Ho,!("checkNullObj"in o?o.checkNullObj:g(oo))(o.openMoreObj)&&o.openMoreObj[n==null?void 0:n.clmm_pool_id]]]),Fe],64)}),128))])):(e(),t("tbody",De,[s("tr",null,[s("td",Be,[!o.wallet.connected&&o.currentTab=="My Farms"?(e(),t("div",Ne,[Ee,w(f,{class:"connect-wallet",onClick:i[0]||(i[0]=n=>o.wallet.setIsShowWalletModal(!0))},{default:R(()=>[T(m(o.$t("button.connectWallet")),1)]),_:1})])):o.pageList.length==0?(e(),t("div",Me,We)):N("",!0)])])]))])])}const ts=J(xn,[["render",He],["__scopeId","data-v-8bda247e"]]),ze=G({props:{currentTab:{type:String,default:""}},setup(){const o=F(!1),i=lo(),p=r(()=>i),u=co(),_=r(()=>u),l=r(()=>_.value.farmsPoolList);return{isShowMore:o,wallet:p,walletStore:i,farmsPoolList:l}}});const as=o=>(to("data-v-f521ea67"),o=o(),ao(),o),Qe={class:"farms-table"},Ge=as(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")]),s("tr",{style:{height:"4px",background:"unset"}})],-1)),Je={class:"pool"},Ke={class:"staked-tvl"},Xe={class:"apr"},Ye={class:"my-staked"},Ze={class:"actions"},xe={class:"actions"},ot={class:"actions"},st=as(()=>s("tr",{style:{height:"8px",background:"unset !important"}},null,-1));function nt(o,i,p,u,_,l){const a=Fo;return e(),t("div",Qe,[s("table",null,[Ge,s("tbody",null,[(e(),t(H,null,eo(4,(d,v)=>(e(),t(H,{key:v},[s("tr",null,[s("td",null,[s("div",Je,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Ke,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Xe,[s("span",null,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),s("td",null,[s("div",Ye,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Ze,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",xe,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",ot,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),st],64))),64))])])])}const et=J(ze,[["render",nt],["__scopeId","data-v-f521ea67"]]),tt=G({props:{positionStatus:{type:String,default:"Active"},positionInfo:{type:Object,default:()=>({})}},setup(){return{}}});const at=o=>(to("data-v-882c76c0"),o=o(),ao(),o),it={class:"position-info"},lt={key:0,class:"status-bg"},rt=at(()=>s("img",{src:ss,alt:""},null,-1)),dt=[rt],ct={class:"status-text"},ut={class:"name-range"};function mt(o,i,p,u,_,l){const a=Do;return e(),t("div",it,[s("div",{class:fo(["position-status",o.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionStatus=="Active"?(e(),t("div",lt,dt)):N("",!0),s("div",ct,m(o.positionStatus),1)],2),s("div",ut,[s("span",null,m(o.positionInfo.name),1),o.positionStatus=="Active"?(e(),j(a,{key:0,"pool-info":o.positionInfo},null,8,["pool-info"])):N("",!0)])])}const pt=J(tt,[["render",mt],["__scopeId","data-v-882c76c0"]]),_t=G({props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const i=ho(),p=r(()=>i),u=Po(),_=O=>{var A;return((A=p.value.tokensObj[O])==null?void 0:A.logo_url)||Lo("/image/coins/sui-unknown.png")},l=wo("Sui"),a=yo("Sui"),d=F(!1),v=Io(),$=lo(),f=co(),h=r(()=>$),{setIsShowSuccess:k,setIsShowRejected:C,setIsShowWaiting:n,setTransactionDesc:E,setTransactionTxid:S}=v,P=async()=>{d.value=!0,S(""),E("Claim rewards"),n(!0);const O={pool_id:D.value[o.positionInfo.clmmPool].id,position_nft_id:o.positionInfo.id};try{const A=await a.harvestFarms(O),z=await h.value.currentWallet.signAndExecuteTransactionBlock(A);f.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let y=l.handleTx(z);if(y&&y.hash){S(y.hash),n(!1),k(!0);let I={title:"Claim",res:y.res,hash:y.hash};l.showTransitionPending(I),await l.watchTransaction(I)&&setTimeout(()=>{f.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else n(!1),C(!0);d.value=!1}catch{n(!1),C(!0),d.value=!1}},W=async()=>{d.value=!0,S(""),E(`Unstake ${o.positionInfo.name}`),n(!0);const O=D.value[o.positionInfo.clmmPool].id,A=o.positionInfo.id;try{const z=await a.farmsWithdraw(O,A),y=await h.value.currentWallet.signAndExecuteTransactionBlock(z);f.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let I=l.handleTx(y);if(I&&I.hash){S(I.hash),n(!1),k(!0);let M={res:I.res,title:"Unstaked",hash:I.hash};l.showTransitionPending(M),await l.watchTransaction(M)&&setTimeout(()=>{f.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else n(!1),C(!0)}catch{n(!1),C(!0),d.value=!1}},Z=async()=>{d.value=!0,S(""),E(`Stake ${o.positionInfo.name}`),n(!0);const O={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},A=D.value[o.positionInfo.clmmPool].id;try{const z=await a.farmsDeposit(O,A),y=await h.value.currentWallet.signAndExecuteTransactionBlock(z);f.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let I=l.handleTx(y);if(I&&I.hash){S(I.hash),n(!1),k(!0);let M={res:I.res,title:"Staked",hash:I.hash};l.showTransitionPending(M),await l.watchTransaction(M)&&setTimeout(()=>{f.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else n(!1),C(!0)}catch{n(!1),C(!0),d.value=!1}},X=r(()=>f),D=r(()=>X.value.farmsPoolObj);return{getCoinIcon:_,router:u,claim:P,unStake:W,loading:d,stake:Z,sFixD:q,addCommom:U}}});const is=o=>(to("data-v-d5540146"),o=o(),ao(),o),ft={class:"farms-position"},ht={class:"farms-position-box"},vt={class:"position-info-block"},gt={class:"block-item"},$t=is(()=>s("div",{class:"leabl"},"Liquidity",-1)),bt={class:"text"},yt={class:"earnings"},wt={class:"block-item"},kt=is(()=>s("div",{class:"leabl"},"Earnings",-1)),It={class:"text"},St={key:0},Pt={alt:""},Lt={key:1,class:"rewards-day"},Ct={class:"unstake-btn-box"};function Ut(o,i,p,u,_,l){const a=pt,d=$o,v=ko("image");return e(),t("div",ft,[s("div",ht,[w(a,{"position-info":o.positionInfo},null,8,["position-info"])]),s("div",vt,[s("div",gt,[$t,s("div",bt,m(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("addCommom"in o?o.addCommom:g(U))(("sFixD"in o?o.sFixD:g(q))(o.positionInfo.positionUSD,2))}`),1)])]),s("div",yt,[s("div",wt,[kt,s("div",It,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(e(!0),t(H,{key:0},eo(o.positionInfo.rewards,$=>(e(),t("div",{key:$.rewarder_type,class:"rewards-day"},[$.rewarderAmount>0?(e(),t("div",St,[io(s("img",Pt,null,512),[[v,o.getCoinIcon($.rewarder_type)]]),s("span",null,m($.rewarderAmount),1)])):N("",!0)]))),128)):(e(),t("div",Lt,"--"))])]),o.positionInfo.positionSource=="clmm"?(e(),j(d,{key:0,class:"add-liquidity-btn claim-btn",onClick:i[0]||(i[0]=$=>o.router.push(`/new-position-detail?collect=${o.positionInfo.collectionName}&token=${o.positionInfo.name}&address=${o.positionInfo.pool}&pos=${o.positionInfo.pos_object_id}`))},{default:R(()=>[T("+ Add liquidity")]),_:1})):(e(),j(d,{key:1,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0||o.currentTab=="Ended",onClick:o.claim},{default:R(()=>[T("↑ Claim")]),_:1},8,["disabled","onClick"]))]),s("div",Ct,[s("div",null,[o.positionInfo.positionSource=="clmm"?(e(),j(d,{key:0,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:R(()=>[T("Stake")]),_:1},8,["loading","disabled","onClick"])):(e(),j(d,{key:1,class:"unstake-btn",onClick:o.unStake},{default:R(()=>[T("Unstake")]),_:1},8,["onClick"]))])])])}const ls=J(_t,[["render",Ut],["__scopeId","data-v-d5540146"]]),Tt=G({components:{FarmsH5Position:ls},props:{currentTab:{type:String,default:""},sortValue:{type:String,default:"APR"}},setup(o){const i=F(!1),p=lo(),u=r(()=>p),_=co(),l=r(()=>_),a=r(()=>o.currentTab=="My Farms"?u.value.address?l.value.myFarmsPoolList:[]:o.currentTab=="Ended"?l.value.farmsPoolList.filter(c=>c.status=="Ended"):l.value.farmsPoolList.filter(c=>c.status=="Live")),d=F([]),v=Io(),$=r(()=>v),f=r(()=>$.value.addressLpTokens),h=c=>{const b=a.value.map(L=>{const{stable_farming:B}=f.value[L.clmm_pool_id];return{...L,apr:B.apr,tvl:B.tvl}});c=="APR"?d.value=b.sort((L,B)=>B.apr-L.apr):d.value=b.sort((L,B)=>B.tvl-L.tvl)};go(()=>[a.value,o.sortValue,f.value],([c,b,L])=>{c&&c.length>0&&b&&L&&!oo(L)&&h(b)},{immediate:!0});const k=r(()=>l.value.farmsUserUsd),C=r(()=>l.value.farmsRewardObj),n=r(()=>l.value.farmsPositionObj),E=r(()=>l.value.farmsPoolListLoading),S=r(()=>l.value.farmsPositionList),P=r(()=>l.value.farmsLoadingObj),W=r(()=>l.value.farmsAllPositionLoading),Z=F({}),X=c=>{if(Z.value[c.clmm_pool_id])Z.value[c.clmm_pool_id]=!1;else{if(Z.value[c.clmm_pool_id]=!0,!u.value.address)return!1;_.getPositionByPool(u.value.address,c.clmm_pool_id,c.id)}},D=yo("Sui"),O=wo("Sui"),{setIsShowSuccess:A,setIsShowRejected:z,setIsShowWaiting:y,setTransactionDesc:I,setTransactionTxid:M}=v,Q=async c=>{const b=[];S.value.forEach(L=>{c==L.clmm_pool_id&&b.push({pool_id:L.pool_id,position_nft_id:L.id})}),M(""),I("Claim rewards"),y(!0);try{const L=await D.batchHarvest(b),B=await u.value.currentWallet.signAndExecuteTransactionBlock(L);let po=O.handleTx(B);if(po&&po.hash){M(po.hash),y(!1),A(!0);let So={res:po.res,title:"Claim",hash:po.hash};O.showTransitionPending(So),await O.watchTransaction(So)&&setTimeout(()=>{_.getFarmsPoolList()},4e3)}else y(!1),z(!0)}catch{y(!1),z(!0)}},V=Po(),no=ho(),mo=r(()=>no),To=r(()=>mo.value.poolsObj),jo=r(()=>mo.value.tokensObj),vo=F({}),K=(c,b)=>c&&b?fs.plus(Ao(c),Ao(b)):c||0,Y=c=>{let b=0;return c&&c.forEach(L=>{b+=Ao(String(L))}),String(ro(String(b),2))},x=(c,b,L)=>{Object.keys(c).forEach(B=>{var Oo,Bo,No;const po=(Oo=b[B])==null?void 0:Oo.apr_7day,So=K((Bo=b[B])==null?void 0:Bo.apr_7day,Y((No=b[B])==null?void 0:No.rewarder_apr));vo.value[B]={...c[B],apr:String(po).replace("%",""),aprTotal:So},vo.value[B].rewards=[],c[B].rewarderInfo.forEach((ds,Eo)=>{var Mo,qo;const cs=(Mo=L[ds.coinAddress])==null?void 0:Mo.symbol,us=(qo=b[B])==null?void 0:qo.rewarder_apr[Eo];vo.value[B].rewards.push({symbol:cs,rewarderApr:us,rewarder_display:c[B][`rewarder_display${Eo+1}`]})})})};return go(()=>[To.value,f.value,jo.value],([c,b,L])=>{c&&!oo(c)&&b&&!oo(b)&&L&&!oo(L)&&x(c,b,L)},{immediate:!0}),{isShowMore:i,wallet:u,farmsPoolList:d,farmsUserUsd:k,sFixD:q,farmsRewardObj:C,farmsPositionObj:n,openMore:X,checkNullObj:oo,openMoreObj:Z,farmsPoolListLoading:E,claimPoolReward:Q,router:V,addCommom:U,farmsLoadingObj:P,farmsAllPositionLoading:W,addressLpTokens:f,rewardInfoObj:vo}}});const so=o=>(to("data-v-e50cf02b"),o=o(),ao(),o),jt={key:0,class:"farms-pool-list"},Ot={class:"farms-block"},At={class:"item-block"},Rt=so(()=>s("div",{class:"leabl"},"Staked TVL",-1)),Ft={class:"text"},Dt={class:"item-block apr"},Bt=so(()=>s("div",{class:"leabl"},"APR",-1)),Nt={class:"text"},Et={class:"apr-hover-box"},Mt={class:"item-block"},qt=so(()=>s("div",{class:"leabl"},"Rewards / day",-1)),Vt={class:"text"},Wt={class:"item-block my-staked"},Ht=so(()=>s("div",{class:"leabl"},"My Staked",-1)),zt={key:0,class:"text"},Qt={class:"position-usd"},Gt={key:0,class:"position-num"},Jt={key:1,class:"text"},Kt=so(()=>s("div",{class:"position-usd"},"--",-1)),Xt=[Kt],Yt={class:"item-block"},Zt=so(()=>s("div",{class:"leabl"},"Earned",-1)),xt={class:"text earned-box"},oa={class:"earned"},sa={key:0,class:"my-staked-loading"},na=so(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),ea={key:0},ta={key:1},aa={key:2},ia={key:2},la={class:"add-liquidity-box"},ra=["onClick"],da=so(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),ca=[da],ua={key:1,class:"upgrade-loading"},ma={key:2,class:"no-data"},pa=so(()=>s("img",{src:Go,alt:""},null,-1)),_a={key:3,class:"no-data"},fa=so(()=>s("img",{src:Jo,alt:""},null,-1)),ha=so(()=>s("span",null,"No Data",-1)),va=[fa,ha];function ga(o,i,p,u,_,l){const a=Zo,d=Qo,v=xo,$=Fo,f=$o,h=ls,k=es,C=_s;return e(),t(H,null,[o.farmsPoolListLoading?o.farmsPoolListLoading?(e(),t("div",ua,[w(C,{type:"poolsCard",loading:!0})])):N("",!0):(e(),t("div",jt,[(e(!0),t(H,null,eo(o.farmsPoolList,n=>{var E,S,P;return e(),t("div",{key:n.id,class:"farms-item"},[w(a,{"pool-info":n},null,8,["pool-info"]),s("div",Ot,[s("div",At,[Rt,s("div",Ft,"$"+m(("addCommom"in o?o.addCommom:g(U))(n.tvl,2)),1)]),s("div",Dt,[Bt,s("div",Nt,[T(m(n.total_apr>0&&n.total_apr<1e-4?"<0.01%":("addCommom"in o?o.addCommom:g(U))(n.total_apr*100,2))+"% ",1),s("div",Et,[n.isStableFarming||n.rewarderInfo&&n.rewarderInfo.length>0||(E=n==null?void 0:n.stable_farming)!=null&&E.stable_farming_pool?(e(),j(d,{key:0,"l-item":n,"rewarder-info":n.rewarder.rewardList,class:"noHover apr-hover-con"},null,8,["l-item","rewarder-info"])):N("",!0)])])]),s("div",Mt,[qt,s("div",Vt,[(e(!0),t(H,null,eo(n.rewarders,W=>(e(),j(v,{key:W.reward_coin,"reward-info":W,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("div",Wt,[Ht,o.wallet.address?(e(),t("div",zt,[s("div",Qt,m(Number((S=o.farmsUserUsd[n.clmm_pool_id])==null?void 0:S.amount)>0&&Number((P=o.farmsUserUsd[n.clmm_pool_id])==null?void 0:P.amount)<.01?"<$0.01":"$"+("addCommom"in o?o.addCommom:g(U))(o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].positionNum?(e(),t("div",Gt,m(o.farmsUserUsd[n.clmm_pool_id].positionNum)+" "+m(o.farmsUserUsd[n.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):N("",!0)])):(e(),t("div",Jt,Xt))]),s("div",Yt,[Zt,s("div",xt,[s("div",oa,[o.farmsLoadingObj[n.clmm_pool_id]||o.farmsAllPositionLoading?(e(),t("div",sa,[w($,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[n.clmm_pool_id]&&o.farmsRewardObj[n.clmm_pool_id].amountUsd?(e(),t(H,{key:1},[na,o.farmsRewardObj[n.clmm_pool_id].amountUsd>.01?(e(),t("span",ea,"$"+m(("addCommom"in o?o.addCommom:g(U))(("sFixD"in o?o.sFixD:g(q))(o.farmsRewardObj[n.clmm_pool_id].amountUsd||0,2))),1)):o.farmsRewardObj[n.clmm_pool_id].amountUsd>0&&o.farmsRewardObj[n.clmm_pool_id].amountUsd<.01?(e(),t("span",ta,"<$0.01")):(e(),t("span",aa,"0"))],64)):(e(),t("span",ia,"--"))]),w(f,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[n.clmm_pool_id]||o.farmsRewardObj[n.clmm_pool_id].amountUsd<=0,onClick:_o(W=>o.claimPoolReward(n.clmm_pool_id),["stop"])},{default:R(()=>[T("Claim")]),_:2},1032,["disabled","onClick"])])])]),s("div",la,[w(f,{class:"add-liquidity-btn",onClick:_o(W=>o.router.push(`/liquidity/deposit?poolAddress=${n.clmm_pool_id}`),["stop"])},{default:R(()=>[T("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more-btn",onClick:W=>o.openMore(n)},[(e(),t("svg",{class:fo(["arrow-icon",!("checkNullObj"in o?o.checkNullObj:g(oo))(o.openMoreObj)&&o.openMoreObj[n==null?void 0:n.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},ca,2))],8,ra),(e(!0),t(H,null,eo(o.farmsPositionObj[n.clmm_pool_id],W=>io((e(),j(h,{key:W.clmm_pool_id,"current-tab":o.currentTab,"position-info":{...W,clmm_pool_id:n.clmm_pool_id}},null,8,["current-tab","position-info"])),[[Ho,!("checkNullObj"in o?o.checkNullObj:g(oo))(o.openMoreObj)&&o.openMoreObj[n==null?void 0:n.clmm_pool_id]]])),128)),o.farmsPositionObj&&o.farmsPositionObj[n.clmm_pool_id]&&o.farmsPositionObj[n.clmm_pool_id].length==0?(e(),j(k,{key:0,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${n.clmm_pool_id}`},null,8,["add-liquidity-url"])):N("",!0),o.wallet.address?N("",!0):(e(),j(k,{key:1,"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"},null,8,["no-data-img"]))])}),128))])),!o.wallet.connected&&o.currentTab=="My Farms"?(e(),t("div",ma,[pa,w(f,{class:"connect-wallet",onClick:i[0]||(i[0]=n=>o.wallet.setIsShowWalletModal(!0))},{default:R(()=>[T(m(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(e(),t("div",_a,va)):N("",!0)],64)}const rs=J(Tt,[["render",ga],["__scopeId","data-v-e50cf02b"]]),$a=G({setup(o,i){const p=F("Live"),u=F("TVL"),_=F(!1),l=F(!1),a=co(),d=r(()=>a),v=lo(),$=r(()=>v),f=r(()=>p.value=="My Farms"?$.value.address?d.value.myFarmsPoolList:[]:p.value=="Ended"?d.value.farmsPoolList.filter(P=>P.status=="Ended"):d.value.farmsPoolList.filter(P=>P.status=="Live")),h=r(()=>d.value.farmsPoolList.filter(P=>P.status=="Ended")),k=r(()=>h.value.length>0?["Live","Ended","My Farms"]:["Live","My Farms"]),C=P=>f.value.length,n=()=>{_.value=!0,a.getFarmsPoolList(),setTimeout(()=>{_.value=!1},1e3)},E=P=>{p.value=P,i.emit("changeTab",P)},S=P=>{u.value=P,i.emit("changeSortValue",P)};return zo(()=>{document.addEventListener("click",()=>{l.value=!1})}),{isOpenList:l,tabList:k,currentTab:p,sortValue:u,clickRefresh:n,isRefresh:_,farmsPoolList:f,getListNum:C,changeTab:E,changeSortValue:S}}});const bo=o=>(to("data-v-29027bb0"),o=o(),ao(),o),ba={class:"farms-tab"},ya={class:"tab-left"},wa=["onClick"],ka={key:0},Ia={class:"tab-right"},Sa={class:"sort-select"},Pa=bo(()=>s("div",null,"Sort by",-1)),La={class:"showSort"},Ca=bo(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),Ua=bo(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Ta=[Ua],ja={key:0,class:"sort-list"},Oa=bo(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),Aa=bo(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),Ra={class:"refresh"},Fa=bo(()=>s("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),Da=[Fa];function Ba(o,i,p,u,_,l){return e(),t("div",ba,[s("div",ya,[(e(!0),t(H,null,eo(o.tabList,a=>(e(),t("div",{key:a,class:fo(["tab-item",o.currentTab==a?"tab-item-active":""]),onClick:d=>o.changeTab(a)},[s("span",null,m(a=="Ended"?"Finished":a),1),o.currentTab==a&&o.getListNum(a)?(e(),t("p",ka,m(o.getListNum(a)),1)):N("",!0)],10,wa))),128))]),s("div",Ia,[s("div",Sa,[s("div",{class:"sort-select-box",onClick:i[0]||(i[0]=_o(a=>o.isOpenList=!o.isOpenList,["stop"]))},[Pa,s("div",La,[s("span",null,m(o.sortValue),1),Ca,(e(),t("svg",{class:fo(["arrow-icon",o.isOpenList?"arrow-icon-active":""]),"aria-hidden":"true"},Ta,2))])]),o.isOpenList?(e(),t("div",ja,[s("div",{class:"sort-item",onClick:i[1]||(i[1]=a=>o.changeSortValue("APR"))},[T("APR "),Oa]),s("div",{class:"sort-item",onClick:i[2]||(i[2]=a=>o.changeSortValue("TVL"))},[T("TVL "),Aa])])):N("",!0)]),s("div",Ra,[(e(),t("svg",{"aria-hidden":"true",class:fo(["refresh-icon",o.isRefresh?"refreshing":""]),onClick:i[3]||(i[3]=(...a)=>o.clickRefresh&&o.clickRefresh(...a))},Da,2))])])])}const Na=J($a,[["render",Ba],["__scopeId","data-v-29027bb0"]]),Ea=G({components:{FarmsBanner:Xo,FarmsTabs:Na,FarmsTable:ts,FarmsH5List:rs},setup(){const o=co(),i=r(()=>o),p=r(()=>i.value.farmsPoolListLoading),u=F("TVL"),_=r(()=>i.value.farmsPoolList),l=lo(),a=r(()=>l),d=ho(),v=r(()=>d);go(()=>[a.value.address,_.value,v.value.tokensObj,v.value.RATES],([f,h,k,C])=>{f&&h.length>0&&!oo(k)&&!oo(C)&&o.getPositionByAllPool(f)},{immediate:!0}),zo(()=>{o.getFarmsPoolList()}),go(()=>a.value.address,f=>{f||o.logOut()},{immediate:!0});const $=F("Live");return{farmsPoolListLoading:p,currentTab:$,sortValue:u}}});const Ma={class:"farm-container"},qa={class:"farm-container-center"};function Va(o,i,p,u,_,l){const a=Xo,d=ps("FarmsTabs"),v=ts,$=et,f=rs;return e(),t("div",Ma,[w(a),s("div",qa,[w(d,{onChangeTab:i[0]||(i[0]=h=>{o.currentTab=h}),onChangeSortValue:i[1]||(i[1]=h=>{o.sortValue=h})}),o.farmsPoolListLoading?(e(),j($,{key:1,"current-tab":o.currentTab},null,8,["current-tab"])):(e(),j(v,{key:0,"current-tab":o.currentTab,"sort-value":o.sortValue},null,8,["current-tab","sort-value"])),w(f,{"current-tab":o.currentTab,"sort-value":o.sortValue},null,8,["current-tab","sort-value"])])])}const ii=J(Ea,[["render",Va],["__scopeId","data-v-656fe488"]]);export{ii as default};
