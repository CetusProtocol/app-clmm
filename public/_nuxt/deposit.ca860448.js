import{_ as _t}from"./back.66ee1511.js";import{_ as Bt,a as Ft}from"./token-warning-modal.70be5002.js";import{_ as jt}from"./swap-setting.ccff7e77.js";import{u as co,c as kn,a as Et}from"./sha256.e0dcfdde.js";import{u as nn,c as fo,D as h,a as Ln,d as Ae,b as on,n as An,e as Fe,t as Tn,g as qn,p as nt,s as xo,f as Po,h as tt}from"./pool.b6cab71a.js";import{a as vo,r as g,y as hn,C as Wt,m as H,D as ge,b as Rn,e as po,o as r,f as c,h as a,v as u,i as re,z as fe,c as ue,x as C,p as Fo,k as jo,q as Cn,t as ao,j as Oe,I as ct,E as vt,w as Ne,S as pt,u as ae,B as Un,G as Dt,H as at,F as No,s as en,J as mt,M as ft,K as gt,l as Ht,L as Nn,N as zt}from"./entry.efe4afdb.js";import{i as je}from"./import-icon.de3e6c66.js";import{_ as Xt}from"./assets-card.2d2763d3.js";import{s as bn,m as Vt,l as Kt,b as Zt,a as Gt,_ as it,c as rt,d as Jt}from"./icon-Add-Liquidity_2x.f494e2eb.js";import{_ as Qt,a as Yt,b as xt,c as ea}from"./new-add-or-create.78585b5d.js";import{_ as oa}from"./network-tips.c23a2c85.js";/* empty css              *//* empty css              */import{_ as na}from"./apr-tab.317845f1.js";import{_ as ta}from"./token-warning.9f7b1824.js";import{_ as aa}from"./apr-tips.8ba399fc.js";/* empty css              */import{p as ia}from"./precision.9d58cda5.js";import{_ as ra}from"./coin-select.b6ea59d2.js";import{_ as la}from"./status-block.6a1b9212.js";import{_ as bt}from"./icon-arrow_2x.948aedb2.js";import{_ as kt}from"./icon-arrow_2x.4ffddb8e.js";/* empty css              */import{u as sa}from"./notifi.5eb45a26.js";import{_ as ht}from"./icon-selected_3x.09e9a6f0.js";/* empty css              *//* empty css              */import"./index.86c4b9c9.js";import"./img-no-Positions_2x.26de2b10.js";import"./useWhale.eb093041.js";import"./index.d9955068.js";const ua=vo({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,n){const _=g(!1),j=g(null),F=g(0),K=g(20),X=nn(),ne=co(),D=g(!1);hn(()=>{}),Wt(()=>{clearInterval(j.value)});const G=()=>{j.value=setInterval(()=>{var $;D.value||F.value<K.value&&(F.value+=1,F.value===K.value&&(($=e==null?void 0:e.poolInfo)!=null&&$.poolAddress&&X.updateCurrentPools(e.poolInfo.poolAddress,ne.chainName),F.value=0))},1e3)},J=H(()=>ne.slippage),U=()=>{n.emit("clearAll")},z=()=>{F.value=0,n.emit("clickRefresh")};ge(()=>e.poolInfo,$=>{$&&!j.value&&G()},{immediate:!0});const le=Rn();return{clickRefresh:z,isShowSwapSetting:_,countdown:F,autoRefreshTime:K,slippage:J,clearAll:U,checkNullObj:fo,router:le}}});const da=e=>(Fo("data-v-f484e6e0"),e=e(),jo(),e),ca={class:"title"},va={class:"left"},pa=da(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),ma={class:"deposit-progress"};function fa(e,n,_,j,F,K){var D,G;const X=Bt,ne=jt;return r(),c("div",ca,[a("div",va,[a("span",null,u(e.poolInfo?e.$t("common.concentratedLiquidity"):(G=(D=e.$route)==null?void 0:D.query)!=null&&G.action?e.$t("newAdd.createClmmPool"):e.$t("common.concentratedLiquidity")),1)]),a("div",{class:fe(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[a("div",{class:"slippage-icon",onClick:n[0]||(n[0]=J=>e.isShowSwapSetting=!0)},[pa,a("span",null,u(e.slippage)+"%",1)]),a("div",ma,[re(X,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])],2),e.isShowSwapSetting?(r(),ue(ne,{key:0,onOnClose:n[1]||(n[1]=J=>e.isShowSwapSetting=!1)})):C("",!0)])}const ga=po(ua,[["render",fa],["__scopeId","data-v-f484e6e0"]]);const ba=vo({props:{coinIcon:{type:String,default:""},coin:{type:Object,default:()=>({})}},setup(e){const n=co(),_=H(()=>n),j=g(""),F=g(""),K=g(""),X=nn(),ne=H(()=>X),D=g(""),G=U=>{var z;D.value=(U==null?void 0:U.logoURI)||(U==null?void 0:U.logo_url)||((z=ne.value.tokensObj[U==null?void 0:U.address])==null?void 0:z.logo_url)||(_.value.theme==="default"?je("/image/coins/unknown.png"):je("/image/coins/sui-unknown.png"))};ge(()=>[e.coin,ne.value.tokensObj],([U,z])=>{var le;U?(F.value=z&&z[U.address]&&((le=z[U.address])==null?void 0:le.labels),j.value=U.name,K.value=U.symbol,G(U)):(F.value="",j.value="",K.value="")},{immediate:!0,deep:!0});const J=H(()=>{var U,z,le;return e.coinIcon||((le=(z=ne==null?void 0:ne.value)==null?void 0:z.tokensObj[(U=e.coin)==null?void 0:U.address])==null?void 0:le.logo_url)||(_.value.theme==="default"?je("/image/coins/unknown.png"):je("/image/coins/sui-unknown.png"))});return{store:_,importIcon:je,coinName:j,coinLabels:F,coinSymbol:K,currentIcon:J,coinLogo:D,getCoinIcon:G}}}),ka=e=>(Fo("data-v-5feb3574"),e=e(),jo(),e),ha={class:"coin-block"},Ca={class:"coin-info"},ya={class:"symbol"},wa={key:0,class:"name"},Pa={key:0,class:"label"},Ia=ka(()=>a("div",null,[a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon_on"})])],-1));function $a(e,n,_,j,F,K){const X=Cn("image");return r(),c("div",ha,[a("div",null,[ao(a("img",null,null,512),[[X,e.coinLogo]]),a("div",Ca,[a("div",ya,u(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinName?(r(),c("div",wa,[Oe(u(e.coin.name)+" ",1),e.store.theme=="default"?(r(),c("span",Pa,u(e.coinLabels?`(${e.coinLabels})`:""),1)):C("",!0)])):C("",!0)])]),Ia])}const Sa=po(ba,[["render",$a],["__scopeId","data-v-5feb3574"]]),Ta=vo({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})},showfromCoinLock:{type:Boolean,default:!1},showtoCoinLock:{type:Boolean,default:!1}},setup(){const e=co();return{storeIndex:H(()=>e)}}});const Na={class:"create-pool-lock"},Aa={key:0,src:Qt,alt:""},qa={key:1,src:Yt,alt:""};function La(e,n,_,j,F,K){return r(),c("div",Na,[a("div",null,[e.storeIndex.theme=="default"?(r(),c("img",Aa)):(r(),c("img",qa))])])}const Ra=po(Ta,[["render",La],["__scopeId","data-v-5d070e17"]]),Ua=vo({props:{clickClear:{type:Boolean,default:!1},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},intPrice:{type:String,default:""}},setup(e,n){const _=g("");return{inpValue:_,changecurrentPrice:F=>{const K=new RegExp("[^\\d-]*(\\d*(?:\\.\\d*)?).*$");F.target.value=F.target.value.replace(K,"$1"),_.value=F.target.value,n.emit("changecurrentPrice",_.value)}}}});const Ma={class:"set-init-price"},Oa={class:"init-price-tips"};function _a(e,n,_,j,F,K){var ne,D,G,J;const X=ct;return r(),c("div",Ma,[re(X,{type:"text",placeholder:"0.0",value:e.intPrice,disabled:!((D=(ne=e.$route)==null?void 0:ne.query)!=null&&D.fee),onChange:e.changecurrentPrice},null,8,["value","disabled","onChange"]),a("div",Oa,u((G=e.toCoin)==null?void 0:G.symbol)+" per "+u((J=e.fromCoin)==null?void 0:J.symbol),1)])}const Ba=po(Ua,[["render",_a],["__scopeId","data-v-9e71be9e"]]),Fa=-443636;function lt(e,n){const _=ja(e),j=(_-Fa)%n;return j>n/2?_-j+n:_-j}const Ct=new h("1.0001");function ja(e){return e.log(Ct).toDP(0,h.ROUND_HALF_UP).toNumber()}function st(e){return Ct.pow(e)}const Ea=vo({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},emits:["onInput"],setup(e,n){const _=g(""),j=g("");let F=g(""),K=g("");const X=vt(),ne=co(),D=H(()=>ne),G=H(()=>D.value.chainName?Ln(D.value.chainName):{}),J=()=>{if(!(Number.isNaN(_.value)||Number(_.value)!==0&&!_.value||!e.poolInfo.tickSpacing))try{const m=lt(new h(_.value.toString()),Number($.value.tickSpacing)),E=st(m+Number($.value.tickSpacing));if(e.pType=="Min"&&Number(E.toString())>=Number(K.value.toString()))return;const y=E.toString();n.emit("onInput",y)}catch{n.emit("onInput","")}},U=()=>{try{if(Number.isNaN(_.value)||!_.value||!e.poolInfo.tickSpacing)return;const m=lt(new h(_.value),Number($.value.tickSpacing)),E=st(m-Number($.value.tickSpacing)),y=E.toString();if(e.pType=="Max"&&Number(E)<=Number(F.value))return;n.emit("onInput",y)}catch{n.emit("onInput","")}},z=m=>{let E=m.toString().replace(/[^\d.]/g,"");const y=/^\d+(\.\d+)?$/;E.split(".").length>2&&!y.exec(E)&&(E=E.substr(0,E.length-1)),j.value=String(E)},le=m=>{var Q,we,Le,me;const{TickUtil:E,TickMath:y,getNearestTickByTick:b}=G.value,i=m.target.value;let p;if(i==="0"){p=-443636,n.emit("onInput","0");return}else{const W=y.priceToTickIndex(new h(i),(Q=$.value.token_a)==null?void 0:Q.decimals,(we=$.value.token_b)==null?void 0:we.decimals);p=b(Number(W),Number($.value.tickSpacing))}const B=y.tickIndexToPrice(new h(p),(Le=$.value.token_a)==null?void 0:Le.decimals,(me=$.value.token_b)==null?void 0:me.decimals);n.emit("onInput",B.toString())};ge(()=>e.defaultMinPrice,(m,E)=>{m!==E&&(F.value=e.defaultMinPrice)},{immediate:!0}),ge(()=>e.defaultMaxPrice,(m,E)=>{m!==E&&(K.value=e.defaultMaxPrice)},{immediate:!0}),ge(()=>j.value,m=>{},{immediate:!0}),ge(()=>[e.inputValue,X.query.action],([m])=>{if(m&&m!=="0"&&m!=="∞"){_.value=m;const y=m.toString().split(".")[1];j.value=m!=="0"&&m!=="∞"&&y&&y.length>6?Ae(m.toString(),6):m.toString()}else(m=="0"||m=="∞"||X.query.action)&&(j.value=m)},{immediate:!0});const $=g({});ge(()=>e.poolInfo,(m,E)=>{m&&($.value=m)},{immediate:!0});const _e=g("");return ge(()=>e.currentPriceTab,m=>{_e.value=m},{immediate:!0}),{addPrice:J,minusPrice:U,oValue:j,changeValue:z,isDisabled:_e,route:X,onBlur:le}}});const Wa={class:"set-price-item"},Da={class:"title"},Ha={class:"input-box"},za={class:"minus-btn"},Xa=["disabled"],Va={class:"plus-btn"};function Ka(e,n,_,j,F,K){const X=ct,ne=pt;return r(),c("div",Wa,[a("div",Da,u(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),re(ne,{loading:e.loading,active:"",paragraph:!1},{default:Ne(()=>[a("div",Ha,[a("a",za,[a("div",{class:fe(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:n[0]||(n[0]=(...D)=>e.minusPrice&&e.minusPrice(...D))},null,10,Xa)]),re(X,{id:"pValu",value:e.oValue,"onUpdate:value":n[1]||(n[1]=D=>e.oValue=D),disabled:e.route.query.action&&!e.intPrice,autocomplete:"off",placeholder:"0",onChange:n[2]||(n[2]=D=>e.changeValue(D.target.value)),onBlur:n[3]||(n[3]=D=>e.onBlur(D))},null,8,["value","disabled"]),a("a",Va,[a("div",{class:fe(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"addDis":"add"),onClick:n[4]||(n[4]=(...D)=>e.addPrice&&e.addPrice(...D))},null,2)])])]),_:1},8,["loading"]),a("p",{class:fe(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},u(e.toCoin&&e.toCoin.symbol)+" per "+u(e.fromCoin&&e.fromCoin.symbol),3)])}const ut=po(Ea,[["render",Ka],["__scopeId","data-v-782725c6"]]),Za=vo({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},setup(e,n){let _=g(""),j=g(""),F=g(),K=g(!1),X=g(!1);const ne=g({}),D=co(),G=H(()=>D);hn(()=>{_.value=e.min,j.value=e.max}),ge(()=>e.currentPriceTab,(m,E)=>{m!==E&&(F.value=e.currentPriceTab)},{immediate:!0}),ge(()=>e.min,(m,E)=>{m!==E&&(_.value=m)}),ge(()=>e.max,(m,E)=>{m!==E&&(j.value=m)}),ge(()=>e.poolInfo,(m,E)=>{m&&(ne.value=m)},{immediate:!0});const J=g("");ge(()=>e.intPrice,m=>{J.value=m},{immediate:!0,deep:!0});const U=m=>{_.value=m,n.emit("onChangeMinPrice",m)},z=m=>{j.value=m,n.emit("onChangeMaxPrice",m)};ge(K,(m,E)=>{m!==E&&n.emit("onChangeFullRange",m)});const le=()=>{_.value=e.defaultMinPrice,j.value=e.defaultMaxPrice,X.value=!1,K.value=!1},$=()=>{X.value=!1,_.value="0",j.value="∞"};return ge(K,(m,E)=>{m!==E&&n.emit("onChangeFullRange",m)}),{store:G,changeMinPrice:U,changeMaxPrice:z,importIcon:je,resetPrice:le,changeShowUnderStand:()=>{K.value=!K.value,K.value?X.value=!0:le(),X.value||(_.value=e.defaultMinPrice,j.value=e.defaultMaxPrice)},showUnderStand:X,minPrice:_,maxPrice:j,understand:$,isRadio:K,initPirce:J}}});const Ga={class:"set-price"},Ja={class:"card-container"},Qa={key:0,class:"card"},Ya=["src"],xa={key:1,class:"understand"},ei={class:"left"},oi={class:"right"};function ni(e,n,_,j,F,K){const X=ut,ne=ut,D=Un;return r(),c("div",Ga,[a("div",Ja,[e.showUnderStand?(r(),c("div",xa,[a("div",ei,[a("p",null,u(e.$t("common.lowerEfficiency")),1),a("p",null,u(e.$t("common.lowerEfficiencyTips")),1)]),a("div",oi,[re(D,{onClick:e.understand},{default:Ne(()=>[Oe(u(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(r(),c("div",Qa,[re(X,{value:e.minPrice,"onUpdate:value":n[0]||(n[0]=G=>e.minPrice=G),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,"int-price":e.initPirce,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","int-price","onOnInput","onAddValue","onDelValue"]),re(ne,{value:e.maxPrice,"onUpdate:value":n[1]||(n[1]=G=>e.maxPrice=G),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"int-price":e.initPirce,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","int-price","current-price-tab","onOnInput","onAddValue","onDelValue"]),a("img",{src:("importIcon"in e?e.importIcon:ae(je))("/image/lmg-line@2x.png"),alt:""},null,8,Ya)]))])])}const ti=po(Za,[["render",ni],["__scopeId","data-v-d07618c3"]]);function dt(e,n,_){const j=new h(10).pow(n-_);return new h(1.0001).pow(e).mul(j)}const ai=vo({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""}},setup(e,n){const _=g(1),j=g(""),F=g(""),K=H(()=>{var i,p,B;return U.sqrtPriceX64ToPrice((i=e.poolInfo)==null?void 0:i.current_sqrt_price,(p=e.poolInfo)==null?void 0:p.coinA.decimals,(B=e.poolInfo)==null?void 0:B.coinB.decimals).toString()}),X=H(()=>{let i=0;return e.direction?i=(Number(e.minPrice)/Number(K.value)-1)*100:i=(Number(e.minPrice)/Number(1/Number(K.value))-1)*100,i=i>0&&i<.1?.1:i,i=i<0&&i>-.1?-.1:i,i}),ne=H(()=>{let i=0;return e.direction?i=(Number(e.maxPrice)/Number(K.value)-1)*100:i=(Number(e.maxPrice)/Number(1/Number(K.value))-1)*100,i=i>0&&i<.1?.1:i,i=i<0&&i>-.1?-.1:i,i}),D=co(),G=H(()=>D),J=H(()=>G.value.chainName?Ln(G.value.chainName):{}),{TickMath:U,getNearestTickByTick:z}=J.value,le=()=>{const i=_.value/2;_.value=i,m(e.poolInfo,i)},$=()=>{const i=_.value*2;_.value=i,m(e.poolInfo,i)},_e=(i=[])=>{let p=6;const B=Math.abs(Number(i[0])-Number(i[i.length-1]));return B>=6?p=0:B>=1?p=1:B>=.1?p=2:B>=.01?p=3:B>=.001?p=4:B>=1e-4?p=5:B>=1e-5?p=6:B>=1e-6?p=7:B>=1e-7&&(p=8),p},m=(i,p=1)=>{if(i&&i.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const B=Number(e.poolInfo.current_tick_index);let Q=B+100*p,we=B-100*p,Le,me;if(e.maxPrice==="∞")me=J.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?me=U.priceToTickIndex(new h(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):me=U.priceToTickIndex(new h(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{me=443636}if(e.minPrice==="0")Le=J.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?Le=U.priceToTickIndex(new h(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):Le=U.priceToTickIndex(new h(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{Le=-443636}let W=0;if(e.currentPriceTab!=="full range"){if(B>=Le&&B<=me){const oe=B-Le,R=me-B;W=Math.max(Math.abs(oe),Math.abs(R))}else B<Le?W=Math.abs(me-B):W=Math.abs(B-Le);Q=B+W+100*p,we=B-W-100*p}else{const oe=(Math.abs(B)>5e3,2e4);Q=B+oe*p,we=B-oe*p}we<-443636&&(we=-443636),Q>443636&&(Q=443636);const se=new h(i.liquidity).div(Math.pow(10,8)).toString(),Z=e.tickList,ie=[],He=[];let Y={};for(let oe=0;oe<Z.length;oe++){if(Y=Z[oe],Y.index<=B&&Y.index>=we){if(ie.length<1&&oe!==0){const R=Z[oe-1];ie.unshift({...R,index:we})}ie.unshift(Y)}else if(Y.index>B&&Y.index<=Q&&(He.push(Y),ie.length<1&&oe!==0)){const R=Z[oe-1];ie.push({...R,index:we})}if(Y.index>Q){const R=Z[oe];if(He.push({...R,index:Q}),ie.length<1&&oe!==0){const Io=Z[oe-1];ie.push({...Io,index:we})}break}}let $e="0";for(let oe=ie.length-1;oe>=0;oe--)$e=new h($e).plus(new h(ie[oe].liquidityNet.toString()).div(Math.pow(10,8))).toString(),ie[oe].liquityAmount=$e;let be=se;for(let oe=0;oe<He.length;oe++)be=new h(be).plus(new h(He[oe].liquidityNet.toString()).div(Math.pow(10,8))).toString(),He[oe].liquityAmount=be;let Ue=[];const de=Z&&Z.length>0?{index:B,liquityAmount:Number(se)}:{index:B,liquityAmount:0};(ie.length>0||He.length>0)&&(Ue=[...ie.reverse(),de,...He],e.direction||(Ue=Ue.reverse()));const Ve=[];Z.forEach(oe=>{Ve.push({...oe,liquidityGross:oe.liquidityGross.toString(),liquidityNet:oe.liquidityNet.toString()})}),y(Ue,we,Q,Le,me,B)}};let E=g(!1);hn(()=>{document.body.clientWidth<750?E.value=!1:E.value=!0,window.onresize=()=>{document.body.clientWidth<750?E.value=!1:E.value=!0,m(e.poolInfo,_.value)}});const y=(i,p,B,Q,we,Le)=>{let me,W;e.direction?(me=e.before7dContractPriceLowest&&Number(e.before7dContractPriceLowest)>0?U.priceToTickIndex(new h(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",W=e.before7dContractPriceHighest&&Number(e.before7dContractPriceHighest)>0?U.priceToTickIndex(new h(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(me=e.before7dContractPriceLowest&&Number(e.before7dContractPriceLowest)>0?U.priceToTickIndex(new h(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",W=e.before7dContractPriceHighest&&Number(e.before7dContractPriceHighest)>0?U.priceToTickIndex(new h(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const se={top:30,right:35,bottom:20,left:55};let Z,ie;E.value?(Z=460-se.left-se.right,ie=205-se.top-se.bottom):(Z=340-se.left-se.right,ie=205-se.top-se.bottom);const He=B-p,Y=parseInt(String(He/4));let $e=[p+Y/4,p+Y,p+2*Y,B-Y,B-Y/4];const be=p,Ue=B,de=Z/(Ue-be);e.currentPriceTab==="full range"&&($e=[p,p+2*Y,B]);const Ve=$e.map(M=>e.direction?dt(M,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new h(1).div(dt(M,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),oe=_e(Ve);bn("#chart").selectAll("*").remove();const R=bn("#chart").attr("width",Z+se.left+se.right).attr("height",ie+se.top+se.bottom).append("g").attr("transform",`translate(${se.left},${se.right})`),Io=Vt(i,function(M){return Number(Math.abs(M.liquityAmount))})||0,N=Kt().range([0,ie]).domain([Io,0]);Zt().rangeRound([0,Z]).padding(.1);const Ao=R.append("g").attr("id","barsBox").selectAll("rect").data(i).enter().append("rect");G.value.theme=="default"?Ao.attr("x",function(M,I){return I===0?0:e.direction?Math.abs(M.index-be)*de:Math.abs(Ue-M.index)*de}).attr("y",function(M,I){return e.direction?I===i.length-1?0:N(M.liquityAmount):I===i.length-1?0:N(i[I+1].liquityAmount)}).attr("width",function(M,I){return I===0&&i.length===1&&M.liquityAmount>0?Z:(e.direction,I!==i.length-1?Math.abs(i[I+1].index-M.index)*de:0)}).attr("height",function(M,I){return I===0&&i.length===1&&M.liquityAmount>0?ie:e.direction?I===i.length-1?0:ie-N(M.liquityAmount):I===i.length-1?0:ie-N(i[I+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):Ao.attr("x",function(M,I){return I===0?0:e.direction?Math.abs(M.index-be)*de:Math.abs(Ue-M.index)*de}).attr("y",function(M,I){return e.direction?I===i.length-1?0:N(Math.abs(M.liquityAmount)):I===i.length-1?0:N(Math.abs(i[I+1].liquityAmount))}).attr("width",function(M,I){return I===0&&i.length===1&&M.liquityAmount>0?Z:(e.direction,I!==i.length-1?Math.abs(i[I+1].index-M.index)*de:0)}).attr("height",function(M,I){if(I===0&&i.length===1&&M.liquityAmount>0)return ie;if(e.direction)return I===i.length-1?0:Number(M.liquityAmount)?ie-N(Math.abs(M.liquityAmount)):0;{if(I===i.length-1)return 0;const oo=ie-N(Math.abs(i[I+1].liquityAmount));return Number(i[I+1].liquityAmount)?oo:0}}).attr("fill","#407497").attr("class","bars").attr("stroke-width",1).attr("stroke","#407497");const qo=R.append("g");qo.append("line").attr("x1",0).attr("y1",155).attr("x2",Z).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const $o=qo.append("g");let So=0;if(e.direction){for(let M=0;M<$e.length;M++){const I=Ae(Ve[M],oe)||"0";Ve.push(I);const oo=Math.abs($e[M]-be)*de;let Me=0;for(let Ce=0;Ce<I.length;Ce++)I[Ce]==="1"?Me+=4.02:I[Ce]==="."?Me+=2.64:I[Ce]==="7"?Me+=5.48:Me+=6;$o.append("text").text(I).attr("x",oo-Me/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}So=Math.abs(Le-be)*de}else{for(let M=$e.length-1;M>=0;M--){const I=Ae(Ve[M],oe)||0;Ve.push(I);const oo=Math.abs($e[M]-Ue)*de;let Me=0;for(let Ce=0;Ce<I.length;Ce++)I[Ce]==="1"?Me+=4.02:I[Ce]==="."?Me+=2.64:I[Ce]==="7"?Me+=5.48:Me+=6;$o.append("text").text(I).attr("x",oo-Me/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}So=Math.abs(Le-Ue)*de}(G.value.theme=="default"?R.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):R.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+So+", 0)");let eo,ze,go,bo;e.direction?(eo=Q<be?-100:parseInt(String(Math.abs(Q-be)*de)),ze=we<be?-100:parseInt(String(Math.abs(we-be)*de)),go=me<be?-100:Math.abs(me-be)*de,bo=W<be?-100:Math.abs(W-be)*de):(ze=Q<be?-100:Math.abs(Ue-Q)*de,eo=we<be?-100:Math.abs(Ue-we)*de,bo=me<be?-100:Math.abs(Ue-me)*de,go=W<be?-100:Math.abs(Ue-W)*de),e.minPrice==="0"&&(eo=0),e.maxPrice==="∞"&&(ze=Z),E.value?j.value=Z-eo+60+"px":j.value=Z-eo+52+"px",F.value=ze+74+"px",me&&go<Z&&R.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+go+", 0)"),W&&bo<Z&&R.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+bo+", 0)");const Je=R.append("g").attr("id","left-handle"),Ee=R.append("g").attr("id","right-handle");G.value.theme=="default"?(Je.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Je.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),Je.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),Je.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),Ee.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Ee.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),Ee.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),Ee.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(Je.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Je.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),Je.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),Je.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),Ee.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Ee.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),Ee.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),Ee.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),Je.attr("transform","translate("+eo+", 0)"),Ee.attr("transform","translate("+ze+", 0)");const Lo=Gt().extent([[0,0],[Z,ie]]).handleSize(30).on("end",Eo);R.append("g").attr("class","brush").call(Lo).call(Lo.move,[eo,ze]);function Eo(M){if(!M.sourceEvent||!M.selection)return;Je.attr("transform","translate("+M.selection[0]+", 0)"),Ee.attr("transform","translate("+M.selection[1]+", 0)"),E.value?j.value=Z-M.selection[0]+60+"px":j.value=Z-M.selection[0]+52+"px",F.value=M.selection[1]+74+"px";let I,oo,Me=0,Ce=0;e.direction?(Me=z(parseInt(String(M.selection[0]/de+be)),Number(e.poolInfo.tickSpacing)),I=U.tickIndexToPrice(Me,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),Ce=z(parseInt(String(M.selection[1]/de+be)),Number(e.poolInfo.tickSpacing)),oo=U.tickIndexToPrice(Ce,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()):(Ce=z(Ue-M.selection[0]/de,Number(e.poolInfo.tickSpacing)),I=1/U.tickIndexToPrice(Ce,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),Me=z(Ue-M.selection[1]/de,Number(e.poolInfo.tickSpacing)),oo=1/U.tickIndexToPrice(Me,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),n.emit("onChangeMinPrice",String(Ae(String(I),6))),n.emit("onChangeMaxPrice",String(Ae(String(oo),6)))}G.value.theme=="default"?bn(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):bn(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632")};g(""),ge(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab],([i,p,B,Q])=>{i&&p&&B&&m(i,_.value)},{immediate:!0});const b=g(!0);return ge(()=>e.chartLoading,(i,p)=>{i!==p&&(b.value=i)},{immediate:!0,deep:!0}),{store:G,loading:b,zoomOut:le,zoomIn:$,rangeSizeLower:X,rangeSizeUpper:ne,rangeSizeLowerPosition:j,rangeSizeUpperPosition:F,decimalFormat:on,numberformat:An}}});const ii=e=>(Fo("data-v-beaf2b95"),e=e(),jo(),e),ri={class:"chart-box"},li={class:"chart"},si={class:"zoom"},ui=ii(()=>a("svg",{id:"chart"},null,-1));function di(e,n,_,j,F,K){return r(),c("div",ri,[ao(a("div",li,[a("div",si,[a("div",{class:"amplification",onClick:n[0]||(n[0]=(...X)=>e.zoomOut&&e.zoomOut(...X))}),a("div",{class:"narrow",onClick:n[1]||(n[1]=(...X)=>e.zoomIn&&e.zoomIn(...X))})]),e.currentPriceTab!=="full range"?(r(),c("div",{key:0,class:"range-size range-size-lower",style:at({right:e.rangeSizeLowerPosition})},u(("numberformat"in e?e.numberformat:ae(An))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):C("",!0),e.currentPriceTab!=="full range"?(r(),c("div",{key:1,class:"range-size range-size-upper",style:at({left:e.rangeSizeUpperPosition})},u(("numberformat"in e?e.numberformat:ae(An))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):C("",!0),ui],512),[[Dt,!e.loading]])])}const ci=po(ai,[["render",di],["__scopeId","data-v-beaf2b95"]]),vi=vo({props:{poolInfo:{type:Object,default:()=>({})},aprRewardsParameter:{type:Number,default:30},label:{type:Boolean,default:!0}},setup(e,n){const _=g(""),j=g(""),F=g(""),K=co(),X=H(()=>K),ne=nn(),D=H(()=>ne),G=(b,i)=>b&&i?ia.plus(Tn(b),Tn(i)):b>0?b:0,J=b=>{let i=0;return b&&b.forEach(p=>{i+=Tn(String(p))}),String(i)},U=g([]),z=g([]),le=g(""),$=g(""),_e=g(!0);ge(()=>[X.value.newTopPoolsObj,e.poolInfo,D.value.tokensObj,e.aprRewardsParameter],async([b,i,p])=>{var B;if(b&&i&&p){const Q=b[i==null?void 0:i.poolAddress];if(Q){_.value=Q&&Q.apr_7day&&Q.apr_7day.replace("%","")||"0",$.value=J(Q&&Q.rewarder_apr),le.value=G(Q&&Q.apr_7day,Q&&J(Q.rewarder_apr)),j.value=Fe(Q.tvl_in_usd,2),F.value=Fe(Q.vol_in_usd_24h,2);const we=i&&e.poolInfo.rewarder_infos||[],Le=[];for(let W=0;W<we.length;W++){const se=we[W];if(p[se.coinAddress]){const Z=p[se.coinAddress].decimals,ie=on(se.emissionsEveryDay/Math.pow(10,Z),4),He=Number(ie)>0?Fe(ie):ie,Y=on(Number(ie)*((B=D.value.RATES[se.coinAddress])==null?void 0:B.price),4);Le.push({...se,logoUrl:p[se.coinAddress].logoURI,day:He,dayUSD:Y,symbol:p[se.coinAddress].symbol,rewarder_display:i&&i[`rewarder_display${W+1}`]?i[`rewarder_display${W+1}`]:!1})}}U.value=Le.filter(W=>W.rewarder_display);const me=[];Le.forEach((W,se)=>{p[W.coinAddress]&&me.push({...W,symbol:p[W.coinAddress].symbol,rewarderApr:Q.rewarder_apr[se]&&Q.rewarder_apr[se].replace("%","")})}),z.value=me.filter(W=>W.rewarder_display)}else _.value="0",j.value="--",F.value="--",le.value=="0";_e.value=!1}},{immediate:!0,deep:!0});const m=()=>{n.emit("reviseValue")},E=b=>{var i;return(b==null?void 0:b.logoURI)||(b==null?void 0:b.logo_url)||((i=D.value.tokensObj[b==null?void 0:b.address])==null?void 0:i.logo_url)||(X.value.theme==="default"?je("/image/coins/unknown.png"):je("/image/coins/sui-unknown.png"))};return{tokensWarningObj:H(()=>D.value.tokensWarningObj),rewarderInfo:U,rewarderArr:z,rewardApr:le,rewardAprList:$,apr:_,liquidityTvl:j,vol24:F,addCommom:Fe,reviseValue:m,loading:_e,getCoinIcon:E,store:K}}});const yn=e=>(Fo("data-v-5035ed5d"),e=e(),jo(),e),pi={key:0,class:"pool-info"},mi=yn(()=>a("use",{"xlink:href":"#icon-icon_on"},null,-1)),fi=[mi],gi={key:0,class:"info-block-container"},bi={class:"info-block"},ki={class:"coin-tips"},hi={class:"left"},Ci={alt:""},yi={class:"address"},wi=yn(()=>a("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Pi=[wi],Ii={class:"info-block"},$i={class:"coin-tips"},Si={class:"left"},Ti={alt:""},Ni={class:"address"},Ai=yn(()=>a("use",{"xlink:href":"#icon-icon-copy"},null,-1)),qi=[Ai],Li={class:"info-block"},Ri={class:"leabl"},Ui={class:"text"},Mi={class:"apr-hover-content"},Oi={class:"info-block"},_i={class:"leabl"},Bi={class:"text"},Fi={class:"info-block"},ji={class:"leabl"},Ei={class:"text"},Wi={class:"info-block"},Di={class:"leabl"},Hi={class:"text"},zi={key:1,class:"pool-rewards-info"},Xi={class:"rewards-list-all"},Vi=yn(()=>a("div",{class:"icon-sign"},null,-1)),Ki={alt:""},Zi={class:"rewards-value"};function Gi(e,n,_,j,F,K){const X=ta,ne=aa,D=mt,G=Cn("image");return e.poolInfo?(r(),c("div",pi,[e.loading?(r(),ue(D,{key:1})):(r(),c(No,{key:0},[a("div",{class:fe(e.label?"pool-info-border pool-info-title":"pool-info-title")},[Oe(u(e.$t("newAdd.poolInfo"))+" ",1),(r(),c("svg",{class:fe(e.label?"show-icon icon":"icon"),"aria-hidden":"true",onClick:n[0]||(n[0]=J=>e.reviseValue())},fi,2))],2),e.label?(r(),c("div",gi,[a("div",bi,[a("div",ki,[a("div",hi,[ao(a("img",Ci,null,512),[[G,e.getCoinIcon(e.poolInfo.needReverse?e.poolInfo.token_b:e.poolInfo.token_a)]]),a("div",yi,u(e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address),1),re(X,{address:e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address,"style-params":{width:"12px",height:"12px",left:"10px",bottom:"0px"}},null,8,["address"]),(r(),c("svg",{class:"icon","aria-hidden":"true",onClick:n[1]||(n[1]=J=>e.store.copy(e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address))},Pi))])])]),a("div",Ii,[a("div",$i,[a("div",Si,[ao(a("img",Ti,null,512),[[G,e.getCoinIcon(e.poolInfo.needReverse?e.poolInfo.token_a:e.poolInfo.token_b)]]),a("div",Ni,u(e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address),1),re(X,{address:e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address,"style-params":{width:"12px",height:"12px",left:"10px",bottom:"0px"}},null,8,["address"]),(r(),c("svg",{class:"icon","aria-hidden":"true",onClick:n[2]||(n[2]=J=>e.store.copy(e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address))},qi))])])]),a("div",Li,[a("div",Ri,u(e.$t("common.apr")),1),a("div",Ui,[Oe(u(e.poolInfo.is_display_rewarder?e.rewardApr>0&&e.rewardApr<.01?"<0.01":("addCommom"in e?e.addCommom:ae(Fe))(e.rewardApr,2):e.apr>0&&e.apr<.01?"<0.01":("addCommom"in e?e.addCommom:ae(Fe))(e.apr,2))+"% ",1),a("div",Mi,[re(ne,{"l-item":{apr:e.apr,aprTotal:e.rewardApr,rewarder_apr:e.rewardAprList,is_display_rewarder:e.poolInfo.is_display_rewarder},"rewarder-info":e.rewarderArr},null,8,["l-item","rewarder-info"])])])]),a("div",Oi,[a("div",_i,u(e.$t("common.liquidity")),1),a("div",Bi,"$"+u(e.liquidityTvl),1)]),a("div",Fi,[a("div",ji,u(e.$t("common.volume24h")),1),a("div",Ei,"$"+u(e.vol24),1)]),a("div",Wi,[a("div",Di,u(e.$t("newAdd.tickSpacing")),1),a("div",Hi,u(e.poolInfo&&e.poolInfo.tick_spacing),1)])])):C("",!0),e.poolInfo.is_display_rewarder&&e.label&&e.rewarderInfo&&e.rewarderInfo.length>0?(r(),c("div",zi,[Oe(u("Farming Rewards")+" "),a("div",Xi,[(r(!0),c(No,null,en(e.rewarderInfo,J=>(r(),c("div",{key:J,class:fe(["rewards-list",J.day==0?"rewards-none":""])},[Vi,ao(a("img",Ki,null,512),[[G,J.logoUrl]]),a("div",Zi,[a("p",null,u(J.day)+" "+u(J.symbol)+" / "+u(e.$t("newAdd.day"))+" ",1)])],2))),128))])])):C("",!0)],64))])):C("",!0)}const Ji=po(vi,[["render",Gi],["__scopeId","data-v-5035ed5d"]]),Qi=vo({components:{Modal:ft},props:{poolInfo:{type:Object,required:!0}},setup(e){const n=g({}),_=co(),j=H(()=>_),F=H(()=>j.value.chainName),K=H(()=>kn[F.value]);let X=g(!0);const ne=nn(),D=H(()=>ne),G=Rn(),J=H(()=>e.poolInfo.needReverse);return ge(()=>D.value.currentPositionInfo,z=>{z&&(n.value=z)},{immediate:!0}),{getExplorerUrl:qn,addCommom:Fe,router:G,pools:D,positionInfo:n,decimalFormat:on,rateChange:X,config:K,importIcon:je,store:j,chainName:F,checkNullObj:fo,needReverse:J,getCoinIcon:z=>{var le;return(z==null?void 0:z.logoURI)||(z==null?void 0:z.logo_url)||((le=D.value.tokensObj[z==null?void 0:z.address])==null?void 0:le.logo_url)||(j.value.theme==="default"?je("/image/coins/unknown.png"):je("/image/coins/sui-unknown.png"))},decimalUi:Ae}}});const wn=e=>(Fo("data-v-a2edb48c"),e=e(),jo(),e),Yi=wn(()=>a("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),xi={class:"rejected-container"},er={class:"coin-pair"},or=wn(()=>a("use",{"xlink:href":"#icon-icon-copy"},null,-1)),nr=[or],tr=["href"],ar=wn(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-jump"})],-1)),ir=[ar],rr={class:"coin-pair"},lr={class:"fee"},sr={class:"status"},ur={class:"min-and-max"},dr={key:0},cr={class:"text"},vr={key:0,src:bt,alt:""},pr={key:1,src:kt,alt:""},mr={class:"text"},fr={key:1},gr={class:"text"},br={key:0,src:bt,alt:""},kr={key:1,src:kt,alt:""},hr={class:"text"},Cr=wn(()=>a("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),yr=[Cr];function wr(e,n,_,j,F,K){const X=pt,ne=la,D=Un,G=gt("Modal"),J=Cn("image");return r(),ue(G,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:n[3]||(n[3]=U=>e.$emit("onClose"))},{closeIcon:Ne(()=>[Yi]),default:Ne(()=>[a("div",xi,[re(X,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ne(()=>[a("div",er,[Oe(u(e.positionInfo.tokenName)+" ",1),(r(),c("svg",{class:"icon","aria-hidden":"true",onClick:n[0]||(n[0]=U=>e.store.copy(e.positionInfo.nftHash))},nr)),a("a",{href:e.chainName==="Aptos"?("getExplorerUrl"in e?e.getExplorerUrl:ae(qn))("nftAddress",e.positionInfo.nftHash):("getExplorerUrl"in e?e.getExplorerUrl:ae(qn))("nftAddress",e.positionInfo.pos_object_id),target:"_blank"},ir,8,tr)])]),_:1},8,["loading"]),a("div",{class:fe(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[re(X,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ne(()=>{var U,z,le,$,_e,m,E,y,b,i,p,B;return[a("div",rr,[a("div",null,[ao(a("img",null,null,512),[[J,e.getCoinIcon(e.needReverse?(z=e.positionInfo)==null?void 0:z.token_b:(U=e.positionInfo)==null?void 0:U.token_a)]]),ao(a("img",null,null,512),[[J,e.getCoinIcon(e.needReverse?($=e.positionInfo)==null?void 0:$.token_a:(le=e.positionInfo)==null?void 0:le.token_b)]])]),a("span",null,u(e.needReverse?(y=(E=e.positionInfo)==null?void 0:E.token_b)==null?void 0:y.symbol:(m=(_e=e.positionInfo)==null?void 0:_e.token_a)==null?void 0:m.symbol)+" - "+u(e.needReverse?(B=(p=e.positionInfo)==null?void 0:p.token_a)==null?void 0:B.symbol:(i=(b=e.positionInfo)==null?void 0:b.token_b)==null?void 0:i.symbol),1)]),a("div",lr,u(e.$t("common.fee"))+" "+u(e.positionInfo.fee*100)+"%",1)]}),_:1},8,["loading"])],2),a("div",sr,[re(ne,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),re(X,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ne(()=>{var U,z,le,$,_e,m,E,y;return[a("div",ur,[(e.needReverse?!e.rateChange:e.rateChange)?(r(),c("div",dr,[a("div",cr,u(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(String(e.positionInfo&&e.positionInfo.minPrice),6))),1),e.store.theme=="default"?(r(),c("img",vr)):(r(),c("img",pr)),a("div",mr,u(e.positionInfo&&e.positionInfo.maxPrice.indexOf("∞")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(String(e.positionInfo&&e.positionInfo.maxPrice),6)))+" "+u((z=(U=e.positionInfo)==null?void 0:U.token_b)==null?void 0:z.symbol)+" per "+u(($=(le=e.positionInfo)==null?void 0:le.token_a)==null?void 0:$.symbol),1)])):(r(),c("div",fr,[a("div",gr,u(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(String(1/Number(e.positionInfo&&e.positionInfo.maxPrice)),6))),1),e.store.theme=="default"?(r(),c("img",br)):(r(),c("img",kr)),a("div",hr,u(e.positionInfo&&e.positionInfo.maxPrice.indexOf("∞")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(String(1/Number(e.positionInfo&&e.positionInfo.minPrice)),6)))+" "+u((m=(_e=e.positionInfo)==null?void 0:_e.token_a)==null?void 0:m.symbol)+" per "+u((y=(E=e.positionInfo)==null?void 0:E.token_b)==null?void 0:y.symbol),1)])),(r(),c("svg",{class:"icon-change","aria-hidden":"true",onClick:n[1]||(n[1]=b=>e.rateChange=!e.rateChange)},yr))])]}),_:1},8,["loading"])]),re(D,{disabled:("checkNullObj"in e?e.checkNullObj:ae(fo))(e.positionInfo),onClick:n[2]||(n[2]=U=>e.router.push(`/new-position-detail?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}&pos=${e.positionInfo.pos_object_id}`))},{default:Ne(()=>[Oe(u(e.$t("newAdd.viewDetail")),1)]),_:1},8,["disabled"])]),_:1},8,["title"])}const Pr=po(Qi,[["render",wr],["__scopeId","data-v-a2edb48c"]]),Ir=vo({components:{Modal:ft},setup(){const e=co(),n=H(()=>e);return{importIcon:je,store:n}}}),$r=""+new URL("img-Creat-success_2x.b6f0a395.png",import.meta.url).href,Sr=""+new URL("img-Creat-success.9734ad6f.png",import.meta.url).href;const Tr=e=>(Fo("data-v-d7a9ceb3"),e=e(),jo(),e),Nr=Tr(()=>a("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ar={class:"create-success-container"},qr={key:0,src:$r,alt:""},Lr={key:1,src:Sr,alt:""},Rr={class:"waiting-title"};function Ur(e,n,_,j,F,K){const X=gt("Modal");return r(),ue(X,{visible:!0,class:"",centered:"",title:"",width:"400px",footer:null,onCancel:n[0]||(n[0]=ne=>e.$emit("onClose"))},{closeIcon:Ne(()=>[Nr]),default:Ne(()=>[a("div",Ar,[e.store.theme=="default"?(r(),c("img",qr)):(r(),c("img",Lr)),a("p",Rr,u(e.$t("newAdd.createPoolSuccessText")),1)])]),_:1})}const Mr=po(Ir,[["render",Ur],["__scopeId","data-v-d7a9ceb3"]]),Or={1e-4:2,5e-4:10,.002:60,.006:200},_r={1e-4:2,5e-4:10,.0025:60,.01:200},Br=vo({setup(){let e=g(!1);const{t:n,locale:_}=Ht(),j=Et(),F=H(()=>j),K=co(),X=g(0),ne=g(!1),D=g(!1),G=g(!1),J=g("fromCoin"),U=g(""),z=g(""),le=g(!1),$=g(!0),_e=g(!1),m=g(!0),E=g(!1),y=g(""),b=g(""),i=g(""),p=g(""),B=g(""),Q=g(""),we=g(!1),Le=g(!1),me=g(!1),W=g(""),se=g(0),Z=g(!0),ie=g(!1),He=g([]),Y=g(""),$e=g(30),be=g("30D"),Ue=g("Estimated APR"),de=g([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),Ve=g(!0),oe=co(),R=H(()=>oe),Io=H(()=>{var o;return!!((o=v==null?void 0:v.query)!=null&&o.action&&(!l.value||!s.value||!W.value))}),N=H(()=>R.value.chainName?Ln(R.value.chainName):{}),ro=H(()=>{var o;return(o=R.value)==null?void 0:o.filterCreatePoolCoin}),Ao=o=>{Ye.updateCurrentPools(A.value.poolAddress,R.value.chainName),be.value=o.time,$e.value=o.num},qo=()=>{Ve.value=!Ve.value},$o=g([]),So=()=>{X.value=0,v.query.action!=="create-pool"&&v.query.actions!=="new-position"&&(Qo(),uo(),Ye.updateCurrentPools(A.value.poolAddress,R.value.chainName)),Ye.setPoolConfigList(gn.value,R.value.filterCoinsObj)},Ko=H(()=>Number(i.value)>0&&Number(p.value)>0&&Number(i.value)>Number(p.value)),eo=o=>{_e.value=o,i.value="0",p.value="∞"},ze=H(()=>{if(q.value.poolConfigList&&l.value&&s.value){const o=q.value.poolConfigList.filter(d=>{var k,P,w,T;return d.token_a.address.toUpperCase()===((k=l.value.address)==null?void 0:k.toUpperCase())&&d.token_b.address.toUpperCase()===((P=s.value.address)==null?void 0:P.toUpperCase())||d.token_b.address.toUpperCase()===((w=l.value.address)==null?void 0:w.toUpperCase())&&d.token_a.address.toUpperCase()===((T=s.value.address)==null?void 0:T.toUpperCase())}),t=[];return o.forEach(d=>{t.push(Number(d.fee))}),t}else return[]}),go=o=>{const t={};let d=new h(0);o.forEach(O=>{d=d.add(new h(O.object.liquidity))});const k=[];let P=new h(0);o.forEach(O=>{const L=new h(O.object.liquidity),V=L.gt(0)?new h(L).div(d).mul(100).toString():0,x=xo(V,2);P=P.plus(x);const ee=x.split(".");k.push({value:x,int:ee[0],decimal:ee[1],fee:O.fee})});let w=new h(100).minus(P).toNumber();const T=k.sort((O,L)=>Number(L.decimal)-Number(O.decimal));if(w)for(let O=0;O<T.length&&w;O++)T[O].value=new h(T[O].value).plus(.01).toString(),w=new h(w).minus(.01).toNumber();return o.forEach(O=>{var V;const L=(V=T.find(x=>O.fee===x.fee))==null?void 0:V.value;t[O.fee]={rateText:(L>0&&L<.01?"<0.01":L==0?0:xo(L,2))+"% select",rate:L}}),t},bo=H(()=>{if(q.value.poolConfigList&&l.value&&s.value){const o=q.value.poolConfigList.filter(d=>{var w,T,O,L;const k=d.coin_a_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":d.coin_a_address,P=d.coin_b_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":d.coin_b_address;return k.toUpperCase()===((w=l.value.address)==null?void 0:w.toUpperCase())&&P.toUpperCase()===((T=s.value.address)==null?void 0:T.toUpperCase())||P.toUpperCase()===((O=l.value.address)==null?void 0:O.toUpperCase())&&k.toUpperCase()===((L=s.value.address)==null?void 0:L.toUpperCase())});return go(o)}}),Je=H(()=>[{label:.01+"% "+n("common.feeTier"),title:.01+"% ",fee:1e-4,text:n("newAdd.bestVeryStablePairs")},{label:.05+"% "+n("common.feeTier"),title:.05+"% ",fee:5e-4,text:n("newAdd.bestStablePairs")},R.value.chainName=="Aptos"?{label:.2+"% "+n("common.feeTier"),title:.2+"% ",fee:.002,text:n("newAdd.bestMostPairs")}:{label:.25+"% "+n("common.feeTier"),title:.25+"% ",fee:.0025,text:n("newAdd.bestMostPairs")},R.value.chainName=="Aptos"?{label:.6+"% "+n("common.feeTier"),title:.6+"% ",fee:.006,text:n("newAdd.besteExoticPairs")}:{label:"1% "+n("common.feeTier"),title:"1% ",fee:.01,text:n("newAdd.besteExoticPairs")}]),Ee=H(()=>K.slippage),Lo=H(()=>!l.value||!s.value),Eo=H(()=>{var o,t;return!!(!y.value&&!b.value||Number(y.value)>Number(Ke.value)||Number(b.value)>Number(Ze.value)||M.value!==n("button.addLiquidity")&&M.value!==n("newAdd.preview")||A.value&&A.value&&A.value.is_pause||(o=v==null?void 0:v.query)!=null&&o.action&&!S.value&&!((t=S.value)!=null&&t.currentPrice)||Number(y.value)<=0&&Number(b.value)<=0||!ke.value&&Number(y.value)==0||!he.value&&Number(b.value)==0||me.value)}),M=H(()=>{var o,t;return A.value&&A.value.is_pause?"Pool Closed":!l.value||!s.value?n("modal.selectTokenModalTitle"):gn.value=="Sui"&&!ze.value.includes(1e-4)&&!ze.value.includes(5e-4)&&!ze.value.includes(.0025)&&!ze.value.includes(.01)&&!ro.value[l==null?void 0:l.value.address]&&!ro.value[(o=s.value)==null?void 0:o.address]?"Invalid Pool":(v.query.action||v.query.actions)&&!W.value&&kn[R.value.chainName].hasCreatePool?"Select fee tier":Lo.value?n("modal.selectTokenModalTitle"):!kn[R.value.chainName].hasCreatePool&&!A.value?n("button.poolNotFound"):Number(y.value)>Number(Ke.value)?n("button.insufficientBalance",{name:l.value.symbol}):Number(b.value)>Number(Ze.value)?n("button.insufficientBalance",{name:s.value.symbol}):E.value?n("modal.selectTokenModalTitle"):!A.value&&l.value&&s.value&&((t=v==null?void 0:v.query)==null?void 0:t.action)=="create-pool"?n("newAdd.preview"):!Number(y.value)&&!Number(b.value)?n("button.enterAmount"):p.value!=="∞"&&Number(i.value)>=Number(p.value)?n("newAdd.invalidRange"):n("button.addLiquidity")}),I=H(()=>{var o,t,d;return!A.value||fo(R.value.addressHistTokens)||!R.value.addressHistTokens[(o=A.value)==null?void 0:o.poolAddress]?null:Object.fromEntries((d=R.value.addressHistTokens[(t=A.value)==null?void 0:t.poolAddress])==null?void 0:d.data.map(k=>[k.key,k.value]))}),oo=H(()=>$.value?I.value&&Ae($e.value==7?I.value.before_7_d_contract_price_lowest:$e.value==24?I.value.before_24_h_contract_price_lowest:I.value.before_30_d_contract_price_lowest,6)||0:I.value&&Ae(new h(1).div($e.value==7?I.value.before_7_d_contract_price_highest:$e.value==24?I.value.before_24_h_contract_price_highest:I.value.before_30_d_contract_price_highest).toString(),6)||0),Me=H(()=>$.value?I.value&&Ae($e.value==7?I.value.before_7_d_contract_price_highest:$e.value==24?I.value.before_24_h_contract_price_highest:I.value.before_30_d_contract_price_highest,6)||0:(I.value&&Ae(1/Number($e.value==7?I.value.before_7_d_contract_price_lowest:$e.value==24?I.value.before_24_h_contract_price_lowest:I.value.before_30_d_contract_price_lowest),6))==1/0?0:I.value&&Ae(1/Number($e.value==7?I.value.before_7_d_contract_price_lowest:$e.value==24?I.value.before_24_h_contract_price_lowest:I.value.before_30_d_contract_price_lowest),6)||0),Ce=Rn(),l=g(),s=g();hn(()=>{document.body.clientWidth<750?(Ve.value=!1,e.value=!1):(Ve.value=!0,e.value=!0)});const tn=o=>{var t,d;if((t=A.value)==null||t.token_a.decimals,(d=A.value)==null||d.token_b.decimals,v.query.action&&_o.value&&o!==i.value){$n();return}o!==i.value&&Y.value=="full range"?vn({key:"custom",...to.value.custom}):(Y.value!=="full range"&&Y.value!=="custom"&&(Y.value="custom"),i.value=o)},an=o=>{if(v.query.action&&_o.value&&o!==p.value){$n();return}o!==p.value&&Y.value=="full range"?vn({key:"custom",...to.value.custom}):(Y.value!=="full range"&&Y.value!=="custom"&&(Y.value="custom"),p.value=o)},rn=()=>{var t;if(v.query.action)$.value=!$.value,S.value&&fn(Ae(new h(1).div(S.value.currentPrice).toString(),(t=s==null?void 0:s.value)==null?void 0:t.decimals));else if(Z.value=!0,Z.value=!1,$.value=!$.value,i.value!==""&&p.value!==""&&i.value!=="0"&&p.value!=="∞"){const d=i.value,k=p.value;i.value=new h(1).div(k).toString(),p.value=new h(1).div(d).toString();const P=B.value,w=Q.value;B.value=new h(1).div(w).toString(),Q.value=new h(1).div(P).toString(),ie.value=!1}const o=l.value;l.value=s.value,s.value=o,m.value?y.value=b.value:b.value=y.value};ge([i,p],([o,t])=>{Number(o)!==0&&Number(t)!==0&&uo(),t!=="∞"&&Number(o)!==0&&Number(t)!==0&&Number(o)>=Number(t)?me.value=!0:me.value=!1,Number(o)==0&&Number(t)==0&&We.value&&(me.value=!0)});const Ro=g(!1),Uo=g(!1),ln=o=>{var t,d,k,P,w,T,O,L,V;J.value=o,o==="fromCoin"?(U.value=((t=s.value)==null?void 0:t.address)||"",z.value=v.query.action=="create-pool"||v.query.actions=="new-position"||!A.value?(d=l.value)==null?void 0:d.address:A.value.needReverse?A.value.token_b.address:A.value.token_a.address,((k=v==null?void 0:v.query)==null?void 0:k.action)=="create-pool"&&((P=v==null?void 0:v.query)==null?void 0:P.from)==="pool"?Uo.value=!0:Uo.value=!1,Ro.value=!1):(U.value=((w=l.value)==null?void 0:w.address)||"",z.value=v.query.action=="create-pool"||v.query.actions=="new-position"||!A.value?(T=s.value)==null?void 0:T.address:A.value.needReverse?A.value.token_a.address:A.value.token_b.address,((O=v==null?void 0:v.query)==null?void 0:O.action)=="create-pool"&&((L=v==null?void 0:v.query)==null?void 0:L.from)==="pool"&&!ro[(V=l.value)==null?void 0:V.address]?Ro.value=!0:Ro.value=!1,Uo.value=!1),le.value=!0},Se=g(null),Te=g(null),Zo=g({}),Go=g({}),sn=o=>{var k,P,w,T;E.value=!1;const t=A.value?A.value.needReverse?A.value.token_b:A.value.token_a:Se.value,d=A.value?A.value.needReverse?A.value.token_a:A.value.token_b:Te.value;J.value==="fromCoin"?(((k=l.value)==null?void 0:k.address)===(t==null?void 0:t.address)||!((P=l.value)!=null&&P.address)?(s.value&&o.address.toLowerCase()===(s==null?void 0:s.value.address.toLowerCase())&&(s.value=null,Te.value=null,W.value=""),l.value=o):(l.value&&o.address.toLowerCase()===(l==null?void 0:l.value.address.toLowerCase())&&(l.value=null,Se.value=null,W.value=""),s.value=o),Se.value=o,v.query.action||(v.query.fee="")):(((w=s.value)==null?void 0:w.address)===(d==null?void 0:d.address)||!((T=s.value)!=null&&T.address)?(l.value&&o.address.toLowerCase()===(l==null?void 0:l.value.address.toLowerCase())&&(l.value=null,Se.value=null,W.value=""),s.value=o):(s.value&&o.address.toLowerCase()===(s==null?void 0:s.value.address.toLowerCase())&&(s.value=null,Te.value=null,W.value=""),l.value=o),Te.value=o,v.query.action||(v.query.fee="")),fn(""),le.value=!1},un=o=>{o==="fromCoin"?(m.value=!0,R.value.chainName==="Aptos"?y.value=Number(Ke.value)>0?l.value.symbol=="APT"?new h(Number(Ke.value)).sub(new h(.1)).lt(new h(0))?"0":new h(Number(Ke.value)).sub(new h(.1)).toString():String(Ke.value):"":y.value=Number(Ke.value)>0?l.value.symbol=="SUI"?new h(Number(Ke.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(Ke.value)).sub(new h(.05)).toString():String(Ke.value):""):(m.value=!1,R.value.chainName==="Aptos"?b.value=Number(Ze.value)>0?s.value.symbol=="APT"?new h(Number(Ze.value)).sub(new h(.1)).lt(new h(0))?"0":new h(Number(Ze.value)).sub(new h(.1)).toString():String(Ze.value):"":b.value=Number(Ze.value)>0?s.value.symbol=="SUI"?new h(Number(Ze.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(Ze.value)).sub(new h(.05)).toString():String(Ze.value):"")},dn=o=>{o==="fromCoin"?(m.value=!0,y.value=Number(Ke.value)>0?xo(new h(Number(Ke.value)).div(2).toString(),l.value.decimals).toString():""):(m.value=!1,b.value=Number(Ze.value)>0?xo(new h(Number(Ze.value)).div(2).toString(),s.value.decimals).toString():"")};ge(y,(o,t)=>{o==""&&m.value&&(b.value=""),o&&m.value&&uo()}),ge(b,(o,t)=>{o==""&&!m.value&&(y.value=""),o&&!m.value&&uo()});const cn=()=>{l.value=null,s.value=null,i.value="0",p.value="0",y.value="",b.value="",E.value=!0,W.value="",we.value=!1,ke.value=!0,he.value=!0,Z.value=!1},lo=g(!1),{setIsShowSuccess:ko,setIsShowRejected:ho,setIsShowWaiting:Qe,setTransactionDesc:Wo,setTransactionTxid:Co,setPositiomNum:Do}=K,v=vt(),Ye=nn(),To=H(()=>kn[R.value.chainName].hasCreatePool);ge(()=>[W.value,v.query.action,l.value,s.value,v.query.actions,To.value],([o,t,d,k,P,w])=>{!o&&(t=="create-pool"||P=="new-position")&&d&&k&&w?(we.value=!0,Z.value=!1):(!d||!k)&&(we.value=!1)},{immediate:!0});const q=H(()=>Ye);ge(()=>q.value.tokens,async o=>{if(o&&o.length>0){const t=o;if(v&&v.query&&v.query.tokena&&v.query.tokena){const d=await N.value.getTokenBySymbol(t,v.query.tokena);l.value=d,Se.value=d}if(v&&v.query&&v.query.tokenb&&v.query.tokenb){const d=await N.value.getTokenBySymbol(t,v.query.tokenb);s.value=d,Te.value=d}}},{immediate:!0});const yo=g({}),ke=g(!1),he=g(!1),Ho=g(),zo=g(),We=g(),so=g(),uo=async()=>{var Re,pe,xe,Be,ye,De;if(!i.value&&!p.value)return!1;if(!y.value&&!b.value&&!i.value&&!p.value)return;const o=A.value?A.value:S.value;if(fo(o))return;const{TickUtil:t,TickMath:d,getNearestTickByTick:k}=N.value,P=o==null?void 0:o.token_a.decimals,w=o==null?void 0:o.token_b.decimals;let T,O,L,V,x,ee,ce,Pe,ve=o.current_tick_index,te;if(o.token_a.address.toLowerCase()===l.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===s.value.address.toLowerCase()?te=!0:te=!1,i.value==="0"&&p.value==="∞")L=t.getMinIndex(Number(o.tickSpacing)),V=t.getMaxIndex(Number(o.tickSpacing)),x=d.tickIndexToSqrtPriceX64(L),ee=d.tickIndexToSqrtPriceX64(V);else if(Y.value=="custom"||v.query.action){te?(T=Number(i.value),O=Number(p.value)):(T=new h(1).div(p.value).toString(),O=new h(1).div(i.value).toString());try{ce=T==0?-443636:d.priceToTickIndex(new h(T),P,w)}catch{ce=-443636}try{Pe=d.priceToTickIndex(new h(O),P,w)}catch{Pe=443636}L=k(ce,Number(o.tickSpacing)),V=k(Pe,Number(o.tickSpacing)),x=d.priceToSqrtPriceX64(new h(T),P,w);try{ee=d.priceToSqrtPriceX64(new h(O),P,w)}catch{O===1/0&&(ee=d.tickIndexToSqrtPriceX64(t.getMaxIndex(Number(o.tickSpacing))))}}else L=(Re=to.value[Y.value])==null?void 0:Re.lower,V=(pe=to.value[Y.value])==null?void 0:pe.upper,x=d.tickIndexToSqrtPriceX64(L),ee=d.tickIndexToSqrtPriceX64(V);if(p.value!=="∞"&&L>=V){ke.value=!0,y.value="",he.value=!0,b.value="";return}if(p.value==="∞"||ve>=L&&ve<=V){ke.value=!1,he.value=!1;let qe;if(y.value||b.value){if(m.value){const wo=new h(y.value).mul(Math.pow(10,l.value.decimals)).toString();qe=new Po(wo)}else{const wo=new h(b.value).mul(Math.pow(10,s.value.decimals)).toString();qe=new Po(wo)}const{liquidityAmount:Ie,tokenMaxA:no,tokenMaxB:Ge,tokenMaxAOrigin:Xe,tokenMaxBOrigin:mo}=N.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:o.token_a,tokenB:o.token_b,lowerTick:L,upperTick:V,coinAmount:qe,iscoinA:te?m.value:!m.value,roundUp:!0,slippage:Number(Ee.value)/100,curSqrtPrice:new Po(o.current_sqrt_price)});yo.value={liquidityAmount:Ie,tokenMaxA:no,tokenMaxB:Ge,tokenMaxAOrigin:Xe,tokenMaxBOrigin:mo},te?m.value?b.value=Number(Ge)>0?Ge:"":y.value=Number(no)>0?no:"":m.value?b.value=no:y.value=Ge}}else if(ve>V){if(te?y.value="":b.value="",ke.value=te,he.value=!te,(xe=v==null?void 0:v.query)!=null&&xe.action&&(ke.value=!0,he.value=!0),y.value||b.value){let qe;if(te){const Ie=new h(b.value).mul(Math.pow(10,(Be=s.value)==null?void 0:Be.decimals)).toString();qe=new Po(Ie),yo.value={liquidityAmount:N.value.estimateLiquidityForCoinB(x,ee,qe),tokenMaxA:0,tokenMaxB:b.value}}else{const Ie=new h(y.value).mul(Math.pow(10,(ye=l.value)==null?void 0:ye.decimals)).toString();qe=new Po(Ie),yo.value={liquidityAmount:N.value.estimateLiquidityForCoinB(x,ee,qe),tokenMaxA:0,tokenMaxB:y.value}}}}else if(ve<L){if(ke.value=!te,he.value=te,(De=v==null?void 0:v.query)!=null&&De.action&&(ke.value=!0,he.value=!0),te?b.value="":y.value="",y.value||b.value){let qe;if(te){const Ie=new h(y.value).mul(Math.pow(10,l.value.decimals)).toString();qe=new Po(Ie),yo.value={liquidityAmount:N.value.estimateLiquidityForCoinA(x,ee,qe),tokenMaxA:y.value,tokenMaxB:0}}else{const Ie=new h(b.value).mul(Math.pow(10,s.value.decimals)).toString();qe=new Po(Ie),yo.value={liquidityAmount:N.value.estimateLiquidityForCoinA(x,ee,qe),tokenMaxA:b.value,tokenMaxB:0}}}}else ke.value=!0,y.value="",he.value=!0,b.value=""},Mo=g(0);ge(()=>{var o;return(o=v.query)==null?void 0:o.fee},o=>{o&&(Mo.value=o,W.value=Number(o)*100+"% "+n("common.feeTier"))},{immediate:!0,deep:!0});const Jo=H(()=>{var P,w,T;const o=(P=v==null?void 0:v.query)==null?void 0:P.fee,t=(w=v==null?void 0:v.query)==null?void 0:w.tokena,d=(T=v==null?void 0:v.query)==null?void 0:T.tokenb;let k=null;for(let O=0;O<q.value.poolConfigList.length;O++){const L=q.value.poolConfigList[O];!t||!d?k={}:(L.token_a.address.toUpperCase()===(t==null?void 0:t.toUpperCase())&&L.token_b.address.toUpperCase()===(d==null?void 0:d.toUpperCase())||L.token_b.address.toUpperCase()===(t==null?void 0:t.toUpperCase())&&L.token_a.address.toUpperCase()===(d==null?void 0:d.toUpperCase()))&&(k=L)}return k}),A=H(()=>{var t,d,k,P,w,T,O,L,V,x,ee,ce,Pe;const o=(t=v==null?void 0:v.query)==null?void 0:t.fee;if(l.value&&s.value){let ve=null;if(o)for(const Re in q.value.poolsObj){const pe=q.value.poolsObj[Re];(pe.token_a.address.toUpperCase()===((k=(d=l==null?void 0:l.value)==null?void 0:d.address)==null?void 0:k.toUpperCase())&&pe.token_b.address.toUpperCase()===((w=(P=s==null?void 0:s.value)==null?void 0:P.address)==null?void 0:w.toUpperCase())&&Number(pe.fee)==Number(Mo.value)||pe.token_b.address.toUpperCase()===((T=l==null?void 0:l.value.address)==null?void 0:T.toUpperCase())&&pe.token_a.address.toUpperCase()===((L=(O=s==null?void 0:s.value)==null?void 0:O.address)==null?void 0:L.toUpperCase())&&Number(pe.fee)==Number(Mo.value))&&(ve=pe)}const te=[];if(!((V=v==null?void 0:v.query)!=null&&V.action)&&(!o||!ve)){for(const Re in q.value.poolsObj){const pe=q.value.poolsObj[Re];(pe.token_a.address.toUpperCase()===((x=l==null?void 0:l.value.address)==null?void 0:x.toUpperCase())&&pe.token_b.address.toUpperCase()===((ee=s.value.address)==null?void 0:ee.toUpperCase())||pe.token_b.address.toUpperCase()===((ce=l==null?void 0:l.value.address)==null?void 0:ce.toUpperCase())&&pe.token_a.address.toUpperCase()===((Pe=s.value.address)==null?void 0:Pe.toUpperCase()))&&te.push(pe)}te&&te.length>0&&(ve=te.sort((Re,pe)=>{const xe=Re.coinAmountA+Re.coinAmountB;return pe.coinAmountA+pe.coinAmountB-xe})[0])}return ve&&!fo(ve)?ve:null}return null}),f=H(()=>{var k,P;const o=(k=l==null?void 0:l.value)==null?void 0:k.address,t=(P=s==null?void 0:s.value)==null?void 0:P.address;let d=null;for(let w=0;w<q.value.poolConfigList.length;w++){const T=q.value.poolConfigList[w];!o||!t?d={}:(T.token_a.address.toUpperCase()===(o==null?void 0:o.toUpperCase())&&T.token_b.address.toUpperCase()===(t==null?void 0:t.toUpperCase())||T.token_b.address.toUpperCase()===(o==null?void 0:o.toUpperCase())&&T.token_a.address.toUpperCase()===(t==null?void 0:t.toUpperCase()))&&(d=T)}return d});ge(()=>[Jo.value,A.value,q.value.recommendRangesObj],(o,t)=>{var d,k,P,w,T;o[0]&&!o[1]&&o[2]&&!fo(o[2])&&(!t||o[0]&&((d=o[0])==null?void 0:d.address)!==t[0]&&((k=t[0])!=null&&k.address))&&(P=o[0])!=null&&P.address&&!((w=v==null?void 0:v.query)!=null&&w.action)&&Ye.setSinglePool(o[0],o[2][(T=o[0])==null?void 0:T.address],R.value.chainName)},{immediate:!0,deep:!0});const to=g({}),Oo=async(o,t)=>{var d,k,P,w;if(o){const{TickMath:T,getNearestTickByTick:O}=N.value;t&&(Z.value=!0,ke.value=!1,he.value=!1),o.token_a.address.toLowerCase()===l.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===s.value.address.toLowerCase()?$.value=!0:$.value=!1,ie.value=!0;const L=o.token_a.decimals,V=o.token_b.decimals;W.value=o.fee*100+"% "+n("common.feeTier");const x=o.current_tick_index;We.value=T.sqrtPriceX64ToPrice(o.current_sqrt_price,L,V).toString(),so.value=new h(1).div(new h(We.value)).toString();const ee=await N.value.getTicks(o);if(He.value=ee?N.value.getTickDataFromUrlData(ee):[],t){let ce=q.value.poolPriceConfigObj&&q.value.poolPriceConfigObj[o.address]&&q.value.poolPriceConfigObj[o.address].recommend_ranges||{};const Pe=q.value.poolPriceConfigObj&&q.value.poolPriceConfigObj[o.address]&&q.value.poolPriceConfigObj[o.address].type||"",ve=x-Number(Pe=="unstable"?Number(o.tickSpacing)*2:Number(o.tickSpacing)*3),te=x+Number(Pe=="unstable"?Number(o.tickSpacing)*2:Number(o.tickSpacing)*3),Re=(k=(d=A==null?void 0:A.value)==null?void 0:d.token_a)==null?void 0:k.decimals,pe=(w=(P=A==null?void 0:A.value)==null?void 0:P.token_b)==null?void 0:w.decimals,xe=N.value.TickMath.tickIndexToPrice(ve,Re,pe).toString(),Be=N.value.TickMath.tickIndexToPrice(te,Re,pe).toString();ce["full range"]={lower:-443636,upper:443636},ce.custom={lower:ve,upper:te,minPrice:xe,maxPrice:Be};const ye=[];for(let De in ce)ce[De]&&ye.push({...ce[De],key:De});$o.value=ye,Pe?o.isSelfBuilt?Y.value="custom":Pe=="stable"?Y.value="suggested":Y.value="passive":Y.value="custom",to.value=ce,vn({key:Y.value,...ce[Y.value]})}Z.value=!1}else Z.value=!1},Xo=H(()=>Ye.getPoolInfoSuccess);ge(()=>A.value,(o,t)=>{var d,k,P,w,T,O,L,V,x,ee,ce,Pe;o&&o.current_sqrt_price?((!t||o.poolAddress!==t.poolAddress||o.current_sqrt_price!==t.current_sqrt_price)&&Oo(o,!t||o.poolAddress!==t.poolAddress),(v==null?void 0:v.name)=="deposit"&&Ce.push(`/deposit?poolAddress=${o==null?void 0:o.address}&tokena=${(d=l==null?void 0:l.value)==null?void 0:d.address}&tokenb=${(k=s==null?void 0:s.value)==null?void 0:k.address}&fee=${o==null?void 0:o.fee}`)):((P=v==null?void 0:v.query)==null?void 0:P.actions)=="new-position"||(!f.value&&To.value&&((w=l==null?void 0:l.value)!=null&&w.address||(T=s==null?void 0:s.value)!=null&&T.address)?(W.value="",i.value="0",p.value="∞",ke.value=!1,he.value=!1,Z.value=!1,We.value="",so.value="",(v==null?void 0:v.name)=="deposit"&&Ce.push(`/deposit?action=create-pool&tokena=${(O=l==null?void 0:l.value)==null?void 0:O.address}&tokenb=${(L=s==null?void 0:s.value)==null?void 0:L.address}&from=${(V=v==null?void 0:v.query)==null?void 0:V.from}`)):To.value&&!o&&!((x=v==null?void 0:v.query)!=null&&x.action)&&Xo.value&&!Jo.value?(W.value="",i.value="0",p.value="∞",ke.value=!1,he.value=!1,Z.value=!1,We.value="",so.value="",(v==null?void 0:v.name)=="deposit"&&Ce.push(`/deposit?action=create-pool&tokena=${(ee=l==null?void 0:l.value)==null?void 0:ee.address}&tokenb=${(ce=s==null?void 0:s.value)==null?void 0:ce.address}&from=${(Pe=v==null?void 0:v.query)==null?void 0:Pe.from}`)):(ke.value=!1,he.value=!1,Z.value=!1,We.value="",so.value=""))},{immediate:!0});const Ke=H(()=>F.value.assets&&l.value&&F.value.assets[l.value.address]?nt(F.value.assets[l.value.address].balance,l.value.decimals):"0"),Ze=H(()=>F.value.assets&&s.value&&F.value.assets[s.value.address]?nt(F.value.assets[s.value.address].balance,s.value.decimals):"0"),Qo=async()=>{const o=await N.value.getTicks(A.value),t=o?N.value.getTickDataFromUrlData(o):[];He.value=t},Pn=sa(),Vo=H(()=>q.value.currentPositionInfo),Pt=async o=>{var x,ee,ce,Pe,ve,te,Re,pe,xe,Be;lo.value=!1,q.value.currentPositionInfo={},Co(""),Wo(n("tips.increaseLiquiditySuccess",{from:ke.value?"":`${y.value} ${(x=l.value)==null?void 0:x.symbol}`,and:!ke.value&&!he.value?"and":"",to:he.value?"":`${b.value} ${(ee=s.value)==null?void 0:ee.symbol}`})),Qe(!0);const t=$.value?m.value:!m.value;let d,k,P,w,T,O;const L=A.value.token_a.decimals,V=A.value.token_b.decimals;if(i.value==="0"&&p.value==="∞")P=N.value.TickUtil.getMinIndex(Number(A.value.tickSpacing)),w=N.value.TickUtil.getMaxIndex(Number(A.value.tickSpacing));else if(Y.value=="custom"){$.value?(d=Number(i.value),k=Number(p.value)):(d=new h(1).div(p.value).toString(),k=new h(1).div(i.value).toString());try{T=d==0?N.value.TickUtil.getMinIndex(Number(A.value.tickSpacing)):N.value.TickMath.priceToTickIndex(new h(d),L,V)}catch{T=N.value.TickUtil.getMinIndex(Number(A.value.tickSpacing))}try{O=N.value.TickMath.priceToTickIndex(new h(k),L,V)}catch{O=N.value.TickUtil.getMaxIndex(Number(A.value.tickSpacing))}P=N.value.getNearestTickByTick(T,Number(A.value.tickSpacing)),w=N.value.getNearestTickByTick(O,Number(A.value.tickSpacing))}else P=to.value[Y.value].lower,w=to.value[Y.value].upper;try{const ye=await N.value.getAddLiquidityTransactionPayload({pool:{poolAddress:A.value.poolAddress,token_a:A.value.token_a,token_b:A.value.token_b},amount:m.value?y.value:b.value,fix_amount_a:t,tick_lower:P,tick_upper:w,index:0,slippage:Number(Ee.value)/100,roundUp:!0,collect_fee:!1,curSqrtPrice:new Po(A.value.current_sqrt_price)});let De;if(R.value.chainName==="Aptos")De=await F.value.currentWallet.signAndSubmitTransaction(ye);else{const qe=await F.value.currentWallet.signAndExecuteTransactionBlock(ye);De=N.value.handleTx(qe)}if(De&&De.hash){Co(De.hash),Qe(!1),ko(!0);const qe=Mn();let Ie;A.value.needReverse?A.value.token_a.address.toLowerCase()===l.value.address.toLowerCase()&&A.value.token_b.address.toLowerCase()===s.value.address.toLowerCase()?Ie=!1:Ie=!0:A.value.token_a.address.toLowerCase()===l.value.address.toLowerCase()&&A.value.token_b.address.toLowerCase()===s.value.address.toLowerCase()?Ie=!0:Ie=!1;const no={title:"Supplied",desc:n("tips.addLiquiditySuccessText",{from:ke.value?"":`${y.value} ${(ce=l.value)==null?void 0:ce.symbol}`,and:!ke.value&&!he.value?"and":"",to:he.value?"":`${b.value} ${(Pe=s.value)==null?void 0:Pe.symbol}`}),hash:De.hash,tit:"Position Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:Ie?(ve=l.value)==null?void 0:ve.address:(te=s.value)==null?void 0:te.address,numa:Ie?y.value:b.value,logoa:Ie?q.value.tokensObj&&l.value&&l.value.address&&q.value.tokensObj[l.value.address]&&q.value.tokensObj[l.value.address].logoURI:q.value.tokensObj&&s.value&&s.value.address&&q.value.tokensObj[s.value.address]&&q.value.tokensObj[s.value.address].logoURI,tokenb:Ie?(pe=s.value)==null?void 0:pe.address:(Re=l.value)==null?void 0:Re.address,numb:Ie?b.value:y.value,logob:Ie?q.value.tokensObj&&s.value&&s.value.address&&q.value.tokensObj[s.value.address]&&q.value.tokensObj[s.value.address].logoURI:q.value.tokensObj&&l.value&&l.value.address&&q.value.tokensObj[l.value.address]&&q.value.tokensObj[l.value.address].logoURI},text:`Deopsit ${ke.value?"":`${y.value} ${(xe=l.value)==null?void 0:xe.symbol}`} ${!ke.value&&!he.value?"and":""} ${he.value?"":`${b.value} ${(Be=s.value)==null?void 0:Be.symbol}`}`};R.value.chainName!=="Aptos"&&(no.res=De.res),N.value.showTransitionPending(no);const Ge=await N.value.watchTransaction(no,!0);if(Ge.status){if(ko(!1),q.value.setCurrentPositionLoading(!0),D.value=!0,R.value.chainName==="Aptos"){if(await q.value.setCurrentPositionInfo(Ge.nftInfo[0].data.id.creator,Ge.nftInfo[0].data.id.collection,Ge.nftInfo[0].data.name,R.value.chainName),o)try{await Pn.subscribePosition({pool_address:Vo.value.poolAddress,position_index:Vo.value.index},Vo.value.nftHash)}catch{}}else{const Xe=Ge.nftInfo,mo=await tt(2e3);if(await q.value.setCurrentPositionInfo(Xe==null?void 0:Xe.pool,"","",R.value.chainName,Xe==null?void 0:Xe.position),await tt(1e3),o)try{await Pn.subscribePosition({pool_address:Vo.value.poolAddress,position_index:Vo.value.index},Vo.value.nftHash)}catch{}}setTimeout(()=>{Ye.updateCurrentPools(A.value.poolAddress,R.value.chainName),N.value.getAccount(F.value.address)},3e3),setTimeout(async()=>{Qo()},3e3)}Do()}else Qe(!1),ho(!0);y.value="",b.value=""}catch{y.value="",b.value="",Qe(!1),ho(!0)}},It=o=>{switch(o){case"active":return n("newAdd.activeTips");case"passive":return n("newAdd.passiveTips");case"full range":return n("newAdd.fullRangTips");case"suggested":return n("newAdd.suggestedTips");case"custom":return n("newAdd.customTips")}},$t=o=>{switch(o){case"suggested":return n("newAdd.suggested");case"active":return n("newAdd.active");case"passive":return n("newAdd.conservative");case"full range":return n("newAdd.fullRange");case"custom":return n("newAdd.custom")}},vn=o=>{Y.value=o.key.toLowerCase();const t=A.value.token_a.decimals,d=A.value.token_b.decimals,{lower:k,upper:P}=o,w=N.value.TickMath.tickIndexToPrice(k,t,d).toString(),T=N.value.TickMath.tickIndexToPrice(P,t,d).toString();if(o.key=="full range"){Ho.value=k,zo.value=P,eo(!0),uo();return}$.value?(B.value=String(w),i.value=String(w),Q.value=String(T),p.value=String(T),Ho.value=k,zo.value=P,uo()):(B.value=String(1/Number(T)),i.value=String(1/Number(T)),Q.value=String(1/Number(w)),p.value=String(1/Number(w)),Ho.value=N.value.TickMath.priceToTickIndex(new h(1/Number(T)),t,d),zo.value=N.value.TickMath.priceToTickIndex(new h(1/Number(w)),t,d),uo())},St=H(()=>q.value.tokensObj&&l.value.address&&q.value.tokensObj[l.value.address]&&q.value.tokensObj[l.value.address].logoURI),Tt=H(()=>q.value.tokensObj&&s.value.address&&q.value.tokensObj[s.value.address]&&q.value.tokensObj[s.value.address].logoURI),Mn=()=>{var d,k,P,w,T,O,L,V;let o=null;const t=q.value.poolConfigList;for(let x=0;x<t.length;x++){const ee=t[x];if(ee.token_a.address.toUpperCase()===((k=(d=l==null?void 0:l.value)==null?void 0:d.address)==null?void 0:k.toUpperCase())&&ee.token_b.address.toUpperCase()===((w=(P=s==null?void 0:s.value)==null?void 0:P.address)==null?void 0:w.toUpperCase())||ee.token_b.address.toUpperCase()===((O=(T=l==null?void 0:l.value)==null?void 0:T.address)==null?void 0:O.toUpperCase())&&ee.token_a.address.toUpperCase()===((V=(L=s==null?void 0:s.value)==null?void 0:L.address)==null?void 0:V.toUpperCase())){o=ee;break}}return o},Nt=o=>{var d,k,P,w,T,O,L,V,x,ee;const t=Mn();if(t&&(Se.value=t.needReverse?t==null?void 0:t.token_b:t==null?void 0:t.token_a,Te.value=t.needReverse?t==null?void 0:t.token_a:t==null?void 0:t.token_b,l.value=t.needReverse?t==null?void 0:t.token_b:t==null?void 0:t.token_a,s.value=t.needReverse?t==null?void 0:t.token_a:t==null?void 0:t.token_b,$.value=l.value.address===((d=t==null?void 0:t.token_a)==null?void 0:d.address)),ze.value.includes(o.fee))W.value=o.label,Mo.value=o.fee,Ce.push(`/deposit?tokena=${t?t.needReverse?(P=t==null?void 0:t.token_b)==null?void 0:P.address:(k=t==null?void 0:t.token_a)==null?void 0:k.address:$.value?l.value.address:s.value.address}&tokenb=${t?t.needReverse?(T=t==null?void 0:t.token_a)==null?void 0:T.address:(w=t==null?void 0:t.token_b)==null?void 0:w.address:$.value?s.value.address:l.value.address}&fee=${o.fee}`);else{if(R.value.chainName!=="Aptos"&&!ro.value[l.value.address]&&!ro.value[s.value.address])return;W.value=o.label,A.value&&(i.value="",p.value=""),y.value="",b.value="",We.value="",so.value="",i.value="",p.value="",pn.value="",mn.value="",Ce.push(`/deposit?action=create-pool&tokena=${t?t.needReverse?(L=t==null?void 0:t.token_b)==null?void 0:L.address:(O=t==null?void 0:t.token_a)==null?void 0:O.address:$.value?l.value.address:s.value.address}&tokenb=${t?t.needReverse?(x=t==null?void 0:t.token_a)==null?void 0:x.address:(V=t==null?void 0:t.token_b)==null?void 0:V.address:$.value?s.value.address:l.value.address}&fee=${o.fee}&from=${(ee=v==null?void 0:v.query)==null?void 0:ee.from}`)}},At=g(!1),qt=()=>{A.value,lo.value=!0},S=g(null),pn=g(""),mn=g(""),fn=o=>{var O,L,V,x,ee,ce,Pe,ve,te,Re,pe,xe;if(o?(pn.value=o,We.value=o,so.value=o,mn.value=new h(1).div(new h(o)).toString(),Z.value=!1):(pn.value="",We.value="",so.value="",mn.value=""),!((O=Se.value)!=null&&O.address)||!((L=Te.value)!=null&&L.address))return;let t=!1;const d=q.value.poolConfigList;let k=null;for(let Be=0;Be<d.length;Be++){const ye=d[Be];if(ye.token_a.address.toUpperCase()===((x=(V=Se==null?void 0:Se.value)==null?void 0:V.address)==null?void 0:x.toUpperCase())&&ye.token_b.address.toUpperCase()===((ce=(ee=Te==null?void 0:Te.value)==null?void 0:ee.address)==null?void 0:ce.toUpperCase())){t=ye.needReverse,k=ye;break}else if(ye.token_b.address.toUpperCase()===((ve=(Pe=Se==null?void 0:Se.value)==null?void 0:Pe.address)==null?void 0:ve.toUpperCase())&&ye.token_a.address.toUpperCase()===((Re=(te=Te==null?void 0:Te.value)==null?void 0:te.address)==null?void 0:Re.toUpperCase())){t=ye.needReverse,k=ye;break}}let P=!1;N.value.getIsSortedSymbols((pe=Se.value)==null?void 0:pe.address,(xe=Te.value)==null?void 0:xe.address)&&(P=!0);let w;P&&!$.value?w=!0:P&&$.value||!P&&$.value?w=!1:w=!0;const T=R.value.chainName=="Aptos"?Or:_r;if(l.value&&s.value&&o){const Be=k?k==null?void 0:k.token_a.decimals:P?Te.value.decimals:Se.value.decimals,ye=k?k==null?void 0:k.token_b.decimals:P?Se.value.decimals:Te.value.decimals,De=o&&N.value.TickMath.priceToSqrtPriceX64(w?new h(1/o):new h(o),Be,ye),qe=o&&N.value.TickMath.priceToSqrtPriceX64(new h(1).div(o),l.value.decimals,s.value.decimals),Ie=N.value.TickMath.priceToTickIndex(w?new h(1).div(o):new h(o),Be,ye),no=Ie-T[v.query.fee]*5,Ge=Ie+T[v.query.fee]*5,Xe=N.value.TickMath.tickIndexToPrice(no,Be,ye).toString(),mo=N.value.TickMath.tickIndexToPrice(Ge,Be,ye).toString();_o.value?(i.value="0",p.value="∞"):w?(i.value=String(1/mo),p.value=String(1/Xe),B.value=String(1/mo),Q.value=String(1/Xe)):(i.value=Xe,p.value=mo,B.value=Xe,Q.value=mo);const wo={token_a:k?k.token_a:P?Te.value:Se.value,token_b:k?k.token_b:P?Se.value:Te.value,isCreate:!0,tickSpacing:T[v.query.fee],currentPrice:o,current_sqrt_price:De,tick_lower:no,tick_upper:Ge,current_tick_index:Ie,currentPriceReverse:on(String(1/o),6),reverse_current_sqrt_price:qe,needReverse:t,fee:v.query.fee};S.value=wo,uo()}else S.value=null,i.value="",p.value=""},Lt=async()=>{var V,x,ee,ce;if(R.value.chainName!=="Aptos"){On();return}lo.value=!1;let o,t,d,k,P,w;const T=Se.value.decimals,O=Te.value.decimals;Co(""),Wo(n("tips.increaseLiquiditySuccess",{from:ke.value?"":`${y.value} ${(V=l.value)==null?void 0:V.symbol}`,and:!ke.value&&!he.value?"and":"",to:he.value?"":`${b.value} ${(x=s.value)==null?void 0:x.symbol}`})),Qe(!0),i.value==="0"&&p.value==="∞"?(d=N.value.TickUtil.getMinIndex(Number(S.value.tickSpacing)),k=N.value.TickUtil.getMaxIndex(Number(S.value.tickSpacing))):($.value?(o=Number(i.value),t=Number(p.value)):(o=1/Number(p.value),t=1/Number(i.value)),P=o==0?-443636:N.value.TickMath.priceToTickIndex(new h(o),T,O),w=N.value.TickMath.priceToTickIndex(new h(t),T,O),d=N.value.getNearestTickByTick(P,Number(S.value.tickSpacing)),k=N.value.getNearestTickByTick(w,Number(S.value.tickSpacing)));const L=$.value?m.value:!m.value;try{const Pe=await N.value.getCreatPoolTransactionPayload({coinTypeA:Se.value.address,coinTypeB:Te.value.address,tick_spacing:Number(S.value.tickSpacing),initialize_sqrt_price:new Po(S.value.current_sqrt_price),uri:"",current_tick_index:S.value.current_tick_index,max_amount_a:$.value?y.value:b.value,max_amount_b:$.value?b.value:y.value,tick_lower:d,tick_upper:k,slippage:Number(Ee.value)/100,decimalsA:T,decimalsB:O,fix_amount_a:L,liquidityInput:yo.value});let ve;if(R.value.chainName==="Aptos")ve=await F.value.currentWallet.signAndSubmitTransaction(Pe);else{const te=await F.value.currentWallet.signAndExecuteTransactionBlock(Pe);ve=N.value.handleTx(te)}if(ve&&ve.hash){Co(ve.hash),Qe(!1),ko(!0);const te={title:"Created pool",desc:"Pool created successfully ",hash:ve.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(ee=l.value)==null?void 0:ee.address}`,numa:ke.value?"":`- ${y.value}`,logoa:q.value.tokensObj&&l.value&&l.value.address&&q.value.tokensObj[l.value.address]&&q.value.tokensObj[l.value.address].logoURI,tokenb:`${(ce=s.value)==null?void 0:ce.address}`,numb:he.value?"":`- ${b.value}`,logob:q.value.tokensObj&&s.value&&s.value.address&&q.value.tokensObj[s.value.address]&&q.value.tokensObj[s.value.address].logoURI},text:"Pool created successfully"};R.value.chainName!=="Aptos"&&(te.res=ve.res),N.value.showTransitionPending(te),(await N.value.watchTransaction(te,!0)).status&&(ko(!1),ne.value=!0,setTimeout(()=>{Ye.setPoolConfigList(R.value.chainName,R.value.filterCoinsObj),N.value.getAccount(F.value.address)},1e3)),Do()}else Qe(!1),ho(!0);y.value="",b.value=""}catch{Ye.setPoolConfigList(R.value.chainName,R.value.filterCoinsObj),lo.value=!1,y.value="",b.value="",Qe(!1),ho(!0)}},On=async()=>{var Pe,ve,te,Re,pe,xe,Be,ye,De,qe,Ie,no,Ge,Xe,mo,wo,Bn,Fn,jn,En,Wn,Dn,Hn,zn,Xn,Vn,Kn,Zn,Gn,Jn,Qn,Yn,xn,et,ot;lo.value=!1;let o=!1;N.value.getIsSortedSymbols(Se.value.address,Te.value.address)&&(o=!0),Co("");const t=ke.value?"":`${y.value} ${(Pe=l.value)==null?void 0:Pe.symbol}`,d=he.value?"":`${b.value} ${(ve=s.value)==null?void 0:ve.symbol}`;Wo(n("tips.increaseLiquiditySuccess",{from:!o&&!((te=S==null?void 0:S.value)!=null&&te.needReverse)||o&&((Re=S==null?void 0:S.value)!=null&&Re.needReverse)?t:d,and:!ke.value&&!he.value?"and":"",to:!o&&!((pe=S==null?void 0:S.value)!=null&&pe.needReverse)||o&&((xe=S==null?void 0:S.value)!=null&&xe.needReverse)?d:t})),Qe(!0);let k="",P="",w="",T="",O="",L="",V=0,x=0,ee=!1,ce;if(o||(Be=S==null?void 0:S.value)!=null&&Be.needReverse){const Bo=o&&!((ye=S==null?void 0:S.value)!=null&&ye.needReverse);k=Bo?(no=(Ie=S==null?void 0:S.value)==null?void 0:Ie.token_b)==null?void 0:no.address:(qe=(De=S==null?void 0:S.value)==null?void 0:De.token_a)==null?void 0:qe.address,P=Bo?(wo=(mo=S==null?void 0:S.value)==null?void 0:mo.token_a)==null?void 0:wo.address:(Xe=(Ge=S==null?void 0:S.value)==null?void 0:Ge.token_b)==null?void 0:Xe.address,w=Bo?(En=(jn=S==null?void 0:S.value)==null?void 0:jn.token_b)==null?void 0:En.decimals:(Fn=(Bn=S==null?void 0:S.value)==null?void 0:Bn.token_a)==null?void 0:Fn.decimals,T=Bo?(zn=(Hn=S==null?void 0:S.value)==null?void 0:Hn.token_a)==null?void 0:zn.decimals:(Dn=(Wn=S==null?void 0:S.value)==null?void 0:Wn.token_b)==null?void 0:Dn.decimals,(Xn=S==null?void 0:S.value)!=null&&Xn.needReverse?(O=$.value?y.value:b.value,L=$.value?b.value:y.value,V=$.value?Number(i.value):1/Number(p.value),x=$.value?Number(p.value):1/Number(i.value),ee=$.value?m.value:!m.value,ce=$.value?We.value:1/Number(We.value)):(O=$.value?b.value:y.value,L=$.value?y.value:b.value,V=$.value?1/Number(p.value):Number(i.value),x=$.value?1/Number(i.value):Number(p.value),ee=$.value?!m.value:m.value,ce=$.value?1/Number(We.value):We.value)}else k=(Kn=(Vn=S==null?void 0:S.value)==null?void 0:Vn.token_a)==null?void 0:Kn.address,P=(Gn=(Zn=S==null?void 0:S.value)==null?void 0:Zn.token_b)==null?void 0:Gn.address,w=(Qn=(Jn=S==null?void 0:S.value)==null?void 0:Jn.token_a)==null?void 0:Qn.decimals,T=(xn=(Yn=S==null?void 0:S.value)==null?void 0:Yn.token_b)==null?void 0:xn.decimals,O=$.value?y.value:b.value,L=$.value?b.value:y.value,V=$.value?Number(i.value):1/Number(p.value),x=$.value?Number(p.value):1/Number(i.value),ee=$.value?m.value:!m.value,ce=$.value?We.value:1/Number(We.value);try{const Bo=await N.value.getCreatPoolTransactionPayload({coinTypeA:k,coinTypeB:P,decimalsA:w,decimalsB:T,amountA:O,amountB:L,minPrice:i.value=="0"&&p.value=="∞"?"0":V,maxPrice:i.value=="0"&&p.value=="∞"?"∞":x,fix_amount_a:ee,tick_spacing:Number(S.value.tickSpacing),slippage:Number(Ee.value)/100,price:ce}),Ot=await F.value.currentWallet.signAndExecuteTransactionBlock(Bo),Yo=N.value.handleTx(Ot);if(Yo&&Yo.hash){Co(Yo.hash),Qe(!1),ko(!0);const Sn={title:"Created pool",desc:"Pool created successfully ",hash:Yo.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(et=l.value)==null?void 0:et.address}`,numa:ke.value?"":`- ${y.value}`,logoa:q.value.tokensObj&&l.value&&l.value.address&&q.value.tokensObj[l.value.address]&&q.value.tokensObj[l.value.address].logoURI,tokenb:`${(ot=s.value)==null?void 0:ot.address}`,numb:he.value?"":`- ${b.value}`,logob:q.value.tokensObj&&s.value&&s.value.address&&q.value.tokensObj[s.value.address]&&q.value.tokensObj[s.value.address].logoURI},text:"Pool created successfully"};R.value.chainName!=="Aptos"&&(Sn.res=Yo.res),N.value.showTransitionPending(Sn),(await N.value.watchTransaction(Sn,!0)).status&&(ko(!1),ne.value=!0,setTimeout(()=>{Ye.setPoolConfigList(R.value.chainName,R.value.filterCoinsObj),N.value.getAccount(F.value.address)},1e3)),Do()}else Qe(!1),ho(!0);y.value="",b.value=""}catch{lo.value=!1,Ye.setPoolConfigList(R.value.chainName,R.value.filterCoinsObj),y.value="",b.value="",Qe(!1),ho(!0)}},Rt=H(()=>{var o,t,d,k,P,w;return((o=l.value)==null?void 0:o.isSelfBuilt)||((t=s.value)==null?void 0:t.isSelfBuilt)||((k=q.value.tokensObj[(d=l.value)==null?void 0:d.address])==null?void 0:k.isSelfBuilt)||((w=q.value.tokensObj[(P=s.value)==null?void 0:P.address])==null?void 0:w.isSelfBuilt)}),Ut=o=>{var t;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((t=q.value.tokensObj[o==null?void 0:o.address])==null?void 0:t.logo_url)||(R.value.theme==="default"?je("/image/coins/unknown.png"):je("/image/coins/sui-unknown.png"))},In=(o,t)=>{const d=localStorage.getItem(o.address);q.value.tokensObj&&q.value.tokensObj[o.address]&&q.value.tokensObj[o.address].isSelfBuilt&&!d&&(t=="fromCoin"&&(Zo.value=o),t=="toCoin"&&(Go.value=o),_n.value=!0)};ge(()=>[l.value,s.value],([o,t])=>{o&&!fo(o)&&In(o,"fromCoin"),t&&!fo(t)&&In(t,"toCoin")},{immediate:!0});const _n=g(!1),Mt=()=>{gn.value!=="Aptos"?Ce.push("/pool/list"):Ce.push("/pools")},gn=H(()=>R.value.chainName);ge(()=>[R.value.chainName,R.value.filterCoinsObj],([o,t])=>{o&&t&&Ye.setPoolConfigList(o,t)},{immediate:!0}),ge(()=>[ze.value,ro.value,l.value,s.value,To.value],([o,t,d,k,P])=>{P&&o&&t&&!o.includes(1e-4)&&!o.includes(5e-4)&&!o.includes(.0025)&&!o.includes(.01)&&!t[d==null?void 0:d.address]&&!t[k==null?void 0:k.address]&&(W.value="")},{immediate:!0});const _o=g(!0),$n=()=>{eo(!_o.value),_o.value=!_o.value,fn(S.value.currentPrice)};return{isFullRange:_o,clickFullRange:$n,warningToCoin:Go,warningFromCoin:Zo,getTokenSource:In,closeTokenWarning:Mt,isShowTokenWarning:_n,chainName:gn,hasCreatePool:To,isCreateSuccess:ne,intPriceReverse:mn,isShowMask:Io,isPc:e,intPrice:pn,createPoolToCoin:Te,createPoolFromCoin:Se,getPoolInfoSuccess:Xo,toCreatePool:Lt,createPoolInfo:S,changecurrentPrice:fn,isShowCreatePoolModal:At,addOrCreate:qt,halfBtnSelect:dn,selectFee:Nt,isViewDetail:D,addCommom:Fe,decimalUi:Ae,fromCoinUrl:St,toCoinUrl:Tt,t:n,wallet:F,toAdd:Pt,chartLoading:Z,currentTick:se,tickList:He,poolInfo:A,storeIndex:R,importIcon:je,addLiquidityBtnText:M,slippage:Ee,countdown:X,loading:G,fromCoin:l,toCoin:s,openCoinSelect:ln,onCoinSelect:sn,existingCoins:U,lastSelectCoin:z,currentCoinKey:J,showCoinSelect:le,fromCoinAmount:y,toCoinAmount:b,maxBtnSelect:un,fixedFromCoin:m,isShowLiquidityModal:lo,direct:$,toggle:rn,edit:we,inputValue:W,feeTierList:Je,minPrice:i,maxPrice:p,invalidPriceRange:Ko,defaultMinPrice:B,defaultMaxPrice:Q,priceRangeChangeMin:tn,priceRangeChangeMax:an,toFullRange:eo,clearAll:cn,clickClear:E,positionError:me,positionTips:Le,router:Ce,clickRefresh:So,fromCoinBlance:Ke,toCoinBlance:Ze,showToCoinLock:he,showFromCoinLock:ke,currentPriceReverse:so,currentPrice:We,getPirceText:It,currentPriceTab:Y,currentPriceTabList:$o,getPirceKey:$t,priceTab:vn,aprRewardsParameter:$e,aprRewardsDateList:de,aprTab:Ao,reviseValue:qo,label:Ve,aprTitle:Ue,isCreatePool:ze,before7dContractPriceLowest:oo,before7dContractPriceHighest:Me,aprRewardsTime:be,addLiquidityBtnDisabled:Eo,checkNullObj:fo,sFixD:xo,toCreateSuiPool:On,isSelfBuilt:Rt,getCoinIcon:Ut,isCreatePoolToCoin:Ro,isCreatePoolFromCoin:Uo,filterCreatePoolCoin:ro,poolTvl:bo}}}),yt=""+new URL("img-no-data_2x.e925467a.png",import.meta.url).href,wt=""+new URL("img-no-data_2x.8bc9afa2.png",import.meta.url).href;const io=e=>(Fo("data-v-d1ba06ea"),e=e(),jo(),e),Fr={class:"pools-container"},jr={key:0,class:"content pc-content"},Er={class:"content-left"},Wr={class:"content-left-bg"},Dr={class:"content-left-title"},Hr={key:0,class:"pool-warning"},zr={class:"coin-select"},Xr={key:0,class:"icon","aria-hidden":"true"},Vr=io(()=>a("use",{"xlink:href":"#icon-edit"},null,-1)),Kr=[Vr],Zr={key:0,class:"fee-container"},Gr=["onClick"],Jr={key:0,class:"icon fee-disabled","aria-hidden":"true"},Qr=io(()=>a("use",{"xlink:href":"#icon-icon-disable"},null,-1)),Yr=[Qr],xr={key:1},el={key:2},ol={key:0},nl={key:1,class:"text-active"},tl={class:"deposit-title"},al={class:"card-container"},il={class:"card-item"},rl={class:"card-item"},ll={key:0,class:"icon","aria-hidden":"true"},sl=io(()=>a("use",{"xlink:href":"#icon-icon-add"},null,-1)),ul=[sl],dl={class:"pc-network"},cl={class:"content-right"},vl={key:0,class:"initPrice-mask"},pl={class:"content-right-title"},ml=io(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1)),fl={class:"content-right-bg"},gl={key:1,class:"price-tab"},bl=["onClick"],kl={key:2,class:"create-pool-tips"},hl={key:3,class:"set-price-range"},Cl={class:"radio"},yl={key:0,src:ht},wl=io(()=>a("span",null,"Full Range",-1)),Pl={key:0},Il={key:1,class:"coin"},$l={key:2,class:"coin"},Sl={key:3,class:"no-price"},Tl={alt:""},Nl={alt:""},Al={key:6,class:"position-tips"},ql={alt:""},Ll={class:"tips"},Rl={key:7,class:"position-tips"},Ul={alt:""},Ml={class:"error"},Ol={key:8,class:"d3-chart-box"},_l={key:9,class:"day-7-price-range"},Bl=io(()=>a("i",null,null,-1)),Fl={class:"gray"},jl={key:11,class:"create-pool-tips"},El={key:12,class:"create-pool-warning"},Wl={key:1,class:"no-data"},Dl={key:0,src:yt,alt:""},Hl={key:1,src:wt,alt:""},zl={key:1,class:"content h5-content"},Xl={class:"content-left"},Vl={class:"content-left-bg"},Kl={class:"content-left-title"},Zl={key:0,class:"pool-warning"},Gl={class:"coin-select"},Jl={key:0,class:"icon","aria-hidden":"true"},Ql=io(()=>a("use",{"xlink:href":"#icon-edit"},null,-1)),Yl=[Ql],xl={key:0,class:"fee-container"},es=["onClick"],os={key:0},ns={key:1},ts={key:0},as={key:1,class:"text-active"},is={class:"content-right"},rs={key:0,class:"initPrice-mask"},ls={class:"content-right-title"},ss=io(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1)),us={class:"content-right-bg"},ds={key:1,class:"price-tab"},cs=["onClick"],vs={key:2,class:"create-pool-tips"},ps={key:3,class:"set-price-range"},ms={class:"radio"},fs={key:0,src:ht},gs=io(()=>a("span",null,"Full Range",-1)),bs={key:0},ks={key:1,class:"coin"},hs={key:2,class:"coin"},Cs={key:3,class:"no-price"},ys={alt:""},ws={alt:""},Ps={key:6,class:"position-tips"},Is=["src"],$s={class:"tips"},Ss={key:7,class:"position-tips"},Ts=["src"],Ns={class:"error"},As={key:8,class:"d3-chart-box"},qs={key:9,class:"day-7-price-range"},Ls=io(()=>a("i",null,null,-1)),Rs={class:"gray"},Us={key:11,class:"create-pool-tips"},Ms={key:1,class:"no-data"},Os={key:0,src:yt,alt:""},_s={key:1,src:wt,alt:""},Bs={key:0,class:"icon","aria-hidden":"true"},Fs=io(()=>a("use",{"xlink:href":"#icon-icon-add"},null,-1)),js=[Fs],Es={class:"pc-network"},Ws={class:"new-right"},Ds={class:"deposit-title"},Hs={class:"card-container"},zs={class:"card-item"},Xs={class:"card-item"},Vs={key:0,class:"icon","aria-hidden":"true"},Ks=io(()=>a("use",{"xlink:href":"#icon-icon-add"},null,-1)),Zs=[Ks],Gs={class:"h5-network"};function Js(e,n,_,j,F,K){var se,Z,ie,He,Y,$e,be,Ue,de,Ve,oe,R,Io,N,ro,Ao,qo,$o,So,Ko,eo,ze,go,bo,Je,Ee,Lo,Eo,M,I,oo,Me,Ce,l,s,tn,an,rn,Ro,Uo,ln,Se,Te,Zo,Go,sn,un,dn,cn,lo,ko,ho,Qe,Wo,Co,Do,v,Ye,To,q,yo,ke,he,Ho,zo,We,so,uo,Mo,Jo,A;const X=_t,ne=ga,D=zt,G=Sa,J=Xt,U=Jt,z=Ra,le=xt,$=Un,_e=oa,m=Ba,E=ti,y=ci,b=mt,i=na,p=Ji,B=ra,Q=Pr,we=Mr,Le=Ft,me=ea,W=Cn("image");return r(),c("div",Fr,[re(X,{url:e.storeIndex.theme=="default"?"/pools":"/pool/list"},null,8,["url"]),re(ne,{"pool-info":e.poolInfo,onClearAll:e.clearAll,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClearAll","onClickRefresh"]),e.isPc?(r(),c("div",jr,[a("div",Er,[a("div",Wr,[a("div",Dr,[Oe(u(e.$t("common.selectPool"))+" ",1),re(D,{placement:"bottom","arrow-point-at-center":""},{title:Ne(()=>[a("span",null,u(e.t("newAdd.poolWarning")),1)]),default:Ne(()=>[e.isSelfBuilt?(r(),c("div",Hr)):C("",!0)]),_:1})]),a("div",zr,[re(G,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.logoURI:e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.symbol:e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b:e.poolInfo.token_a:e.createPoolFromCoin,onClick:n[0]||(n[0]=f=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),re(G,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.logoURI:e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.symbol:e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a:e.poolInfo.token_b:e.createPoolToCoin,onClick:n[1]||(n[1]=f=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),a("div",{class:fe(["pool-fee",e.edit?"pool-fee-edit":""])},[a("div",{class:"pool-fee-header",onClick:n[2]||(n[2]=f=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[a("span",{class:fe(e.inputValue?"":"fee-span")},u(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(r(),c("svg",Xr,Kr)):C("",!0)]),e.edit?(r(),c("div",Zr,[(r(!0),c(No,null,en(e.feeTierList,(f,to)=>{var Oo,Xo,Ke,Ze,Qo;return r(),c("div",{key:to,class:fe(["fee-item",[e.inputValue&&e.inputValue==f.label?"fee-item-active":"",e.isCreatePool.includes(f.fee)&&e.$route.query.action?" pool-created":" pool-not-created",e.chainName!=="Aptos"&&!e.isCreatePool.includes(f.fee)&&!e.filterCreatePoolCoin[(Oo=e.fromCoin)==null?void 0:Oo.address]&&!e.filterCreatePoolCoin[(Xo=e.toCoin)==null?void 0:Xo.address]?"disabled":""]]),onClick:Nn(Pn=>e.selectFee(f),["stop"])},[e.chainName!=="Aptos"&&!e.isCreatePool.includes(f.fee)&&!e.filterCreatePoolCoin[(Ke=e.fromCoin)==null?void 0:Ke.address]&&!e.filterCreatePoolCoin[(Ze=e.toCoin)==null?void 0:Ze.address]?(r(),c("svg",Jr,Yr)):C("",!0),e.$route.query.action=="create-pool"?(r(),c("div",xr,[a("p",null,u(f.title),1),a("p",{class:fe(e.isCreatePool&&e.isCreatePool.includes(f.fee)?"text-default":"text-theme")},u(e.isCreatePool&&e.isCreatePool.includes(f.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(r(),c("div",el,[a("p",{class:fe(e.isCreatePool&&e.isCreatePool.includes(f.fee)?"text-active":"text-default")},u(f.title),3),e.isCreatePool&&!e.isCreatePool.includes(f.fee)?(r(),c("p",ol,u(e.$t("newAdd.notCreated")),1)):C("",!0),e.isCreatePool&&e.isCreatePool.includes(f.fee)?(r(),c("p",nl,u(e.poolTvl&&e.poolTvl[f.fee]&&((Qo=e.poolTvl[f.fee])==null?void 0:Qo.rateText)),1)):C("",!0)])),a("span",null,u(f.text),1)],10,Gr)}),128))])):C("",!0)],2),a("div",tl,u(e.$t("newAdd.depositAmounts")),1),a("div",al,[a("div",il,[re(J,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[3]||(n[3]=f=>e.fromCoinAmount=f),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[4]||(n[4]=f=>e.maxBtnSelect("fromCoin")),onOnHalf:n[5]||(n[5]=f=>e.halfBtnSelect("fromCoin")),onOnInput:n[6]||(n[6]=f=>{e.fromCoinAmount=f,e.fixedFromCoin=!0}),onOnSelect:n[7]||(n[7]=f=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&e.$route.query.action!=="create-pool"?(r(),ue(U,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):C("",!0)]),a("div",rl,[re(J,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[8]||(n[8]=f=>e.toCoinAmount=f),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[9]||(n[9]=f=>e.maxBtnSelect("toCoin")),onOnHalf:n[10]||(n[10]=f=>e.halfBtnSelect("toCoin")),onOnInput:n[11]||(n[11]=f=>{e.toCoinAmount=f,e.fixedFromCoin=!1}),onOnSelect:n[12]||(n[12]=f=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&e.$route.query.action!=="create-pool"?(r(),ue(U,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):C("",!0)]),((Z=(se=e.$route)==null?void 0:se.query)==null?void 0:Z.action)=="create-pool"&&(e.showToCoinLock||e.showFromCoinLock||!e.filterCreatePoolCoin[(ie=e.fromCoin)==null?void 0:ie.address]&&!e.filterCreatePoolCoin[(He=e.toCoin)==null?void 0:He.address])?(r(),ue(z,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):C("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(r(),c("img",{key:1,class:"add",src:it,alt:"",onClick:n[13]||(n[13]=(...f)=>e.toggle&&e.toggle(...f))})):C("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(r(),c("img",{key:2,class:"add",src:rt,alt:"",onClick:n[14]||(n[14]=(...f)=>e.toggle&&e.toggle(...f))})):C("",!0)]),e.poolInfo?(r(),ue(le,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):C("",!0)]),re($,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:n[15]||(n[15]=f=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ne(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")&&e.wallet.connected?(r(),c("svg",ll,ul)):C("",!0),a("span",null,u(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),a("div",dl,[re(_e)])]),a("div",cl,[e.isShowMask?(r(),c("div",vl)):C("",!0),a("div",pl,[Oe(u((Y=e.$route)!=null&&Y.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(r(),ue(D,{key:0,placement:"bottom","arrow-point-at-center":""},{title:Ne(()=>[a("span",null,u(e.$t("newAdd.selectRangeTips")),1)]),default:Ne(()=>[ml]),_:1})):C("",!0)]),a("div",fl,[!((be=($e=e.$route)==null?void 0:$e.query)!=null&&be.action)&&e.poolInfo||(de=(Ue=e.$route)==null?void 0:Ue.query)!=null&&de.action?(r(),c(No,{key:0},[(oe=(Ve=e.$route)==null?void 0:Ve.query)!=null&&oe.action&&!e.poolInfo?(r(),ue(m,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):C("",!0),e.poolInfo?(r(),c("div",gl,[(r(!0),c(No,null,en(e.currentPriceTabList,f=>(r(),c("div",{key:f,class:fe(["price-item",{"price-item-active":f.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:to=>e.priceTab(f)},[re(D,{placement:"bottom","arrow-point-at-center":""},{title:Ne(()=>[a("span",null,u(e.getPirceText(f.key)),1)]),default:Ne(()=>[Oe(" "+u(e.getPirceKey(f.key)),1)]),_:2},1024)],10,bl))),128))])):C("",!0),(Io=(R=e.$route)==null?void 0:R.query)!=null&&Io.action&&!e.poolInfo?(r(),c("div",kl,u(e.$t("newAdd.createPoolInitialText")),1)):C("",!0),!e.poolInfo&&((ro=(N=e.$route)==null?void 0:N.query)!=null&&ro.action)?(r(),c("div",hl,[a("div",null,u(e.$t("common.setPriceRange")),1),a("div",null,[a("div",{class:fe(["tab-item",e.isFullRange?"tab-item-active tab-item-farms-active":""]),onClick:n[16]||(n[16]=Nn(f=>e.clickFullRange(),["stop"]))},[a("div",Cl,[e.isFullRange&&e.chainName=="Sui"?(r(),c("img",yl)):C("",!0)]),wl],2)])])):C("",!0),e.poolInfo||(qo=(Ao=e.$route)==null?void 0:Ao.query)!=null&&qo.action?(r(),c("div",{key:4,class:fe(["current-price",(So=($o=e.$route)==null?void 0:$o.query)!=null&&So.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(r(),c("span",Pl,u(e.$t("common.currentPrice")),1)):C("",!0),e.fromCoin&&e.toCoin&&e.direct?(r(),c("div",Il,[a("span",null,u(e.$t("common.currentPrice")),1),Oe(" "+u(e.currentPrice===""?"--":("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(e.currentPrice,6)))+" "+u((Ko=e.toCoin)==null?void 0:Ko.symbol)+" per "+u((eo=e.fromCoin)==null?void 0:eo.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(r(),c("div",$l,[a("span",null,u(e.$t("common.currentPrice")),1),Oe(" "+u(e.currentPriceReverse===""?"--":("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(e.currentPriceReverse,6)))+" "+u((ze=e.toCoin)==null?void 0:ze.symbol)+" per "+u((go=e.fromCoin)==null?void 0:go.symbol),1)])):(r(),c("div",Sl,"0.0")),e.fromCoin&&e.toCoin?(r(),c("div",{key:4,class:fe(e.poolInfo&&((bo=e.poolInfo)!=null&&bo.needReverse)||e.createPoolInfo&&((Je=e.createPoolInfo)!=null&&Je.needReverse)?"toggle reverse":"toggle")},[a("div",{class:fe(e.direct?"item active-item":"item"),onClick:n[17]||(n[17]=f=>e.direct?"":e.toggle())},[ao(a("img",Tl,null,512),[[W,e.getCoinIcon(e.direct?e.fromCoin:e.toCoin)]]),Oe(" "+u(e.direct?(Ee=e.fromCoin)==null?void 0:Ee.symbol:(Lo=e.toCoin)==null?void 0:Lo.symbol),1)],2),a("div",{class:fe(e.direct?"item ":"item active-item"),onClick:n[18]||(n[18]=f=>e.direct?e.toggle():"")},[ao(a("img",Nl,null,512),[[W,e.getCoinIcon(e.direct?e.toCoin:e.fromCoin)]]),Oe(" "+u(e.direct?(Eo=e.toCoin)==null?void 0:Eo.symbol:(M=e.fromCoin)==null?void 0:M.symbol),1)],2)],2)):C("",!0)],2)):C("",!0),e.poolInfo||(oo=(I=e.$route)==null?void 0:I.query)!=null&&oo.action?(r(),ue(E,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,"int-price":e.intPrice,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","int-price","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):C("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(r(),c("div",Al,[ao(a("img",ql,null,512),[[W,("importIcon"in e?e.importIcon:ae(je))("/image/icon-tips@2x.png")]]),a("p",Ll,u(e.$t("tips.positionTips")),1)])):C("",!0),e.positionError&&(e.poolInfo||(Ce=(Me=e.$route)==null?void 0:Me.query)!=null&&Ce.action)&&(Number(e.minPrice)||Number(e.maxPrice))?(r(),c("div",Rl,[ao(a("img",Ul,null,512),[[W,("importIcon"in e?e.importIcon:ae(je))("/image/icon-tips-error@2x.png")]]),a("p",Ml,u(e.$t("tips.positionError")),1)])):C("",!0),e.fromCoin&&e.toCoin&&e.poolInfo&&((l=e.poolInfo)!=null&&l.current_sqrt_price)?(r(),c("div",Ol,[e.fromCoin&&e.toCoin&&e.poolInfo?(r(),ue(y,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):C("",!0),e.chartLoading?(r(),ue(b,{key:1})):C("",!0)])):C("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(r(),c("div",_l,[Bl,a("span",Fl,u(e.aprRewardsTime)+" Price Range",1),a("span",null,u(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(e.before7dContractPriceLowest,6)))+" - "+u(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(e.before7dContractPriceHighest,6))),1)])):C("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(r(),ue(i,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):C("",!0),(tn=(s=e.$route)==null?void 0:s.query)!=null&&tn.action&&!e.poolInfo&&!e.showFromCoinLock&&!e.showToCoinLock?(r(),c("div",jl,u(e.$t("newAdd.createPoolText")),1)):C("",!0),((rn=(an=e.$route)==null?void 0:an.query)==null?void 0:rn.action)=="create-pool"&&(e.showFromCoinLock||e.showToCoinLock)&&Number(e.maxPrice)>Number(e.minPrice)?(r(),c("div",El," To create a new pool, the initial price you set must be within your price range. ")):C("",!0)],64)):(r(),c("div",Wl,[e.storeIndex.theme=="default"?(r(),c("img",Dl)):(r(),c("img",Hl)),a("p",null,u(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&e.$route.query.action!=="create-pool"?(r(),ue(p,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):C("",!0)])])):C("",!0),e.isPc?C("",!0):(r(),c("div",zl,[a("div",Xl,[a("div",Vl,[a("div",Kl,[Oe(u(e.$t("common.selectPool"))+" ",1),re(D,{placement:"bottom","arrow-point-at-center":""},{title:Ne(()=>[a("span",null,u(e.t("newAdd.poolWarning")),1)]),default:Ne(()=>[e.poolInfo&&e.isSelfBuilt?(r(),c("div",Zl)):C("",!0)]),_:1})]),a("div",Gl,[re(G,{"coin-icon":e.poolInfo?e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.token_a:e.createPoolFromCoin,onClick:n[19]||(n[19]=f=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),re(G,{"coin-icon":e.poolInfo?e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.token_b:e.createPoolToCoin,onClick:n[20]||(n[20]=f=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),a("div",{class:fe(["pool-fee",e.edit?"pool-fee-edit":""])},[a("div",{class:"pool-fee-header",onClick:n[21]||(n[21]=f=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[a("span",{class:fe(e.inputValue?"":"fee-span")},u(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(r(),c("svg",Jl,Yl)):C("",!0)]),e.edit?(r(),c("div",xl,[e.getPoolInfoSuccess?(r(!0),c(No,{key:1},en(e.feeTierList,(f,to)=>{var Oo;return r(),c("div",{key:to,class:fe(["fee-item",[e.inputValue&&e.inputValue==f.label?"fee-item-active":"",e.isCreatePool&&e.isCreatePool.length>0&&e.isCreatePool.includes(f.fee)&&e.$route.query.action?" pool-created":" pool-not-created"]]),onClick:Xo=>e.selectFee(f)},[e.$route.query.action=="create-pool"?(r(),c("div",os,[a("p",null,u(f.title),1),a("p",{class:fe(e.isCreatePool.includes(f.fee)?"text-default":"text-theme")},u(e.isCreatePool.includes(f.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(r(),c("div",ns,[a("p",{class:fe(e.isCreatePool.includes(f.fee)?"text-active":"text-default")},u(f.title),3),e.isCreatePool&&!e.isCreatePool.includes(f.fee)?(r(),c("p",ts,u(e.$t("newAdd.notCreated")),1)):C("",!0),e.isCreatePool&&e.isCreatePool.includes(f.fee)?(r(),c("p",as,u(e.poolTvl&&e.poolTvl[f.fee]&&((Oo=e.poolTvl[f.fee])==null?void 0:Oo.rateText)),1)):C("",!0)])),a("span",null,u(f.text),1)],10,es)}),128)):(r(),ue(b,{key:0}))])):C("",!0)],2)]),a("div",is,[e.isShowMask?(r(),c("div",rs)):C("",!0),a("div",ls,[Oe(u((Ro=e.$route)!=null&&Ro.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(r(),ue(D,{key:0,placement:"bottom","arrow-point-at-center":""},{title:Ne(()=>[a("span",null,u(e.$t("newAdd.selectRangeTips")),1)]),default:Ne(()=>[ss]),_:1})):C("",!0)]),a("div",us,[!((ln=(Uo=e.$route)==null?void 0:Uo.query)!=null&&ln.action)&&e.poolInfo||(Te=(Se=e.$route)==null?void 0:Se.query)!=null&&Te.action?(r(),c(No,{key:0},[(Go=(Zo=e.$route)==null?void 0:Zo.query)!=null&&Go.action&&!e.poolInfo?(r(),ue(m,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):C("",!0),e.poolInfo?(r(),c("div",ds,[(r(!0),c(No,null,en(e.currentPriceTabList,f=>(r(),c("div",{key:f,class:fe(["price-item",{"price-item-active":f.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:to=>e.priceTab(f)},[re(D,{placement:"bottom","arrow-point-at-center":""},{title:Ne(()=>[a("span",null,u(e.getPirceText(f.key)),1)]),default:Ne(()=>[Oe(" "+u(e.getPirceKey(f.key)),1)]),_:2},1024)],10,cs))),128))])):C("",!0),(un=(sn=e.$route)==null?void 0:sn.query)!=null&&un.action&&!e.poolInfo?(r(),c("div",vs,u(e.$t("newAdd.createPoolInitialText")),1)):C("",!0),!e.poolInfo&&((cn=(dn=e.$route)==null?void 0:dn.query)!=null&&cn.action)?(r(),c("div",ps,[a("div",null,u(e.$t("common.setPriceRange")),1),a("div",null,[a("div",{class:fe(["tab-item",e.isFullRange?"tab-item-active tab-item-farms-active":""]),onClick:n[22]||(n[22]=Nn(f=>e.clickFullRange(),["stop"]))},[a("div",ms,[e.isFullRange&&e.chainName=="Sui"?(r(),c("img",fs)):C("",!0)]),gs],2)])])):C("",!0),e.poolInfo||(ko=(lo=e.$route)==null?void 0:lo.query)!=null&&ko.action?(r(),c("div",{key:4,class:fe(["current-price",(Qe=(ho=e.$route)==null?void 0:ho.query)!=null&&Qe.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(r(),c("span",bs,u(e.$t("common.currentPrice")),1)):C("",!0),e.fromCoin&&e.toCoin&&e.direct?(r(),c("div",ks,[a("span",null,u(e.$t("common.currentPrice")),1),Oe(" "+u(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(e.currentPrice,6)))+" "+u((Wo=e.toCoin)==null?void 0:Wo.symbol)+" per "+u((Co=e.fromCoin)==null?void 0:Co.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(r(),c("div",hs,[a("span",null,u(e.$t("common.currentPrice")),1),Oe(" "+u(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(e.currentPriceReverse,6)))+" "+u((Do=e.toCoin)==null?void 0:Do.symbol)+" per "+u((v=e.fromCoin)==null?void 0:v.symbol),1)])):(r(),c("div",Cs,"0.0")),e.fromCoin&&e.toCoin?(r(),c("div",{key:4,class:fe(e.poolInfo&&((Ye=e.poolInfo)!=null&&Ye.needReverse)||e.createPoolInfo&&((To=e.createPoolInfo)!=null&&To.needReverse)?"toggle reverse":"toggle")},[a("div",{class:fe(e.direct?"item active-item":"item"),onClick:n[23]||(n[23]=f=>e.direct?"":e.toggle())},[ao(a("img",ys,null,512),[[W,e.getCoinIcon(e.direct?e.fromCoin:e.toCoin)]]),Oe(" "+u(e.direct?(q=e.fromCoin)==null?void 0:q.symbol:(yo=e.toCoin)==null?void 0:yo.symbol),1)],2),a("div",{class:fe(e.direct?"item ":"item active-item"),onClick:n[24]||(n[24]=f=>e.direct?e.toggle():"")},[ao(a("img",ws,null,512),[[W,e.getCoinIcon(e.direct?e.toCoin:e.fromCoin)]]),Oe(" "+u(e.direct?(ke=e.toCoin)==null?void 0:ke.symbol:(he=e.fromCoin)==null?void 0:he.symbol),1)],2)],2)):C("",!0)],2)):C("",!0),e.poolInfo||(zo=(Ho=e.$route)==null?void 0:Ho.query)!=null&&zo.action?(r(),ue(E,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):C("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(r(),c("div",Ps,[a("img",{src:("importIcon"in e?e.importIcon:ae(je))("/image/icon-tips@2x.png"),alt:""},null,8,Is),a("p",$s,u(e.$t("tips.positionTips")),1)])):C("",!0),e.positionError&&(e.poolInfo||(so=(We=e.$route)==null?void 0:We.query)!=null&&so.action)?(r(),c("div",Ss,[a("img",{src:("importIcon"in e?e.importIcon:ae(je))("/image/icon-tips-error@2x.png"),alt:""},null,8,Ts),a("p",Ns,u(e.$t("tips.positionError")),1)])):C("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(r(),c("div",As,[e.fromCoin&&e.toCoin&&e.poolInfo?(r(),ue(y,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):C("",!0),e.chartLoading?(r(),ue(b,{key:1})):C("",!0)])):C("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(r(),c("div",qs,[Ls,a("span",Rs,u(e.aprRewardsTime)+" Price Range",1),a("span",null,u(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(e.before7dContractPriceLowest,6)))+" - "+u(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(Ae))(e.before7dContractPriceHighest,6))),1)])):C("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(r(),ue(i,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):C("",!0),(Mo=(uo=e.$route)==null?void 0:uo.query)!=null&&Mo.action&&!e.poolInfo?(r(),c("div",Us,u(e.$t("newAdd.createPoolText")),1)):C("",!0)],64)):(r(),c("div",Ms,[e.storeIndex.theme=="default"?(r(),c("img",Os)):(r(),c("img",_s)),a("p",null,u(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&!e.isSelfBuilt?(r(),ue(p,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):C("",!0)]),re($,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:n[25]||(n[25]=f=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ne(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")?(r(),c("svg",Bs,js)):C("",!0),a("span",null,u(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),a("div",Es,[re(_e)])]),a("div",Ws,[a("div",Ds,u(e.$t("newAdd.depositAmounts")),1),a("div",Hs,[a("div",zs,[re(J,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[26]||(n[26]=f=>e.fromCoinAmount=f),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[27]||(n[27]=f=>e.maxBtnSelect("fromCoin")),onOnHalf:n[28]||(n[28]=f=>e.halfBtnSelect("fromCoin")),onOnInput:n[29]||(n[29]=f=>{e.fromCoinAmount=f,e.fixedFromCoin=!0}),onOnSelect:n[30]||(n[30]=f=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(r(),ue(U,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):C("",!0)]),a("div",Xs,[re(J,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[31]||(n[31]=f=>e.toCoinAmount=f),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[32]||(n[32]=f=>e.maxBtnSelect("toCoin")),onOnHalf:n[33]||(n[33]=f=>e.halfBtnSelect("toCoin")),onOnInput:n[34]||(n[34]=f=>{e.toCoinAmount=f,e.fixedFromCoin=!1}),onOnSelect:n[35]||(n[35]=f=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(r(),ue(U,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):C("",!0)]),(A=(Jo=e.$route)==null?void 0:Jo.query)!=null&&A.action&&!e.poolInfo&&(!e.createPoolInfo||!e.createPoolInfo.currentPrice)?(r(),ue(z,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):C("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(r(),c("img",{key:1,class:"add",src:it,alt:"",onClick:n[36]||(n[36]=(...f)=>e.toggle&&e.toggle(...f))})):C("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(r(),c("img",{key:2,class:"add",src:rt,alt:"",onClick:n[37]||(n[37]=(...f)=>e.toggle&&e.toggle(...f))})):C("",!0)]),e.poolInfo||e.createPoolInfo?(r(),ue(le,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):C("",!0)])])),re($,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn h5-btn",onClick:n[38]||(n[38]=f=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ne(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")?(r(),c("svg",Vs,Zs)):C("",!0),a("span",null,u(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),a("div",Gs,[re(_e)]),e.showCoinSelect?(r(),ue(B,{key:2,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"is-create-pool-to-coin":e.isCreatePoolToCoin,"is-create-pool-from-coin":e.isCreatePoolFromCoin,onOnSelect:e.onCoinSelect,onOnClose:n[39]||(n[39]=f=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","is-create-pool-to-coin","is-create-pool-from-coin","onOnSelect"])):C("",!0),e.isViewDetail?(r(),ue(Q,{key:3,"pool-info":e.poolInfo,onOnClose:n[40]||(n[40]=f=>e.isViewDetail=!1)},null,8,["pool-info"])):C("",!0),e.isCreateSuccess?(r(),ue(we,{key:4,onOnClose:n[41]||(n[41]=f=>e.isCreateSuccess=!1)})):C("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(r(),ue(Le,{key:5,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:n[42]||(n[42]=f=>e.isShowTokenWarning=!1)},null,8,["from-coin","to-coin","onClose"])):C("",!0),e.isShowLiquidityModal?(r(),ue(me,{key:6,"pool-info":e.poolInfo||e.createPoolInfo,title:e.$route.query.action=="create-pool"?e.$t("newAdd.preview"):e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direct,"is-increase":!1,onCreatePool:e.toCreatePool,onToAdd:e.toAdd,onOnClose:n[43]||(n[43]=f=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onCreatePool","onToAdd"])):C("",!0)])}const Au=po(Br,[["render",Js],["__scopeId","data-v-d1ba06ea"]]);export{Au as default};
