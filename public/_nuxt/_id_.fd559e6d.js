import{_ as ae}from"./back.d3745c91.js";import{_ as te}from"./status-block.b936bf3d.js";import{u as Oo,h as P,i as M,b as so,e as p,c as x,a as le,f as io,t as To}from"./import-icon.b48b973f.js";import{a as bo,J as No,r as h,f as _,i as Io,o as m,j as k,k as n,x as S,y as N,u as r,t as i,m as oo,l as H,S as Fo,p as go,q as wo,w as no,h as Wo,c as ko,v as W,O as re,B as Po,M as de,H as ue,T as me,b as ce,L as eo,U as qo,A as pe,C as fe,G as ve,F as he,E as ke}from"./entry.7dbcdae4.js";/* empty css              */import{u as _o,_ as to}from"./common.ce6f3df4.js";import{_ as Ho,a as Mo}from"./icon-arrow_2x.45808d19.js";import{_ as Jo}from"./c-switch.9dbe4ad6.js";import{u as be}from"./notifi.a6327443.js";import{_ as Ie}from"./apr-tab.c43881be.js";import{_ as ge}from"./apr-tips.247badba.js";/* empty css              */import{u as we}from"./wallet.3fc4a512.js";import{p as _e}from"./precision.9d58cda5.js";/* empty css              */import"./index.59f7738f.js";import"./v4.78edc15a.js";import"./index.b7569565.js";import"./index.6351fb05.js";const ye=bo({props:{positionInfo:{type:Object,required:!0,default:()=>({})}},setup(o){const{t:c}=No();let L=h(!1),J=h(!0);const C=_o(),I=Oo(),d=_(()=>I),b=_(()=>{var y,R,U,a,f,e,v,j;if(x(o.positionInfo))return" --";{const B=o.positionInfo.amountA*((R=d.value.RATES[(y=o.positionInfo)==null?void 0:y.token_a.address])==null?void 0:R.price),D=o.positionInfo.amountB*((a=d.value.RATES[(U=o.positionInfo)==null?void 0:U.token_b.address])==null?void 0:a.price);return(e=d.value.RATES[(f=o.positionInfo)==null?void 0:f.token_a.address])!=null&&e.price&&((j=d.value.RATES[(v=o.positionInfo)==null?void 0:v.token_b.address])!=null&&j.price)?B+D:" --"}}),g=_(()=>{var y,R,U,a;return(R=d.value.RATES[(y=o.positionInfo)==null?void 0:y.token_a.name.toUpperCase()])!=null&&R.price&&b.value!=="--"?(o.positionInfo.amountA*((a=d.value.RATES[(U=o.positionInfo)==null?void 0:U.token_a.name.toUpperCase()])==null?void 0:a.price)/b.value*100).toFixed(0):" --"}),O=_(()=>{var y,R,U,a;return(R=d.value.RATES[(y=o.positionInfo)==null?void 0:y.token_b.name.toUpperCase()])!=null&&R.price&&b.value!=="--"?(o.positionInfo.amountB*((a=d.value.RATES[(U=o.positionInfo)==null?void 0:U.token_b.name.toUpperCase()])==null?void 0:a.price)/b.value*100).toFixed(0):" --"}),w=_(()=>d.value.allTokenObj&&o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.address&&d.value.allTokenObj[o.positionInfo.token_a.address]&&d.value.allTokenObj[o.positionInfo.token_a.address].logoURI),T=_(()=>d.value.allTokenObj&&o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.address&&d.value.allTokenObj[o.positionInfo.token_b.address]&&d.value.allTokenObj[o.positionInfo.token_b.address].logoURI),q=_(()=>{var y,R;return(R=(y=o.positionInfo)==null?void 0:y.poolInfo)==null?void 0:R.needReverse});return{fromPercent:O,toPercent:g,amountUSD:b,showNum:P,t:c,importIcon:M,indexStore:C,rateChange:J,decimalFormat:so,fromCoinUrl:w,toCoinUrl:T,pools:d,addCommom:p,isPc:L,needReverse:q}}});const $e=o=>(go("data-v-4d3d4b7e"),o=o(),wo(),o),Ce={key:0,class:"position-card"},Se={key:0,class:"coin-pair"},Re=["src"],Ae=["src"],Te={key:1,class:"coin-pair"},Oe=["src"],Ne=["src"],Pe={class:"fee"},Ue={class:"right"},je={key:0,class:"status"},Le={class:"min-and-max"},Be={key:0},De={class:"text"},Ee={key:0,src:Ho,alt:""},qe={key:1,src:Mo,alt:""},Fe={class:"text"},We={key:1},He={class:"text"},Me={key:0,src:Ho,alt:""},Je={key:1,src:Mo,alt:""},ze={class:"text"},Ge=$e(()=>n("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Ke=[Ge],Qe={class:"liquidity"},Xe={class:"label"},Ye={class:"value"},Ze={class:"item"},Ve=["src"],xe={class:"rate"},on={class:"item"},en=["src"],nn={class:"rate"};function sn(o,c,L,J,C,I){const d=Fo,b=te;return o.positionInfo?(m(),k("div",Ce,[n("div",{class:oo(["left",`position-status-${o.positionInfo&&o.positionInfo.currentStatus&&o.positionInfo.currentStatus.toLowerCase()}`])},[S(d,{class:"left-skeleton",loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:N(()=>[o.needReverse?(m(),k("div",Te,[n("div",null,[n("img",{src:o.toCoinUrl||("importIcon"in o?o.importIcon:r(M))(`/image/coins/${o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,Oe),n("img",{src:o.fromCoinUrl||("importIcon"in o?o.importIcon:r(M))(`/image/coins/${o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,Ne)]),n("span",null,i(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol)+" - "+i(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)])):(m(),k("div",Se,[n("div",null,[n("img",{src:o.fromCoinUrl||("importIcon"in o?o.importIcon:r(M))(`/image/coins/${o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,Re),n("img",{src:o.toCoinUrl||("importIcon"in o?o.importIcon:r(M))(`/image/coins/${o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,Ae)]),n("span",null,i(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" - "+i(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)])),n("div",Pe,i(o.$t("common.fee"))+" "+i(o.positionInfo.fee*100)+"%",1)]),_:1},8,["loading"])],2),n("div",Ue,[o.pools.currentPositionLoading?H("",!0):(m(),k("div",je,[S(b,{"current-status":o.positionInfo.currentStatus||"","block-name":"detail"},null,8,["current-status"])])),S(d,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:N(()=>[n("div",Le,[(o.needReverse?!o.rateChange:o.rateChange)?(m(),k("div",Be,[n("div",De,i(("addCommom"in o?o.addCommom:r(p))(("decimalFormat"in o?o.decimalFormat:r(so))(String(o.positionInfo.minPrice),6),6)),1),o.indexStore.theme=="default"?(m(),k("img",Ee)):(m(),k("img",qe)),n("div",Fe,i(o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("∞")>-1||o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in o?o.addCommom:r(p))(("decimalFormat"in o?o.decimalFormat:r(so))(String(o.positionInfo.maxPrice),6),6))+" "+i(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol)+" per "+i(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)])):(m(),k("div",We,[n("div",He,i(("addCommom"in o?o.addCommom:r(p))(("decimalFormat"in o?o.decimalFormat:r(so))(String(1/Number(o.positionInfo.maxPrice)),6),6)),1),o.indexStore.theme=="default"?(m(),k("img",Me)):(m(),k("img",Je)),n("div",ze,i(o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("∞")>-1||o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in o?o.addCommom:r(p))(("decimalFormat"in o?o.decimalFormat:r(so))(String(1/Number(o.positionInfo.minPrice)),6),6))+" "+i(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" per "+i(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)])),(m(),k("svg",{class:"icon-change","aria-hidden":"true",onClick:c[0]||(c[0]=g=>o.rateChange=!o.rateChange)},Ke))])]),_:1},8,["loading"]),n("div",Qe,[S(d,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:N(()=>[n("div",Xe,i(o.$t("common.liquidity")),1),n("div",Ye," $"+i(o.amountUSD=="--"?"--":Number(o.amountUSD)==0?0:Number(o.amountUSD)<.01?"<0.01":("addCommom"in o?o.addCommom:r(p))(o.amountUSD,2)),1)]),_:1},8,["loading"])]),n("div",{class:oo(o.needReverse?"token-num reverse":"token-num")},[S(d,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:N(()=>{var g,O,w,T,q,y,R,U,a,f,e,v,j,B,D,$,F,z,G,K,Q,V;return[n("div",Ze,[n("div",null,[n("img",{src:o.fromCoinUrl||("importIcon"in o?o.importIcon:r(M))(`/image/coins/${(O=(g=o.positionInfo)==null?void 0:g.token_a)==null?void 0:O.symbol.toLowerCase()}.png`)},null,8,Ve),n("p",null,i(("showNum"in o?o.showNum:r(P))((w=o.positionInfo)==null?void 0:w.amountA,(q=(T=o.positionInfo)==null?void 0:T.token_a)==null?void 0:q.decimals)),1),n("span",null,i((R=(y=o.positionInfo)==null?void 0:y.token_a)==null?void 0:R.symbol)+" "+i((a=(U=o.positionInfo)==null?void 0:U.token_a)!=null&&a.labels&&((e=(f=o.positionInfo)==null?void 0:f.token_a)!=null&&e.labels[0])?`(${o.positionInfo.token_a.labels[0]})`:""),1)]),n("div",xe,i(("addCommom"in o?o.addCommom:r(p))(o.positionInfo.fromPercent,0))+"% ",1)]),n("div",on,[n("div",null,[n("img",{src:o.toCoinUrl||("importIcon"in o?o.importIcon:r(M))(`/image/coins/${(j=(v=o.positionInfo)==null?void 0:v.token_b)==null?void 0:j.symbol.toLowerCase()}.png`)},null,8,en),n("p",null,i(("showNum"in o?o.showNum:r(P))((B=o.positionInfo)==null?void 0:B.amountB,($=(D=o.positionInfo)==null?void 0:D.token_b)==null?void 0:$.decimals)),1),n("span",null,i((z=(F=o.positionInfo)==null?void 0:F.token_b)==null?void 0:z.symbol)+" "+i((K=(G=o.positionInfo)==null?void 0:G.token_b)!=null&&K.labels&&((V=(Q=o.positionInfo)==null?void 0:Q.token_b)!=null&&V.labels[0])?`(${o.positionInfo.token_b.labels[0]})`:""),1)]),n("div",nn,i(("addCommom"in o?o.addCommom:r(p))(o.positionInfo.toPercent,0))+"%",1)])]}),_:1},8,["loading"])],2)])])):H("",!0)}const an=Io(ye,[["render",sn],["__scopeId","data-v-4d3d4b7e"]]),tn=bo({components:{CSwitch:Jo},props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const c=be(),L=_(()=>c),J=_(()=>L.value.status),C=_o();no(()=>[L.value.targetGroups],w=>{},{immediate:!0});const I=h(!1);no(()=>J.value,w=>{w=="authenticated",I.value=!1},{immediate:!0});const d=h(!1),b=async()=>{d.value=!d.value;const w={pool_address:o.positionInfo.poolAddress,position_index:o.positionInfo.index},T=o.positionInfo.nftHash;await c.subscribePosition(w,T,d.value)},g=w=>{const T=w.sources;d.value=T.some(q=>JSON.parse(q.blockchainAddress).pool_address==o.positionInfo.poolAddress&&Number(JSON.parse(q.blockchainAddress).position_index)==Number(o.positionInfo.index))},O=Wo();return no(()=>[L.value.sourceGroups,o.positionInfo],([w,T])=>{var q,y,R;d.value=!1,w&&w.length>0&&w[0]&&T&&!x(T)&&((R=(y=(q=O==null?void 0:O.currentRoute)==null?void 0:q.value)==null?void 0:y.query)==null?void 0:R.token)==(T==null?void 0:T.name)&&g(w[0])},{immediate:!0,deep:!0}),{importIcon:M,isShowSetUp:I,changeSwitch:b,checked:d,notifiStatus:J,store:C}}});const ln=o=>(go("data-v-7a8bd083"),o=o(),wo(),o),rn={class:"range-alerts"},dn={class:"range-alerts-top"},un={class:"title"},mn=ln(()=>n("div",{class:"title-all"},[n("span",{class:"Range"},"Range Alerts")],-1)),cn={key:1,class:"h5-switch-box"},pn={class:"range-alerts-bottom"},fn={key:0,class:"pc-switch-box"};function vn(o,c,L,J,C,I){const d=Po,b=Jo;return m(),k("div",rn,[n("div",dn,[n("div",un,[mn,o.isShowSetUp||o.notifiStatus!=="authenticated"?(m(),ko(d,{key:0,class:"range-alerts-button",onClick:c[0]||(c[0]=re(g=>o.store.setIsShowNotifi(!0),["stop"]))},{default:N(()=>[W(" Set up ")]),_:1})):H("",!0),!o.isShowSetUp&&o.notifiStatus=="authenticated"?(m(),k("div",cn,[S(b,{checked:o.checked,disabled:o.notifiStatus!=="authenticated",onChange:o.changeSwitch},null,8,["checked","disabled","onChange"])])):H("",!0)])]),n("div",pn,[W(" Receive alerts via Telegram, SMS, or email when this position goes out of range. "),!o.isShowSetUp&&o.notifiStatus=="authenticated"?(m(),k("div",fn,[S(b,{checked:o.checked,disabled:o.notifiStatus!=="authenticated",onChange:o.changeSwitch},null,8,["checked","disabled","onChange"])])):H("",!0)])])}const hn=Io(tn,[["render",vn],["__scopeId","data-v-7a8bd083"]]),kn=bo({components:{Modal:de},props:{positionInfo:{type:Object,required:!0},isLoading:{type:Boolean,required:!0},needReverse:{type:Boolean,required:!1}},setup(o,c){const{t:L,locale:J}=No(),C=_o(),{copy:I}=C,d=()=>{c.emit("toClaim")},b=Oo(),g=_(()=>b),O=_(()=>g.value.tokensObj&&o.positionInfo.token_a.address&&g.value.tokensObj[o.positionInfo.token_a.address]&&g.value.tokensObj[o.positionInfo.token_a.address].logoURI),w=_(()=>g.value.tokensObj&&o.positionInfo.token_b.address&&g.value.tokensObj[o.positionInfo.token_b.address]&&g.value.tokensObj[o.positionInfo.token_b.address].logoURI);return{showNum:P,fromCoinUrl:O,toCoinUrl:w,toClaim:d,t:L,addCommom:p,importIcon:M,store:C,copy:I}}});const bn=o=>(go("data-v-0d5910fb"),o=o(),wo(),o),In=bn(()=>n("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),gn={key:0,class:"pc-claim"},wn=["src"],_n={key:1,class:"pc-claim"},yn=["src"];function $n(o,c,L,J,C,I){const d=Po,b=ue("Modal");return m(),ko(b,{visible:!0,class:"claim-fees",centered:"",closable:!0,title:o.$t("modal.claimFees"),width:"400px",footer:null,onCancel:c[0]||(c[0]=g=>o.$emit("onClose"))},{closeIcon:N(()=>[In]),default:N(()=>[n("div",{class:oo(o.needReverse?"claim-container reverse":"claim-container")},[o.positionInfo&&o.positionInfo.token_a.symbol?(m(),k("div",gn,[n("img",{src:o.fromCoinUrl||("importIcon"in o?o.importIcon:r(M))(`/image/coins/${o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,wn),n("span",null,i(("showNum"in o?o.showNum:r(P))(o.positionInfo.feeOwedA,o.positionInfo.token_a.decimals))+" "+i(o.positionInfo.token_a.symbol),1)])):H("",!0),o.positionInfo&&o.positionInfo.token_b.symbol?(m(),k("div",_n,[n("img",{src:o.toCoinUrl||("importIcon"in o?o.importIcon:r(M))(`/image/coins/${o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,yn),n("span",null,i(("showNum"in o?o.showNum:r(P))(o.positionInfo.feeOwedB,o.positionInfo.token_b.decimals))+" "+i(o.positionInfo.token_b.symbol),1)])):H("",!0)],2),S(d,{class:"big-btn claim-btn",disabled:o.isLoading||("addCommom"in o?o.addCommom:r(p))(o.positionInfo.feeOwedA,o.positionInfo.token_a.decimals)==0&&("addCommom"in o?o.addCommom:r(p))(o.positionInfo.feeOwedB,o.positionInfo.token_b.decimals)==0||o.positionInfo.poolInfo.is_pause,onClick:o.toClaim},{default:N(()=>[W(i(o.$t("common.claim")),1)]),_:1},8,["disabled","onClick"])]),_:1},8,["title"])}const Cn=Io(kn,[["render",$n],["__scopeId","data-v-0d5910fb"]]),Sn=bo({setup(){const o=h(!1),c=h(!1),L=h(!1),J=h(!0),C=_o(),I=_(()=>C),d=Oo(),b=h(""),g=h(""),O=h(""),w=h(30),T=h("Estimated APR"),q=h([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),y=h(!0),R=s=>{w.value=s.num},U=()=>{y.value=!y.value},a=_(()=>d),f=_(()=>{var u,l,E,A;const s=e.value.feeOwedA*((u=a.value.RATES[e.value&&e.value.token_a&&e.value.token_a.address])==null?void 0:u.price),t=e.value.feeOwedB*((l=a.value.RATES[e.value&&e.value.token_b&&e.value.token_b.address])==null?void 0:l.price);return(E=a.value.RATES[e.value&&e.value.token_a&&e.value.token_a.address])!=null&&E.price&&((A=a.value.RATES[e.value&&e.value.token_b&&e.value.token_b.address])!=null&&A.price)?s+t:" --"}),e=h({}),v=Wo();function j(){v.push(`/remove-liquidity?collect=${e.value.collectionName}&&token=${e.value.tokenName}&&address=${e.value.pool}&pos=${e.value.pos_object_id}`)}function B(){v.push(`/increase-liquidity?collect=${e.value.collectionName}&&token=${e.value.tokenName}&&address=${e.value.pool}&pos=${e.value.pos_object_id}`)}const D=()=>{F(),L.value=!0,setTimeout(()=>{L.value=!1},1e3)},$=_(()=>I.value.chainName?le(I.value.chainName):{}),F=async()=>{a.value.setCurrentPositionLoading(!0);const s=v.currentRoute.value.query.token||"",t=v.currentRoute.value.query.collect||"",u=v.currentRoute.value.query.address||"",l=v.currentRoute.value.query.pos||"";g.value=u,I.value.chainName==="Aptos"?s&&t&&u&&(b.value=t,O.value=s,a.value.setCurrentPositionInfo(g.value,b.value,O.value,I.value.chainName)):s&&u&&l&&(b.value=t,O.value=s,a.value.setCurrentPositionInfo(u,b.value,O.value,I.value.chainName,l))},z=_(()=>{var t,u,l;const s=((l=(u=(t=v==null?void 0:v.currentRoute)==null?void 0:t.value)==null?void 0:u.query)==null?void 0:l.address)||"";return s&&a.value.addressLpTokens&&!x(a.value.addressLpTokens)&&a.value.addressLpTokens[s]?a.value.addressLpTokens[s]:null});no(()=>z.value,(s,t)=>{s&&!x(s)&&s.current_sqrt_price!==(t==null?void 0:t.current_sqrt_price)&&F()},{immediate:!0});const G=h(""),K=h(""),Q=h(""),V=(s,t)=>s&&t?io(_e.plus(To(s),To(t)),2)+"%":s,ro=s=>{let t=0;return s&&s.forEach(u=>{t+=To(String(u))}),String(io(String(t),2))},uo=h(""),mo=h("");no(()=>[I.value.newTopPoolsObj,e.value,w],([s,t])=>{if(!x(s)&&!x(t)){const u=t.poolAddress,l=s[u];G.value=l&&(l==null?void 0:l.apr_7day),mo.value=ro(l&&(l==null?void 0:l.rewarder_apr)),uo.value=V(l&&(l==null?void 0:l.apr_7day),l&&ro(l==null?void 0:l.rewarder_apr)),K.value=l&&io(l==null?void 0:l.tvl_in_usd,2),Q.value=l&&io(l==null?void 0:l.vol_in_usd_24h,2)}},{immediate:!0,deep:!0});const zo=we(),ao=_(()=>zo),{t:yo}=No(),{$notify:Uo}=me(),Go=async()=>{o.value=!0,c.value=!1;const s=p(e.value.feeOwedA,e.value.token_a.decimals)==0?"":`${P(e.value.feeOwedA,e.value.token_a.decimals)} ${e.value.token_a.symbol}`,t=p(e.value.feeOwedB,e.value.token_b.decimals)==0?"":`${P(e.value.feeOwedB,e.value.token_b.decimals)} ${e.value.token_b.symbol}`;C.setTransactionDesc(yo("newAdd.claimWaitingText",{from:Ao.value?t:s,and:p(e.value.feeOwedA,e.value.token_a.decimals)==0||p(e.value.feeOwedB,e.value.token_b.decimals)==0?"":"and",to:Ao.value?s:t})),C.setIsShowWaiting(!0);let u;const l={pool:e.value.poolInfo,position:e.value};try{const E=await $.value.getCollectFeeTransactionPayload(l);if(I.value.chainName==="Aptos")u=await ao.value.currentWallet.signAndSubmitTransaction(E);else{const A=await ao.value.currentWallet.signAndExecuteTransactionBlock(E);u=$.value.handleTx(A)}if(u){C.setTransactionTxid(u.hash),C.setIsShowWaiting(!1),C.setIsShowSuccess(!0);const A={title:"Claim",desc:"",hash:u.hash,tit:"Fees Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:`${e.value.token_a.symbol}`,numa:p(e.value.feeOwedA,e.value.token_a.decimals)==0?"":`+ ${P(e.value.feeOwedA,e.value.token_a.decimals)}`,logoa:p(e.value.feeOwedA,e.value.token_a.decimals)==0?"":a.value.tokensObj&&e.value&&e.value.token_a.address&&a.value.tokensObj[e.value.token_a.address]&&a.value.tokensObj[e.value.token_a.address].logoURI,tokenb:`${e.value.token_b.symbol}`,numb:p(e.value.feeOwedB,e.value.token_b.decimals)==0?"":`+ ${P(e.value.feeOwedB,e.value.token_b.decimals)}`,logob:p(e.value.feeOwedB,e.value.token_b.decimals)==0?"":a.value.tokensObj&&e.value&&e.value.token_b.address&&a.value.tokensObj[e.value.token_b.address]&&a.value.tokensObj[e.value.token_b.address].logoURI},text:`Claim ${p(e.value.feeOwedA,e.value.token_a.decimals)==0?"":`${P(e.value.feeOwedA,e.value.token_a.decimals)} ${e.value.token_a.symbol}`}  
              ${p(e.value.feeOwedA,e.value.token_a.decimals)==0||p(e.value.feeOwedB,e.value.token_b.decimals)==0?"":"and"} ${p(e.value.feeOwedB,e.value.token_b.decimals)==0?"":`${P(e.value.feeOwedB,e.value.token_b.decimals)} ${e.value.token_b.symbol}`}

            `};I.value.chainName!=="Aptos"&&(A.res=u.res),$.value.showTransitionPending(A),await $.value.watchTransaction(A)&&setTimeout(()=>{F()},1e3)}else C.setIsShowWaiting(!1),C.setIsShowRejected(!0),Uo.error({icon:eo("svg",{class:{icon:!0},"aria-hidden":!0},[eo("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),duration:4.5,message:eo("div",{class:"notification-title"},[eo("span",{innerHTML:qo.global.t("newAdd.claimFailed")},null)]),description:yo("newAdd.somethingWrong"),class:"ant-notification-copy ant-notification-error"});o.value=!1}catch{o.value=!1,C.setIsShowWaiting(!1),C.setIsShowRejected(!0),Uo.error({icon:eo("svg",{class:{icon:!0},"aria-hidden":!0},[eo("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:eo("div",{class:"notification-title"},[eo("span",{innerHTML:qo.global.t("newAdd.claimFailed")},null)]),duration:4.5,description:yo("newAdd.somethingWrong"),class:"ant-notification-copy ant-notification-error"})}},$o=h(""),Co=h(""),Ko=()=>{$o.value=e.value.token_b,Co.value=e.value.token_a},Qo=async(s=null)=>{const t=s||e.value,u=a.value.addressLpTokens[v.currentRoute.value.query.address],l=await $.value.getTickDataByIndex(u.ticks_handle,Number(t.tick_lower_index)),E=await $.value.getTickDataByIndex(u.ticks_handle,Number(t.tick_upper_index));let A={};fo.value==="Aptos"?A=await $.value.getPosRewardersAmount({poolAddress:v.currentRoute.value.query.address,positionName:v.currentRoute.value.query.token,tickLowerData:l,tickUpperData:E}):A=await $.value.getPosRewardersAmount({poolAddress:v.currentRoute.value.query.address,pos:v.currentRoute.value.query.pos,positionHandle:u.positions_handle});const X=[];let Y=0;A.forEach((Z,co)=>{if(t.poolInfo[`rewarder_display${co+1}`]){const po=a.value.newTokenObj[Z.coin_address].decimals,ne=a.value.newTokenObj[Z.coin_address],se=Number(Z.amount_owed.toString())>99999999999999?0:Number(Z.amount_owed.toString()),Do=Number(se/Math.pow(10,po)),ie=a.value.RATES[Z.coin_address].price,Eo=Do*ie;Y+=Eo,X.push({...Z,...ne,amount:io(Do,po),amountUSD:io(Eo,2)})}}),vo.value=X,So.value=Y,jo.value=Number(io(Y,2))};no(()=>a.value.currentPositionInfo,s=>{s&&(e.value=s,$o.value=s==null?void 0:s.token_a,Co.value=s==null?void 0:s.token_b)},{immediate:!0});const Xo=_(()=>a.value.tokensObj&&e&&e.value.token_a&&e.value.token_a.address&&a.value.tokensObj[e.value.token_a.address]&&a.value.tokensObj[e.value.token_a.address].logoURI),Yo=_(()=>a.value.tokensObj&&e&&e.value.token_b&&e.value.token_b.address&&a.value.tokensObj[e.value.token_b.address]&&a.value.tokensObj[e.value.token_b.address].logoURI),fo=_(()=>I.value.chainName),Zo=_(()=>to[fo.value]),So=h(0),vo=h([]),jo=h(0);ce(()=>{So.value=0,vo.value=[],jo.value=0});const{setIsShowSuccess:Vo,setIsShowRejected:Lo,setIsShowWaiting:Ro,setTransactionDesc:Os,setTransactionTxid:xo}=C,ho=h(!1),oe=async()=>{ho.value=!0;const s=vo.value;let t={coinTypeA:e.value.poolInfo.coinTypeA,coinTypeB:e.value.poolInfo.coinTypeB,coinTypeC:"",coinTypeD:"",coinTypeE:"",pool_address:e.value.poolAddress,pos_index:e.value.index,rewarder_nums:s.length};t.coinTypeC=s[0]?s[0].coin_address:"",t.coinTypeD=s[1]?s[1].coin_address:"",t.coinTypeE=s[2]?s[2].coin_address:"";try{const u=await $.value.getCollectRewarderTransactionPayload(t);let l;if(I.value.chainName==="Aptos")l=await ao.value.currentWallet.signAndSubmitTransaction(u);else{const E=await ao.value.currentWallet.signAndExecuteTransactionBlock(u);l=$.value.handleTx(E)}if(l&&l.hash){xo(l.hash),Ro(!1),Vo(!0);const E=s[0].amount+s[0].symbol,A=t.coinTypeD?" and "+s[1].amount+s[1].symbol:"",X=t.coinTypeE?" and "+s[2].amount+s[2].symbol:"",Y={title:"Claim",desc:"",hash:l.hash,tit:"Bonus Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:s[0].symbol,numa:`+ ${Number(s[0].amount)}`,logoa:a.value.tokensObj&&s[0]&&s[0].address&&a.value.tokensObj[s[0].address]&&a.value.tokensObj[s[0].address].logoURI,tokenb:t.coinTypeD?s[1].symbol:"",numb:t.coinTypeD?`+ ${Number(s[1].amount)}`:"",logob:t.coinTypeD?a.value.tokensObj&&s[1]&&s[1].address&&a.value.tokensObj[s[1].address]&&a.value.tokensObj[s[1].address].logoURI:"",tokenc:t.coinTypeE?s[2].symbol:"",numc:t.coinTypeE?`+ ${Number(s[2].amount)}`:"",logoc:t.coinTypeE?a.value.tokensObj&&s[2]&&s[2].address&&a.value.tokensObj[s[2].address]&&a.value.tokensObj[s[2].address].logoURI:""},text:E+A+X};I.value.chainName!=="Aptos"&&(Y.res=l.res),$.value.showTransitionPending(Y),await $.value.watchTransaction(Y)&&setTimeout(()=>{F(),$.value.getAccount(ao.value.address)},3e3)}else Ro(!1),Lo(!0);ho.value=!1}catch{ho.value=!1,Ro(!1),Lo(!0)}},Bo=h([]);no(()=>[e.value,a.value.addressLpTokens,a.value.newTokenObj,I.value.newTopPoolsObj],([s,t,u,l])=>{if(!x(s)&&!x(t)&&!x(u)){const E=s.address,A=t[E];let X=(A==null?void 0:A.rewarder_infos)||[];const Y=l[E],Z=[];X&&X.length>0&&(X==null||X.forEach((co,po)=>{A[`rewarder_display${po+1}`]&&Z.push({...co,symbol:u[co.coinAddress].symbol,rewarderApr:Y==null?void 0:Y.rewarder_apr[po],logoUrl:u[co.coinAddress].logoURI})}),Bo.value=Z,Qo(s))}},{immediate:!0,deep:!0});const ee=h();no(()=>a.value.RATES,s=>{s&&(ee.value=s)},{immediate:!0});const Ao=_(()=>{var s,t;return(t=(s=e.value)==null?void 0:s.poolInfo)==null?void 0:t.needReverse});return{hasNotifi:_(()=>to[fo.value].hasNotifi),rewarderArr:Bo,feeOwed:f,config:Zo,showNum:P,index:I,fromCoinUrl:Xo,toCoinUrl:Yo,toggle:Ko,fromCoin:$o,toCoin:Co,apr:G,liquidityTvl:K,vol24:Q,addCommom:p,decimalFormat:so,wallet:ao,isLoading:o,toClaim:Go,pools:a,positionInfo:e,importIcon:M,router:v,toRemove:j,toIncrease:B,isShowClaim:c,direct:J,refresh:L,clickRefresh:D,pendingRewarderArr:vo,pendingRewarder:So,toClaimRewards:oe,rewarderLoading:ho,aprRewardsParameter:w,aprRewardsDateList:q,aprTab:R,reviseValue:U,label:y,aprTitle:T,aprTotal:uo,rewardAprList:mo,currentPoolInfo:z,chainName:fo,needReverse:Ao}}});const lo=o=>(go("data-v-e093b384"),o=o(),wo(),o),Rn={key:0,class:"position-detail-container"},An={class:"position-detail-header"},Tn={class:"back-and-refresh"},On=lo(()=>n("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),Nn=[On],Pn={class:"action-position"},Un={class:"coin-pair"},jn=lo(()=>n("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Ln=[jn],Bn=["href"],Dn=lo(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-jump"})],-1)),En=[Dn],qn=["href"],Fn=lo(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-jump"})],-1)),Wn=[Fn],Hn={class:"acton-btn-box"},Mn=lo(()=>n("svg",{"aria-hidden":"true",class:"action-icon"},[n("use",{"xlink:href":"#icon-icon-Reduction"})],-1)),Jn=lo(()=>n("svg",{"aria-hidden":"true",class:"action-icon"},[n("use",{"xlink:href":"#icon-icon-add"})],-1)),zn={class:"position-content"},Gn={key:0,class:"pedding-fee range-alerts-all"},Kn={class:"pedding-fee"},Qn={class:"pedding-fee"},Xn={class:"top"},Yn={class:"left"},Zn={class:"bottom"},Vn=["src"],xn=["src"],os={key:1,class:"pedding-fee"},es={class:"top"},ns={class:"left"},ss={class:"bottom"},is=["src"],as={key:2,class:"poolInfo"},ts={class:"pool-info-title"},ls={class:"currentPrice"},rs={key:0,class:"coin"},ds={key:1,class:"coin"},us={class:"toggle"},ms=["src"],cs=["src"],ps={key:0},fs={class:"info-block-container"},vs={class:"info-block"},hs={class:"leabl"},ks={class:"text"},bs={class:"apr-hover-content"},Is={class:"info-block"},gs={class:"leabl"},ws={class:"text"},_s={class:"info-block"},ys={class:"leabl"},$s={class:"text"},Cs={class:"info-block"},Ss={class:"leabl"},Rs={class:"text"},As={class:"loading-global"};function Ts(o,c,L,J,C,I){var U,a;const d=ae,b=Po,g=Fo,O=an,w=hn,T=Ie,q=ge,y=Cn,R=ve;return o.positionInfo?(m(),k("div",Rn,[n("div",An,[n("div",Tn,[S(d),(m(),k("svg",{"aria-hidden":"true",class:oo(o.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:c[0]||(c[0]=(...f)=>o.clickRefresh&&o.clickRefresh(...f))},Nn,2))]),n("div",Pn,[S(g,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:N(()=>{var f,e,v,j,B,D;return[n("div",Un,[W(i(o.positionInfo.tokenName)+" ",1),(m(),k("svg",{class:"icon","aria-hidden":"true",onClick:c[1]||(c[1]=$=>o.index.copy(o.positionInfo.nftHash))},Ln)),o.index&&o.index.chainName==="Aptos"?(m(),k("a",{key:0,href:`${("config"in o?o.config:r(to)).explorerUrl}/token/${o.positionInfo.nftHash}/0?network=${("config"in o?o.config:r(to)).network}`,target:"_blank"},En,8,Bn)):(m(),k("a",{key:1,href:`${("config"in o?o.config:r(to)).explorerUrl}/object/${o.positionInfo.nftHash}?network=${("config"in o?o.config:r(to)).network}`,target:"_blank"},Wn,8,qn))]),n("div",Hn,[S(b,{class:oo(["remove-liquidity action-btn",(e=(f=o.positionInfo)==null?void 0:f.poolInfo)!=null&&e.is_pause?"text-default":""]),disabled:(j=(v=o.positionInfo)==null?void 0:v.poolInfo)==null?void 0:j.is_pause,onClick:o.toRemove},{default:N(()=>[Mn,W(" "+i(o.$t("button.remove")),1)]),_:1},8,["class","disabled","onClick"]),S(b,{class:"increase-liquidity action-btn",disabled:(D=(B=o.positionInfo)==null?void 0:B.poolInfo)==null?void 0:D.is_pause,onClick:o.toIncrease},{default:N(()=>[Jn,W(" "+i(o.$t("button.increase")),1)]),_:1},8,["disabled","onClick"])])]}),_:1},8,["loading"])])]),n("div",zn,[S(O,{"position-info":o.positionInfo},null,8,["position-info"])]),o.chainName=="Aptos"&&o.hasNotifi?(m(),k("div",Gn,[S(w,{"position-info":o.positionInfo},null,8,["position-info"])])):H("",!0),n("div",Kn,[(m(),ko(T,{key:0,"apr-title":o.aprTitle,"apr-rewards-date-list":o.aprRewardsDateList,"apr-rewards-parameter":o.aprRewardsParameter,"name-tab":"position","from-coin":o.fromCoin,"to-coin":o.toCoin,"pool-info":o.positionInfo.poolInfo,"min-price":o.positionInfo.minPrice,"max-price":o.positionInfo.maxPrice&&String(o.positionInfo.maxPrice).indexOf("+")>-1?"∞":o.positionInfo.maxPrice,onAprTab:o.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"]))]),n("div",Qn,[n("div",Xn,[n("div",Yn,[n("span",null,i(o.$t("newAdd.pendingFees")),1),n("p",null," $"+i(o.pools.currentPositionLoading||o.feeOwed=="--"?"--":Number(o.feeOwed)==0?0:Number(o.feeOwed)<.01?"<0.01":("addCommom"in o?o.addCommom:r(p))(o.feeOwed,2)),1)]),S(b,{class:"increase-liquidity action-btn",disabled:o.isLoading||!o.wallet.connected||!(Number(o.positionInfo&&o.positionInfo.feeOwedA)||Number(o.positionInfo&&o.positionInfo.feeOwedB))||o.positionInfo.poolInfo.is_pause,onClick:c[2]||(c[2]=f=>o.isShowClaim=!0)},{default:N(()=>[W(i(o.$t("common.claim")),1)]),_:1},8,["disabled"])]),S(g,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:N(()=>{var f,e,v,j,B,D,$,F,z,G,K,Q,V,ro,uo,mo;return[n("div",Zn,[n("div",null,[n("img",{src:o.needReverse?o.toCoinUrl:o.fromCoinUrl},null,8,Vn),n("p",null,i(o.needReverse?("showNum"in o?o.showNum:r(P))(o.positionInfo.feeOwedB,(j=(v=o.positionInfo)==null?void 0:v.token_b)==null?void 0:j.decimals):("showNum"in o?o.showNum:r(P))(o.positionInfo.feeOwedA,(e=(f=o.positionInfo)==null?void 0:f.token_a)==null?void 0:e.decimals)),1),n("span",null,i(o.needReverse?(F=($=o.positionInfo)==null?void 0:$.token_b)==null?void 0:F.symbol:(D=(B=o.positionInfo)==null?void 0:B.token_a)==null?void 0:D.symbol),1)]),n("div",null,[n("img",{src:o.needReverse?o.fromCoinUrl:o.toCoinUrl},null,8,xn),n("p",null,i(o.needReverse?("showNum"in o?o.showNum:r(P))(o.positionInfo.feeOwedA,(Q=(K=o.positionInfo)==null?void 0:K.token_a)==null?void 0:Q.decimals):("showNum"in o?o.showNum:r(P))(o.positionInfo.feeOwedB,(G=(z=o.positionInfo)==null?void 0:z.token_b)==null?void 0:G.decimals)),1),n("span",null,i(o.needReverse?(mo=(uo=o.positionInfo)==null?void 0:uo.token_a)==null?void 0:mo.symbol:(ro=(V=o.positionInfo)==null?void 0:V.token_b)==null?void 0:ro.symbol),1)])])]}),_:1},8,["loading"])]),o.positionInfo&&o.positionInfo.poolInfo&&o.positionInfo.poolInfo.rewarder_infos&&o.positionInfo.poolInfo.rewarder_infos.length>0&&o.positionInfo.poolInfo.is_display_rewarder&&o.pendingRewarderArr&&o.pendingRewarderArr.length>0?(m(),k("div",os,[n("div",es,[n("div",ns,[n("span",null,i(o.$t("newAdd.pendingRewards")),1),n("p",null," $"+i(o.pendingRewarder=="--"?"--":Number(o.pendingRewarder)==0?0:Number(o.pendingRewarder)<.01?"<0.01":("addCommom"in o?o.addCommom:r(p))(o.pendingRewarder,2)),1)]),S(b,{class:"increase-liquidity action-btn",disabled:o.rewarderLoading||!o.wallet.connected||o.pendingRewarder<=0||((a=(U=o.positionInfo)==null?void 0:U.poolInfo)==null?void 0:a.is_pause),loading:o.rewarderLoading,onClick:o.toClaimRewards},{default:N(()=>[W(i(o.$t("common.claim")),1)]),_:1},8,["disabled","loading","onClick"])]),S(g,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:N(()=>[n("div",ss,[(m(!0),k(he,null,ke(o.pendingRewarderArr,f=>(m(),k("div",{key:f,class:oo(Number(f==null?void 0:f.amount)==0?"reward-none":"")},[n("img",{src:f.logoURI,alt:""},null,8,is),n("p",null,i(f.amount),1),n("span",null,i(f.symbol),1)],2))),128))])]),_:1},8,["loading"])])):H("",!0),o.positionInfo&&o.positionInfo.poolInfo?(m(),k("div",as,[n("div",ts,i(o.$t("newAdd.poolInfo")),1),n("div",ls,[S(g,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:N(()=>{var f,e,v,j,B,D,$,F,z,G,K,Q;return[(o.needReverse?!o.direct:o.direct)?(m(),k("div",rs,[n("span",null,i(o.$t("common.currentPrice")),1),W(" "+i(("addCommom"in o?o.addCommom:r(p))(("decimalFormat"in o?o.decimalFormat:r(so))(o.positionInfo.currentPrice,6),6))+" "+i((f=o.toCoin)==null?void 0:f.symbol)+" per "+i((e=o.fromCoin)==null?void 0:e.symbol),1)])):(m(),k("div",ds,[n("span",null,i(o.$t("common.currentPrice")),1),W(" "+i(("addCommom"in o?o.addCommom:r(p))(("decimalFormat"in o?o.decimalFormat:r(so))(1/o.positionInfo.currentPrice,6),6))+" "+i((v=o.fromCoin)==null?void 0:v.symbol)+" per "+i((j=o.toCoin)==null?void 0:j.symbol),1)])),n("div",us,[n("div",{class:oo(o.direct?"item active-item":"item"),onClick:c[3]||(c[3]=V=>o.direct=!0)},[n("img",{src:o.needReverse?o.toCoinUrl:o.fromCoinUrl,alt:""},null,8,ms),W(" "+i(o.needReverse?(F=($=o.positionInfo)==null?void 0:$.token_b)==null?void 0:F.symbol:(D=(B=o.positionInfo)==null?void 0:B.token_a)==null?void 0:D.symbol),1)],2),n("div",{class:oo(o.direct?"item ":"item active-item"),onClick:c[4]||(c[4]=V=>o.direct=!1)},[n("img",{src:o.needReverse?o.fromCoinUrl:o.toCoinUrl,alt:""},null,8,cs),W(" "+i(o.needReverse?(Q=(K=o.positionInfo)==null?void 0:K.token_a)==null?void 0:Q.symbol:(G=(z=o.positionInfo)==null?void 0:z.token_b)==null?void 0:G.symbol),1)],2)])]}),_:1},8,["loading"])]),S(g,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:N(()=>[o.aprTotal&&o.liquidityTvl&&o.vol24?(m(),k("div",ps,[n("div",fs,[n("div",vs,[n("div",hs,i(o.$t("common.apr")),1),n("div",ks,[W(i(o.aprTotal?("addCommom"in o?o.addCommom:r(p))(o.aprTotal.substring(0,o.aprTotal.length-1),2):0)+"% ",1),n("div",bs,[S(q,{class:oo(o.isShow?"showHover apr-hover-con":"noHover apr-hover-con"),"l-item":{apr:o.apr,rewarder_apr:o.rewardAprList,aprTotal:o.aprTotal,is_display_rewarder:o.positionInfo.poolInfo.is_display_rewarder},"rewarder-info":o.rewarderArr},null,8,["class","l-item","rewarder-info"])])])]),n("div",Is,[n("div",gs,i(o.$t("common.liquidity")),1),n("div",ws,"$"+i(("addCommom"in o?o.addCommom:r(p))(o.liquidityTvl,2)),1)]),n("div",_s,[n("div",ys,i(o.$t("common.volume24h")),1),n("div",$s,"$"+i(("addCommom"in o?o.addCommom:r(p))(o.vol24,2)),1)]),n("div",Cs,[n("div",Ss,i(o.$t("newAdd.tickSpacing")),1),n("div",Rs,i(o.positionInfo.tickSpacing),1)])])])):H("",!0)]),_:1},8,["loading"])])):H("",!0),o.isShowClaim?(m(),ko(y,{key:3,"is-loading":o.isLoading,"position-info":o.positionInfo,"need-reverse":o.needReverse,onOnClose:c[5]||(c[5]=f=>o.isShowClaim=!1),onToClaim:o.toClaim},null,8,["is-loading","position-info","need-reverse","onToClaim"])):H("",!0),pe(n("div",As,[S(R)],512),[[fe,o.pools.currentPositionLoading]])])):H("",!0)}const Zs=Io(Sn,[["render",Ts],["__scopeId","data-v-e093b384"]]);export{Zs as default};
