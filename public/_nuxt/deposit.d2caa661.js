import{_ as To}from"./back.3db1159e.js";import{_ as Mo}from"./refresh-icon.83c93a5d.js";import{a as It,r as _,b as ir,e as oe,w as se,i as wn,f as Pt,o as P,h as R,j as m,k as Z,t as A,p as bn,l as _n,D as U,m as ut,q as ue,s as Ie,v as xe,I as $o,S as bi,x as Bt,y as or,z as Re,B as ar,A as Rt,C as Ye,E as xo,F as Eo,G as Er,M as Ro,H as _i,J as nn,K as Lo,L as Fo,c as Ke,N as Bo,O as Oo,P as qo,Q as Uo,R as Rr,T as Ve,U as Lr,V as Fr,W as Br,X as yt,Y as Or,Z as En,$ as Gt,a0 as jt,a1 as qr,a2 as Rn,a3 as Qt,a4 as Ln,a5 as Do,a6 as Ho}from"./entry.a0707905.js";import{_ as zo,a as Xo}from"./coin-select.af36df93.js";import{_ as Vo,a as Ko}from"./swap-setting.d4540d56.js";/* empty css              */import"./index.315bb16e.js";import{_ as Yo}from"./apr-tab.be9664e4.js";import{_ as Wo}from"./apr-tips.8ce64fee.js";import{_ as ki,a as Ci,b as Go}from"./img-lock_2x.e7121198.js";import{_ as jo}from"./status-block.d43c428d.js";import{_ as Ai,a as Si}from"./icon-arrow_2x.db44c7c5.js";import{p as Qo}from"./precision.1cd464a0.js";import{_ as Jo,a as Zo}from"./checked.667d8670.js";import"./img-no-Positions_2x.e41c0467.js";import"./index.5cb15991.js";import"./coin-pair-name.d1a5657f.js";const ea=It({props:{coinIcon:{type:String,default:""},coin:{type:Object,default:()=>({})}},setup(e){const t=_(""),n=_(""),r=_(""),i=ir(),o=oe(()=>i);return se(()=>[o.value.tokensObj,e.coin],([a,s])=>{var l,u;a&&s&&a[s.address]?(n.value=((l=a[s.address])==null?void 0:l.labels)&&((u=a[s.address])==null?void 0:u.labels[0]),t.value=a[s.address].name,r.value=a[s.address].symbol):(n.value="",t.value="",r.value="")},{immediate:!0,deep:!0}),{importIcon:wn,coinName:t,coinLabels:n,coinSymbol:r}}}),ta=e=>(bn("data-v-3cb5bffa"),e=e(),_n(),e),na={class:"coin-block"},ra=["src"],ia={class:"coin-info"},oa={class:"symbol"},aa={key:0,class:"name"},sa=ta(()=>m("div",null,[m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon_on"})])],-1));function la(e,t,n,r,i,o){return P(),R("div",na,[m("div",null,[e.coinIcon?(P(),R("img",{key:0,src:e.coinIcon||e.importIcon(`/image/coins/${e.coinName.toLowerCase()}.png`)},null,8,ra)):Z("",!0),m("div",ia,[m("div",oa,A(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinName?(P(),R("div",aa,A(e.coinName)+" "+A(e.coinLabels?`(${e.coinLabels})`:""),1)):Z("",!0)])]),sa])}const ua=Pt(ea,[["render",la],["__scopeId","data-v-3cb5bffa"]]),ca=-443630;function Ur(e,t){const n=fa(e),r=(n-ca)%t;return r>t/2?n-r+t:n-r}const Ni=new U("1.0001");function fa(e){return e.log(Ni).toDP(0,U.ROUND_HALF_UP).toNumber()}function Dr(e){return Ni.pow(e)}const da=It({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1}},emits:["onInput"],setup(e,t){const n=_(""),r=_("");let i=_(""),o=_("");const a=()=>{if(Number.isNaN(n.value)||!n.value)return;const c=Ur(new U(n.value),u.value.tickSpacing),d=Dr(c+u.value.tickSpacing);if(e.pType=="Min"&&Number(d)>=Number(o.value))return;const k=d;t.emit("onInput",k)},s=()=>{if(Number.isNaN(n.value)||!n.value)return;const c=Ur(new U(n.value),u.value.tickSpacing),d=Dr(c-u.value.tickSpacing),k=d;e.pType=="Max"&&Number(d)<=Number(i.value)||t.emit("onInput",k)},l=c=>{let d=c.replace(/[^\d.]/g,"");const k=/^\d+(\.\d+)?$/;d.split(".").length>2&&!k.exec(d)&&(d=d.substr(0,d.length-1)),r.value=d,(ut(d,6)>0||String(d)=="0")&&t.emit("onInput",String(d))};se(()=>e.defaultMinPrice,(c,d)=>{c!==d&&(i.value=e.defaultMinPrice)},{immediate:!0}),se(()=>e.defaultMaxPrice,(c,d)=>{c!==d&&(o.value=e.defaultMaxPrice)},{immediate:!0}),se(()=>e.inputValue,c=>{if(c&&c!=="0"&&c!=="\u221E"){n.value=c;const k=c.toString().split(".")[1];r.value=c!=="0"&&c!=="\u221E"&&k&&k.length>6?ut(c,6):c}else(c=="0"||c=="\u221E")&&(r.value=c)},{immediate:!0});const u=_({});se(()=>e.poolInfo,(c,d)=>{c&&(u.value=c)},{immediate:!0});const f=_("");return se(()=>e.currentPriceTab,c=>{f.value=c},{immediate:!0}),{addPrice:a,minusPrice:s,oValue:r,changeValue:l,isDisabled:f}}});const ha={class:"set-price-item"},ma={class:"title"},pa={class:"input-box"},va={key:0,class:"minus-btn"},ga=["disabled"],ya={key:1,class:"plus-btn"};function wa(e,t,n,r,i,o){const a=$o,s=bi;return P(),R("div",ha,[m("div",ma,A(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),ue(s,{loading:e.loading,active:"",paragraph:!1},{default:Ie(()=>[m("div",pa,[e.isDisabled=="Custom"?(P(),R("a",va,[m("div",{class:xe(!e.fromCoin&&!e.toCoin?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:t[0]||(t[0]=(...l)=>e.minusPrice&&e.minusPrice(...l))},null,10,ga)])):Z("",!0),ue(a,{id:"pValu",value:e.oValue,"onUpdate:value":t[1]||(t[1]=l=>e.oValue=l),disabled:e.isDisabled!=="Custom",autocomplete:"off",onChange:t[2]||(t[2]=l=>e.changeValue(l.target.value))},null,8,["value","disabled"]),e.isDisabled=="Custom"?(P(),R("a",ya,[m("div",{class:xe(!e.fromCoin&&!e.toCoin?"addDis":"add"),onClick:t[3]||(t[3]=(...l)=>e.addPrice&&e.addPrice(...l))},null,2)])):Z("",!0)])]),_:1},8,["loading"]),m("p",{class:xe(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},A(e.toCoin&&e.toCoin.symbol)+" per "+A(e.fromCoin&&e.fromCoin.symbol),3)])}const Hr=Pt(da,[["render",wa],["__scopeId","data-v-167293e4"]]),ba=It({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1}},setup(e,t){let n=_(""),r=_(""),i=_(),o=_(!1),a=_(!1);const s=_({}),l=Bt(),u=oe(()=>l);or(()=>{n.value=e.min,r.value=e.max}),se(()=>e.currentPriceTab,(M,v)=>{M!==v&&(i.value=e.currentPriceTab)},{immediate:!0}),se(()=>e.min,(M,v)=>{M!==v&&(n.value=M)}),se(()=>e.max,(M,v)=>{M!==v&&(r.value=M)}),se(()=>e.poolInfo,(M,v)=>{M&&(s.value=M)},{immediate:!0});const f=M=>{n.value=M,t.emit("onChangeMinPrice",M)},c=M=>{r.value=M,t.emit("onChangeMaxPrice",M)};se(o,(M,v)=>{M!==v&&t.emit("onChangeFullRange",M)});const d=()=>{n.value=e.defaultMinPrice,r.value=e.defaultMaxPrice,a.value=!1,o.value=!1},k=()=>{a.value=!1,n.value="0",r.value="\u221E"};return se(o,(M,v)=>{M!==v&&t.emit("onChangeFullRange",M)}),{store:u,changeMinPrice:f,changeMaxPrice:c,importIcon:wn,resetPrice:d,changeShowUnderStand:()=>{o.value=!o.value,o.value?a.value=!0:d(),a.value||(n.value=e.defaultMinPrice,r.value=e.defaultMaxPrice)},showUnderStand:a,minPrice:n,maxPrice:r,understand:k,isRadio:o}}});const _a={class:"set-price"},ka={class:"card-container"},Ca={key:0,class:"card"},Aa=["src"],Sa={key:1,class:"understand"},Na={class:"left"},Ia={class:"right"};function Pa(e,t,n,r,i,o){const a=Hr,s=Hr,l=ar;return P(),R("div",_a,[m("div",ka,[e.showUnderStand?(P(),R("div",Sa,[m("div",Na,[m("p",null,A(e.$t("common.lowerEfficiency")),1),m("p",null,A(e.$t("common.lowerEfficiencyTips")),1)]),m("div",Ia,[ue(l,{onClick:e.understand},{default:Ie(()=>[Re(A(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(P(),R("div",Ca,[ue(a,{value:e.minPrice,"onUpdate:value":t[0]||(t[0]=u=>e.minPrice=u),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","onOnInput","onAddValue","onDelValue"]),ue(s,{value:e.maxPrice,"onUpdate:value":t[1]||(t[1]=u=>e.maxPrice=u),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","onOnInput","onAddValue","onDelValue"]),m("img",{src:e.importIcon("/image/lmg-line@2x.png"),alt:""},null,8,Aa)]))])])}const Ta=Pt(ba,[["render",Pa],["__scopeId","data-v-c2ba1b54"]]);function rn(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ma(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ii(e){let t,n,r;e.length!==2?(t=rn,n=(s,l)=>rn(e(s),l),r=(s,l)=>e(s)-l):(t=e===rn||e===Ma?e:$a,n=e,r=e);function i(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const c=u+f>>>1;n(s[c],l)<0?u=c+1:f=c}while(u<f)}return u}function o(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const c=u+f>>>1;n(s[c],l)<=0?u=c+1:f=c}while(u<f)}return u}function a(s,l,u=0,f=s.length){const c=i(s,l,u,f-1);return c>u&&r(s[c-1],l)>-r(s[c],l)?c-1:c}return{left:i,center:a,right:o}}function $a(){return 0}function xa(e){return e===null?NaN:+e}const Ea=Ii(rn),Ra=Ea.right;Ii(xa).center;const La=Ra;class zr extends Map{constructor(t,n=Oa){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Xr(this,t))}has(t){return super.has(Xr(this,t))}set(t,n){return super.set(Fa(this,t),n)}delete(t){return super.delete(Ba(this,t))}}function Xr({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Fa({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Ba({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Oa(e){return e!==null&&typeof e=="object"?e.valueOf():e}var Xn=Math.sqrt(50),Vn=Math.sqrt(10),Kn=Math.sqrt(2);function qa(e,t,n){var r,i=-1,o,a,s;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(o=e,e=t,t=o),(s=Pi(e,t,n))===0||!isFinite(s))return[];if(s>0){let l=Math.round(e/s),u=Math.round(t/s);for(l*s<e&&++l,u*s>t&&--u,a=new Array(o=u-l+1);++i<o;)a[i]=(l+i)*s}else{s=-s;let l=Math.round(e*s),u=Math.round(t*s);for(l/s<e&&++l,u/s>t&&--u,a=new Array(o=u-l+1);++i<o;)a[i]=(l+i)/s}return r&&a.reverse(),a}function Pi(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Xn?10:o>=Vn?5:o>=Kn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Xn?10:o>=Vn?5:o>=Kn?2:1)}function Ua(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Xn?i*=10:o>=Vn?i*=5:o>=Kn&&(i*=2),t<e?-i:i}function Da(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Ha(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}var za={value:()=>{}};function sr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new on(n)}function on(e){this._=e}function Xa(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}on.prototype=sr.prototype={constructor:on,on:function(e,t){var n=this._,r=Xa(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=Va(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=Vr(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Vr(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new on(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Va(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Vr(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=za,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Yn="http://www.w3.org/1999/xhtml";const Kr={svg:"http://www.w3.org/2000/svg",xhtml:Yn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Kr.hasOwnProperty(t)?{space:Kr[t],local:e}:e}function Ka(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Yn&&t.documentElement.namespaceURI===Yn?t.createElement(e):t.createElementNS(n,e)}}function Ya(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ti(e){var t=kn(e);return(t.local?Ya:Ka)(t)}function Wa(){}function lr(e){return e==null?Wa:function(){return this.querySelector(e)}}function Ga(e){typeof e!="function"&&(e=lr(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=new Array(a),l,u,f=0;f<a;++f)(l=o[f])&&(u=e.call(l,l.__data__,f,o))&&("__data__"in l&&(u.__data__=l.__data__),s[f]=u);return new Le(r,this._parents)}function ja(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Qa(){return[]}function Mi(e){return e==null?Qa:function(){return this.querySelectorAll(e)}}function Ja(e){return function(){return ja(e.apply(this,arguments))}}function Za(e){typeof e=="function"?e=Ja(e):e=Mi(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(r.push(e.call(l,l.__data__,u,a)),i.push(l));return new Le(r,i)}function $i(e){return function(){return this.matches(e)}}function xi(e){return function(t){return t.matches(e)}}var es=Array.prototype.find;function ts(e){return function(){return es.call(this.children,e)}}function ns(){return this.firstElementChild}function rs(e){return this.select(e==null?ns:ts(typeof e=="function"?e:xi(e)))}var is=Array.prototype.filter;function os(){return Array.from(this.children)}function as(e){return function(){return is.call(this.children,e)}}function ss(e){return this.selectAll(e==null?os:as(typeof e=="function"?e:xi(e)))}function ls(e){typeof e!="function"&&(e=$i(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],l,u=0;u<a;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&s.push(l);return new Le(r,this._parents)}function Ei(e){return new Array(e.length)}function us(){return new Le(this._enter||this._groups.map(Ei),this._parents)}function un(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}un.prototype={constructor:un,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function cs(e){return function(){return e}}function fs(e,t,n,r,i,o){for(var a=0,s,l=t.length,u=o.length;a<u;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new un(e,o[a]);for(;a<l;++a)(s=t[a])&&(i[a]=s)}function ds(e,t,n,r,i,o,a){var s,l,u=new Map,f=t.length,c=o.length,d=new Array(f),k;for(s=0;s<f;++s)(l=t[s])&&(d[s]=k=a.call(l,l.__data__,s,t)+"",u.has(k)?i[s]=l:u.set(k,l));for(s=0;s<c;++s)k=a.call(e,o[s],s,o)+"",(l=u.get(k))?(r[s]=l,l.__data__=o[s],u.delete(k)):n[s]=new un(e,o[s]);for(s=0;s<f;++s)(l=t[s])&&u.get(d[s])===l&&(i[s]=l)}function hs(e){return e.__data__}function ms(e,t){if(!arguments.length)return Array.from(this,hs);var n=t?ds:fs,r=this._parents,i=this._groups;typeof e!="function"&&(e=cs(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var f=r[u],c=i[u],d=c.length,k=ps(e.call(f,f&&f.__data__,u,r)),B=k.length,M=s[u]=new Array(B),v=a[u]=new Array(B),T=l[u]=new Array(d);n(f,c,M,v,T,k,t);for(var g=0,y=0,I,b;g<B;++g)if(I=M[g]){for(g>=y&&(y=g+1);!(b=v[y])&&++y<B;);I._next=b||null}}return a=new Le(a,r),a._enter=s,a._exit=l,a}function ps(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vs(){return new Le(this._exit||this._groups.map(Ei),this._parents)}function gs(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function ys(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var u=n[l],f=r[l],c=u.length,d=s[l]=new Array(c),k,B=0;B<c;++B)(k=u[B]||f[B])&&(d[B]=k);for(;l<i;++l)s[l]=n[l];return new Le(s,this._parents)}function ws(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function bs(e){e||(e=_s);function t(c,d){return c&&d?e(c.__data__,d.__data__):!c-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,l=i[o]=new Array(s),u,f=0;f<s;++f)(u=a[f])&&(l[f]=u);l.sort(t)}return new Le(i,this._parents).order()}function _s(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ks(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Cs(){return Array.from(this)}function As(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Ss(){let e=0;for(const t of this)++e;return e}function Ns(){return!this.node()}function Is(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this}function Ps(e){return function(){this.removeAttribute(e)}}function Ts(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ms(e,t){return function(){this.setAttribute(e,t)}}function $s(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function xs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Es(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Rs(e,t){var n=kn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Ts:Ps:typeof t=="function"?n.local?Es:xs:n.local?$s:Ms)(n,t))}function Ri(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ls(e){return function(){this.style.removeProperty(e)}}function Fs(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Bs(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Os(e,t,n){return arguments.length>1?this.each((t==null?Ls:typeof t=="function"?Bs:Fs)(e,t,n==null?"":n)):At(this.node(),e)}function At(e,t){return e.style.getPropertyValue(t)||Ri(e).getComputedStyle(e,null).getPropertyValue(t)}function qs(e){return function(){delete this[e]}}function Us(e,t){return function(){this[e]=t}}function Ds(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Hs(e,t){return arguments.length>1?this.each((t==null?qs:typeof t=="function"?Ds:Us)(e,t)):this.node()[e]}function Li(e){return e.trim().split(/^|\s+/)}function ur(e){return e.classList||new Fi(e)}function Fi(e){this._node=e,this._names=Li(e.getAttribute("class")||"")}Fi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Bi(e,t){for(var n=ur(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Oi(e,t){for(var n=ur(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function zs(e){return function(){Bi(this,e)}}function Xs(e){return function(){Oi(this,e)}}function Vs(e,t){return function(){(t.apply(this,arguments)?Bi:Oi)(this,e)}}function Ks(e,t){var n=Li(e+"");if(arguments.length<2){for(var r=ur(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Vs:t?zs:Xs)(n,t))}function Ys(){this.textContent=""}function Ws(e){return function(){this.textContent=e}}function Gs(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function js(e){return arguments.length?this.each(e==null?Ys:(typeof e=="function"?Gs:Ws)(e)):this.node().textContent}function Qs(){this.innerHTML=""}function Js(e){return function(){this.innerHTML=e}}function Zs(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function el(e){return arguments.length?this.each(e==null?Qs:(typeof e=="function"?Zs:Js)(e)):this.node().innerHTML}function tl(){this.nextSibling&&this.parentNode.appendChild(this)}function nl(){return this.each(tl)}function rl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function il(){return this.each(rl)}function ol(e){var t=typeof e=="function"?e:Ti(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function al(){return null}function sl(e,t){var n=typeof e=="function"?e:Ti(e),r=t==null?al:typeof t=="function"?t:lr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ll(){var e=this.parentNode;e&&e.removeChild(this)}function ul(){return this.each(ll)}function cl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dl(e){return this.select(e?fl:cl)}function hl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ml(e){return function(t){e.call(this,t,this.__data__)}}function pl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function vl(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function gl(e,t,n){return function(){var r=this.__on,i,o=ml(t);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function yl(e,t,n){var r=pl(e+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,f;l<u;++l)for(i=0,f=s[l];i<o;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(s=t?gl:vl,i=0;i<o;++i)this.each(s(r[i],t,n));return this}function qi(e,t,n){var r=Ri(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function wl(e,t){return function(){return qi(this,e,t)}}function bl(e,t){return function(){return qi(this,e,t.apply(this,arguments))}}function _l(e,t){return this.each((typeof t=="function"?bl:wl)(e,t))}function*kl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Ui=[null];function Le(e,t){this._groups=e,this._parents=t}function Dt(){return new Le([[document.documentElement]],Ui)}function Cl(){return this}Le.prototype=Dt.prototype={constructor:Le,select:Ga,selectAll:Za,selectChild:rs,selectChildren:ss,filter:ls,data:ms,enter:us,exit:vs,join:gs,merge:ys,selection:Cl,order:ws,sort:bs,call:ks,nodes:Cs,node:As,size:Ss,empty:Ns,each:Is,attr:Rs,style:Os,property:Hs,classed:Ks,text:js,html:el,raise:nl,lower:il,append:ol,insert:sl,remove:ul,clone:dl,datum:hl,on:yl,dispatch:_l,[Symbol.iterator]:kl};function We(e){return typeof e=="string"?new Le([[document.querySelector(e)]],[document.documentElement]):new Le([[e]],Ui)}function Al(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Yr(e,t){if(e=Al(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Wn={capture:!0,passive:!1};function Gn(e){e.preventDefault(),e.stopImmediatePropagation()}function Sl(e){var t=e.document.documentElement,n=We(e).on("dragstart.drag",Gn,Wn);"onselectstart"in t?n.on("selectstart.drag",Gn,Wn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Nl(e,t){var n=e.document.documentElement,r=We(e).on("dragstart.drag",null);t&&(r.on("click.drag",Gn,Wn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function cr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Di(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ht(){}var Ot=.7,cn=1/Ot,Ct="\\s*([+-]?\\d+)\\s*",qt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Il=/^#([0-9a-f]{3,8})$/,Pl=new RegExp(`^rgb\\(${Ct},${Ct},${Ct}\\)$`),Tl=new RegExp(`^rgb\\(${Ge},${Ge},${Ge}\\)$`),Ml=new RegExp(`^rgba\\(${Ct},${Ct},${Ct},${qt}\\)$`),$l=new RegExp(`^rgba\\(${Ge},${Ge},${Ge},${qt}\\)$`),xl=new RegExp(`^hsl\\(${qt},${Ge},${Ge}\\)$`),El=new RegExp(`^hsla\\(${qt},${Ge},${Ge},${qt}\\)$`),Wr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cr(Ht,pt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Gr,formatHex:Gr,formatHex8:Rl,formatHsl:Ll,formatRgb:jr,toString:jr});function Gr(){return this.rgb().formatHex()}function Rl(){return this.rgb().formatHex8()}function Ll(){return Hi(this).formatHsl()}function jr(){return this.rgb().formatRgb()}function pt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Il.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Qr(t):n===3?new Ee(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Jt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Jt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Pl.exec(e))?new Ee(t[1],t[2],t[3],1):(t=Tl.exec(e))?new Ee(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ml.exec(e))?Jt(t[1],t[2],t[3],t[4]):(t=$l.exec(e))?Jt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xl.exec(e))?ei(t[1],t[2]/100,t[3]/100,1):(t=El.exec(e))?ei(t[1],t[2]/100,t[3]/100,t[4]):Wr.hasOwnProperty(e)?Qr(Wr[e]):e==="transparent"?new Ee(NaN,NaN,NaN,0):null}function Qr(e){return new Ee(e>>16&255,e>>8&255,e&255,1)}function Jt(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ee(e,t,n,r)}function Fl(e){return e instanceof Ht||(e=pt(e)),e?(e=e.rgb(),new Ee(e.r,e.g,e.b,e.opacity)):new Ee}function jn(e,t,n,r){return arguments.length===1?Fl(e):new Ee(e,t,n,r==null?1:r)}function Ee(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}cr(Ee,jn,Di(Ht,{brighter(e){return e=e==null?cn:Math.pow(cn,e),new Ee(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ot:Math.pow(Ot,e),new Ee(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ee(mt(this.r),mt(this.g),mt(this.b),fn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jr,formatHex:Jr,formatHex8:Bl,formatRgb:Zr,toString:Zr}));function Jr(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}`}function Bl(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}${ht((isNaN(this.opacity)?1:this.opacity)*255)}`}function Zr(){const e=fn(this.opacity);return`${e===1?"rgb(":"rgba("}${mt(this.r)}, ${mt(this.g)}, ${mt(this.b)}${e===1?")":`, ${e})`}`}function fn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function mt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ht(e){return e=mt(e),(e<16?"0":"")+e.toString(16)}function ei(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new De(e,t,n,r)}function Hi(e){if(e instanceof De)return new De(e.h,e.s,e.l,e.opacity);if(e instanceof Ht||(e=pt(e)),!e)return new De;if(e instanceof De)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new De(a,s,l,e.opacity)}function Ol(e,t,n,r){return arguments.length===1?Hi(e):new De(e,t,n,r==null?1:r)}function De(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}cr(De,Ol,Di(Ht,{brighter(e){return e=e==null?cn:Math.pow(cn,e),new De(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ot:Math.pow(Ot,e),new De(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ee(Fn(e>=240?e-240:e+120,i,r),Fn(e,i,r),Fn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new De(ti(this.h),Zt(this.s),Zt(this.l),fn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fn(this.opacity);return`${e===1?"hsl(":"hsla("}${ti(this.h)}, ${Zt(this.s)*100}%, ${Zt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ti(e){return e=(e||0)%360,e<0?e+360:e}function Zt(e){return Math.max(0,Math.min(1,e||0))}function Fn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const fr=e=>()=>e;function ql(e,t){return function(n){return e+n*t}}function Ul(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Dl(e){return(e=+e)==1?zi:function(t,n){return n-t?Ul(t,n,e):fr(isNaN(t)?n:t)}}function zi(e,t){var n=t-e;return n?ql(e,n):fr(isNaN(e)?t:e)}const dn=function e(t){var n=Dl(t);function r(i,o){var a=n((i=jn(i)).r,(o=jn(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),u=zi(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=s(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function Hl(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function zl(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Xl(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Cn(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Vl(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ue(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Kl(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Cn(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Qn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bn=new RegExp(Qn.source,"g");function Yl(e){return function(){return e}}function Wl(e){return function(t){return e(t)+""}}function Xi(e,t){var n=Qn.lastIndex=Bn.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Qn.exec(e))&&(i=Bn.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:Ue(r,i)})),n=Bn.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?Wl(l[0].x):Yl(t):(t=l.length,function(u){for(var f=0,c;f<t;++f)s[(c=l[f]).i]=c.x(u);return s.join("")})}function Cn(e,t){var n=typeof t,r;return t==null||n==="boolean"?fr(t):(n==="number"?Ue:n==="string"?(r=pt(t))?(t=r,dn):Xi:t instanceof pt?dn:t instanceof Date?Vl:zl(t)?Hl:Array.isArray(t)?Xl:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Kl:Ue)(e,t)}function Gl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var ni=180/Math.PI,Jn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Vi(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*ni,skewX:Math.atan(l)*ni,scaleX:a,scaleY:s}}var en;function jl(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Jn:Vi(t.a,t.b,t.c,t.d,t.e,t.f)}function Ql(e){return e==null||(en||(en=document.createElementNS("http://www.w3.org/2000/svg","g")),en.setAttribute("transform",e),!(e=en.transform.baseVal.consolidate()))?Jn:(e=e.matrix,Vi(e.a,e.b,e.c,e.d,e.e,e.f))}function Ki(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,c,d,k,B){if(u!==c||f!==d){var M=k.push("translate(",null,t,null,n);B.push({i:M-4,x:Ue(u,c)},{i:M-2,x:Ue(f,d)})}else(c||d)&&k.push("translate("+c+t+d+n)}function a(u,f,c,d){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),d.push({i:c.push(i(c)+"rotate(",null,r)-2,x:Ue(u,f)})):f&&c.push(i(c)+"rotate("+f+r)}function s(u,f,c,d){u!==f?d.push({i:c.push(i(c)+"skewX(",null,r)-2,x:Ue(u,f)}):f&&c.push(i(c)+"skewX("+f+r)}function l(u,f,c,d,k,B){if(u!==c||f!==d){var M=k.push(i(k)+"scale(",null,",",null,")");B.push({i:M-4,x:Ue(u,c)},{i:M-2,x:Ue(f,d)})}else(c!==1||d!==1)&&k.push(i(k)+"scale("+c+","+d+")")}return function(u,f){var c=[],d=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,c,d),a(u.rotate,f.rotate,c,d),s(u.skewX,f.skewX,c,d),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,d),u=f=null,function(k){for(var B=-1,M=d.length,v;++B<M;)c[(v=d[B]).i]=v.x(k);return c.join("")}}}var Jl=Ki(jl,"px, ","px)","deg)"),Zl=Ki(Ql,", ",")",")"),St=0,Lt=0,Et=0,Yi=1e3,hn,Ft,mn=0,vt=0,An=0,Ut=typeof performance=="object"&&performance.now?performance:Date,Wi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function dr(){return vt||(Wi(eu),vt=Ut.now()+An)}function eu(){vt=0}function pn(){this._call=this._time=this._next=null}pn.prototype=Gi.prototype={constructor:pn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?dr():+n)+(t==null?0:+t),!this._next&&Ft!==this&&(Ft?Ft._next=this:hn=this,Ft=this),this._call=e,this._time=n,Zn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zn())}};function Gi(e,t,n){var r=new pn;return r.restart(e,t,n),r}function tu(){dr(),++St;for(var e=hn,t;e;)(t=vt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--St}function ri(){vt=(mn=Ut.now())+An,St=Lt=0;try{tu()}finally{St=0,ru(),vt=0}}function nu(){var e=Ut.now(),t=e-mn;t>Yi&&(An-=t,mn=e)}function ru(){for(var e,t=hn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:hn=n);Ft=e,Zn(r)}function Zn(e){if(!St){Lt&&(Lt=clearTimeout(Lt));var t=e-vt;t>24?(e<1/0&&(Lt=setTimeout(ri,e-Ut.now()-An)),Et&&(Et=clearInterval(Et))):(Et||(mn=Ut.now(),Et=setInterval(nu,Yi)),St=1,Wi(ri))}}function ii(e,t,n){var r=new pn;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var iu=sr("start","end","cancel","interrupt"),ou=[],ji=0,oi=1,er=2,an=3,ai=4,tr=5,sn=6;function Sn(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;au(e,n,{name:t,index:r,group:i,on:iu,tween:ou,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ji})}function hr(e,t){var n=He(e,t);if(n.state>ji)throw new Error("too late; already scheduled");return n}function je(e,t){var n=He(e,t);if(n.state>an)throw new Error("too late; already running");return n}function He(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function au(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Gi(o,0,n.time);function o(u){n.state=oi,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var f,c,d,k;if(n.state!==oi)return l();for(f in r)if(k=r[f],k.name===n.name){if(k.state===an)return ii(a);k.state===ai?(k.state=sn,k.timer.stop(),k.on.call("interrupt",e,e.__data__,k.index,k.group),delete r[f]):+f<t&&(k.state=sn,k.timer.stop(),k.on.call("cancel",e,e.__data__,k.index,k.group),delete r[f])}if(ii(function(){n.state===an&&(n.state=ai,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=er,n.on.call("start",e,e.__data__,n.index,n.group),n.state===er){for(n.state=an,i=new Array(d=n.tween.length),f=0,c=-1;f<d;++f)(k=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++c]=k);i.length=c+1}}function s(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=tr,1),c=-1,d=i.length;++c<d;)i[c].call(e,f);n.state===tr&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=sn,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function nr(e,t){var n=e.__transition,r,i,o=!0,a;if(!!n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>er&&r.state<tr,r.state=sn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function su(e){return this.each(function(){nr(this,e)})}function lu(e,t){var n,r;return function(){var i=je(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function uu(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=je(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}o.tween=i}}function cu(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=He(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?lu:uu)(n,e,t))}function mr(e,t,n){var r=e._id;return e.each(function(){var i=je(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return He(i,r).value[t]}}function Qi(e,t){var n;return(typeof t=="number"?Ue:t instanceof pt?dn:(n=pt(t))?(t=n,dn):Xi)(e,t)}function fu(e){return function(){this.removeAttribute(e)}}function du(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hu(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function mu(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function pu(e,t,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s)))}}function vu(e,t,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s)))}}function gu(e,t){var n=kn(e),r=n==="transform"?Zl:Qi;return this.attrTween(e,typeof t=="function"?(n.local?vu:pu)(n,r,mr(this,"attr."+e,t)):t==null?(n.local?du:fu)(n):(n.local?mu:hu)(n,r,t))}function yu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function wu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function bu(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&wu(e,o)),n}return i._value=t,i}function _u(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&yu(e,o)),n}return i._value=t,i}function ku(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=kn(e);return this.tween(n,(r.local?bu:_u)(r,t))}function Cu(e,t){return function(){hr(this,e).delay=+t.apply(this,arguments)}}function Au(e,t){return t=+t,function(){hr(this,e).delay=t}}function Su(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cu:Au)(t,e)):He(this.node(),t).delay}function Nu(e,t){return function(){je(this,e).duration=+t.apply(this,arguments)}}function Iu(e,t){return t=+t,function(){je(this,e).duration=t}}function Pu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Nu:Iu)(t,e)):He(this.node(),t).duration}function Tu(e,t){if(typeof t!="function")throw new Error;return function(){je(this,e).ease=t}}function Mu(e){var t=this._id;return arguments.length?this.each(Tu(t,e)):He(this.node(),t).ease}function $u(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;je(this,e).ease=n}}function xu(e){if(typeof e!="function")throw new Error;return this.each($u(this._id,e))}function Eu(e){typeof e!="function"&&(e=$i(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],l,u=0;u<a;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&s.push(l);return new it(r,this._parents,this._name,this._id)}function Ru(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l=t[s],u=n[s],f=l.length,c=a[s]=new Array(f),d,k=0;k<f;++k)(d=l[k]||u[k])&&(c[k]=d);for(;s<r;++s)a[s]=t[s];return new it(a,this._parents,this._name,this._id)}function Lu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Fu(e,t,n){var r,i,o=Lu(t)?hr:je;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}function Bu(e,t){var n=this._id;return arguments.length<2?He(this.node(),n).on.on(e):this.each(Fu(n,e,t))}function Ou(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function qu(){return this.on("end.remove",Ou(this._id))}function Uu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=lr(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],l=s.length,u=o[a]=new Array(l),f,c,d=0;d<l;++d)(f=s[d])&&(c=e.call(f,f.__data__,d,s))&&("__data__"in f&&(c.__data__=f.__data__),u[d]=c,Sn(u[d],t,n,d,u,He(f,n)));return new it(o,this._parents,t,n)}function Du(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Mi(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l=r[s],u=l.length,f,c=0;c<u;++c)if(f=l[c]){for(var d=e.call(f,f.__data__,c,l),k,B=He(f,n),M=0,v=d.length;M<v;++M)(k=d[M])&&Sn(k,t,n,M,d,B);o.push(d),a.push(f)}return new it(o,a,t,n)}var Hu=Dt.prototype.constructor;function zu(){return new Hu(this._groups,this._parents)}function Xu(e,t){var n,r,i;return function(){var o=At(this,e),a=(this.style.removeProperty(e),At(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function Ji(e){return function(){this.style.removeProperty(e)}}function Vu(e,t,n){var r,i=n+"",o;return function(){var a=At(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function Ku(e,t,n){var r,i,o;return function(){var a=At(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),At(this,e))),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}function Yu(e,t){var n,r,i,o="style."+t,a="end."+o,s;return function(){var l=je(this,e),u=l.on,f=l.value[o]==null?s||(s=Ji(t)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(a,i=f),l.on=r}}function Wu(e,t,n){var r=(e+="")=="transform"?Jl:Qi;return t==null?this.styleTween(e,Xu(e,r)).on("end.style."+e,Ji(e)):typeof t=="function"?this.styleTween(e,Ku(e,r,mr(this,"style."+e,t))).each(Yu(this._id,e)):this.styleTween(e,Vu(e,r,t),n).on("end.style."+e,null)}function Gu(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function ju(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&Gu(e,a,n)),r}return o._value=t,o}function Qu(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,ju(e,t,n==null?"":n))}function Ju(e){return function(){this.textContent=e}}function Zu(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function ec(e){return this.tween("text",typeof e=="function"?Zu(mr(this,"text",e)):Ju(e==null?"":e+""))}function tc(e){return function(t){this.textContent=e.call(this,t)}}function nc(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&tc(i)),t}return r._value=e,r}function rc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,nc(e))}function ic(){for(var e=this._name,t=this._id,n=Zi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var f=He(l,t);Sn(l,e,n,u,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new it(r,this._parents,e,n)}function oc(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--i===0&&o()}};n.each(function(){var u=je(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),i===0&&o()})}var ac=0;function it(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Zi(){return++ac}var nt=Dt.prototype;it.prototype={constructor:it,select:Uu,selectAll:Du,selectChild:nt.selectChild,selectChildren:nt.selectChildren,filter:Eu,merge:Ru,selection:zu,transition:ic,call:nt.call,nodes:nt.nodes,node:nt.node,size:nt.size,empty:nt.empty,each:nt.each,on:Bu,attr:gu,attrTween:ku,style:Wu,styleTween:Qu,text:ec,textTween:rc,remove:qu,tween:cu,delay:Su,duration:Pu,ease:Mu,easeVarying:xu,end:oc,[Symbol.iterator]:nt[Symbol.iterator]};function sc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var lc={time:null,delay:0,duration:250,ease:sc};function uc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function cc(e){var t,n;e instanceof it?(t=e._id,e=e._name):(t=Zi(),(n=lc).time=dr(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&Sn(l,e,t,u,a,n||uc(l,t));return new it(r,this._parents,e,t)}Dt.prototype.interrupt=su;Dt.prototype.transition=cc;const On=e=>()=>e;function fc(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function dc(e){e.stopImmediatePropagation()}function qn(e){e.preventDefault(),e.stopImmediatePropagation()}var si={name:"drag"},Un={name:"space"},wt={name:"handle"},bt={name:"center"};const{abs:li,max:Se,min:Ne}=Math;function ui(e){return[+e[0],+e[1]]}function ci(e){return[ui(e[0]),ui(e[1])]}var ln={name:"x",handles:["w","e"].map(vn),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Dn={name:"y",handles:["n","s"].map(vn),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},rt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},fi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},di={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},hc={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},mc={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function vn(e){return{type:e}}function pc(e){return!e.ctrlKey&&!e.button}function vc(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function gc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hn(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function yc(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function wc(){return bc(ln)}function bc(e){var t=vc,n=pc,r=gc,i=!0,o=sr("start","brush","end"),a=6,s;function l(v){var T=v.property("__brush",M).selectAll(".overlay").data([vn("overlay")]);T.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",rt.overlay).merge(T).each(function(){var y=Hn(this).extent;We(this).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1])}),v.selectAll(".selection").data([vn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",rt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var g=v.selectAll(".handle").data(e.handles,function(y){return y.type});g.exit().remove(),g.enter().append("rect").attr("class",function(y){return"handle handle--"+y.type}).attr("cursor",function(y){return rt[y.type]}),v.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",k).on("touchend.brush touchcancel.brush",B).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(v,T,g){v.tween?v.on("start.brush",function(y){f(this,arguments).beforestart().start(y)}).on("interrupt.brush end.brush",function(y){f(this,arguments).end(y)}).tween("brush",function(){var y=this,I=y.__brush,b=f(y,arguments),$=I.selection,E=e.input(typeof T=="function"?T.apply(this,arguments):T,I.extent),C=Cn($,E);function j(w){I.selection=w===1&&E===null?null:C(w),u.call(y),b.brush()}return $!==null&&E!==null?j:j(1)}):v.each(function(){var y=this,I=arguments,b=y.__brush,$=e.input(typeof T=="function"?T.apply(y,I):T,b.extent),E=f(y,I).beforestart();nr(y),b.selection=$===null?null:$,u.call(y),E.start(g).brush(g).end(g)})},l.clear=function(v,T){l.move(v,null,T)};function u(){var v=We(this),T=Hn(this).selection;T?(v.selectAll(".selection").style("display",null).attr("x",T[0][0]).attr("y",T[0][1]).attr("width",T[1][0]-T[0][0]).attr("height",T[1][1]-T[0][1]),v.selectAll(".handle").style("display",null).attr("x",function(g){return g.type[g.type.length-1]==="e"?T[1][0]-a/2:T[0][0]-a/2}).attr("y",function(g){return g.type[0]==="s"?T[1][1]-a/2:T[0][1]-a/2}).attr("width",function(g){return g.type==="n"||g.type==="s"?T[1][0]-T[0][0]+a:a}).attr("height",function(g){return g.type==="e"||g.type==="w"?T[1][1]-T[0][1]+a:a})):v.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(v,T,g){var y=v.__brush.emitter;return y&&(!g||!y.clean)?y:new c(v,T,g)}function c(v,T,g){this.that=v,this.args=T,this.state=v.__brush,this.active=0,this.clean=g}c.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(v,T){return this.starting?(this.starting=!1,this.emit("start",v,T)):this.emit("brush",v),this},brush:function(v,T){return this.emit("brush",v,T),this},end:function(v,T){return--this.active===0&&(delete this.state.emitter,this.emit("end",v,T)),this},emit:function(v,T,g){var y=We(this.that).datum();o.call(v,this.that,new fc(v,{sourceEvent:T,target:l,selection:e.output(this.state.selection),mode:g,dispatch:o}),y)}};function d(v){if(s&&!v.touches||!n.apply(this,arguments))return;var T=this,g=v.target.__data__.type,y=(i&&v.metaKey?g="overlay":g)==="selection"?si:i&&v.altKey?bt:wt,I=e===Dn?null:hc[g],b=e===ln?null:mc[g],$=Hn(T),E=$.extent,C=$.selection,j=E[0][0],w,S,ee=E[0][1],W,V,ie=E[1][0],O,K,L=E[1][1],x,fe,ae=0,de=0,ze,Qe=I&&b&&i&&v.shiftKey,Je,qe,Ce=Array.from(v.touches||[v],h=>{const J=h.identifier;return h=Yr(h,T),h.point0=h.slice(),h.identifier=J,h});nr(T);var Pe=f(T,arguments,!0).beforestart();if(g==="overlay"){C&&(ze=!0);const h=[Ce[0],Ce[1]||Ce[0]];$.selection=C=[[w=e===Dn?j:Ne(h[0][0],h[1][0]),W=e===ln?ee:Ne(h[0][1],h[1][1])],[O=e===Dn?ie:Se(h[0][0],h[1][0]),x=e===ln?L:Se(h[0][1],h[1][1])]],Ce.length>1&&ye(v)}else w=C[0][0],W=C[0][1],O=C[1][0],x=C[1][1];S=w,V=W,K=O,fe=x;var Fe=We(T).attr("pointer-events","none"),Be=Fe.selectAll(".overlay").attr("cursor",rt[g]);if(v.touches)Pe.moved=be,Pe.ended=ct;else{var Ze=We(v.view).on("mousemove.brush",be,!0).on("mouseup.brush",ct,!0);i&&Ze.on("keydown.brush",Tt,!0).on("keyup.brush",Y,!0),Sl(v.view)}u.call(T),Pe.start(v,y.name);function be(h){for(const J of h.changedTouches||[h])for(const _e of Ce)_e.identifier===J.identifier&&(_e.cur=Yr(J,T));if(Qe&&!Je&&!qe&&Ce.length===1){const J=Ce[0];li(J.cur[0]-J[0])>li(J.cur[1]-J[1])?qe=!0:Je=!0}for(const J of Ce)J.cur&&(J[0]=J.cur[0],J[1]=J.cur[1]);ze=!0,qn(h),ye(h)}function ye(h){const J=Ce[0],_e=J.point0;var he;switch(ae=J[0]-_e[0],de=J[1]-_e[1],y){case Un:case si:{I&&(ae=Se(j-w,Ne(ie-O,ae)),S=w+ae,K=O+ae),b&&(de=Se(ee-W,Ne(L-x,de)),V=W+de,fe=x+de);break}case wt:{Ce[1]?(I&&(S=Se(j,Ne(ie,Ce[0][0])),K=Se(j,Ne(ie,Ce[1][0])),I=1),b&&(V=Se(ee,Ne(L,Ce[0][1])),fe=Se(ee,Ne(L,Ce[1][1])),b=1)):(I<0?(ae=Se(j-w,Ne(ie-w,ae)),S=w+ae,K=O):I>0&&(ae=Se(j-O,Ne(ie-O,ae)),S=w,K=O+ae),b<0?(de=Se(ee-W,Ne(L-W,de)),V=W+de,fe=x):b>0&&(de=Se(ee-x,Ne(L-x,de)),V=W,fe=x+de));break}case bt:{I&&(S=Se(j,Ne(ie,w-ae*I)),K=Se(j,Ne(ie,O+ae*I))),b&&(V=Se(ee,Ne(L,W-de*b)),fe=Se(ee,Ne(L,x+de*b)));break}}K<S&&(I*=-1,he=w,w=O,O=he,he=S,S=K,K=he,g in fi&&Be.attr("cursor",rt[g=fi[g]])),fe<V&&(b*=-1,he=W,W=x,x=he,he=V,V=fe,fe=he,g in di&&Be.attr("cursor",rt[g=di[g]])),$.selection&&(C=$.selection),Je&&(S=C[0][0],K=C[1][0]),qe&&(V=C[0][1],fe=C[1][1]),(C[0][0]!==S||C[0][1]!==V||C[1][0]!==K||C[1][1]!==fe)&&($.selection=[[S,V],[K,fe]],u.call(T),Pe.brush(h,y.name))}function ct(h){if(dc(h),h.touches){if(h.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else Nl(h.view,ze),Ze.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Fe.attr("pointer-events","all"),Be.attr("cursor",rt.overlay),$.selection&&(C=$.selection),yc(C)&&($.selection=null,u.call(T)),Pe.end(h,y.name)}function Tt(h){switch(h.keyCode){case 16:{Qe=I&&b;break}case 18:{y===wt&&(I&&(O=K-ae*I,w=S+ae*I),b&&(x=fe-de*b,W=V+de*b),y=bt,ye(h));break}case 32:{(y===wt||y===bt)&&(I<0?O=K-ae:I>0&&(w=S-ae),b<0?x=fe-de:b>0&&(W=V-de),y=Un,Be.attr("cursor",rt.selection),ye(h));break}default:return}qn(h)}function Y(h){switch(h.keyCode){case 16:{Qe&&(Je=qe=Qe=!1,ye(h));break}case 18:{y===bt&&(I<0?O=K:I>0&&(w=S),b<0?x=fe:b>0&&(W=V),y=wt,ye(h));break}case 32:{y===Un&&(h.altKey?(I&&(O=K-ae*I,w=S+ae*I),b&&(x=fe-de*b,W=V+de*b),y=bt):(I<0?O=K:I>0&&(w=S),b<0?x=fe:b>0&&(W=V),y=wt),Be.attr("cursor",rt[g]),ye(h));break}default:return}qn(h)}}function k(v){f(this,arguments).moved(v)}function B(v){f(this,arguments).ended(v)}function M(){var v=this.__brush||{selection:null};return v.extent=ci(t.apply(this,arguments)),v.dim=e,v}return l.extent=function(v){return arguments.length?(t=typeof v=="function"?v:On(ci(v)),l):t},l.filter=function(v){return arguments.length?(n=typeof v=="function"?v:On(!!v),l):n},l.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:On(!!v),l):r},l.handleSize=function(v){return arguments.length?(a=+v,l):a},l.keyModifiers=function(v){return arguments.length?(i=!!v,l):i},l.on=function(){var v=o.on.apply(o,arguments);return v===o?l:v},l}function _c(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function gn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Nt(e){return e=gn(Math.abs(e)),e?e[1]:NaN}function kc(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function Cc(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Ac=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yn(e){if(!(t=Ac.exec(e)))throw new Error("invalid format: "+e);var t;return new pr({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}yn.prototype=pr.prototype;function pr(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}pr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Sc(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var eo;function Nc(e,t){var n=gn(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(eo=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+gn(e,Math.max(0,t+o-1))[0]}function hi(e,t){var n=gn(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const mi={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:_c,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>hi(e*100,t),r:hi,s:Nc,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function pi(e){return e}var vi=Array.prototype.map,gi=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Ic(e){var t=e.grouping===void 0||e.thousands===void 0?pi:kc(vi.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?pi:Cc(vi.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(c){c=yn(c);var d=c.fill,k=c.align,B=c.sign,M=c.symbol,v=c.zero,T=c.width,g=c.comma,y=c.precision,I=c.trim,b=c.type;b==="n"?(g=!0,b="g"):mi[b]||(y===void 0&&(y=12),I=!0,b="g"),(v||d==="0"&&k==="=")&&(v=!0,d="0",k="=");var $=M==="$"?n:M==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",E=M==="$"?r:/[%p]/.test(b)?a:"",C=mi[b],j=/[defgprs%]/.test(b);y=y===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function w(S){var ee=$,W=E,V,ie,O;if(b==="c")W=C(S)+W,S="";else{S=+S;var K=S<0||1/S<0;if(S=isNaN(S)?l:C(Math.abs(S),y),I&&(S=Sc(S)),K&&+S==0&&B!=="+"&&(K=!1),ee=(K?B==="("?B:s:B==="-"||B==="("?"":B)+ee,W=(b==="s"?gi[8+eo/3]:"")+W+(K&&B==="("?")":""),j){for(V=-1,ie=S.length;++V<ie;)if(O=S.charCodeAt(V),48>O||O>57){W=(O===46?i+S.slice(V+1):S.slice(V))+W,S=S.slice(0,V);break}}}g&&!v&&(S=t(S,1/0));var L=ee.length+S.length+W.length,x=L<T?new Array(T-L+1).join(d):"";switch(g&&v&&(S=t(x+S,x.length?T-W.length:1/0),x=""),k){case"<":S=ee+S+W+x;break;case"=":S=ee+x+S+W;break;case"^":S=x.slice(0,L=x.length>>1)+ee+S+W+x.slice(L);break;default:S=x+ee+S+W;break}return o(S)}return w.toString=function(){return c+""},w}function f(c,d){var k=u((c=yn(c),c.type="f",c)),B=Math.max(-8,Math.min(8,Math.floor(Nt(d)/3)))*3,M=Math.pow(10,-B),v=gi[8+B/3];return function(T){return k(M*T)+v}}return{format:u,formatPrefix:f}}var tn,to,no;Pc({thousands:",",grouping:[3],currency:["$",""]});function Pc(e){return tn=Ic(e),to=tn.format,no=tn.formatPrefix,tn}function Tc(e){return Math.max(0,-Nt(Math.abs(e)))}function Mc(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Nt(t)/3)))*3-Nt(Math.abs(e)))}function $c(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Nt(t)-Nt(e))+1}function vr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const yi=Symbol("implicit");function ro(){var e=new zr,t=[],n=[],r=yi;function i(o){let a=e.get(o);if(a===void 0){if(r!==yi)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new zr;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return ro(t,n).unknown(r)},vr.apply(i,arguments),i}function io(){var e=ro().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,a,s=!1,l=0,u=0,f=.5;delete e.unknown;function c(){var d=t().length,k=i<r,B=k?i:r,M=k?r:i;o=(M-B)/Math.max(1,d-l+u*2),s&&(o=Math.floor(o)),B+=(M-B-o*(d-l))*f,a=o*(1-l),s&&(B=Math.round(B),a=Math.round(a));var v=Ha(d).map(function(T){return B+o*T});return n(k?v.reverse():v)}return e.domain=function(d){return arguments.length?(t(d),c()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,c()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,s=!0,c()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(d){return arguments.length?(s=!!d,c()):s},e.padding=function(d){return arguments.length?(l=Math.min(1,u=+d),c()):l},e.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),c()):l},e.paddingOuter=function(d){return arguments.length?(u=+d,c()):u},e.align=function(d){return arguments.length?(f=Math.max(0,Math.min(1,d)),c()):f},e.copy=function(){return io(t(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(f)},vr.apply(c(),arguments)}function xc(e){return function(){return e}}function Ec(e){return+e}var wi=[0,1];function _t(e){return e}function rr(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:xc(isNaN(t)?NaN:.5)}function Rc(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Lc(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=rr(i,r),o=n(a,o)):(r=rr(r,i),o=n(o,a)),function(s){return o(r(s))}}function Fc(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=rr(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var l=La(e,s,1,r)-1;return o[l](i[l](s))}}function Bc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Oc(){var e=wi,t=wi,n=Cn,r,i,o,a=_t,s,l,u;function f(){var d=Math.min(e.length,t.length);return a!==_t&&(a=Rc(e[0],e[d-1])),s=d>2?Fc:Lc,l=u=null,c}function c(d){return d==null||isNaN(d=+d)?o:(l||(l=s(e.map(r),t,n)))(r(a(d)))}return c.invert=function(d){return a(i((u||(u=s(t,e.map(r),Ue)))(d)))},c.domain=function(d){return arguments.length?(e=Array.from(d,Ec),f()):e.slice()},c.range=function(d){return arguments.length?(t=Array.from(d),f()):t.slice()},c.rangeRound=function(d){return t=Array.from(d),n=Gl,f()},c.clamp=function(d){return arguments.length?(a=d?!0:_t,f()):a!==_t},c.interpolate=function(d){return arguments.length?(n=d,f()):n},c.unknown=function(d){return arguments.length?(o=d,c):o},function(d,k){return r=d,i=k,f()}}function qc(){return Oc()(_t,_t)}function Uc(e,t,n,r){var i=Ua(e,t,n),o;switch(r=yn(r==null?",f":r),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=Mc(i,a))&&(r.precision=o),no(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=$c(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Tc(i))&&(r.precision=o-(r.type==="%")*2);break}}return to(r)}function Dc(e){var t=e.domain;return e.ticks=function(n){var r=t();return qa(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return Uc(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],s=r[o],l,u,f=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);f-- >0;){if(u=Pi(a,s,n),u===l)return r[i]=a,r[o]=s,t(r);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function oo(){var e=qc();return e.copy=function(){return Bc(e,oo())},vr.apply(e,arguments),Dc(e)}function kt(e,t,n){this.k=e,this.x=t,this.y=n}kt.prototype={constructor:kt,scale:function(e){return e===1?this:new kt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new kt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new kt(1,0,0);kt.prototype;function zn(e,t,n){const r=new U(10).pow(t-n);return new U(1.0001).pow(e).mul(r)}const Hc=It({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""}},setup(e,t){const n=_(1),r=_(""),i=_(""),o=oe(()=>{var g,y,I;return c.sqrtPriceX64ToPrice((g=e.poolInfo)==null?void 0:g.current_sqrt_price,(y=e.poolInfo)==null?void 0:y.coinA.decimals,(I=e.poolInfo)==null?void 0:I.coinB.decimals).toString()}),a=oe(()=>{let g=0;return e.direction?g=(Number(e.minPrice)/Number(o.value)-1)*100:g=(Number(e.minPrice)/Number(1/Number(o.value))-1)*100,g=g>0&&g<.1?.1:g,g=g<0&&g>-.1?-.1:g,g}),s=oe(()=>{let g=0;return e.direction?g=(Number(e.maxPrice)/Number(o.value)-1)*100:g=(Number(e.maxPrice)/Number(1/Number(o.value))-1)*100,g=g>0&&g<.1?.1:g,g=g<0&&g>-.1?-.1:g,g}),l=Bt(),u=oe(()=>l),f=Rt(),{TickMath:c}=f,d=()=>{const g=n.value/2;n.value=g,B(e.poolInfo,g)},k=()=>{const g=n.value*2;n.value=g,B(e.poolInfo,g)},B=(g,y=1)=>{if(g&&g.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const I=Number(e.poolInfo.current_tick_index);let b=I+100*y,$=I-100*y,E,C;e.maxPrice==="\u221E"?C=0:e.direction?C=c.priceToTickIndex(new U(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):C=c.priceToTickIndex(new U(1/Number(e.minPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals),e.minPrice==="0"?E=0:e.direction?E=c.priceToTickIndex(new U(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):E=c.priceToTickIndex(new U(1/Number(e.maxPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals);let j=0;if(I>=E&&I<=C){const L=I-E,x=C-I;j=Math.max(Math.abs(L),Math.abs(x))}else I<E?j=Math.abs(C-I):j=Math.abs(I-E);b=I+j+100*y,$=I-j-100*y;const w=Number(g.liquidity)/Math.pow(10,6),S=e.tickList,ee=[],W=[];let V={};for(let L=0;L<S.length;L++)V=S[L],V.index<=I&&V.index>=$?ee.unshift(V):V.index>I&&V.index<=b&&W.push(V);let ie=Number(w);for(let L=0;L<ee.length;L++)ee[L].liquityAmount=ie-Number(ee[L].liquidityGross.toString()/Math.pow(10,6));let O=Number(w);for(let L=0;L<W.length;L++)W[L].liquityAmount=O-Number(W[L].liquidityGross.toString()/Math.pow(10,6));let K=[];K=[...ee.reverse(),{index:I,liquityAmount:Number(w)},...W],e.direction||(K=K.reverse()),v(K,$,b,E,C,I)}};let M=_(!1);or(()=>{document.body.clientWidth<750?M.value=!1:M.value=!0,window.onresize=()=>{document.body.clientWidth<750?M.value=!1:M.value=!0,B(e.poolInfo,n.value)}});const v=(g,y,I,b,$,E)=>{let C,j;e.direction?(C=e.before7dContractPriceLowest?c.priceToTickIndex(new U(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",j=e.before7dContractPriceHighest?c.priceToTickIndex(new U(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(C=e.before7dContractPriceLowest?c.priceToTickIndex(new U(1/Number(e.before7dContractPriceLowest)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",j=e.before7dContractPriceHighest?c.priceToTickIndex(new U(1/Number(e.before7dContractPriceHighest)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const w={top:30,right:35,bottom:20,left:55};let S,ee;M.value?(S=460-w.left-w.right,ee=205-w.top-w.bottom):(S=340-w.left-w.right,ee=205-w.top-w.bottom);const V=(I-y)/4;let ie=[y,y+V,y+2*V,I-V,I];const O=ie[0]-(ie[1]-ie[0])/3,K=ie[4]+(ie[4]-ie[3])/3,L=S/(K-O);We("#chart").selectAll("*").remove();const x=We("#chart").attr("width",S+w.left+w.right).attr("height",ee+w.top+w.bottom).append("g").attr("transform",`translate(${w.left},${w.right})`),fe=Da(g,function(Y){return Number(Y.liquityAmount)})||0,ae=oo().range([0,ee]).domain([fe,0]);io().rangeRound([0,S]).padding(.1),x.append("g").attr("id","barsBox").selectAll("rect").data(g).enter().append("rect").attr("x",function(Y,h){return h===0?0:e.direction?Math.abs(g[h-1].index-O)*L:Math.abs(K-g[h-1].index)*L}).attr("y",function(Y,h){return h===0?0:e.direction?ae(g[h-1].liquityAmount):ae(Y.liquityAmount)}).attr("width",function(Y,h){return h===0&&g.length===1&&Y.liquityAmount>0?S:h===0?0:e.direction?Math.abs(Y.index-g[h-1].index)*L:Math.abs(g[h-1].index-Y.index)*L}).attr("height",function(Y,h){return h===0&&g.length===1&&Y.liquityAmount>0?ee:h===0?0:e.direction?ee-ae(g[h-1].liquityAmount):ee-ae(Y.liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477");const Qe=x.append("g");Qe.append("line").attr("x1",0).attr("y1",155).attr("x2",S).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const Je=Qe.append("g");let qe=0;if(e.direction){for(let Y=0;Y<ie.length;Y++){const h=Ye(zn(ie[Y],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),zn(ie[Y],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()>1e3?4:6)||"0",J=Math.abs(ie[Y]-O)*L;let _e=0;for(let he=0;he<h.length;he++)h[he]==="1"?_e+=4.02:h[he]==="."?_e+=2.64:h[he]==="7"?_e+=5.48:_e+=6;Je.append("text").text(h).attr("x",J-_e/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}qe=Math.abs(E-O)*L}else{for(let Y=ie.length-1;Y>=0;Y--){const h=Ye(String(1/zn(ie[Y],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),6)||"0",J=Math.abs(ie[Y]-K)*L;let _e=0;for(let he=0;he<h.length;he++)h[he]==="1"?_e+=4.02:h[he]==="."?_e+=2.64:h[he]==="7"?_e+=5.48:_e+=6;Je.append("text").text(h).attr("x",J-_e/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}qe=Math.abs(E-K)*L}x.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8").attr("transform","translate("+qe+", 0)");let Pe,Fe,Be,Ze;e.direction?(Pe=b<O?-100:Math.abs(b-O)*L,Fe=$<O?-100:Math.abs($-O)*L,Be=C<O?-100:Math.abs(C-O)*L,Ze=j<O?-100:Math.abs(j-O)*L):(Fe=b<O?-100:Math.abs(K-b)*L,Pe=$<O?-100:Math.abs(K-$)*L,Ze=C<O?-100:Math.abs(K-C)*L,Be=j<O?-100:Math.abs(K-j)*L),e.minPrice==="0"&&(Pe=0),e.maxPrice==="\u221E"&&(Fe=S),M.value?r.value=S-Pe+60+"px":r.value=S-Pe+52+"px",i.value=Fe+74+"px",C&&Be<S&&x.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+Be+", 0)"),j&&Ze<S&&x.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+Ze+", 0)");const be=x.append("g").attr("id","left-handle"),ye=x.append("g").attr("id","right-handle");u.value.theme=="default"?(be.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),be.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),be.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),be.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),ye.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),ye.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),ye.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),ye.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(be.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),be.append("path").attr("d","M0 0 L20 0 L20 12 L0 12 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 20) rotate(180)"),be.append("text").text("Min").attr("fill","#B5B8C2").attr("x",-24).attr("y",14).attr("font-size","12px"),be.append("rect").attr("width",1).attr("height",6).attr("x",-32).attr("y",7).attr("fill","#76C8FF"),be.append("rect").attr("width",1).attr("height",8).attr("x",-30).attr("y",6).attr("fill","#76C8FF"),ye.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),ye.append("path").attr("d","M0 0 L20 0 L20 12 L0 12 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 0)"),ye.append("text").text("Max").attr("fill","#B5B8C2").attr("x",3).attr("y",14).attr("font-size","12px"),ye.append("rect").attr("width",1).attr("height",6).attr("x",31).attr("y",7).attr("fill","#76C8FF"),ye.append("rect").attr("width",1).attr("height",8).attr("x",29).attr("y",6).attr("fill","#76C8FF")),be.attr("transform","translate("+Pe+", 0)"),ye.attr("transform","translate("+Fe+", 0)");const ct=wc().extent([[0,0],[S,ee]]).handleSize(30).on("end",Tt);x.append("g").attr("class","brush").call(ct).call(ct.move,[Pe,Fe]);function Tt(Y){if(!Y.sourceEvent||!Y.selection)return;r.value=Y.selection[0]+"px",i.value=Y.selection[1]+74+"px",be.attr("transform","translate("+Y.selection[0]+", 0)"),ye.attr("transform","translate("+Y.selection[1]+", 0)");let h,J;e.direction?(h=c.tickIndexToPrice(Y.selection[0]/L+O,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),J=c.tickIndexToPrice(Y.selection[1]/L+O,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()):(h=1/c.tickIndexToPrice(K-Y.selection[0]/L,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),J=1/c.tickIndexToPrice(K-Y.selection[1]/L,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),t.emit("onChangeMinPrice",String(Ye(String(h),6))),t.emit("onChangeMaxPrice",String(Ye(String(J),6)))}We(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C")};_(""),se(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab],([g,y,I,b])=>{g&&y&&I&&(I=="\u221E"||Number(I)>Number(y))&&B(g,n.value)},{immediate:!0});const T=_(!0);return se(()=>e.chartLoading,(g,y)=>{g!==y&&(T.value=g)},{immediate:!0,deep:!0}),{store:u,loading:T,zoomOut:d,zoomIn:k,rangeSizeLower:a,rangeSizeUpper:s,rangeSizeLowerPosition:r,rangeSizeUpperPosition:i,decimalFormat:Ye}}});const zc=e=>(bn("data-v-07f09bf0"),e=e(),_n(),e),Xc={class:"chart-box"},Vc={class:"chart"},Kc={class:"zoom"},Yc=zc(()=>m("svg",{id:"chart"},null,-1)),Wc={key:2,class:"not-select-mask"};function Gc(e,t,n,r,i,o){return P(),R("div",Xc,[xo(m("div",Vc,[m("div",Kc,[m("div",{class:"amplification",onClick:t[0]||(t[0]=(...a)=>e.zoomOut&&e.zoomOut(...a))}),m("div",{class:"narrow",onClick:t[1]||(t[1]=(...a)=>e.zoomIn&&e.zoomIn(...a))})]),e.currentPriceTab!=="Full Range"?(P(),R("div",{key:0,class:"range-size range-size-lower",style:Er({right:e.rangeSizeLowerPosition})},A(e.decimalFormat(e.rangeSizeLower.toFixed(1),1))+"%",5)):Z("",!0),e.currentPriceTab!=="Full Range"?(P(),R("div",{key:1,class:"range-size range-size-upper",style:Er({left:e.rangeSizeUpperPosition})},A(e.decimalFormat(e.rangeSizeUpper.toFixed(1),1))+"%",5)):Z("",!0),Yc,e.currentPriceTab!=="Custom"?(P(),R("div",Wc)):Z("",!0)],512),[[Eo,!e.loading]])])}const jc=Pt(Hc,[["render",Gc],["__scopeId","data-v-07f09bf0"]]),Qc=It({components:{Modal:Ro},props:{},setup(){const e=_({}),t=Bt(),n=oe(()=>t),r=oe(()=>n.value.chainName),i=oe(()=>Lo[r.value]);let o=_(!0);const a=ir(),s=oe(()=>a),l=_i();return se(()=>s.value.currentPositionInfo,u=>{u&&(e.value=u)}),{addCommom:nn,router:l,pools:s,positionInfo:e,decimalFormat:Ye,rateChange:o,config:i,importIcon:wn,store:n}}});const Nn=e=>(bn("data-v-4f1083fb"),e=e(),_n(),e),Jc=Nn(()=>m("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Zc={class:"rejected-container"},ef={class:"coin-pair"},tf=Nn(()=>m("use",{"xlink:href":"#icon-icon-copy"},null,-1)),nf=[tf],rf=["href"],of=Nn(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-jump"})],-1)),af=[of],sf={class:"coin-pair"},lf=["src"],uf=["src"],cf={class:"fee"},ff={class:"status"},df={class:"min-and-max"},hf={key:0},mf={class:"text"},pf={key:0,src:Ai,alt:""},vf={key:1,src:Si,alt:""},gf={class:"text"},yf={key:1},wf={class:"text"},bf={key:0,src:Ai,alt:""},_f={key:1,src:Si,alt:""},kf={class:"text"},Cf=Nn(()=>m("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Af=[Cf];function Sf(e,t,n,r,i,o){const a=bi,s=jo,l=ar,u=Fo("Modal");return P(),Ke(u,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:t[3]||(t[3]=f=>e.$emit("onClose"))},{closeIcon:Ie(()=>[Jc]),default:Ie(()=>[m("div",Zc,[ue(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ie(()=>[m("div",ef,[Re(A(e.positionInfo.tokenName)+" ",1),(P(),R("svg",{class:"icon","aria-hidden":"true",onClick:t[0]||(t[0]=f=>e.store.copy(e.positionInfo.nftHash))},nf)),m("a",{href:`https://explorer.aptoslabs.com/token/${e.positionInfo.nftHash}/0?network=${e.config.network}`,target:"_blank"},af,8,rf)])]),_:1},8,["loading"]),m("div",{class:xe(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[ue(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ie(()=>[m("div",sf,[m("div",null,[m("img",{src:e.fromCoinUrl||e.positionInfo.token_a.logoURI||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,lf),m("img",{src:e.toCoinUrl||e.positionInfo.token_b.logoURI||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,uf)]),m("span",null,A(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" - "+A(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)]),m("div",cf,A(e.$t("common.fee"))+" "+A(e.positionInfo.fee)+"%",1)]),_:1},8,["loading"])],2),m("div",ff,[ue(s,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),ue(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ie(()=>[m("div",df,[e.rateChange?(P(),R("div",hf,[m("div",mf,A(e.addCommom(e.decimalFormat(String(e.positionInfo&&e.positionInfo.minPrice),6),6)),1),e.store.theme=="default"?(P(),R("img",pf)):(P(),R("img",vf)),m("div",gf,A(e.positionInfo&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.addCommom(e.decimalFormat(String(e.positionInfo&&e.positionInfo.maxPrice),6),6))+" "+A(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol)+" per "+A(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol),1)])):(P(),R("div",yf,[m("div",wf,A(e.addCommom(e.decimalFormat(String(1/Number(e.positionInfo&&e.positionInfo.maxPrice)),6),6)),1),e.store.theme=="default"?(P(),R("img",bf)):(P(),R("img",_f)),m("div",kf,A(e.positionInfo&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.addCommom(e.decimalFormat(String(1/Number(e.positionInfo&&e.positionInfo.minPrice)),6),6))+" "+A(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" per "+A(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)])),(P(),R("svg",{class:"icon-change","aria-hidden":"true",onClick:t[1]||(t[1]=f=>e.rateChange=!e.rateChange)},Af))])]),_:1},8,["loading"])]),ue(l,{onClick:t[2]||(t[2]=f=>e.router.push(`/position-detail/1?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}`))},{default:Ie(()=>[Re(A(e.$t("newAdd.viewDetail")),1)]),_:1})]),_:1},8,["title"])}const Nf=Pt(Qc,[["render",Sf],["__scopeId","data-v-4f1083fb"]]),If=It({setup(){const{t:e,locale:t}=Bo(),n=Oo(),r=oe(()=>n),i=Bt(),o=_(20),a=_(0),s=_(null),l=_(!1),u=_(!1),f=_(!1),c=_(!1),d=_("fromCoin"),k=_(""),B=_(""),M=_(!1),v=_(!0),T=_(!1),g=_(!1),y=_(!0),I=_(!1),b=_(""),$=_(""),E=_(""),C=_(""),j=_(""),w=_(""),S=_(!1),ee=_(!1),W=_(!1);_(!1);const V=_("0.01% "+e("common.feeTier")),ie=_(0),O=_(!0),K=_(!1),L=_([]),x=_(""),fe=_(7),ae=_("Estimated APR"),de=_([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),ze=_(!0),Qe=p=>{fe.value=p.num},Je=()=>{ze.value=!ze.value},qe=_([]),Ce=()=>{a.value=0,g.value=!0,Xt.updateCurrentPools(h.value.poolAddress),setTimeout(()=>{g.value=!1},1e3),xt()},Pe=oe(()=>Number(E.value)>Number(C.value)),Fe=p=>{T.value=p,E.value="0",C.value="\u221E"},Be=p=>{switch(p){case .01:return"Best for very stable pairs.";case .05:return"Best for stable pairs.";case .3:return"Best for most pairs.";case 1:return"Best for exotic pairs."}},Ze=oe(()=>{if(we.value.newTokenObj&&H.value&&z.value){const p=Object.values(we.value.pools).filter(F=>{var D,G,Q,te;return F.token_a.address.toUpperCase()===((D=H.value.address)==null?void 0:D.toUpperCase())&&F.token_b.address.toUpperCase()===((G=z.value.address)==null?void 0:G.toUpperCase())||F.token_b.address.toUpperCase()===((Q=H.value.address)==null?void 0:Q.toUpperCase())&&F.token_a.address.toUpperCase()===((te=z.value.address)==null?void 0:te.toUpperCase())}),N=[];return p.forEach(F=>{N.push({label:F.fee+"% "+e("common.feeTier"),title:F.fee+"% fee",address:F.address,fee:F.fee,text:Be(F.fee)})}),N}}),be=oe(()=>i.slippage),ye=oe(()=>!H.value||!z.value),ct=oe(()=>h.value&&h.value.is_pause?"Pool Closed":ye.value?e("newAdd.invalidPair"):h.value?Number(b.value)>Number(at.value)?e("button.insufficientBalance",{name:H.value.symbol}):Number($.value)>Number(st.value)?e("button.insufficientBalance",{name:z.value.symbol}):I.value?e("modal.selectTokenModalTitle"):C.value!=="\u221E"&&Number(E.value)>=Number(C.value)?e("newAdd.invalidRange"):!Number(b.value)&&!Number($.value)?e("button.enterAmount"):e("button.addLiquidity"):e("button.poolNotFound")),Tt=Bt(),Y=oe(()=>Tt),h=oe(()=>{var N,F,D,G,Q;const p=(N=Oe==null?void 0:Oe.query)==null?void 0:N.fee;if(we.value.newTokenObj&&H.value&&z.value&&p){let te=null;for(const X in we.value.poolsObj){const q=we.value.poolsObj[X];(q.token_a.address.toUpperCase()===((F=H.value.address)==null?void 0:F.toUpperCase())&&q.token_b.address.toUpperCase()===((D=z.value.address)==null?void 0:D.toUpperCase())&&q.fee==Wt.value*100||q.token_b.address.toUpperCase()===((G=H.value.address)==null?void 0:G.toUpperCase())&&q.token_a.address.toUpperCase()===((Q=z.value.address)==null?void 0:Q.toUpperCase())&&q.fee==Wt.value*100)&&(te=q)}return te&&!En(te)?te:null}return null}),J=oe(()=>{var p,N,F;return!h.value||En(Y.value.addressHistTokens)||!Y.value.addressHistTokens[(p=h.value)==null?void 0:p.poolAddress]?null:Object.fromEntries((F=Y.value.addressHistTokens[(N=h.value)==null?void 0:N.poolAddress])==null?void 0:F.data.map(D=>[D.key,D.value]))}),_e=oe(()=>v.value?J.value&&Gt(Number(J.value.before_7_d_contract_price_lowest),6)||null:J.value&&Gt(1/Number(J.value.before_7_d_contract_price_highest),6)||null),he=oe(()=>v.value?J.value&&Gt(Number(J.value.before_7_d_contract_price_highest),6)||null:J.value&&Gt(1/Number(J.value.before_7_d_contract_price_lowest),6)||null),ao=_i(),H=_(),z=_();or(()=>{gr(),document.body.clientWidth<750?ze.value=!1:ze.value=!0}),qo(()=>{clearInterval(s.value)});const so=p=>{E.value=p},lo=p=>{C.value=p},uo=()=>{O.value=!0;const p=H.value;if(H.value=z.value,z.value=p,v.value=!v.value,b.value=$.value,O.value=!1,E.value!==""&&C.value!==""&&E.value!=="0"&&C.value!=="\u221E"){const N=E.value,F=C.value;(!K.value||!v.value)&&(E.value=String(1/Number(F)),C.value=String(1/Number(N)));const D=j.value,G=w.value;j.value=String(1/Number(G)),w.value=String(1/Number(D)),Tn({key:x.value,...kr.value[x.value]}),K.value=!1}};se([E,C],([p],[N])=>{h.value&&Ao(h.value),xt(),h.value&&C.value!=="\u221E"&&Number(E.value)>=Number(C.value)?W.value=!0:W.value=!1});const co=p=>{var N,F,D,G;d.value=p,p==="fromCoin"?(k.value=((N=z.value)==null?void 0:N.address)||"",B.value=((F=H.value)==null?void 0:F.address)||""):(k.value=((D=H.value)==null?void 0:D.address)||"",B.value=((G=z.value)==null?void 0:G.address)||""),M.value=!0},fo=p=>{I.value=!1,d.value==="fromCoin"?(z.value&&p.address.toLowerCase()===(z==null?void 0:z.value.address.toLowerCase())&&(z.value=null),H.value=p):(H.value&&p.address.toLowerCase()===(H==null?void 0:H.value.address.toLowerCase())&&(H.value=null),z.value=p),M.value=!1},ho=p=>{p==="fromCoin"?(y.value=!0,b.value=at.value>0?H.value.symbol=="APT"?new U(Number(at.value)).sub(new U(.1)).lt(new U(0))?"0":new U(Number(at.value)).sub(new U(.1)).toString():String(at.value):""):(y.value=!1,$.value=st.value>0?z.value.symbol=="APT"?new U(Number(st.value)).sub(new U(.1)).lt(new U(0))?"0":new U(Number(st.value)).sub(new U(.1)).toString():String(st.value):"")},mo=p=>{p==="fromCoin"?(y.value=!0,b.value=at.value>0?Rr(new U(Number(at.value)).div(2).toString(),H.value.decimals).toString():""):(y.value=!1,$.value=st.value>0?Rr(new U(Number(st.value)).div(2).toString(),z.value.decimals).toString():"")},gr=()=>{s.value=setInterval(()=>{u.value||a.value<o.value&&(a.value+=1,a.value===o.value&&(h.value.poolAddress&&Xt.updateCurrentPools(h.value.poolAddress),a.value=0))},1e3)};se(b,(p,N)=>{p==""&&y.value&&($.value=""),p&&y.value&&xt()}),se($,(p,N)=>{p==""&&!y.value&&(b.value=""),p&&!y.value&&xt()});const po=()=>{H.value=null,z.value=null,E.value="0",C.value="0",b.value="",$.value="",I.value=!0,V.value="",S.value=!1,Te.value=!0,Me.value=!0,O.value=!1},yr=_(!1),{setIsShowSuccess:wr,setIsShowRejected:br,setIsShowWaiting:zt,setTransactionDesc:vo,setTransactionTxid:_r,setPositiomNum:go}=i,Oe=Uo(),Xt=ir(),we=oe(()=>Xt);se(()=>we.value.newTokenObj,p=>{En(p)||(Oe&&Oe.query&&Oe.query.tokena?H.value=jt(p,Oe.query.tokena):H.value=jt(p,"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT"),Oe&&Oe.query&&Oe.query.tokenb?z.value=jt(p,Oe.query.tokenb):z.value=jt(p,"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDC"))},{immediate:!0});const Mt=_({}),Te=_(!1),Me=_(!1),In=_(),Pn=_(),et=Rt(),$t=_(),Vt=_(),Kt=_(""),Yt=_(""),xt=async()=>{var $e,Ae;if(!h.value||!b.value&&!$.value&&!E.value&&!C.value)return;const{TickUtil:p,TickMath:N,getNearestTickByTick:F}=Rt(),D=h.value.token_a.decimals,G=h.value.token_b.decimals;let Q,te,X,q,me,ne,pe,ce;const ve=h.value.current_tick_index,ke=h.value.priceConfigObj;let re;if(h.value.token_a.address.toLowerCase()===H.value.address.toLowerCase()&&h.value.token_b.address.toLowerCase()===z.value.address.toLowerCase()?re=!0:re=!1,E.value==="0"&&C.value==="\u221E"?(X=p.getMinIndex(h.value.tickSpacing),q=p.getMaxIndex(h.value.tickSpacing),me=N.tickIndexToSqrtPriceX64(X),ne=N.tickIndexToSqrtPriceX64(q)):x.value=="Custom"?(re?(Q=Number(E.value),te=Number(C.value)):(Q=1/Number(C.value),te=1/Number(E.value)),pe=N.priceToTickIndex(new U(Q),D,G),ce=N.priceToTickIndex(new U(te),D,G),X=F(pe,h.value.tickSpacing),q=F(ce,h.value.tickSpacing),me=N.priceToSqrtPriceX64(new U(Q),D,G),ne=N.priceToSqrtPriceX64(new U(te),D,G)):(X=ke[x.value].lower,q=ke[x.value].upper,me=N.tickIndexToSqrtPriceX64(X),ne=N.tickIndexToSqrtPriceX64(q)),C.value!=="\u221E"&&X>=q){Te.value=!0,b.value="",Me.value=!0,$.value="";return}if(C.value==="\u221E"||ve>X&&ve<q){Te.value=!1,Me.value=!1;let le;if(b.value||$.value){if(y.value){const Xe=new U(b.value).mul(Math.pow(10,H.value.decimals)).toString();le=new Ve(Xe)}else{const Xe=new U($.value).mul(Math.pow(10,z.value.decimals)).toString();le=new Ve(Xe)}const{liquidityAmount:ge,tokenMaxA:lt,tokenMaxB:tt,tokenMaxAOrigin:gt,tokenMaxBOrigin:dt}=et.estLiquidityAndcoinAmountFromOneAmounts({tokenA:h.value.token_a,tokenB:h.value.token_b,lowerTick:X,upperTick:q,coinAmount:le,iscoinA:re?y.value:!y.value,roundUp:!0,slippage:Number(be.value)/100,curSqrtPrice:new Ve(h.value.current_sqrt_price)});Mt.value={liquidityAmount:ge,tokenMaxA:lt,tokenMaxB:tt,tokenMaxAOrigin:gt,tokenMaxBOrigin:dt},re?y.value?$.value=Number(tt)>0?tt:"":b.value=Number(lt)>0?lt:"":y.value?$.value=lt:b.value=tt}}else if(ve>=q){if(re?b.value="":$.value="",Te.value=re,Me.value=!re,b.value||$.value){let le;if(re){const ge=new U($.value).mul(Math.pow(10,($e=z.value)==null?void 0:$e.decimals)).toString();le=new Ve(ge),Mt.value={liquidityAmount:Lr(me,ne,le),tokenMaxA:0,tokenMaxB:$.value}}else{const ge=new U(b.value).mul(Math.pow(10,(Ae=H.value)==null?void 0:Ae.decimals)).toString();le=new Ve(ge),Mt.value={liquidityAmount:Lr(me,ne,le),tokenMaxA:0,tokenMaxB:b.value}}}}else if(ve<=X){if(Te.value=!re,Me.value=re,re?$.value="":b.value="",b.value||$.value){let le;if(re){const ge=new U(b.value).mul(Math.pow(10,H.value.decimals)).toString();le=new Ve(ge),Mt.value={liquidityAmount:Fr(me,ne,le),tokenMaxA:b.value,tokenMaxB:0}}else{const ge=new U($.value).mul(Math.pow(10,z.value.decimals)).toString();le=new Ve(ge),Mt.value={liquidityAmount:Fr(me,ne,le),tokenMaxA:$.value,tokenMaxB:0}}}}else Te.value=!0,b.value="",Me.value=!0,$.value=""},Wt=_(0);se(()=>Oe.query,p=>{p&&p.fee&&(Wt.value=p.fee)},{immediate:!0});const kr=_({}),yo=async(p,N)=>{if(p){const{TickMath:F,getNearestTickByTick:D}=Rt();N&&(O.value=!0),p.token_a.address.toLowerCase()===H.value.address.toLowerCase()&&p.token_b.address.toLowerCase()===z.value.address.toLowerCase()?v.value=!0:v.value=!1,K.value=!0;const G=p.token_a.decimals,Q=p.token_b.decimals;Te.value=!1,Me.value=!1,V.value=p.fee+"% "+e("common.feeTier");const te=p.current_tick_index;$t.value=Ye(F.sqrtPriceX64ToPrice(p.current_sqrt_price,G,Q).toString(),6),Vt.value=Ye(String(1/$t.value),6);const X=await et.getTicks(p);if(L.value=et.getTickDataFromUrlData(X),N){let q=p.priceConfigObj;const me=te-Number(h.value.type=="unstable"?h.value.tickSpacing*2:h.value.tickSpacing*3),ne=te+Number(h.value.type=="unstable"?h.value.tickSpacing*2:h.value.tickSpacing*3);q["Full Range"]={lower:-443630,upper:443630},q.Custom={lower:me,upper:ne};const pe=[];for(let ce in q)pe.push({...q[ce],key:ce});if(qe.value=pe,p.type=="stable"?x.value="suggested":x.value="passive",kr.value=q,Tn({key:x.value,...q[x.value]}),v.value){const ce=q[x.value].lower,ve=q[x.value].upper,ke=F.tickIndexToPrice(ce,G,Q).toString(),re=F.tickIndexToPrice(ve,G,Q).toString();j.value=String(ke),E.value=String(ke),w.value=String(re),C.value=String(re)}else{const ce=q[x.value].lower,ve=q[x.value].upper,ke=F.tickIndexToPrice(ce,G,Q).toString(),re=F.tickIndexToPrice(ve,G,Q).toString();j.value=String(1/Number(re)),E.value=String(1/Number(re)),w.value=String(1/Number(ke)),C.value=String(1/Number(ke))}}O.value=!1}},Cr=_();se(()=>we.value.RATES,p=>{p&&(Cr.value=p)},{immediate:!0}),se(()=>[h.value,E.value,C.value],([p,N,F])=>{p?wo():p&&Cr?(Kt.value="--",Yt.value="--"):(Kt.value="",Yt.value="")});const wo=async()=>{var tt,gt;if(!E.value&&!C.value)return;const{TickUtil:p,TickMath:N,getNearestTickByTick:F}=Rt(),D=h.value.token_a.decimals,G=h.value.token_b.decimals;let Q,te,X,q,me,ne,pe,ce=1,ve=1;const ke=h.value.current_tick_index,re=h.value.priceConfigObj;if(h.value.token_a.address.toLowerCase()===H.value.address.toLowerCase()&&h.value.token_b.address.toLowerCase()===z.value.address.toLowerCase()?pe=!0:pe=!1,E.value==="0"&&C.value==="\u221E"?(X=p.getMinIndex(h.value.tickSpacing),q=p.getMaxIndex(h.value.tickSpacing),N.tickIndexToSqrtPriceX64(X),N.tickIndexToSqrtPriceX64(q)):x.value=="Custom"?(pe?(Q=Number(E.value),te=Number(C.value)):(Q=1/Number(C.value),te=1/Number(E.value)),me=N.priceToTickIndex(new U(Q),D,G),ne=N.priceToTickIndex(new U(te),D,G),X=F(me,h.value.tickSpacing),q=F(ne,h.value.tickSpacing),N.priceToSqrtPriceX64(new U(Q),D,G),N.priceToSqrtPriceX64(new U(te),D,G)):(X=(tt=re[x.value])==null?void 0:tt.lower,q=(gt=re[x.value])==null?void 0:gt.upper,N.tickIndexToSqrtPriceX64(X),N.tickIndexToSqrtPriceX64(q)),C.value==="\u221E"||ke>X&&ke<q){let dt;if(y.value){const xn=new U(1).mul(Math.pow(10,H.value.decimals)).toString();dt=new Ve(xn)}else{const xn=new U(1).mul(Math.pow(10,z.value.decimals)).toString();dt=new Ve(xn)}const{tokenMaxA:Xe,tokenMaxB:$n}=await et.estLiquidityAndcoinAmountFromOneAmounts({tokenA:h.value.token_a,tokenB:h.value.token_b,lowerTick:X,upperTick:q,coinAmount:dt,iscoinA:pe?y.value:!y.value,roundUp:!0,slippage:Number(be.value)/100,curSqrtPrice:new Ve(h.value.current_sqrt_price)});pe?y.value?ve=Number($n)>0?$n:"":ce=Number(Xe)>0?Xe:"":y.value?ve=Xe:ce=$n}else ke>=q?pe?(ve=1,ce=0):(ce=1,ve=0):ke<=X&&(pe?(ve=0,ce=1):(ve=1,ce=0));const $e=ce?Number(ce):0,Ae=ve?Number(ve):0,le=Ae+Number(pe?$e*$t.value:$e*Vt.value),ge=((pe?$t.value*$e:Vt.value*$e)/le*100).toFixed(0),lt=(Ae/le*100).toFixed(0);Kt.value=ge,Yt.value=lt};se(()=>h.value,(p,N)=>{p?(!N||p.poolAddress!==N.poolAddress||p.current_sqrt_price!==N.current_sqrt_price)&&yo(p,!N||p.poolAddress!==N.poolAddress):(E.value="0",C.value="0",b.value="",$.value="",V.value="",S.value=!1,Te.value=!1,Me.value=!1)},{immediate:!0,deep:!0});const at=oe(()=>r.value.assets&&H.value&&r.value.assets[H.value.address]?qr(r.value.assets[H.value.address].balance,H.value.decimals):0),st=oe(()=>r.value.assets&&z.value&&r.value.assets[z.value.address]?qr(r.value.assets[z.value.address].balance,z.value.decimals):0),bo=async()=>{var ne,pe,ce,ve,ke,re;yr.value=!1,we.value.currentPositionInfo={},_r(""),vo(e("tips.increaseLiquiditySuccess",{from:Te.value?"":`${b.value} ${(ne=H.value)==null?void 0:ne.symbol}`,and:!Te.value&&!Me.value?"and":"",to:Me.value?"":`${$.value} ${(pe=z.value)==null?void 0:pe.symbol}`})),zt(!0);const p=v.value?y.value:!y.value,N=h.value.priceConfigObj;let F,D,G,Q,te,X;const q=h.value.token_a.decimals,me=h.value.token_b.decimals;E.value==="0"&&C.value==="\u221E"?(G=Br.getMinIndex(h.value.tickSpacing),Q=Br.getMaxIndex(h.value.tickSpacing)):x.value=="Custom"?(v.value?(F=Number(E.value),D=Number(C.value)):(F=1/Number(C.value),D=1/Number(E.value)),te=yt.priceToTickIndex(new U(F),q,me),X=yt.priceToTickIndex(new U(D),q,me),G=Or(te,h.value.tickSpacing),Q=Or(X,h.value.tickSpacing)):(G=N[x.value].lower,Q=N[x.value].upper);try{const $e=await et.getAddLiquidityTransactionPayload({pool:{poolAddress:h.value.poolAddress,token_a:h.value.token_a,token_b:h.value.token_b},amount:y.value?b.value:$.value,fix_amount_a:p,tick_lower:G,tick_upper:Q,index:0,slippage:Number(be.value)/100,roundUp:!0});let Ae;if(Ae=await r.value.currentWallet.signAndSubmitTransaction($e),Ae&&Ae.hash){_r(Ae.hash),zt(!1),wr(!0);const le={title:e("button.addLiquidity"),desc:e("tips.addLiquiditySuccessText",{from:Te.value?"":`${b.value} ${(ce=H.value)==null?void 0:ce.symbol}`,and:!Te.value&&!Me.value?"and":"",to:Me.value?"":`${$.value} ${(ve=z.value)==null?void 0:ve.symbol}`}),hash:Ae.hash,tit:`Opened Position: ${h.value.symbol}`,text:`Deopsit ${Te.value?"":`${b.value} ${(ke=H.value)==null?void 0:ke.symbol}`} ${!Te.value&&!Me.value?"and":""} ${Me.value?"":`${$.value} ${(re=z.value)==null?void 0:re.symbol}`}`};et.showTransitionPending(le);const ge=await et.watchTransaction(le,!0);ge.status&&(wr(!1),we.value.setCurrentPositionLoading(!0),we.value.setCurrentPositionInfo(ge.nftInfo[0].data.id.creator,ge.nftInfo[0].data.id.collection,ge.nftInfo[0].data.name),l.value=!0,setTimeout(()=>{Xt.updateCurrentPools(h.value.poolAddress),et.getAccount(r.value.address)},1e3)),go()}else zt(!1),br(!0);b.value="",$.value=""}catch{b.value="",$.value="",zt(!1),br(!0)}},_o=p=>{switch(p){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"Full Range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"Custom":return e("newAdd.customTips")}},ko=p=>{switch(p){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"Full Range":return e("newAdd.fullRange");case"Custom":return e("newAdd.custom")}},Tn=p=>{x.value=p.key;const N=h.value.token_a.decimals,F=h.value.token_b.decimals,{lower:D,upper:G}=p,Q=yt.tickIndexToPrice(D,N,F).toString(),te=yt.tickIndexToPrice(G,N,F).toString();if(p.key=="Full Range"){In.value=D,Pn.value=G,Fe(!0);return}v.value?(j.value=String(Q),E.value=String(Q),w.value=String(te),C.value=String(te),In.value=D,Pn.value=G):(j.value=String(1/Number(te)),E.value=String(1/Number(te)),w.value=String(1/Number(Q)),C.value=String(1/Number(Q)),In.value=yt.priceToTickIndex(new U(1/Number(te)),N,F),Pn.value=yt.priceToTickIndex(new U(1/Number(Q)),N,F)),xt()},Ar=_(""),Sr=_(""),Nr=_(""),Mn=oe(()=>i),Co=(p,N)=>p&&N?ut(Qo.plus(Rn(p),Rn(N)),2)+"%":p,Ir=p=>{let N=0;return p&&p.forEach(F=>{N+=Rn(String(F))}),String(ut(String(N),2))},Pr=_([]),Tr=_([]),Mr=_(""),$r=_("");se(()=>[Mn.value.newTopPoolsObj,h.value,we.value.newTokenObj],async([p,N,F])=>{if(p&&N&&p[N.poolAddress]&&F){const D=p[N.poolAddress];Ar.value=D&&D.apr_7day,$r.value=Ir(D&&D.rewarder_apr),Mr.value=Co(D&&D.apr_7day,D&&Ir(D.rewarder_apr)),Sr.value=nn(D.tvl_in_usd,2),Nr.value=nn(D.vol_in_usd_24h,2);const G=N&&N.rewarder_infos||[],Q=[];G.forEach((X,q)=>{const me=F[X.coinAddress].decimals,ne=Ye(X.emissionsEveryDay/Math.pow(10,me),4),pe=Ye(Number(ne)*we.value.RATES[X.coinAddress].price,4);Q.push({...X,logoUrl:F[X.coinAddress].logoURI,day:ne,dayUSD:pe,symbol:F[X.coinAddress].symbol,rewarder_display:N&&N[`rewarder_display${q+1}`]?N[`rewarder_display${q+1}`]:!1})}),Pr.value=Q.filter(X=>X.rewarder_display);const te=[];Q.forEach((X,q)=>{te.push({...X,symbol:F[X.coinAddress].symbol,rewarderApr:D.rewarder_apr[q]})}),Tr.value=te.filter(X=>X.rewarder_display)}},{immediate:!0,deep:!0});const xr=_({}),Ao=async p=>{let N;p.token_a.address.toLowerCase()===H.value.address.toLowerCase()&&p.token_b.address.toLowerCase()===z.value.address.toLowerCase()?N=!0:N=!1;const F=N?Number(E.value):C.value=="\u221E"?1/2**50:1/Number(C.value),D=isNaN(Number(C.value))||C.value=="\u221E"?2**50:N?Number(C.value):1/Number(E.value);let G=[];G=Object.fromEntries(Mn.value.addressHistTokens[p.poolAddress].data.map(Xe=>[Xe.key,Xe.value]));const Q=Number(Number(G.before_7_d_contract_price_lowest)),te=Number(Number(G.before_7_d_contract_price_highest)),X=we.value.newTokenObj,q=await et.getEstPositionAPRWithMulti(F,D,Q,te),me=Number(q.toString()),ne=Mn.value.newTopPoolsObj[p.poolAddress],pe=ne.apr_7day?Number(ne.apr_7day.substring(0,ne.apr_7day.length-1)):0,ce=ne.rewarder_apr[0]?Number(ne.rewarder_apr[0].substring(0,ne.rewarder_apr[0].length-1)):0,ve=ne.rewarder_apr[1]?Number(ne.rewarder_apr[1].substring(0,ne.rewarder_apr[1].length-1)):0,ke=ne.rewarder_apr[2]?Number(ne.rewarder_apr[2].substring(0,ne.rewarder_apr[2].length-1)):0,re=Number(me*pe),$e=Number(me*ce),Ae=Number(me*ve),le=Number(me*ke),ge=re+(p.rewarder_display1?$e:0)+(p.rewarder_display2?Ae:0)+(p.rewarder_display3?le:0),lt=p.rewarder_infos[0]?X[p.rewarder_infos[0].coinAddress].symbol:"--",tt=p.rewarder_infos[1]?X[p.rewarder_infos[1].coinAddress].symbol:"--",gt=p.rewarder_infos[2]?X[p.rewarder_infos[2].coinAddress].symbol:"--",dt={aprFee:re==1/0||isNaN(re)?0:re,rewardAprList:[{rewarder_name:lt,rewarder_apr:$e==1/0||isNaN($e)?0:$e,styleName:"one",rewarder_display:p.rewarder_display1},{rewarder_name:tt,rewarder_apr:Ae==1/0||isNaN(Ae)?0:Ae,styleName:"two",rewarder_display:p.rewarder_display2},{rewarder_name:gt,rewarder_apr:le==1/0||isNaN(le)?0:le,styleName:"three",rewarder_display:p.rewarder_display2}],aprPercentageTotal:ge==1/0||isNaN(ge)||ge===0?0:ge,aprPercentage:ut(re/ge,2),is_display_rewarder:p.is_display_rewarder};xr.value=dt},So=oe(()=>we.value.newTokenObj&&H.value.address&&we.value.newTokenObj[H.value.address]&&we.value.newTokenObj[H.value.address].logoURI),No=oe(()=>we.value.newTokenObj&&z.value.address&&we.value.newTokenObj[z.value.address]&&we.value.newTokenObj[z.value.address].logoURI),Io=p=>{V.value=p.label,Wt.value=p.fee/100};let ft={};se(()=>we.value.RATES,p=>{p&&(ft=p)},{immediate:!0});const Po=oe(()=>new U(ut(Number(b.value)*Number(ft&&ft[H.value.address]&&ft[H.value.address].price),2)).plus(ut(Number($.value)*Number(ft&&ft[z.value.address]&&ft[z.value.address].price),2)));return{fixD:ut,totalAmount:Po,halfBtnSelect:mo,selectFee:Io,isViewDetail:l,addCommom:nn,fromCoinUrl:So,toCoinUrl:No,t:e,wallet:r,toAdd:bo,chartLoading:O,currentTick:ie,tickList:L,poolInfo:h,storeIndex:Y,importIcon:wn,refresh:g,addLiquidityBtnText:ct,slippage:be,isShowSwapSetting:f,autoRefreshTime:o,countdown:a,setMarketTimer:gr,marketTimer:s,loading:u,fromCoin:H,toCoin:z,openCoinSelect:co,onCoinSelect:fo,existingCoins:k,lastSelectCoin:B,currentCoinKey:d,showCoinSelect:M,fromCoinAmount:b,toCoinAmount:$,maxBtnSelect:ho,fixedFromCoin:y,isShowLiquidityModal:yr,direct:v,toggle:uo,edit:S,inputValue:V,feeTierList:Ze,minPrice:E,maxPrice:C,invalidPriceRange:Pe,defaultMinPrice:j,defaultMaxPrice:w,priceRangeChangeMin:so,priceRangeChangeMax:lo,toFullRange:Fe,unilateral:c,clearAll:po,clickClear:I,positionError:W,positionTips:ee,router:ao,clickRefresh:Ce,fromCoinBlance:at,toCoinBlance:st,showToCoinLock:Me,showFromCoinLock:Te,currentPriceReverse:Vt,currentPrice:$t,getPirceText:_o,currentPriceTab:x,currentPriceTabList:qe,getPirceKey:ko,priceTab:Tn,apr:Ar,liquidityTvl:Sr,vol24:Nr,fromCoinRatio:Kt,toCoinRatio:Yt,aprRewardsParameter:fe,aprRewardsDateList:de,aprTab:Qe,reviseValue:Je,label:ze,aprTitle:ae,rewarderInfo:Pr,rewarderArr:Tr,rewardApr:Mr,aprPercentageObj:xr,rewardAprList:$r,before7dContractPriceLowest:_e,before7dContractPriceHighest:he}}}),Pf="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAJFBMVEVHcEwlW04mW04oXlEmW04SHx4jR0B2/9wQFBMVJyVk17szaV2jJaSaAAAABHRSTlMA8K8m/cUwkQAAAL5JREFUSMdjYMAKmBWFDBgIAUMXF2GCilQy2pyQ+Swu2EBHhyNIkgnIdMCjyCUUCMJgilxDMUFKRpsblBmCU9EUFxdPgooiU9ymElSEBEYVDR1FkaumElYUVp46qmjAFTGruE0lqMgQkaGnpYFAdvk2MJ2JpEgFUTQsL0cGVUiKRKCFDLGKiLKOKIdTGASjSYWWiogqMEYL1lFFWJoRTgYEFU0Bt6QIKEoBt6SwN43QWlJEKSKx4UZ+ExDUmAQAo9rc9CAs4WAAAAAASUVORK5CYII=",Tf="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAeUExURUdwTANNcARNcAdKcgEdMQRNcBM8V3bI/2Gq2ihWdudYHvAAAAAEdFJOUwDwryb9xTCRAAAAuklEQVRIx2NgwAqYFYUMGAgBw9BQYYKKVFPcgpD5rKHYgItLIEiSCcgMwKMIiFxcXGGKQlwwQWqKWxiU6YpTEdCEEIKKXFLDXAgrQjJ0VNHQUdRBhCK38pRRRQOuiFk1jLAiQ0SGdksDgczyaWA6BUmRKqJoaC9HBhVIikShhQyxioiyjiiHUxgEo0mFloqIKjBGC9ZRRViaEUEGBBW5gltSBBSFgltS2JtGaC0pohSR2HAjvwkIakwCANqYbmgtLE7YAAAAAElFTkSuQmCC",Mf=""+new URL("img-no-data_2x.e925467a.png",import.meta.url).href,$f=""+new URL("img-no-data_2x.8bc9afa2.png",import.meta.url).href;const ot=e=>(bn("data-v-1bc7c32e"),e=e(),_n(),e),xf={class:"pools-container"},Ef={class:"title"},Rf={class:"left"},Lf={class:"right title-right"},Ff=ot(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Bf={class:"content"},Of={class:"content-left"},qf={class:"content-left-bg"},Uf={class:"content-left-title"},Df={class:"coin-select"},Hf={class:"pool-fee-header"},zf={key:0,class:"fee-container"},Xf=["onClick"],Vf={key:0,src:Jo,alt:""},Kf={key:1,src:Zo,alt:""},Yf={class:"deposit-title"},Wf={class:"card-container"},Gf={class:"card-item"},jf={key:0,class:"unilateral"},Qf={key:0,src:ki,alt:""},Jf={key:1,src:Ci,alt:""},Zf={key:2},ed={class:"card-item"},td={key:0,class:"unilateral"},nd={key:0,src:ki,alt:""},rd={key:1,src:Ci,alt:""},id={key:2},od={key:0,class:"deposit-ratio"},ad={class:"lebal"},sd=ot(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-information"})],-1)),ld={class:"text"},ud={key:1,class:"deposit-ratio totalAmount"},cd={class:"lebal"},fd={class:"text"},dd=ot(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-add"})],-1)),hd={class:"pc-network"},md={class:"content-right"},pd={class:"content-right-title"},vd=ot(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-information"})],-1)),gd={key:0,class:"price-tab"},yd=["onClick"],wd={key:1,class:"current-price"},bd={key:0,class:"coin"},_d={key:1,class:"coin"},kd={key:2,class:"toggle"},Cd=["src"],Ad=["src"],Sd={key:3,class:"position-tips"},Nd=["src"],Id={class:"tips"},Pd={key:4,class:"position-tips"},Td=["src"],Md={class:"error"},$d={class:"d3-chart-box"},xd={key:0},Ed={key:0,class:"noDataImg",src:Mf},Rd={key:1,class:"noDataImg",src:$f},Ld={key:5,class:"day-7-price-range"},Fd=ot(()=>m("i",null,null,-1)),Bd=ot(()=>m("span",{class:"gray"}," 7D Price Range",-1)),Od={key:0,class:"pool-info"},qd=ot(()=>m("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ud=[qd],Dd={key:0,class:"info-block-container"},Hd={class:"info-block"},zd={class:"leabl"},Xd={class:"text"},Vd={class:"apr-hover-content"},Kd={class:"info-block"},Yd={class:"leabl"},Wd={class:"text"},Gd={class:"info-block"},jd={class:"leabl"},Qd={class:"text"},Jd={class:"info-block"},Zd={class:"leabl"},eh={class:"text"},th={key:1,class:"pool-rewards-info"},nh={class:"rewards-list-all"},rh=ot(()=>m("div",{class:"icon-sign"},null,-1)),ih=["src"],oh={class:"rewards-value"},ah=ot(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-add"})],-1)),sh={class:"h5-network"};function lh(e,t){var g,y,I,b,$,E,C,j;const n=To,r=Mo,i=ua,o=zo,a=Do,s=ar,l=Ko,u=Ta,f=jc,c=Ho,d=Yo,k=Wo,B=Xo,M=Vo,v=Go,T=Nf;return P(),R("div",xf,[ue(n),m("div",Ef,[m("div",Rf,[m("span",null,A(e.$t("common.concentratedLiquidity")),1)]),m("div",Lf,[m("span",{class:"clear",onClick:t[0]||(t[0]=(...w)=>e.clearAll&&e.clearAll(...w))},A(e.$t("common.clearAll")),1),m("div",{class:"slippage-icon",onClick:t[1]||(t[1]=w=>e.isShowSwapSetting=!0)},[Ff,m("span",null,A(e.slippage)+"%",1)]),ue(r,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:t[2]||(t[2]=w=>e.clickRefresh())},null,8,["loading","auto-refresh-time","countdown"])])]),m("div",Bf,[m("div",Of,[m("div",qf,[m("div",Uf,A(e.$t("common.selectPool")),1),m("div",Df,[ue(i,{"coin-icon":e.fromCoin?e.fromCoin.logoURI:"","coin-name":e.fromCoin&&e.fromCoin.symbol,coin:e.fromCoin,onClick:t[3]||(t[3]=w=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),ue(i,{"coin-icon":e.toCoin?e.toCoin.logoURI:"","coin-name":e.toCoin&&e.toCoin.symbol,coin:e.toCoin,onClick:t[4]||(t[4]=w=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),m("div",{class:xe(["pool-fee",e.edit?"pool-fee-edit":""])},[m("div",Hf,[m("span",{class:xe(e.clickClear||!e.poolInfo?"fee-span":"")},A(e.clickClear||!e.poolInfo?"Fee tier":e.inputValue),3),Z("",!0)]),e.edit?(P(),R("div",zf,[(P(!0),R(Qt,null,Ln(e.feeTierList,(w,S)=>(P(),R("div",{key:S,class:xe(e.inputValue.includes(w.label)?"fee-item fee-item-active":"fee-item"),onClick:ee=>e.selectFee(w)},[m("p",null,A(w.title),1),m("span",null,A(w.text),1),e.storeIndex.theme=="default"?(P(),R("img",Vf)):(P(),R("img",Kf))],10,Xf))),128))])):Z("",!0)],2),m("div",Yf,A(e.$t("newAdd.depositAmounts")),1),m("div",Wf,[m("div",Gf,[ue(o,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[6]||(t[6]=w=>e.fromCoinAmount=w),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[7]||(t[7]=w=>e.maxBtnSelect("fromCoin")),onOnHalf:t[8]||(t[8]=w=>e.halfBtnSelect("fromCoin")),onOnInput:t[9]||(t[9]=w=>{e.fromCoinAmount=w,e.fixedFromCoin=!0}),onOnSelect:t[10]||(t[10]=w=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock||!e.poolInfo?(P(),R("div",jf,[m("div",null,[e.storeIndex.theme=="default"?(P(),R("img",Qf)):(P(),R("img",Jf)),e.fromCoin&&e.toCoin&&e.poolInfo&&!e.positionError?(P(),R("p",Zf,A(e.$t("tips.marketprice")),1)):Z("",!0)])])):Z("",!0)]),m("div",ed,[ue(o,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[11]||(t[11]=w=>e.toCoinAmount=w),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[12]||(t[12]=w=>e.maxBtnSelect("toCoin")),onOnHalf:t[13]||(t[13]=w=>e.halfBtnSelect("toCoin")),onOnInput:t[14]||(t[14]=w=>{e.toCoinAmount=w,e.fixedFromCoin=!1}),onOnSelect:t[15]||(t[15]=w=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock||!e.poolInfo?(P(),R("div",td,[m("div",null,[e.storeIndex.theme=="default"?(P(),R("img",nd)):(P(),R("img",rd)),e.fromCoin&&e.toCoin&&e.poolInfo&&!e.positionError?(P(),R("p",id,A(e.$t("tips.marketprice")),1)):Z("",!0)])])):Z("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(P(),R("img",{key:0,class:"add",src:Pf,alt:"",onClick:t[16]||(t[16]=(...w)=>e.toggle&&e.toggle(...w))})):Z("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(P(),R("img",{key:1,class:"add",src:Tf,alt:"",onClick:t[17]||(t[17]=(...w)=>e.toggle&&e.toggle(...w))})):Z("",!0)]),e.poolInfo?(P(),R("div",od,[m("div",ad,[Re(A(e.$t("newAdd.depositRatio"))+" ",1),ue(a,{placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[m("span",null,A(e.$t("newAdd.depositRatioTips")),1)]),default:Ie(()=>[sd]),_:1})]),m("div",ld,A(e.fromCoinRatio!=="--"?e.fromCoinRatio+"%":"--")+" "+A(e.fromCoinRatio!=="--"?e.fromCoin&&e.fromCoin.symbol:"")+" / "+A(e.toCoinRatio!=="--"?e.toCoinRatio+"%":"--")+" "+A(e.toCoinRatio!=="--"?e.toCoin&&e.toCoin.symbol:""),1)])):Z("",!0),e.fromCoinAmount&&e.toCoinAmount?(P(),R("div",ud,[m("div",cd,A(e.$t("newAdd.totalAmount")),1),m("div",fd," $"+A(e.fixD(e.totalAmount,2)),1)])):Z("",!0)]),ue(s,{disabled:e.wallet.connected?!e.fromCoinAmount&&!e.toCoinAmount||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||Number(e.toCoinAmount)>Number(e.toCoinBlance)||e.addLiquidityBtnText!==e.$t("button.addLiquidity")||e.poolInfo.is_pause:!1,class:"big-btn",onClick:t[18]||(t[18]=w=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:Ie(()=>[dd,m("span",null,A(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),m("div",hd,[ue(l)])]),m("div",md,[m("div",pd,[Re(A(e.$t("newAdd.selectRange"))+" ",1),ue(a,{placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[m("span",null,A(e.$t("newAdd.selectRangeTips")),1)]),default:Ie(()=>[vd]),_:1})]),m("div",{class:xe(e.clickClear||!e.fromCoin||!e.toCoin||!e.poolInfo?"content-right-bg content-right-bg-height":"content-right-bg")},[e.poolInfo?(P(),R("div",gd,[(P(!0),R(Qt,null,Ln(e.currentPriceTabList,w=>(P(),R("div",{key:w,class:xe(["price-item",{"price-item-active":w.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:S=>e.priceTab(w)},[ue(a,{placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[m("span",null,A(e.getPirceText(w.key)),1)]),default:Ie(()=>[Re(" "+A(e.getPirceKey(w.key)),1)]),_:2},1024)],10,yd))),128))])):Z("",!0),e.poolInfo?(P(),R("div",wd,[e.fromCoin&&e.toCoin&&e.direct?(P(),R("div",bd,[m("span",null,A(e.$t("common.currentPrice")),1),Re(" "+A(e.addCommom(e.currentPrice,6))+" "+A((g=e.toCoin)==null?void 0:g.symbol)+" per "+A((y=e.fromCoin)==null?void 0:y.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(P(),R("div",_d,[m("span",null,A(e.$t("common.currentPrice")),1),Re(" "+A(e.addCommom(e.currentPriceReverse,6))+" "+A((I=e.toCoin)==null?void 0:I.symbol)+" per "+A((b=e.fromCoin)==null?void 0:b.symbol),1)])):Z("",!0),e.fromCoin&&e.toCoin?(P(),R("div",kd,[m("div",{class:xe(e.direct?"item active-item":"item"),onClick:t[19]||(t[19]=w=>e.direct?"":e.toggle())},[m("img",{src:e.direct?e.fromCoin.logoURI:e.toCoin.logoURI,alt:""},null,8,Cd),Re(" "+A(e.direct?($=e.fromCoin)==null?void 0:$.symbol:(E=e.toCoin)==null?void 0:E.symbol),1)],2),m("div",{class:xe(e.direct?"item ":"item active-item"),onClick:t[20]||(t[20]=w=>e.direct?e.toggle():"")},[m("img",{src:e.direct?e.toCoin.logoURI:e.fromCoin.logoURI,alt:""},null,8,Ad),Re(" "+A(e.direct?(C=e.toCoin)==null?void 0:C.symbol:(j=e.fromCoin)==null?void 0:j.symbol),1)],2)])):Z("",!0)])):Z("",!0),e.poolInfo?(P(),Ke(u,{key:2,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):Z("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(P(),R("div",Sd,[m("img",{src:e.importIcon("/image/icon-tips@2x.png"),alt:""},null,8,Nd),m("p",Id,A(e.$t("tips.positionTips")),1)])):Z("",!0),e.positionError&&!e.clickClear&&e.poolInfo?(P(),R("div",Pd,[m("img",{src:e.importIcon("/image/icon-tips-error@2x.png"),alt:""},null,8,Td),m("p",Md,A(e.$t("tips.positionError")),1)])):Z("",!0),m("div",$d,[(e.clickClear||!e.poolInfo)&&!e.chartLoading?(P(),R("div",xd,[e.storeIndex.theme=="default"?(P(),R("img",Ed)):(P(),R("img",Rd)),m("p",null,A(e.$t("newAdd.positionAppear")),1)])):Z("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(P(),Ke(f,{key:1,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):Z("",!0),e.chartLoading?(P(),Ke(c,{key:2})):Z("",!0)]),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(P(),R("div",Ld,[Fd,Bd,m("span",null,A(e.before7dContractPriceLowest)+" - "+A(e.before7dContractPriceHighest),1)])):Z("",!0),e.poolInfo&&Number(e.minPrice)<Number(e.maxPrice)||e.maxPrice=="\u221E"?(P(),Ke(d,{key:6,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"apr-percentage-obj":e.aprPercentageObj,"name-tab":"deposit",onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","apr-percentage-obj","onAprTab"])):Z("",!0)],2),e.poolInfo?(P(),R("div",Od,[e.apr?(P(),R(Qt,{key:0},[m("div",{class:xe(e.label?"pool-info-border pool-info-title":"pool-info-title")},[Re(A(e.$t("newAdd.poolInfo"))+" ",1),(P(),R("svg",{class:xe(e.label?"show-icon icon":"icon"),"aria-hidden":"true",onClick:t[21]||(t[21]=w=>e.reviseValue())},Ud,2))],2),e.label?(P(),R("div",Dd,[m("div",Hd,[m("div",zd,A(e.$t("common.apr")),1),m("div",Xd,[Re(A(e.poolInfo.is_display_rewarder?e.addCommom(e.rewardApr.substring(0,e.rewardApr.length-1),2):e.addCommom(e.apr.substring(0,e.apr.length-1),2))+"% ",1),m("div",Vd,[ue(k,{"l-item":{apr:e.apr,aprTotal:e.rewardApr,rewarder_apr:e.rewardAprList,is_display_rewarder:e.poolInfo.is_display_rewarder},"rewarder-info":e.rewarderArr},null,8,["l-item","rewarder-info"])])])]),m("div",Kd,[m("div",Yd,A(e.$t("common.liquidity")),1),m("div",Wd,"$"+A(e.liquidityTvl),1)]),m("div",Gd,[m("div",jd,A(e.$t("common.volume24h")),1),m("div",Qd,"$"+A(e.vol24),1)]),m("div",Jd,[m("div",Zd,A(e.$t("newAdd.tickSpacing")),1),m("div",eh,A(e.poolInfo&&e.poolInfo.tick_spacing),1)])])):Z("",!0),e.poolInfo.is_display_rewarder&&e.label&&e.rewarderInfo&&e.rewarderInfo.length>0?(P(),R("div",th,[Re(A("Farming Bonus")+" "),m("div",nh,[(P(!0),R(Qt,null,Ln(e.rewarderInfo,w=>(P(),R("div",{key:w,class:xe(["rewards-list",w.day==0?"rewards-none":""])},[rh,m("img",{src:w.logoUrl,alt:""},null,8,ih),m("div",oh,[m("p",null,A(w.day)+" "+A(w.symbol)+" / "+A(e.$t("newAdd.day"))+" ",1)])],2))),128))])])):Z("",!0)],64)):(P(),Ke(c,{key:1}))])):Z("",!0)])]),ue(s,{disabled:e.wallet.connected?!e.fromCoinAmount&&!e.toCoinAmount||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||Number(e.toCoinAmount)>Number(e.toCoinBlance)||e.poolInfo.is_pause:!1,class:"big-btn h5-btn",onClick:t[22]||(t[22]=w=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:Ie(()=>[ah,m("span",null,A(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),m("div",sh,[ue(l)]),e.showCoinSelect?(P(),Ke(B,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:t[23]||(t[23]=w=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):Z("",!0),e.isShowSwapSetting?(P(),Ke(M,{key:1,onOnClose:t[24]||(t[24]=w=>e.isShowSwapSetting=!1)})):Z("",!0),e.isShowLiquidityModal?(P(),Ke(v,{key:2,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"pool-info":e.poolInfo,onToAdd:e.toAdd,onOnClose:t[25]||(t[25]=w=>e.isShowLiquidityModal=!1)},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","min-price","max-price","current-price","current-price-reverse","pool-info","onToAdd"])):Z("",!0),e.isViewDetail?(P(),Ke(T,{key:3,onOnClose:t[26]||(t[26]=w=>e.isViewDetail=!1)})):Z("",!0)])}const Nh=Pt(If,[["render",lh],["__scopeId","data-v-1bc7c32e"]]);export{Nh as default};
