import{_ as rn}from"./back.d2b09c6a.js";import{_ as dn}from"./refresh-icon.38e7ff4e.js";import{a as je,a1 as Ho,y as So,r as g,af as vn,e as Ve,Q as to,o as a,c as G,w as se,h as o,i as M,j as Le,v as d,f as y,F as Ye,E as po,A as Se,x as E,ag as mn,I as pn,B as Ao,p as Xe,k as ze,H as co,K as Po,l as k,q as $e,b as To,m as xe,s as No,t as Ee,u as C,P as Eo,G as Wo,O as wo,D as vo,C as cn,L as fn,z as jo,M as Xo,S as yn}from"./entry.e9f8e70a.js";/* empty css              */import{a as bn,b as kn,_ as hn}from"./icon-error_2x.446ef670.js";import{u as Qe,a as zo}from"./autoPool.09b54540.js";import{u as eo,c as Ke,a as q,g as Io,d as De,s as N,T as We,b as pe,p as Vo,e as Go,f as gn,V as Co}from"./pool.2069f4f3.js";import{_ as fo}from"./token-warning.ef8ffdad.js";import{_ as Yo}from"./auto-pool-apy-tips.913e5620.js";/* empty css              */import{u as yo,a as bo}from"./sha256.29b0ebac.js";import{i as ro}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as Ko}from"./assets-card.d0d3456a.js";import{_ as Qo}from"./coin-lock.53a615b1.js";import{_ as Zo,a as Jo}from"./auto-pool-remove-modal.b0e4ba52.js";/* empty css              */import{D as l}from"./decimal.0bdeb344.js";/* empty css              */import{u as _n}from"./swapRouter.8a645516.js";/* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.023061b5.js";const $n=je({components:{Modal:Ho},setup(e,i){const{t:j,locale:W}=So(),R=Qe(),B=["0.1","0.5","1"],m=g(R.slippage||.1),{setSlippage:T}=R,S=vn(),u=g(!1);function t(n,r){u.value=!1,m.value=r}function I(){T(m.value),i.emit("onClose",!1)}return{settingArr:B,changeActiveIndex:t,confirm:I,emit:S,slippage:m,t:j,isInput:u,inputChange:n=>{const r=new RegExp(/[^\d^\.]+/g);n.target.value=n.target.value.replace(r,""),m.value=n.target.value}}}});const xo=e=>(Xe("data-v-c5b99de4"),e=e(),ze(),e),wn=xo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),In={class:"setting-container"},Cn={class:"title"},Sn=xo(()=>o("img",{src:hn,alt:""},null,-1)),An={class:"tag-list"},Pn={key:0,src:bn,alt:""},Tn={key:1,src:kn,alt:""},Nn={class:"footer"};function qn(e,i,j,W,R,B){const m=mn,T=pn,S=Ao,u=to("Modal");return a(),G(u,{title:"Settings",class:"setting",centered:"",visible:!0,width:"400px",onCancel:i[3]||(i[3]=t=>e.$emit("onClose"))},{closeIcon:se(()=>[wn]),footer:se(()=>[o("div",Nn,[M(S,{type:"cancel",class:"cancel-btn cancel-btn-new",onClick:i[2]||(i[2]=t=>e.$emit("onClose"))},{default:se(()=>[Le(d(e.$t("button.cancel")),1)]),_:1}),M(S,{class:"confirmbtn",disabled:Number(e.slippage)==0||Number(e.slippage)>1||Number(e.slippage)<.01,onClick:e.confirm},{default:se(()=>[Le(d(e.$t("button.confirm")),1)]),_:1},8,["disabled","onClick"])])]),default:se(()=>[o("div",In,[o("div",Cn,[Sn,o("span",null,d(e.$t("modal.slippageTolerance")),1)]),o("div",An,[(a(!0),y(Ye,null,po(e.settingArr,(t,I)=>(a(),G(m,{key:I,class:Se(!e.isInput&&t==e.slippage?"tag-active":""),onClick:b=>e.changeActiveIndex(I,t)},{default:se(()=>[Le(d(t)+"% ",1)]),_:2},1032,["class","onClick"]))),128)),M(m,{class:Se(["input-tag",e.isInput?"tag-active":""]),onClick:i[1]||(i[1]=t=>e.isInput=!0)},{default:se(()=>[M(T,{value:e.slippage,"onUpdate:value":i[0]||(i[0]=t=>e.slippage=t),placeholder:"",suffix:"%",class:Se(["slippage-input",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-input-waring":Number(e.slippage)>1?"slippage-input-error":""]),onChange:e.inputChange},null,8,["value","class","onChange"])]),_:1},8,["class"])])]),Number(e.slippage)>.5&&Number(e.slippage)<1||Number(e.slippage)>1?(a(),y("div",{key:0,class:Se(["slippage-hint",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-hint-waring":Number(e.slippage)>1?"slippage-hint-error":""])},[Number(e.slippage)>.5&&1>=Number(e.slippage)?(a(),y("img",Pn)):E("",!0),Number(e.slippage)>1?(a(),y("img",Tn)):E("",!0),o("p",null,d(Number(e.slippage)>.5&&1>=Number(e.slippage)?e.$t("tips.slippageTolerance2"):Number(e.slippage)>1?e.$t("tips.slippageTolerance1"):""),1)],2)):E("",!0)]),_:1})}const Rn=Ve($n,[["render",qn],["__scopeId","data-v-c5b99de4"]]),Bn=je({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,i){const j=g(!1),W=g(null),R=g(0);let B=g(!1);const m=g(20);eo();const T=Qe(),S=g(!1);co(()=>{}),Po(()=>{clearInterval(W.value)});const u=()=>{B.value=!1,W.value=setInterval(()=>{var v;S.value||R.value<m.value&&(R.value+=1,R.value===m.value&&((v=e==null?void 0:e.poolInfo)!=null&&v.address&&b(),R.value=0))},1e3)},t=k(()=>T.slippage),I=()=>{i.emit("clearAll")},b=()=>{B.value||(B.value=!0,R.value=0,i.emit("clickRefresh"),setTimeout(()=>{B.value=!1},1e3))};$e(()=>e.poolInfo,v=>{v&&!W.value&&u()},{immediate:!0});const n=To(),r=xe();return{refresh:B,clickRefresh:b,isShowSwapSetting:j,countdown:R,autoRefreshTime:m,slippage:t,clearAll:I,checkNullObj:Ke,router:n,route:r}}});const Dn=e=>(Xe("data-v-71491a33"),e=e(),ze(),e),Ln={class:"title"},Un={class:"left"},Mn=Dn(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),On={key:0,class:"deposit-progress"};function Fn(e,i,j,W,R,B){const m=rn,T=dn,S=Rn;return a(),y("div",Ln,[o("div",Un,[M(m)]),o("div",{class:Se(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[o("div",{class:"slippage-icon",onClick:i[0]||(i[0]=u=>e.isShowSwapSetting=!0)},[Mn,o("span",null,d(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(a(),y("div",On,[M(T,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):E("",!0)],2),e.isShowSwapSetting?(a(),G(S,{key:0,onOnClose:i[1]||(i[1]=u=>e.isShowSwapSetting=!1)})):E("",!0)])}const Vn=Ve(Bn,[["render",Fn],["__scopeId","data-v-71491a33"]]),Hn=je({components:{AutoPoolApyTips:Yo},setup(){const e=yo(),i=k(()=>e),j=eo(),W=k(()=>j),R=Qe(),B=k(()=>R),m=k(()=>i.value.theme),T=xe(),S=g();$e(()=>[B.value.positionInfoObj,T.params.id],([r,v])=>{r&&!Ke(r)&&v&&(S.value=r[v])},{immediate:!0,deep:!0});const u=k(()=>{var r;return(r=S.value)==null?void 0:r.needReverse}),t=r=>{var v;return(r==null?void 0:r.logoURI)||(r==null?void 0:r.logo_url)||((v=W.value.tokensObj[r==null?void 0:r.address])==null?void 0:v.logo_url)||(m.value==="default"?ro("/image/coins/unknown.png"):ro("/image/coins/sui-unknown.png"))},I=k(()=>{var r;return(r=S==null?void 0:S.value)==null?void 0:r.poolUSD}),b=k(()=>{var r,v;return B.value.apyObj&&((v=B.value.apyObj[(r=S.value)==null?void 0:r.id])==null?void 0:v.apr)||"--"}),n=k(()=>i.value.currentExplorer);return{positionInfo:S,needReverse:u,getCoinIcon:t,tvl:I,apy:b,addCommom:q,getExplorerUrl:Io,currentExplorer:n}}});const Fe=e=>(Xe("data-v-d4b397f3"),e=e(),ze(),e),En={class:"auto-pool-v2-info"},Wn={class:"pool-info"},jn={class:"left"},Xn={class:"coin-a"},zn={alt:""},Gn={class:"coin-b"},Yn={alt:""},Kn={class:"position-name"},Qn={key:0,class:"pool-fee"},Zn=Fe(()=>o("span",null,"Fee tier",-1)),Jn={class:"vault-address"},xn=["href"],et=Fe(()=>o("span",null,"Vault Address",-1)),ot=Fe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),nt=[et,ot],tt={class:"apy-and-tvl"},it={class:"apy"},st=Fe(()=>o("div",{class:"apy-title"},"APY",-1)),at={class:"apy-text"},lt={class:"reward-coin"},ut=Fe(()=>o("div",{class:"reward"},"Rewards",-1)),rt={class:"right"},dt={alt:""},vt={class:"tvl"},mt=Fe(()=>o("div",{class:"tvl-title"},"TVL",-1)),pt={class:"tvl-text"},ct={class:"pool-info h5-pool-info"},ft={class:"left"},yt={class:"coin-a"},bt={alt:""},kt={class:"coin-b"},ht={alt:""},gt={class:"position-name"},_t={key:0,class:"pool-fee"},$t=Fe(()=>o("span",null,"Fee tier",-1)),wt={class:"left"},It={class:"vault-address"},Ct=["href"],St=Fe(()=>o("span",null,"Vault Address",-1)),At=Fe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Pt=[St,At],Tt={class:"apy-and-tvl"},Nt={class:"apy"},qt=Fe(()=>o("div",{class:"apy-title"},"APY",-1)),Rt={class:"apy-text"},Bt={class:"reward-coin"},Dt=Fe(()=>o("div",{class:"reward"},"Rewards",-1)),Lt={class:"right"},Ut={alt:""},Mt={class:"tvl"},Ot=Fe(()=>o("div",{class:"tvl-title"},"TVL",-1)),Ft={class:"tvl-text"};function Vt(e,i,j,W,R,B){var t,I,b,n,r,v,h,A,c,$,U,O,ee,le,ne,w,_,Z,te,ie,ue,V,oe,ye,ce,re,P,D,ve,de,fe,f,Y,Ae,be,Ue,Pe,Re,we,Ie,oo,io,so,Ge,Te,ao;const m=fo,T=Yo,S=Eo,u=No("image");return a(),y("div",En,[o("div",Wn,[o("div",jn,[o("div",Xn,[Ee(o("img",zn,null,512),[[u,e.needReverse?e.getCoinIcon((I=e.positionInfo)==null?void 0:I.token_b):e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_a)]]),M(m,{address:e.needReverse?(v=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:v.address:(n=(b=e.positionInfo)==null?void 0:b.token_a)==null?void 0:n.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Gn,[Ee(o("img",Yn,null,512),[[u,e.needReverse?e.getCoinIcon((A=e.positionInfo)==null?void 0:A.token_a):e.getCoinIcon((h=e.positionInfo)==null?void 0:h.token_b)]]),M(m,{address:e.needReverse?(O=(U=e.positionInfo)==null?void 0:U.token_a)==null?void 0:O.address:($=(c=e.positionInfo)==null?void 0:c.token_b)==null?void 0:$.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Kn,d(e.needReverse?(le=(ee=e.positionInfo)==null?void 0:ee.token_b)==null?void 0:le.symbol:(w=(ne=e.positionInfo)==null?void 0:ne.token_a)==null?void 0:w.symbol)+" - "+d(e.needReverse?(Z=(_=e.positionInfo)==null?void 0:_.token_a)==null?void 0:Z.symbol:(ie=(te=e.positionInfo)==null?void 0:te.token_b)==null?void 0:ie.symbol),1),(ue=e.positionInfo)!=null&&ue.fee?(a(),y("div",Qn,[Zn,Le(" "+d(((V=e.positionInfo)==null?void 0:V.fee)*100)+"% ",1)])):E("",!0),o("div",Jn,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:C(Io))(e.currentExplorer,"poolAddress",(oe=e.positionInfo)==null?void 0:oe.id),target:"_blank"},nt,8,xn)])]),o("div",tt,[o("div",it,[st,o("div",at,[Le(d(e.apy)+" ",1),M(T)])]),o("div",lt,[ut,M(S,{"overlay-class-name":"reward-coin-tips"},{title:se(()=>[Le("Rewards will be auto harvested and compounded to your position.")]),default:se(()=>{var He;return[o("div",rt,[(a(!0),y(Ye,null,po((He=e.positionInfo)==null?void 0:He.rewardList,Me=>(a(),y("div",{key:Me,class:"coin-a"},[Ee(o("img",dt,null,512),[[u,e.getCoinIcon({address:Me})]]),M(m,{address:Me,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1})]),o("div",vt,[mt,o("div",pt,"$"+d(("addCommom"in e?e.addCommom:C(q))(e.tvl,2)),1)])])]),o("div",ct,[o("div",ft,[o("div",yt,[Ee(o("img",bt,null,512),[[u,e.needReverse?e.getCoinIcon((ce=e.positionInfo)==null?void 0:ce.token_b):e.getCoinIcon((ye=e.positionInfo)==null?void 0:ye.token_a)]]),M(m,{address:e.needReverse?(ve=(D=e.positionInfo)==null?void 0:D.token_b)==null?void 0:ve.address:(P=(re=e.positionInfo)==null?void 0:re.token_a)==null?void 0:P.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",kt,[Ee(o("img",ht,null,512),[[u,e.needReverse?e.getCoinIcon((fe=e.positionInfo)==null?void 0:fe.token_a):e.getCoinIcon((de=e.positionInfo)==null?void 0:de.token_b)]]),M(m,{address:e.needReverse?(be=(Ae=e.positionInfo)==null?void 0:Ae.token_a)==null?void 0:be.address:(Y=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:Y.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",gt,d(e.needReverse?(Pe=(Ue=e.positionInfo)==null?void 0:Ue.token_b)==null?void 0:Pe.symbol:(we=(Re=e.positionInfo)==null?void 0:Re.token_a)==null?void 0:we.symbol)+" - "+d(e.needReverse?(oo=(Ie=e.positionInfo)==null?void 0:Ie.token_a)==null?void 0:oo.symbol:(so=(io=e.positionInfo)==null?void 0:io.token_b)==null?void 0:so.symbol),1),(Ge=e.positionInfo)!=null&&Ge.fee?(a(),y("div",_t,[$t,Le(" "+d(((Te=e.positionInfo)==null?void 0:Te.fee)*100)+"% ",1)])):E("",!0)]),o("div",wt,[o("div",It,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:C(Io))(e.currentExplorer,"poolAddress",(ao=e.positionInfo)==null?void 0:ao.id),target:"_blank"},Pt,8,Ct)])]),o("div",Tt,[o("div",Nt,[qt,o("div",Rt,[Le(d(e.apy)+" ",1),M(T)])]),o("div",Bt,[Dt,M(S,{"overlay-class-name":"reward-coin-tips"},{title:se(()=>[Le("Rewards will be auto harvested and compounded to your position.")]),default:se(()=>{var He;return[o("div",Lt,[(a(!0),y(Ye,null,po((He=e.positionInfo)==null?void 0:He.rewardList,Me=>(a(),y("div",{key:Me,class:"coin-a"},[Ee(o("img",Ut,null,512),[[u,e.getCoinIcon({address:Me})]]),M(m,{address:Me,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1})]),o("div",Mt,[Ot,o("div",Ft,"$"+d(("addCommom"in e?e.addCommom:C(q))(e.tvl,2)),1)])])])])}const en=Ve(Hn,[["render",Vt],["__scopeId","data-v-d4b397f3"]]),Ht=je({components:{Slider:Wo},setup(){const e=g(!0),i=eo(),j=k(()=>i),W=Qe(),R=k(()=>W),B=xe(),m=g();$e(()=>[R.value.positionInfoObj,B.params.id],([b,n])=>{b&&!Ke(b)&&n&&(m.value=b[n])},{immediate:!0,deep:!0});const T=k(()=>{var b;return(b=m.value)==null?void 0:b.needReverse}),S=b=>{var n;return(b==null?void 0:b.logoURI)||(b==null?void 0:b.logo_url)||((n=j.value.tokensObj[b==null?void 0:b.address])==null?void 0:n.logo_url)||ro("/image/coins/sui-unknown.png")},u=k(()=>{var h,A,c,$,U,O,ee;const b=e.value?((h=m.value)==null?void 0:h.minPrice)&&N(m==null?void 0:m.value.minPrice,6):((A=m.value)==null?void 0:A.maxPrice)&&N(1/(m==null?void 0:m.value.maxPrice),6),n=e.value?((c=m.value)==null?void 0:c.maxPrice)&&N(($=m.value)==null?void 0:$.maxPrice,6):((U=m.value)==null?void 0:U.minPrice)&&N(1/(m==null?void 0:m.value.minPrice),6),r=(T.value?!e.value:e.value)?N((O=m.value)==null?void 0:O.price,6):N(1/((ee=m.value)==null?void 0:ee.price),6);let v={};return v[b]={label:"Min Price"},v[n]={label:"Max Price"},r>b&&r<n?v[r]={label:"Current Price"}:r<b?v[Number(b)+1e-9]={label:"Current Price"}:r>n&&(v[Number(n)-1e-9]={label:"Current Price"}),v}),t=k(()=>{var n,r;return(T.value?!e.value:e.value)?De((n=m.value)==null?void 0:n.price,6):De(1/((r=m.value)==null?void 0:r.price),6)}),I=k(()=>{var n,r;return(T.value?!e.value:e.value)?De((n=m.value)==null?void 0:n.price,6):De(1/((r=m.value)==null?void 0:r.price),6)});return{direct:e,positionInfo:m,needReverse:T,getCoinIcon:S,decimalUi:De,addCommom:q,sFixD:N,marks:u,currentPrice:t,currentPriceResever:I}}});const ko=e=>(Xe("data-v-794c305c"),e=e(),ze(),e),Et={class:"v2-position-range"},Wt={class:"position-range-top"},jt=ko(()=>o("div",null,"Position Range",-1)),Xt={class:"base-coin"},zt={key:0},Gt={alt:""},Yt={key:1},Kt={alt:""},Qt={key:2},Zt={key:3},Jt=ko(()=>o("p",null,"Base coin",-1)),xt={class:"coin-rate"},ei=ko(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),oi=ko(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ni=[ei,oi],ti={class:"position-range-bottom"},ii={class:"price-range"},si={class:"price-range-bg"},ai={key:0,class:"min-price"},li={key:0},ui={key:1},ri={key:1,class:"max-price"},di={key:0},vi={key:1},mi={key:0,class:"min-price"},pi={key:0},ci={key:1},fi={key:1,class:"max-price"},yi={key:0},bi={key:1};function ki(e,i,j,W,R,B){var u,t,I,b,n,r,v,h,A,c,$,U,O,ee,le,ne,w,_,Z,te,ie,ue,V,oe,ye,ce,re,P;const m=fo,T=to("Slider"),S=No("image");return a(),y("div",Et,[o("div",Wt,[jt,o("div",Xt,[e.needReverse?(a(),y("div",Yt,[Ee(o("img",Kt,null,512),[[S,e.direct?e.getCoinIcon((h=e.positionInfo)==null?void 0:h.token_b):e.getCoinIcon((v=e.positionInfo)==null?void 0:v.token_a)]]),M(m,{address:e.direct?(U=($=e.positionInfo)==null?void 0:$.token_b)==null?void 0:U.address:(c=(A=e.positionInfo)==null?void 0:A.token_a)==null?void 0:c.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(a(),y("div",zt,[Ee(o("img",Gt,null,512),[[S,e.direct?e.getCoinIcon((u=e.positionInfo)==null?void 0:u.token_a):e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_b)]]),M(m,{address:e.direct?(b=(I=e.positionInfo)==null?void 0:I.token_a)==null?void 0:b.address:(r=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:r.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(a(),y("span",Zt,d(e.direct?(_=(w=e.positionInfo)==null?void 0:w.token_b)==null?void 0:_.symbol:(te=(Z=e.positionInfo)==null?void 0:Z.token_a)==null?void 0:te.symbol),1)):(a(),y("span",Qt,d(e.direct?(ee=(O=e.positionInfo)==null?void 0:O.token_a)==null?void 0:ee.symbol:(ne=(le=e.positionInfo)==null?void 0:le.token_b)==null?void 0:ne.symbol),1)),Jt,o("div",xt,[o("div",{onClick:i[0]||(i[0]=D=>e.direct=!e.direct)},ni)])])]),o("div",ti,[o("div",ii,[o("div",si,[e.direct?(a(),G(T,{key:0,value:e.currentPrice,class:Se(["position-slider",e.currentPrice<Number(("sFixD"in e?e.sFixD:C(N))((ie=e.positionInfo)==null?void 0:ie.minPrice,6))||e.currentPrice>Number(("sFixD"in e?e.sFixD:C(N))((ue=e.positionInfo)==null?void 0:ue.maxPrice,6))?"hide-handler":""]),step:null,marks:e.marks,disabled:!0,min:Number(("decimalUi"in e?e.decimalUi:C(De))((V=e.positionInfo)==null?void 0:V.minPrice,6)),max:Number(("decimalUi"in e?e.decimalUi:C(De))((oe=e.positionInfo)==null?void 0:oe.maxPrice,6))},{mark:se(({label:D})=>{var ve,de,fe,f,Y,Ae,be,Ue,Pe,Re,we,Ie;return[D=="Min Price"?(a(),y("div",ai,[o("div",null,d(D),1),e.direct?(a(),y("div",li,d(((ve=e.positionInfo)==null?void 0:ve.minPrice)&&("sFixD"in e?e.sFixD:C(N))((de=e.positionInfo)==null?void 0:de.minPrice,6)),1)):(a(),y("div",ui,d(((fe=e.positionInfo)==null?void 0:fe.maxPrice)&&("sFixD"in e?e.sFixD:C(N))(1/((f=e.positionInfo)==null?void 0:f.maxPrice),6)),1))])):E("",!0),D=="Max Price"?(a(),y("div",ri,[o("div",null,d(D),1),e.direct?(a(),y("div",di,d(((Y=e.positionInfo)==null?void 0:Y.maxPrice)&&("sFixD"in e?e.sFixD:C(N))((Ae=e.positionInfo)==null?void 0:Ae.maxPrice,6)),1)):(a(),y("div",vi,d(((be=e.positionInfo)==null?void 0:be.minPrice)&&("sFixD"in e?e.sFixD:C(N))(1/((Ue=e.positionInfo)==null?void 0:Ue.minPrice),6)),1))])):E("",!0),D=="Current Price"?(a(),y("div",{key:2,class:Se(["current-price",e.currentPrice<Number(("sFixD"in e?e.sFixD:C(N))((Pe=e.positionInfo)==null?void 0:Pe.minPrice,6))?"current-price-left":e.currentPrice>Number(("sFixD"in e?e.sFixD:C(N))((Re=e.positionInfo)==null?void 0:Re.maxPrice,6))?"current-price-right":""])},[o("div",null,d(D),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(a(),y(Ye,{key:0},[Le(d(("addCommom"in e?e.addCommom:C(q))(("decimalUi"in e?e.decimalUi:C(De))((we=e.positionInfo)==null?void 0:we.price,6))),1)],64)):(a(),y(Ye,{key:1},[Le(d(("addCommom"in e?e.addCommom:C(q))(("decimalUi"in e?e.decimalUi:C(De))(1/((Ie=e.positionInfo)==null?void 0:Ie.price),6))),1)],64))])],2)):E("",!0)]}),_:1},8,["value","class","marks","min","max"])):(a(),G(T,{key:1,value:e.currentPriceResever,class:Se(["position-slider",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:C(N))(1/((ye=e.positionInfo)==null?void 0:ye.maxPrice),6))||e.currentPriceResever>Number(("sFixD"in e?e.sFixD:C(N))(1/((ce=e.positionInfo)==null?void 0:ce.minPrice),6))?"hide-handler":""]),step:null,min:Number(("decimalUi"in e?e.decimalUi:C(De))(1/((re=e.positionInfo)==null?void 0:re.maxPrice),6)),max:Number(("decimalUi"in e?e.decimalUi:C(De))(1/((P=e.positionInfo)==null?void 0:P.minPrice),6)),marks:e.marks,disabled:!0},{mark:se(({label:D})=>{var ve,de,fe,f,Y,Ae,be,Ue,Pe,Re,we,Ie;return[D=="Min Price"?(a(),y("div",mi,[o("div",null,d(D),1),e.direct?(a(),y("div",pi,d(((ve=e.positionInfo)==null?void 0:ve.minPrice)&&("sFixD"in e?e.sFixD:C(N))((de=e.positionInfo)==null?void 0:de.minPrice,6)),1)):(a(),y("div",ci,d(((fe=e.positionInfo)==null?void 0:fe.maxPrice)&&("sFixD"in e?e.sFixD:C(N))(1/((f=e.positionInfo)==null?void 0:f.maxPrice),6)),1))])):E("",!0),D=="Max Price"?(a(),y("div",fi,[o("div",null,d(D),1),e.direct?(a(),y("div",yi,d(((Y=e.positionInfo)==null?void 0:Y.maxPrice)&&("sFixD"in e?e.sFixD:C(N))((Ae=e.positionInfo)==null?void 0:Ae.maxPrice,6)),1)):(a(),y("div",bi,d(((be=e.positionInfo)==null?void 0:be.minPrice)&&("sFixD"in e?e.sFixD:C(N))(1/((Ue=e.positionInfo)==null?void 0:Ue.minPrice),6)),1))])):E("",!0),D=="Current Price"?(a(),y("div",{key:2,class:Se(["current-price current-price-direct",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:C(N))(1/((Pe=e.positionInfo)==null?void 0:Pe.maxPrice),6))?"current-price-left":e.currentPriceResever>Number(("sFixD"in e?e.sFixD:C(N))(1/((Re=e.positionInfo)==null?void 0:Re.minPrice),6))?"current-price-right":""])},[o("div",null,d(D),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(a(),y(Ye,{key:0},[Le(d(("addCommom"in e?e.addCommom:C(q))(("decimalUi"in e?e.decimalUi:C(De))((we=e.positionInfo)==null?void 0:we.price,6))),1)],64)):(a(),y(Ye,{key:1},[Le(d(("addCommom"in e?e.addCommom:C(q))(("decimalUi"in e?e.decimalUi:C(De))(1/((Ie=e.positionInfo)==null?void 0:Ie.price),6))),1)],64))])],2)):E("",!0)]}),_:1},8,["value","class","min","max","marks"]))])])])])}const on=Ve(Ht,[["render",ki],["__scopeId","data-v-794c305c"]]),hi=je({components:{Modal:Ho},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const i=k(()=>{var W,R;const j=Math.ceil(((W=e.positionInfo)==null?void 0:W.poolUSD)/((R=e.positionInfo)==null?void 0:R.quoteUSD)*100);return Number(j)});return{sFixD:N,addCommom:q,ratio:i}}});const qo=e=>(Xe("data-v-78a51262"),e=e(),ze(),e),gi=qo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),_i={class:"deposit-slider"},$i={class:"info-block"},wi=qo(()=>o("div",{class:"leabl"},"Current Deposit：",-1)),Ii={class:"text"},Ci={class:"info-block"},Si=qo(()=>o("div",{class:"leabl"},"Max Capacity：",-1)),Ai={class:"text"};function Pi(e,i,j,W,R,B){const m=to("Modal");return a(),G(m,{width:"440px",visible:!0,footer:null,title:"Vault Capacity",onCancel:i[0]||(i[0]=T=>e.$emit("onClose"))},{closeIcon:se(()=>[gi]),default:se(()=>{var T,S,u,t;return[o("div",_i,[o("div",{class:"current-deposit",style:wo({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",$i,[wi,o("div",Ii,d(("addCommom"in e?e.addCommom:C(q))(("sFixD"in e?e.sFixD:C(N))((T=e.positionInfo)==null?void 0:T.currentDeposit,2)))+" "+d((S=e.positionInfo)==null?void 0:S.quoteCoinInfo.symbol),1)]),o("div",Ci,[Si,o("div",Ai,d(("addCommom"in e?e.addCommom:C(q))(("sFixD"in e?e.sFixD:C(N))((u=e.positionInfo)==null?void 0:u.quoteUSD,2)))+" "+d((t=e.positionInfo)==null?void 0:t.quoteCoinInfo.symbol),1)])]}),_:1})}const nn=Ve(hi,[["render",Pi],["__scopeId","data-v-78a51262"]]),Ti=je({components:{AutoPoolV2PoolCapacity:nn},setup(){const e=eo(),i=k(()=>e),j=Qe(),W=k(()=>j),R=xe(),B=g();$e(()=>[W.value.positionInfoObj,R.params.id],([u,t])=>{u&&!Ke(u)&&t&&(B.value=u[t])},{immediate:!0,deep:!0});const m=k(()=>{var u;return(u=B.value)==null?void 0:u.needReverse}),T=u=>{var t;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((t=i.value.tokensObj[u==null?void 0:u.address])==null?void 0:t.logo_url)||ro("/image/coins/sui-unknown.png")},S=g(!1);return{needReverse:m,positionInfo:B,getCoinIcon:T,addCommom:q,isShowModal:S}}});const Ni=e=>(Xe("data-v-ad8a33e9"),e=e(),ze(),e),qi={class:"pool-composition"},Ri={class:"pool-composition-top"},Bi=Ni(()=>o("span",null,"Vault Composition",-1)),Di={class:"pool-composition-bottom"},Li={class:"token-ratio"},Ui={class:"before-coin"},Mi={alt:""},Oi={class:"after-coin"},Fi={alt:""},Vi={class:"token-num"},Hi={class:"num-box"},Ei={class:"num-box"};function Wi(e,i,j,W,R,B){var u,t,I,b,n,r,v,h,A,c,$,U,O,ee,le,ne,w,_,Z,te,ie,ue,V,oe,ye,ce,re,P,D;const m=fo,T=nn,S=No("image");return a(),y("div",qi,[o("div",Ri,[Bi,Number((u=e.positionInfo)==null?void 0:u.quoteUSD)>0?(a(),y("div",{key:0,class:"pool-capacity",onClick:i[0]||(i[0]=ve=>e.isShowModal=!0)},"Vault Capacity")):E("",!0)]),o("div",Di,[o("div",Li,[o("div",Ui,[o("div",null,[M(m,{address:e.needReverse?(n=(b=e.positionInfo)==null?void 0:b.token_b)==null?void 0:n.address:(I=(t=e.positionInfo)==null?void 0:t.token_a)==null?void 0:I.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),Ee(o("img",Mi,null,512),[[S,e.needReverse?e.getCoinIcon((v=e.positionInfo)==null?void 0:v.token_b):e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_a)]])]),o("span",null,d((h=e.positionInfo)==null?void 0:h.poolCoinARatio)+"%",1)]),o("div",Oi,[o("span",null,d((A=e.positionInfo)==null?void 0:A.poolCoinBRatio)+"%",1),o("div",null,[Ee(o("img",Fi,null,512),[[S,e.needReverse?e.getCoinIcon(($=e.positionInfo)==null?void 0:$.token_a):e.getCoinIcon((c=e.positionInfo)==null?void 0:c.token_b)]]),M(m,{address:e.needReverse?(le=(ee=e.positionInfo)==null?void 0:ee.token_a)==null?void 0:le.address:(O=(U=e.positionInfo)==null?void 0:U.token_b)==null?void 0:O.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",Vi,[o("div",{class:"token-a-bg",style:wo({width:`${(ne=e.positionInfo)==null?void 0:ne.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:wo({width:`${(w=e.positionInfo)==null?void 0:w.poolCoinBRatio}%`})},null,4),o("div",Hi,[o("div",null,d(("addCommom"in e?e.addCommom:C(q))((_=e.positionInfo)==null?void 0:_.poolCoinANum))+" "+d(e.needReverse?(ue=(ie=e.positionInfo)==null?void 0:ie.token_b)==null?void 0:ue.symbol:(te=(Z=e.positionInfo)==null?void 0:Z.token_a)==null?void 0:te.symbol),1),o("div",null,"$"+d(("addCommom"in e?e.addCommom:C(q))((V=e.positionInfo)==null?void 0:V.poolCoinAUSD)),1)]),o("div",Ei,[o("div",null,d(("addCommom"in e?e.addCommom:C(q))((oe=e.positionInfo)==null?void 0:oe.poolCoinBNum))+" "+d(e.needReverse?(P=(re=e.positionInfo)==null?void 0:re.token_a)==null?void 0:P.symbol:(ce=(ye=e.positionInfo)==null?void 0:ye.token_b)==null?void 0:ce.symbol),1),o("div",null,"$"+d(("addCommom"in e?e.addCommom:C(q))((D=e.positionInfo)==null?void 0:D.poolCoinBUSD)),1)])])]),e.isShowModal?(a(),G(T,{key:0,"position-info":e.positionInfo,onOnClose:i[1]||(i[1]=ve=>e.isShowModal=!1)},null,8,["position-info"])):E("",!0)])}const tn=Ve(Ti,[["render",Wi],["__scopeId","data-v-ad8a33e9"]]),ji=je({setup(){const e=eo(),i=k(()=>e),j=Qe(),W=k(()=>j),R=xe(),B=g();$e(()=>[W.value.positionInfoObj,R.params.id],([t,I])=>{t&&!Ke(t)&&I&&(B.value=t[I])},{immediate:!0,deep:!0});const m=k(()=>{var t;return(t=B.value)==null?void 0:t.needReverse}),T=t=>{var I;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((I=i.value.tokensObj[t==null?void 0:t.address])==null?void 0:I.logo_url)||ro("/image/coins/sui-unknown.png")},S=bo(),u=k(()=>S);return{needReverse:m,positionInfo:B,getCoinIcon:T,addCommom:q,wallet:u}}});const mo=e=>(Xe("data-v-61c3efe6"),e=e(),ze(),e),Xi={class:"my-liquidity"},zi={class:"my-liquidity-top"},Gi=mo(()=>o("div",null,"My Liquidity",-1)),Yi=mo(()=>o("p",null,"My share of pool",-1)),Ki={class:"my-liquidity-bottom"},Qi={class:"lp-token"},Zi=mo(()=>o("div",null,[o("span",null,"LP Token Balance ")],-1)),Ji={class:"lp-balance"},xi={class:"token-num-content"},es={class:"token-num token-a-num"},os={class:"logo"},ns=["src"],ts={class:"text"},is={class:"lp-logo"},ss=["src"],as=mo(()=>o("div",null,"Pooled Assets",-1)),ls={class:"token-num"},us={class:"logo"},rs=["src"],ds={class:"text"},vs=mo(()=>o("div",{class:"token-num-content-bg"},null,-1));function ms(e,i,j,W,R,B){var T,S,u,t,I,b,n,r,v,h,A,c,$,U,O,ee,le,ne,w,_,Z,te,ie,ue,V,oe,ye,ce,re;const m=fo;return a(),y("div",Xi,[o("div",zi,[Gi,o("div",null,[Yi,o("p",null,d(e.wallet.connected?(T=e.positionInfo)==null?void 0:T.myShare:"--")+"%",1)])]),o("div",Ki,[o("div",Qi,[Zi,o("div",null,[o("span",Ji,d(e.wallet.connected?("addCommom"in e?e.addCommom:C(q))((S=e.positionInfo)==null?void 0:S.myLiquidity):"--")+" LP",1),o("span",null,d(e.wallet.connected?((u=e.positionInfo)==null?void 0:u.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in e?e.addCommom:C(q))((t=e.positionInfo)==null?void 0:t.myLiquidityUSD)}`:"<$0.01":"--"),1)])]),o("div",xi,[o("div",es,[o("div",os,[o("img",{src:e.needReverse?e.getCoinIcon((b=e.positionInfo)==null?void 0:b.token_b):e.getCoinIcon((I=e.positionInfo)==null?void 0:I.token_a),alt:""},null,8,ns),M(m,{address:e.needReverse?(h=(v=e.positionInfo)==null?void 0:v.token_b)==null?void 0:h.address:(r=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:r.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",ts,[o("div",null,d(e.wallet.connected?("addCommom"in e?e.addCommom:C(q))((A=e.positionInfo)==null?void 0:A.amountA):"--")+" "+d(e.needReverse?(O=(U=e.positionInfo)==null?void 0:U.token_b)==null?void 0:O.symbol:($=(c=e.positionInfo)==null?void 0:c.token_a)==null?void 0:$.symbol),1),o("div",null,d(e.wallet.connected?("addCommom"in e?e.addCommom:C(q))((ee=e.positionInfo)==null?void 0:ee.myAmountAUSD):"--"),1)])]),o("div",is,[o("img",{src:e.getCoinIcon((le=e.positionInfo)==null?void 0:le.lpInfo),alt:""},null,8,ss),as]),o("div",ls,[o("div",us,[o("img",{src:e.needReverse?e.getCoinIcon((w=e.positionInfo)==null?void 0:w.token_a):e.getCoinIcon((ne=e.positionInfo)==null?void 0:ne.token_b),alt:""},null,8,rs),M(m,{address:e.needReverse?(ie=(te=e.positionInfo)==null?void 0:te.token_a)==null?void 0:ie.address:(Z=(_=e.positionInfo)==null?void 0:_.token_b)==null?void 0:Z.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",ds,[o("div",null,d(e.wallet.connected?("addCommom"in e?e.addCommom:C(q))((ue=e.positionInfo)==null?void 0:ue.amountB):"--")+" "+d(e.needReverse?(ce=(ye=e.positionInfo)==null?void 0:ye.token_a)==null?void 0:ce.symbol:(oe=(V=e.positionInfo)==null?void 0:V.token_b)==null?void 0:oe.symbol),1),o("div",null,d(e.wallet.connected?("addCommom"in e?e.addCommom:C(q))((re=e.positionInfo)==null?void 0:re.myAmountBUSD):"--"),1)])]),vs])])])}const sn=Ve(ji,[["render",ms],["__scopeId","data-v-61c3efe6"]]),ps=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const cs={},an=e=>(Xe("data-v-fcbc716b"),e=e(),ze(),e),fs={class:"status"},ys=an(()=>o("img",{src:ps,alt:""},null,-1)),bs=an(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),ks=[ys,bs];function hs(e,i){return a(),y("div",fs,ks)}const ln=Ve(cs,[["render",hs],["__scopeId","data-v-fcbc716b"]]),gs=je({components:{AutoPoolAddModal:Zo,AutoPoolV2PoolStatus:ln},setup(){const e=bo(),i=g(!1),j=yo(),W=k(()=>j),R=k(()=>W.value.chainName),B=k(()=>e),m=Qe(),T=k(()=>m),S=eo(),u=k(()=>S),t=g(),I=xe(),b=g(!1),n=g(!1);$e(()=>[T.value.positionInfoObj,I.params.id],([p,X])=>{p&&!Ke(p)&&X&&(t.value=p[X])},{immediate:!0,deep:!0});const r=k(()=>{var p;return(p=t.value)==null?void 0:p.needReverse}),v=g(),h=g(),A=g(),c=g(),$=g(!0),U=k(()=>B.value.assets&&v.value&&B.value.assets[v.value.address]?Vo(B.value.assets[v.value.address].balance,v.value.decimals):0),O=k(()=>B.value.assets&&h.value&&B.value.assets[h.value.address]?Vo(B.value.assets[h.value.address].balance,h.value.decimals):0),ee=p=>{p==="fromCoin"?($.value=!0,A.value=U.value>0?v.value.symbol=="SUI"?new l(Number(U.value)).sub(new l(.05)).lt(new l(0))?"0":new l(Number(U.value)).sub(new l(.05)).toString():String(U.value):""):($.value=!1,c.value=O.value>0?h.value.symbol=="SUI"?new l(Number(O.value)).sub(new l(.05)).lt(new l(0))?"0":new l(Number(O.value)).sub(new l(.05)).toString():String(O.value):"")},le=p=>{p==="fromCoin"?($.value=!0,A.value=U.value>0?N(new l(Number(U.value)).div(2).toString(),v.value.decimals).toString():""):($.value=!1,c.value=O.value>0?N(new l(Number(O.value)).div(2).toString(),h.value.decimals).toString():"")},ne=k(()=>R.value?Go(R.value):{}),w=k(()=>T.value.slippage),_=g("--"),Z=g("--"),te=p=>{const X=new l(t.value.autoPoolPositionInfo.liquidity),ke=new l(p.toString());if(X.toNumber()>0&&ke.toNumber()>0){const F=ke.add(X),he=ke.div(F).mul(100).toNumber(),ge=gn(he),s=ge==-1?2:ge+2,L=N(ke.div(F).mul(100).toNumber(),s),ae=new l(1).div(new l(Math.pow(10,t.value.lpInfo.decimals))).toString();Number(L)<Number(ae)?_.value=`<${ae}`:_.value=L}else ke.toNumber()>0&&X.toNumber()<=0?_.value="100":_.value="--"},ie=p=>{if(t.value.total_supply==0){Z.value="";return}new l(p.toString());const X=new l(w.value).div(100),ke=Co.get_lp_amount_by_liquidity({liquidity:t.value.liquidity,total_supply:t.value.total_supply},p.toString()),F=new l(Math.pow(10,t.value.lpInfo.decimals)),he=new l(ke).div(F).toString(),ge=new l(he).mul(X),s=new l(he).sub(ge);Z.value=N(s.toString(),t.value.decimals)},ue=g(!1),V=g(!1),oe=g(""),ye=g(),ce=g(!1),re=g(!1),P=g(!1),D=g(!1),ve=async()=>{if(!t.value)return;if(t.value.supportHaedalStake&&D.value&&c.value<10){re.value=!0;return}n.value=!1,ce.value=!0;const p=t.value.autoPoolPositionInfo.tick_lower_index,X=t.value.autoPoolPositionInfo.tick_upper_index,ke=We.sqrtPriceX64ToTickIndex(new pe(t.value.current_sqrt_price));We.tickIndexToSqrtPriceX64(p),We.tickIndexToSqrtPriceX64(X),ke<p&&(r.value?ue.value=!0:V.value=!0),ke>X&&(r.value?V.value=!0:ue.value=!0);let F;if(A.value||c.value){$.value?F=new l(A.value).mul(Math.pow(10,v.value.decimals)).toString():F=new l(c.value).mul(Math.pow(10,h.value.decimals)).toString();let he,ge=$.value;if(P.value||D.value){const Q=new l(1);if(new l(F).lte(Q))return n.value=!0,!1;let H;try{H=await Ge.calculateDepositSwapAmount({lowerTick:p,upperTick:X,curSqrtPrice:new pe(t.value.current_sqrt_price),fix_amount_a:ge,input_amount:F,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number(w.value)/100,decimals:P.value?v.value.decimals:h.value.decimals,request_id:F,staking_id:t.value.supportHaedalStake&&(D.value&&!t.value.isTokenA||P.value&&t.value.isTokenA)?t.value.staking_id:"",shouldRequestStake:!1})}catch{}if(H=="HaedalStakeSuiAmountError"){b.value=!1,re.value=!0;return}else if(H){if(H.request_id!==F)return;re.value=!1,b.value=t.value.supportHaedalStake?!1:H.is_exceed,he=new pe(H.afterSqrtPrice),F=H.fixAmountA===ge?new pe(new l(F).sub(H.swapInAmount).toString()):new pe(H.swapOutAmount),ye.value={swap_amount:H.swapInAmount,route_obj:H.route_obj,a2b:ge,input_amount:F,staking_id:H.staking_id},ge=H.fixAmountA;const me=t.value.token_a.decimals,J=t.value.token_b.decimals,z=new l(H.swapInAmount).div(new l(Math.pow(10,me))).toString(),x=N(new l(H.swapOutAmountLimit).div(new l(Math.pow(10,J))).toString(),J),Ne=r.value?t.value.token_b.symbol:t.value.token_a.symbol,_e=r.value?t.value.token_a.symbol:t.value.token_b.symbol,qe=`To deposit ${q(P.value?A.value:c.value)} ${P.value?Ne:_e},
            ${q(z)} ${P.value?Ne:_e}  will be traded for ${q(x)} ${P.value?_e:Ne} added to the pool.`,Je=`By depositing ${c.value} ${_e}, ${q(x)} ${_e} will be converted to ${Ne} via Haedal 
            liquid staking and added to the pool together.`;oe.value=t.value.supportHaedalStake&&D.value?Je:qe}else he=t.value.current_sqrt_price,F=new pe(F)}else b.value=!1,he=t.value.current_sqrt_price,F=new pe(F),oe.value="";let s,L,ae;const K=ne.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:v.value,tokenB:h.value,lowerTick:p,upperTick:X,coinAmount:F,iscoinA:ge,roundUp:!0,slippage:Number(w.value)/100,curSqrtPrice:new pe(he)});s=K.liquidityAmount,L=K.tokenMaxA,ae=K.tokenMaxB,!P.value&&!D.value&&($.value?c.value=Number(ae)>0?ae:"":A.value=Number(L)>0?L:""),te(s),ie(s),ce.value=!1}};$e(()=>t.value,p=>{p&&!Ke(p)&&(v.value=p==null?void 0:p.token_a,h.value=p==null?void 0:p.token_b,ue.value=!1,V.value=!1,ve())},{immediate:!0});const de=k(()=>u.value.RATES),fe=k(()=>{var p,X,ke,F,he,ge,s,L;if((X=de.value[(p=v.value)==null?void 0:p.address])!=null&&X.price&&((F=de.value[(ke=h.value)==null?void 0:ke.address])!=null&&F.price)){const ae=new l(A.value||0).mul(new l((ge=de.value[(he=v.value)==null?void 0:he.address])==null?void 0:ge.price)),K=new l(c.value||0).mul(new l((L=de.value[(s=h.value)==null?void 0:s.address])==null?void 0:L.price));return ae.add(K).toNumber()}else return"--"});$e(()=>A.value,vo((p,X)=>{p?ve():(_.value="--",c.value="",Z.value="--")},500),{immediate:!0}),$e(()=>c.value,vo((p,X)=>{p?ve():(A.value="",_.value="--",Z.value="--")},500),{immediate:!0});const{t:f,locale:Y}=So(),Ae=k(()=>{var p,X;if(P.value||D.value){const ke=P.value?A.value:c.value,F=P.value?v.value:h.value;if((p=de.value[F==null?void 0:F.address])!=null&&p.price)return new l(ke||0).mul(new l((X=de.value[F==null?void 0:F.address])==null?void 0:X.price)).toNumber()}return 0}),be=k(()=>{const p=Number(A.value)>Number(U.value),X=Number(c.value)>Number(O.value);return!A.value&&!c.value?f("button.enterAmount"):t.value.supportHaedalStake&&D.value&&c.value<10?"Minimum deposit 10 SUI":p?f("button.insufficientBalance",{name:v.value.symbol}):X?f("button.insufficientBalance",{name:h.value.symbol}):b.value?f("button.insufficientLiquidity"):Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(fe.value)>Number(t.value.remainingTokenUSD)?"Exceeded the max capacity":n.value?f("button.enterAmount"):"Add Liquidity"}),Ue=k(()=>{const p=Number(A.value)>Number(U.value),X=Number(c.value)>Number(O.value);return!!(!A.value&&!c.value||p||X||A.value<=0&&c.value<=0||b.value||He.value!=="STATUS_RUNNING"||Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(fe.value)>Number(t.value.remainingTokenUSD)||n.value||t.value.supportHaedalStake&&!D.value&&Ae.value>1e4||!t.value.supportHaedalStake&&Ae.value>1e4||re.value||t.value.supportHaedalStake&&D.value&&c.value<10)}),Pe=g(!0),{setIsShowSuccess:Re,setIsShowRejected:we,setIsShowWaiting:Ie,setTransactionDesc:oo,setTransactionTxid:io,setPositiomNum:so}=j,Ge=zo("Sui"),Te=async()=>{var ae,K;i.value=!1,Pe.value=!0,io("");const p=`${q(A.value)} ${(ae=v.value)==null?void 0:ae.symbol}`,X=`${q(c.value)} ${(K=h.value)==null?void 0:K.symbol}`;oo(`Deposit ${A.value>0?p:""} ${c.value>0&&A.value>0?"and":""} ${c.value>0?X:""}`),Ie(!0);const ke=$.value,F=t.value.autoPoolPositionInfo.tick_lower_index,he=t.value.autoPoolPositionInfo.tick_upper_index,ge=We.sqrtPriceX64ToTickIndex(new pe(t.value.current_sqrt_price));let s;$.value?s=new l(A.value).mul(Math.pow(10,v.value.decimals)).toString():s=new l(c.value).mul(Math.pow(10,h.value.decimals)).toString();const L=t.value.rewarderInfo.map(Q=>Q.coinAddress);try{const Q={lowerTick:F,upperTick:he,coinAmount:s,fix_amount_a:ke,slippage:Number(w.value)/100,curSqrtPrice:new pe(t.value.current_sqrt_price),id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:L,swapParams:ye.value,isOnlyA:P.value,isOnlyB:D.value,currentTickIndex:ge,decimal_b:t.value.coinB.decimals,request_id:s,staking_id:t.value.supportHaedalStake&&(D.value&&!t.value.isTokenA||P.value&&t.value.isTokenA)?t.value.staking_id:"",shouldRequestStake:t.value.supportHaedalStake&&D.value,farming_pool:t.value.autoPoolPositionInfo.pool_id},H=await Ge.deposit(Q),me=await ne.value.signAndExecuteTransactionBlock(B.value.currentWallet,H);let J=ne.value.handleTx(me);if(J&&J.hash){io(J.hash),Ie(!1),Re(!0);const z={title:"Supplied",desc:`Deposit ${A.value>0?p:""} ${c.value>0&&A.value>0?"and":""} ${c.value>0?X:""}`,hash:J.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${A.value>0?p:""} ${c.value>0&&A.value>0?"and":""} ${c.value>0?X:""}`,isOnlyToken:P.value||D.value,isOnlyTokenInfo:P.value?v.value:h.value};R.value!=="Aptos"&&(z.res=J.res),ne.value.showTransitionPending(z),await ne.value.watchTransaction(z)&&setTimeout(()=>{m.updatePositionItem(t.value.id),ne.value.getAccount(B.value.address)},1e3),so()}else Ie(!1),we(!0);A.value="",c.value="",Pe.value=!1}catch{A.value="",c.value="",Pe.value=!1,Ie(!1),we(!0)}},ao=p=>{A.value="",c.value="",oe.value="",re.value=!1,p=="only-a-b"?(P.value=!1,D.value=!1):p=="only-a"?(P.value=!0,D.value=!1):(D.value=!0,P.value=!1)},He=k(()=>T.value.currentAutoPoolStatus),Me=g(),go=()=>{Me.value=window.setInterval(()=>{(A.value||c.value)&&ve()},2e4)};co(()=>{go()}),Po(()=>{window.clearInterval(Me.value)});const _o=cn(fn,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0});return{currentAutoPoolStatus:He,wallet:B,positionInfo:t,isShowAddModal:i,needReverse:r,fromCoin:v,toCoin:h,fromCoinAmount:A,toCoinAmount:c,fromCoinBlance:U,toCoinBlance:O,fixedFromCoin:$,maxBtnSelect:ee,halfBtnSelect:le,totalAmountUSD:fe,addCommom:q,shareOfPool:_,minimumReceivedLP:Z,addLiquidityBtnText:be,addLiquidityBtnDisabled:Ue,toAdd:Te,showToCoinLock:V,showFromCoinLock:ue,isOnlyA:P,isOnlyB:D,onlyToken:ao,onlyText:oe,onlyTokenUSD:Ae,calculateLoading:ce,indicator:_o,depositTokenTips:"You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",depositHaedalTokenTips:"When you deposit in only SUI tokens, a part of your SUI amount will be converted to haSUI via Haedal liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved."}}});const Ze=e=>(Xe("data-v-e1f77953"),e=e(),ze(),e),_s={class:"auto-pool-add"},$s={class:"auto-pool-add-content"},ws={class:"liquidity-action-tab"},Is=Ze(()=>o("div",{class:"increase tab-active"},"Add",-1)),Cs={class:"only-token"},Ss=Ze(()=>o("div",null,"Deposit Amounts",-1)),As=Ze(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),Ps=Ze(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),Ts={key:0,class:"card-item"},Ns={key:1,class:"card-item"},qs=Ze(()=>o("span",null,"Pool Closed",-1)),Rs={key:0,class:"add-info"},Bs={key:0,class:"only-text"},Ds={class:"total-amount"},Ls=Ze(()=>o("span",null,"Total Amount",-1)),Us={key:0},Ms={class:"total-amount"},Os=Ze(()=>o("span",null,"Share of Pool",-1)),Fs={key:0},Vs={class:"total-amount"},Hs=Ze(()=>o("span",null,"Minimum Received LP",-1)),Es={key:0},Ws={key:1,class:"add-info only-add-info"},js=Ze(()=>o("div",{class:"only-text"},"Single-asset deposit can't be higher than $10,000 at a time.",-1)),Xs=[js];function zs(e,i,j,W,R,B){var n,r,v,h,A,c,$,U,O,ee,le,ne,w,_,Z,te,ie,ue,V,oe,ye,ce,re;const m=Eo,T=Ko,S=Qo,u=to("AutoPoolV2PoolStatus"),t=Ao,I=Xo,b=Zo;return a(),y("div",_s,[o("div",$s,[o("div",ws,[Is,o("div",{class:"remove",onClick:i[0]||(i[0]=jo(P=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",Cs,[Ss,o("div",null,[o("div",{class:Se(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:i[1]||(i[1]=P=>e.onlyToken("only-a-b"))},[o("span",null,d(e.needReverse?(h=(v=e.positionInfo)==null?void 0:v.token_b)==null?void 0:h.symbol:(r=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:r.symbol)+" + "+d(e.needReverse?(U=($=e.positionInfo)==null?void 0:$.token_a)==null?void 0:U.symbol:(c=(A=e.positionInfo)==null?void 0:A.token_b)==null?void 0:c.symbol),1)],2),o("div",{class:Se(["only-a",e.isOnlyA?"active-only":""]),onClick:i[2]||(i[2]=P=>e.onlyToken("only-a"))},[o("span",null,d(e.needReverse?(ne=(le=e.positionInfo)==null?void 0:le.token_b)==null?void 0:ne.symbol:(ee=(O=e.positionInfo)==null?void 0:O.token_a)==null?void 0:ee.symbol)+" only",1),M(m,{placement:"bottom","arrow-point-at-center":""},{title:se(()=>[o("span",null,d(e.depositTokenTips),1)]),default:se(()=>[As]),_:1})],2),o("div",{class:Se(["only-b",e.isOnlyB?"active-only":""]),onClick:i[3]||(i[3]=P=>e.onlyToken("only-b"))},[o("span",null,d(e.needReverse?(te=(Z=e.positionInfo)==null?void 0:Z.token_a)==null?void 0:te.symbol:(_=(w=e.positionInfo)==null?void 0:w.token_b)==null?void 0:_.symbol)+" only",1),M(m,{placement:"bottom","arrow-point-at-center":""},{title:se(()=>[o("span",null,d(e.positionInfo.supportHaedalStake?e.depositHaedalTokenTips:e.depositTokenTips),1)]),default:se(()=>[Ps]),_:1})],2)])]),o("div",{class:Se(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(a(),y("div",Ts,[M(T,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":i[4]||(i[4]=P=>e.fromCoinAmount=P),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:i[5]||(i[5]=P=>e.maxBtnSelect("fromCoin")),onOnHalf:i[6]||(i[6]=P=>e.halfBtnSelect("fromCoin")),onOnInput:i[7]||(i[7]=P=>{e.fromCoinAmount=P}),onOnFocus:i[8]||(i[8]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(a(),G(S,{key:0})):E("",!0)])):E("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(a(),y("div",Ns,[M(T,{modelValue:e.toCoinAmount,"onUpdate:modelValue":i[9]||(i[9]=P=>e.toCoinAmount=P),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:i[10]||(i[10]=P=>e.maxBtnSelect("toCoin")),onOnHalf:i[11]||(i[11]=P=>e.halfBtnSelect("toCoin")),onOnInput:i[12]||(i[12]=P=>{e.toCoinAmount=P}),onOnFocus:i[13]||(i[13]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(a(),G(S,{key:0})):E("",!0)])):E("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(a(),G(u,{key:0})):E("",!0),(ie=e.positionInfo)!=null&&ie.is_pause?(a(),G(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:se(()=>[qs]),_:1})):e.wallet.connected?(a(),G(t,{key:2,class:"big-btn liquidity-btn",disabled:e.addLiquidityBtnDisabled,onClick:i[14]||(i[14]=P=>e.isShowAddModal=!0)},{default:se(()=>[o("span",null,d(e.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(a(),G(t,{key:3,class:"big-btn liquidity-btn",onClick:i[15]||(i[15]=P=>e.wallet.setIsShowWalletModal(!0))},{default:se(()=>[o("span",null,d(e.$t("button.connectWallet")),1)]),_:1})),(((ue=e.positionInfo)==null?void 0:ue.quoteUSD)==0||Number((V=e.positionInfo)==null?void 0:V.remainingTokenUSD)>Number(e.totalAmountUSD))&&(Number(e.fromCoinAmount)>0||Number(e.toCoinAmount)>0)?(a(),y(Ye,{key:4},[e.positionInfo.supportHaedalStake&&e.isOnlyB||e.onlyTokenUSD<=1e4?(a(),y("div",Rs,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount>0||e.isOnlyB&&e.toCoinAmount>0)?(a(),y("div",Bs,d(e.onlyText),1)):E("",!0),o("div",Ds,[Ls,e.calculateLoading?(a(),G(I,{key:1,paragraph:!1,active:""})):(a(),y("span",Us,d(Number(e.totalAmountUSD)>0&&Number(e.totalAmountUSD)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:C(q))(e.totalAmountUSD,2)}`),1))]),o("div",Ms,[Os,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),y("span",Fs,d(e.shareOfPool)+"%",1)):(a(),G(I,{key:1,paragraph:!1,active:""}))]),o("div",Vs,[Hs,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),y("span",Es,d(("addCommom"in e?e.addCommom:C(q))(e.minimumReceivedLP))+" "+d(e.needReverse?(oe=e.toCoin)==null?void 0:oe.symbol:(ye=e.fromCoin)==null?void 0:ye.symbol)+"-"+d(e.needReverse?(ce=e.fromCoin)==null?void 0:ce.symbol:(re=e.toCoin)==null?void 0:re.symbol),1)):(a(),G(I,{key:1,paragraph:!1,active:""}))])])):e.positionInfo.supportHaedalStake&&!e.isOnlyB&&e.onlyTokenUSD>1e4||!e.positionInfo.supportHaedalStake&&e.onlyTokenUSD>1e4?(a(),y("div",Ws,Xs)):E("",!0)],64)):E("",!0),e.isShowAddModal?(a(),G(b,{key:5,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:i[16]||(i[16]=P=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):E("",!0)])}const Gs=Ve(gs,[["render",zs],["__scopeId","data-v-e1f77953"]]),Ys=je({components:{AutoPoolRemoveModal:Jo,AutoPoolV2PoolStatus:ln},setup(){const e=bo(),i=k(()=>e),j=yo(),W=k(()=>j),R=k(()=>b.value.slippage),B=k(()=>W.value.chainName),m=_n(),T=k(()=>m),S=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],u=g(25),t=xe(),I=Qe(),b=k(()=>I),n=k(()=>b.value.positionInfoObj[t.params.id]),r=k(()=>{var s;return(s=n.value)==null?void 0:s.needReverse}),v=g(),h=g(),A=g(!1),c=g(),$=k(()=>{var s;return(s=n.value)==null?void 0:s.myLiquidity}),U=g(!0),O=k(()=>B.value?Go(B.value):{}),ee=g(),le=g(),ne=zo("Sui"),w=g(""),_=g(""),Z=g("--"),te=g(!1),ie=g(!1),ue=g(),V=g(!0),oe=g(),ye=eo(),ce=k(()=>ye),re=k(()=>ce.value.RATES),P=g(!1),D=async()=>{if(U.value||!n.value||n.value.positionLiquidity==0)return;le.value=!1,P.value=!0;const s=n.value.autoPoolPositionInfo.tick_lower_index,L=n.value.autoPoolPositionInfo.tick_upper_index,ae=We.sqrtPriceX64ToTickIndex(new pe(n.value.current_sqrt_price));ae<s&&(r.value?te.value=!0:ie.value=!0),ae>L&&(r.value?ie.value=!0:te.value=!0);let K;if(w.value||_.value){V.value?K=new l(w.value).mul(Math.pow(10,v.value.decimals)).toString():K=new l(_.value).mul(Math.pow(10,h.value.decimals)).toString();let Q,H=V.value;if(f.value||Y.value){f.value?Number(w.value)/Number(p.value):Number(_.value)/Number(p.value);const x=await ne.calculateRemoveSwapAmount({lowerTick:s,upperTick:L,curSqrtPrice:new pe(n.value.current_sqrt_price),fix_amount_a:H,receiveAmount:K,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(R.value)/100,decimals:f.value?v.value.decimals:h.value.decimals,liquidity:w.value==p.value||_.value==p.value?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:K});if(x){if(x.request_id!==K)return;ee.value=x.is_exceed,K=new pe(x.swapOutAmount),Q=n.value.current_sqrt_price,ue.value={swap_amount:x.swapInAmount,liquidity:x.liquidity,a2b:!H,route_obj:x.route_obj},H=!H;const Ne=n.value.token_a.decimals,_e=n.value.token_b.decimals,qe=new l(x.swapInAmount).div(new l(Math.pow(10,Ne))).toString(),Je=N(new l(x.swapOutAmountLimit).div(new l(Math.pow(10,_e))).toString(),_e),Ce=r.value?n.value.token_b.symbol:n.value.token_a.symbol,Be=r.value?n.value.token_a.symbol:n.value.token_b.symbol;oe.value=w.value==p.value||_.value==p.value?`To withdraw ${q(f.value?w.value:_.value)} ${f.value?Ce:Be},
          ${q(f.value?n.value.amountB:n.value.amountA)} ${f.value?Be:Ce} 
           in the pool will be traded for ${qe} ${f.value?Ce:Be}`:`To withdraw ${q(f.value?w.value:_.value)} ${f.value?Ce:Be},
          ${q(qe)} ${f.value?Be:Ce}  in the pool will be traded for ${q(Je)} ${f.value?Ce:Be}`}else{le.value=!0,oe.value="";return}}else ee.value=!1,Q=n.value.current_sqrt_price,K=new pe(K);const{liquidityAmount:me,tokenMaxA:J,tokenMaxB:z}=O.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:v.value,tokenB:h.value,lowerTick:s,upperTick:L,coinAmount:K,iscoinA:H,roundUp:!1,slippage:Number(R.value)/100,curSqrtPrice:new pe(Q)});if(!f.value&&!Y.value&&(V.value?_.value=Number(z)>0?z:"":w.value=Number(J)>0?J:""),(f.value||Y.value)&&(Number(w.value)>=Number(p.value)||Number(_.value)>=Number(p.value))){c.value=n.value.myLiquidity;const x=new l(100);Z.value=new l(n.value.myLiquidity).mul(new l(Math.pow(10,n.value.lpInfo.decimals))).toString(),ve.value=me.toString(),u.value=x.toNumber()}else{const x=Co.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},me.toString()),Ne=new l(x).div(new l(Math.pow(10,n.value.lpInfo.decimals))).toString(),_e=new l(Ne).div(new l($.value)).mul(100);c.value=new l($.value).mul(_e.div(100)).toString(),Z.value=x,ve.value=me.toString(),u.value=_e.toNumber()}P.value=!1}},ve=g(),de=k(()=>{var s;return(s=n==null?void 0:n.value)==null?void 0:s.amountA}),fe=k(()=>{var s;return(s=n==null?void 0:n.value)==null?void 0:s.amountB}),f=g(!1),Y=g(!1),Ae=k(()=>{var H,me,J,z;const s=(me=re.value[(H=v==null?void 0:v.value)==null?void 0:H.address])==null?void 0:me.price,L=(z=re.value[(J=h==null?void 0:h.value)==null?void 0:J.address])==null?void 0:z.price;let ae=w.value!=="--"&&w.value!==""?w.value:0,K=_.value!=="--"&&_.value!==""?_.value:0,Q;return s&&L&&(f.value||Y.value?Q=new l(f.value?ae:K).mul(new l(f.value?s:L)).toString():Q=new l(ae).mul(new l(s)).add(new l(K).mul(new l(L))).toString()),Q>0&&Q<.01?"<$0.01":`$${q(N(Q,2))}`}),be=async s=>{var Ne,_e,qe,Je,Ce,Be,$o,Do,Lo,Uo,Mo;if(!U.value)return;U.value=!0,le.value=!1,(_e=(Ne=n.value)==null?void 0:Ne.token_a)==null||_e.decimals,(Je=(qe=n.value)==null?void 0:qe.token_b)==null||Je.decimals;const L=(Ce=n.value)==null?void 0:Ce.tick_lower_index,ae=(Be=n.value)==null?void 0:Be.tick_upper_index;We.tickIndexToSqrtPriceX64(L),We.tickIndexToSqrtPriceX64(ae);const K=(Do=($o=n.value)==null?void 0:$o.autoPoolPositionInfo)==null?void 0:Do.tick_lower_index,Q=(Uo=(Lo=n.value)==null?void 0:Lo.autoPoolPositionInfo)==null?void 0:Uo.tick_upper_index,H=We.sqrtPriceX64ToTickIndex(new pe((Mo=n==null?void 0:n.value)==null?void 0:Mo.current_sqrt_price));H<K&&(r.value?te.value=!0:ie.value=!0),H>Q&&(r.value?ie.value=!0:te.value=!0);let me="",J,z,x=V.value;if(f.value||Y.value&&!te.value&&!ie.value){if(f.value){const no=new l(p.value).mul(Math.pow(10,v.value.decimals)).mul(s.value).toString();z=N(no,0),w.value=N(new l(p.value).mul(s.value).toString(),v.value.decimals)}if(Y.value){const no=new l(p.value).mul(s.value).mul(Math.pow(10,h.value.decimals)).toString();z=N(no,0),_.value=N(new l(p.value).mul(s.value).toString(),h.value.decimals)}const Oe=await ne.calculateRemoveSwapAmount({lowerTick:L,upperTick:ae,curSqrtPrice:new pe(n.value.current_sqrt_price),fix_amount_a:x,receiveAmount:z,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(R.value)/100,decimals:f.value?v.value.decimals:h.value.decimals,liquidity:s.value==1?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:z});if(Oe){if(Oe.request_id!==z)return;ee.value=Oe.is_exceed,z=new pe(Oe.swapOutAmount),n.value.current_sqrt_price,ue.value={swap_amount:Oe.swapInAmount,liquidity:Oe.liquidity,route_obj:Oe.route_obj,a2b:!x},x=!x;const no=n.value.token_a.decimals,Oo=n.value.token_b.decimals,un=new l(Oe.swapInAmount).div(new l(Math.pow(10,no))).toString(),Fo=N(new l(Oe.swapOutAmountLimit).div(new l(Math.pow(10,Oo))).toString(),Oo),lo=r.value?n.value.token_b.symbol:n.value.token_a.symbol,uo=r.value?n.value.token_a.symbol:n.value.token_b.symbol;oe.value=s.value==1?`To withdraw ${q(f.value?w.value:_.value)} ${f.value?lo:uo},
          ${q(f.value?n.value.amountB:n.value.amountA)} ${f.value?uo:lo}  in the pool will be traded for ${q(Fo)} ${f.value?lo:uo}`:`To withdraw ${q(f.value?w.value:_.value)} ${f.value?lo:uo},
          ${q(un)} ${f.value?uo:lo}  in the pool will be traded for ${q(Fo)} ${f.value?lo:uo}`,me=Oe.liquidity}else n.value.current_sqrt_price,z=new pe(z),oe.value="",le.value=!0;Z.value=new l(n.value.myLiquidity).mul(new l(s.value)).toString(),c.value=new l(Z.value),ve.value=me}else{ee.value=!1;const Oe=new l(de.value).mul(Math.pow(10,v.value.decimals)).mul(s.value).toString();z=N(Oe,0),w.value=N(new l(de.value).mul(s.value).toString(),v.value.decimals);const no=new l(fe.value).mul(s.value).mul(Math.pow(10,h.value.decimals)).toString();z=N(no,0),_.value=N(new l(fe.value).mul(s.value).toString(),h.value.decimals),n.value.current_sqrt_price,z=new pe(z),s.value!==1?J=new l(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(s.value).toString():J=new l(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),c.value=new l(J).div(Math.pow(10,n.value.lpInfo.decimals)),me=Co.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},J),Z.value=N(J,0),ve.value=N(me,0)}};$e(u,vo((s,L)=>{s!==L&&(Number(s)>100?u.value=100:s&&n.value?(u.value=s,be({value:u.value/100})):(w.value="",_.value=""))},300)),$e(()=>w.value,vo((s,L)=>{s?D():!f.value&&!Y.value&&(_.value="",u.value=0)},500),{immediate:!0}),$e(()=>_.value,vo((s,L)=>{s?D():!f.value&&!Y.value&&(w.value="",u.value=0)},500),{immediate:!0});const Ue=To(),{setIsShowSuccess:Pe,setIsShowRejected:Re,setIsShowWaiting:we,setTransactionDesc:Ie,setTransactionTxid:oo,setPositiomNum:io,setTransactionDescText:so}=j,Ge=g(!1),{t:Te}=So(),ao=async()=>{var Ne,_e;Ge.value=!0,oo("");const s=Number(w.value)>0?`${q(w.value,v.value.decimals)} ${v.value.symbol}`:"",L=Number(_.value)>0?`${q(_.value,h.value.decimals)} ${h.value.symbol}`:"";Ie(Te("tips.removeLiquidiyText",{from:r.value?L:s,and:Number(w.value)>0&&Number(_.value)>0?"and":"",to:r.value?s:L})),we(!0);const ae=Te("modal.removeLiquidityText2");so(ae);const K=n.value.autoPoolPositionInfo.tick_lower_index,Q=n.value.autoPoolPositionInfo.tick_upper_index,H=We.tickIndexToSqrtPriceX64(K),me=We.tickIndexToSqrtPriceX64(Q),J=n.value.rewarderInfo.map(qe=>qe.coinAddress);let z;V.value?z=new l(w.value).mul(Math.pow(10,v.value.decimals)).toString():z=new l(_.value).mul(Math.pow(10,h.value.decimals)).toString();const x={lowerSqrtPrice:H,upperSqrtPrice:me,lpTokenAmount:Z.value,liquidity:ve.value,curSqrtPrice:new pe(n.value.object.current_sqrt_price),slippage:Number(R.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:J,swapParams:ue.value,fix_amount_a:V.value,isOnlyA:!te.value&&!ie.value?f.value:!1,isOnlyB:!ie.value&&!te.value?Y.value:!1,lowerTick:K,upperTick:Q,receiveAmount:z,sliderVal:u.value,positionInfo:n.value,maxLiquidity:n.value.positionLiquidity,farming_pool:n.value.autoPoolPositionInfo.pool_id};try{const qe=await ne.remove(x),Je=await O.value.signAndExecuteTransactionBlock(i.value.currentWallet,qe);let Ce=O.value.handleTx(Je);if(Ce&&Ce.hash){oo(Ce.hash),we(!1),Pe(!0);const Be={title:Te("common.removeLiquidity"),desc:"",hash:Ce.hash,descTransactions:`Remove ${s} ${Number(w.value)>0&&Number(_.value)>0?"and":""} ${L} from the pool`,sender:i.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${w.value} ${(Ne=v.value)==null?void 0:Ne.symbol} and ${_.value} ${(_e=h.value)==null?void 0:_e.symbol}`};Be.res=Ce.res,O.value.showTransitionPending(Be),await O.value.watchTransaction(Be)&&(w.value="",_.value="",c.value="",u.value=0,setTimeout(()=>{I.updatePositionItem(n.value.id),O.value.getAccount(i.value.address)},1e3),Number(u.value)==100&&t.name=="auto-pool-detail"&&Ue.push("/vaults"))}else we(!1),Re(!0);Ge.value=!1}catch{Ge.value=!1,we(!1),Re(!0)}};$e(()=>n.value,(s,L)=>{s&&!Ke(s)&&(v.value=s==null?void 0:s.token_a,h.value=s==null?void 0:s.token_b,(!L||L&&L.address!==s.address)&&(u.value=u.value>0?u.value:25,be({value:u.value/100})),L&&L.current_sqrt_price!==s.current_sqrt_price&&(U.value?be({value:u.value/100}):D()))},{immediate:!0});const He=k(()=>{if(n.value.positionLiquidity==0)return"Insufficient LP Amount";const s=Number(c.value)>Number($.value);return!w.value&&!_.value||!c.value||c.value<=0||!w.value&&f.value||!_.value&&Y.value?Te("button.enterAmount"):s?"Invalid Amount":ee.value?Te("button.insufficientLiquidity"):le.value?Te("button.enterAmount"):f.value&&Number(w.value)>Number(p.value)||Y.value&&Number(_.value)>Number(p.value)?"Invalid Amount":Te("button.remove")}),Me=k(()=>{var L;if(((L=n==null?void 0:n.value)==null?void 0:L.positionLiquidity)==0)return!0;const s=Number(c.value)>Number($.value);return!!(!w.value&&!_.value||Number(w.value)<=0&&f.value||Number(_.value)<=0&&Y.value||!c.value||c.value<=0||s||ee.value||F.value!=="STATUS_RUNNING"||le.value||f.value&&Number(w.value)>Number(p.value)||Y.value&&Number(_.value)>Number(p.value))}),go=s=>(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||ro("/image/coins/sui-unknown.png"),_o=s=>{w.value="",_.value="",U.value=!0,oe.value="",s=="only-a"?(f.value=!f.value,Y.value=!1,V.value=!0):(Y.value=!Y.value,f.value=!1,V.value=!1)},Ro=s=>{U.value=!0,u.value=100,s==="fromCoin"?V.value=!0:V.value=!1},Bo=s=>{U.value=!0,u.value=50,s==="fromCoin"?V.value=!0:V.value=!1},p=g(),X=async()=>{const s=n.value.token_a.decimals,L=n.value.token_b.decimals,ae=new l(de.value).mul(new l(Math.pow(10,s))).toNumber(),K=new l(fe.value).mul(new l(Math.pow(10,L))).toNumber(),Q=f.value?K:ae,H=f.value?h.value.address===n.value.token_a.address:v.value.address===n.value.token_a.address;try{const me=await T.value.swapRouterContract.getSwapRouter(f.value?h:v,f.value?v:h,Q,!0,Number(R.value)/100,"",void 0,[{pool_id:n.value.address,tick_lower:n.value.autoPoolPositionInfo.tick_lower_index,tick_upper:n.value.autoPoolPositionInfo.tick_upper_index,delta_liquidity:Number(n.value.positionLiquidity),is_increase:!1}]),J=new l(me.amountOut);p.value=J.sub(J.mul(Number(R.value)/100)).add(new l(f.value?de.value:fe.value)).toString()}catch{if(f.value||Y.value){let J=await O.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:H,byAmountIn:!0,amount:Q});const z=new l(J.estimatedAmountOut);p.value=z.sub(z.mul(Number(R.value)/100)).add(new l(f.value?de.value:fe.value)).toString(),f.value?w.value=N(new l(p.value).mul(u.value/100).toString(),v.value.decimals):_.value=N(new l(p.value).mul(u.value/100).toString(),h.value.decimals),be({value:u.value/100})}}be({value:u.value/100})};$e(()=>[f.value,Y.value,de.value,fe.value],([s,L])=>{s||L?X():be({value:u.value/100})},{immediate:!0});const ke=s=>`${s}%`,F=k(()=>b.value.currentAutoPoolStatus),he=g(),ge=()=>{he.value=window.setInterval(()=>{(w.value||_.value)&&!U.value?D():be({value:u.value/100})},2e4)};return co(()=>{ge()}),Po(()=>{window.clearInterval(he.value)}),{removeLiquidityBtnText:He,removeLiquidityBtnDisabled:Me,wallet:i,ratioArr:S,positionInfo:n,isShowRemoveModal:A,needReverse:r,fromCoin:v,toCoin:h,lpAmount:c,lpBalance:$,sliderVal:u,sFixD:N,isSlider:U,fromCoinAmount:w,toCoinAmount:_,setPercent:be,toRemove:ao,addCommom:q,getCoinIcon:go,isOnlyA:f,isOnlyB:Y,onlyToken:_o,fixedFromCoin:V,maxBtnSelect:Ro,halfBtnSelect:Bo,fromCoinBlance:de,toCoinBlance:fe,showFromCoinLock:te,showToCoinLock:ie,removeText:oe,onlyTokenBalance:p,totalWithdraw:Ae,formatter:ke,currentAutoPoolStatus:F,calculateLoading:P}}});const ho=e=>(Xe("data-v-4ed85d29"),e=e(),ze(),e),Ks={class:"auto-pool-add"},Qs={class:"auto-pool-add-content"},Zs={class:"liquidity-action-tab"},Js=ho(()=>o("div",{class:"remove tab-active"},"Remove",-1)),xs={key:0,class:"card-item"},ea={key:1,class:"card-item"},oa={class:"remove-ratio"},na={class:"remove-ratio-select"},ta={key:0,class:"ratio"},ia={key:1,class:"ratio"},sa={class:"ratio-list"},aa=["onClick"],la=ho(()=>o("span",null,"Pool Closed",-1)),ua={key:4,class:"remove-info"},ra={key:0,class:"remove-text total-amount"},da={class:"total-amount"},va=ho(()=>o("span",null,"Total Withdraw",-1)),ma={key:0},pa={class:"total-amount"},ca=ho(()=>o("span",null,"LP Burn Amount",-1)),fa={key:0};function ya(e,i,j,W,R,B){var n,r,v,h,A,c;const m=Ko,T=Qo,S=Wo,u=to("AutoPoolV2PoolStatus"),t=Ao,I=Xo,b=Jo;return a(),y("div",Ks,[o("div",Qs,[o("div",Zs,[o("div",{class:"increase",onClick:i[0]||(i[0]=jo($=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),Js]),o("div",{class:Se(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(a(),y("div",xs,[M(m,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":i[1]||(i[1]=$=>e.fromCoinAmount=$),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:i[2]||(i[2]=$=>e.maxBtnSelect("fromCoin")),onOnHalf:i[3]||(i[3]=$=>e.halfBtnSelect("fromCoin")),onOnInput:i[4]||(i[4]=$=>{e.isSlider=!1,e.fromCoinAmount=$}),onOnFocus:i[5]||(i[5]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(a(),G(T,{key:0})):E("",!0)])):E("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(a(),y("div",ea,[M(m,{modelValue:e.toCoinAmount,"onUpdate:modelValue":i[6]||(i[6]=$=>e.toCoinAmount=$),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:i[7]||(i[7]=$=>e.maxBtnSelect("toCoin")),onOnHalf:i[8]||(i[8]=$=>e.halfBtnSelect("toCoin")),onOnInput:i[9]||(i[9]=$=>{e.isSlider=!1,e.toCoinAmount=$}),onOnFocus:i[10]||(i[10]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(a(),G(T,{key:0})):E("",!0)])):E("",!0)],2),o("div",oa,[o("div",na,[Number(e.lpBalance)>=Number(e.lpAmount)?(a(),y("div",ta,d(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:C(N))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:C(N))(e.sliderVal,2))+"% ",1)):(a(),y("div",ia,"--")),o("div",sa,[(a(!0),y(Ye,null,po(e.ratioArr,($,U)=>(a(),y("div",{key:U,class:Se(["ratio-item",e.sliderVal==$.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=$.value}},d($.name),11,aa))),128))])]),M(S,{value:e.sliderVal,"onUpdate:value":i[11]||(i[11]=$=>e.sliderVal=$),"tip-formatter":e.formatter,onChange:i[12]||(i[12]=$=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(a(),G(u,{key:0})):E("",!0),(n=e.positionInfo)!=null&&n.is_pause?(a(),G(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:se(()=>[la]),_:1})):e.wallet&&e.wallet.address?(a(),G(t,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:i[13]||(i[13]=$=>e.toRemove())},{default:se(()=>[o("span",null,d(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(a(),G(t,{key:3,class:"big-btn liquidity-btn",onClick:i[14]||(i[14]=$=>e.wallet.setIsShowWalletModal(!0))},{default:se(()=>[o("span",null,d(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?E("",!0):(a(),y("div",ua,[e.removeText&&(e.isOnlyA&&Number(e.fromCoinAmount)>0||e.isOnlyB&&Number(e.toCoinAmount)>0)?(a(),y("div",ra,d(e.removeText),1)):E("",!0),o("div",da,[va,e.calculateLoading?(a(),G(I,{key:1,paragraph:!1,active:""})):(a(),y("span",ma,d(e.totalWithdraw),1))]),o("div",pa,[ca,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),y("span",fa,d(("addCommom"in e?e.addCommom:C(q))(("sFixD"in e?e.sFixD:C(N))(e.lpAmount,(r=e.positionInfo)==null?void 0:r.decimals)))+" "+d(e.needReverse?(v=e.toCoin)==null?void 0:v.symbol:(h=e.fromCoin)==null?void 0:h.symbol)+"-"+d(e.needReverse?(A=e.fromCoin)==null?void 0:A.symbol:(c=e.toCoin)==null?void 0:c.symbol),1)):(a(),G(I,{key:1,paragraph:!1,active:""}))])])),e.isShowRemoveModal?(a(),G(b,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:i[15]||(i[15]=$=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):E("",!0)])}const ba=Ve(Ys,[["render",ya],["__scopeId","data-v-4ed85d29"]]),ka=je({components:{AutoPoolV2Info:en,AutoPoolV2PositionRange:on,AutoPoolV2PoolComposition:tn,AutoPoolV2PoolLiquidity:sn,AutoPoolV2PoolAdd:Gs,AutoPoolV2PoolRemove:ba},setup(){const e=Qe();eo();const i=yo(),j=k(()=>i),W=k(()=>e),R=xe(),B=g();$e(()=>[W.value.positionInfoObj,R.params.id],([I,b])=>{I&&!Ke(I)&&b&&(B.value=I[b])},{immediate:!0,deep:!0});const m=async()=>{e.getAutoPoolAPY(),e.getVault(R.params.id,"refresh")},T=g();$e(()=>R.query.action,I=>{I&&(T.value=I)},{immediate:!0}),co(()=>{e.getAutoPoolList(),e.getVault(R.params.id,!1)}),k(()=>j.value.chainName),To();const S=bo(),u=k(()=>S);$e(()=>u.value.address,I=>{I||e.logout()},{immediate:!0});const t=k(()=>W.value.autoPoolLoading);return{clickRefresh:m,currentTab:T,positionInfo:B,autoPoolLoading:t}}});const ha={class:"auto-pool-detail-v2"},ga={class:"detail-top"},_a={class:"detail-bottom pc-detail"},$a={class:"detail-bottom-left"},wa={class:"detail-bottom-right"},Ia={class:"h5-detail"},Ca={key:0,class:"loading-global"};function Sa(e,i,j,W,R,B){const m=Vn,T=en,S=on,u=tn,t=sn,I=to("AutoPoolV2PoolAdd"),b=to("AutoPoolV2PoolRemove"),n=yn;return a(),y("div",ha,[o("div",ga,[M(m,{"pool-info":e.positionInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"]),M(T)]),o("div",_a,[o("div",$a,[M(S),M(u),M(t)]),o("div",wa,[e.currentTab=="deposit"?(a(),G(I,{key:0,onChangeCurrentTab:i[0]||(i[0]=r=>e.currentTab="remove")})):(a(),G(b,{key:1,onChangeCurrentTab:i[1]||(i[1]=r=>e.currentTab="deposit")}))])]),o("div",Ia,[e.currentTab=="deposit"?(a(),G(I,{key:0,onChangeCurrentTab:i[2]||(i[2]=r=>e.currentTab="remove")})):(a(),G(b,{key:1,onChangeCurrentTab:i[3]||(i[3]=r=>e.currentTab="deposit")})),M(S),M(u),M(t)]),e.autoPoolLoading?(a(),y("div",Ca,[M(n)])):E("",!0)])}const Qa=Ve(ka,[["render",Sa],["__scopeId","data-v-8108a44b"]]);export{Qa as default};
