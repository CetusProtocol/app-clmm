import{a as K,j as ee,u as oe,h as M,i as L,D as ce,f as me,b as pe,p as ve}from"./import-icon.2b0e962b.js";import{a as ne,J as se,q as b,L as be,N as te,s as E,e as ae,o as s,f as i,h as n,c as T,t as m,x as Z,i as B,w as _,v as A,j as z,u as S,I as he,G as le,eK as fe,S as _e,B as ke,p as ie,k as de,M as ge,r as j,l as ye,eL as Ce,H as U,A as $e,P as we,F as Y,E as x,z as Se,eM as Le}from"./entry.6d441a0f.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{_ as Ie,a as Te}from"./img-no-Positions_2x.7e938861.js";const Ae=ne({props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,d){const{t:l,locale:q}=se(),P=K(),h=b(()=>P),g=b(()=>new ce(Number(e.balance)).div(2)),v=be(te,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function I(){this.$emit("onSelect")}const y=p=>{const t=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(f==null?void 0:f.value)&&(f==null?void 0:f.value)}})?).*$`);p.target.value=p.target.value.replace(t,"$1")},w=ee(),u=b(()=>w),a=oe(),r=b(()=>a);let C={};E(()=>r.value.RATES,p=>{p&&(C=p)},{immediate:!0});const k=b(()=>me(Number(e.inputValue)*Number(C&&C[e.address]&&C[e.address].price),2)),N=b(()=>{var p,t;return r.value.tokensObj&&e.address&&r.value.tokensObj[e.address]&&((p=r.value.tokensObj[e.address])==null?void 0:p.labels)&&((t=r.value.tokensObj[e.address])==null?void 0:t.labels[0])}),f=b(()=>{var p;return r.value.tokensObj&&e.address&&r.value.tokensObj[e.address]&&((p=r.value.tokensObj[e.address])==null?void 0:p.decimals)}),R=b(()=>{var p,t;return e.coinIcon||((t=(p=r==null?void 0:r.value)==null?void 0:p.tokensObj[e.address])==null?void 0:t.logo_url)||(h.value.theme==="default"?L("/image/coins/unknown.png"):L("/image/coins/sui-unknown.png"))});return{pool:r,halfBalance:g,coinLabels:N,t:l,addCommom:M,store:h,wallet:u,indicator:v,inputChange:y,importIcon:L,selectCoin:I,amountPirce:k,coinDecimals:f,currentIcon:R}}});const Ne=e=>(ie("data-v-8e9e73db"),e=e(),de(),e),Oe={class:"card"},je={class:"top"},Be={key:1,class:"input-div"},Me={key:0},De={class:"loading-token"},Pe=["src"],Re={key:0},Ve=Ne(()=>n("use",{"xlink:href":"#icon-icon_on"},null,-1)),ze=[Ve],Fe={class:"bottom"},Ee={key:0,class:"amount-price"},Ze={key:1},qe={class:"top"},He={class:"right"},Ue={class:"balance"};function Ke(e,d,l,q,P,h){const g=he,v=le,I=fe,y=_e,w=ke;return s(),i("div",Oe,[n("div",je,[e.inputDisabled?(s(),i("div",Be,[e.inputValue?(s(),i("span",Me,m(e.inputValue),1)):(s(),T(v,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(s(),T(g,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:d[0]||(d[0]=u=>e.$emit("onInput",u.target.value)),onFocus:d[1]||(d[1]=u=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),n("div",{class:Z(["left",e.hasArrow?"":"nohands"]),onClick:d[2]||(d[2]=u=>e.hasArrow&&!e.pool.isTokenLoading?e.selectCoin():"")},[n("div",De,[e.pool.isTokenLoading?(s(),T(I,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):(s(),i("img",{key:1,src:e.currentIcon},null,8,Pe)),B(y,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:_(()=>[n("div",null,[n("p",null,m(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(s(),i("p",Re,m(e.coinLabels),1)):A("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(s(),i("svg",{key:0,class:Z(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},ze,2)):A("",!0)],2)]),n("div",Fe,[e.inputValue&&e.amountPirce!="--"?(s(),i("div",Ee," $"+m(e.amountPirce),1)):(s(),i("div",Ze)),n("div",qe,[n("div",He,[z(m(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),n("span",Ue,m(e.wallet.connected?("addCommom"in e?e.addCommom:S(M))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(s(),T(w,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:S(M))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:d[3]||(d[3]=u=>e.$emit("onHalf"))},{default:_(()=>[z(m("Half"))]),_:1},8,["disabled"])):A("",!0),e.havemax&&e.wallet.connected?(s(),T(w,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:S(M))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:d[4]||(d[4]=u=>e.$emit("onMax"))},{default:_(()=>[z(m(e.$t("button.max")),1)]),_:1},8,["disabled"])):A("",!0)])])])])}const Mo=ae(Ae,[["render",Ke],["__scopeId","data-v-8e9e73db"]]);const Ge=ne({components:{Modal:ge,LoadingOutlined:te},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""}},setup(e,d){const{t:l,locale:q}=se(),P=ee(),h=b(()=>P),g=oe(),v=b(()=>g),I=K(),y=b(()=>I),w=j([l("tab.all"),l("tab.native"),l("tab.layerZero"),l("tab.wormhole"),l("tab.celer")]),u=j(l("tab.all")),a=j(l("tab.all")),r=K(),C=b(()=>r.chainName),k=j([]),N=j(null);ye(()=>{});const f=j(!1);E(u,t=>{t!==l("tab.all")&&(f.value=!1),t==l("tab.all")?a.value=l("tab.all"):t==l("tab.layerZero")?a.value=l("tab.layerZero"):t==l("tab.wormhole")?a.value=l("tab.wormhole"):t==l("tab.celer")?a.value=l("tab.celer"):t==l("tab.native")&&(a.value=l("tab.native")),R(N.value)});const R=async t=>{var G,J,W,Q,X;let F=[],O=v.value.tokens;if(!(y.value.chainName&&O&&O[0]&&y.value.chainName.toLowerCase().includes((G=O[0])==null?void 0:G.chain))){k.value=[];return}let H=O;if(t&&t.split("::")&&t.split("::").length==3&&C.value=="Sui"){const c=pe("Sui");try{const o=v.value.tokensObj[t]||await c.getTokenBySymbol(v.value.tokens,t);o&&((J=O.filter($=>($==null?void 0:$.address)===(o==null?void 0:o.address)))==null?void 0:J.length)<1&&(g.setNewTokens({[t]:o}),H=O.concat(o))}catch{}}for(const c of Object.keys(H)){let o=Ce(H[c]);const $=h.value.assets[o.address]&&h.value.assets[o.address].balance?ve(h.value.assets&&h.value.assets[o.address].balance,o.decimals):0;e.lastSelectCoin&&o&&o.address===e.lastSelectCoin?o.unusable=!0:o.unusable=!1;const ue=((W=v.value.tokensObj[o.address])==null?void 0:W.labels)&&((Q=v.value.tokensObj[o.address])==null?void 0:Q.labels[0]),re=v.value.tokensObj[o.address]?(X=v.value.tokensObj[o.address])==null?void 0:X.name:o.name;o={...o,balance:$,labels:ue,name:re,sort:o.symbol=="APT"||o.symbol=="SUI"?1:-1},F.push(o)}let V;if(h.value.address?V=F.sort((c,o)=>c.symbol.charCodeAt(0)-o.symbol.charCodeAt(0)).sort((c,o)=>o.balance-c.balance):V=F.sort((c,o)=>c.symbol.charCodeAt(0)-o.symbol.charCodeAt(0)),t){const c=V.filter(o=>o.symbol.toLowerCase().indexOf(t.toLowerCase())!==-1||o.address.toLowerCase().indexOf(t.toLowerCase())!==-1);if(u.value!==l("tab.all")){const o=c.filter($=>u.value==l("tab.native")?!$.labels:$.labels&&$.labels.toLowerCase()==u.value.toLowerCase());k.value=o}else k.value=c}else if(u.value!==l("tab.all")){const c=V.filter(o=>u.value==l("tab.native")?!o.labels:o.labels&&o.labels.toLowerCase()==u.value.toLowerCase());k.value=c}else k.value=V;k.value=k.value.sort((c,o)=>o.sort-c.sort).sort((c,o)=>o.unusable-c.unusable)},p=t=>{d.emit("onSelect",t),d.emit("onClose")};return E(()=>[N.value,f.value],([t,F])=>{R(t)},{immediate:!0}),E(()=>v.value.tokens,t=>{t&&R(N.value)},{immediate:!0}),{pools:v,t:l,chainName:C,tabList:w,currentTab:u,addCommom:M,tokenList:k,importIcon:L,keyword:N,wallet:h,toSelect:p,store:y,isShowAll:f}}}),Je=""+globalThis.__publicAssetsURL("image/warning@2x.png");const D=e=>(ie("data-v-3470f62d"),e=e(),de(),e),We=D(()=>n("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Qe={class:"coin-select-modal"},Xe={class:"search-input"},Ye=["placeholder"],xe=D(()=>n("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),eo=[xe],oo={key:0,class:"tab-list"},no=["onClick"],so={class:"item"},to=D(()=>n("div",{class:"line"},null,-1)),ao={class:"coin-list-box"},lo={key:0,class:"coin-list"},io=["onClick"],uo={class:"left"},ro=["src"],co=["src"],mo={class:"name-box"},po=D(()=>n("img",{src:Je,alt:""},null,-1)),vo={class:"balance-box"},bo={class:"balance"},ho={key:0},fo={key:1},_o={key:2},ko=D(()=>n("p",null,null,-1)),go={key:1,class:"no-data"},yo={key:0,class:"token-loading"},Co={key:1,class:"no-data-content"},$o={key:0,src:Ie},wo={key:1,src:Te},So=D(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-information"})],-1));function Lo(e,d,l,q,P,h){const g=Se,v=U("loading-outlined"),I=Le,y=le,w=U("vue-scroll"),u=U("Modal");return s(),T(u,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:d[2]||(d[2]=a=>e.$emit("onClose"))},{closeIcon:_(()=>[We]),default:_(()=>[n("div",Qe,[n("div",Xe,[$e(n("input",{"onUpdate:modelValue":d[0]||(d[0]=a=>e.keyword=a),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,Ye),[[we,e.keyword]]),e.keyword?(s(),i("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:d[1]||(d[1]=a=>e.keyword="")},eo)):A("",!0)]),e.chainName!=="Sui"?(s(),i("div",oo,[(s(!0),i(Y,null,x(e.tabList,(a,r)=>(s(),i("div",{key:r,class:Z(["item-container",e.currentTab==a?"item-container-active item-container":"item-container"]),onClick:C=>e.currentTab=a},[n("div",so,m(a),1)],10,no))),128))])):A("",!0),to,n("div",ao,[B(w,null,{default:_(()=>[e.tokenList&&e.tokenList.length>0?(s(),i("ul",lo,[(s(!0),i(Y,null,x(e.tokenList,(a,r)=>(s(),i("li",{key:r,class:Z(a.unusable?"unusable":""),onClick:C=>e.toSelect(a)},[n("div",uo,[a.isChinaToken?(s(),i("img",{key:1,src:e.store.theme=="default"?("importIcon"in e?e.importIcon:S(L))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:S(L))("/image/coins/sui-unknown.png"),alt:""},null,8,co)):(s(),i("img",{key:0,src:a.icon||a.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:S(L))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:S(L))("/image/coins/sui-unknown.png"))},null,8,ro)),n("div",mo,[n("span",null,[z(m(a.symbol)+" ",1),a.isSelfBuilt?(s(),T(g,{key:0,placement:"right","arrow-point-at-center":""},{title:_(()=>[n("span",null,m(e.t("newAdd.notCetusTokenList")),1)]),default:_(()=>[po]),_:1})):A("",!0)]),n("p",null,m(a.name)+" "+m(a.labels?`(${a.labels})`:""),1)])]),n("div",vo,[n("div",bo,[e.wallet.loading?(s(),i("div",ho,[B(I,null,{default:_(()=>[B(v)]),_:1})])):a.balance&&e.wallet.connected?(s(),i("div",fo,m(("addCommom"in e?e.addCommom:S(M))(a.balance,a.decimals)),1)):(s(),i("div",_o,"0"))]),ko])],10,io))),128))])):(s(),i("div",go,[e.pools.isTokenLoading?(s(),i("div",yo,[B(y)])):(s(),i("div",Co,[e.store.theme=="default"?(s(),i("img",$o)):(s(),i("img",wo)),n("p",null,m(e.t("newAdd.noTokensFound")),1),n("div",null,[z(m(e.t("newAdd.enterCoinType"))+" ",1),B(g,{placement:"bottom","arrow-point-at-center":""},{title:_(()=>[n("span",null,m(e.t("newAdd.uniqueIdOfCoin")),1)]),default:_(()=>[So]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const Do=ae(Ge,[["render",Lo],["__scopeId","data-v-3470f62d"]]);export{Mo as _,Do as a};
