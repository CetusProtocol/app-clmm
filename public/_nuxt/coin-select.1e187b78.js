import{i as $}from"./import-icon.de3e6c66.js";import{f as ie,u as re,e as se,a as ce,p as ue,B as de}from"./pool.391d046d.js";import{a as pe,M as ve,a4 as _e,l as me,m as L,r as k,y as be,D,ab as fe,e as he,K as Z,q as ke,o as i,c as V,w as _,h as l,t as z,a2 as Ce,f as r,x as U,F as X,s as Y,z as x,v,i as T,u as I,j as ee,L as ge,ac as we,J as ye,p as Se,k as Le}from"./entry.0485e02f.js";/* empty css              *//* empty css              */import{u as oe}from"./index.383699e2.js";import{_ as Te,a as Ie}from"./img-no-Positions_2x.2c0bab84.js";const $e=pe({components:{Modal:ve,LoadingOutlined:_e},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""},isCreatePoolToCoin:{type:Boolean,default:!1},isCreatePoolFromCoin:{type:Boolean,default:!1}},setup(o,d){const{t:a,locale:te}=me(),q=ie(),m=L(()=>q),g=re(),c=L(()=>g),B=oe(),b=L(()=>B),O=L(()=>{var n;return(n=b.value)==null?void 0:n.filterCreatePoolCoin}),M=k([a("tab.all"),a("tab.native"),a("tab.layerZero"),a("tab.wormhole"),a("tab.celer")]),u=k(a("tab.all")),t=k(a("tab.all")),w=oe(),A=L(()=>w.chainName),y=k([]),N=k(null);be(()=>{});const j=k(!1);D(u,n=>{n!==a("tab.all")&&(j.value=!1),n==a("tab.all")?t.value=a("tab.all"):n==a("tab.layerZero")?t.value=a("tab.layerZero"):n==a("tab.wormhole")?t.value=a("tab.wormhole"):n==a("tab.celer")?t.value=a("tab.celer"):n==a("tab.native")&&(t.value=a("tab.native")),F(N.value)});const F=async n=>{var K,E,J,W,G,H,Q;let P=[],h=c.value.tokens;if(!(b.value.chainName&&h&&h[0]&&b.value.chainName.toLowerCase().includes((K=h[0])==null?void 0:K.chain))){y.value=[];return}let R=h;if(n&&n.split("::")&&n.split("::").length==3&&A.value=="Sui"){const s=ce("Sui");try{const e=c.value.tokensObj[n]||await s.getTokenBySymbol(c.value.tokens,n);e&&((E=h.filter(p=>(p==null?void 0:p.address)===(e==null?void 0:e.address)))==null?void 0:E.length)<1&&(g.setNewTokens({[n]:e}),R=h.concat(e))}catch{}}for(const s of Object.keys(R)){let e=fe(R[s]);const p=m.value.assets[e.address]&&m.value.assets[e.address].balance?ue(m.value.assets&&m.value.assets[e.address].balance,e.decimals):0;o.lastSelectCoin&&e&&e.address===o.lastSelectCoin?e.unusable=!0:e.unusable=!1;const ae=((J=c.value.tokensObj[e.address])==null?void 0:J.labels)&&((W=c.value.tokensObj[e.address])==null?void 0:W.labels[0]),le=c.value.tokensObj[e.address]?(G=c.value.tokensObj[e.address])==null?void 0:G.name:e.name;e={...e,balance:p,labels:ae,name:le,sort:(b.value.chainName==="Aptos"?e.symbol=="APT":e.symbol=="SUI")?1:-1},P.push(e)}let S;m.value.address?S=P.sort((s,e)=>e.balance-s.balance):S=P;let f=[];if(n){const s=S.filter(e=>e.symbol.toLowerCase().indexOf(n.toLowerCase())!==-1||e.address.toLowerCase().indexOf(n.toLowerCase())!==-1||e.address.toLowerCase().indexOf(de(n).full_address.toLowerCase())!==-1||e.name.toLowerCase().indexOf(n.toLowerCase())!==-1);u.value!==a("tab.all")?f=s.filter(p=>u.value==a("tab.native")?!p.labels:p.labels&&p.labels.toLowerCase()==u.value.toLowerCase()):f=s}else u.value!==a("tab.all")?f=S.filter(e=>u.value==a("tab.native")?!e.labels:e.labels&&e.labels.toLowerCase()==u.value.toLowerCase()):f=S;o.isCreatePoolToCoin?y.value=(H=f.filter(s=>O.value[s==null?void 0:s.address]))==null?void 0:H.sort((s,e)=>e.sort-s.sort).sort((s,e)=>e.unusable-s.unusable):y.value=f.sort((s,e)=>e.sort-s.sort).sort((s,e)=>e.unusable-s.unusable),o.isCreatePoolFromCoin&&(y.value=(Q=f.filter(s=>!O.value[s==null?void 0:s.address]))==null?void 0:Q.sort((s,e)=>e.sort-s.sort).sort((s,e)=>e.unusable-s.unusable))},ne=n=>{n.unusable||(d.emit("onSelect",n),d.emit("onClose"))};return D(()=>[N.value,j.value],([n,P])=>{F(n)},{immediate:!0}),D(()=>c.value.tokens,n=>{n&&F(N.value)},{immediate:!0}),{pools:c,t:a,chainName:A,tabList:M,currentTab:u,addCommom:se,tokenList:y,importIcon:$,keyword:N,wallet:m,toSelect:ne,store:b,isShowAll:j}}}),Oe=""+globalThis.__publicAssetsURL("sui-image/token-warning@2x.png");const C=o=>(Se("data-v-429bd3c5"),o=o(),Le(),o),Ae=C(()=>l("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[l("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ne={class:"coin-select-modal"},Pe={class:"search-input"},Be=["placeholder"],Me=C(()=>l("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),je=[Me],Fe={key:0,class:"tab-list"},Re=["onClick"],De={class:"item"},Ze=C(()=>l("div",{class:"line"},null,-1)),ze={class:"coin-list-box"},Ue={key:0,class:"coin-list"},qe=["onClick"],Ke={class:"left"},Ee={key:0},Je={key:1,alt:""},We={class:"name-box"},Ge=C(()=>l("img",{src:Oe,alt:""},null,-1)),He={class:"balance-box"},Qe={class:"balance"},Ve={key:0},Xe={key:1},Ye={key:2},xe={key:3},eo=C(()=>l("p",null,null,-1)),oo={key:1,class:"no-data"},so={key:0,class:"token-loading"},to={key:1,class:"no-data-content"},no={key:0,src:Te},ao={key:1,src:Ie},lo=C(()=>l("svg",{class:"icon","aria-hidden":"true"},[l("use",{"xlink:href":"#icon-icon-information"})],-1));function io(o,d,a,te,q,m){const g=ge,c=Z("loading-outlined"),B=we,b=ye,O=Z("vue-scroll"),M=Z("Modal"),u=ke("image");return i(),V(M,{title:o.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:d[2]||(d[2]=t=>o.$emit("onClose"))},{closeIcon:_(()=>[Ae]),default:_(()=>[l("div",Ne,[l("div",Pe,[z(l("input",{"onUpdate:modelValue":d[0]||(d[0]=t=>o.keyword=t),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:o.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,Be),[[Ce,o.keyword]]),o.keyword?(i(),r("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:d[1]||(d[1]=t=>o.keyword="")},je)):U("",!0)]),o.chainName!=="Sui"?(i(),r("div",Fe,[(i(!0),r(X,null,Y(o.tabList,(t,w)=>(i(),r("div",{key:w,class:x(["item-container",o.currentTab==t?"item-container-active item-container":"item-container"]),onClick:A=>o.currentTab=t},[l("div",De,v(t),1)],10,Re))),128))])):U("",!0),Ze,l("div",ze,[T(O,null,{default:_(()=>[o.tokenList&&o.tokenList.length>0?(i(),r("ul",Ue,[(i(!0),r(X,null,Y(o.tokenList,(t,w)=>(i(),r("li",{key:w,class:x(t.unusable?"unusable":""),onClick:A=>o.toSelect(t)},[l("div",Ke,[t.isChinaToken?z((i(),r("img",Je,null,512)),[[u,o.store.theme=="default"?("importIcon"in o?o.importIcon:I($))("/image/coins/unknown.png"):("importIcon"in o?o.importIcon:I($))("/image/coins/sui-unknown.png")]]):z((i(),r("img",Ee,null,512)),[[u,t.icon||t.logo_url||(o.store.theme=="default"?("importIcon"in o?o.importIcon:I($))("/image/coins/unknown.png"):("importIcon"in o?o.importIcon:I($))("/image/coins/sui-unknown.png"))]]),l("div",We,[l("span",null,[ee(v(t.symbol)+" ",1),t.isSelfBuilt?(i(),V(g,{key:0,placement:"right","arrow-point-at-center":""},{title:_(()=>[l("span",null,v(o.t("newAdd.notCetusTokenList")),1)]),default:_(()=>[Ge]),_:1})):U("",!0)]),l("p",null,v(t.name)+" "+v(t.labels?`(${t.labels})`:""),1)])]),l("div",He,[l("div",Qe,[o.wallet.loading?(i(),r("div",Ve,[T(B,null,{default:_(()=>[T(c)]),_:1})])):t.balance&&o.wallet.connected?(i(),r("div",Xe,v(("addCommom"in o?o.addCommom:I(se))(t.balance,t.decimals)),1)):!t.balance&&o.wallet.connected?(i(),r("div",Ye,"0")):(i(),r("div",xe))]),eo])],10,qe))),128))])):(i(),r("div",oo,[o.pools.isTokenLoading?(i(),r("div",so,[T(b)])):(i(),r("div",to,[o.store.theme=="default"?(i(),r("img",no)):(i(),r("img",ao)),l("p",null,v(o.t("newAdd.noTokensFound")),1),l("div",null,[ee(v(o.t("newAdd.enterCoinType"))+" ",1),T(g,{placement:"bottom","arrow-point-at-center":""},{title:_(()=>[l("span",null,v(o.t("newAdd.uniqueIdOfCoin")),1)]),default:_(()=>[lo]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const bo=he($e,[["render",io],["__scopeId","data-v-429bd3c5"]]);export{bo as _,Oe as a};
