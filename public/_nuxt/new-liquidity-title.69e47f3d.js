import{u as Q,a as ke}from"./sha256.382a5e31.js";import{a as G,l as S,e as K,o as k,f as I,r as C,m as te,q as j,h as r,v as w,i as E,w as W,C as H,x as V,I as ae,O as re,J as le,j as J,B as se,y as be,D as _e,L as ye,s as he,c as z,t as Pe,u as Y,S as Se,a5 as Ce,p as ue,k as ce,Q as ie,R as Te,N as $e,b as Ie}from"./entry.548c3ce8.js";import{_ as we}from"./img-lock_2x.a28135f4.js";import{_ as Ne}from"./lock.06ea199f.js";/* empty css              *//* empty css              */import{b as de,d as U,u as ne,o as Me,a as x,h as me,c as oe,e as Z}from"./pool.aad36be9.js";import{D as h}from"./decimal.0e8aa3f1.js";import{i as ee}from"./import-icon.de3e6c66.js";import{_ as fe}from"./token-warning.0eb4bf5a.js";/* empty css              *//* empty css              */import{_ as Ae}from"./refresh-icon.f6554da3.js";import{_ as Oe}from"./swap-setting.0f03d558.js";const je=G({setup(){const e=Q();return{storeIndex:S(()=>e)}}});const Be={class:"create-pool-lock"},Re={key:0,src:we,alt:""},Le={key:1,src:Ne,alt:""};function qe(e,n,u,g,b,d){return k(),I("div",Be,[e.storeIndex.theme=="default"?(k(),I("img",Re)):(k(),I("img",Le))])}const Gt=K(je,[["render",qe],["__scopeId","data-v-fb497971"]]),Fe=G({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},emits:["onInput"],setup(e,n){const u=C(""),g=C("");let b=C(""),d=C("");const t=te(),_=Q(),c=S(()=>_),N=S(()=>c.value.chainName?de(c.value.chainName):{}),M=()=>{var o,s,y,P;if(!(Number.isNaN(u.value)||Number(u.value)!==0&&!u.value||!e.poolInfo.tickSpacing))try{const{TickUtil:T,TickMath:$,getNearestTickByTick:m}=N.value,f=$.priceToTickIndex(new h(u.value.toString()),(o=l.value.token_a)==null?void 0:o.decimals,(s=l.value.token_b)==null?void 0:s.decimals),v=m(f,Number(l.value.tickSpacing),!0);let p;if(p=$.tickIndexToPrice(v+Number(l.value.tickSpacing),(y=l.value.token_a)==null?void 0:y.decimals,(P=l.value.token_b)==null?void 0:P.decimals),e.pType=="Min"&&Number(p.toString())>Number(d.value.toString()))return;const B=p.toString();n.emit("onInput",B)}catch{n.emit("onInput","")}},R=()=>{var o,s,y,P;try{if(Number.isNaN(u.value)||!u.value||!e.poolInfo.tickSpacing)return;const{TickUtil:T,TickMath:$,getNearestTickByTick:m}=N.value,f=$.priceToTickIndex(new h(u.value.toString()),(o=l.value.token_a)==null?void 0:o.decimals,(s=l.value.token_b)==null?void 0:s.decimals),v=m(f,Number(l.value.tickSpacing),!0);let p;p=$.tickIndexToPrice(v-Number(l.value.tickSpacing),(y=l.value.token_a)==null?void 0:y.decimals,(P=l.value.token_b)==null?void 0:P.decimals);const B=p.toString();if(e.pType=="Max"&&Number(p)<Number(b.value))return;n.emit("onInput",B)}catch{n.emit("onInput","")}},D=o=>{let s=o.toString().replace(/[^\d.]/g,"");const y=/^\d+(\.\d+)?$/;s.split(".").length>2&&!y.exec(s)&&(s=s.substr(0,s.length-1)),g.value=String(s)},i=o=>{if(o&&o!=="0"&&o!=="∞"){u.value=o;const y=o.toString().split(".")[1];g.value=o!=="0"&&o!=="∞"&&y&&y.length>6?U(o.toString(),6):o.toString()}else(o=="0"||o=="∞"||t.query.action)&&(g.value=o)},O=o=>{var m,f,v,p;const{TickUtil:s,TickMath:y,getNearestTickByTick:P}=N.value,T=o.target.value;let $;if(T==="0"){$=-443636,n.emit("onInput","0");return}else if(T!=="0"&&T){const B=y.priceToTickIndex(new h(T),(m=l.value.token_a)==null?void 0:m.decimals,(f=l.value.token_b)==null?void 0:f.decimals);$=P(Number(B),Number(l.value.tickSpacing),!0);const L=y.tickIndexToPrice(new h($),(v=l.value.token_a)==null?void 0:v.decimals,(p=l.value.token_b)==null?void 0:p.decimals);i(L.toString()),n.emit("onInput",L.toString())}else n.emit("onInput")};j(()=>e.defaultMinPrice,(o,s)=>{o!==s&&(b.value=e.defaultMinPrice)},{immediate:!0}),j(()=>e.defaultMaxPrice,(o,s)=>{o!==s&&(d.value=e.defaultMaxPrice)},{immediate:!0}),j(()=>[e.inputValue,t.query.action],([o])=>{i(o)},{immediate:!0});const l=C({});j(()=>e.poolInfo,(o,s)=>{o&&(l.value=o)},{immediate:!0});const a=C("");return j(()=>e.currentPriceTab,o=>{a.value=o},{immediate:!0}),{addPrice:M,minusPrice:R,oValue:g,changeValue:D,isDisabled:a,route:t,onBlur:O}}});const De={class:"set-price-item"},Ue={class:"title"},Ve={class:"input-box"},Ee={key:0,class:"minus-btn"},We={key:1,class:"plus-btn"};function ze(e,n,u,g,b,d){const t=ae,_=re;return k(),I("div",De,[r("div",Ue,w(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),E(_,{loading:e.loading,active:"",paragraph:!1},{default:W(()=>[r("div",Ve,[e.currentPriceTab!=="full range"?(k(),I("a",Ee,[r("div",{class:H(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"reductionDis":"reduction"),onClick:n[0]||(n[0]=(...c)=>e.minusPrice&&e.minusPrice(...c))},"-",2)])):V("",!0),E(t,{id:"pValu",value:e.oValue,"onUpdate:value":n[1]||(n[1]=c=>e.oValue=c),disabled:e.route.query.action&&!e.intPrice,autocomplete:"off",placeholder:"0",onChange:n[2]||(n[2]=c=>e.changeValue(c.target.value)),onBlur:n[3]||(n[3]=c=>e.onBlur(c))},null,8,["value","disabled"]),e.currentPriceTab!=="full range"?(k(),I("a",We,[r("div",{class:H(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"addDis":"add"),onClick:n[4]||(n[4]=(...c)=>e.addPrice&&e.addPrice(...c))},"+",2)])):V("",!0)])]),_:1},8,["loading"]),r("p",{class:H(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},w(e.toCoin&&e.toCoin.symbol)+" per "+w(e.fromCoin&&e.fromCoin.symbol),3)])}const ve=K(Fe,[["render",ze],["__scopeId","data-v-2cc9c58e"]]),He=G({components:{NewLiquiditySetPrice:ve},props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},setup(e,n){let u=C(""),g=C(""),b=C(),d=C(!1),t=C(!1);const _=C({}),c=Q(),N=S(()=>c);le(()=>{u.value=e.min,g.value=e.max}),j(()=>e.currentPriceTab,(a,o)=>{a!==o&&(b.value=e.currentPriceTab)},{immediate:!0}),j(()=>e.min,(a,o)=>{a!==o&&(u.value=a)}),j(()=>e.max,(a,o)=>{a!==o&&(g.value=a)}),j(()=>e.poolInfo,(a,o)=>{a&&(_.value=a)},{immediate:!0});const M=C("");j(()=>e.intPrice,a=>{M.value=a},{immediate:!0,deep:!0});const R=a=>{u.value=a,n.emit("onChangeMinPrice",a)},D=a=>{console.error("1113###new-liquidity-set-price###changeMaxPrice###val###",a),g.value=a,n.emit("onChangeMaxPrice",a)};j(d,(a,o)=>{a!==o&&n.emit("onChangeFullRange",a)});const i=()=>{u.value=e.defaultMinPrice,g.value=e.defaultMaxPrice,t.value=!1,d.value=!1},O=()=>{t.value=!1,u.value="0",g.value="∞"};return j(d,(a,o)=>{a!==o&&n.emit("onChangeFullRange",a)}),{store:N,changeMinPrice:R,changeMaxPrice:D,importIcon:ee,resetPrice:i,changeShowUnderStand:()=>{d.value=!d.value,d.value?t.value=!0:i(),t.value||(u.value=e.defaultMinPrice,g.value=e.defaultMaxPrice)},showUnderStand:t,minPrice:u,maxPrice:g,understand:O,isRadio:d,initPirce:M}}});const Je={class:"set-price"},Qe={class:"card-container"},Ge={key:0,class:"card"},Ke={key:1,class:"understand"},Xe={class:"left"},Ye={class:"right"};function Ze(e,n,u,g,b,d){const t=ve,_=se;return k(),I("div",Je,[r("div",Qe,[e.showUnderStand?(k(),I("div",Ke,[r("div",Xe,[r("p",null,w(e.$t("common.lowerEfficiency")),1),r("p",null,w(e.$t("common.lowerEfficiencyTips")),1)]),r("div",Ye,[E(_,{onClick:e.understand},{default:W(()=>[J(w(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(k(),I("div",Ge,[E(t,{value:e.minPrice,"onUpdate:value":n[0]||(n[0]=c=>e.minPrice=c),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,"int-price":e.initPirce,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","int-price","onOnInput","onAddValue","onDelValue"]),E(t,{value:e.maxPrice,"onUpdate:value":n[1]||(n[1]=c=>e.maxPrice=c),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"int-price":e.initPirce,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","int-price","current-price-tab","onOnInput","onAddValue","onDelValue"])]))])])}const Kt=K(He,[["render",Ze],["__scopeId","data-v-d95990c1"]]),xe=G({components:{TokenWarning:fe},props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,n){const{t:u,locale:g}=be(),b=Q(),d=S(()=>b),t=S(()=>new h(Number(e.balance)).div(2)),_=_e(ye,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function c(){this.$emit("onSelect")}const N=m=>{const f=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(s==null?void 0:s.value)&&(s==null?void 0:s.value)}})?).*$`);m.target.value=m.target.value.replace(f,"$1")},M=ke(),R=S(()=>M),D=ne(),i=S(()=>D),O=S(()=>i.value.tokensWarningObj);let l={};j(()=>i.value.RATES,m=>{m&&(l=m)},{immediate:!0});const a=S(()=>Me(Number(e.inputValue)*Number(l&&l[e.address]&&l[e.address].price),2)),o=S(()=>{var m,f;return i.value.tokensObj&&e.address&&i.value.tokensObj[e.address]&&((m=i.value.tokensObj[e.address])==null?void 0:m.labels)&&((f=i.value.tokensObj[e.address])==null?void 0:f.labels[0])}),s=S(()=>{var m;return i.value.tokensObj&&e.address&&i.value.tokensObj[e.address]&&((m=i.value.tokensObj[e.address])==null?void 0:m.decimals)}),y=S(()=>{var m,f,v,p;return e.coinIcon||((f=(m=i==null?void 0:i.value)==null?void 0:m.tokensObj[e.address])==null?void 0:f.logo_url)||((p=(v=i==null?void 0:i.value)==null?void 0:v.tokensObj[e.address])==null?void 0:p.logoURI)||(d.value.theme==="default"?ee("/image/coins/unknown.png"):ee("/image/coins/sui-unknown.png"))}),P=S(()=>i.value.tokensObj),T=S(()=>d.value.theme);return{route:te(),theme:T,currentIcon:y,tokensObj:P,pool:i,halfBalance:t,coinLabels:o,t:u,addCommom:x,store:d,wallet:R,indicator:_,inputChange:N,importIcon:ee,selectCoin:c,amountPirce:a,coinDecimals:s,formatNumber:me,tokensWarningObj:O,checkNullObj:oe}}});const et=e=>(ue("data-v-3a378845"),e=e(),ce(),e),tt={class:"card"},nt={class:"top"},ot={key:1,class:"input-div"},it={key:0},at={class:"loading-token"},rt={key:1},lt={key:0},st=et(()=>r("use",{"xlink:href":"#icon-icon_on"},null,-1)),ut=[st],ct={class:"bottom"},dt={key:0,class:"amount-price"},mt={key:1},ft={class:"top"},vt={class:"right"},pt={class:"balance"};function gt(e,n,u,g,b,d){const t=ae,_=Se,c=Ce,N=fe,M=re,R=se,D=he("image");return k(),I("div",tt,[r("div",nt,[e.inputDisabled?(k(),I("div",ot,[e.inputValue?(k(),I("span",it,w(e.inputValue),1)):(k(),z(_,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(k(),z(t,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:n[0]||(n[0]=i=>e.$emit("onInput",i.target.value)),onFocus:n[1]||(n[1]=i=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),r("div",{class:H(["left",[e.hasArrow?"":"nohands",e.route.name=="swap"?"left-opcity":""].join("")]),onClick:n[2]||(n[2]=i=>e.pool.isTokenLoading?"":e.selectCoin())},[r("div",at,[e.pool.isTokenLoading?(k(),z(c,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):e.address?Pe((k(),I("img",rt,null,512)),[[D,e.currentIcon]]):V("",!0),E(N,{address:e.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),E(M,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:W(()=>[r("div",null,[r("p",null,w(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(k(),I("p",lt,w(e.coinLabels),1)):V("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(k(),I("svg",{key:0,class:H(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},ut,2)):V("",!0)],2)]),r("div",ct,[e.inputValue&&e.amountPirce!="--"?(k(),I("div",dt," $"+w(("formatNumber"in e?e.formatNumber:Y(me))(e.amountPirce)),1)):(k(),I("div",mt)),r("div",ft,[r("div",vt,[J(w(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),r("span",pt,w(e.wallet.connected?("addCommom"in e?e.addCommom:Y(x))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(k(),z(R,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:Y(x))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:n[3]||(n[3]=i=>e.$emit("onHalf"))},{default:W(()=>[J(w("Half"))]),_:1},8,["disabled"])):V("",!0),e.havemax&&e.wallet.connected?(k(),z(R,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:Y(x))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:n[4]||(n[4]=i=>e.$emit("onMax"))},{default:W(()=>[J(w(e.$t("button.max")),1)]),_:1},8,["disabled"])):V("",!0)])])])])}const Xt=K(xe,[["render",gt],["__scopeId","data-v-3a378845"]]),kt=G({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fixedFromCoin:{type:Boolean,defalut:!0},isInputTotalAmount:{type:Boolean,default:!1},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},createPoolInfo:{type:Object,default:()=>({})},currentPrice:{type:Number,default:0},currentPriceReverse:{type:Number,default:0},currentPriceTab:{type:String,default:""}},setup(e){const n=ne(),u=S(()=>n),g=Q(),b=S(()=>g),d=te(),t=S(()=>{let i=null;if(d.name=="liquidity-create")i=e.createPoolInfo;else for(const O in u.value.poolsObj){const l=u.value.poolsObj[O];l.address==d.query.poolAddress&&(i=l)}return i}),_=S(()=>b.value.chainName?de(b.value.chainName):{}),c=S(()=>b.value.slippage),N=C(),M=C(),R=async()=>{if(!e.minPrice&&!e.maxPrice)return;const{TickUtil:i,TickMath:O,getNearestTickByTick:l}=_.value,a=t.value.token_a.decimals,o=t.value.token_b.decimals;let s,y,P,T,$,m,f,v=1,p=1;const B=t.value.current_tick_index;let L=u.value.poolPriceConfigObj&&u.value.poolPriceConfigObj[t.value.address]&&u.value.poolPriceConfigObj[t.value.address].recommend_ranges||{};if(t.value.token_a.address.toLowerCase()===e.fromCoin.address.toLowerCase()&&t.value.token_b.address.toLowerCase()===e.toCoin.address.toLowerCase()?f=!0:f=!1,e.minPrice==="0"&&e.maxPrice==="∞")P=i.getMinIndex(t.value.tickSpacing),T=i.getMaxIndex(t.value.tickSpacing);else if(e.currentPriceTab=="custom"){f?(s=Number(e.minPrice),y=Number(e.maxPrice)):(s=e.maxPrice!=="∞"?new h(1).div(e.maxPrice).toString():1/0,y=new h(1).div(e.minPrice).toString());try{$=O.priceToTickIndex(new h(s),a,o)}catch{$=-443636}try{m=O.priceToTickIndex(new h(y),a,o)}catch{m=443636}s==0&&($=-443636),P=l($,Number(t.value.tickSpacing)),T=l(m,Number(t.value.tickSpacing))}else P=L&&L[e.currentPriceTab]&&L[e.currentPriceTab].lower,T=L&&L[e.currentPriceTab]&&L[e.currentPriceTab].upper;if(e.maxPrice==="∞"||B>=P&&B<=T){let q;if(e.fixedFromCoin){const X=new h(e.fromCoinAmount||1).mul(Math.pow(10,e.fromCoin.decimals)).toString();q=new Z(X)}else{const X=new h(e.toCoinAmount||1).mul(Math.pow(10,e.toCoin.decimals)).toString();q=new Z(X)}const{tokenMaxA:F,tokenMaxB:A}=await _.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:t.value.token_a,tokenB:t.value.token_b,lowerTick:P,upperTick:T,coinAmount:q,iscoinA:f?e.fixedFromCoin:!e.fixedFromCoin,roundUp:!0,slippage:Number(c.value)/100,curSqrtPrice:new Z(t.value.current_sqrt_price)});f?e.fixedFromCoin?(p=Number(A)>0?A:"",v=Number(F)>0?F:""):(v=Number(F)>0?F:"",p=Number(A)>0?A:""):(e.fixedFromCoin,p=F,v=A)}else B>T?f?(p=1,v=0):(v=1,p=0):B<P&&(f?(p=0,v=1):(p=1,v=0));if(e.minPrice=="0"&&e.maxPrice=="∞")N.value=50,M.value=50;else{const q=v?Number(v):0,F=p?Number(p):0,A=new h(F).add(new h(f?new h(q*e.currentPrice):new h(q*e.currentPriceReverse))),X=U(new h(q).mul(new h(f?e.currentPrice:e.currentPriceReverse)).div(A).mul(100).toNumber().toFixed(2),2),ge=U(new h(F).div(A).mul(100).toNumber().toFixed(2),2);N.value=X,M.value=ge}},D=()=>{var p,B,L,q,F;if(!e.minPrice&&!e.maxPrice)return;const{TickUtil:i,TickMath:O,getNearestTickByTick:l}=_.value,a=(p=t.value)==null?void 0:p.token_a.decimals,o=(B=t.value)==null?void 0:B.token_b.decimals;let s,y,P,T,$,m,f;t.value.current_tick_index;let v=u.value.poolPriceConfigObj&&u.value.poolPriceConfigObj[t.value.address]&&u.value.poolPriceConfigObj[t.value.address].recommend_ranges||{};if(((L=t.value)==null?void 0:L.token_a.address.toLowerCase())===e.fromCoin.address.toLowerCase()&&((q=t.value)==null?void 0:q.token_b.address.toLowerCase())===e.toCoin.address.toLowerCase()?f=!0:f=!1,e.minPrice==="0"&&e.maxPrice==="∞")P=i.getMinIndex(t.value.tickSpacing),T=i.getMaxIndex(t.value.tickSpacing);else if(e.currentPriceTab=="custom"||(F=d==null?void 0:d.query)!=null&&F.action){f?(s=Number(e.minPrice),y=Number(e.maxPrice)):(s=e.maxPrice!=="∞"?new h(1).div(e.maxPrice).toString():1/0,y=new h(1).div(e.minPrice).toString());try{$=O.priceToTickIndex(new h(s),a,o)}catch{$=-443636}try{m=O.priceToTickIndex(new h(y),a,o)}catch{m=443636}s==0&&($=-443636),P=l($,Number(t.value.tickSpacing)),T=l(m,Number(t.value.tickSpacing))}else P=v&&v[e.currentPriceTab]&&v[e.currentPriceTab].lower,T=v&&v[e.currentPriceTab]&&v[e.currentPriceTab].upper;try{const A=_.value.calculateDepositRatioFixTokenA(P,T,new Z(t.value.current_sqrt_price));t.value.needReverse?f?(N.value=U(A.ratioA.mul(100).toNumber().toFixed(2),2),M.value=U(A.ratioB.mul(100).toNumber().toFixed(2),2)):(N.value=U(A.ratioB.mul(100).toNumber().toFixed(2),2),M.value=U(A.ratioA.mul(100).toNumber().toFixed(2),2)):(N.value=U(A.ratioA.mul(100).toNumber().toFixed(2),2),M.value=U(A.ratioB.mul(100).toNumber().toFixed(2),2))}catch{}};return j(()=>[t.value,e.minPrice,e.maxPrice,e.fromCoinAmount,e.toCoinAmount,e.isInputTotalAmount],([i,O,l])=>{e.isInputTotalAmount?D():O&&l&&i&&!oe(i)&&(O!=="0"||l!=="0")?R():(N.value="",M.value="")},{immediate:!0,deep:!0}),{fromCoinRatio:N,toCoinRatio:M}}});const bt={class:"deposit-ratio"},_t={class:"deposit-ratio-text"},yt=r("span",null,"Deposit Ratio",-1),ht=r("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-icon-tips1"})],-1),Pt={class:"deposit-ratio-content"},St={class:"coin-ratio"},Ct={class:"coin-a-ratio"},Tt={class:"coin-b-ratio"},$t={class:"ratio-progress"};function It(e,n,u,g,b,d){var _,c;const t=Te;return k(),I("div",bt,[r("div",_t,[yt,E(t,{placement:"bottom","arrow-point-at-center":""},{title:W(()=>[r("span",null,w(e.$t("newAdd.depositRatioTips")),1)]),default:W(()=>[ht]),_:1})]),r("div",Pt,[r("div",St,[r("div",Ct,[r("span",null,w((_=e.fromCoin)==null?void 0:_.symbol),1),J(" "+w(e.fromCoinRatio)+"% ",1)]),r("div",Tt,[r("span",null,w((c=e.toCoin)==null?void 0:c.symbol),1),J(" "+w(e.toCoinRatio)+"% ",1)])]),r("div",$t,[r("div",{class:"from-percent",style:ie({width:e.fromCoinRatio+"%"})},null,4),r("div",{class:"to-percent",style:ie({width:e.toCoinRatio+"%"})},null,4)])])])}const Yt=K(kt,[["render",It]]),wt=G({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,n){const u=C(!1),g=C(null),b=C(0);let d=C(!1);const t=C(20),_=ne(),c=Q(),N=C(!1);le(()=>{}),$e(()=>{clearInterval(g.value)});const M=()=>{d.value=!1,g.value=setInterval(()=>{var a;N.value||b.value<t.value&&(b.value+=1,b.value===t.value&&((a=e==null?void 0:e.poolInfo)!=null&&a.poolAddress&&_.updateCurrentPools(e.poolInfo.poolAddress,c.chainName),b.value=0))},1e3)},R=S(()=>c.slippage),D=()=>{n.emit("clearAll")},i=()=>{d.value=!0,b.value=0,n.emit("clickRefresh"),setTimeout(()=>{d.value=!1,M()},1e3)};j(()=>e.poolInfo,a=>{a&&!g.value&&M()},{immediate:!0});const O=Ie(),l=te();return{refresh:d,clickRefresh:i,isShowSwapSetting:u,countdown:b,autoRefreshTime:t,slippage:R,clearAll:D,checkNullObj:oe,router:O,route:l}}});const pe=e=>(ue("data-v-2e458a1a"),e=e(),ce(),e),Nt={class:"title"},Mt=pe(()=>r("div",{class:"left"},[r("span",null,"Deposit Amounts")],-1)),At=pe(()=>r("svg",{class:"icon","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Ot={key:0,class:"deposit-progress"};function jt(e,n,u,g,b,d){const t=Ae,_=Oe;return k(),I("div",Nt,[Mt,r("div",{class:H(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[r("div",{class:"slippage-icon",onClick:n[0]||(n[0]=c=>e.isShowSwapSetting=!0)},[At,r("span",null,w(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(k(),I("div",Ot,[E(t,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):V("",!0)],2),e.isShowSwapSetting?(k(),z(_,{key:0,onOnClose:n[1]||(n[1]=c=>e.isShowSwapSetting=!1)})):V("",!0)])}const Zt=K(wt,[["render",jt],["__scopeId","data-v-2e458a1a"]]);export{Zt as _,Yt as a,Gt as b,Xt as c,Kt as d};
