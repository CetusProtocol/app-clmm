import{_ as ne}from"./back.6dd0d309.js";import{_ as se}from"./status-block.014ec674.js";import{a as vo,u as ko,l as $,i as W,g as G,h as d,c as z,j as ie,b as ae,f as K,_ as no,t as co}from"./import-icon.9d757206.js";import{a as Io,J as bo,r as p,f as w,h as ho,o as c,i as k,j as n,v as g,x as y,u as r,t as a,l as Q,k as F,S as Eo,p as go,m as wo,M as te,H as le,c as fo,s as P,B as Do,w as eo,T as re,b as de,G as ue,L as M,U as Bo,z as me,A as pe,E as ce,F as fe,D as ve}from"./entry.94f2f2cc.js";/* empty css              */import{_ as qo,a as Fo}from"./icon-arrow_2x.45808d19.js";import{_ as ke}from"./apr-tab.bb99b060.js";import{_ as Ie}from"./apr-tips.20d65ef4.js";/* empty css              */import{p as be}from"./precision.9d58cda5.js";/* empty css              */import"./index.d5c6ae26.js";const he=Io({props:{positionInfo:{type:Object,required:!0,default:()=>({})}},setup(o){const{t:f}=bo();let U=p(!1),J=p(!0);const b=vo(),_=ko(),m=w(()=>_),I=w(()=>{var O,C,T,A,i,L,e,v;if(z(o.positionInfo))return" --";{const D=o.positionInfo.amountA*((C=m.value.RATES[(O=o.positionInfo)==null?void 0:O.token_a.address])==null?void 0:C.price),q=o.positionInfo.amountB*((A=m.value.RATES[(T=o.positionInfo)==null?void 0:T.token_b.address])==null?void 0:A.price);return(L=m.value.RATES[(i=o.positionInfo)==null?void 0:i.token_a.address])!=null&&L.price&&((v=m.value.RATES[(e=o.positionInfo)==null?void 0:e.token_b.address])!=null&&v.price)?D+q:" --"}}),h=w(()=>{var O,C,T,A;return(C=m.value.RATES[(O=o.positionInfo)==null?void 0:O.token_a.name.toUpperCase()])!=null&&C.price&&I.value!=="--"?(o.positionInfo.amountA*((A=m.value.RATES[(T=o.positionInfo)==null?void 0:T.token_a.name.toUpperCase()])==null?void 0:A.price)/I.value*100).toFixed(0):" --"}),j=w(()=>{var O,C,T,A;return(C=m.value.RATES[(O=o.positionInfo)==null?void 0:O.token_b.name.toUpperCase()])!=null&&C.price&&I.value!=="--"?(o.positionInfo.amountB*((A=m.value.RATES[(T=o.positionInfo)==null?void 0:T.token_b.name.toUpperCase()])==null?void 0:A.price)/I.value*100).toFixed(0):" --"}),E=w(()=>m.value.allTokenObj&&o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.address&&m.value.allTokenObj[o.positionInfo.token_a.address]&&m.value.allTokenObj[o.positionInfo.token_a.address].logoURI),V=w(()=>m.value.allTokenObj&&o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.address&&m.value.allTokenObj[o.positionInfo.token_b.address]&&m.value.allTokenObj[o.positionInfo.token_b.address].logoURI);return{fromPercent:j,toPercent:h,amountUSD:I,showNum:$,t:f,importIcon:W,indexStore:b,rateChange:J,decimalFormat:G,fromCoinUrl:E,toCoinUrl:V,pools:m,addCommom:d,isPc:U}}});const ge=o=>(go("data-v-62011ebe"),o=o(),wo(),o),we={key:0,class:"position-card"},_e={class:"coin-pair"},ye=["src"],$e=["src"],Ce={class:"fee"},Te={class:"right"},Ae={key:0,class:"status"},Se={class:"min-and-max"},Re={key:0},Oe={class:"text"},Ne={key:0,src:qo,alt:""},Pe={key:1,src:Fo,alt:""},Ue={class:"text"},je={key:1},Le={class:"text"},Be={key:0,src:qo,alt:""},Ee={key:1,src:Fo,alt:""},De={class:"text"},qe=ge(()=>n("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Fe=[qe],We={class:"liquidity"},He={class:"label"},Me={class:"value"},ze={class:"token-num"},Ge={class:"item"},Je=["src"],Ke={class:"rate"},Qe={class:"item"},Xe=["src"],Ye={class:"rate"};function Ze(o,f,U,J,b,_){const m=Eo,I=se;return o.positionInfo?(c(),k("div",we,[n("div",{class:Q(["left",`position-status-${o.positionInfo&&o.positionInfo.currentStatus&&o.positionInfo.currentStatus.toLowerCase()}`])},[g(m,{class:"left-skeleton",loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:y(()=>[n("div",_e,[n("div",null,[n("img",{src:o.fromCoinUrl||("importIcon"in o?o.importIcon:r(W))(`/image/coins/${o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,ye),n("img",{src:o.toCoinUrl||("importIcon"in o?o.importIcon:r(W))(`/image/coins/${o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,$e)]),n("span",null,a(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" - "+a(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)]),n("div",Ce,a(o.$t("common.fee"))+" "+a(o.positionInfo.fee*100)+"%",1)]),_:1},8,["loading"])],2),n("div",Te,[o.pools.currentPositionLoading?F("",!0):(c(),k("div",Ae,[g(I,{"current-status":o.positionInfo.currentStatus||"","block-name":"detail"},null,8,["current-status"])])),g(m,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:y(()=>[n("div",Se,[o.rateChange?(c(),k("div",Re,[n("div",Oe,a(("addCommom"in o?o.addCommom:r(d))(("decimalFormat"in o?o.decimalFormat:r(G))(String(o.positionInfo.minPrice),6))),1),o.indexStore.theme=="default"?(c(),k("img",Ne)):(c(),k("img",Pe)),n("div",Ue,a(o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("∞")>-1||o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in o?o.addCommom:r(d))(("decimalFormat"in o?o.decimalFormat:r(G))(String(o.positionInfo.maxPrice),6)))+" "+a(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol)+" per "+a(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)])):(c(),k("div",je,[n("div",Le,a(("addCommom"in o?o.addCommom:r(d))(("decimalFormat"in o?o.decimalFormat:r(G))(String(1/Number(o.positionInfo.maxPrice)),6))),1),o.indexStore.theme=="default"?(c(),k("img",Be)):(c(),k("img",Ee)),n("div",De,a(o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("∞")>-1||o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in o?o.addCommom:r(d))(("decimalFormat"in o?o.decimalFormat:r(G))(String(1/Number(o.positionInfo.minPrice)),6),6))+" "+a(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" per "+a(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)])),(c(),k("svg",{class:"icon-change","aria-hidden":"true",onClick:f[0]||(f[0]=h=>o.rateChange=!o.rateChange)},Fe))])]),_:1},8,["loading"]),n("div",We,[g(m,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:y(()=>[n("div",He,a(o.$t("common.liquidity")),1),n("div",Me," $"+a(o.amountUSD=="--"?"--":Number(o.amountUSD)==0?0:Number(o.amountUSD)<.01?"<0.01":("addCommom"in o?o.addCommom:r(d))(o.amountUSD,2)),1)]),_:1},8,["loading"])]),n("div",ze,[g(m,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:y(()=>[n("div",Ge,[n("div",null,[n("img",{src:o.fromCoinUrl||("importIcon"in o?o.importIcon:r(W))(`/image/coins/${o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,Je),n("p",null,a(("showNum"in o?o.showNum:r($))(o.positionInfo&&o.positionInfo.amountA,o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals)),1),n("span",null,a(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" "+a(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.labels&&o.positionInfo.token_a.labels[0]?`(${o.positionInfo.token_a.labels[0]})`:""),1)]),n("div",Ke,a(("addCommom"in o?o.addCommom:r(d))(o.positionInfo.fromPercent,0))+"% ",1)]),n("div",Qe,[n("div",null,[n("img",{src:o.toCoinUrl||("importIcon"in o?o.importIcon:r(W))(`/image/coins/${o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,Xe),n("p",null,a(("showNum"in o?o.showNum:r($))(o.positionInfo&&o.positionInfo.amountB,o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals)),1),n("span",null,a(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_b.symbol)+" "+a(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.labels&&o.positionInfo.token_b.labels[0]?`(${o.positionInfo.token_b.labels[0]})`:""),1)]),n("div",Ye,a(("addCommom"in o?o.addCommom:r(d))(o.positionInfo.toPercent,0))+"%",1)])]),_:1},8,["loading"])])])])):F("",!0)}const Ve=ho(he,[["render",Ze],["__scopeId","data-v-62011ebe"]]),xe=Io({components:{Modal:te},props:{positionInfo:{type:Object,required:!0},isLoading:{type:Boolean,required:!0}},setup(o,f){const{t:U,locale:J}=bo(),b=vo(),{copy:_}=b,m=()=>{f.emit("toClaim")},I=ko(),h=w(()=>I),j=w(()=>h.value.tokensObj&&o.positionInfo.token_a.address&&h.value.tokensObj[o.positionInfo.token_a.address]&&h.value.tokensObj[o.positionInfo.token_a.address].logoURI),E=w(()=>h.value.tokensObj&&o.positionInfo.token_b.address&&h.value.tokensObj[o.positionInfo.token_b.address]&&h.value.tokensObj[o.positionInfo.token_b.address].logoURI);return{showNum:$,fromCoinUrl:j,toCoinUrl:E,toClaim:m,t:U,addCommom:d,importIcon:W,store:b,copy:_}}});const on=o=>(go("data-v-39d55de9"),o=o(),wo(),o),en=on(()=>n("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),nn={class:"claim-container"},sn={key:0,class:"pc-claim"},an=["src"],tn={key:1,class:"pc-claim"},ln=["src"];function rn(o,f,U,J,b,_){const m=Do,I=le("Modal");return c(),fo(I,{visible:!0,class:"claim-fees",centered:"",closable:!0,title:o.$t("modal.claimFees"),width:"400px",footer:null,onCancel:f[0]||(f[0]=h=>o.$emit("onClose"))},{closeIcon:y(()=>[en]),default:y(()=>[n("div",nn,[o.positionInfo&&o.positionInfo.token_a.symbol?(c(),k("div",sn,[n("img",{src:o.fromCoinUrl||("importIcon"in o?o.importIcon:r(W))(`/image/coins/${o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,an),n("span",null,a(("showNum"in o?o.showNum:r($))(o.positionInfo.feeOwedA,o.positionInfo.token_a.decimals))+" "+a(o.positionInfo.token_a.symbol),1)])):F("",!0),o.positionInfo&&o.positionInfo.token_b.symbol?(c(),k("div",tn,[n("img",{src:o.toCoinUrl||("importIcon"in o?o.importIcon:r(W))(`/image/coins/${o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,ln),n("span",null,a(("showNum"in o?o.showNum:r($))(o.positionInfo.feeOwedB,o.positionInfo.token_b.decimals))+" "+a(o.positionInfo.token_b.symbol),1)])):F("",!0)]),g(m,{class:"big-btn claim-btn",disabled:o.isLoading||("addCommom"in o?o.addCommom:r(d))(o.positionInfo.feeOwedA,o.positionInfo.token_a.decimals)==0&&("addCommom"in o?o.addCommom:r(d))(o.positionInfo.feeOwedB,o.positionInfo.token_b.decimals)==0||o.positionInfo.poolInfo.is_pause,onClick:o.toClaim},{default:y(()=>[P(a(o.$t("common.claim")),1)]),_:1},8,["disabled","onClick"])]),_:1},8,["title"])}const dn=ho(xe,[["render",rn],["__scopeId","data-v-39d55de9"]]),un=Io({setup(){const o=p(!1),f=p(!1),U=p(!1),J=p(!0),b=vo(),_=w(()=>b),m=ko(),I=p(""),h=p(""),j=p(""),E=p(30),V=p("Estimated APR"),O=p([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),C=p(!0),T=s=>{E.value=s.num},A=()=>{C.value=!C.value},i=w(()=>m),L=w(()=>{var u,l,R,N;const s=e.value.feeOwedA*((u=i.value.RATES[e.value&&e.value.token_a&&e.value.token_a.address])==null?void 0:u.price),t=e.value.feeOwedB*((l=i.value.RATES[e.value&&e.value.token_b&&e.value.token_b.address])==null?void 0:l.price);return(R=i.value.RATES[e.value&&e.value.token_a&&e.value.token_a.address])!=null&&R.price&&((N=i.value.RATES[e.value&&e.value.token_b&&e.value.token_b.address])!=null&&N.price)?s+t:" --"}),e=p({}),v=ue();function D(){v.push(`/remove-liquidity?collect=${e.value.collectionName}&&token=${e.value.tokenName}&&address=${e.value.pool}&pos=${e.value.pos_object_id}`)}function q(){v.push(`/increase-liquidity?collect=${e.value.collectionName}&&token=${e.value.tokenName}&&address=${e.value.pool}&pos=${e.value.pos_object_id}`)}const so=()=>{io(),U.value=!0,setTimeout(()=>{U.value=!1},1e3)},S=w(()=>_.value.chainName?ae(_.value.chainName):{}),io=async()=>{i.value.setCurrentPositionLoading(!0);const s=v.currentRoute.value.query.token||"",t=v.currentRoute.value.query.collect||"",u=v.currentRoute.value.query.address||"",l=v.currentRoute.value.query.pos||"";h.value=u,_.value.chainName==="Aptos"?s&&t&&u&&(I.value=t,j.value=s,i.value.setCurrentPositionInfo(h.value,I.value,j.value,_.value.chainName)):s&&u&&l&&(I.value=t,j.value=s,i.value.setCurrentPositionInfo(u,I.value,j.value,_.value.chainName,l))},_o=w(()=>{var t,u,l;const s=((l=(u=(t=v==null?void 0:v.currentRoute)==null?void 0:t.value)==null?void 0:u.query)==null?void 0:l.address)||"";return s&&i.value.addressLpTokens&&!z(i.value.addressLpTokens)&&i.value.addressLpTokens[s]?i.value.addressLpTokens[s]:null});eo(()=>_o.value,(s,t)=>{s&&!z(s)&&s.current_sqrt_price!==(t==null?void 0:t.current_sqrt_price)&&io()},{immediate:!0});const yo=p(""),$o=p(""),Co=p(""),Wo=(s,t)=>s&&t?K(be.plus(co(s),co(t)),2)+"%":s,To=s=>{let t=0;return s&&s.forEach(u=>{t+=co(String(u))}),String(K(String(t),2))},Ao=p(""),So=p("");eo(()=>[_.value.newTopPoolsObj,e.value,E],([s,t])=>{if(!z(s)&&!z(t)){const u=t.poolAddress,l=s[u];yo.value=l&&l.apr_7day,So.value=To(l&&l.rewarder_apr),Ao.value=Wo(l&&l.apr_7day,l&&To(l.rewarder_apr)),$o.value=l&&K(l.tvl_in_usd,2),Co.value=l&&K(l.vol_in_usd_24h,2)}},{immediate:!0,deep:!0});const Ho=ie(),X=w(()=>Ho),{t:lo}=bo(),{$notify:Ro}=re(),Mo=async()=>{o.value=!0,f.value=!1,b.setTransactionDesc(lo("newAdd.claimWaitingText",{from:d(e.value.feeOwedA,e.value.token_a.decimals)==0?"":`${$(e.value.feeOwedA,e.value.token_a.decimals)} ${e.value.token_a.symbol}`,and:d(e.value.feeOwedA,e.value.token_a.decimals)==0||d(e.value.feeOwedB,e.value.token_b.decimals)==0?"":"and",to:d(e.value.feeOwedB,e.value.token_b.decimals)==0?"":`${$(e.value.feeOwedB,e.value.token_b.decimals)} ${e.value.token_b.symbol}`})),b.setIsShowWaiting(!0);let s;const t={pool:e.value.poolInfo,position:e.value};try{const u=await S.value.getCollectFeeTransactionPayload(t);if(_.value.chainName==="Aptos")s=await X.value.currentWallet.signAndSubmitTransaction(u);else{const l=await X.value.currentWallet.signAndExecuteTransaction(u);s=S.value.handleTx(l)}if(s){b.setTransactionTxid(s.hash),b.setIsShowWaiting(!1),b.setIsShowSuccess(!0);const l={title:"Claim",desc:"",hash:s.hash,tit:"Fees Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:`${e.value.token_a.symbol}`,numa:d(e.value.feeOwedA,e.value.token_a.decimals)==0?"":`+ ${$(e.value.feeOwedA,e.value.token_a.decimals)}`,logoa:d(e.value.feeOwedA,e.value.token_a.decimals)==0?"":i.value.tokensObj&&e.value&&e.value.token_a.address&&i.value.tokensObj[e.value.token_a.address]&&i.value.tokensObj[e.value.token_a.address].logoURI,tokenb:`${e.value.token_b.symbol}`,numb:d(e.value.feeOwedB,e.value.token_b.decimals)==0?"":`+ ${$(e.value.feeOwedB,e.value.token_b.decimals)}`,logob:d(e.value.feeOwedB,e.value.token_b.decimals)==0?"":i.value.tokensObj&&e.value&&e.value.token_b.address&&i.value.tokensObj[e.value.token_b.address]&&i.value.tokensObj[e.value.token_b.address].logoURI},text:`Claim ${d(e.value.feeOwedA,e.value.token_a.decimals)==0?"":`${$(e.value.feeOwedA,e.value.token_a.decimals)} ${e.value.token_a.symbol}`}  
              ${d(e.value.feeOwedA,e.value.token_a.decimals)==0||d(e.value.feeOwedB,e.value.token_b.decimals)==0?"":"and"} ${d(e.value.feeOwedB,e.value.token_b.decimals)==0?"":`${$(e.value.feeOwedB,e.value.token_b.decimals)} ${e.value.token_b.symbol}`}

            `};S.value.showTransitionPending(l),await S.value.watchTransaction(l)&&setTimeout(()=>{io()},1e3)}else b.setIsShowWaiting(!1),b.setIsShowRejected(!0),Ro.error({icon:M("svg",{class:{icon:!0},"aria-hidden":!0},[M("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),duration:4.5,message:M("div",{class:"notification-title"},[M("span",{innerHTML:Bo.global.t("newAdd.claimFailed")},null)]),description:lo("newAdd.somethingWrong"),class:"ant-notification-copy ant-notification-error"});o.value=!1}catch{o.value=!1,b.setIsShowWaiting(!1),b.setIsShowRejected(!0),Ro.error({icon:M("svg",{class:{icon:!0},"aria-hidden":!0},[M("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:M("div",{class:"notification-title"},[M("span",{innerHTML:Bo.global.t("newAdd.claimFailed")},null)]),duration:4.5,description:lo("newAdd.somethingWrong"),class:"ant-notification-copy ant-notification-error"})}},ro=p(""),uo=p(""),zo=()=>{ro.value=e.value.token_b,uo.value=e.value.token_a},Go=async(s=null)=>{const t=s||e.value,u=i.value.addressLpTokens[v.currentRoute.value.query.address],l=await S.value.getTickDataByIndex(u.ticks_handle,Number(t.tick_lower_index)),R=await S.value.getTickDataByIndex(u.ticks_handle,Number(t.tick_upper_index));let N={};Oo.value==="Aptos"?N=await S.value.getPosRewardersAmount({poolAddress:v.currentRoute.value.query.address,positionName:v.currentRoute.value.query.token,tickLowerData:l,tickUpperData:R}):N=await S.value.getPosRewardersAmount({poolAddress:v.currentRoute.value.query.address,positionName:v.currentRoute.value.query.token,tickLowerData:l,tickUpperData:R,pos:v.currentRoute.value.query.pos});const Y=[];let H=0;N.forEach((B,x)=>{if(t.poolInfo[`rewarder_display${x+1}`]){const oo=i.value.newTokenObj[B.coin_address].decimals,xo=i.value.newTokenObj[B.coin_address],oe=Number(B.amount_owed.toString())>99999999999999?0:Number(B.amount_owed.toString()),jo=Number(oe/Math.pow(10,oo)),ee=i.value.RATES[B.coin_address].price,Lo=jo*ee;H+=Lo,Y.push({...B,...xo,amount:K(jo,oo),amountUSD:K(Lo,2)})}}),ao.value=Y,mo.value=H,No.value=Number(K(H,2))};eo(()=>i.value.currentPositionInfo,s=>{s&&(e.value=s,ro.value=s==null?void 0:s.token_a,uo.value=s==null?void 0:s.token_b)},{immediate:!0});const Jo=w(()=>i.value.tokensObj&&e&&e.value.token_a&&e.value.token_a.address&&i.value.tokensObj[e.value.token_a.address]&&i.value.tokensObj[e.value.token_a.address].logoURI),Ko=w(()=>i.value.tokensObj&&e&&e.value.token_b&&e.value.token_b.address&&i.value.tokensObj[e.value.token_b.address]&&i.value.tokensObj[e.value.token_b.address].logoURI),Oo=w(()=>_.value.chainName),Qo=w(()=>no[Oo.value]),mo=p(0),ao=p([]),No=p(0);de(()=>{mo.value=0,ao.value=[],No.value=0});const{setIsShowSuccess:Xo,setIsShowRejected:Po,setIsShowWaiting:po,setTransactionDesc:cs,setTransactionTxid:Yo}=b,to=p(!1),Zo=async()=>{to.value=!0;const s=ao.value;let t={coinTypeA:e.value.poolInfo.coinTypeA,coinTypeB:e.value.poolInfo.coinTypeB,coinTypeC:"",coinTypeD:"",coinTypeE:"",pool_address:e.value.poolAddress,pos_index:e.value.index,rewarder_nums:s.length};t.coinTypeC=s[0]?s[0].coin_address:"",t.coinTypeD=s[1]?s[1].coin_address:"",t.coinTypeE=s[2]?s[2].coin_address:"";try{const u=await S.value.getCollectRewarderTransactionPayload(t);let l;if(_.value.chainName==="Aptos")l=await X.value.currentWallet.signAndSubmitTransaction(u);else{const R=await X.value.currentWallet.signAndExecuteTransaction(u);l=S.value.handleTx(R)}if(l&&l.hash){Yo(l.hash),po(!1),Xo(!0);const R=s[0].amount+s[0].symbol,N=t.coinTypeD?" and "+s[1].amount+s[1].symbol:"",Y=t.coinTypeE?" and "+s[2].amount+s[2].symbol:"",H={title:"Claim",desc:"",hash:l.hash,tit:"Bonus Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:s[0].symbol,numa:`+ ${Number(s[0].amount)}`,logoa:i.value.tokensObj&&s[0]&&s[0].address&&i.value.tokensObj[s[0].address]&&i.value.tokensObj[s[0].address].logoURI,tokenb:t.coinTypeD?s[1].symbol:"",numb:t.coinTypeD?`+ ${Number(s[1].amount)}`:"",logob:t.coinTypeD?i.value.tokensObj&&s[1]&&s[1].address&&i.value.tokensObj[s[1].address]&&i.value.tokensObj[s[1].address].logoURI:"",tokenc:t.coinTypeE?s[2].symbol:"",numc:t.coinTypeE?`+ ${Number(s[2].amount)}`:"",logoc:t.coinTypeE?i.value.tokensObj&&s[2]&&s[2].address&&i.value.tokensObj[s[2].address]&&i.value.tokensObj[s[2].address].logoURI:""},text:R+N+Y};S.value.showTransitionPending(H),await S.value.watchTransaction(H)&&setTimeout(()=>{io(),S.value.getAccount(X.value.address)},3e3)}else po(!1),Po(!0);to.value=!1}catch{to.value=!1,po(!1),Po(!0)}},Uo=p([]);eo(()=>[e.value,i.value.addressLpTokens,i.value.newTokenObj,_.value.newTopPoolsObj],([s,t,u,l])=>{if(!z(s)&&!z(t)&&!z(u)){const R=s.address,N=t[R];let Y=N.rewarder_infos||[];const H=l[R],B=[];Y.forEach((x,oo)=>{N[`rewarder_display${oo+1}`]&&B.push({...x,symbol:u[x.coinAddress].symbol,rewarderApr:H.rewarder_apr[oo],logoUrl:u[x.coinAddress].logoURI})}),Uo.value=B,Go(s)}},{immediate:!0,deep:!0});const Vo=p();return eo(()=>i.value.RATES,s=>{s&&(Vo.value=s)},{immediate:!0}),{rewarderArr:Uo,feeOwed:L,config:Qo,showNum:$,index:_,fromCoinUrl:Jo,toCoinUrl:Ko,toggle:zo,fromCoin:ro,toCoin:uo,apr:yo,liquidityTvl:$o,vol24:Co,addCommom:d,decimalFormat:G,wallet:X,isLoading:o,toClaim:Mo,pools:i,positionInfo:e,importIcon:W,router:v,toRemove:D,toIncrease:q,isShowClaim:f,direct:J,refresh:U,clickRefresh:so,pendingRewarderArr:ao,pendingRewarder:mo,toClaimRewards:Zo,rewarderLoading:to,aprRewardsParameter:E,aprRewardsDateList:O,aprTab:T,reviseValue:A,label:C,aprTitle:V,aprTotal:Ao,rewardAprList:So,currentPoolInfo:_o}}});const Z=o=>(go("data-v-28100070"),o=o(),wo(),o),mn={key:0,class:"position-detail-container"},pn={class:"position-detail-header"},cn={class:"back-and-refresh"},fn=Z(()=>n("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),vn=[fn],kn={class:"action-position"},In={class:"coin-pair"},bn=Z(()=>n("use",{"xlink:href":"#icon-icon-copy"},null,-1)),hn=[bn],gn=["href"],wn=Z(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-jump"})],-1)),_n=[wn],yn=["href"],$n=Z(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-jump"})],-1)),Cn=[$n],Tn={class:"acton-btn-box"},An=Z(()=>n("svg",{"aria-hidden":"true",class:"action-icon"},[n("use",{"xlink:href":"#icon-icon-Reduction"})],-1)),Sn=Z(()=>n("svg",{"aria-hidden":"true",class:"action-icon"},[n("use",{"xlink:href":"#icon-icon-add"})],-1)),Rn={class:"position-content"},On={class:"pedding-fee"},Nn={class:"pedding-fee"},Pn={class:"top"},Un={class:"left"},jn={class:"bottom"},Ln=["src"],Bn=["src"],En={key:0,class:"pedding-fee"},Dn={class:"top"},qn={class:"left"},Fn={class:"bottom"},Wn=["src"],Hn={key:1,class:"poolInfo"},Mn={class:"pool-info-title"},zn={class:"currentPrice"},Gn={key:0,class:"coin"},Jn={key:1,class:"coin"},Kn={class:"toggle"},Qn=["src"],Xn=["src"],Yn={key:0},Zn={class:"info-block-container"},Vn={class:"info-block"},xn={class:"leabl"},os={class:"text"},es={class:"apr-hover-content"},ns={class:"info-block"},ss={class:"leabl"},is={class:"text"},as={class:"info-block"},ts={class:"leabl"},ls={class:"text"},rs={class:"info-block"},ds={class:"leabl"},us={class:"text"},ms={class:"loading-global"};function ps(o,f,U,J,b,_){var T,A;const m=ne,I=Do,h=Eo,j=Ve,E=ke,V=Ie,O=dn,C=ce;return o.positionInfo?(c(),k("div",mn,[n("div",pn,[n("div",cn,[g(m),(c(),k("svg",{"aria-hidden":"true",class:Q(o.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:f[0]||(f[0]=(...i)=>o.clickRefresh&&o.clickRefresh(...i))},vn,2))]),n("div",kn,[g(h,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:y(()=>{var i,L,e,v,D,q;return[n("div",In,[P(a(o.positionInfo.tokenName)+" ",1),(c(),k("svg",{class:"icon","aria-hidden":"true",onClick:f[1]||(f[1]=so=>o.index.copy(o.positionInfo.nftHash))},hn)),o.index&&o.index.chainName==="Aptos"?(c(),k("a",{key:0,href:`${("config"in o?o.config:r(no)).explorerUrl}/token/${o.positionInfo.nftHash}/0?network=${("config"in o?o.config:r(no)).network}`,target:"_blank"},_n,8,gn)):(c(),k("a",{key:1,href:`${("config"in o?o.config:r(no)).explorerUrl}/object/${o.positionInfo.nftHash}?network=${("config"in o?o.config:r(no)).network}`,target:"_blank"},Cn,8,yn))]),n("div",Tn,[g(I,{class:Q(["remove-liquidity action-btn",(L=(i=o.positionInfo)==null?void 0:i.poolInfo)!=null&&L.is_pause?"text-default":""]),disabled:(v=(e=o.positionInfo)==null?void 0:e.poolInfo)==null?void 0:v.is_pause,onClick:o.toRemove},{default:y(()=>[An,P(" "+a(o.$t("button.remove")),1)]),_:1},8,["class","disabled","onClick"]),g(I,{class:"increase-liquidity action-btn",disabled:(q=(D=o.positionInfo)==null?void 0:D.poolInfo)==null?void 0:q.is_pause,onClick:o.toIncrease},{default:y(()=>[Sn,P(" "+a(o.$t("button.increase")),1)]),_:1},8,["disabled","onClick"])])]}),_:1},8,["loading"])])]),n("div",Rn,[g(j,{"position-info":o.positionInfo},null,8,["position-info"])]),n("div",On,[(c(),fo(E,{key:0,"apr-title":o.aprTitle,"apr-rewards-date-list":o.aprRewardsDateList,"apr-rewards-parameter":o.aprRewardsParameter,"name-tab":"position","from-coin":o.fromCoin,"to-coin":o.toCoin,"pool-info":o.positionInfo.poolInfo,"min-price":o.positionInfo.minPrice,"max-price":o.positionInfo.maxPrice&&String(o.positionInfo.maxPrice).indexOf("+")>-1?"∞":o.positionInfo.maxPrice,onAprTab:o.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"]))]),n("div",Nn,[n("div",Pn,[n("div",Un,[n("span",null,a(o.$t("newAdd.pendingFees")),1),n("p",null," $"+a(o.pools.currentPositionLoading||o.feeOwed=="--"?"--":Number(o.feeOwed)==0?0:Number(o.feeOwed)<.01?"<0.01":("addCommom"in o?o.addCommom:r(d))(o.feeOwed,2)),1)]),g(I,{class:"increase-liquidity action-btn",disabled:o.isLoading||!o.wallet.connected||!(Number(o.positionInfo&&o.positionInfo.feeOwedA)||Number(o.positionInfo&&o.positionInfo.feeOwedB))||o.positionInfo.poolInfo.is_pause,onClick:f[2]||(f[2]=i=>o.isShowClaim=!0)},{default:y(()=>[P(a(o.$t("common.claim")),1)]),_:1},8,["disabled"])]),g(h,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:y(()=>[n("div",jn,[n("div",null,[n("img",{src:o.fromCoinUrl},null,8,Ln),n("p",null,a(("showNum"in o?o.showNum:r($))(o.positionInfo.feeOwedA,o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals)),1),n("span",null,a(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)]),n("div",null,[n("img",{src:o.toCoinUrl},null,8,Bn),n("p",null,a(("showNum"in o?o.showNum:r($))(o.positionInfo.feeOwedB,o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals)),1),n("span",null,a(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)])])]),_:1},8,["loading"])]),o.positionInfo&&o.positionInfo.poolInfo&&o.positionInfo.poolInfo.rewarder_infos&&o.positionInfo.poolInfo.rewarder_infos.length>0&&o.positionInfo.poolInfo.is_display_rewarder&&o.pendingRewarderArr&&o.pendingRewarderArr.length>0?(c(),k("div",En,[n("div",Dn,[n("div",qn,[n("span",null,a(o.$t("newAdd.pendingRewards")),1),n("p",null," $"+a(o.pendingRewarder=="--"?"--":Number(o.pendingRewarder)==0?0:Number(o.pendingRewarder)<.01?"<0.01":("addCommom"in o?o.addCommom:r(d))(o.pendingRewarder,2)),1)]),g(I,{class:"increase-liquidity action-btn",disabled:o.rewarderLoading||!o.wallet.connected||o.pendingRewarder<=0||((A=(T=o.positionInfo)==null?void 0:T.poolInfo)==null?void 0:A.is_pause),loading:o.rewarderLoading,onClick:o.toClaimRewards},{default:y(()=>[P(a(o.$t("common.claim")),1)]),_:1},8,["disabled","loading","onClick"])]),g(h,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:y(()=>[n("div",Fn,[(c(!0),k(fe,null,ve(o.pendingRewarderArr,i=>(c(),k("div",{key:i,class:Q(Number(i==null?void 0:i.amount)==0?"reward-none":"")},[n("img",{src:i.logoURI,alt:""},null,8,Wn),n("p",null,a(i.amount),1),n("span",null,a(i.symbol),1)],2))),128))])]),_:1},8,["loading"])])):F("",!0),o.positionInfo&&o.positionInfo.poolInfo?(c(),k("div",Hn,[n("div",Mn,a(o.$t("newAdd.poolInfo")),1),n("div",zn,[g(h,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:y(()=>{var i,L,e,v,D,q;return[o.direct?(c(),k("div",Gn,[n("span",null,a(o.$t("common.currentPrice")),1),P(" "+a(("addCommom"in o?o.addCommom:r(d))(("decimalFormat"in o?o.decimalFormat:r(G))(o.positionInfo.currentPrice,6),6))+" "+a((i=o.toCoin)==null?void 0:i.symbol)+" per "+a((L=o.fromCoin)==null?void 0:L.symbol),1)])):(c(),k("div",Jn,[n("span",null,a(o.$t("common.currentPrice")),1),P(" "+a(("addCommom"in o?o.addCommom:r(d))(("decimalFormat"in o?o.decimalFormat:r(G))(1/o.positionInfo.currentPrice,6),6))+" "+a((e=o.fromCoin)==null?void 0:e.symbol)+" per "+a((v=o.toCoin)==null?void 0:v.symbol),1)])),n("div",Kn,[n("div",{class:Q(o.direct?"item active-item":"item"),onClick:f[3]||(f[3]=so=>o.direct=!0)},[n("img",{src:o.fromCoinUrl,alt:""},null,8,Qn),P(" "+a(o.positionInfo&&o.positionInfo.token_a&&((D=o.positionInfo.token_a)==null?void 0:D.symbol)),1)],2),n("div",{class:Q(o.direct?"item ":"item active-item"),onClick:f[4]||(f[4]=so=>o.direct=!1)},[n("img",{src:o.toCoinUrl,alt:""},null,8,Xn),P(" "+a(o.positionInfo&&o.positionInfo.token_b&&((q=o.positionInfo.token_b)==null?void 0:q.symbol)),1)],2)])]}),_:1},8,["loading"])]),g(h,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:y(()=>[o.aprTotal&&o.liquidityTvl&&o.vol24?(c(),k("div",Yn,[n("div",Zn,[n("div",Vn,[n("div",xn,a(o.$t("common.apr")),1),n("div",os,[P(a(o.aprTotal?("addCommom"in o?o.addCommom:r(d))(o.aprTotal.substring(0,o.aprTotal.length-1),2):0)+"% ",1),n("div",es,[g(V,{class:Q(o.isShow?"showHover apr-hover-con":"noHover apr-hover-con"),"l-item":{apr:o.apr,rewarder_apr:o.rewardAprList,aprTotal:o.aprTotal,is_display_rewarder:o.positionInfo.poolInfo.is_display_rewarder},"rewarder-info":o.rewarderArr},null,8,["class","l-item","rewarder-info"])])])]),n("div",ns,[n("div",ss,a(o.$t("common.liquidity")),1),n("div",is,"$"+a(("addCommom"in o?o.addCommom:r(d))(o.liquidityTvl,2)),1)]),n("div",as,[n("div",ts,a(o.$t("common.volume24h")),1),n("div",ls,"$"+a(("addCommom"in o?o.addCommom:r(d))(o.vol24,2)),1)]),n("div",rs,[n("div",ds,a(o.$t("newAdd.tickSpacing")),1),n("div",us,a(o.positionInfo.tickSpacing),1)])])])):F("",!0)]),_:1},8,["loading"])])):F("",!0),o.isShowClaim?(c(),fo(O,{key:2,"is-loading":o.isLoading,"position-info":o.positionInfo,onOnClose:f[5]||(f[5]=i=>o.isShowClaim=!1),onToClaim:o.toClaim},null,8,["is-loading","position-info","onToClaim"])):F("",!0),me(n("div",ms,[g(C)],512),[[pe,o.pools.currentPositionLoading]])])):F("",!0)}const Ts=ho(un,[["render",ps],["__scopeId","data-v-28100070"]]);export{Ts as default};
