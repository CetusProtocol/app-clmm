import{_ as qo}from"./back.3db1159e.js";import{_ as Bo}from"./coin-pair-name.d1a5657f.js";import{_ as Po}from"./status-block.d43c428d.js";import{_ as Lo,a as Uo}from"./swap-setting.d4540d56.js";import{a as Do,N as Oo,r as l,b as jo,e as q,O as Vo,H as Eo,f6 as Mo,A as Wo,w as j,x as Fo,fj as Xo,ah as to,J as b,i as zo,X as fo,fk as Ho,T as ao,C as Io,m as ho,Z as V,f as Jo,o as g,h as N,q as $,j as e,t as n,v as lo,c as bo,k as Q,a3 as ko,a4 as _o,z as S,s as Zo,E as Go,F as Ko,I as Qo,fl as Yo,B as xo,p as oe,l as ee,a6 as ne}from"./entry.a0707905.js";import{p as ro}from"./precision.1cd464a0.js";const se=Do({setup(){const{t:o,locale:r}=Oo();let uo=l(!1),B=l(!1);const E=l(!1),mo=()=>{G(),E.value=!0,setTimeout(()=>{E.value=!1},1e3)},x=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],oo=jo(),M=l(""),W=l(""),F=l(""),X=l(""),z=l(""),H=l(""),J=l(""),a=l(""),i=q(()=>oo),u=l({}),m=l({}),s=l(i.value.currentPositionInfo||{}),go=Vo(),Z=q(()=>go),P=Eo();Mo(()=>{Z.value.connected||P.push("/position")});const C=Wo(),G=async()=>{i.value.setCurrentPositionLoading(!0);const t=P.currentRoute.value.query.token||"",d=P.currentRoute.value.query.collect||"";t&&d&&(M.value=d,W.value=P.currentRoute.value.query.address,F.value=t,i.value.setCurrentPositionInfo(W.value,M.value,F.value),s.value=i.value.currentPositionInfo)};j(()=>i.value.addressLpTokens,t=>{V(t)||G()},{immediate:!0}),j(()=>i.value.currentPositionInfo,t=>{t&&(s.value=i.value.currentPositionInfo,u.value=s.value.token_a,m.value=s.value.token_b,io({value:k.value/100}))});const k=l(50),c=l(0),p=l(0),eo=l(0),no=Fo(),yo=q(()=>no),so=q(()=>no.slippage);j(k,Xo((t,d)=>{Number(t)>100?k.value=100:t&&s.value&&(k.value=t,io({value:k.value/100}))},300)),j(so,t=>{t&&s.value&&io({value:k.value/100})});const io=t=>{const d=s.value.token_a.decimals,_=s.value.token_b.decimals,y=s.value.tick_lower_index,w=s.value.tick_upper_index,v=fo.tickIndexToSqrtPriceX64(y),f=fo.tickIndexToSqrtPriceX64(w);eo.value=s.value.liquidity*Number(t.value);const T=Ho.getCoinAmountFromLiquidity(new ao(eo.value),new ao(s.value.current_sqrt_price),v,f,!0),I=Number(T.coinA.toString())/Math.pow(10,d),A=Number(T.coinB.toString())/Math.pow(10,_);c.value=I,p.value=A;const h=i.value.RATES[s.value.token_a.address].price,L=i.value.RATES[s.value.token_b.address].price;X.value=Number(c.value*h)<.01?"<0.01":b(c.value*h,2),z.value=Number(p.value*L)<.01?"<0.01":b(p.value*L,2);const U=ro.minus(Number(s.value.amountA),Number(c.value))*h;H.value=Number(U)<.01?"<0.01":b(U,2);const D=ro.minus(Number(s.value.amountB),Number(p.value))*L;J.value=Number(D)<.01?"<0.01":b(D,2);const O=Number(Io(U,2))+Number(Io(D,2));a.value=Number(O)<.01?"<0.01":b(O,2)},{setIsShowSuccess:wo,setIsShowRejected:co,setIsShowWaiting:K,setTransactionDesc:Ao,setTransactionTxid:po,setPositiomNum:an,setTransactionDescText:No}=no,$o=async()=>{var d,_,y,w;B.value=!0,po(""),Ao(o("tips.removeLiquidiyText",{from:b(c.value,u.value.decimals)==0?"":`${to(c.value,u.value.decimals)} ${u.value.symbol}`,and:b(c.value,u.value.decimals)==0||b(p.value,m.value.decimals)==0?"":"and",to:b(p.value,m.value.decimals)==0?"":`${to(p.value,m.value.decimals)} ${m.value.symbol}`})),K(!0);const t=R.value&&R.value.length>0?o("modal.removeLiquidityText1"):o("modal.removeLiquidityText2");No(t);try{let v={};v={pool:{...s.value.poolInfo,coinA:s.value.token_a,coinB:s.value.token_b},coinTypeA:s.value.poolInfo.coinTypeA,coinTypeB:s.value.poolInfo.coinTypeB,position:s.value,delta_liquidity:new ao(ho(eo.value,0)),slippage:Number(so.value),rewards_num:R.value.length};const f=R.value;v.coinTypeC=f[0]?f[0].coin_address:"",v.coinTypeD=f[1]?f[1].coin_address:"",v.coinTypeE=f[2]?f[2].coin_address:"";const T=await C.getRemoveLiquidityTransactionPayload(v);let I;if(I=await Z.value.currentWallet.signAndSubmitTransaction(T),I&&I.hash){po(I.hash),K(!1),wo(!0);const A={title:o("common.removeLiquidity"),desc:"",hash:I.hash,descTransactions:`Remove ${c.value} ${(d=u.value)==null?void 0:d.symbol} and ${p.value} ${(_=m.value)==null?void 0:_.symbol} 
             from the pool`,sender:Z.value.address,chainName:yo.value.chainName,tit:`${k.value==100?"Closed":"Modified"} Position: ${s.value.poolInfo.symbol}`,text:`Withdraw ${c.value} ${(y=u.value)==null?void 0:y.symbol} and ${p.value} ${(w=m.value)==null?void 0:w.symbol}`};C.showTransitionPending(A),await C.watchTransaction(A)&&(setTimeout(()=>{G()},3e3),setTimeout(()=>{G()},6e3),Number(k.value)==100&&P.push("/position"))}else K(!1),co(!0);B.value=!1}catch{B.value=!1,K(!1),co(!0)}},So=q(()=>i.value.tokensObj&&u.value.address&&i.value.tokensObj[u.value.address]&&i.value.tokensObj[u.value.address].logoURI),Co=q(()=>i.value.tokensObj&&m.value.address&&i.value.tokensObj[m.value.address]&&i.value.tokensObj[m.value.address].logoURI),Ro=l(0),R=l([]);return j(()=>[s.value,i.value.addressLpTokens,i.value.newTokenObj,i.value.RATES],async([t,d,_,y])=>{if(!V(t)&&!V(d)&&!V(_)&&!V(y)){const w=d[t.poolAddress],v=await C.getTickDataByIndex(w.ticks_handle,Number(t.tick_lower_index)),f=await C.getTickDataByIndex(w.ticks_handle,Number(t.tick_upper_index)),T=await C.getPosRewardersAmount({poolAddress:t.poolAddress,positionName:t.tokenName,tickLowerData:v,tickUpperData:f}),I=[];let A=0;T.forEach((h,L)=>{if(s.value.poolInfo[`rewarder_display${L+1}`]){const U=_[h.coin_address].decimals,D=_[h.coin_address],O=Number(h.amount_owed.toString())/Math.pow(10,U),To=y[_[h.coin_address].name.toUpperCase()].price,vo=O*To;A+=vo,I.push({...h,...D,amount:O,amountUSD:vo})}}),R.value=I,Ro.value=Number(ho(A,2))}},{immediate:!0}),{removeAmountARates:H,removeAmountBRates:J,removeAmountRates:a,receiveAmountARates:X,receiveAmountBRates:z,showNum:to,fromCoinUrl:So,toCoinUrl:Co,precision:ro,addCommom:b,loading:B,wallet:Z,toRemove:$o,fromCoinAmount:c,toCoinAmount:p,pools:i,refresh:E,amountArr:x,sliderVal:k,positionInfo:s,slippage:so,importIcon:zo,clickRefresh:mo,isShowSwapSetting:uo,pendingRewarderArr:R}}});const Y=o=>(oe("data-v-29f67fda"),o=o(),ee(),o),ie={class:"remove-liquidity"},te={class:"remove-liquidity-top"},ae={class:"remove-title"},le={class:"right title-right"},re=Y(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),ue=Y(()=>e("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),de=[ue],me={class:"remove-liquidity-center"},ce={class:"top"},pe={class:"left"},ve={class:"right"},fe={class:"fee"},Ie={class:"bottom"},he={class:"add-amount"},be={class:"add-amount-header"},ke={class:"amount-list"},_e=["onClick"],ge={class:"slider-box"},ye={class:"receive"},we={class:"receiveTit"},Ae={class:"item"},Ne={class:"left"},$e=["src"],Se={class:"right"},Ce={class:"item"},Re={class:"left"},Te=["src"],qe={class:"right"},Be={class:"remove-liquidity-bottom-box"},Pe={class:"induction remove-liquidity-bottom"},Le={class:"item"},Ue={class:"induction-text"},De={class:"induction-value"},Oe=["src"],je=Y(()=>e("div",{class:"induction-text"},null,-1)),Ve={class:"induction-value"},Ee=["src"],Me={class:"induction-text"},We={class:"induction-value"},Fe=["src"],Xe=Y(()=>e("svg",{"aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-Remove"})],-1)),ze={key:0,class:"receive"},He={class:"receiveTit"},Je={class:"left"},Ze={class:"right"},Ge={class:"item"},Ke={class:"left"},Qe=["src"],Ye={class:"right"},xe={class:"item"},on={class:"left"},en=["src"],nn={class:"right"},sn={class:"loading-global"};function tn(o,r,uo,B,E,mo){const x=qo,oo=Bo,M=Po,W=Qo,F=Yo,X=xo,z=Uo,H=Lo,J=ne;return g(),N("div",ie,[$(x),e("div",te,[e("div",ae,n(o.$t("common.removeLiquidity")),1),e("div",le,[e("div",{class:"slippage-icon",onClick:r[0]||(r[0]=a=>o.isShowSwapSetting=!0)},[re,e("span",null,n(o.slippage)+"%",1)]),(g(),N("svg",{"aria-hidden":"true",class:lo(o.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:r[1]||(r[1]=(...a)=>o.clickRefresh&&o.clickRefresh(...a))},de,2))])]),e("div",me,[e("div",ce,[e("div",pe,[o.positionInfo?(g(),bo(oo,{key:0,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b},null,8,["from-coin","to-coin"])):Q("",!0),e("div",ve,[e("div",fe,n(o.positionInfo.fee)+"%",1)])]),$(M,{"current-status":o.positionInfo.currentStatus||""},null,8,["current-status"])]),e("div",Ie,[e("div",he,[e("div",be,[e("span",null,n(o.$t("common.amount")),1),e("div",ke,[(g(!0),N(ko,null,_o(o.amountArr,(a,i)=>(g(),N("div",{key:i,class:lo(["amount-item",o.sliderVal==a.value?"amount-item-active":""]),onClick:u=>o.sliderVal=a.value},n(a.name),11,_e))),128))])]),e("div",ge,[$(W,{value:o.sliderVal,"onUpdate:value":r[2]||(r[2]=a=>o.sliderVal=a),oninpu:"value=value.replace(/[^\\d]/g,'')",suffix:"%"},null,8,["value"]),$(F,{value:o.sliderVal,"onUpdate:value":r[3]||(r[3]=a=>o.sliderVal=a)},null,8,["value"])])])])]),e("div",ye,[e("div",we,n(o.$t("newAdd.receive")),1),e("div",Ae,[e("div",Ne,[e("img",{src:o.fromCoinUrl||o.importIcon(`/image/coins/${o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,$e),e("span",null,n(o.showNum(o.fromCoinAmount,o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals)),1),S(" "+n(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" "+n(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.labels&&o.positionInfo.token_a.labels[0]?`(${o.positionInfo.token_a.labels[0]})`:""),1)]),e("div",Se,"\u2248 $"+n(o.receiveAmountARates),1)]),e("div",Ce,[e("div",Re,[e("img",{src:o.toCoinUrl||o.importIcon(`/image/coins/${o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,Te),e("span",null,n(o.showNum(o.toCoinAmount,o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals)),1),S(" "+n(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol)+" "+n(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.labels&&o.positionInfo.token_b.labels[0]?`(${o.positionInfo.token_b.labels[0]})`:""),1)]),e("div",qe,"\u2248 $"+n(o.receiveAmountBRates),1)])]),e("div",Be,[e("div",Pe,[e("div",Le,[e("div",Ue,n(o.$t("common.fees")),1),e("div",De,[e("img",{src:o.fromCoinUrl||o.importIcon(`/image/coins/${o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,Oe),S(" "+n(o.showNum(o.positionInfo&&o.positionInfo.feeOwedA,o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals))+" ",1),e("span",null,n(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)])]),e("div",{class:lo(o.pendingRewarderArr.length>0?"item item-boder":"item")},[je,e("div",Ve,[e("img",{src:o.toCoinUrl||o.importIcon(`/image/coins/${o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,Ee),S(" "+n(o.showNum(o.positionInfo&&o.positionInfo.feeOwedB,o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals))+" ",1),e("span",null,n(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)])],2),o.positionInfo.is_display_rewarder?(g(!0),N(ko,{key:0},_o(o.pendingRewarderArr,(a,i)=>(g(),N("div",{key:a,class:"item"},[e("div",Me,n(i==0?o.$t("common.rewards"):""),1),e("div",We,[e("img",{src:a.logoURI},null,8,Fe),S(" "+n(a.amount>1e-6?a.amount:"<0.000001")+" ",1),e("span",null,n(a.symbol),1)])]))),128)):Q("",!0)])]),$(X,{disabled:o.wallet.connected?Number(o.sliderVal)==0||o.loading:!1,class:"remove-btn big-btn",onClick:r[4]||(r[4]=a=>o.wallet.connected?o.toRemove():o.wallet.setIsShowWalletModal(!0))},{default:Zo(()=>[Xe,e("span",null,n(o.wallet.connected?o.$t("button.remove"):o.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),$(z),o.sliderVal<100?(g(),N("div",ze,[e("div",He,[e("div",Je,n(o.$t("newAdd.remainingPosition")),1),e("div",Ze,"$"+n(o.removeAmountRates),1)]),e("div",Ge,[e("div",Ke,[e("img",{src:o.fromCoinUrl||o.importIcon(`/image/coins/${o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,Qe),e("span",null,n(o.showNum(o.precision.minus(Number(o.positionInfo.amountA),Number(o.fromCoinAmount)),o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals)),1),S(" "+n(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" "+n(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.labels&&o.positionInfo.token_a.labels[0]?`(${o.positionInfo.token_a.labels[0]})`:""),1)]),e("div",Ye,"\u2248 $"+n(o.removeAmountARates),1)]),e("div",xe,[e("div",on,[e("img",{src:o.toCoinUrl||o.importIcon(`/image/coins/${o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,en),e("span",null,n(o.showNum(o.precision.minus(Number(o.positionInfo.amountB),Number(o.toCoinAmount)),o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals)),1),S(" "+n(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol)+" "+n(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.labels&&o.positionInfo.token_b.labels[0]?`(${o.positionInfo.token_b.labels[0]})`:""),1)]),e("div",nn,"\u2248 $"+n(o.removeAmountBRates),1)])])):Q("",!0),o.isShowSwapSetting?(g(),bo(H,{key:1,onOnClose:r[5]||(r[5]=a=>o.isShowSwapSetting=!1)})):Q("",!0),Go(e("div",sn,[$(J)],512),[[Ko,o.pools.currentPositionLoading]])])}const pn=Jo(se,[["render",tn],["__scopeId","data-v-29f67fda"]]);export{pn as default};
