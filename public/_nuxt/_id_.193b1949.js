import{_ as un}from"./back.ee2bfc61.js";import{_ as rn}from"./refresh-icon.e9ee5003.js";import{a as Xe,$ as Vo,y as Po,r as g,ag as dn,e as We,V as io,o as s,c as z,w as _e,h as o,i as V,j as Ee,v as m,f as c,F as to,E as Eo,A as Oe,x as M,ah as vn,I as mn,B as Ao,p as ze,k as Ge,H as bo,K as So,l as b,q as Ie,b as To,m as xe,s as No,t as Qe,u as I,G as Wo,O as wo,D as vo,C as pn,L as cn,z as jo,M as Xo,S as fn}from"./entry.69df4926.js";/* empty css              */import{a as bn,b as yn,_ as hn}from"./icon-error_2x.15f45743.js";import{u as Ze,a as zo}from"./autoPool.bdfd971d.js";import{u as eo,c as Ke,a as R,g as Io,d as Le,s as S,T as je,b as le,p as Oo,e as Go,f as kn}from"./pool.7e07c235.js";import{_ as yo}from"./token-warning.58443b74.js";import{_ as Ho}from"./auto-pool-apy-tips.a188d050.js";import{u as ho,a as Ro}from"./sha256.97c0006b.js";import{i as uo}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as Yo}from"./assets-card.41cf38d6.js";import{_ as Ko}from"./coin-lock.929c2184.js";import{_ as Zo,a as Jo}from"./auto-pool-remove-modal.4cae2361.js";/* empty css              */import{D as u}from"./decimal.0bdeb344.js";import{V as Co}from"./index.676b17e1.js";/* empty css              *//* empty css              */import"./decimal.6f03adc8.js";import{u as _n}from"./swapRouter.4da5f52f.js";/* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.4a7596b9.js";const gn=Xe({components:{Modal:Vo},setup(e,t){const{t:E,locale:O}=Po(),T=Ze(),N=["0.1","0.5","1"],p=g(T.slippage||.1),{setSlippage:A}=T,w=dn(),a=g(!1);function i(n,d){a.value=!1,p.value=d}function B(){A(p.value),t.emit("onClose",!1)}return{settingArr:N,changeActiveIndex:i,confirm:B,emit:w,slippage:p,t:E,isInput:a,inputChange:n=>{const d=new RegExp(/[^\d^\.]+/g);n.target.value=n.target.value.replace(d,""),p.value=n.target.value}}}});const Qo=e=>(ze("data-v-c5b99de4"),e=e(),Ge(),e),$n=Qo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),wn={class:"setting-container"},In={class:"title"},Cn=Qo(()=>o("img",{src:hn,alt:""},null,-1)),Pn={class:"tag-list"},An={key:0,src:bn,alt:""},Sn={key:1,src:yn,alt:""},Tn={class:"footer"};function Nn(e,t,E,O,T,N){const p=vn,A=mn,w=Ao,a=io("Modal");return s(),z(a,{title:"Settings",class:"setting",centered:"",visible:!0,width:"400px",onCancel:t[3]||(t[3]=i=>e.$emit("onClose"))},{closeIcon:_e(()=>[$n]),footer:_e(()=>[o("div",Tn,[V(w,{type:"cancel",class:"cancel-btn cancel-btn-new",onClick:t[2]||(t[2]=i=>e.$emit("onClose"))},{default:_e(()=>[Ee(m(e.$t("button.cancel")),1)]),_:1}),V(w,{class:"confirmbtn",disabled:Number(e.slippage)==0||Number(e.slippage)>1||Number(e.slippage)<.01,onClick:e.confirm},{default:_e(()=>[Ee(m(e.$t("button.confirm")),1)]),_:1},8,["disabled","onClick"])])]),default:_e(()=>[o("div",wn,[o("div",In,[Cn,o("span",null,m(e.$t("modal.slippageTolerance")),1)]),o("div",Pn,[(s(!0),c(to,null,Eo(e.settingArr,(i,B)=>(s(),z(p,{key:B,class:Oe(!e.isInput&&i==e.slippage?"tag-active":""),onClick:k=>e.changeActiveIndex(B,i)},{default:_e(()=>[Ee(m(i)+"% ",1)]),_:2},1032,["class","onClick"]))),128)),V(p,{class:Oe(["input-tag",e.isInput?"tag-active":""]),onClick:t[1]||(t[1]=i=>e.isInput=!0)},{default:_e(()=>[V(A,{value:e.slippage,"onUpdate:value":t[0]||(t[0]=i=>e.slippage=i),placeholder:"",suffix:"%",class:Oe(["slippage-input",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-input-waring":Number(e.slippage)>1?"slippage-input-error":""]),onChange:e.inputChange},null,8,["value","class","onChange"])]),_:1},8,["class"])])]),Number(e.slippage)>.5&&Number(e.slippage)<1||Number(e.slippage)>1?(s(),c("div",{key:0,class:Oe(["slippage-hint",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-hint-waring":Number(e.slippage)>1?"slippage-hint-error":""])},[Number(e.slippage)>.5&&1>=Number(e.slippage)?(s(),c("img",An)):M("",!0),Number(e.slippage)>1?(s(),c("img",Sn)):M("",!0),o("p",null,m(Number(e.slippage)>.5&&1>=Number(e.slippage)?e.$t("tips.slippageTolerance2"):Number(e.slippage)>1?e.$t("tips.slippageTolerance1"):""),1)],2)):M("",!0)]),_:1})}const Rn=We(gn,[["render",Nn],["__scopeId","data-v-c5b99de4"]]),qn=Xe({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,t){const E=g(!1),O=g(null),T=g(0);let N=g(!1);const p=g(20);eo();const A=Ze(),w=g(!1);bo(()=>{}),So(()=>{clearInterval(O.value)});const a=()=>{N.value=!1,O.value=setInterval(()=>{var v;w.value||T.value<p.value&&(T.value+=1,T.value===p.value&&((v=e==null?void 0:e.poolInfo)!=null&&v.address&&k(),T.value=0))},1e3)},i=b(()=>A.slippage),B=()=>{t.emit("clearAll")},k=()=>{N.value||(N.value=!0,T.value=0,t.emit("clickRefresh"),setTimeout(()=>{N.value=!1},1e3))};Ie(()=>e.poolInfo,v=>{v&&!O.value&&a()},{immediate:!0});const n=To(),d=xe();return{refresh:N,clickRefresh:k,isShowSwapSetting:E,countdown:T,autoRefreshTime:p,slippage:i,clearAll:B,checkNullObj:Ke,router:n,route:d}}});const Bn=e=>(ze("data-v-71491a33"),e=e(),Ge(),e),Dn={class:"title"},Ln={class:"left"},Mn=Bn(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Un={key:0,class:"deposit-progress"};function Fn(e,t,E,O,T,N){const p=un,A=rn,w=Rn;return s(),c("div",Dn,[o("div",Ln,[V(p)]),o("div",{class:Oe(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[o("div",{class:"slippage-icon",onClick:t[0]||(t[0]=a=>e.isShowSwapSetting=!0)},[Mn,o("span",null,m(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(s(),c("div",Un,[V(A,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):M("",!0)],2),e.isShowSwapSetting?(s(),z(w,{key:0,onOnClose:t[1]||(t[1]=a=>e.isShowSwapSetting=!1)})):M("",!0)])}const On=We(qn,[["render",Fn],["__scopeId","data-v-71491a33"]]),Vn=Xe({components:{AutoPoolApyTips:Ho},setup(){const e=ho(),t=b(()=>e),E=eo(),O=b(()=>E),T=Ze(),N=b(()=>T),p=b(()=>t.value.theme),A=xe(),w=g();Ie(()=>[N.value.positionInfoObj,A.params.id],([d,v])=>{d&&!Ke(d)&&v&&(w.value=d[v])},{immediate:!0,deep:!0});const a=b(()=>{var d;return(d=w.value)==null?void 0:d.needReverse}),i=d=>{var v;return(d==null?void 0:d.logoURI)||(d==null?void 0:d.logo_url)||((v=O.value.tokensObj[d==null?void 0:d.address])==null?void 0:v.logo_url)||(p.value==="default"?uo("/image/coins/unknown.png"):uo("/image/coins/sui-unknown.png"))},B=b(()=>{var d;return(d=w==null?void 0:w.value)==null?void 0:d.poolUSD}),k=b(()=>{var d,v;return N.value.apyObj&&((v=N.value.apyObj[(d=w.value)==null?void 0:d.id])==null?void 0:v.apr)||"--"}),n=b(()=>t.value.currentExplorer);return{positionInfo:w,needReverse:a,getCoinIcon:i,tvl:B,apy:k,addCommom:R,getExplorerUrl:Io,currentExplorer:n}}});const He=e=>(ze("data-v-3d655e5e"),e=e(),Ge(),e),En={class:"auto-pool-v2-info"},Wn={class:"pool-info"},jn={class:"left"},Xn={class:"coin-a"},zn={alt:""},Gn={class:"coin-b"},Hn={alt:""},Yn={class:"position-name"},Kn={key:0,class:"pool-fee"},Zn=He(()=>o("span",null,"Fee tier",-1)),Jn={class:"vault-address"},Qn=["href"],xn=He(()=>o("span",null,"Vault Address",-1)),et=He(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),ot=[xn,et],nt={class:"apy-and-tvl"},tt={class:"apy"},it=He(()=>o("div",{class:"apy-title"},"APY",-1)),st={class:"apy-text"},at={class:"tvl"},lt=He(()=>o("div",{class:"tvl-title"},"TVL",-1)),ut={class:"tvl-text"},rt={class:"pool-info h5-pool-info"},dt={class:"left"},vt={class:"coin-a"},mt={alt:""},pt={class:"coin-b"},ct={alt:""},ft={class:"position-name"},bt={key:0,class:"pool-fee"},yt=He(()=>o("span",null,"Fee tier",-1)),ht={class:"left"},kt={class:"vault-address"},_t=["href"],gt=He(()=>o("span",null,"Vault Address",-1)),$t=He(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),wt=[gt,$t],It={class:"apy-and-tvl"},Ct={class:"apy"},Pt=He(()=>o("div",{class:"apy-title"},"APY",-1)),At={class:"apy-text"},St={class:"tvl"},Tt=He(()=>o("div",{class:"tvl-title"},"TVL",-1)),Nt={class:"tvl-text"};function Rt(e,t,E,O,T,N){var a,i,B,k,n,d,v,y,C,f,U,D,F,G,J,K,_,r,q,ne,te,ue,j,x,ge,be,de,ve,H,ie,ye,me,h,X,Se,pe,Re,Ce,qe,$e,Me,Je,ro,re,Pe,Te;const p=yo,A=Ho,w=No("image");return s(),c("div",En,[o("div",Wn,[o("div",jn,[o("div",Xn,[Qe(o("img",zn,null,512),[[w,e.needReverse?e.getCoinIcon((i=e.positionInfo)==null?void 0:i.token_b):e.getCoinIcon((a=e.positionInfo)==null?void 0:a.token_a)]]),V(p,{address:e.needReverse?(d=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:d.address:(k=(B=e.positionInfo)==null?void 0:B.token_a)==null?void 0:k.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Gn,[Qe(o("img",Hn,null,512),[[w,e.needReverse?e.getCoinIcon((y=e.positionInfo)==null?void 0:y.token_a):e.getCoinIcon((v=e.positionInfo)==null?void 0:v.token_b)]]),V(p,{address:e.needReverse?(D=(U=e.positionInfo)==null?void 0:U.token_a)==null?void 0:D.address:(f=(C=e.positionInfo)==null?void 0:C.token_b)==null?void 0:f.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Yn,m(e.needReverse?(G=(F=e.positionInfo)==null?void 0:F.token_b)==null?void 0:G.symbol:(K=(J=e.positionInfo)==null?void 0:J.token_a)==null?void 0:K.symbol)+" - "+m(e.needReverse?(r=(_=e.positionInfo)==null?void 0:_.token_a)==null?void 0:r.symbol:(ne=(q=e.positionInfo)==null?void 0:q.token_b)==null?void 0:ne.symbol),1),(te=e.positionInfo)!=null&&te.fee?(s(),c("div",Kn,[Zn,Ee(" "+m(((ue=e.positionInfo)==null?void 0:ue.fee)*100)+"% ",1)])):M("",!0),o("div",Jn,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:I(Io))(e.currentExplorer,"poolAddress",(j=e.positionInfo)==null?void 0:j.id),target:"_blank"},ot,8,Qn)])]),o("div",nt,[o("div",tt,[it,o("div",st,[Ee(m(e.apy)+" ",1),V(A)])]),o("div",at,[lt,o("div",ut,"$"+m(("addCommom"in e?e.addCommom:I(R))(e.tvl,2)),1)])])]),o("div",rt,[o("div",dt,[o("div",vt,[Qe(o("img",mt,null,512),[[w,e.needReverse?e.getCoinIcon((ge=e.positionInfo)==null?void 0:ge.token_b):e.getCoinIcon((x=e.positionInfo)==null?void 0:x.token_a)]]),V(p,{address:e.needReverse?(H=(ve=e.positionInfo)==null?void 0:ve.token_b)==null?void 0:H.address:(de=(be=e.positionInfo)==null?void 0:be.token_a)==null?void 0:de.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",pt,[Qe(o("img",ct,null,512),[[w,e.needReverse?e.getCoinIcon((ye=e.positionInfo)==null?void 0:ye.token_a):e.getCoinIcon((ie=e.positionInfo)==null?void 0:ie.token_b)]]),V(p,{address:e.needReverse?(Se=(X=e.positionInfo)==null?void 0:X.token_a)==null?void 0:Se.address:(h=(me=e.positionInfo)==null?void 0:me.token_b)==null?void 0:h.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",ft,m(e.needReverse?(Re=(pe=e.positionInfo)==null?void 0:pe.token_b)==null?void 0:Re.symbol:(qe=(Ce=e.positionInfo)==null?void 0:Ce.token_a)==null?void 0:qe.symbol)+" - "+m(e.needReverse?(Me=($e=e.positionInfo)==null?void 0:$e.token_a)==null?void 0:Me.symbol:(ro=(Je=e.positionInfo)==null?void 0:Je.token_b)==null?void 0:ro.symbol),1),(re=e.positionInfo)!=null&&re.fee?(s(),c("div",bt,[yt,Ee(" "+m(((Pe=e.positionInfo)==null?void 0:Pe.fee)*100)+"% ",1)])):M("",!0)]),o("div",ht,[o("div",kt,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:I(Io))(e.currentExplorer,"poolAddress",(Te=e.positionInfo)==null?void 0:Te.id),target:"_blank"},wt,8,_t)])]),o("div",It,[o("div",Ct,[Pt,o("div",At,[Ee(m(e.apy)+" ",1),V(A)])]),o("div",St,[Tt,o("div",Nt,"$"+m(("addCommom"in e?e.addCommom:I(R))(e.tvl,2)),1)])])])])}const xo=We(Vn,[["render",Rt],["__scopeId","data-v-3d655e5e"]]),qt=Xe({components:{Slider:Wo},setup(){const e=g(!0),t=eo(),E=b(()=>t),O=Ze(),T=b(()=>O),N=xe(),p=g();Ie(()=>[T.value.positionInfoObj,N.params.id],([k,n])=>{k&&!Ke(k)&&n&&(p.value=k[n])},{immediate:!0,deep:!0});const A=b(()=>{var k;return(k=p.value)==null?void 0:k.needReverse}),w=k=>{var n;return(k==null?void 0:k.logoURI)||(k==null?void 0:k.logo_url)||((n=E.value.tokensObj[k==null?void 0:k.address])==null?void 0:n.logo_url)||uo("/image/coins/sui-unknown.png")},a=b(()=>{var y,C,f,U,D,F,G;const k=e.value?((y=p.value)==null?void 0:y.minPrice)&&S(p==null?void 0:p.value.minPrice,6):((C=p.value)==null?void 0:C.maxPrice)&&S(1/(p==null?void 0:p.value.maxPrice),6),n=e.value?((f=p.value)==null?void 0:f.maxPrice)&&S((U=p.value)==null?void 0:U.maxPrice,6):((D=p.value)==null?void 0:D.minPrice)&&S(1/(p==null?void 0:p.value.minPrice),6),d=(A.value?!e.value:e.value)?S((F=p.value)==null?void 0:F.price,6):S(1/((G=p.value)==null?void 0:G.price),6);let v={};return v[k]={label:"Min Price"},v[n]={label:"Max Price"},d>k&&d<n?v[d]={label:"Current Price"}:d<k?v[Number(k)+1e-9]={label:"Current Price"}:d>n&&(v[Number(n)-1e-9]={label:"Current Price"}),v}),i=b(()=>{var n,d;return(A.value?!e.value:e.value)?Le((n=p.value)==null?void 0:n.price,6):Le(1/((d=p.value)==null?void 0:d.price),6)}),B=b(()=>{var n,d;return(A.value?!e.value:e.value)?Le((n=p.value)==null?void 0:n.price,6):Le(1/((d=p.value)==null?void 0:d.price),6)});return{direct:e,positionInfo:p,needReverse:A,getCoinIcon:w,decimalUi:Le,addCommom:R,sFixD:S,marks:a,currentPrice:i,currentPriceResever:B}}});const ko=e=>(ze("data-v-44da997b"),e=e(),Ge(),e),Bt={class:"v2-position-range"},Dt={class:"position-range-top"},Lt=ko(()=>o("div",null,"Position Range",-1)),Mt={class:"base-coin"},Ut={key:0},Ft={alt:""},Ot={key:1},Vt={alt:""},Et={key:2},Wt={key:3},jt=ko(()=>o("p",null,"Base coin",-1)),Xt={class:"coin-rate"},zt=ko(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Gt=ko(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Ht=[zt,Gt],Yt={class:"position-range-bottom"},Kt={class:"price-range"},Zt={class:"price-range-bg"},Jt={key:0,class:"min-price"},Qt={key:0},xt={key:1},ei={key:1,class:"max-price"},oi={key:0},ni={key:1},ti={key:0,class:"min-price"},ii={key:0},si={key:1},ai={key:1,class:"max-price"},li={key:0},ui={key:1};function ri(e,t,E,O,T,N){var a,i,B,k,n,d,v,y,C,f,U,D,F,G,J,K,_,r,q,ne,te,ue,j,x,ge,be,de,ve;const p=yo,A=io("Slider"),w=No("image");return s(),c("div",Bt,[o("div",Dt,[Lt,o("div",Mt,[e.needReverse?(s(),c("div",Ot,[Qe(o("img",Vt,null,512),[[w,e.direct?e.getCoinIcon((y=e.positionInfo)==null?void 0:y.token_b):e.getCoinIcon((v=e.positionInfo)==null?void 0:v.token_a)]]),V(p,{address:e.direct?(D=(U=e.positionInfo)==null?void 0:U.token_b)==null?void 0:D.address:(f=(C=e.positionInfo)==null?void 0:C.token_a)==null?void 0:f.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(s(),c("div",Ut,[Qe(o("img",Ft,null,512),[[w,e.direct?e.getCoinIcon((a=e.positionInfo)==null?void 0:a.token_a):e.getCoinIcon((i=e.positionInfo)==null?void 0:i.token_b)]]),V(p,{address:e.direct?(k=(B=e.positionInfo)==null?void 0:B.token_a)==null?void 0:k.address:(d=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:d.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(s(),c("span",Wt,m(e.direct?(r=(_=e.positionInfo)==null?void 0:_.token_b)==null?void 0:r.symbol:(ne=(q=e.positionInfo)==null?void 0:q.token_a)==null?void 0:ne.symbol),1)):(s(),c("span",Et,m(e.direct?(G=(F=e.positionInfo)==null?void 0:F.token_a)==null?void 0:G.symbol:(K=(J=e.positionInfo)==null?void 0:J.token_b)==null?void 0:K.symbol),1)),jt,o("div",Xt,[o("div",{onClick:t[0]||(t[0]=H=>e.direct=!e.direct)},Ht)])])]),o("div",Yt,[o("div",Kt,[o("div",Zt,[e.direct?(s(),z(A,{key:0,value:e.currentPrice,class:Oe(["position-slider",e.currentPrice<Number(("sFixD"in e?e.sFixD:I(S))((te=e.positionInfo)==null?void 0:te.minPrice,6))||e.currentPrice>Number(("sFixD"in e?e.sFixD:I(S))((ue=e.positionInfo)==null?void 0:ue.maxPrice,6))?"hide-handler":""]),step:null,marks:e.marks,disabled:!0,min:Number(("decimalUi"in e?e.decimalUi:I(Le))((j=e.positionInfo)==null?void 0:j.minPrice,6)),max:Number(("decimalUi"in e?e.decimalUi:I(Le))((x=e.positionInfo)==null?void 0:x.maxPrice,6))},{mark:_e(({label:H})=>{var ie,ye,me,h,X,Se,pe,Re,Ce,qe,$e,Me;return[H=="Min Price"?(s(),c("div",Jt,[o("div",null,m(H),1),e.direct?(s(),c("div",Qt,m(((ie=e.positionInfo)==null?void 0:ie.minPrice)&&("sFixD"in e?e.sFixD:I(S))((ye=e.positionInfo)==null?void 0:ye.minPrice,6)),1)):(s(),c("div",xt,m(((me=e.positionInfo)==null?void 0:me.maxPrice)&&("sFixD"in e?e.sFixD:I(S))(1/((h=e.positionInfo)==null?void 0:h.maxPrice),6)),1))])):M("",!0),H=="Max Price"?(s(),c("div",ei,[o("div",null,m(H),1),e.direct?(s(),c("div",oi,m(((X=e.positionInfo)==null?void 0:X.maxPrice)&&("sFixD"in e?e.sFixD:I(S))((Se=e.positionInfo)==null?void 0:Se.maxPrice,6)),1)):(s(),c("div",ni,m(((pe=e.positionInfo)==null?void 0:pe.minPrice)&&("sFixD"in e?e.sFixD:I(S))(1/((Re=e.positionInfo)==null?void 0:Re.minPrice),6)),1))])):M("",!0),H=="Current Price"?(s(),c("div",{key:2,class:Oe(["current-price",e.currentPrice<Number(("sFixD"in e?e.sFixD:I(S))((Ce=e.positionInfo)==null?void 0:Ce.minPrice,6))?"current-price-left":e.currentPrice>Number(("sFixD"in e?e.sFixD:I(S))((qe=e.positionInfo)==null?void 0:qe.maxPrice,6))?"current-price-right":""])},[o("div",null,m(H),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(s(),c(to,{key:0},[Ee(m(("addCommom"in e?e.addCommom:I(R))(("decimalUi"in e?e.decimalUi:I(Le))(($e=e.positionInfo)==null?void 0:$e.price,6))),1)],64)):(s(),c(to,{key:1},[Ee(m(("addCommom"in e?e.addCommom:I(R))(("decimalUi"in e?e.decimalUi:I(Le))(1/((Me=e.positionInfo)==null?void 0:Me.price),6))),1)],64))])],2)):M("",!0)]}),_:1},8,["value","class","marks","min","max"])):(s(),z(A,{key:1,value:e.currentPriceResever,class:Oe(["position-slider",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:I(S))(1/((ge=e.positionInfo)==null?void 0:ge.maxPrice),6))||e.currentPriceResever>Number(("sFixD"in e?e.sFixD:I(S))(1/((be=e.positionInfo)==null?void 0:be.minPrice),6))?"hide-handler":""]),step:null,min:Number(("decimalUi"in e?e.decimalUi:I(Le))(1/((de=e.positionInfo)==null?void 0:de.maxPrice),6)),max:Number(("decimalUi"in e?e.decimalUi:I(Le))(1/((ve=e.positionInfo)==null?void 0:ve.minPrice),6)),marks:e.marks,disabled:!0},{mark:_e(({label:H})=>{var ie,ye,me,h,X,Se,pe,Re,Ce,qe,$e,Me;return[H=="Min Price"?(s(),c("div",ti,[o("div",null,m(H),1),e.direct?(s(),c("div",ii,m(((ie=e.positionInfo)==null?void 0:ie.minPrice)&&("sFixD"in e?e.sFixD:I(S))((ye=e.positionInfo)==null?void 0:ye.minPrice,6)),1)):(s(),c("div",si,m(((me=e.positionInfo)==null?void 0:me.maxPrice)&&("sFixD"in e?e.sFixD:I(S))(1/((h=e.positionInfo)==null?void 0:h.maxPrice),6)),1))])):M("",!0),H=="Max Price"?(s(),c("div",ai,[o("div",null,m(H),1),e.direct?(s(),c("div",li,m(((X=e.positionInfo)==null?void 0:X.maxPrice)&&("sFixD"in e?e.sFixD:I(S))((Se=e.positionInfo)==null?void 0:Se.maxPrice,6)),1)):(s(),c("div",ui,m(((pe=e.positionInfo)==null?void 0:pe.minPrice)&&("sFixD"in e?e.sFixD:I(S))(1/((Re=e.positionInfo)==null?void 0:Re.minPrice),6)),1))])):M("",!0),H=="Current Price"?(s(),c("div",{key:2,class:Oe(["current-price current-price-direct",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:I(S))(1/((Ce=e.positionInfo)==null?void 0:Ce.maxPrice),6))?"current-price-left":e.currentPriceResever>Number(("sFixD"in e?e.sFixD:I(S))(1/((qe=e.positionInfo)==null?void 0:qe.minPrice),6))?"current-price-right":""])},[o("div",null,m(H),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(s(),c(to,{key:0},[Ee(m(("addCommom"in e?e.addCommom:I(R))(("decimalUi"in e?e.decimalUi:I(Le))(($e=e.positionInfo)==null?void 0:$e.price,6))),1)],64)):(s(),c(to,{key:1},[Ee(m(("addCommom"in e?e.addCommom:I(R))(("decimalUi"in e?e.decimalUi:I(Le))(1/((Me=e.positionInfo)==null?void 0:Me.price),6))),1)],64))])],2)):M("",!0)]}),_:1},8,["value","class","min","max","marks"]))])])])])}const en=We(qt,[["render",ri],["__scopeId","data-v-44da997b"]]),di=Xe({components:{Modal:Vo},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const t=b(()=>{var O,T;const E=Math.ceil(((O=e.positionInfo)==null?void 0:O.poolUSD)/((T=e.positionInfo)==null?void 0:T.quoteUSD)*100);return Number(E)});return{sFixD:S,addCommom:R,ratio:t}}});const qo=e=>(ze("data-v-78a51262"),e=e(),Ge(),e),vi=qo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),mi={class:"deposit-slider"},pi={class:"info-block"},ci=qo(()=>o("div",{class:"leabl"},"Current Deposit：",-1)),fi={class:"text"},bi={class:"info-block"},yi=qo(()=>o("div",{class:"leabl"},"Max Capacity：",-1)),hi={class:"text"};function ki(e,t,E,O,T,N){const p=io("Modal");return s(),z(p,{width:"440px",visible:!0,footer:null,title:"Vault Capacity",onCancel:t[0]||(t[0]=A=>e.$emit("onClose"))},{closeIcon:_e(()=>[vi]),default:_e(()=>{var A,w,a,i;return[o("div",mi,[o("div",{class:"current-deposit",style:wo({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",pi,[ci,o("div",fi,m(("addCommom"in e?e.addCommom:I(R))(("sFixD"in e?e.sFixD:I(S))((A=e.positionInfo)==null?void 0:A.currentDeposit,2)))+" "+m((w=e.positionInfo)==null?void 0:w.quoteCoinInfo.symbol),1)]),o("div",bi,[yi,o("div",hi,m(("addCommom"in e?e.addCommom:I(R))(("sFixD"in e?e.sFixD:I(S))((a=e.positionInfo)==null?void 0:a.quoteUSD,2)))+" "+m((i=e.positionInfo)==null?void 0:i.quoteCoinInfo.symbol),1)])]}),_:1})}const on=We(di,[["render",ki],["__scopeId","data-v-78a51262"]]),_i=Xe({components:{AutoPoolV2PoolCapacity:on},setup(){const e=eo(),t=b(()=>e),E=Ze(),O=b(()=>E),T=xe(),N=g();Ie(()=>[O.value.positionInfoObj,T.params.id],([a,i])=>{a&&!Ke(a)&&i&&(N.value=a[i])},{immediate:!0,deep:!0});const p=b(()=>{var a;return(a=N.value)==null?void 0:a.needReverse}),A=a=>{var i;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((i=t.value.tokensObj[a==null?void 0:a.address])==null?void 0:i.logo_url)||uo("/image/coins/sui-unknown.png")},w=g(!1);return{needReverse:p,positionInfo:N,getCoinIcon:A,addCommom:R,isShowModal:w}}});const gi=e=>(ze("data-v-ad8a33e9"),e=e(),Ge(),e),$i={class:"pool-composition"},wi={class:"pool-composition-top"},Ii=gi(()=>o("span",null,"Vault Composition",-1)),Ci={class:"pool-composition-bottom"},Pi={class:"token-ratio"},Ai={class:"before-coin"},Si={alt:""},Ti={class:"after-coin"},Ni={alt:""},Ri={class:"token-num"},qi={class:"num-box"},Bi={class:"num-box"};function Di(e,t,E,O,T,N){var a,i,B,k,n,d,v,y,C,f,U,D,F,G,J,K,_,r,q,ne,te,ue,j,x,ge,be,de,ve,H;const p=yo,A=on,w=No("image");return s(),c("div",$i,[o("div",wi,[Ii,Number((a=e.positionInfo)==null?void 0:a.quoteUSD)>0?(s(),c("div",{key:0,class:"pool-capacity",onClick:t[0]||(t[0]=ie=>e.isShowModal=!0)},"Vault Capacity")):M("",!0)]),o("div",Ci,[o("div",Pi,[o("div",Ai,[o("div",null,[V(p,{address:e.needReverse?(n=(k=e.positionInfo)==null?void 0:k.token_b)==null?void 0:n.address:(B=(i=e.positionInfo)==null?void 0:i.token_a)==null?void 0:B.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),Qe(o("img",Si,null,512),[[w,e.needReverse?e.getCoinIcon((v=e.positionInfo)==null?void 0:v.token_b):e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_a)]])]),o("span",null,m((y=e.positionInfo)==null?void 0:y.poolCoinARatio)+"%",1)]),o("div",Ti,[o("span",null,m((C=e.positionInfo)==null?void 0:C.poolCoinBRatio)+"%",1),o("div",null,[Qe(o("img",Ni,null,512),[[w,e.needReverse?e.getCoinIcon((U=e.positionInfo)==null?void 0:U.token_a):e.getCoinIcon((f=e.positionInfo)==null?void 0:f.token_b)]]),V(p,{address:e.needReverse?(J=(G=e.positionInfo)==null?void 0:G.token_a)==null?void 0:J.address:(F=(D=e.positionInfo)==null?void 0:D.token_b)==null?void 0:F.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",Ri,[o("div",{class:"token-a-bg",style:wo({width:`${(K=e.positionInfo)==null?void 0:K.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:wo({width:`${(_=e.positionInfo)==null?void 0:_.poolCoinBRatio}%`})},null,4),o("div",qi,[o("div",null,m(("addCommom"in e?e.addCommom:I(R))((r=e.positionInfo)==null?void 0:r.poolCoinANum))+" "+m(e.needReverse?(ue=(te=e.positionInfo)==null?void 0:te.token_b)==null?void 0:ue.symbol:(ne=(q=e.positionInfo)==null?void 0:q.token_a)==null?void 0:ne.symbol),1),o("div",null,"$"+m(("addCommom"in e?e.addCommom:I(R))((j=e.positionInfo)==null?void 0:j.poolCoinAUSD)),1)]),o("div",Bi,[o("div",null,m(("addCommom"in e?e.addCommom:I(R))((x=e.positionInfo)==null?void 0:x.poolCoinBNum))+" "+m(e.needReverse?(ve=(de=e.positionInfo)==null?void 0:de.token_a)==null?void 0:ve.symbol:(be=(ge=e.positionInfo)==null?void 0:ge.token_b)==null?void 0:be.symbol),1),o("div",null,"$"+m(("addCommom"in e?e.addCommom:I(R))((H=e.positionInfo)==null?void 0:H.poolCoinBUSD)),1)])])]),e.isShowModal?(s(),z(A,{key:0,"position-info":e.positionInfo,onOnClose:t[1]||(t[1]=ie=>e.isShowModal=!1)},null,8,["position-info"])):M("",!0)])}const nn=We(_i,[["render",Di],["__scopeId","data-v-ad8a33e9"]]),Li=Xe({setup(){const e=eo(),t=b(()=>e),E=Ze(),O=b(()=>E),T=xe(),N=g();Ie(()=>[O.value.positionInfoObj,T.params.id],([i,B])=>{i&&!Ke(i)&&B&&(N.value=i[B])},{immediate:!0,deep:!0});const p=b(()=>{var i;return(i=N.value)==null?void 0:i.needReverse}),A=i=>{var B;return(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((B=t.value.tokensObj[i==null?void 0:i.address])==null?void 0:B.logo_url)||uo("/image/coins/sui-unknown.png")},w=Ro(),a=b(()=>w);return{needReverse:p,positionInfo:N,getCoinIcon:A,addCommom:R,wallet:a}}});const mo=e=>(ze("data-v-61c3efe6"),e=e(),Ge(),e),Mi={class:"my-liquidity"},Ui={class:"my-liquidity-top"},Fi=mo(()=>o("div",null,"My Liquidity",-1)),Oi=mo(()=>o("p",null,"My share of pool",-1)),Vi={class:"my-liquidity-bottom"},Ei={class:"lp-token"},Wi=mo(()=>o("div",null,[o("span",null,"LP Token Balance ")],-1)),ji={class:"lp-balance"},Xi={class:"token-num-content"},zi={class:"token-num token-a-num"},Gi={class:"logo"},Hi=["src"],Yi={class:"text"},Ki={class:"lp-logo"},Zi=["src"],Ji=mo(()=>o("div",null,"Pooled Assets",-1)),Qi={class:"token-num"},xi={class:"logo"},es=["src"],os={class:"text"},ns=mo(()=>o("div",{class:"token-num-content-bg"},null,-1));function ts(e,t,E,O,T,N){var A,w,a,i,B,k,n,d,v,y,C,f,U,D,F,G,J,K,_,r,q,ne,te,ue,j,x,ge,be,de;const p=yo;return s(),c("div",Mi,[o("div",Ui,[Fi,o("div",null,[Oi,o("p",null,m(e.wallet.connected?(A=e.positionInfo)==null?void 0:A.myShare:"--")+"%",1)])]),o("div",Vi,[o("div",Ei,[Wi,o("div",null,[o("span",ji,m(e.wallet.connected?("addCommom"in e?e.addCommom:I(R))((w=e.positionInfo)==null?void 0:w.myLiquidity):"--")+" LP",1),o("span",null,m(e.wallet.connected?((a=e.positionInfo)==null?void 0:a.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in e?e.addCommom:I(R))((i=e.positionInfo)==null?void 0:i.myLiquidityUSD)}`:"<$0.01":"--"),1)])]),o("div",Xi,[o("div",zi,[o("div",Gi,[o("img",{src:e.needReverse?e.getCoinIcon((k=e.positionInfo)==null?void 0:k.token_b):e.getCoinIcon((B=e.positionInfo)==null?void 0:B.token_a),alt:""},null,8,Hi),V(p,{address:e.needReverse?(y=(v=e.positionInfo)==null?void 0:v.token_b)==null?void 0:y.address:(d=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:d.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",Yi,[o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:I(R))((C=e.positionInfo)==null?void 0:C.amountA):"--")+" "+m(e.needReverse?(F=(D=e.positionInfo)==null?void 0:D.token_b)==null?void 0:F.symbol:(U=(f=e.positionInfo)==null?void 0:f.token_a)==null?void 0:U.symbol),1),o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:I(R))((G=e.positionInfo)==null?void 0:G.myAmountAUSD):"--"),1)])]),o("div",Ki,[o("img",{src:e.getCoinIcon((J=e.positionInfo)==null?void 0:J.lpInfo),alt:""},null,8,Zi),Ji]),o("div",Qi,[o("div",xi,[o("img",{src:e.needReverse?e.getCoinIcon((_=e.positionInfo)==null?void 0:_.token_a):e.getCoinIcon((K=e.positionInfo)==null?void 0:K.token_b),alt:""},null,8,es),V(p,{address:e.needReverse?(te=(ne=e.positionInfo)==null?void 0:ne.token_a)==null?void 0:te.address:(q=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:q.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",os,[o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:I(R))((ue=e.positionInfo)==null?void 0:ue.amountB):"--")+" "+m(e.needReverse?(be=(ge=e.positionInfo)==null?void 0:ge.token_a)==null?void 0:be.symbol:(x=(j=e.positionInfo)==null?void 0:j.token_b)==null?void 0:x.symbol),1),o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:I(R))((de=e.positionInfo)==null?void 0:de.myAmountBUSD):"--"),1)])]),ns])])])}const tn=We(Li,[["render",ts],["__scopeId","data-v-61c3efe6"]]),is=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const ss={},sn=e=>(ze("data-v-fcbc716b"),e=e(),Ge(),e),as={class:"status"},ls=sn(()=>o("img",{src:is,alt:""},null,-1)),us=sn(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),rs=[ls,us];function ds(e,t){return s(),c("div",as,rs)}const an=We(ss,[["render",ds],["__scopeId","data-v-fcbc716b"]]),vs=Xe({components:{AutoPoolAddModal:Zo,AutoPoolV2PoolStatus:an},setup(){const e=Ro(),t=g(!1),E=ho(),O=b(()=>E),T=b(()=>O.value.chainName),N=b(()=>e),p=Ze(),A=b(()=>p),w=eo(),a=b(()=>w),i=g(),B=xe(),k=g(!1),n=g(!1);Ie(()=>[A.value.positionInfoObj,B.params.id],([P,W])=>{P&&!Ke(P)&&W&&(i.value=P[W])},{immediate:!0,deep:!0});const d=b(()=>{var P;return(P=i.value)==null?void 0:P.needReverse}),v=g(),y=g(),C=g(),f=g(),U=g(!0),D=b(()=>N.value.assets&&v.value&&N.value.assets[v.value.address]?Oo(N.value.assets[v.value.address].balance,v.value.decimals):0),F=b(()=>N.value.assets&&y.value&&N.value.assets[y.value.address]?Oo(N.value.assets[y.value.address].balance,y.value.decimals):0),G=P=>{P==="fromCoin"?(U.value=!0,C.value=D.value>0?v.value.symbol=="SUI"?new u(Number(D.value)).sub(new u(.05)).lt(new u(0))?"0":new u(Number(D.value)).sub(new u(.05)).toString():String(D.value):""):(U.value=!1,f.value=F.value>0?y.value.symbol=="SUI"?new u(Number(F.value)).sub(new u(.05)).lt(new u(0))?"0":new u(Number(F.value)).sub(new u(.05)).toString():String(F.value):"")},J=P=>{P==="fromCoin"?(U.value=!0,C.value=D.value>0?S(new u(Number(D.value)).div(2).toString(),v.value.decimals).toString():""):(U.value=!1,f.value=F.value>0?S(new u(Number(F.value)).div(2).toString(),y.value.decimals).toString():"")},K=b(()=>T.value?Go(T.value):{}),_=b(()=>A.value.slippage),r=g("--"),q=g("--"),ne=P=>{const W=new u(i.value.autoPoolPositionInfo.liquidity),ce=new u(P.toString());if(W.toNumber()>0&&ce.toNumber()>0){const $=ce.add(W),we=ce.div($).mul(100).toNumber(),he=kn(we),ke=he==-1?2:he+2,Ne=S(ce.div($).mul(100).toNumber(),ke),Be=new u(1).div(new u(Math.pow(10,i.value.lpInfo.decimals))).toString();Number(Ne)<Number(Be)?r.value=`<${Be}`:r.value=Ne}else ce.toNumber()>0&&W.toNumber()<=0?r.value="100":r.value="--"},te=P=>{new u(P.toString());const W=new u(_.value).div(100),ce=Co.get_lp_amount_by_liquidity({liquidity:i.value.liquidity,total_supply:i.value.total_supply},P.toString()),$=new u(Math.pow(10,i.value.lpInfo.decimals)),we=new u(ce).div($).toString(),he=new u(we).mul(W),ke=new u(we).sub(he);q.value=S(ke.toString(),i.value.decimals)},ue=g(!1),j=g(!1),x=g(""),ge=g(),be=g(!1),de=async()=>{if(!i.value)return;n.value=!1,be.value=!0;const P=i.value.autoPoolPositionInfo.tick_lower_index,W=i.value.autoPoolPositionInfo.tick_upper_index,ce=je.sqrtPriceX64ToTickIndex(new le(i.value.current_sqrt_price));je.tickIndexToSqrtPriceX64(P),je.tickIndexToSqrtPriceX64(W),ce<P&&(d.value?ue.value=!0:j.value=!0),ce>W&&(d.value?j.value=!0:ue.value=!0);let $;if(C.value||f.value){U.value?$=new u(C.value).mul(Math.pow(10,v.value.decimals)).toString():$=new u(f.value).mul(Math.pow(10,y.value.decimals)).toString();let we,he=U.value;if(re.value||Pe.value){const L=new u(1);if(new u($).lte(L))return n.value=!0,!1;const Z=await Je.calculateDepositSwapAmount({lowerTick:P,upperTick:W,curSqrtPrice:new le(i.value.current_sqrt_price),fix_amount_a:he,input_amount:$,coinTypeA:i.value.autoPoolPositionInfo.coin_type_a,coinTypeB:i.value.autoPoolPositionInfo.coin_type_b,clmm_pool:i.value.address,slippage:Number(_.value)/100,decimals:re.value?v.value.decimals:y.value.decimals,request_id:$});if(Z){if(Z.request_id!==$)return;k.value=Z.is_exceed,we=new le(Z.afterSqrtPrice),$=Z.fixAmountA===he?new le(new u($).sub(Z.swapInAmount).toString()):new le(Z.swapOutAmount),ge.value={swap_amount:Z.swapInAmount,route_obj:Z.route_obj,a2b:he,input_amount:$},he=Z.fixAmountA;const ee=i.value.token_a.decimals,Q=i.value.token_b.decimals,ae=new u(Z.swapInAmount).div(new u(Math.pow(10,ee))).toString(),fe=S(new u(Z.swapOutAmountLimit).div(new u(Math.pow(10,Q))).toString(),Q),se=d.value?i.value.token_b.symbol:i.value.token_a.symbol,Y=d.value?i.value.token_a.symbol:i.value.token_b.symbol;x.value=`To deposit ${R(re.value?C.value:f.value)} ${re.value?se:Y},
          ${R(ae)} ${re.value?se:Y}  will be traded for ${R(fe)} ${re.value?Y:se} added to the pool.`}else we=i.value.current_sqrt_price,$=new le($)}else k.value=!1,we=i.value.current_sqrt_price,$=new le($),x.value="";let ke,Ne,Be;const l=K.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:v.value,tokenB:y.value,lowerTick:P,upperTick:W,coinAmount:$,iscoinA:he,roundUp:!0,slippage:Number(_.value)/100,curSqrtPrice:new le(we)});ke=l.liquidityAmount,Ne=l.tokenMaxA,Be=l.tokenMaxB,!re.value&&!Pe.value&&(U.value?f.value=Number(Be)>0?Be:"":C.value=Number(Ne)>0?Ne:""),ne(ke),te(ke),be.value=!1}};Ie(()=>i.value,P=>{P&&!Ke(P)&&(v.value=P==null?void 0:P.token_a,y.value=P==null?void 0:P.token_b,ue.value=!1,j.value=!1,de())},{immediate:!0});const ve=b(()=>a.value.RATES),H=b(()=>{var P,W,ce,$,we,he,ke,Ne;if((W=ve.value[(P=v.value)==null?void 0:P.address])!=null&&W.price&&(($=ve.value[(ce=y.value)==null?void 0:ce.address])!=null&&$.price)){const Be=new u(C.value||0).mul(new u((he=ve.value[(we=v.value)==null?void 0:we.address])==null?void 0:he.price)),l=new u(f.value||0).mul(new u((Ne=ve.value[(ke=y.value)==null?void 0:ke.address])==null?void 0:Ne.price));return Be.add(l).toNumber()}else return"--"});Ie(()=>C.value,vo((P,W)=>{P?de():(r.value="--",f.value="",q.value="--")},500),{immediate:!0}),Ie(()=>f.value,vo((P,W)=>{P?de():(C.value="",r.value="--",q.value="--")},500),{immediate:!0});const{t:ie,locale:ye}=Po(),me=b(()=>{var P,W;if(re.value||Pe.value){const ce=re.value?C.value:f.value,$=re.value?v.value:y.value;if((P=ve.value[$==null?void 0:$.address])!=null&&P.price)return new u(ce||0).mul(new u((W=ve.value[$==null?void 0:$.address])==null?void 0:W.price)).toNumber()}return 0}),h=b(()=>{const P=Number(C.value)>Number(D.value),W=Number(f.value)>Number(F.value);return!C.value&&!f.value?ie("button.enterAmount"):P?ie("button.insufficientBalance",{name:v.value.symbol}):W?ie("button.insufficientBalance",{name:y.value.symbol}):k.value?ie("button.insufficientLiquidity"):Number(i.value.remainingTokenUSD)!==0&&Number(i.value.quoteUSD)>0&&Number(H.value)>Number(i.value.remainingTokenUSD)?"Exceeded the max capacity":n.value?ie("button.enterAmount"):"Add Liquidity"}),X=b(()=>{const P=Number(C.value)>Number(D.value),W=Number(f.value)>Number(F.value);return!!(!C.value&&!f.value||P||W||C.value<=0&&f.value<=0||k.value||co.value!=="STATUS_RUNNING"||Number(i.value.remainingTokenUSD)!==0&&Number(i.value.quoteUSD)>0&&Number(H.value)>Number(i.value.remainingTokenUSD)||n.value||me.value>1e4)}),Se=g(!0),{setIsShowSuccess:pe,setIsShowRejected:Re,setIsShowWaiting:Ce,setTransactionDesc:qe,setTransactionTxid:$e,setPositiomNum:Me}=E,Je=zo("Sui"),ro=async()=>{var Be,l;t.value=!1,Se.value=!0,$e("");const P=`${R(C.value)} ${(Be=v.value)==null?void 0:Be.symbol}`,W=`${R(f.value)} ${(l=y.value)==null?void 0:l.symbol}`;qe(`Deposit ${C.value>0?P:""} ${f.value>0&&C.value>0?"and":""} ${f.value>0?W:""}`),Ce(!0);const ce=U.value,$=i.value.autoPoolPositionInfo.tick_lower_index,we=i.value.autoPoolPositionInfo.tick_upper_index,he=je.sqrtPriceX64ToTickIndex(new le(i.value.current_sqrt_price));let ke;U.value?ke=new u(C.value).mul(Math.pow(10,v.value.decimals)).toString():ke=new u(f.value).mul(Math.pow(10,y.value.decimals)).toString();const Ne=i.value.rewarderInfo.map(L=>L.coinAddress);try{const L={lowerTick:$,upperTick:we,coinAmount:ke,fix_amount_a:ce,slippage:Number(_.value)/100,curSqrtPrice:new le(i.value.current_sqrt_price),id:i.value.id,clmm_pool:i.value.autoPoolPositionInfo.pool,lp_token_type:i.value.lp_token_type,coinTypeA:i.value.autoPoolPositionInfo.coin_type_a,coinTypeB:i.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:Ne,swapParams:ge.value,isOnlyA:re.value,isOnlyB:Pe.value,currentTickIndex:he,decimal_b:i.value.coinB.decimals},Z=await Je.deposit(L),ee=await N.value.currentWallet.signAndExecuteTransactionBlock(Z);let Q=K.value.handleTx(ee);if(Q&&Q.hash){$e(Q.hash),Ce(!1),pe(!0);const ae={title:"Supplied",desc:`Deposit ${C.value>0?P:""} ${f.value>0&&C.value>0?"and":""} ${f.value>0?W:""}`,hash:Q.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${C.value>0?P:""} ${f.value>0&&C.value>0?"and":""} ${f.value>0?W:""}`};T.value!=="Aptos"&&(ae.res=Q.res),K.value.showTransitionPending(ae),await K.value.watchTransaction(ae)&&setTimeout(()=>{p.updatePositionItem(i.value.id),K.value.getAccount(N.value.address)},1e3),Me()}else Ce(!1),Re(!0);C.value="",f.value="",Se.value=!1}catch{C.value="",f.value="",Se.value=!1,Ce(!1),Re(!0)}},re=g(!1),Pe=g(!1),Te=P=>{C.value="",f.value="",x.value="",P=="only-a"?(re.value=!re.value,Pe.value=!1):(Pe.value=!Pe.value,re.value=!1)},co=b(()=>A.value.currentAutoPoolStatus),fo=g(),_o=()=>{fo.value=window.setInterval(()=>{(C.value||f.value)&&de()},2e4)};bo(()=>{_o()}),So(()=>{window.clearInterval(fo.value)});const go=pn(cn,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0});return{currentAutoPoolStatus:co,wallet:N,positionInfo:i,isShowAddModal:t,needReverse:d,fromCoin:v,toCoin:y,fromCoinAmount:C,toCoinAmount:f,fromCoinBlance:D,toCoinBlance:F,fixedFromCoin:U,maxBtnSelect:G,halfBtnSelect:J,totalAmountUSD:H,addCommom:R,shareOfPool:r,minimumReceivedLP:q,addLiquidityBtnText:h,addLiquidityBtnDisabled:X,toAdd:ro,showToCoinLock:j,showFromCoinLock:ue,isOnlyA:re,isOnlyB:Pe,onlyToken:Te,onlyText:x,onlyTokenUSD:me,calculateLoading:be,indicator:go}}});const oo=e=>(ze("data-v-b557fa66"),e=e(),Ge(),e),ms={class:"auto-pool-add"},ps={class:"auto-pool-add-content"},cs={class:"liquidity-action-tab"},fs=oo(()=>o("div",{class:"increase tab-active"},"Add",-1)),bs={class:"only-token"},ys=oo(()=>o("div",null,"Deposit Amounts",-1)),hs={key:0},ks=oo(()=>o("div",{class:"hover-text"},"You can also choose to deposit in only one asset type. In that case, the vault will convert your asset to the required propositions using Cetus. Please note that trading fees & slippage will be applied. When slippage is involved, a certain amount of post-swap dust (no loss of funds) will be returned to you.",-1)),_s={key:0},gs=oo(()=>o("div",{class:"hover-text"},"You can also choose to deposit in only one asset type. In that case, the vault will convert your asset to the required propositions using Cetus. Please note that trading fees & slippage will be applied. When slippage is involved, a certain amount of post-swap dust (no loss of funds) will be returned to you.",-1)),$s={key:0,class:"card-item"},ws={key:1,class:"card-item"},Is=oo(()=>o("span",null,"Pool Closed",-1)),Cs={key:0,class:"add-info"},Ps={key:0,class:"only-text"},As={class:"total-amount"},Ss=oo(()=>o("span",null,"Total Amount",-1)),Ts={key:0},Ns={class:"total-amount"},Rs=oo(()=>o("span",null,"Share of Pool",-1)),qs={key:0},Bs={class:"total-amount"},Ds=oo(()=>o("span",null,"Minimum Received LP",-1)),Ls={key:0};function Ms(e,t,E,O,T,N){var k,n,d,v,y,C,f,U,D,F,G,J,K,_,r;const p=Yo,A=Ko,w=io("AutoPoolV2PoolStatus"),a=Ao,i=Xo,B=Zo;return s(),c("div",ms,[o("div",ps,[o("div",cs,[fs,o("div",{class:"remove",onClick:t[0]||(t[0]=jo(q=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",bs,[ys,o("div",null,[o("div",{class:"only-a",onClick:t[1]||(t[1]=q=>e.onlyToken("only-a"))},[o("p",null,[e.isOnlyA?(s(),c("span",hs)):M("",!0)]),o("span",null,m(e.needReverse?(v=(d=e.positionInfo)==null?void 0:d.token_b)==null?void 0:v.symbol:(n=(k=e.positionInfo)==null?void 0:k.token_a)==null?void 0:n.symbol)+" only",1),ks]),o("div",{class:"only-b",onClick:t[2]||(t[2]=q=>e.onlyToken("only-b"))},[o("p",null,[e.isOnlyB?(s(),c("span",_s)):M("",!0)]),o("span",null,m(e.needReverse?(U=(f=e.positionInfo)==null?void 0:f.token_a)==null?void 0:U.symbol:(C=(y=e.positionInfo)==null?void 0:y.token_b)==null?void 0:C.symbol)+" only",1),gs])])]),o("div",{class:Oe(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(s(),c("div",$s,[V(p,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[3]||(t[3]=q=>e.fromCoinAmount=q),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[4]||(t[4]=q=>e.maxBtnSelect("fromCoin")),onOnHalf:t[5]||(t[5]=q=>e.halfBtnSelect("fromCoin")),onOnInput:t[6]||(t[6]=q=>{e.fromCoinAmount=q}),onOnFocus:t[7]||(t[7]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(s(),z(A,{key:0})):M("",!0)])):M("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(s(),c("div",ws,[V(p,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[8]||(t[8]=q=>e.toCoinAmount=q),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[9]||(t[9]=q=>e.maxBtnSelect("toCoin")),onOnHalf:t[10]||(t[10]=q=>e.halfBtnSelect("toCoin")),onOnInput:t[11]||(t[11]=q=>{e.toCoinAmount=q}),onOnFocus:t[12]||(t[12]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(s(),z(A,{key:0})):M("",!0)])):M("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(s(),z(w,{key:0})):M("",!0),(D=e.positionInfo)!=null&&D.is_pause?(s(),z(a,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:_e(()=>[Is]),_:1})):e.wallet.connected?(s(),z(a,{key:2,class:"big-btn liquidity-btn",disabled:e.addLiquidityBtnDisabled,onClick:t[13]||(t[13]=q=>e.isShowAddModal=!0)},{default:_e(()=>[o("span",null,m(e.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(s(),z(a,{key:3,class:"big-btn liquidity-btn",onClick:t[14]||(t[14]=q=>e.wallet.setIsShowWalletModal(!0))},{default:_e(()=>[o("span",null,m(e.$t("button.connectWallet")),1)]),_:1})),(((F=e.positionInfo)==null?void 0:F.quoteUSD)==0||Number((G=e.positionInfo)==null?void 0:G.remainingTokenUSD)>Number(e.totalAmountUSD))&&(Number(e.fromCoinAmount)>0||Number(e.toCoinAmount)>0)&&!e.addLiquidityBtnDisabled?(s(),c(to,{key:4},[e.onlyTokenUSD<=1e4?(s(),c("div",Cs,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount>0||e.isOnlyB&&e.toCoinAmount>0)?(s(),c("div",Ps,m(e.onlyText),1)):M("",!0),o("div",As,[Ss,e.calculateLoading?(s(),z(i,{key:1,paragraph:!1,active:""})):(s(),c("span",Ts,m(Number(e.totalAmountUSD)>0&&Number(e.totalAmountUSD)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:I(R))(e.totalAmountUSD,2)}`),1))]),o("div",Ns,[Rs,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(s(),c("span",qs,m(e.shareOfPool)+"%",1)):(s(),z(i,{key:1,paragraph:!1,active:""}))]),o("div",Bs,[Ds,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(s(),c("span",Ls,m(("addCommom"in e?e.addCommom:I(R))(e.minimumReceivedLP))+" "+m(e.needReverse?(J=e.toCoin)==null?void 0:J.symbol:(K=e.fromCoin)==null?void 0:K.symbol)+"-"+m(e.needReverse?(_=e.fromCoin)==null?void 0:_.symbol:(r=e.toCoin)==null?void 0:r.symbol),1)):(s(),z(i,{key:1,paragraph:!1,active:""}))])])):M("",!0)],64)):M("",!0),e.isShowAddModal?(s(),z(B,{key:5,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:t[15]||(t[15]=q=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):M("",!0)])}const Us=We(vs,[["render",Ms],["__scopeId","data-v-b557fa66"]]),Fs=Xe({components:{AutoPoolRemoveModal:Jo,AutoPoolV2PoolStatus:an},setup(){const e=Ro(),t=b(()=>e),E=ho(),O=b(()=>E),T=b(()=>k.value.slippage),N=b(()=>O.value.chainName),p=_n(),A=b(()=>p),w=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],a=g(25),i=xe(),B=Ze(),k=b(()=>B),n=b(()=>k.value.positionInfoObj[i.params.id]),d=b(()=>{var l;return(l=n.value)==null?void 0:l.needReverse}),v=g(),y=g(),C=g(!1),f=g(),U=b(()=>{var l;return(l=n.value)==null?void 0:l.myLiquidity}),D=g(!0),F=b(()=>N.value?Go(N.value):{}),G=g(),J=g(),K=zo("Sui"),_=g(""),r=g(""),q=g("--"),ne=g(!1),te=g(!1),ue=g(),j=g(!0),x=g(),ge=eo(),be=b(()=>ge),de=b(()=>be.value.RATES),ve=g(!1),H=async()=>{if(D.value||!n.value)return;J.value=!1,ve.value=!0;const l=n.value.autoPoolPositionInfo.tick_lower_index,L=n.value.autoPoolPositionInfo.tick_upper_index,Z=je.sqrtPriceX64ToTickIndex(new le(n.value.current_sqrt_price));Z<l&&(d.value?ne.value=!0:te.value=!0),Z>L&&(d.value?te.value=!0:ne.value=!0);let ee;if(_.value||r.value){j.value?ee=new u(_.value).mul(Math.pow(10,v.value.decimals)).toString():ee=new u(r.value).mul(Math.pow(10,y.value.decimals)).toString();let Q,ae=j.value;if(h.value||X.value){h.value?Number(_.value)/Number($.value):Number(r.value)/Number($.value);const oe=await K.calculateRemoveSwapAmount({lowerTick:l,upperTick:L,curSqrtPrice:new le(n.value.current_sqrt_price),fix_amount_a:ae,receiveAmount:ee,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(T.value)/100,decimals:h.value?v.value.decimals:y.value.decimals,liquidity:_.value==$.value||r.value==$.value?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:ee});if(oe){if(oe.request_id!==ee)return;G.value=oe.is_exceed,ee=new le(oe.swapOutAmount),Q=n.value.current_sqrt_price,ue.value={swap_amount:oe.swapInAmount,liquidity:oe.liquidity,a2b:!ae,route_obj:oe.route_obj},ae=!ae;const Ye=n.value.token_a.decimals,Ve=n.value.token_b.decimals,Ue=new u(oe.swapInAmount).div(new u(Math.pow(10,Ye))).toString(),so=S(new u(oe.swapOutAmountLimit).div(new u(Math.pow(10,Ve))).toString(),Ve),Ae=d.value?n.value.token_b.symbol:n.value.token_a.symbol,De=d.value?n.value.token_a.symbol:n.value.token_b.symbol;x.value=_.value==$.value||r.value==$.value?`To withdraw ${R(h.value?_.value:r.value)} ${h.value?Ae:De},
          ${R(h.value?n.value.amountB:n.value.amountA)} ${h.value?De:Ae} 
           in the pool will be traded for ${Ue} ${h.value?Ae:De}`:`To withdraw ${R(h.value?_.value:r.value)} ${h.value?Ae:De},
          ${R(Ue)} ${h.value?De:Ae}  in the pool will be traded for ${R(so)} ${h.value?Ae:De}`}else{J.value=!0,x.value="";return}}else G.value=!1,Q=n.value.current_sqrt_price,ee=new le(ee);const{liquidityAmount:fe,tokenMaxA:se,tokenMaxB:Y}=F.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:v.value,tokenB:y.value,lowerTick:l,upperTick:L,coinAmount:ee,iscoinA:ae,roundUp:!1,slippage:Number(T.value)/100,curSqrtPrice:new le(Q)});if(!h.value&&!X.value&&(j.value?r.value=Number(Y)>0?Y:"":_.value=Number(se)>0?se:""),(h.value||X.value)&&(Number(_.value)>=Number($.value)||Number(r.value)>=Number($.value))){f.value=n.value.myLiquidity;const oe=new u(100);q.value=new u(n.value.myLiquidity).mul(new u(Math.pow(10,n.value.lpInfo.decimals))).toString(),ie.value=fe.toString(),a.value=oe.toNumber()}else{const oe=Co.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},fe.toString()),Ye=new u(oe).div(new u(Math.pow(10,n.value.lpInfo.decimals))).toString(),Ve=new u(Ye).div(new u(U.value)).mul(100);f.value=new u(U.value).mul(Ve.div(100)).toString(),q.value=oe,ie.value=fe.toString(),a.value=Ve.toNumber()}ve.value=!1}},ie=g(),ye=b(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountA}),me=b(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountB}),h=g(!1),X=g(!1),Se=b(()=>{var ae,fe,se,Y;const l=(fe=de.value[(ae=v==null?void 0:v.value)==null?void 0:ae.address])==null?void 0:fe.price,L=(Y=de.value[(se=y==null?void 0:y.value)==null?void 0:se.address])==null?void 0:Y.price;let Z=_.value!=="--"&&_.value!==""?_.value:0,ee=r.value!=="--"&&r.value!==""?r.value:0,Q;return l&&L&&(h.value||X.value?Q=new u(h.value?Z:ee).mul(new u(h.value?l:L)).toString():Q=new u(Z).mul(new u(l)).add(new u(ee).mul(new u(L))).toString()),Q>0&&Q<.01?"<$0.01":`$${R(S(Q,2))}`}),pe=async l=>{var Ye,Ve,Ue,so,Ae,De,$o,Bo,Do,Lo,Mo;if(!D.value)return;D.value=!0,J.value=!1,(Ve=(Ye=n.value)==null?void 0:Ye.token_a)==null||Ve.decimals,(so=(Ue=n.value)==null?void 0:Ue.token_b)==null||so.decimals;const L=(Ae=n.value)==null?void 0:Ae.tick_lower_index,Z=(De=n.value)==null?void 0:De.tick_upper_index;je.tickIndexToSqrtPriceX64(L),je.tickIndexToSqrtPriceX64(Z);const ee=(Bo=($o=n.value)==null?void 0:$o.autoPoolPositionInfo)==null?void 0:Bo.tick_lower_index,Q=(Lo=(Do=n.value)==null?void 0:Do.autoPoolPositionInfo)==null?void 0:Lo.tick_upper_index,ae=je.sqrtPriceX64ToTickIndex(new le((Mo=n==null?void 0:n.value)==null?void 0:Mo.current_sqrt_price));ae<ee&&(d.value?ne.value=!0:te.value=!0),ae>Q&&(d.value?te.value=!0:ne.value=!0);let fe="",se,Y,oe=j.value;if(h.value||X.value&&!ne.value&&!te.value){if(h.value){const no=new u($.value).mul(Math.pow(10,v.value.decimals)).mul(l.value).toString();Y=S(no,0),_.value=S(new u($.value).mul(l.value).toString(),v.value.decimals)}if(X.value){const no=new u($.value).mul(l.value).mul(Math.pow(10,y.value.decimals)).toString();Y=S(no,0),r.value=S(new u($.value).mul(l.value).toString(),y.value.decimals)}const Fe=await K.calculateRemoveSwapAmount({lowerTick:L,upperTick:Z,curSqrtPrice:new le(n.value.current_sqrt_price),fix_amount_a:oe,receiveAmount:Y,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(T.value)/100,decimals:h.value?v.value.decimals:y.value.decimals,liquidity:l.value==1?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:Y});if(Fe){if(Fe.request_id!==Y)return;G.value=Fe.is_exceed,Y=new le(Fe.swapOutAmount),n.value.current_sqrt_price,ue.value={swap_amount:Fe.swapInAmount,liquidity:Fe.liquidity,route_obj:Fe.route_obj,a2b:!oe},oe=!oe;const no=n.value.token_a.decimals,Uo=n.value.token_b.decimals,ln=new u(Fe.swapInAmount).div(new u(Math.pow(10,no))).toString(),Fo=S(new u(Fe.swapOutAmountLimit).div(new u(Math.pow(10,Uo))).toString(),Uo),ao=d.value?n.value.token_b.symbol:n.value.token_a.symbol,lo=d.value?n.value.token_a.symbol:n.value.token_b.symbol;x.value=l.value==1?`To withdraw ${R(h.value?_.value:r.value)} ${h.value?ao:lo},
          ${R(h.value?n.value.amountB:n.value.amountA)} ${h.value?lo:ao}  in the pool will be traded for ${R(Fo)} ${h.value?ao:lo}`:`To withdraw ${R(h.value?_.value:r.value)} ${h.value?ao:lo},
          ${R(ln)} ${h.value?lo:ao}  in the pool will be traded for ${R(Fo)} ${h.value?ao:lo}`,fe=Fe.liquidity}else n.value.current_sqrt_price,Y=new le(Y),x.value="",J.value=!0;q.value=new u(n.value.myLiquidity).mul(new u(l.value)).toString(),f.value=new u(q.value),ie.value=fe}else{G.value=!1;const Fe=new u(ye.value).mul(Math.pow(10,v.value.decimals)).mul(l.value).toString();Y=S(Fe,0),_.value=S(new u(ye.value).mul(l.value).toString(),v.value.decimals);const no=new u(me.value).mul(l.value).mul(Math.pow(10,y.value.decimals)).toString();Y=S(no,0),r.value=S(new u(me.value).mul(l.value).toString(),y.value.decimals),n.value.current_sqrt_price,Y=new le(Y),l.value!==1?se=new u(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(l.value).toString():se=new u(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),f.value=new u(se).div(Math.pow(10,n.value.lpInfo.decimals)),fe=Co.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},se),q.value=S(se,0),ie.value=S(fe,0)}};Ie(a,vo((l,L)=>{l!==L&&(Number(l)>100?a.value=100:l&&n.value?(a.value=l,pe({value:a.value/100})):(_.value="",r.value=""))},300)),Ie(()=>_.value,vo((l,L)=>{l?H():!h.value&&!X.value&&(r.value="",a.value=0)},500),{immediate:!0}),Ie(()=>r.value,vo((l,L)=>{l?H():!h.value&&!X.value&&(_.value="",a.value=0)},500),{immediate:!0});const Re=To(),{setIsShowSuccess:Ce,setIsShowRejected:qe,setIsShowWaiting:$e,setTransactionDesc:Me,setTransactionTxid:Je,setPositiomNum:ro,setTransactionDescText:re}=E,Pe=g(!1),{t:Te}=Po(),co=async()=>{var Ye,Ve;Pe.value=!0,Je("");const l=Number(_.value)>0?`${R(_.value,v.value.decimals)} ${v.value.symbol}`:"",L=Number(r.value)>0?`${R(r.value,y.value.decimals)} ${y.value.symbol}`:"";Me(Te("tips.removeLiquidiyText",{from:d.value?L:l,and:Number(_.value)>0&&Number(r.value)>0?"and":"",to:d.value?l:L})),$e(!0);const Z=Te("modal.removeLiquidityText2");re(Z);const ee=n.value.autoPoolPositionInfo.tick_lower_index,Q=n.value.autoPoolPositionInfo.tick_upper_index,ae=je.tickIndexToSqrtPriceX64(ee),fe=je.tickIndexToSqrtPriceX64(Q),se=n.value.rewarderInfo.map(Ue=>Ue.coinAddress);let Y;j.value?Y=new u(_.value).mul(Math.pow(10,v.value.decimals)).toString():Y=new u(r.value).mul(Math.pow(10,y.value.decimals)).toString();const oe={lowerSqrtPrice:ae,upperSqrtPrice:fe,lpTokenAmount:q.value,liquidity:ie.value,curSqrtPrice:new le(n.value.object.current_sqrt_price),slippage:Number(T.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.pool,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:se,swapParams:ue.value,fix_amount_a:j.value,isOnlyA:!ne.value&&!te.value?h.value:!1,isOnlyB:!te.value&&!ne.value?X.value:!1,lowerTick:ee,upperTick:Q,receiveAmount:Y,sliderVal:a.value,positionInfo:n.value,maxLiquidity:n.value.positionLiquidity};try{const Ue=await K.remove(oe),so=await t.value.currentWallet.signAndExecuteTransactionBlock(Ue);let Ae=F.value.handleTx(so);if(Ae&&Ae.hash){Je(Ae.hash),$e(!1),Ce(!0);const De={title:Te("common.removeLiquidity"),desc:"",hash:Ae.hash,descTransactions:`Remove ${l} ${Number(_.value)>0&&Number(r.value)>0?"and":""} ${L} from the pool`,sender:t.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${_.value} ${(Ye=v.value)==null?void 0:Ye.symbol} and ${r.value} ${(Ve=y.value)==null?void 0:Ve.symbol}`};De.res=Ae.res,F.value.showTransitionPending(De),await F.value.watchTransaction(De)&&(_.value="",r.value="",f.value="",a.value=0,setTimeout(()=>{B.updatePositionItem(n.value.id),F.value.getAccount(t.value.address)},1e3),Number(a.value)==100&&i.name=="auto-pool-detail"&&Re.push("/pool/vaults"))}else $e(!1),qe(!0);Pe.value=!1}catch{Pe.value=!1,$e(!1),qe(!0)}};Ie(()=>n.value,(l,L)=>{l&&!Ke(l)&&(v.value=l==null?void 0:l.token_a,y.value=l==null?void 0:l.token_b,(!L||L&&L.address!==l.address)&&(a.value=a.value>0?a.value:25,pe({value:a.value/100})),L&&L.current_sqrt_price!==l.current_sqrt_price&&(D.value?pe({value:a.value/100}):H()))},{immediate:!0});const fo=b(()=>{const l=Number(f.value)>Number(U.value);return!_.value&&!r.value||!f.value||f.value<=0||!_.value&&h.value||!r.value&&X.value?Te("button.enterAmount"):l?"Invalid Amount":G.value?Te("button.insufficientLiquidity"):J.value?Te("button.enterAmount"):h.value&&Number(_.value)>Number($.value)||X.value&&Number(r.value)>Number($.value)?"Invalid Amount":Te("button.remove")}),_o=b(()=>{const l=Number(f.value)>Number(U.value);return!!(!_.value&&!r.value||Number(_.value)<=0&&h.value||Number(r.value)<=0&&X.value||!f.value||f.value<=0||l||G.value||ke.value!=="STATUS_RUNNING"||J.value||h.value&&Number(_.value)>Number($.value)||X.value&&Number(r.value)>Number($.value))}),go=l=>(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||uo("/image/coins/sui-unknown.png"),P=l=>{_.value="",r.value="",D.value=!0,x.value="",l=="only-a"?(h.value=!h.value,X.value=!1,j.value=!0):(X.value=!X.value,h.value=!1,j.value=!1)},W=l=>{D.value=!0,a.value=100,l==="fromCoin"?j.value=!0:j.value=!1},ce=l=>{D.value=!0,a.value=50,l==="fromCoin"?j.value=!0:j.value=!1},$=g(),we=async()=>{const l=n.value.token_a.decimals,L=n.value.token_b.decimals,Z=new u(ye.value).mul(new u(Math.pow(10,l))).toNumber(),ee=new u(me.value).mul(new u(Math.pow(10,L))).toNumber(),Q=h.value?ee:Z,ae=h.value?y.value.address===n.value.token_a.address:v.value.address===n.value.token_a.address;try{const fe=await A.value.swapRouterContract.getSwapRouter(h.value?y:v,h.value?v:y,Q,!0,Number(T.value)/100,"",void 0,[{pool_id:n.value.address,tick_lower:n.value.autoPoolPositionInfo.tick_lower_index,tick_upper:n.value.autoPoolPositionInfo.tick_upper_index,delta_liquidity:Number(n.value.positionLiquidity),is_increase:!1}]),se=new u(fe.amountOut);$.value=se.sub(se.mul(Number(T.value)/100)).add(new u(h.value?ye.value:me.value)).toString()}catch{if(h.value||X.value){let se=await F.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:ae,byAmountIn:!0,amount:Q});const Y=new u(se.estimatedAmountOut);$.value=Y.sub(Y.mul(Number(T.value)/100)).add(new u(h.value?ye.value:me.value)).toString(),h.value?_.value=S(new u($.value).mul(a.value/100).toString(),v.value.decimals):r.value=S(new u($.value).mul(a.value/100).toString(),y.value.decimals),pe({value:a.value/100})}}pe({value:a.value/100})};Ie(()=>[h.value,X.value,ye.value,me.value],([l,L])=>{l||L?we():pe({value:a.value/100})},{immediate:!0});const he=l=>`${l}%`,ke=b(()=>k.value.currentAutoPoolStatus),Ne=g(),Be=()=>{Ne.value=window.setInterval(()=>{(_.value||r.value)&&!D.value?H():pe({value:a.value/100})},2e4)};return bo(()=>{Be()}),So(()=>{window.clearInterval(Ne.value)}),{removeLiquidityBtnText:fo,removeLiquidityBtnDisabled:_o,wallet:t,ratioArr:w,positionInfo:n,isShowRemoveModal:C,needReverse:d,fromCoin:v,toCoin:y,lpAmount:f,lpBalance:U,sliderVal:a,sFixD:S,isSlider:D,fromCoinAmount:_,toCoinAmount:r,setPercent:pe,toRemove:co,addCommom:R,getCoinIcon:go,isOnlyA:h,isOnlyB:X,onlyToken:P,fixedFromCoin:j,maxBtnSelect:W,halfBtnSelect:ce,fromCoinBlance:ye,toCoinBlance:me,showFromCoinLock:ne,showToCoinLock:te,removeText:x,onlyTokenBalance:$,totalWithdraw:Se,formatter:he,currentAutoPoolStatus:ke,calculateLoading:ve}}});const po=e=>(ze("data-v-7b9122a1"),e=e(),Ge(),e),Os={class:"auto-pool-add"},Vs={class:"auto-pool-add-content"},Es={class:"liquidity-action-tab"},Ws=po(()=>o("div",{class:"remove tab-active"},"Remove",-1)),js={key:0,class:"only-token"},Xs=po(()=>o("div",null,"Deposit Amounts",-1)),zs={key:0},Gs={key:0},Hs={key:0,class:"card-item"},Ys={key:1,class:"card-item"},Ks={class:"remove-ratio"},Zs={class:"remove-ratio-select"},Js={key:0,class:"ratio"},Qs={key:1,class:"ratio"},xs={class:"ratio-list"},ea=["onClick"],oa=po(()=>o("span",null,"Pool Closed",-1)),na={key:4,class:"remove-info"},ta={key:0,class:"remove-text total-amount"},ia={class:"total-amount"},sa=po(()=>o("span",null,"Total Withdraw",-1)),aa={key:0},la={class:"total-amount"},ua=po(()=>o("span",null,"LP Burn Amount",-1)),ra={key:0};function da(e,t,E,O,T,N){var n,d,v,y,C,f,U,D,F,G,J,K,_;const p=Yo,A=Ko,w=Wo,a=io("AutoPoolV2PoolStatus"),i=Ao,B=Xo,k=Jo;return s(),c("div",Os,[o("div",Vs,[o("div",Es,[o("div",{class:"increase",onClick:t[0]||(t[0]=jo(r=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),Ws]),!e.showFromCoinLock&&!e.showToCoinLock?(s(),c("div",js,[Xs,o("div",null,[o("div",{class:"only-a",onClick:t[1]||(t[1]=r=>e.onlyToken("only-a"))},[o("p",null,[e.isOnlyA?(s(),c("span",zs)):M("",!0)]),o("span",null,m(e.needReverse?(y=(v=e.positionInfo)==null?void 0:v.token_b)==null?void 0:y.symbol:(d=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:d.symbol)+" only",1)]),o("div",{class:"only-b",onClick:t[2]||(t[2]=r=>e.onlyToken("only-b"))},[o("p",null,[e.isOnlyB?(s(),c("span",Gs)):M("",!0)]),o("span",null,m(e.needReverse?(D=(U=e.positionInfo)==null?void 0:U.token_a)==null?void 0:D.symbol:(f=(C=e.positionInfo)==null?void 0:C.token_b)==null?void 0:f.symbol)+" only",1)])])])):M("",!0),o("div",{class:Oe(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(s(),c("div",Hs,[V(p,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[3]||(t[3]=r=>e.fromCoinAmount=r),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:t[4]||(t[4]=r=>e.maxBtnSelect("fromCoin")),onOnHalf:t[5]||(t[5]=r=>e.halfBtnSelect("fromCoin")),onOnInput:t[6]||(t[6]=r=>{e.isSlider=!1,e.fromCoinAmount=r}),onOnFocus:t[7]||(t[7]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(s(),z(A,{key:0})):M("",!0)])):M("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(s(),c("div",Ys,[V(p,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[8]||(t[8]=r=>e.toCoinAmount=r),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:t[9]||(t[9]=r=>e.maxBtnSelect("toCoin")),onOnHalf:t[10]||(t[10]=r=>e.halfBtnSelect("toCoin")),onOnInput:t[11]||(t[11]=r=>{e.isSlider=!1,e.toCoinAmount=r}),onOnFocus:t[12]||(t[12]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(s(),z(A,{key:0})):M("",!0)])):M("",!0)],2),o("div",Ks,[o("div",Zs,[Number(e.lpBalance)>=Number(e.lpAmount)?(s(),c("div",Js,m(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:I(S))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:I(S))(e.sliderVal,2))+"% ",1)):(s(),c("div",Qs,"--")),o("div",xs,[(s(!0),c(to,null,Eo(e.ratioArr,(r,q)=>(s(),c("div",{key:q,class:Oe(["ratio-item",e.sliderVal==r.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=r.value}},m(r.name),11,ea))),128))])]),V(w,{value:e.sliderVal,"onUpdate:value":t[13]||(t[13]=r=>e.sliderVal=r),"tip-formatter":e.formatter,onChange:t[14]||(t[14]=r=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(s(),z(a,{key:0})):M("",!0),(F=e.positionInfo)!=null&&F.is_pause?(s(),z(i,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:_e(()=>[oa]),_:1})):e.wallet.connected?(s(),z(i,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:t[15]||(t[15]=r=>e.toRemove())},{default:_e(()=>[o("span",null,m(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(s(),z(i,{key:3,class:"big-btn liquidity-btn",onClick:t[16]||(t[16]=r=>e.wallet.setIsShowWalletModal(!0))},{default:_e(()=>[o("span",null,m(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?M("",!0):(s(),c("div",na,[e.removeText&&(e.isOnlyA&&Number(e.fromCoinAmount)>0||e.isOnlyB&&Number(e.toCoinAmount)>0)?(s(),c("div",ta,m(e.removeText),1)):M("",!0),o("div",ia,[sa,e.calculateLoading?(s(),z(B,{key:1,paragraph:!1,active:""})):(s(),c("span",aa,m(e.totalWithdraw),1))]),o("div",la,[ua,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(s(),c("span",ra,m(("addCommom"in e?e.addCommom:I(R))(("sFixD"in e?e.sFixD:I(S))(e.lpAmount,e.positionInfo.decimals)))+" "+m(e.needReverse?(G=e.toCoin)==null?void 0:G.symbol:(J=e.fromCoin)==null?void 0:J.symbol)+"-"+m(e.needReverse?(K=e.fromCoin)==null?void 0:K.symbol:(_=e.toCoin)==null?void 0:_.symbol),1)):(s(),z(B,{key:1,paragraph:!1,active:""}))])])),e.isShowRemoveModal?(s(),z(k,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:t[17]||(t[17]=r=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):M("",!0)])}const va=We(Fs,[["render",da],["__scopeId","data-v-7b9122a1"]]),ma=Xe({components:{AutoPoolV2Info:xo,AutoPoolV2PositionRange:en,AutoPoolV2PoolComposition:nn,AutoPoolV2PoolLiquidity:tn,AutoPoolV2PoolAdd:Us,AutoPoolV2PoolRemove:va},setup(){const e=Ze();eo();const t=ho(),E=b(()=>t),O=b(()=>e),T=xe(),N=g();Ie(()=>[O.value.positionInfoObj,T.params.id],([a,i])=>{a&&!Ke(a)&&i&&(N.value=a[i])},{immediate:!0,deep:!0});const p=async()=>{e.getAutoPoolAPY(),e.getVault(T.params.id)},A=g();Ie(()=>T.query.action,a=>{a&&(A.value=a)},{immediate:!0}),bo(()=>{e.getVault(T.params.id)}),b(()=>E.value.chainName),To();const w=b(()=>O.value.autoPoolLoading);return{clickRefresh:p,currentTab:A,positionInfo:N,autoPoolLoading:w}}});const pa={class:"auto-pool-detail-v2"},ca={class:"detail-top"},fa={class:"detail-bottom pc-detail"},ba={class:"detail-bottom-left"},ya={class:"detail-bottom-right"},ha={class:"h5-detail"},ka={key:0,class:"loading-global"};function _a(e,t,E,O,T,N){const p=On,A=xo,w=en,a=nn,i=tn,B=io("AutoPoolV2PoolAdd"),k=io("AutoPoolV2PoolRemove"),n=fn;return s(),c("div",pa,[o("div",ca,[V(p,{"pool-info":e.positionInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"]),V(A)]),o("div",fa,[o("div",ba,[V(w),V(a),V(i)]),o("div",ya,[e.currentTab=="deposit"?(s(),z(B,{key:0,onChangeCurrentTab:t[0]||(t[0]=d=>e.currentTab="remove")})):(s(),z(k,{key:1,onChangeCurrentTab:t[1]||(t[1]=d=>e.currentTab="deposit")}))])]),o("div",ha,[e.currentTab=="deposit"?(s(),z(B,{key:0,onChangeCurrentTab:t[2]||(t[2]=d=>e.currentTab="remove")})):(s(),z(k,{key:1,onChangeCurrentTab:t[3]||(t[3]=d=>e.currentTab="deposit")})),V(w),V(a),V(i)]),e.autoPoolLoading?(s(),c("div",ka,[V(n)])):M("",!0)])}const Ga=We(ma,[["render",_a],["__scopeId","data-v-3aa945f2"]]);export{Ga as default};
