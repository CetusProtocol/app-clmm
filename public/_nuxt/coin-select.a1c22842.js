import{i as C}from"./import-icon.de3e6c66.js";import{f as re,u as ue,e as ne,a as ce,p as de,B as pe}from"./pool.36054a1a.js";import{a as ve,M as be,a5 as _e,l as me,m as N,r as k,y as fe,D as z,ab as he,e as ke,K as U,q as ge,o as i,c as ee,w as b,h as a,t as B,a3 as Ce,f as r,x as M,F as q,s as K,u as g,v as c,z as se,i as O,j as E,L as ye,N as we,ac as Le,J as Se,p as Te,k as Ie}from"./entry.bcd578c9.js";/* empty css              *//* empty css              */import{u as oe}from"./index.c9f4ff60.js";import{_ as $e,a as Ne}from"./img-no-Positions_2x.ab8c14c6.js";const Oe=ve({components:{Modal:be,LoadingOutlined:_e},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""},isCreatePoolToCoin:{type:Boolean,default:!1},isCreatePoolFromCoin:{type:Boolean,default:!1}},setup(e,p){const{t:l,locale:te}=me(),J=re(),_=N(()=>J),S=ue(),d=N(()=>S),j=oe(),m=N(()=>j),A=N(()=>{var n;return(n=m.value)==null?void 0:n.filterCreatePoolCoin}),F=k([l("tab.all"),l("tab.native"),l("tab.layerZero"),l("tab.wormhole"),l("tab.celer")]),u=k(l("tab.all")),o=k(l("tab.all")),w=oe(),T=N(()=>w.chainName),I=k([]),P=k(null);fe(()=>{});const R=k(!1);z(u,n=>{n!==l("tab.all")&&(R.value=!1),n==l("tab.all")?o.value=l("tab.all"):n==l("tab.layerZero")?o.value=l("tab.layerZero"):n==l("tab.wormhole")?o.value=l("tab.wormhole"):n==l("tab.celer")?o.value=l("tab.celer"):n==l("tab.native")&&(o.value=l("tab.native")),D(P.value)});const D=async n=>{var G,H,Q,X,Y,V,x;let f=[],L=d.value.tokens;if(!(m.value.chainName&&L&&L[0]&&m.value.chainName.toLowerCase().includes((G=L[0])==null?void 0:G.chain))){I.value=[];return}let Z=L;if(n&&n.split("::")&&n.split("::").length==3&&T.value=="Sui"){const t=ce("Sui");try{const s=d.value.tokensObj[n]||await t.getTokenBySymbol(d.value.tokens,n);s&&((H=L.filter(v=>(v==null?void 0:v.address)===(s==null?void 0:s.address)))==null?void 0:H.length)<1&&(S.setNewTokens({[n]:s}),Z=L.concat(s))}catch{}}for(const t of Object.keys(Z)){let s=he(Z[t]);const v=_.value.assets[s.address]&&_.value.assets[s.address].balance?de(_.value.assets&&_.value.assets[s.address].balance,s.decimals):0;e.lastSelectCoin&&s&&s.address===e.lastSelectCoin?s.unusable=!0:s.unusable=!1;const le=((Q=d.value.tokensObj[s.address])==null?void 0:Q.labels)&&((X=d.value.tokensObj[s.address])==null?void 0:X.labels[0]),ie=d.value.tokensObj[s.address]?(Y=d.value.tokensObj[s.address])==null?void 0:Y.name:s.name;s={...s,balance:v,labels:le,name:ie,sort:(m.value.chainName==="Aptos"?s.symbol=="APT":s.symbol=="SUI")?1:-1},f.push(s)}let $;_.value.address?$=f.sort((t,s)=>s.balance-t.balance):$=f;let h=[];if(n){const t=$.filter(s=>s.symbol.toLowerCase().indexOf(n.toLowerCase())!==-1||s.address.toLowerCase().indexOf(n.toLowerCase())!==-1||s.address.toLowerCase().indexOf(pe(n).full_address.toLowerCase())!==-1||s.name.toLowerCase().indexOf(n.toLowerCase())!==-1);u.value!==l("tab.all")?h=t.filter(v=>u.value==l("tab.native")?!v.labels:v.labels&&v.labels.toLowerCase()==u.value.toLowerCase()):h=t}else u.value!==l("tab.all")?h=$.filter(s=>u.value==l("tab.native")?!s.labels:s.labels&&s.labels.toLowerCase()==u.value.toLowerCase()):h=$;e.isCreatePoolToCoin?I.value=(V=h.filter(t=>A.value[t==null?void 0:t.address]))==null?void 0:V.sort((t,s)=>s.sort-t.sort).sort((t,s)=>s.unusable-t.unusable):I.value=h.sort((t,s)=>s.sort-t.sort).sort((t,s)=>s.unusable-t.unusable),e.isCreatePoolFromCoin&&(I.value=(x=h.filter(t=>!A.value[t==null?void 0:t.address]))==null?void 0:x.sort((t,s)=>s.sort-t.sort).sort((t,s)=>s.unusable-t.unusable))},ae=n=>{n.unusable||(p.emit("onSelect",n),p.emit("onClose"))};z(()=>[P.value,R.value],([n,f])=>{D(n)},{immediate:!0});const W=k([]);return z(()=>d.value.tokens,n=>{n&&(D(P.value),W.value=n.filter(f=>f.suggested_priority&&f.suggested_priority>0))},{immediate:!0}),{popularList:W,pools:d,t:l,chainName:T,tabList:F,currentTab:u,addCommom:ne,tokenList:I,importIcon:C,keyword:P,wallet:_,toSelect:ae,store:m,isShowAll:R}}}),Ae=""+globalThis.__publicAssetsURL("sui-image/token-warning@2x.png");const y=e=>(Te("data-v-ed06dfbb"),e=e(),Ie(),e),Pe=y(()=>a("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Be={class:"coin-select-modal"},Me={class:"search-input"},je=["placeholder"],Fe=y(()=>a("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),Re=[Fe],De={key:0,class:"popular"},Ze=["onClick"],ze={key:1,class:"tab-list"},Ue=["onClick"],qe={class:"item"},Ke=y(()=>a("div",{class:"line"},null,-1)),Ee={class:"coin-list-box"},Je={key:0,class:"coin-list"},We=["onClick"],Ge={class:"left"},He={key:0},Qe={key:1,alt:""},Xe={class:"name-box"},Ye=["onClick"],Ve=y(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-copy"})],-1)),xe=y(()=>a("img",{src:Ae,alt:""},null,-1)),es={class:"balance-box"},ss={class:"balance"},os={key:0},ns={key:1},ts={key:2},as={key:3},ls=y(()=>a("p",null,null,-1)),is={key:1,class:"no-data"},rs={key:0,class:"token-loading"},us={key:1,class:"no-data-content"},cs={key:0,src:$e},ds={key:1,src:Ne},ps=y(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1));function vs(e,p,l,te,J,_){const S=we,d=U("loading-outlined"),j=Le,m=Se,A=U("vue-scroll"),F=U("Modal"),u=ge("image");return i(),ee(F,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:p[2]||(p[2]=o=>e.$emit("onClose"))},{closeIcon:b(()=>[Pe]),default:b(()=>[a("div",Be,[a("div",Me,[B(a("input",{"onUpdate:modelValue":p[0]||(p[0]=o=>e.keyword=o),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,je),[[Ce,e.keyword]]),e.keyword?(i(),r("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:p[1]||(p[1]=o=>e.keyword="")},Re)):M("",!0)]),e.popularList&&e.popularList.length>0?(i(),r("div",De,[(i(!0),r(q,null,K(e.popularList,o=>(i(),r("div",{key:o.address,class:"img-box",onClick:w=>e.toSelect(o)},[B(a("img",null,null,512),[[u,o.icon||o.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:g(C))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(C))("/image/coins/sui-unknown.png"))]]),a("span",null,c(o.symbol),1)],8,Ze))),128))])):M("",!0),e.chainName!=="Sui"?(i(),r("div",ze,[(i(!0),r(q,null,K(e.tabList,(o,w)=>(i(),r("div",{key:w,class:se(["item-container",e.currentTab==o?"item-container-active item-container":"item-container"]),onClick:T=>e.currentTab=o},[a("div",qe,c(o),1)],10,Ue))),128))])):M("",!0),Ke,a("div",Ee,[O(A,null,{default:b(()=>[e.tokenList&&e.tokenList.length>0?(i(),r("ul",Je,[(i(!0),r(q,null,K(e.tokenList,(o,w)=>(i(),r("li",{key:w,class:se(o.unusable?"unusable":""),onClick:T=>e.toSelect(o)},[a("div",Ge,[o.isChinaToken?B((i(),r("img",Qe,null,512)),[[u,e.store.theme=="default"?("importIcon"in e?e.importIcon:g(C))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(C))("/image/coins/sui-unknown.png")]]):B((i(),r("img",He,null,512)),[[u,o.icon||o.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:g(C))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(C))("/image/coins/sui-unknown.png"))]]),a("div",Xe,[a("span",null,[E(c(o.symbol)+" ",1),a("span",{class:"copy-text",onClick:ye(T=>e.store.copy(o&&o.address),["stop"])},[E(c(o.address&&o.address.substr(0,4))+" ... "+c(o.address&&o.address.substr(o.address.length-4,4))+" ",1),Ve],8,Ye),o.isSelfBuilt?(i(),ee(S,{key:0,placement:"right","arrow-point-at-center":""},{title:b(()=>[a("span",null,c(e.t("newAdd.notCetusTokenList")),1)]),default:b(()=>[xe]),_:1})):M("",!0)]),a("p",null,c(o.name)+" "+c(o.labels?`(${o.labels})`:""),1)])]),a("div",es,[a("div",ss,[e.wallet.loading?(i(),r("div",os,[O(j,null,{default:b(()=>[O(d)]),_:1})])):o.balance&&e.wallet.connected?(i(),r("div",ns,c(("addCommom"in e?e.addCommom:g(ne))(o.balance,o.decimals)),1)):!o.balance&&e.wallet.connected?(i(),r("div",ts,"0")):(i(),r("div",as))]),ls])],10,We))),128))])):(i(),r("div",is,[e.pools.isTokenLoading?(i(),r("div",rs,[O(m)])):(i(),r("div",us,[e.store.theme=="default"?(i(),r("img",cs)):(i(),r("img",ds)),a("p",null,c(e.t("newAdd.noTokensFound")),1),a("div",null,[E(c(e.t("newAdd.enterCoinType"))+" ",1),O(S,{placement:"bottom","arrow-point-at-center":""},{title:b(()=>[a("span",null,c(e.t("newAdd.uniqueIdOfCoin")),1)]),default:b(()=>[ps]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const Cs=ke(Oe,[["render",vs],["__scopeId","data-v-ed06dfbb"]]);export{Cs as _,Ae as a};
