import{_ as X}from"./upgrade-loading.09f84f5d.js";import{_ as z}from"./upgrade-position-item.76242122.js";import{a as Q,r as w,y as Y,b as Z,m as M,l as a,H as x,R as ee,q as R,X as oe,e as se,o as r,f as l,i as O,x as N,F as te,E as ne,h as ae,v as U,w as re,B as le,c as ue,j as ie}from"./entry.78f7e1cd.js";import{u as ce,a as de,c as me}from"./sha256.cef999c3.js";import{u as pe}from"./notifi.cc8101b9.js";import{u as ve}from"./pool.cf03ad3e.js";import{i as q}from"./import-icon.de3e6c66.js";import{_ as _e}from"./img-no-Positions_2x.802af2b1.js";import{_ as fe}from"./img-no-Positions_2x.84680343.js";import{_ as ge}from"./img-connect-wallet_2x.de2061b3.js";import{_ as he}from"./img-connect-wallet_2x.db4144a2.js";/* empty css              *//* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";import"./status-block.babd6753.js";/* empty css              */import"./decimal.0bdeb344.js";import"./farms.5326d006.js";import"./farms.a0352ac7.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./icon_rewards_2x.9e82e711.js";import"./useWhale.c0c16b90.js";const ye=Q({setup(){const s=w(!1),{t:S}=Y(),C=w(["position"]),G=Z(),E=M(),$=w(""),h=ce(),i=a(()=>h),A=a(()=>{const e=E.query.poolAddress;return n.value.poolConfigObj[e]}),P=a(()=>i.value.chainName?me[i.value.chainName]:{});let c=w([]);const y=ve(),n=a(()=>y),V=de(),b=a(()=>V),D=()=>{s.value=!0,c.value=[],b.value.address&&y.getMyPositons(b.value.address,n.value.poolsObj,i.value.chainName),setTimeout(()=>{s.value=!1},1e3)};x(()=>{c.value=[],y.setMyPositionsLoading(!0)}),ee(()=>{b.value.connected||(c.value=[])});const F=()=>{s.value=!0;let e=[];n.value.poolPositions.forEach(o=>{var L,g,T,B;let t,u;const m=o.amountA*((L=n.value.RATES[o.token_a.address])==null?void 0:L.price),p=o.amountB*((g=n.value.RATES[o.token_b.address])==null?void 0:g.price);(T=n.value.RATES[o.token_a.address])!=null&&T.price&&((B=n.value.RATES[o.token_b.address])!=null&&B.price)?(t=m+p,u=m+p):(t=" --",u=0),e.push({...o,amountUSD:t,amountUSDOrigin:u,tokenARates:m,tokenBRates:p})}),c.value=e};R(()=>[n.value.poolPositions,n.value.RATES,A.value],([e,o,t])=>{e&&o&&t&&F()},{immediate:!0}),R(()=>[b.value.address,A.value,i.value.chainName],([e,o,t])=>{e&&o&&t&&y.getMyPositonsByPool(e,o,t)},{immediate:!0,deep:!0});const k=pe(),d=a(()=>k),j=a(()=>y),J=async e=>{await k.getSourceGroups();const o=d.value.sourceGroups&&d.value.sourceGroups.length>0&&d.value.sourceGroups[0]&&d.value.sourceGroups[0].sources||[];for(let t=0;t<o.length;t++){const{pool_address:u,position_index:m}=JSON.parse(o[t].blockchainAddress);let p=!1,L;for(let g=0;g<e.length;g++){const{poolAddress:T,index:B}=e[g];u==T&&Number(B)==Number(m)&&(p=!0),L={pool_address:u,position_index:m}}p||await k.subscribePosition(L,"",!1,!1)}},W=async()=>{await k.getSourceGroups();const e=d.value.sourceGroups&&d.value.sourceGroups.length>0&&d.value.sourceGroups[0]&&d.value.sourceGroups[0].sources||[];for(let o=0;o<e.length;o++){const{pool_address:t,position_index:u}=JSON.parse(e[o].blockchainAddress),{name:m}=e[o],p={pool_address:t,position_index:u};await k.subscribePosition(p,m,!1,!1)}},H=a(()=>j.value.myPositionsLoading);R(()=>j.value.poolPositions,(e,o)=>{P.value.hasNotifi&&(e&&e.length>0&&o&&o.length!==e.length?J(e):e&&e.length==0&&!H.value&&W())},{immediate:!0});const I=e=>{var o;return(e==null?void 0:e.logoURI)||(e==null?void 0:e.logo_url)||((o=n.value.tokensObj[e==null?void 0:e.address])==null?void 0:o.logo_url)||(i.value.theme==="default"?q("/image/coins/unknown.png"):q("/image/coins/sui-unknown.png"))},v=w(null),_=a(()=>v.value&&v.value.firstToken?v.value.firstToken:null),f=a(()=>v.value&&v.value.lastToken?v.value.lastToken:null),K=a(()=>{let e=[];e=c.value;const o=e.filter((t,u)=>_.value&&f.value?t.coinA.symbol==_.value.symbol&&t.coinB.symbol==f.value.symbol||t.coinA.symbol==f.value.symbol&&t.coinB.symbol==_.value.symbol:_.value?t.coinA.symbol.toLowerCase().includes(_.value.symbol.toLowerCase())||t.coinB.symbol.toLowerCase().includes(_.value.symbol.toLowerCase()):f.value?t.coinA.symbol.toLowerCase().includes(f.value.symbol.toLowerCase())||t.coinB.symbol.toLowerCase().includes(f.value.symbol.toLowerCase()):e);return n.value.myPositionsLoading||h.setPositiomAmount(o.length),o});return oe(()=>{h.setPositiomAmount("--")}),{showList:K,childTokenSelectRef:v,firstToken:_,lastToken:f,getCoinIcon:I,t:S,pools:n,store:i,wallet:b,list:c,clickRefresh:D,refresh:s,current:C,router:G,searchKey:$}}});const be={class:"your-liquidity-container"},ke={key:0,class:"upgrade-loading"},Le={key:1,class:"position-list"},we={key:2,class:"no-data"},Se={key:0,src:_e,alt:""},Ae={key:1,src:fe,alt:""},Pe={key:3,class:"no-data"},Te={key:0,src:ge,alt:""},Be={key:1,src:he,alt:""};function Ne(s,S,C,G,E,$){const h=X,i=z,A=le;return r(),l("div",be,[s.pools.myPositionsLoading&&s.wallet.connected?(r(),l("div",ke,[O(h,{loading:s.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):N("",!0),s.showList&&s.showList.length>0&&s.wallet.connected&&!s.pools.myPositionsLoading?(r(),l("div",Le,[(r(!0),l(te,null,ne(s.showList,(P,c)=>(r(),ue(i,{key:c,"p-item":P},null,8,["p-item"]))),128))])):N("",!0),s.showList&&s.showList.length<=0&&!s.pools.myPositionsLoading&&s.wallet.connected?(r(),l("div",we,[s.store.theme=="default"?(r(),l("img",Se)):(r(),l("img",Ae)),ae("span",null,U(s.$t("common.noLiquidityPositions")),1)])):N("",!0),s.wallet.connected?N("",!0):(r(),l("div",Pe,[s.store.theme=="default"?(r(),l("img",Te)):(r(),l("img",Be)),O(A,{class:"connect-wallet",onClick:S[0]||(S[0]=P=>s.wallet.setIsShowWalletModal(!0))},{default:re(()=>[ie(U(s.$t("button.connectWallet")),1)]),_:1})]))])}const xe=se(ye,[["render",Ne],["__scopeId","data-v-46b7787d"]]);export{xe as default};
