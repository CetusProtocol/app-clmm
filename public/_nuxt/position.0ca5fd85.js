import{_ as Ee}from"./upgrade-select-input.ee50dbdf.js";import{_ as Fe}from"./upgrade-loading.4b78b42f.js";import{_ as Ve}from"./status-block.5d87fca3.js";import{g as le,a as He,u as _e,s as Ge,j as me,e as p,i as qe,b as We,c as ue,d as v,D as Me}from"./pool.0f02dce8.js";import{a as he,l as ke,m as k,e as ge,o as t,f as r,h as s,i as V,u as o,v as a,c as Re,w as ve,x as b,j as M,z as ae,N as ze,p as be,k as Ie,b as $e,r as U,D as W,y as Ue,q as Je,t as T,F as Z,s as Q,S as Ke,C as Ze,O as Qe,W as Xe,L as ye,B as Ye}from"./entry.868b1999.js";/* empty css              */import{u as we,c as Ne,a as xe}from"./sha256.42d79f92.js";/* empty css              */import{i as ne}from"./import-icon.de3e6c66.js";import{_ as Ce}from"./icon-arrow_2x.948aedb2.js";import{_ as Se}from"./icon-arrow_2x.4ffddb8e.js";import{u as es}from"./notifi.80842605.js";import{_ as Ae}from"./icon_on_2x.5e96733d.js";import{_ as ss,a as os}from"./img-no-Positions_2x.bdbddfda.js";import{_ as as,a as ns}from"./img-connect-wallet_2x.cdcf14ea.js";import"./coin-select.d4250827.js";/* empty css              *//* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";import"./useWhale.9399a09b.js";import"./index.ad9b9f46.js";const ts=he({props:{pItem:{type:Object,required:!0},currentStatus:{type:String,required:!0},rewarderInfo:{type:Number,required:!0},aprAmount:{type:Number,required:!0}},setup(e){const{t:g}=ke(),j=we(),N=k(()=>j),I=k(()=>N.value.chainName),L=k(()=>Ne[I.value]);return{getExplorerUrl:le,store:N,config:L,t:g}}});const Pe=e=>(be("data-v-4530e4e6"),e=e(),Ie(),e),rs={class:"status-block-box"},is={key:0,class:"owner-addres"},ds=["href"],ls=["href"],ms={class:"copy-link"},us=Pe(()=>s("use",{"xlink:href":"#icon-icon-copy"},null,-1)),ps=["href"],cs=Pe(()=>s("svg",{class:"icon","aria-hidden":"true"},[M(" > "),s("use",{"xlink:href":"#icon-icon-link"})],-1)),vs=[cs];function hs(e,g,j,N,I,L){const R=Ve,c=ze;return t(),r("div",{class:ae(["upgrade-position-status",`position-status-${e.pItem.currentStatus.toLowerCase()}`])},[s("div",rs,[V(R,{class:"status-block","current-status":e.pItem.currentStatus||"","is-pause":e.pItem.is_pause,"apr-amount":e.aprAmount,"block-name":"position"},null,8,["current-status","is-pause","apr-amount"])]),e.pItem.tokenName?(t(),r("div",is,[e.pItem.tokenName.length<=24?(t(),r("a",{key:0,href:("getExplorerUrl"in e?e.getExplorerUrl:o(le))("nftAddress",e.pItem.nftHash),target:"_blank"},a(e.pItem.tokenName.split("|")[1]),9,ds)):(t(),Re(c,{key:1,placement:"bottom","arrow-point-at-center":""},{title:ve(()=>[s("span",null,a(e.pItem.tokenName),1)]),default:ve(()=>[s("a",{target:"_blank",href:("getExplorerUrl"in e?e.getExplorerUrl:o(le))("nftAddress",e.pItem.nftHash)},a(e.pItem.tokenName.substr(0,4))+" ... "+a(e.pItem.tokenName.substr(e.pItem.tokenName.length-4,4)),9,ls)]),_:1}))])):b("",!0),s("div",ms,[(t(),r("svg",{class:"icon","aria-hidden":"true",onClick:g[0]||(g[0]=h=>e.store.copy(e.pItem.nftHash))},[M(" > "),us])),e.pItem.tokenName.length<=24?(t(),r("a",{key:0,href:("getExplorerUrl"in e?e.getExplorerUrl:o(le))("nftAddress",e.pItem.nftHash),target:"_blank"},vs,8,ps)):b("",!0)])],2)}const ks=ge(ts,[["render",hs],["__scopeId","data-v-4530e4e6"]]),gs=he({props:{pItem:{type:Object,required:!0}},setup(e){const{t:g}=ke(),j=$e(),N=we(),I=k(()=>N),L=k(()=>I.value.chainName?He(I.value.chainName):{}),R=_e(),c=k(()=>R),h=()=>{I.value.chainName==="Aptos"?j.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`):j.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}&pos=${e.pItem.pos_object_id}`)},C=k(()=>c.value.allTokenObj&&e.pItem.token_a.address&&c.value.allTokenObj[e.pItem.token_a.address]&&c.value.allTokenObj[e.pItem.token_a.address].logo_url),n=k(()=>c.value.allTokenObj&&e.pItem.token_b.address&&c.value.allTokenObj[e.pItem.token_b.address]&&c.value.allTokenObj[e.pItem.token_b.address].logo_url),H=k(()=>c.value.feeOwedObj[e.pItem.tokenName]&&c.value.feeOwedObj[e.pItem.tokenName].feeOwed),B=k(()=>c.value.feeOwedObj[e.pItem.tokenName]&&c.value.feeOwedObj[e.pItem.tokenName].feesResult),X=k(()=>c.value.rewarderObj[e.pItem.tokenName]&&c.value.rewarderObj[e.pItem.tokenName].pendingRewarder),G=k(()=>c.value.rewarderObj[e.pItem.tokenName]&&c.value.rewarderObj[e.pItem.tokenName].pendingRewarderView),Y=k(()=>c.value.rewarderObj[e.pItem.tokenName]&&c.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr),z=U(0),pe=U();W(()=>c.value.RATES,u=>{u&&(pe.value=u)},{immediate:!0});const te=u=>{var S;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((S=c.value.tokensObj[u==null?void 0:u.address])==null?void 0:S.logo_url)||(I.value.theme==="default"?ne("/image/coins/unknown.png"):ne("/image/coins/sui-unknown.png"))},x=k(()=>c.value.tokensObj);Ue(()=>{ce(e.pItem),q(e.pItem.minPrice,e.pItem.maxPrice)});const ee=U("--"),q=(u,S)=>{u!=="0"&&S!=="∞"?ee.value=Ge(1/(1-Number((u/S)**.25)),2)+"x":ee.value=1},$=U(30),f=U(null),ce=async u=>{var _,O,E;const S=Number(e.pItem.minPrice),A=isNaN(Number(e.pItem.maxPrice))||e.pItem.maxPrice=="∞"?2**50:Number(e.pItem.maxPrice);let y=[];y=I.value&&I.value.addressHistTokens&&I.value.addressHistTokens[u.poolAddress]&&I.value.addressHistTokens[u.poolAddress].data&&I.value.addressHistTokens[u.poolAddress].data.length>0&&Object.fromEntries(I.value.addressHistTokens[u.poolAddress].data.map(F=>[F.key,F.value]));const P=Number(Number($.value==7?y.before_7_d_contract_price_lowest:$.value==24?y.before_24_h_contract_price_lowest:y.before_30_d_contract_price_lowest)),J=Number(Number($.value==7?y.before_7_d_contract_price_highest:$.value==24?y.before_24_h_contract_price_highest:y.before_30_d_contract_price_highest)),i=c.value.tokensObj,d=await L.value.getEstPositionAPRWithMulti(S,A,P,J),l=Number(d.toString()),m=I.value.newTopPoolsObj[u.poolAddress];let w;if(m){$.value==7?w=m.apr_7day?Number(m.apr_7day.substring(0,m.apr_7day.length-1)):0:$.value==24?w=m.apr_24h?Number(m.apr_24h.substring(0,m.apr_24h.length-1)):0:w=m.apr_30day?Number(m.apr_30day.substring(0,m.apr_30day.length-1)):0;const F=m.rewarder_apr[0]?Number(m.rewarder_apr[0].substring(0,m.rewarder_apr[0].length-1)):0,K=m.rewarder_apr[1]?Number(m.rewarder_apr[1].substring(0,m.rewarder_apr[1].length-1)):0,De=m.rewarder_apr[2]?Number(m.rewarder_apr[2].substring(0,m.rewarder_apr[2].length-1)):0,se=Number(l*w),re=Number(l*F),ie=Number(l*K),de=Number(l*De),oe=se+(u.rewarder_display1?re:0)+(u.rewarder_display2?ie:0)+(u.rewarder_display3?de:0),je=u.rewarder_infos[0]?(_=i[u.rewarder_infos[0].coinAddress])==null?void 0:_.symbol:"--",Le=u.rewarder_infos[1]?(O=i[u.rewarder_infos[1].coinAddress])==null?void 0:O.symbol:"--",Te=u.rewarder_infos[2]?(E=i[u.rewarder_infos[2].coinAddress])==null?void 0:E.symbol:"--",Be={aprFee:se==1/0||isNaN(se)?0:se,rewardAprList:[{rewarder_name:je,rewarder_apr:re==1/0||isNaN(re)?0:re,styleName:"one",rewarder_display:u.rewarder_display1},{rewarder_name:Le,rewarder_apr:ie==1/0||isNaN(ie)?0:ie,styleName:"two",rewarder_display:u.rewarder_display2},{rewarder_name:Te,rewarder_apr:de==1/0||isNaN(de)?0:de,styleName:"three",rewarder_display:u.rewarder_display2}],aprPercentageTotal:oe==1/0||isNaN(oe)||oe===0?0:oe,aprPercentage:me(se/oe,2),is_display_rewarder:u.is_display_rewarder};f.value=Be}};return{aprNum:k(()=>{var u,S,A,y,P,J,i,d,l,m,w,_;return f.value?f.value.is_display_rewarder?(u=f.value)!=null&&u.aprPercentageTotal?((S=f.value)==null?void 0:S.aprPercentageTotal)>1e4?">10,000":((A=f.value)==null?void 0:A.aprPercentageTotal)<.01&&((y=f.value)==null?void 0:y.aprPercentageTotal)>0?"<0.01":p((P=f.value)==null?void 0:P.aprPercentageTotal,2):(J=f.value)!=null&&J.rewardAprList?"0":"--":(i=f.value)!=null&&i.aprFee?((d=f.value)==null?void 0:d.aprFee)>1e4?">10,000":((l=f.value)==null?void 0:l.aprFee)<.01&&((m=f.value)==null?void 0:m.aprFee)>0?"<0.01":p((w=f.value)==null?void 0:w.aprFee,2):(_=f.value)!=null&&_.rewardAprList?"0":"--":"--"}),lever:ee,tokensObj:x,showNum:qe,fromCoinUrl:C,toCoinUrl:n,decimalFormat:We,clickDetails:h,t:g,addCommom:p,importIcon:ne,router:j,store:I,pendingRewarder:X,pendingFees:H,pendingRewarderArr:Y,pendingFeesArr:B,checkNullObj:ue,fixD:me,decimalUi:v,pendingRewarderView:G,aprAmount:z,getCoinIcon:te,Decimal:Me}}});const D=e=>(be("data-v-1080e810"),e=e(),Ie(),e),bs={class:"upgrade-position-item"},Is={class:"card-content"},ws={class:"left"},fs={class:"top card-header"},ys={class:"token-item"},_s={class:"item"},Rs={key:0,class:"token-warning"},$s={key:0},Us={class:"item"},Ns={key:0,class:"token-warning"},Cs={key:0},Ss={class:"card-header-right"},As={key:0,class:"item"},Ps=D(()=>s("span",null,"Leverage",-1)),Os={class:"item"},Ds=D(()=>s("span",null,"Estimated APR",-1)),js=D(()=>s("div",{class:"more-img"},null,-1)),Ls={class:"bottom"},Ts={class:"info-block-container"},Bs={class:"info-block"},Es=D(()=>s("div",{class:"leabl"},"Fee Tier",-1)),Fs={class:"text"},Vs={class:"info-block"},Hs=D(()=>s("div",{class:"leabl"},"Price Range",-1)),Gs={class:"text"},qs={class:"min-and-max"},Ws={class:"left-text"},Ms={class:"text"},zs={class:"hover-text"},Js={key:0,src:Ce,alt:""},Ks={key:1,src:Se,alt:""},Zs={class:"right-text"},Qs={class:"text"},Xs={class:"hover-text"},Ys={class:"leabl"},xs={class:"text"},eo={key:0,class:"hover-rewarder"},so={class:"rewarder-info"},oo={class:"left-rewarder"},ao={alt:""},no={class:"right-rewarder"},to={class:"amount"},ro={key:0,class:"amount-usd"},io={key:1,class:"amount-usd"},lo={class:"rewarder-info"},mo={class:"left-rewarder"},uo={alt:""},po={class:"right-rewarder"},co={class:"amount"},vo={key:0,class:"amount-usd"},ho={key:1,class:"amount-usd"},ko={class:"leabl"},go={key:0,class:"text"},bo={key:1,class:"text"},Io={key:2,class:"text"},wo={key:3,class:"hover-rewarder"},fo={class:"left-rewarder"},yo={alt:""},_o={class:"right-rewarder"},Ro={class:"amount"},$o={class:"amount-usd"},Uo={class:"leabl"},No={key:0,class:"text"},Co={key:1,class:"text"},So={key:2,class:"hover-rewarder"},Ao={class:"left-rewarder"},Po={alt:""},Oo={class:"right-rewarder"},Do={class:"amount"},jo={class:"amount-usd"},Lo={class:"h5-bottom"},To={class:"item"},Bo=D(()=>s("span",null,"Leverage",-1)),Eo={class:"item"},Fo=D(()=>s("span",null,"Estimated APR",-1)),Vo=D(()=>s("div",{class:"more-img"},null,-1)),Ho={class:"info"},Go={class:"info-item"},qo=D(()=>s("div",{class:"left"},"Fee Tier",-1)),Wo={class:"right"},Mo={class:"info-item range-item"},zo={class:"left"},Jo={class:"right"},Ko={class:"min-and-max"},Zo={class:"text"},Qo={key:0,src:Ce,alt:""},Xo={key:1,src:Se,alt:""},Yo={class:"text"},xo={class:"info-item"},ea=D(()=>s("div",{class:"left"},"Liquidity",-1)),sa={class:"right"},oa={key:0,class:"hover-rewarder"},aa={class:"rewarder-info"},na={class:"left-rewarder"},ta={alt:""},ra={class:"right-rewarder"},ia={class:"amount"},da={key:0,class:"amount-usd"},la={key:1,class:"amount-usd"},ma={class:"rewarder-info"},ua={class:"left-rewarder"},pa={alt:""},ca={class:"right-rewarder"},va={class:"amount"},ha={key:0,class:"amount-usd"},ka={key:1,class:"amount-usd"},ga={class:"info-item"},ba=D(()=>s("div",{class:"left"},"Pending Fees",-1)),Ia={key:0,class:"right"},wa={key:1,class:"right"},fa={key:2,class:"right"},ya={key:3,class:"hover-rewarder"},_a={class:"left-rewarder"},Ra={alt:""},$a={class:"right-rewarder"},Ua={class:"amount"},Na={class:"amount-usd"},Ca={key:0,class:"info-item"},Sa={class:"left"},Aa={key:0,class:"right"},Pa={key:1,class:"right"},Oa={key:2,class:"hover-rewarder"},Da={class:"left-rewarder"},ja={alt:""},La={class:"right-rewarder"},Ta={class:"amount"},Ba={class:"amount-usd"};function Ea(e,g,j,N,I,L){var C;const R=ks,c=Ke,h=Je("image");return t(),r("div",bs,[s("div",Is,[s("div",ws,[V(R,{"p-item":e.pItem,"current-status":((C=e.pItem)==null?void 0:C.currentStatus)||"","rewarder-info":e.pendingRewarder,"apr-amount":e.aprAmount},null,8,["p-item","current-status","rewarder-info","apr-amount"])]),s("div",{class:"right",onClick:g[0]||(g[0]=(...n)=>e.clickDetails&&e.clickDetails(...n))},[s("div",fs,[s("div",ys,[s("div",_s,[s("div",null,[T(s("img",null,null,512),[[h,(e.pItem.needReverse?e.toCoinUrl:e.fromCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt)?(t(),r("div",Rs)):b("",!0),s("span",null,a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("p",null,[M(a(e.pItem.needReverse?e.pItem.token_b.name:e.pItem.token_a.name)+" ",1),e.store.theme=="default"?(t(),r("span",$s,a(e.pItem.needReverse?e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:"":e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:""),1)):b("",!0)])]),s("div",Us,[s("div",null,[T(s("img",null,null,512),[[h,(e.pItem.needReverse?e.fromCoinUrl:e.toCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt)?(t(),r("div",Ns)):b("",!0),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("p",null,[M(a(e.pItem.needReverse?e.pItem.token_a.name:e.pItem.token_b.name)+" ",1),e.store.theme=="default"?(t(),r("span",Cs,a(e.pItem.needReverse?e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:"":e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:""),1)):b("",!0)])])]),s("div",Ss,[e.pItem.minPrice!=="0"&&e.pItem.maxPrice!=="∞"?(t(),r("div",As,[s("p",null,a(e.lever),1),Ps])):b("",!0),s("div",Os,[s("p",null,a(e.aprNum)+"%",1),Ds]),js])]),s("div",Ls,[s("div",Ts,[s("div",Bs,[Es,s("div",Fs,a(e.pItem.fee*100)+"%",1)]),s("div",Vs,[Hs,s("div",Gs,[s("div",qs,[s("div",Ws,[s("div",Ms,a(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.minPrice,6))),1),s("div",zs,a(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.minPrice,6))),1)]),e.store.theme=="default"?(t(),r("img",Js)):(t(),r("img",Ks)),s("div",Zs,[s("div",Qs,a((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.maxPrice,6))),1),s("div",Xs,a((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.maxPrice,6))),1)]),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)])])]),s("div",{class:ae(["info-block cursor-block",e.pItem.amountUSD=="--"||Number(e.pItem.amountUSD)==0?"block-none":""])},[s("div",Ys,a(e.$t("common.liquidity")),1),s("div",xs," $"+a(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:o(p))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(t(),r("div",eo,[s("div",so,[s("div",oo,[T(s("img",ao,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",no,[s("div",to,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountB,e.pItem.token_b.decimals)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountA,e.pItem.token_a.decimals))),1),e.pItem.needReverse?(t(),r("div",io,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:o(me))(e.pItem.tokenBRates,2):"<$0.01"),1)):(t(),r("div",ro,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:o(me))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",lo,[s("div",mo,[T(s("img",uo,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",po,[s("div",co,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountA,e.pItem.token_a.decimals)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountB,e.pItem.token_b.decimals))),1),e.pItem.needReverse?(t(),r("div",ho,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.tokenARates,2)):"<$0.01"),1)):(t(),r("div",vo,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.tokenBRates,2)):"<$0.01"),1))])])])):b("",!0)],2),s("div",{class:ae(["info-block cursor-block",e.pendingFees==0?"block-none":""])},[s("div",ko,a(e.$t("newAdd.pendingFees")),1),e.pendingFees==="--"?(t(),r("div",go,"$ --")):isNaN(e.pendingFees)?(t(),r("div",Io,[V(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),r("div",bo,a(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:o(p))(e.pendingFees,2)),1)),e.pendingFees>0?(t(),r("div",wo,[(t(!0),r(Z,null,Q(e.pendingFeesArr,n=>(t(),r("div",{key:n,class:"rewarder-info"},[s("div",fo,[T(s("img",yo,null,512),[[h,e.getCoinIcon(n)]]),s("span",null,a(n.symbol),1)]),s("div",_o,[s("div",Ro,a(Number(n.amount)==0?0:Number(n.amount)>1e-6?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(n.amount,n.decimals),n.decimals):"<0.000001"),1),s("div",$o,a(Number(n.amountUSD)==0?"$0":Number(n.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:o(p))(n.amountUSD,2):"<$0.01"),1)])]))),128))])):b("",!0)],2),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:o(ue))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(t(),r("div",{key:0,class:ae(["info-block cursor-block",e.pendingRewarder==0?"block-none":""])},[s("div",Uo,a(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(t(),r("div",No," $"+a(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(t(),r("div",Co,[V(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(t(),r("div",So,[(t(!0),r(Z,null,Q(e.pendingRewarderArr,n=>(t(),r("div",{key:n,class:"rewarder-info"},[s("div",Ao,[T(s("img",Po,null,512),[[h,n.logoURI]]),s("span",null,a(n.symbol),1)]),s("div",Oo,[s("div",Do,a(("decimalUi"in e?e.decimalUi:o(v))(n.amount,n.decimals)),1),s("div",jo,a(Number(n.amountUSD)==0?"$0":Number(n.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:o(p))(n.amountUSD,2):"<$0.01"),1)])]))),128))])):b("",!0)],2)):b("",!0)])])])]),s("div",Lo,[s("div",{class:"card-header-right",onClick:g[1]||(g[1]=(...n)=>e.clickDetails&&e.clickDetails(...n))},[s("div",To,[s("p",null,a(e.lever),1),Bo]),s("div",Eo,[s("p",null,a(e.aprNum)+"%",1),Fo]),Vo]),s("div",Ho,[s("div",Go,[qo,s("div",Wo,a(e.pItem.fee*100)+"%",1)]),s("div",Mo,[s("div",zo,[M("Price Range ("),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol)+")",1)]),s("div",Jo,[s("div",Ko,[s("div",Zo,a(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.minPrice,6))),1),e.store.theme=="default"?(t(),r("img",Qo)):(t(),r("img",Xo)),s("div",Yo,a((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.maxPrice,6))),1)])])]),s("div",xo,[ea,s("div",sa," $"+a(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:o(p))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(t(),r("div",oa,[s("div",aa,[s("div",na,[T(s("img",ta,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",ra,[s("div",ia,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountB,e.pItem.token_b.decimals)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountA,e.pItem.token_a.decimals))),1),e.pItem.needReverse?(t(),r("div",la,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:o(p))(e.pItem.tokenBRates,2):"<$0.01"),1)):(t(),r("div",da,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:o(p))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",ma,[s("div",ua,[T(s("img",pa,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",ca,[s("div",va,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountA,e.pItem.token_a.decimals)):("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountB,e.pItem.token_b.decimals))),1),e.pItem.needReverse?(t(),r("div",ka,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.tokenARates,2)):"<$0.01"),1)):(t(),r("div",ha,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.tokenBRates,2)):"<$0.01"),1))])])])):b("",!0)]),s("div",ga,[ba,e.pendingFees==="--"?(t(),r("div",Ia,"$ --")):isNaN(e.pendingFees)?(t(),r("div",fa,[V(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),r("div",wa,a(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:o(p))(e.pendingFees,2)),1)),e.pendingFees>0?(t(),r("div",ya,[(t(!0),r(Z,null,Q(e.pendingFeesArr,n=>(t(),r("div",{key:n,class:"rewarder-info"},[s("div",_a,[T(s("img",Ra,null,512),[[h,e.getCoinIcon(n)]]),s("span",null,a(n.symbol),1)]),s("div",$a,[s("div",Ua,a(Number(n.amount)==0?0:Number(n.amount)>1e-6?("addCommom"in e?e.addCommom:o(p))(("decimalUi"in e?e.decimalUi:o(v))(n.amount,n.decimals),n.decimals):"<0.000001"),1),s("div",Na,a(Number(n.amountUSD)==0?"$0":Number(n.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:o(p))(n.amountUSD,2):"<$0.01"),1)])]))),128))])):b("",!0)]),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:o(ue))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(t(),r("div",Ca,[s("div",Sa,a(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(t(),r("div",Aa," $"+a(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(t(),r("div",Pa,[V(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(t(),r("div",Oa,[(t(!0),r(Z,null,Q(e.pendingRewarderArr,n=>(t(),r("div",{key:n,class:"rewarder-info"},[s("div",Da,[T(s("img",ja,null,512),[[h,n.logoURI]]),s("span",null,a(n.symbol),1)]),s("div",La,[s("div",Ta,a(("decimalUi"in e?e.decimalUi:o(v))(n.amount,n.decimals)),1),s("div",Ba,a(Number(n.amountUSD)==0?"$0":Number(n.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:o(p))(n.amountUSD,2):"<$0.01"),1)])]))),128))])):b("",!0)])):b("",!0)])])])}const Fa=ge(gs,[["render",Ea],["__scopeId","data-v-1080e810"]]),Va=he({setup(){const e=U(!1),{t:g}=ke(),j=U(["position"]),N=$e(),I=U(""),L=we(),R=k(()=>L),c=k(()=>R.value.chainName?Ne[R.value.chainName]:{});let h=U([]);const C=_e(),n=k(()=>C),H=xe(),B=k(()=>H),X=U(!1),G=U(g("tab.all")),Y=U([g("tab.layerZero"),g("tab.wormhole"),g("tab.celer")]),z=U(!0),pe=U("TVL"),te=()=>{e.value=!0,h.value=[],B.value.address&&C.getMyPositons(B.value.address,n.value.poolsObj,R.value.chainName),setTimeout(()=>{e.value=!1},1e3)};W(()=>R.value.isRefresh,i=>{var d;i&&((d=N==null?void 0:N.currentRoute)==null?void 0:d.value.name.split("-")[1])=="position"&&te()}),Ue(()=>{h.value=[],document.addEventListener("click",()=>{X.value=!1}),C.setMyPositionsLoading(!0)}),Ze(()=>{document.addEventListener("click",()=>{X.value=!1})}),Qe(()=>{B.value.connected||(h.value=[])});const x=()=>{e.value=!0;let i=[];n.value.myPositions.forEach(d=>{var O,E,F,K;let l,m;const w=d.amountA*((O=n.value.RATES[d.token_a.address])==null?void 0:O.price),_=d.amountB*((E=n.value.RATES[d.token_b.address])==null?void 0:E.price);(F=n.value.RATES[d.token_a.address])!=null&&F.price&&((K=n.value.RATES[d.token_b.address])!=null&&K.price)?(l=w+_,m=w+_):(l=" --",m=0),i.push({...d,amountUSD:l,amountUSDOrigin:m,tokenARates:w,tokenBRates:_})}),G.value!="All"?z.value?(h.value=i.sort((d,l)=>Number(l.amountUSDOrigin)-Number(d.amountUSDOrigin)),e.value=!1):(h.value=i.sort((d,l)=>Number(d.amountUSDOrigin)-Number(l.amountUSDOrigin)),e.value=!1):z.value?(h.value=i.sort((d,l)=>l.amountUSDOrigin-d.amountUSDOrigin),e.value=!1):(h.value=i.sort((d,l)=>d.amountUSDOrigin-l.amountUSDOrigin),e.value=!1)};W(()=>[n.value.myPositions,n.value.RATES],([i,d])=>{i&&d&&x()},{immediate:!0}),W(()=>[B.value.address,n.value.poolConfigList,n.value.poolsObj,R.value.chainName],([i,d,l,m])=>{var w,_,O;i&&d&&d.length>0&&m&&(m!=null&&m.toLowerCase().includes((w=d[0])==null?void 0:w.chain))&&!ue(l)&&(m==="Aptos"?d.length===Object.values(l).length:(O=(_=Object.values(l)[0])==null?void 0:_.chain)!=null&&O.includes("sui"))&&C.getMyPositons(B.value.address,l,m)},{immediate:!0,deep:!0}),W(()=>G.value,i=>{x()}),W(()=>z.value,i=>{x()});const ee=i=>{const d=[];Y.value.forEach((l,m)=>{l==i?d[m]=G.value:d[m]=l}),Y.value=d,G.value=i},q=es(),$=k(()=>q),f=k(()=>C),ce=async i=>{await q.getSourceGroups();const d=$.value.sourceGroups&&$.value.sourceGroups.length>0&&$.value.sourceGroups[0]&&$.value.sourceGroups[0].sources||[];for(let l=0;l<d.length;l++){const{pool_address:m,position_index:w}=JSON.parse(d[l].blockchainAddress);let _=!1,O;for(let E=0;E<i.length;E++){const{poolAddress:F,index:K}=i[E];m==F&&Number(K)==Number(w)&&(_=!0),O={pool_address:m,position_index:w}}_||await q.subscribePosition(O,"",!1,!1)}},fe=async()=>{await q.getSourceGroups();const i=$.value.sourceGroups&&$.value.sourceGroups.length>0&&$.value.sourceGroups[0]&&$.value.sourceGroups[0].sources||[];for(let d=0;d<i.length;d++){const{pool_address:l,position_index:m}=JSON.parse(i[d].blockchainAddress),{name:w}=i[d],_={pool_address:l,position_index:m};await q.subscribePosition(_,w,!1,!1)}},u=k(()=>f.value.myPositionsLoading);W(()=>f.value.myPositions,(i,d)=>{c.value.hasNotifi&&(i&&i.length>0&&d&&d.length!==i.length?ce(i):i&&i.length==0&&!u.value&&fe())},{immediate:!0});const S=i=>{var d;return(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((d=n.value.tokensObj[i==null?void 0:i.address])==null?void 0:d.logo_url)||(R.value.theme==="default"?ne("/image/coins/unknown.png"):ne("/image/coins/sui-unknown.png"))},A=U(null),y=k(()=>A.value&&A.value.firstToken?A.value.firstToken:null),P=k(()=>A.value&&A.value.lastToken?A.value.lastToken:null),J=k(()=>{let i=[];i=h.value;const d=i.filter((l,m)=>y.value&&P.value?l.coinA.symbol==y.value.symbol&&l.coinB.symbol==P.value.symbol||l.coinA.symbol==P.value.symbol&&l.coinB.symbol==y.value.symbol:y.value?l.coinA.symbol.toLowerCase().includes(y.value.symbol.toLowerCase())||l.coinB.symbol.toLowerCase().includes(y.value.symbol.toLowerCase()):P.value?l.coinA.symbol.toLowerCase().includes(P.value.symbol.toLowerCase())||l.coinB.symbol.toLowerCase().includes(P.value.symbol.toLowerCase()):i);return n.value.myPositionsLoading||L.setPositiomAmount(d.length),d});return Xe(()=>{L.setPositiomAmount("--")}),{showList:J,childTokenSelectRef:A,firstToken:y,lastToken:P,getCoinIcon:S,changeSortLabel:ee,label:X,labelList:Y,labelValue:G,select:z,selectValue:pe,t:g,pools:n,store:R,wallet:B,list:h,clickRefresh:te,refresh:e,current:j,router:N,searchKey:I}}});const Oe=e=>(be("data-v-a9330e48"),e=e(),Ie(),e),Ha={class:"upgrade-position-list-container"},Ga={class:"content-top"},qa={class:"content-top-left"},Wa={class:"content-top-right"},Ma={class:"value"},za=Oe(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ja=[za],Ka={key:0,class:"select-item"},Za=["onClick"],Qa={class:"search-select-box"},Xa=Oe(()=>s("span",null,"TVL",-1)),Ya={key:0,src:Ae,alt:""},xa={key:1,class:"fan-img",src:Ae,alt:""},en={key:0,class:"upgrade-loading"},sn={key:1,class:"position-list"},on={key:2,class:"no-data"},an={key:0,src:ss,alt:""},nn={key:1,src:os,alt:""},tn={key:3,class:"no-data"},rn={key:0,src:as,alt:""},dn={key:1,src:ns,alt:""};function ln(e,g,j,N,I,L){const R=Ee,c=Fe,h=Fa,C=Ye;return t(),r("div",Ha,[s("div",Ga,[s("div",qa,[V(R,{ref:"childTokenSelectRef"},null,512)]),s("div",Wa,[e.store.theme=="default"?(t(),r("div",{key:0,class:"search-label",onClick:g[0]||(g[0]=ye(n=>e.label=!e.label,["stop"]))},[s("span",null,a(e.$t("newAdd.label")),1),s("div",Ma,a(e.labelValue),1),(t(),r("svg",{"aria-hidden":"true",class:ae(e.label?"show-icon icon":"icon")},Ja,2)),e.label?(t(),r("div",Ka,[(t(!0),r(Z,null,Q(e.labelList,(n,H)=>(t(),r("div",{key:H,class:"select-menu-item",onClick:B=>e.changeSortLabel(n)},a(n),9,Za))),128))])):b("",!0)])):b("",!0),s("div",Qa,[s("div",{class:"search-select",onClick:g[1]||(g[1]=ye(n=>e.select=!e.select,["stop"]))},[M(a(e.$t("newAdd.sortBy"))+" ",1),s("div",null,[Xa,e.select?(t(),r("img",Ya)):(t(),r("img",xa))])])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(t(),r("div",en,[V(c,{loading:e.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):b("",!0),e.showList&&e.showList.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(t(),r("div",sn,[(t(!0),r(Z,null,Q(e.showList,(n,H)=>(t(),Re(h,{key:H,"p-item":n},null,8,["p-item"]))),128))])):b("",!0),e.showList&&e.showList.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(t(),r("div",on,[e.store.theme=="default"?(t(),r("img",an)):(t(),r("img",nn)),s("span",null,a(e.$t("common.noLiquidityPositions")),1)])):b("",!0),e.wallet.connected?b("",!0):(t(),r("div",tn,[e.store.theme=="default"?(t(),r("img",rn)):(t(),r("img",dn)),V(C,{class:"connect-wallet",onClick:g[2]||(g[2]=n=>e.wallet.setIsShowWalletModal(!0))},{default:ve(()=>[M(a(e.$t("button.connectWallet")),1)]),_:1})]))])}const Pn=ge(Va,[["render",ln],["__scopeId","data-v-a9330e48"]]);export{Pn as default};
