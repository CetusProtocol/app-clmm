import{i as C}from"./import-icon.de3e6c66.js";import{u as ue,e as te,a as ce,p as de,A as pe}from"./pool.0f02dce8.js";import{a as be,M as ve,a5 as _e,l as fe,m as S,r as L,y as me,D as Z,ab as he,e as ke,K as q,q as ge,o as i,c as oe,w as m,h as a,t as j,a3 as Ce,f as r,x as A,F as K,s as E,z as J,u as g,v as p,i as O,j as B,L as ye,N as we,ac as Se,J as Le,p as Ie,k as Te}from"./entry.868b1999.js";/* empty css              *//* empty css              */import{a as Ne,u as ne}from"./sha256.42d79f92.js";import{_ as $e,a as Ae}from"./img-no-Positions_2x.bdbddfda.js";const Oe=be({components:{Modal:ve,LoadingOutlined:_e},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""},isCreatePoolToCoin:{type:Boolean,default:!1},isCreatePoolFromCoin:{type:Boolean,default:!1}},setup(e,_){const{t:l,locale:ae}=fe(),W=Ne(),h=S(()=>W),I=ue(),c=S(()=>I),F=ne(),f=S(()=>F),M=S(()=>{var n;return(n=f.value)==null?void 0:n.filterCreatePoolCoin}),R=S(()=>{const n=[l("tab.all"),l("tab.native")],u=Array.from(new Set(c.value.tokens.flatMap(b=>b.labels?b.labels:null)));return f.value.theme=="default"?n.concat(u):[l("tab.all"),l("tab.native"),l("tab.wormhole"),l("tab.celer")]}),d=L(l("tab.all")),o=L(l("tab.all")),w=ne(),T=S(()=>w.chainName),N=L([]),P=L(null);me(()=>{});const D=L(!1);Z(d,n=>{n!==l("tab.all")&&(D.value=!1),n==l("tab.all")?o.value=l("tab.all"):n==l("tab.layerZero")?o.value=l("tab.layerZero"):n==l("tab.wormhole")?o.value=l("tab.wormhole"):n==l("tab.celer")?o.value=l("tab.celer"):n==l("tab.native")&&(o.value=l("tab.native")),U(P.value)});const U=async n=>{var Q,X,Y,V,x,ee,se;let u=[],b=c.value.tokens;if(!(f.value.chainName&&b&&b[0]&&f.value.chainName.toLowerCase().includes((Q=b[0])==null?void 0:Q.chain))){N.value=[];return}let z=b;if(n&&n.split("::")&&n.split("::").length==3&&T.value=="Sui"){const t=ce("Sui");try{const s=c.value.tokensObj[n]||await t.getTokenBySymbol(c.value.tokens,n);s&&((X=b.filter(v=>(v==null?void 0:v.address)===(s==null?void 0:s.address)))==null?void 0:X.length)<1&&(I.setNewTokens({[n]:s}),z=b.concat(s))}catch{}}let H=!1;for(const t of Object.keys(z)){let s=he(z[t]);const v=h.value.assets[s.address]&&h.value.assets[s.address].balance?de(h.value.assets&&h.value.assets[s.address].balance,s.decimals):0;e.lastSelectCoin&&s&&s.address===e.lastSelectCoin?(s.unusable=!0,H=!0):s.unusable=!1;const ie=((Y=c.value.tokensObj[s.address])==null?void 0:Y.labels)&&((V=c.value.tokensObj[s.address])==null?void 0:V.labels[0]),re=c.value.tokensObj[s.address]?(x=c.value.tokensObj[s.address])==null?void 0:x.name:s.name;s={...s,balance:v,labels:ie,name:re,sort:(f.value.chainName==="Aptos"?s.symbol=="APT":s.symbol=="SUI")?1:-1},u.push(s)}if(!H&&c.value.tokensObj[e.lastSelectCoin]){const t={...c.value.tokensObj[e.lastSelectCoin],unusable:!0};u.push(t)}let $;h.value.address?$=u.sort((t,s)=>s.balance-t.balance):$=u;let k=[];if(n){const t=$.filter(s=>s.symbol.toLowerCase().indexOf(n.toLowerCase())!==-1||s.address.toLowerCase().indexOf(n.toLowerCase())!==-1||s.address.toLowerCase().indexOf(pe(n).full_address.toLowerCase())!==-1||s.name.toLowerCase().indexOf(n.toLowerCase())!==-1);d.value!==l("tab.all")?k=t.filter(v=>d.value==l("tab.native")?!v.labels||v.labels=="Native":v.labels&&v.labels.toLowerCase()==d.value.toLowerCase()):k=t}else d.value!==l("tab.all")?k=$.filter(s=>d.value==l("tab.native")?!s.labels||s.labels=="Native":s.labels&&s.labels.toLowerCase()==d.value.toLowerCase()):k=$;e.isCreatePoolToCoin?N.value=(ee=k.filter(t=>M.value[t==null?void 0:t.address]))==null?void 0:ee.sort((t,s)=>s.sort-t.sort).sort((t,s)=>s.unusable-t.unusable):N.value=k.sort((t,s)=>s.sort-t.sort).sort((t,s)=>s.unusable-t.unusable),e.isCreatePoolFromCoin&&(N.value=(se=k.filter(t=>!M.value[t==null?void 0:t.address]))==null?void 0:se.sort((t,s)=>s.sort-t.sort).sort((t,s)=>s.unusable-t.unusable))},le=n=>{n.unusable||(_.emit("onSelect",n),_.emit("onClose"))};Z(()=>[P.value,D.value],([n,u])=>{U(n)},{immediate:!0});const G=L([]);return Z(()=>c.value.tokens,n=>{n&&(U(P.value),G.value=n.filter(u=>(e.lastSelectCoin&&u.address===e.lastSelectCoin?u.unusable=!0:u.unusable=!1,u.suggested_priority&&u.suggested_priority>0)).sort((u,b)=>Number(b.suggested_priority)-Number(u.suggested_priority)))},{immediate:!0}),{popularList:G,pools:c,t:l,chainName:T,tabList:R,currentTab:d,addCommom:te,tokenList:N,importIcon:C,keyword:P,wallet:h,toSelect:le,store:f,isShowAll:D}}}),Me=""+globalThis.__publicAssetsURL("sui-image/token-warning@2x.png");const y=e=>(Ie("data-v-924933d9"),e=e(),Te(),e),Pe=y(()=>a("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),je={class:"coin-select-modal"},Be={class:"search-input"},Fe=["placeholder"],Re=y(()=>a("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),De=[Re],Ue={key:0,class:"popular"},ze=["onClick"],Ze={class:"tab-list"},qe=["onClick"],Ke={key:0,class:"item"},Ee=y(()=>a("div",{class:"line"},null,-1)),Je={class:"coin-list-box"},We={key:0,class:"coin-list"},Ge=["onClick"],He={class:"left"},Qe={key:0},Xe={key:1,alt:""},Ye={class:"name-box"},Ve=["onClick"],xe=y(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-copy"})],-1)),es=y(()=>a("img",{src:Me,alt:""},null,-1)),ss={key:0,class:"label"},os={class:"balance-box"},ns={class:"balance"},ts={key:0},as={key:1},ls={key:2},is={key:3},rs=y(()=>a("p",null,null,-1)),us={key:1,class:"no-data"},cs={key:0,class:"token-loading"},ds={key:1,class:"no-data-content"},ps={key:0,src:$e},bs={key:1,src:Ae},vs=y(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1));function _s(e,_,l,ae,W,h){const I=we,c=q("loading-outlined"),F=Se,f=Le,M=q("vue-scroll"),R=q("Modal"),d=ge("image");return i(),oe(R,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:_[2]||(_[2]=o=>e.$emit("onClose"))},{closeIcon:m(()=>[Pe]),default:m(()=>[a("div",je,[a("div",Be,[j(a("input",{"onUpdate:modelValue":_[0]||(_[0]=o=>e.keyword=o),onkeyup:"value=value.replace(/[^[a-zA-Z0-9\\s]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,Fe),[[Ce,e.keyword]]),e.keyword?(i(),r("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:_[1]||(_[1]=o=>e.keyword="")},De)):A("",!0)]),e.popularList&&e.popularList.length>0?(i(),r("div",Ue,[(i(!0),r(K,null,E(e.popularList,o=>(i(),r("div",{key:o.address,class:J(["img-box",o.unusable?"img-box-unusable":"img-box-usable"]),onClick:w=>e.toSelect(o)},[j(a("img",null,null,512),[[d,o.icon||o.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:g(C))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(C))("/image/coins/sui-unknown.png"))]]),a("span",null,p(o.symbol),1)],10,ze))),128))])):A("",!0),a("div",Ze,[(i(!0),r(K,null,E(e.tabList,(o,w)=>(i(),r("div",{key:w,class:J(["item-container",e.currentTab==o?"item-container-active item-container":"item-container"]),onClick:T=>e.currentTab=o},[o!==null&&o!=="test"?(i(),r("div",Ke,p(o),1)):A("",!0)],10,qe))),128))]),Ee,a("div",Je,[O(M,null,{default:m(()=>[e.tokenList&&e.tokenList.length>0?(i(),r("ul",We,[(i(!0),r(K,null,E(e.tokenList,(o,w)=>(i(),r("li",{key:w,class:J(o.unusable?"unusable":""),onClick:T=>e.toSelect(o)},[a("div",He,[o.isChinaToken?j((i(),r("img",Xe,null,512)),[[d,e.store.theme=="default"?("importIcon"in e?e.importIcon:g(C))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(C))("/image/coins/sui-unknown.png")]]):j((i(),r("img",Qe,null,512)),[[d,o.icon||o.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:g(C))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(C))("/image/coins/sui-unknown.png"))]]),a("div",Ye,[a("span",null,[B(p(o.symbol)+" ",1),a("span",{class:"copy-text",onClick:ye(T=>e.store.copy(o&&o.address),["stop"])},[B(p(o.address&&o.address.substr(0,4))+" ... "+p(o.address&&o.address.substr(o.address.length-4,4))+" ",1),xe],8,Ve),o.isSelfBuilt?(i(),oe(I,{key:0,placement:"right","arrow-point-at-center":""},{title:m(()=>[a("span",null,p(e.t("newAdd.notCetusTokenList")),1)]),default:m(()=>[es]),_:1})):A("",!0)]),a("p",null,[B(p(o.name)+" ",1),e.chainName!=="Sui"?(i(),r("span",ss,p(o.labels?`(${o.labels})`:""),1)):A("",!0)])])]),a("div",os,[a("div",ns,[e.wallet.loading?(i(),r("div",ts,[O(F,null,{default:m(()=>[O(c)]),_:1})])):o.balance&&e.wallet.connected?(i(),r("div",as,p(("addCommom"in e?e.addCommom:g(te))(o.balance,o.decimals)),1)):!o.balance&&e.wallet.connected?(i(),r("div",ls,"0")):(i(),r("div",is))]),rs])],10,Ge))),128))])):(i(),r("div",us,[e.pools.isTokenLoading?(i(),r("div",cs,[O(f)])):(i(),r("div",ds,[e.store.theme=="default"?(i(),r("img",ps)):(i(),r("img",bs)),a("p",null,p(e.t("newAdd.noTokensFound")),1),a("div",null,[B(p(e.t("newAdd.enterCoinType"))+" ",1),O(I,{placement:"bottom","arrow-point-at-center":""},{title:m(()=>[a("span",null,p(e.t("newAdd.uniqueIdOfCoin")),1)]),default:m(()=>[vs]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const ws=ke(Oe,[["render",_s],["__scopeId","data-v-924933d9"]]);export{ws as _,Me as a};
