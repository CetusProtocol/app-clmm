import{a as se,W as ie,r as p,e as de,i as B,f as ne,w as x,aa as oe,b as ce,y as q,Q as pe,z as ue,j as G,k as le,o as L,l as N,m as i,J as O,A as M,t as u,C as _e,E as J,F as Q,T as K,N as be,O as me,G as ge,q as ye,s as we}from"./entry.7c6f9548.js";import"./index.29fc8e68.js";const Pe=se({props:{aprRewardsDateList:{type:Array,default:()=>[]},aprRewardsParameter:{type:Number,default:30},aprTitle:{type:String,default:""},nameTab:{type:String,default:""},aprPercentageObj:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""}},setup(r,z){ie();const m=p(0),g=p(0),y=p(0),w=p(0),l=p(1e4),P=p("echartsBox"+Date.now()+Math.random()),j=de(),o=B(()=>j),C=B(()=>o.value.chainName?ue(o.value.chainName):{});ne(()=>{window.setTimeout(()=>{b()},1e3)});const _=p({});x(()=>_.value,(e,s)=>{G(e)||(m.value=e==null?void 0:e.aprFee,g.value=e!=null&&e.rewardAprList[0].rewarder_display?e==null?void 0:e.rewardAprList[0].rewarder_apr:0,y.value=e!=null&&e.rewardAprList[1].rewarder_display?e==null?void 0:e.rewardAprList[1].rewarder_apr:0,w.value=e!=null&&e.rewardAprList[2].rewarder_display?e==null?void 0:e.rewardAprList[2].rewarder_apr:0,(e==null?void 0:e.aprPercentageTotal)==0||isNaN(e==null?void 0:e.aprPercentageTotal)||(e==null?void 0:e.aprPercentageTotal)==1/0?l.value=1e9:l.value=0,!e.is_display_rewarder&&m.value==0&&(l.value=1e9),e.is_display_rewarder||(g.value=0,y.value=0,w.value=0),b())},{immediate:!0});const b=()=>{const e=document.getElementById(P.value),s=oe(e);let c={tooltip:{show:!0,trigger:"axis",axisPointer:{type:"shadow",axis:"auto",snap:!0},renderMode:"html",backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderWidth:0,padding:5,textStyle:{color:"#fff",fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:14},extraCssText:"box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);",confine:!1,formatter:function(d){return d[0].name+"\u7684\u5206\u6570\u662F:"+d[0].data}},title:{text:"",left:"center",top:"center"},series:[{type:"pie",silent:!0,data:[{value:m.value,name:"A"},{value:g.value,name:"B"},{value:y.value,name:"C"},{value:w.value,name:"D"},{value:l.value,name:"E"}],labelLine:{show:!1},itemStyle:{normal:{color:function(d){var n=o.value.theme=="default"?["#9EFFC3","#65C8FF","#6C65FF","#D3E97C","#8D8D8D"]:["#91E1FF","#65C8FF","#6C65FF","#D3E97C","#8D8D8D"];return n[d.dataIndex]}}},radius:["74%","100%"]}]};c&&s.setOption(c,!0)},F=B(()=>{var s;let e=0;return r.aprPercentageObj&&r.aprPercentageObj.rewardAprList&&((s=r.aprPercentageObj)==null?void 0:s.rewardAprList).forEach(d=>{d!=null&&d.rewarder_display&&e++}),e}),T=ce(),A=B(()=>T),f=async e=>{let s;e.token_a.address.toLowerCase()===r.fromCoin.address.toLowerCase()&&e.token_b.address.toLowerCase()===r.toCoin.address.toLowerCase()?s=!0:s=!1;const c=s?Number(r.minPrice):r.maxPrice=="\u221E"?1/2**50:1/Number(r.maxPrice),d=isNaN(Number(r.maxPrice))||r.maxPrice=="\u221E"?2**50:s?Number(r.maxPrice):1/Number(r.minPrice);let n=[];n=Object.fromEntries(o&&o.value&&o.value.addressHistTokens[e.poolAddress].data.map(U=>[U.key,U.value]));const a=Number(Number(r.aprRewardsParameter==7?n.before_7_d_contract_price_lowest:r.aprRewardsParameter==24?n.before_24_h_contract_price_lowest:n.before_30_d_contract_price_lowest)),W=Number(Number(r.aprRewardsParameter==7?n.before_7_d_contract_price_highest:r.aprRewardsParameter==24?n.before_24_h_contract_price_highest:n.before_30_d_contract_price_highest)),$=A.value.newTokenObj,Y=await C.value.getEstPositionAPRWithMulti(c,d,a,W),R=Number(Y.toString()),t=o.value.newTopPoolsObj[e.poolAddress];let S;r.aprRewardsParameter==7?S=t.apr_7day?Number(t.apr_7day.substring(0,t.apr_7day.length-1)):0:r.aprRewardsParameter==24?S=t.apr_24h?Number(t.apr_24h.substring(0,t.apr_24h.length-1)):0:S=t.apr_30day?Number(t.apr_30day.substring(0,t.apr_30day.length-1)):0;const Z=t.rewarder_apr[0]?Number(t.rewarder_apr[0].substring(0,t.rewarder_apr[0].length-1)):0,I=t.rewarder_apr[1]?Number(t.rewarder_apr[1].substring(0,t.rewarder_apr[1].length-1)):0,V=t.rewarder_apr[2]?Number(t.rewarder_apr[2].substring(0,t.rewarder_apr[2].length-1)):0,h=Number(R*S),k=Number(R*Z),D=Number(R*I),E=Number(R*V),v=h+(e.rewarder_display1?k:0)+(e.rewarder_display2?D:0)+(e.rewarder_display3?E:0),ee=e.rewarder_infos[0]?$[e.rewarder_infos[0].coinAddress].symbol:"--",re=e.rewarder_infos[1]?$[e.rewarder_infos[1].coinAddress].symbol:"--",ae=e.rewarder_infos[2]?$[e.rewarder_infos[2].coinAddress].symbol:"--",te={aprFee:h==1/0||isNaN(h)?0:h,rewardAprList:[{rewarder_name:ee,rewarder_apr:k==1/0||isNaN(k)?0:k,styleName:"one",rewarder_display:e.rewarder_display1},{rewarder_name:re,rewarder_apr:D==1/0||isNaN(D)?0:D,styleName:"two",rewarder_display:e.rewarder_display2},{rewarder_name:ae,rewarder_apr:E==1/0||isNaN(E)?0:E,styleName:"three",rewarder_display:e.rewarder_display2}],aprPercentageTotal:v==1/0||isNaN(v)||v===0?0:v,aprPercentage:q(h/v,2),is_display_rewarder:e.is_display_rewarder};_.value=te};return x(()=>[r.aprRewardsParameter],()=>{r.nameTab=="position"&&f(r.poolInfo)}),x(()=>[r.poolInfo,r.minPrice,r.maxPrice],([e,s,c])=>{e&&!G(e)&&f(e)},{immediate:!0}),{initialize:b,aprOne:m,aprTwo:g,aprThree:y,aprFour:w,echartsBox:P,aprPercentageObjList:_,rewardLength:F,fixD:q,addCommom:pe,aprTab:(e,s)=>{z.emit("aprTab",e)}}}});const X=r=>(ye("data-v-f74b8be4"),r=r(),we(),r),fe={class:"apr-rewards"},he=X(()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-icon-information"})],-1)),ve={class:"apr-tab"},Le=["onClick"],Ne={class:"fees-all"},Oe=["id"],je={class:"progress-all-in"},Ce={class:"progress-fees progress-all"},Fe=X(()=>i("div",{class:"light-hint"},null,-1));function Te(r,z,m,g,y,w){var P,j,o,C,_,b,F,T,A,f,H,e,s,c,d,n;const l=ge;return L(),N("div",null,[i("div",fe,[i("div",{class:O(["apr-title",r.nameTab])},[M(u(r.aprTitle)+" ",1),_e(l,{placement:"bottom","arrow-point-at-center":""},{title:J(()=>[i("span",null," Estimated according to trading activity and farming bonus in the past "+u(r.aprRewardsParameter==7?"7 days":r.aprRewardsParameter==24?"24 hours":"30 days")+". Historical data is only a reference. By no means can it guarantee future returns. ",1)]),default:J(()=>[he]),_:1})],2),i("div",ve,[(L(!0),N(Q,null,K(r.aprRewardsDateList,a=>(L(),N("div",{key:a,class:O(["apr-item",{"apr-item-active":a.num===r.aprRewardsParameter}]),onClick:W=>r.aprTab(a)},u(a.time),11,Le))),128))])]),i("div",{class:O(["trade-fees",r.rewardLength>0&&r.aprPercentageObjList.is_display_rewarder?"rewarded":""])},[i("div",Ne,[i("span",null,[M(u(r.aprPercentageObjList.is_display_rewarder?(P=r.aprPercentageObjList)!=null&&P.aprPercentageTotal?((j=r.aprPercentageObjList)==null?void 0:j.aprPercentageTotal)>1e4?">10,000":((o=r.aprPercentageObjList)==null?void 0:o.aprPercentageTotal)<.01?"<0.01":r.fixD((C=r.aprPercentageObjList)==null?void 0:C.aprPercentageTotal,2):(_=r.aprPercentageObjList)!=null&&_.rewardAprList?"0":"--":(b=r.aprPercentageObjList)!=null&&b.aprFee?((F=r.aprPercentageObjList)==null?void 0:F.aprFee)>1e4?">10,000":((T=r.aprPercentageObjList)==null?void 0:T.aprFee)<.01?"<0.01":r.addCommom((A=r.aprPercentageObjList)==null?void 0:A.aprFee,2):(f=r.aprPercentageObjList)!=null&&f.rewardAprList?"0":"--")+"% ",1),i("div",{id:r.echartsBox,class:"right"},null,8,Oe)])]),i("div",{class:O(["percentage-fee",r.nameTab])},[i("div",je,[i("div",Ce,[Fe,M(" Fees\xA0\xA0"+u((H=r.aprPercentageObjList)!=null&&H.aprFee?((e=r.aprPercentageObjList)==null?void 0:e.aprFee)>1e4?">10,000":((s=r.aprPercentageObjList)==null?void 0:s.aprFee)<.01?"<0.01":r.addCommom((c=r.aprPercentageObjList)==null?void 0:c.aprFee,2):(d=r.aprPercentageObjList)!=null&&d.rewardAprList?"0":"--")+"% ",1)]),(L(!0),N(Q,null,K((n=r.aprPercentageObjList)==null?void 0:n.rewardAprList,a=>be((L(),N("div",{key:a,class:"progress-rewards progress-all"},[i("div",{class:O(["light-hint",a==null?void 0:a.styleName])},null,2),M(" "+u(a==null?void 0:a.rewarder_name)+" Bonus\xA0\xA0"+u(a!=null&&a.rewarder_apr?(a==null?void 0:a.rewarder_apr)>1e4?">10,000":(a==null?void 0:a.rewarder_apr)<.01?"<0.01":r.addCommom(a==null?void 0:a.rewarder_apr,2):"0")+"% ",1)])),[[me,(a==null?void 0:a.rewarder_name)!="--"&&a.rewarder_display&&r.aprPercentageObjList.is_display_rewarder]])),128))])],2)],2)])}const Se=le(Pe,[["render",Te],["__scopeId","data-v-f74b8be4"]]);export{Se as _};
