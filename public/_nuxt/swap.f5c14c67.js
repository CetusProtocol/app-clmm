import{_ as dn}from"./refresh-icon.03525a64.js";import{_ as cn}from"./assets-card.61331eb6.js";import{u as Te,e as ao,c as be,s as ie,a as H,q as ze,d as fe,A as He,g as Ro,j as mn,b as Ye,p as So}from"./pool.325e4199.js";import{e as Fe,a as Ge,C as Po,L as No,r as b,l as P,q as ee,s as je,o as i,f,h as o,c as Y,x as B,t as V,j as q,v as r,A as te,F as Be,u as Z,S as Oo,M as Mo,p as Ee,k as Ue,a4 as vn,i as Ce,w as de,P as Bo,a1 as To,Q as Fo,E as $o,B as jo,b as Io,y as fn,H as hn,K as pn,D as Ze}from"./entry.a15f3bbe.js";/* empty css              *//* empty css              */import{c as ge,u as Le,a as gn}from"./sha256.48f78bf5.js";import{i as he}from"./import-icon.de3e6c66.js";import{D as s}from"./decimal.0bdeb344.js";import{_ as Cn}from"./network-tips.9037dc51.js";import{_ as bn}from"./coin-select.a6ac7db7.js";import{_ as kn}from"./swap-setting.5ec1c63f.js";/* empty css              */import{_ as wn}from"./token-warning-modal.827e06d1.js";import{u as yn}from"./swapRouter.4b5730ad.js";import{_ as An}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./token-warning.d6b204dd.js";/* empty css              */import"./img-no-Positions_2x.e3babeb3.js";import"./img-no-Positions_2x.d9851740.js";/* empty css              */import"./icon-error_2x.d7be8424.js";import"./icon-selected_3x.09e9a6f0.js";async function _n(e,p){var L,J,v;const I=e==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":e,m=`${ge.Sui.api}/v2/sui/coin/kline?coin_address=${I}&interval=day&market=${p}`;try{const R=await $fetch(m);return{price:((J=(L=R==null?void 0:R.data)==null?void 0:L.list)==null?void 0:J.reverse())||[],daily_rate:(v=R==null?void 0:R.data)==null?void 0:v.daily_rate.replace("%","")}}catch{return{price:[],daily_rate:""}}}async function Sn(e){try{const{prices:p}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=7&interval=daily`,{headers:{Connection:"keep-alive",Accept:"*/*"}}),m=(await $fetch(`https://api.coingecko.com/api/v3/coins/markets?ids=${e}&vs_currency=usd&price_change_percentage=24h`,{headers:{Connection:"keep-alive",Accept:"*/*"}}))[0].price_change_percentage_24h,L=[];return p.forEach(J=>{L.push({price:new s(J[1]).toString(),timestamp:J[0]})}),{price:L,daily_rate:m}}catch{return{price:[],daily_rate:""}}}const $n=""+globalThis.__publicAssetsURL("sui-image/route-view.png");const In=Ge({props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1}},setup(e){const p=Po(No,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),I=b(!1),m=Le(),L=P(()=>m),J=P(()=>L.value.slippage),v=P(()=>L.isShowRouterModal);ee(()=>e,n=>{},{immediate:!0,deep:!0});const R=Te(),w=P(()=>R),Q=ao("Sui"),K=b(0),x=b([]),_=b({});ee(()=>e.suiPreSwapdata,async n=>{var t;if(n&&!be(n)){let k=[];(t=n==null?void 0:n.splitPaths)==null||t.forEach(O=>{O==null||O.basePaths.forEach(async D=>{k.push(D.label)})});const{splitPaths:g}=n,$=g&&g[0]&&g[0].basePaths;if(g&&g.length==1&&$&&$.length==2){const O=$[0].toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":$[0].toCoin;_.value=w.value.tokensObj[O]||(await Q.getTokenListByCoinType[O])[0]}else _.value="";x.value=Array.from(new Set(k)),K.value=x.value.length}},{immediate:!0});const j=b(0),l=b(0);ee(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,J.value],([n,t,k,g,$,O])=>{if(n&&t&&k&&g&&O)if($){const D=new s(t).mul(new s(O/100));l.value=new s(t).sub(D).toString()}else{const D=new s(n).mul(new s(O/100));j.value=new s(n).add(D).toString()}},{immediate:!0});const oe=n=>{var t;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((t=w.value.tokensObj[n==null?void 0:n.address])==null?void 0:t.logo_url)||(L.theme==="default"?he("/image/coins/unknown.png"):he("/image/coins/sui-unknown.png"))},ne=P(()=>{var n,t,k,g,$,O,D,S,X;return(k=(t=w==null?void 0:w.value)==null?void 0:t.tokensObj[(n=e.fromCoin)==null?void 0:n.address])!=null&&k.pyth_id&&((O=($=w==null?void 0:w.value)==null?void 0:$.tokensObj[(g=e.fromCoin)==null?void 0:g.address])==null?void 0:O.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(X=(S=w==null?void 0:w.value)==null?void 0:S.tokensObj[(D=e.fromCoin)==null?void 0:D.address])!=null&&X.coingecko_id?"coingecko":null}),y=P(()=>{var n,t,k,g,$,O,D,S,X;return(k=(t=w==null?void 0:w.value)==null?void 0:t.tokensObj[(n=e.toCoin)==null?void 0:n.address])!=null&&k.pyth_id&&((O=($=w==null?void 0:w.value)==null?void 0:$.tokensObj[(g=e.toCoin)==null?void 0:g.address])==null?void 0:O.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(X=(S=w==null?void 0:w.value)==null?void 0:S.tokensObj[(D=e.toCoin)==null?void 0:D.address])!=null&&X.coingecko_id?"coingecko":null}),G=b(""),E=async()=>{const n=w.value.tokenExternalPriceObj[e.fromCoin.address],t=w.value.tokenExternalPriceObj[e.toCoin.address];if(n&&t){const k=new s(n).div(new s(t)),g=new s(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(k).div(k).mul(100);let $=Math.abs(ie(g,2));k.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?G.value="":G.value=g>0&&g<=.01?"0.01":$}else G.value=""},C=n=>{if(n<5)return"color-s";if(n>=5&&n<10)return"color-w";if(n>=10)return"color-e"};return ee(()=>[e.oneToAmount,w.value.tokenExternalPriceObj],([n,t])=>{n&&t&&!be(t)&&E()},{immediate:!0,deep:!0}),{sFixD:ie,getCoinIcon:oe,indicator:p,rateChange:I,slippage:J,isShowRouterModal:v,indexStore:m,maximumSold:j,minimumReceived:l,addCommom:H,pathLength:K,sourcesArr:x,coinTypeB:_,priceExangeRate:G,getTextColor:C,formCoinMarket:ne,toCoinMarket:y}}}),le=e=>(Ee("data-v-05eeebb6"),e=e(),Ue(),e),Rn={key:0,class:"swap-info"},Pn={class:"loading-swap"},Nn={key:1,class:"swap-rate"},On={key:0},Mn={key:0,class:"after-amount"},Bn={key:1},Tn={key:0,class:"after-amount"},Fn=le(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),jn=le(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),En=[Fn,jn],Un={key:2,class:"swap-exchange-rate"},Ln={class:"swap-exchange-rate-content"},Dn={key:0},Wn=["href"],qn=le(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Jn=[qn],Qn={key:1},Xn=["href"],Hn=le(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Yn=[Hn],Zn={key:0},zn=["href"],Gn=le(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Kn=[Gn],Vn={key:1},xn=["href"],et=le(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),ot=[et],nt={key:2},tt=["href"],at=le(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),st=[at],it={key:3},lt=["href"],rt=le(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),ut=[rt],dt={key:3},ct={class:"trade-info"},mt={class:"trade-block"},vt=le(()=>o("div",{class:"lebal"},"Price Impact",-1)),ft={key:0,class:"icon","aria-hidden":"true"},ht=le(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),pt=[ht],gt={class:"trade-block"},Ct={class:"lebal"},bt={key:0,class:"text"},kt={class:"trade-block"},wt=le(()=>o("div",{class:"lebal"},"Fee",-1)),yt={key:0,class:"text"},At={key:0,class:"trade-block"},_t=le(()=>o("div",{class:"lebal"},"Route",-1)),St={key:0,class:"text text-box"},$t=["src"],It=["src"],Rt={key:1,class:"text text-box"},Pt=["src"],Nt=["src"],Ot=le(()=>o("img",{src:$n,alt:""},null,-1));function Mt(e,p,I,m,L,J){var Q,K,x,_;const v=Oo,R=Mo,w=je("image");return e.swapLoading||Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&!e.insufficientLiquidity?(i(),f("div",Rn,[o("div",Pn,[e.swapLoading||e.swapRouterLoading?(i(),Y(v,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):B("",!0),e.swapLoading?B("",!0):(i(),f("div",Nn,[e.rateChange?(i(),f("span",Bn,[e.fromCoinAmount&&e.toCoinAmount?(i(),f("span",Tn,[V(o("img",null,null,512),[[w,e.getCoinIcon(e.toCoin)]]),q(" 1 "+r(e.toCoin.symbol)+" ≈ ",1),V(o("img",null,null,512),[[w,e.getCoinIcon(e.fromCoin)]]),q(r(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+r(e.fromCoin.symbol),1)])):(i(),Y(v,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(i(),f("span",On,[V(o("img",null,null,512),[[w,e.getCoinIcon(e.fromCoin)]]),q(" 1 "+r(e.fromCoin.symbol)+" ≈ ",1),e.fromCoinAmount&&e.toCoinAmount?(i(),f("span",Mn,[V(o("img",null,null,512),[[w,e.getCoinIcon(e.toCoin)]]),q(r(e.oneToAmount==1/0?0:e.oneToAmount)+" "+r(e.toCoin.symbol),1)])):(i(),Y(v,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"right",onClick:p[0]||(p[0]=j=>e.rateChange=!e.rateChange)},En)])),!e.swapLoading&&e.priceExangeRate!==""&&e.priceExangeRate>10?(i(),f("div",Un,[o("div",Ln,[o("p",null,[o("span",{class:te(e.getTextColor(e.priceExangeRate))},"Within ~"+r(e.priceExangeRate)+"% of",3)]),e.formCoinMarket=="pyth"&&e.toCoinMarket=="pyth"?(i(),f("span",Dn,[q("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}&ids[]=${e.toCoin.pyth_id}`,target:"_blank"},Jn,8,Wn)])):e.formCoinMarket=="coingecko"&&e.toCoinMarket=="coingecko"?(i(),f("span",Qn,[q("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id},${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},Yn,8,Xn)])):e.formCoinMarket!==e.toCoinMarket?(i(),f(Be,{key:2},[e.formCoinMarket=="pyth"?(i(),f("span",Zn,[q("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}`,target:"_blank"},Kn,8,zn)])):e.formCoinMarket=="coingecko"?(i(),f("span",Vn,[q("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},ot,8,xn)])):B("",!0),e.toCoinMarket=="coingecko"?(i(),f("span",nt,[q("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},st,8,tt)])):e.toCoinMarket=="pyth"?(i(),f("span",it,[q("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.toCoin.pyth_id}`,target:"_blank"},ut,8,lt)])):B("",!0)],64)):B("",!0)])])):e.swapLoading?(i(),f("span",dt,"Best route and price")):B("",!0)]),o("div",ct,[o("div",mt,[vt,e.swapRouterLoading?(i(),Y(R,{key:1,paragraph:!1,active:""})):(i(),f("div",{key:0,class:te(["text",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[q(r(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(i(),f("svg",ft,pt)):B("",!0)],2))]),o("div",gt,[o("div",Ct,r(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(i(),Y(R,{key:1,paragraph:!1,active:""})):(i(),f("div",bt,r(e.fixedFromCoin?("addCommom"in e?e.addCommom:Z(H))(("sFixD"in e?e.sFixD:Z(ie))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:Z(H))(("sFixD"in e?e.sFixD:Z(ie))(e.maximumSold,e.fromCoin.decimals)))+" "+r(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",kt,[wt,e.swapRouterLoading?(i(),Y(R,{key:1,paragraph:!1,active:""})):(i(),f("div",yt,r(e.suiSwapFee)+" "+r(e.fromCoin.symbol),1))]),e.insufficientLiquidity?B("",!0):(i(),f("div",At,[_t,e.swapRouterLoading?(i(),Y(R,{key:1,paragraph:!1,active:""})):(i(),f("div",{key:0,class:"text",onClick:p[1]||(p[1]=j=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[!e.swapRouterLoading&&e.suiPreSwapdata&&e.suiPreSwapdata.splitPaths&&e.suiPreSwapdata.splitPaths.length==1?(i(),f("div",St,[o("span",null,r(e.fromCoin.symbol)+" "+r(e.coinTypeB&&((Q=e.coinTypeB)!=null&&Q.symbol)?`> ${(K=e.coinTypeB)==null?void 0:K.symbol}`:"")+" > "+r(e.toCoin.symbol),1),o("img",{src:e.sourcesArr[0]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,$t),e.sourcesArr[1]?(i(),f("img",{key:0,src:e.sourcesArr[1]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,It)):B("",!0)])):e.swapRouterLoading?B("",!0):(i(),f("div",Rt,[q(r((_=(x=e.suiPreSwapdata)==null?void 0:x.splitPaths)==null?void 0:_.length)+" Streams ",1),e.sourcesArr[0]?(i(),f("img",{key:0,src:e.sourcesArr[0]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Pt)):B("",!0),e.sourcesArr[1]?(i(),f("img",{key:1,src:e.sourcesArr[1]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Nt)):B("",!0)])),Ot]))]))])])):B("",!0)}const Bt=Fe(In,[["render",Mt],["__scopeId","data-v-05eeebb6"]]),Tt={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""},market:{type:String,default:""}},setup(e,p){const{$echarts:I}=vn();let m=null,L;const J=b(!0),v=Le(),R=P(()=>v),w=P(()=>R.value.chainName),Q=P(()=>ge[w.value]),K=Te(),x=P(()=>K),_=(n,t,k)=>{L={xAxis:{type:"category",boundaryGap:!1,show:!1,data:t},yAxis:{type:"value",show:!1,min:function(g){return g.min-g.min*.1},max:function(g){return g.max+g.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:R.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(g){return`<div class="chart-tip">
              <div>${g&&g[0]&&g[0].name}</div>
              <div>$${fe(g&&g[0]&&g[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:R.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:R.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:n,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:R.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},L&&m.clear(),L&&m.setOption(L,!0),m.resize(),J.value=!1},j=b(""),l=b(""),oe=async n=>{var D,S,X;const t=[],k=[],{price:g,daily_rate:$}=w.value==="Aptos"?await Sn(n):await _n(n,e.market);w.value=="Sui"&&K.setTokenExternalPrice(e.coin.address,(D=g[g.length-1])==null?void 0:D.price),j.value=$,l.value=g&&g.length>1&&g[g.length-1].price,w.value==="Aptos"?g.forEach(u=>{t.push(u.price);const c=He(Number(u.timestamp),"MD"),me=He(Number(u.timestamp),"HM");k.push(c+" "+me)}):g.forEach(u=>{t.push(u.price);const c=He(new s(u.timestamp).mul(1e3).toNumber(),"MD"),me=He(new s(u.timestamp).mul(1e3).toNumber(),"HM");k.push(c+" "+me)});let O=document.getElementById(`main${(S=e.coin)==null?void 0:S.name}`);m=I.init(O),_(t,k,(X=e.coin)==null?void 0:X.name)};ee(()=>e.id,(n,t)=>{n&&(j.value="",l.value="",setTimeout(()=>{oe(n)},1e3))},{immediate:!0});const ne=b(""),y=b(""),G=b(""),E=b("");return ee(()=>[x.value.tokensObj,e.coin],([n,t])=>{var k,g;n&&t&&n[t.address]&&(y.value=((k=n[t.address])==null?void 0:k.labels)&&((g=n[t.address])==null?void 0:g.labels[0]),ne.value=n[t.address].name,G.value=n[t.address].symbol,E.value=n[t.address].address)},{immediate:!0,deep:!0}),ee(()=>e.refresh,n=>{n&&oe(e.id)}),{theme:P(()=>R.value.theme),store:v,importIcon:he,fixD:ze,config:Q,price_rate_24h:j,nowPrice:l,coinName:ne,coinLabels:y,coinSymbol:G,address:E,decimalUi:fe}}},Ft="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAk1BMVEUAAADn2v/m2//r2//v4//n2v/55P/n2v/o3P//+P/m2v/n2f/n2v/n2v/n2v/n2v/n2v/o2//p2//n3f/o3v/n2f/n2v/n2v/n2v/n2v/n2//o2v/q3f/r4f/u3f/n2v/o2v/n2//p3P/o3P/m2v/n2v/n2f/n2v/o2f/n2//r3f/t3P/n2v/m2v/o2v/r3v/m2f/tUDLHAAAAMHRSTlMAl5oyFNMJqSwFhvvr5d7Yr2FGNSD0zb2lkIltOhkOxoJoT0D48aJzWFYlHeB8Wief0nHAAAABSElEQVQ4y52Q53LCMBCEZWK5g0swBpveQknZ93+6rFxAHkSYyf6x9+67JqHLKxOZRzJJbWHStkCn0Fo8pG0XuvJv0dciBjVZb+dZeoxABb38MlbpXeucr5z2QwdUf8vX1h0ByLT9aAeCGlez4Ozw5zoE4nvFBJB0yymUhqp0B2DT5ec0O+YlWlUMJsCqAwJA8jNV1W4RAnuvqepeYwWsOR/AkfM9ji8YjYBTC3wCZyEq1jvKnoCQP8X90j0wF2IGuM2jArjUE8sWAPAmxACwavtDf623XJsBtoqa2zcm4MI8Ag7iNZkBeAcVc8cUOPhPgJjP4I/UzkYgKtWxpQqaAGfMvvUATIUBaOQHAEb2M2CZcj4OnrhJasDYXYVQ9Vpe2LJ/BeWyf4/oAXlC25e9uI0IqswRJulX/BOwXgG2JPCCIPA3sXmM/QK1PTc8LGCPoAAAAABJRU5ErkJggg==",jt="data:image/png;base64,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";const Et=e=>(Ee("data-v-9f8b1d01"),e=e(),Ue(),e),Ut={class:"token-info"},Lt={class:"token-info-padding"},Dt={class:"token-info-header"},Wt={class:"left"},qt=["onerror"],Jt={class:"name"},Qt={class:"desc"},Xt={key:0},Ht={class:"right"},Yt={class:"price-info"},Zt={key:0,src:Ft,alt:""},zt={key:1,src:jt,alt:""},Gt={class:"token-info-footer"},Kt={class:"left"},Vt={class:"address"},xt={key:0,class:"pc-address"},ea={key:1,class:"pc-address"},oa={class:"h5-address"},na=Et(()=>o("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),ta=[na],aa={class:"right"},sa=["id"];function ia(e,p,I,m,L,J){var w;const v=Bo,R=je("image");return i(),f("div",Ut,[o("div",Lt,[o("div",Dt,[o("div",Wt,[V(o("img",{onerror:m.theme=="default"?m.importIcon("/image/coins/unknown.png"):m.importIcon("/image/coins/sui-unknown.png")},null,8,qt),[[R,I.coin.logoURI||m.importIcon(`/image/coins/${I.coin.symbol.toLowerCase()}.png`)]]),o("div",null,[o("div",Jt,r(m.coinSymbol),1),o("div",Qt,[o("span",null,[q(r(m.coinName)+" ",1),m.theme!=="sui"?(i(),f("span",Xt,r(m.coinLabels?`(${m.coinLabels})`:""),1)):B("",!0)])])])]),o("div",Ht,[Ce(v,{placement:"top","arrow-point-at-center":""},{title:de(()=>[q(r(I.market==="pyth"?"Data source: Pyth Network":"Data source: CoinGecko"),1)]),default:de(()=>[o("div",Yt,[I.market==="pyth"?(i(),f("img",Zt)):(i(),f("img",zt)),o("span",null,"$"+r(m.nowPrice?Number(m.nowPrice)<1?m.decimalUi(m.nowPrice,4):m.fixD(m.nowPrice,2):"--"),1),m.price_rate_24h?(i(),f("i",{key:2,class:te(m.price_rate_24h>0?"up":m.price_rate_24h<0?"down":"up")},r(m.price_rate_24h>0?`+ ${m.fixD(m.price_rate_24h,2)}`:m.price_rate_24h<0?+`${m.fixD(m.price_rate_24h,2)}`:`+${m.fixD(m.price_rate_24h,2)}`)+"%",3)):B("",!0)])]),_:1})])]),o("div",Gt,[o("div",Kt,[o("div",Vt,[I.coin&&m.address!=="0x2::sui::SUI"?(i(),f("span",xt,r(I.coin&&I.coin.address.substr(0,13))+" ... "+r(I.coin&&I.coin.address.substr(I.coin.address.length-13,13)),1)):(i(),f("span",ea,r(I.coin&&I.coin.address),1)),o("span",oa,r(I.coin&&I.coin.address.substr(0,4))+" ... "+r(I.coin&&I.coin.address.substr(I.coin.address.length-4,4)),1),(i(),f("svg",{class:"icon","aria-hidden":"true",onClick:p[0]||(p[0]=Q=>m.store.copy(I.coin&&I.coin.address))},ta))])]),o("div",aa,[o("div",{id:`main${(w=I.coin)==null?void 0:w.name}`,class:"main"},null,8,sa)])])])])}const la=Fe(Tt,[["render",ia],["__scopeId","data-v-9f8b1d01"]]);const ra=Ge({components:{Modal:To},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e){const p=Te(),I=ao("Sui"),m=P(()=>p);P(()=>{var _,j;return(j=(_=m.value)==null?void 0:_.poolInfo)==null?void 0:j.needReverse});const L=b([]),J=b({});ee(()=>[e.suiPreSwapdata,e.fromCoin,e.toCoin],async([_,j,l])=>{if(_&&!be(_)){let oe=[];_.splitPaths.sort((C,n)=>n.outputAmount-C.outputAmount);for(let C=0;C<_.splitPaths.length;C++){const n=_.splitPaths[C],t={...n,amountIn:new s(n.inputAmount).div(new s(Math.pow(10,j.decimals))).toString(),amountOut:new s(n.outputAmount).div(new s(Math.pow(10,l.decimals))).toString()};let k=[];for(let g=0;g<n.basePaths.length;g++){const $=n.basePaths[g],O=$.fromCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":$.fromCoin,D=$.toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":$.toCoin,S=m.value.tokensObj[O]||(await I.getTokenListByCoinType([O]))[0],X=m.value.tokensObj[D]||(await I.getTokenListByCoinType([D]))[0];($==null?void 0:$.label)=="Deepbook"?k.push({...$,...m.value.routerPoolConfigObj[$.poolAddress],feeRate:new s($.feeRate).div(new s(Math.pow(10,9))),coin_a:S,coin_b:X}):k.push({...$,...m.value.routerPoolConfigObj[$.poolAddress],feeRate:new s($.feeRate).div(new s(Math.pow(10,6)))})}oe.push({...t,basePaths:k})}L.value=oe;const ne=[];let y=new s(0);oe.forEach(C=>{const n=new s(C.percent).gt(0)?new s(C.percent).div(100).mul(100).toString():0,t=ie(n,2);y=y.plus(t);const k=t.split(".");ne.push({value:t,int:k[0],decimal:k[1],pathIndex:C.pathIndex})});let G=new s(100).minus(y).toNumber();const E=ne.sort((C,n)=>Number(n.decimal)-Number(C.decimal));if(G)for(let C=0;C<E.length&&G;C++)E[C].value=new s(E[C].value).plus(.01).toString(),G=new s(G).minus(.01).toNumber();J.value=Object.fromEntries(E.map((C,n)=>[C.pathIndex,C]))}},{immediate:!0});const v=Le(),R=P(()=>v),w=_=>{var j;return(_==null?void 0:_.logoURI)||(_==null?void 0:_.logo_url)||((j=m.value.tokensObj[(_==null?void 0:_.address)=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":_==null?void 0:_.address])==null?void 0:j.logo_url)||(R.value.theme==="default"?he("/image/coins/unknown.png"):he("/image/coins/sui-unknown.png"))},Q=async _=>{const j=(await I.getTokenListByCoinType([_]))[0];return j&&!be(j)?j==null?void 0:j.logo_url:""},K=P(()=>m.value.tokensObj),x=P(()=>R.value.currentExplorer);return{addCommom:H,routerStep:L,getCoinIcon:w,getDeepBookLogo:Q,percentObj:J,tokensObj:K,store:R,getExplorerUrl:Ro,currentExplorer:x}}}),ke=e=>(Ee("data-v-02677be7"),e=e(),Ue(),e),ua=ke(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),da={class:"route-top"},ca={class:"token-a"},ma={alt:""},va={class:"token-num"},fa={class:"token-symbol"},ha={class:"token-b"},pa={class:"token-num"},ga={class:"token-symbol"},Ca={alt:""},ba={class:"route-bottom"},ka=ke(()=>o("div",{class:"left-round"},null,-1)),wa=ke(()=>o("div",{class:"right-round"},null,-1)),ya={class:"percent-text"},Aa={class:"amount"},_a={class:"symbol"},Sa={class:"percent-ratio"},$a={class:"percent-text"},Ia={class:"amount"},Ra={class:"symbol"},Pa={class:"pool-info-box"},Na={key:0,class:"icon","aria-hidden":"true"},Oa=ke(()=>o("use",{"xlink:href":"#icon-icon_on1"},null,-1)),Ma=[Oa],Ba={class:"pool-info"},Ta={class:"pool-info-top"},Fa={class:"token-a-img",alt:""},ja={class:"token-b-img",alt:""},Ea={class:"source"},Ua=["src"],La={class:"pool-info-detail"},Da={class:"pool-address"},Wa=ke(()=>o("span",null,"Pool Address",-1)),qa=["href"],Ja=["onClick"],Qa=ke(()=>o("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),Xa=[Qa],Ha={key:0,class:"token-info-detail"},Ya={alt:""},Za={class:"token-name"},za={class:"token-address"},Ga=["onClick"],Ka=ke(()=>o("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),Va=[Ka],xa={class:"token-symbol"},es={class:"token-info-detail"},os={alt:""},ns={class:"token-name"},ts={class:"token-address"},as=["onClick"],ss=ke(()=>o("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),is=[ss],ls={class:"token-symbol"};function rs(e,p,I,m,L,J){const v=Fo("Modal"),R=je("image");return i(),Y(v,{title:"Route",width:"600px",visible:!0,footer:null,onCancel:p[0]||(p[0]=w=>e.$emit("onClose"))},{closeIcon:de(()=>[ua]),default:de(()=>{var w,Q,K,x;return[o("div",da,[o("div",ca,[V(o("img",ma,null,512),[[R,(w=e.fromCoin)==null?void 0:w.logo_url]]),o("span",va,r(("addCommom"in e?e.addCommom:Z(H))(e.fromCoinAmount)),1),o("span",fa,r((Q=e.fromCoin)==null?void 0:Q.symbol),1)]),o("div",ha,[o("span",pa,r(("addCommom"in e?e.addCommom:Z(H))(e.toCoinAmount)),1),o("span",ga,r((K=e.toCoin)==null?void 0:K.symbol),1),V(o("img",Ca,null,512),[[R,(x=e.toCoin)==null?void 0:x.logo_url]])])]),o("div",ba,[ka,wa,(i(!0),f(Be,null,$o(e.routerStep,(_,j)=>(i(),f("div",{key:j,class:te(["route-path",j!==0?"route-path-active":""])},[o("div",{class:te(["percent",j!==0?"percent-active":""])},[o("div",ya,[o("div",Aa,r(("addCommom"in e?e.addCommom:Z(H))(_.amountIn)),1),o("div",_a,r(e.fromCoin.symbol),1),o("span",Sa,"("+r(e.percentObj&&e.percentObj[_.pathIndex].value)+"%)",1)]),o("div",$a,[o("div",Ia,r(("addCommom"in e?e.addCommom:Z(H))(_.amountOut)),1),o("div",Ra,r(e.toCoin.symbol),1)])],2),o("div",Pa,[_.basePaths&&_.basePaths.length>1?(i(),f("svg",Na,Ma)):B("",!0),(i(!0),f(Be,null,$o(_.basePaths,(l,oe)=>{var ne,y,G,E,C,n,t,k,g,$,O,D,S,X,u,c,me,Ne,De,We;return i(),f("div",{key:oe},[o("div",Ba,[o("div",Ta,[V(o("img",Fa,null,512),[[R,l.label=="Cetus"?e.getCoinIcon({address:l.fromCoin}):(ne=l==null?void 0:l.coin_a)==null?void 0:ne.logo_url]]),V(o("img",ja,null,512),[[R,l.label=="Cetus"?e.getCoinIcon({address:l.toCoin}):(y=l==null?void 0:l.coin_b)==null?void 0:y.logo_url]]),o("span",null,r((l==null?void 0:l.feeRate)*100)+"%",1)]),o("div",Ea,[o("img",{src:l.label=="Cetus"?"/sui-image/logo_cetus@2x.png":"/sui-image/logo_deepbook@2x.png",alt:""},null,8,Ua),o("span",null,r(l.label=="Cetus"?"Cetus":"DeepBook"),1)]),o("div",{class:te(["pool-info-detail-box",_.basePaths.length==1?"pool-info-detail-box-center":oe==0?"pool-info-detail-box-left":"pool-info-detail-box-right"])},[o("div",La,[o("div",Da,[Wa,o("p",null,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:Z(Ro))(e.currentExplorer,"poolAddress",l==null?void 0:l.poolAddress),target:"_blank"},r(l&&((G=l==null?void 0:l.poolAddress)==null?void 0:G.substr(0,6)))+" ... "+r(l&&((E=l==null?void 0:l.poolAddress)==null?void 0:E.substr(l.poolAddress.length-6,6))),9,qa),(i(),f("svg",{class:"copy-icon","aria-hidden":"true",onClick:Ie=>e.store.copy(l==null?void 0:l.poolAddress)},Xa,8,Ja))])]),l.coin_a&&l.coin_a?(i(),f("div",Ha,[V(o("img",Ya,null,512),[[R,(C=l==null?void 0:l.coin_a)==null?void 0:C.logo_url]]),o("div",null,[o("div",null,[o("span",Za,r((n=l==null?void 0:l.coin_a)==null?void 0:n.symbol),1),o("p",za,[o("span",null,r((k=(t=l==null?void 0:l.coin_a)==null?void 0:t.address)==null?void 0:k.substr(0,4))+" ... "+r(l&&((O=(g=l==null?void 0:l.coin_a)==null?void 0:g.address)==null?void 0:O.substr((($=l==null?void 0:l.coin_a)==null?void 0:$.address.length)-4,4))),1),(i(),f("svg",{class:"copy-icon","aria-hidden":"true",onClick:Ie=>{var pe;return e.store.copy((pe=l==null?void 0:l.coin_a)==null?void 0:pe.address)}},Va,8,Ga))])]),o("div",xa,r((D=l==null?void 0:l.coin_a)==null?void 0:D.name),1)])])):B("",!0),o("div",es,[V(o("img",os,null,512),[[R,(S=l==null?void 0:l.coin_b)==null?void 0:S.logo_url]]),o("div",null,[o("div",null,[o("span",ns,r((X=l==null?void 0:l.coin_b)==null?void 0:X.symbol),1),o("p",ts,[o("span",null,r((c=(u=l==null?void 0:l.coin_b)==null?void 0:u.address)==null?void 0:c.substr(0,4))+" ... "+r(l&&((De=(me=l==null?void 0:l.coin_b)==null?void 0:me.address)==null?void 0:De.substr(((Ne=l==null?void 0:l.coin_b)==null?void 0:Ne.address.length)-4,4))),1),(i(),f("svg",{class:"copy-icon","aria-hidden":"true",onClick:Ie=>{var pe;return e.store.copy((pe=l==null?void 0:l.coin_b)==null?void 0:pe.address)}},is,8,as))])]),o("div",ls,r((We=l==null?void 0:l.coin_b)==null?void 0:We.name),1)])])])],2)])])}),128))])],2))),128))])]}),_:1})}const us=Fe(ra,[["render",rs],["__scopeId","data-v-02677be7"]]),ds=Ge({components:{Modal:To},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},slippage:{type:String,default:""},impact:{type:Number,required:!1},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!1},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!1},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e,p){const I=Te(),m=P(()=>I),L=Le(),J=P(()=>L),v=C=>{var n;return(C==null?void 0:C.logoURI)||(C==null?void 0:C.logo_url)||((n=m.value.tokensObj[C==null?void 0:C.address])==null?void 0:n.logo_url)||(J.value.theme==="default"?he("/image/coins/unknown.png"):he("/image/coins/sui-unknown.png"))},R=b(!1),w=P(()=>J.value.chainName),Q=async()=>{p.emit("to-swap")};b([]);const K=b(0),x=b(""),_=b(""),j=P(()=>J.value.slippage);ee(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,j.value],([C,n,t,k,g,$])=>{if(C&&n&&t&&k&&$)if(g){const O=new s(n).mul(new s($/100));_.value=new s(n).sub(O).toString()}else{const O=new s(C).mul(new s($/100));x.value=new s(C).add(O).toString()}},{immediate:!0});const l=b(""),oe=P(()=>{var C,n,t,k,g,$,O,D,S;return(t=(n=m==null?void 0:m.value)==null?void 0:n.tokensObj[(C=e.fromCoin)==null?void 0:C.address])!=null&&t.pyth_id&&(($=(g=m==null?void 0:m.value)==null?void 0:g.tokensObj[(k=e.fromCoin)==null?void 0:k.address])==null?void 0:$.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(S=(D=m==null?void 0:m.value)==null?void 0:D.tokensObj[(O=e.fromCoin)==null?void 0:O.address])!=null&&S.coingecko_id?"coingecko":null}),ne=P(()=>{var C,n,t,k,g,$,O,D,S;return(t=(n=m==null?void 0:m.value)==null?void 0:n.tokensObj[(C=e.toCoin)==null?void 0:C.address])!=null&&t.pyth_id&&(($=(g=m==null?void 0:m.value)==null?void 0:g.tokensObj[(k=e.toCoin)==null?void 0:k.address])==null?void 0:$.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(S=(D=m==null?void 0:m.value)==null?void 0:D.tokensObj[(O=e.toCoin)==null?void 0:O.address])!=null&&S.coingecko_id?"coingecko":null}),y=async()=>{const C=m.value.tokenExternalPriceObj[e.fromCoin.address],n=m.value.tokenExternalPriceObj[e.toCoin.address];if(C&&n){const t=new s(C).div(new s(n)),k=new s(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(t).div(t).mul(100);let g=Math.abs(ie(k,2));t.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?l.value="":l.value=k>0&&k<=.01?"0.01":g}else l.value=""},G=C=>{if(C<5)return"color-s";if(C>=5&&C<10)return"color-w";if(C>=10)return"color-e"};ee(()=>[e.oneToAmount,m.value.tokenExternalPriceObj,w.value],([C,n,t])=>{C&&n&&!be(n)&&t!=="Aptos"&&y()},{immediate:!0,deep:!0});const E=b(!1);return{getCoinIcon:v,addCommom:H,sFixD:ie,rateChange:R,chainName:w,clickNextBtn:Q,pathLength:K,maximumSold:x,minimumReceived:_,decimalUi:fe,getTextColor:G,priceExangeRate:l,formCoinMarket:oe,toCoinMarket:ne,readWithin:E}}}),cs=""+globalThis.__publicAssetsURL("sui-image/within-error.png");const ae=e=>(Ee("data-v-fcbd16c6"),e=e(),Ue(),e),ms=ae(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),vs={class:"new-swap-contnet"},fs={class:"coin-info"},hs={class:"from-coin-info"},ps={class:"left"},gs={class:"coin-amount"},Cs={class:"coin-symbol"},bs={class:"right"},ks={class:"to-coin-info"},ws={class:"left"},ys={class:"coin-amount"},As={class:"coin-symbol"},_s={class:"right"},Ss=ae(()=>o("div",{class:"to-swap-logo"},null,-1)),$s={class:"coin-rate"},Is={key:0,class:"coin-rate-box"},Rs={class:"left"},Ps=ae(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Ns=ae(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Os=[Ps,Ns],Ms={key:1,class:"coin-rate-box"},Bs={class:"left"},Ts=ae(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Fs=ae(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),js=[Ts,Fs],Es={key:2,class:"within-tips-box"},Us={class:"within-tips"},Ls={key:0},Ds=["href"],Ws=ae(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),qs=[Ws],Js={key:1},Qs=["href"],Xs=ae(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Hs=[Xs],Ys={key:0},Zs=["href"],zs=ae(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Gs=[zs],Ks={key:1},Vs=["href"],xs=ae(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),ei=[xs],oi={key:2},ni=["href"],ti=ae(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),ai=[ti],si={key:3},ii=["href"],li=ae(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),ri=[li],ui={class:"bottom"},di={class:"induction"},ci={class:"item"},mi={class:"induction-text"},vi={class:"induction-value"},fi={class:"item"},hi={class:"induction-text"},pi={class:"induction-value"},gi={class:"item"},Ci={class:"induction-text"},bi={key:0,class:"icon","aria-hidden":"true"},ki=ae(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),wi=[ki],yi={class:"item"},Ai={class:"induction-text"},_i={key:0,class:"induction-value"},Si={key:1,class:"induction-value"},$i={key:0,class:"within-desc"},Ii=ae(()=>o("div",{class:"within-top"},[o("img",{src:cs,alt:""}),o("span",null,"The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?")],-1)),Ri={class:"within-bottom"},Pi={key:0,class:"price-updated"},Ni=ae(()=>o("span",null,"Price updated",-1));function Oi(e,p,I,m,L,J){const v=jo,R=Fo("Modal"),w=je("image");return i(),Y(R,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:p[7]||(p[7]=Q=>e.$emit("on-close"))},{closeIcon:de(()=>[ms]),default:de(()=>[o("div",vs,[o("div",fs,[o("div",hs,[o("div",ps,[o("div",gs,r(e.fromCoinAmount&&("addCommom"in e?e.addCommom:Z(H))(e.fromCoinAmount)),1),o("div",Cs,r(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",bs,[V(o("img",null,null,512),[[w,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),o("div",ks,[o("div",ws,[o("div",ys,r(e.toCoinAmount&&("addCommom"in e?e.addCommom:Z(H))(e.toCoinAmount)),1),o("div",As,r(e.toCoin&&e.toCoin.symbol),1)]),o("div",_s,[V(o("img",null,null,512),[[w,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),Ss]),o("div",$s,[e.rateChange?(i(),f("div",Ms,[o("div",Bs,[V(o("img",null,null,512),[[w,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,"1 "+r(e.toCoin&&e.toCoin.symbol)+" ≈",1),V(o("img",null,null,512),[[w,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,r(e.oneFromAmount)+" "+r(e.fromCoin.symbol),1)]),o("div",{class:"right",onClick:p[1]||(p[1]=Q=>e.rateChange=!e.rateChange)},js)])):(i(),f("div",Is,[o("div",Rs,[V(o("img",null,null,512),[[w,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,"1 "+r(e.fromCoin&&e.fromCoin.symbol)+" ≈",1),V(o("img",null,null,512),[[w,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,r(e.oneToAmount)+" "+r(e.toCoin.symbol),1)]),o("div",{class:"right",onClick:p[0]||(p[0]=Q=>e.rateChange=!e.rateChange)},Os)])),e.chainName=="Sui"&&e.priceExangeRate&&Number(e.priceExangeRate)>10?(i(),f("div",Es,[o("div",Us,[o("p",null,[o("span",{class:te(e.getTextColor(e.priceExangeRate))},"Within ~"+r(e.priceExangeRate)+"% of",3)]),e.formCoinMarket=="pyth"&&e.toCoinMarket=="pyth"?(i(),f("span",Ls,[q("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}&ids[]=${e.toCoin.pyth_id}`,target:"_blank"},qs,8,Ds)])):e.formCoinMarket=="coingecko"&&e.toCoinMarket=="coingecko"?(i(),f("span",Js,[q("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id},${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},Hs,8,Qs)])):e.formCoinMarket!==e.toCoinMarket?(i(),f(Be,{key:2},[e.formCoinMarket=="pyth"?(i(),f("span",Ys,[q("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}`,target:"_blank"},Gs,8,Zs)])):e.formCoinMarket=="coingecko"?(i(),f("span",Ks,[q("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},ei,8,Vs)])):B("",!0),e.toCoinMarket=="coingecko"?(i(),f("span",oi,[q("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},ai,8,ni)])):e.toCoinMarket=="pyth"?(i(),f("span",si,[q("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.toCoin.pyth_id}`,target:"_blank"},ri,8,ii)])):B("",!0)],64)):B("",!0)])])):B("",!0)])]),o("div",ui,[o("div",di,[o("div",ci,[o("div",mi,r(e.$t("modal.slippageTolerance")),1),o("div",vi,r(e.slippage)+"%",1)]),o("div",fi,[o("div",hi,r(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",pi,r(e.fixedFromCoin?("addCommom"in e?e.addCommom:Z(H))(("sFixD"in e?e.sFixD:Z(ie))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:Z(H))(("sFixD"in e?e.sFixD:Z(ie))(e.maximumSold,e.fromCoin.decimals)))+" "+r(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",gi,[o("div",Ci,r(e.$t("common.priceImpact")),1),o("div",{class:te(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[q(r(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(i(),f("svg",bi,wi)):B("",!0)],2)]),o("div",yi,[o("div",Ai,r(e.$t("common.fee")),1),e.chainName=="Aptos"?(i(),f("div",_i,r(e.formatFee)+" "+r(e.fromCoin.symbol)+" ("+r(e.fee*100)+"%) ",1)):(i(),f("div",Si,r(e.fee)+" "+r(e.fromCoin.symbol),1))])])]),e.chainName=="Sui"&&e.priceExangeRate&&Number(e.priceExangeRate)>10?(i(),f("div",$i,[Ii,o("div",Ri,[o("div",{class:te(["within-btn",e.readWithin?"within-btn-active":""]),onClick:p[2]||(p[2]=Q=>e.readWithin=!0)},"Yes, please continue.",2),o("div",{class:"within-btn",onClick:p[3]||(p[3]=Q=>e.$emit("on-close"))},"No, cancel it.")])])):B("",!0)]),e.isShowAccept?(i(),f("div",Pi,[Ni,Ce(v,{class:"accept-btn",loading:e.swapLoading,onClick:p[4]||(p[4]=Q=>e.$emit("accept"))},{default:de(()=>[q("Accept")]),_:1},8,["loading"])])):e.chainName=="Sui"?(i(),Y(v,{key:1,class:"big-btn swap-confirm-btn",disabled:Number(e.priceExangeRate)>10&&!e.readWithin,onClick:p[5]||(p[5]=Q=>e.clickNextBtn())},{default:de(()=>[q(r(e.$t("button.confirmSwap")),1)]),_:1},8,["disabled"])):e.chainName=="Aptos"?(i(),Y(v,{key:2,class:"big-btn swap-confirm-btn",onClick:p[6]||(p[6]=Q=>e.clickNextBtn())},{default:de(()=>[q(r(e.$t("button.confirmSwap")),1)]),_:1})):B("",!0)]),_:1},8,["title"])}const Mi=Fe(ds,[["render",Oi],["__scopeId","data-v-fcbd16c6"]]),Bi=Ge({setup(){const e=Io(),p=Po(No,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:I,locale:m}=fn(),L=Le(),J=Te(),v=P(()=>J);let R=b(!1),w=b(!1),Q=b(!1),K=b(!1),x=b(!1),_=b(!1);const j=b("fromCoin"),l=b(""),oe=b(""),ne=b(!1),y=b(!0),G=b(!1),E=b(!1),C=b(!1),n=b(""),t=b(""),k=b(20),g=b(0),$=b(null),O=b(!1),D=P(()=>L.slippage),S=P(()=>L.chainName),X=P(()=>S.value?ao(S.value):{}),u=b(),c=b(),me=P(()=>ge&&ge[S.value]&&ge[S.value].hasRouter),Ne=P(()=>J.getPoolInfoSuccess),De=P(()=>{var a;return T.value&&((a=T.value)!=null&&a.is_pause)?"Pool Closed":!u.value||!c.value?I("modal.selectTokenModalTitle"):!Number(n.value)&&!Number(t.value)?I("button.enterAmount"):!me.value&&!T.value&&Ne.value?"Pool Not Found":me.value&&_e.value?"No Available Route":O.value?I("button.insufficientLiquidity"):Number(n.value)>Number(ue.value)?I("button.insufficientBalance",{name:u.value.symbol}):I("button.swap")}),We=a=>{var h,d,A,M;j.value=a,a==="fromCoin"?(l.value=((h=c.value)==null?void 0:h.address)||"",oe.value=((d=u.value)==null?void 0:d.address)||""):(l.value=((A=u.value)==null?void 0:A.address)||"",oe.value=((M=c.value)==null?void 0:M.address)||""),ne.value=!0},Ie=b({}),pe=b({}),Eo=a=>{j.value==="fromCoin"?(Ie.value=a,eo(a)):(pe.value=a,eo(a))},Uo=a=>{a==="fromCoin"?(y.value=!0,S.value==="Aptos"?n.value=ue.value>0?u.value.symbol=="APT"?new s(Number(ue.value)).sub(new s(.1)).lt(new s(0))?"0":new s(Number(ue.value)).sub(new s(.1)).toString():String(ue.value):"":n.value=ue.value>0?u.value.symbol=="SUI"?new s(Number(ue.value)).sub(new s(.05)).lt(new s(0))?"0":new s(Number(ue.value)).sub(new s(.05)).toString():String(ue.value):""):(y.value=!1,S.value==="Aptos"?t.value=ce.value>0?c.value.symbol=="APT"?new s(Number(ce.value)).sub(new s(.1)).lt(new s(0))?"0":new s(Number(ce.value)).sub(new s(.1)).toString():String(ce.value):"":t.value=ce.value>0?c.value.symbol=="SUI"?new s(Number(ce.value)).sub(new s(.05)).lt(new s(0))?"0":new s(Number(ce.value)).sub(new s(.05)).toString():String(ce.value):"")},Lo=a=>{a==="fromCoin"?(y.value=!0,n.value=ue.value>0?ie(new s(Number(ue.value)).div(2).toString(),u.value.decimals).toString():""):(y.value=!1,t.value=ce.value>0?ie(new s(Number(ce.value)).div(2).toString(),c.value.decimals).toString():"")},Ke=b(!1);hn(()=>{so(),window.addEventListener("updateSwapParams",a=>{Ke.value=!Ke.value})}),pn(()=>{clearInterval($.value)});const Ve=P(()=>L),xe=()=>{w.value||!T.value&&!me.value||(clearInterval($.value),J.setPoolConfigList(Ve.value.chainName,Ve.value.filterCoinsObj),g.value=0,w.value=!0,T.value&&J.updateCurrentPools(T.value.poolAddress,S.value),$e(y.value?n.value:t.value),re.value.address&&X.value.getAccount(re.value.address),L.getStatsData(S.value,Ve.value.filterCoinsObj),setTimeout(()=>{w.value=!1,so()},1e3))},so=()=>{$.value=setInterval(()=>{w.value=!1,G.value||g.value<k.value&&(g.value+=1,g.value===k.value&&(S.value=="Aptos"?(T.value&&T.value.poolAddress&&J.updateCurrentPools(T.value.poolAddress,S.value),xe()):_.value||xe(),g.value=0,w.value=!0))},1e3)};ee(y,Ze((a,h)=>{y.value=a},500));const Re=b(!1);ee(n,Ze((a,h)=>{a&&a!==0&&y.value&&(g.value=0,$e(a)),a==""&&y.value&&(t.value="")},800)),ee(t,Ze((a,h)=>{a&&a!==0&&!y.value&&(g.value=0,$e(a)),a==""&&!y.value&&(n.value="")},800));const qe=b(1e-4),Je=async a=>{let h=a;if(S.value==="Aptos"&&!h.current_sqrt_price&&n.value&&t.value){const d=await X.value.getPools([h.address]);d&&d[0]&&(h={...a,...d[0],fee:Number(d[0].fee_rate)/1e6})}if(h.current_sqrt_price&&n.value&&t.value){const A=(u.value.address===h.coinA.address&&c.value.address===h.coinB.address?0:1)==0,M=new s(n.value),N=new s(t.value),U=M.sub(M.mul(new s(h.fee))),z=N.div(U);return X.value.getPriceImpactPct(h,z.toString(),A)}return"--"},io=b(0),lo=b(0),ro=b(),Pe=b({}),Do=async a=>{if(T.value&&!(y.value&&Number(n.value)==0)&&!(!y.value&&Number(t.value)==0))if(u.value&&c.value&&(n.value||t.value)){E.value=!0,C.value=!0,O.value=!1;const h=u.value.address===T.value.coinA.address&&c.value.address===T.value.coinB.address?0:1;try{let d=await X.value.preSwap({pool:T.value,a2b:h==0,byAmountIn:y.value,amount:y.value?n.value:t.value});O.value=d==null?void 0:d.isExceed,ro.value=d==null?void 0:d.estimatedFeeAmount,y.value?(t.value=d.estimatedAmountOut,Ae.value=(Number(d.estimatedAmountOut)/a).toString(),ye.value=(a/Number(d.estimatedAmountOut)).toString()):(n.value=d.estimatedAmountIn,Ae.value=(a/Number(d.estimatedAmountIn)).toString(),ye.value=(Number(d.estimatedAmountIn)/a).toString()),io.value=new s(t.value).div(n.value).toString(),lo.value=new s(n.value).div(t.value).toString(),qe.value=S.value=="Aptos"?await Je(T.value):await Je(Pe.value||T.value),E.value=!1,C.value=!1}catch{E.value=!1,C.value=!1}}else y.value?t.value="":n.value="",E.value=!1,C.value=!1},Wo=gn(),re=P(()=>Wo),qo=b({}),ye=b(""),Ae=b(""),ue=P(()=>re.value.assets&&u.value&&re.value.assets[u.value.address]?So(re.value.assets[u.value.address].balance,u.value.decimals):0),ce=P(()=>re.value.assets&&c.value&&re.value.assets[c.value.address]?So(re.value.assets[c.value.address].balance,c.value.decimals):0);Io(),ee(()=>v.value.tokensObj,async a=>{if(!be(a)){const h=e?e.currentRoute.value.query.to:"",d=e?e.currentRoute.value.query.from:"";d?u.value=await X.value.getTokenBySymbol(a,d):!d&&!u.value&&(u.value=await X.value.getTokenBySymbol(a,ge[S.value].swapDefaultPair.fromCoin)),h?c.value=await X.value.getTokenBySymbol(a,h):!h&&!c.value&&(c.value=await X.value.getTokenBySymbol(a,ge[S.value].swapDefaultPair.toCoin)),!d&&h&&(u.value="")}},{immediate:!0});const T=P(()=>{var a,h,d,A,M;if(u.value&&c.value){let N=null,U={};if(Object.values(v.value.poolConfigList).forEach(F=>{var W,se,ve,Me;(F.coinA.address.toUpperCase()===((W=u.value.address)==null?void 0:W.toUpperCase())&&F.coinB.address.toUpperCase()===((se=c.value.address)==null?void 0:se.toUpperCase())||F.coinB.address.toUpperCase()===((ve=u.value.address)==null?void 0:ve.toUpperCase())&&F.coinA.address.toUpperCase()===((Me=c.value.address)==null?void 0:Me.toUpperCase()))&&(U[F.address]={...F})}),S.value=="Aptos"&&v.value.poolsObj&&!be(v.value.poolsObj))for(const F in v.value.poolsObj){const W=v.value.poolsObj[F];(W.token_a.address.toUpperCase()===((a=u.value.address)==null?void 0:a.toUpperCase())&&W.token_b.address.toUpperCase()===((h=c.value.address)==null?void 0:h.toUpperCase())||W.token_b.address.toUpperCase()===((d=u.value.address)==null?void 0:d.toUpperCase())&&W.token_a.address.toUpperCase()===((A=c.value.address)==null?void 0:A.toUpperCase()))&&(U[W.address]={...W})}const z=Object.values(U).sort((F,W)=>F.fee-W.fee);for(let F=0;F<z.length;F++)if(!((M=z[F])!=null&&M.is_pause)){N=z[F];break}return N=Object.values(U).sort((F,W)=>F.fee-W.fee)[0],N&&!be(N)?N:null}return null}),uo=b(!0),co=b(!1),Jo=async a=>{a&&S.value=="Aptos"&&($e(y.value?n.value:t.value),co.value=!0,a.coinA.symbol.toLowerCase()===u.value.symbol.toLowerCase()&&a.coinB.symbol.toLowerCase()===c.value.symbol.toLowerCase()?uo.value=!0:uo.value=!1,O.value=!1)};ee(()=>T.value,(a,h)=>{a&&(!h||a.address!==h.address||a.current_sqrt_price!==h.current_sqrt_price)&&Jo(a)},{immediate:!0,deep:!0});const Qo=P(()=>v.value.tokensObj&&u.value&&u.value.address&&v.value.tokensObj[u.value.address]&&v.value.tokensObj[u.value.address].logoURI),Xo=P(()=>v.value.tokensObj&&c.value&&c.value.address&&v.value.tokensObj[c.value.address]&&v.value.tokensObj[c.value.address].logoURI),Ho=P(()=>S.value==="Aptos"?v.value.tokensObj&&u.value&&u.value.address&&v.value.tokensObj[u.value.address]&&v.value.tokensObj[u.value.address].coingecko_id||null:v.value.tokensObj&&u.value&&u.value.address||null),Yo=P(()=>S.value==="Aptos"?v.value.tokensObj&&c.value&&c.value.address&&v.value.tokensObj[c.value.address]&&v.value.tokensObj[c.value.address].coingecko_id||null:v.value.tokensObj&&c.value&&c.value.address||null),Zo=P(()=>{var a,h,d,A,M,N,U,z,F;return(d=(h=v==null?void 0:v.value)==null?void 0:h.tokensObj[(a=u==null?void 0:u.value)==null?void 0:a.address])!=null&&d.pyth_id&&((N=(M=v==null?void 0:v.value)==null?void 0:M.tokensObj[(A=u==null?void 0:u.value)==null?void 0:A.address])==null?void 0:N.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(F=(z=v==null?void 0:v.value)==null?void 0:z.tokensObj[(U=u==null?void 0:u.value)==null?void 0:U.address])!=null&&F.coingecko_id?"coingecko":null}),zo=P(()=>{var a,h,d,A,M,N,U,z,F;return(d=(h=v==null?void 0:v.value)==null?void 0:h.tokensObj[(a=c==null?void 0:c.value)==null?void 0:a.address])!=null&&d.pyth_id&&((N=(M=v==null?void 0:v.value)==null?void 0:M.tokensObj[(A=c==null?void 0:c.value)==null?void 0:A.address])==null?void 0:N.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(F=(z=v==null?void 0:v.value)==null?void 0:z.tokensObj[(U=c==null?void 0:c.value)==null?void 0:U.address])!=null&&F.coingecko_id?"coingecko":null}),Go=P(()=>{var A,M;const a=new s(n.value),h=new s(S.value=="Aptos"?(A=T==null?void 0:T.value)==null?void 0:A.fee:(M=Pe==null?void 0:Pe.value)==null?void 0:M.fee),d=a.mul(h).toString();return Number(d)<1/Math.pow(10,u.value.decimals)?`<${new s(1).div(new s(Math.pow(10,u.value.decimals))).toString()}`:ie(d,u.value.decimals)}),{setIsShowSuccess:Ko,setIsShowRejected:mo,setIsShowWaiting:Qe,setTransactionDesc:Vo,setTransactionTxid:vo}=L,xo=async()=>{var h,d,A,M,N,U,z,F;_.value=!1,E.value=!0,clearInterval(Oe),window.clearInterval(Oe),vo(""),Vo(I("tips.swapping",{from:`${H(n.value)} ${(h=u.value)==null?void 0:h.symbol}`,to:`${H(t.value)} ${(d=c.value)==null?void 0:d.symbol}`})),Qe(!0);let a;S.value=="Aptos"&&(a=u.value.address===T.value.token_a.address&&c.value.address===T.value.token_b.address?0:1);try{let W;S.value=="Aptos"?W=await X.value.getSwapTransactionPayload({pool:T.value,a2b:a==0,byAmountIn:y.value,amount:y.value?n.value:t.value,slippage:Number(D.value)/100}):W=await to.value.swapRouterContract.getSwapRouterPayload(Xe.value,Number(D.value)/100);let se;if(S.value==="Aptos")se=await re.value.currentWallet.signAndSubmitTransaction(W);else{const ve=await re.value.currentWallet.signAndExecuteTransactionBlock(W);se=X.value.handleTx(ve)}if(se&&se.hash){vo(se.hash),Qe(!1),Ko(!0);const ve={title:I("tips.swap"),desc:I("tips.swapSuccessText",{from:`${H(n.value)} ${(A=u.value)==null?void 0:A.symbol}`,to:`${H(t.value)} ${(M=c.value)==null?void 0:M.symbol}`}),hash:se.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:u.value.address==ge[S.value].currentChainTokenAddress||c.value.address==ge[S.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(N=u.value)==null?void 0:N.address}`,numa:`- ${n.value}`,logoa:v.value.tokensObj&&u.value&&u.value.address&&v.value.tokensObj[u.value.address]&&v.value.tokensObj[u.value.address].logoURI,tokenb:`${(U=c.value)==null?void 0:U.address}`,numb:`+ ${t.value}`,logob:v.value.tokensObj&&c.value&&c.value.address&&v.value.tokensObj[c.value.address]&&v.value.tokensObj[c.value.address].logoURI},text:`Pay ${n.value} ${(z=u.value)==null?void 0:z.symbol} to receive ${t.value} ${(F=c.value)==null?void 0:F.symbol}`};S.value!=="Aptos"&&(ve.res=se.res),X.value.showTransitionPending(ve),await X.value.watchTransaction(ve)&&setTimeout(()=>{S.value=="Aptos"&&J.updateCurrentPools(T.value.poolAddress,S.value),X.value.getAccount(re.value.address)},1e3)}else Qe(!1),mo(!0);n.value="",t.value="",E.value=!1}catch{n.value="",t.value="",E.value=!1,Qe(!1),mo(!0)}},en=a=>{var h;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((h=v.value.tokensObj[a==null?void 0:a.address])==null?void 0:h.logo_url)||(L.theme==="default"?he("/image/coins/unknown.png"):he("/image/coins/sui-unknown.png"))},fo=b([]);ee(()=>[u.value,c.value,v.value.poolConfigList],([a,h,d])=>{if(d&&d.length>0&&a&&h){const A=[];d.forEach(M=>{var N,U,z,F;(M.coinA.address.toUpperCase()===((N=a.address)==null?void 0:N.toUpperCase())&&M.coinB.address.toUpperCase()===((U=h.address)==null?void 0:U.toUpperCase())||M.coinB.address.toUpperCase()===((z=a.address)==null?void 0:z.toUpperCase())&&M.coinA.address.toUpperCase()===((F=h.address)==null?void 0:F.toUpperCase()))&&(M!=null&&M.is_pause||A.push(M.address))}),fo.value=A}},{immediate:!0});const eo=a=>{const h=localStorage.getItem(a.address);v.value.tokensObj&&v.value.tokensObj[a.address]&&v.value.tokensObj[a.address].isSelfBuilt&&!h?oo.value=!0:(j.value==="fromCoin"?(n.value="",c.value&&a.address.toLowerCase()===(c==null?void 0:c.value.address.toLowerCase())&&(c.value=null),u.value=a):(u.value&&(t.value="",a.address.toLowerCase()===(u==null?void 0:u.value.address.toLowerCase())&&(u.value=null)),c.value=a),ho())},oo=b(!1),ho=()=>{pe.value={},Ie.value={},oo.value=!1},on=P(()=>L.isShowRouterModal),no=b([]),po=b(""),nn=b(!1),go=yn(),to=P(()=>go),_e=b(!1),Xe=b({}),Co=b(""),bo=a=>{const{splitPaths:h}=a;let d=new s(0);h.forEach((M,N)=>{const U=M.basePaths[0],z=U.label==="Cetus"?new s(U.feeRate).div(Math.pow(10,6)):new s(U.feeRate).div(Math.pow(10,9)),F=new s(U.inputAmount).div(Math.pow(10,u.value.decimals)).mul(z);if(d=d.add(F),M.basePaths[1]){const W=M.basePaths[1],se=U.direction?U.currentPrice:new s(1).div(U.currentPrice),ve=W.direction?W.currentPrice:new s(1).div(M.basePaths[1].currentPrice),Me=W.label==="Cetus"?new s(W.feeRate).div(Math.pow(10,6)):new s(W.feeRate).div(Math.pow(10,9)),un=new s(W.outputAmount).div(Math.pow(10,c.value.decimals)).mul(Me).div(se.mul(ve));d=d.add(un)}});const A=d.toNumber();Co.value=A>0&&A<1e-6?"<0.000001":H(ie(A,u.value.decimals))},ko=(a,h)=>h.minus(a).div(h).mul(100),wo=async a=>{const{splitPaths:h}=a;let d=new s(0);h.forEach((A,M)=>{if(A.basePaths.length===1){const N=A.basePaths[0],U=new s(N.outputAmount).div(Math.pow(10,N.toDecimal)),z=new s(N.inputAmount).div(Math.pow(10,N.fromDecimal)),F=U.div(z),W=N.direction?new s(N.currentPrice):new s(1).div(N.currentPrice);d=d.add(ko(F,W))}else{const N=A.basePaths[0].direction?new s(A.basePaths[0].currentPrice):new s(1).div(A.basePaths[0].currentPrice),U=A.basePaths[1].direction?new s(A.basePaths[1].currentPrice):new s(1).div(A.basePaths[1].currentPrice),z=N.mul(U),F=new s(A.basePaths[1].outputAmount).div(Math.pow(10,A.basePaths[1].toDecimal)),W=new s(A.basePaths[0].inputAmount).div(Math.pow(10,A.basePaths[0].fromDecimal)),se=F.div(W);d=d.add(ko(se,z))}}),qe.value=Number(ie(d.toNumber(),2))},yo=async a=>{if(u.value&&c.value&&(Number(n.value)>0||Number(t.value)>0)){(!n.value&&t.value||n.value&&!t.value)&&(E.value=!0),Re.value=!0,_e.value=!1;let h;T.value&&(h=u.value.address===T.value.coinA.address&&c.value.address===T.value.coinB.address?0:1);try{let d;if(y.value){const U=new s(n.value).mul(Math.pow(10,u.value.decimals)).toString();d=new Ye(U)}else{const U=new s(t.value).mul(Math.pow(10,c.value.decimals)).toString();d=new Ye(U)}const A=Number(D.value)/100,M=T.value?{poolAddresses:fo.value,coinTypeA:T.value.coin_a_address,coinTypeB:T.value.coin_b_address,decimalsA:T.value.coinA.decimals,decimalsB:T.value.coinB.decimals,a2b:h==0,byAmountIn:y.value,amount:d.toString()}:"",N=await to.value.swapRouterContract.getSwapRouter(u,c,d,y.value,A,"",T.value?M:"");if(N&&!N.isExceed&&N.splitPaths&&N.splitPaths.length==0){_e.value=!0;return}if(N){if(Xe.value=N,no.value=N.paths,O.value=N.isExceed,N.isExceed){E.value=!1,_e.value=!1,y.value?t.value="":n.value="";return}bo(N),y.value?n.value&&(t.value=new s(N.outputAmount).div(new s(Math.pow(10,c.value.decimals))).toString()):t.value&&(n.value=new s(N.inputAmount).div(new s(Math.pow(10,u.value.decimals))).toString()),ye.value=H(fe(new s(n.value).div(new s(t.value).toString()),u.value.decimals)),Ae.value=H(fe(new s(t.value).div(n.value).toString(),c.value.decimals)),wo(N),E.value=!1,_e.value=!1,Re.value=!1}else E.value=!1,_e.value=!0,Re.value=!1}catch{E.value=!1,Re.value=!1}}else y.value?t.value="":n.value="",E.value=!1,Re.value=!1},Se=b(!1),Ao=async a=>{try{let h;if(y.value){const M=new s(n.value).mul(Math.pow(10,u.value.decimals)).toString();h=new Ye(M)}else{const M=new s(t.value).mul(Math.pow(10,c.value.decimals)).toString();h=new Ye(M)}const d=Number(D.value)/100,A=await to.value.swapRouterContract.getSwapRouter(u,c,h,y.value,d,"");A&&(Xe.value=A,no.value=A.paths,O.value=A.isExceed,po.value=A.amountIn,bo(A),ye.value=H(fe(new s(n.value).div(new s(t.value).toString()),u.value.decimals)),Ae.value=H(fe(new s(t.value).div(n.value).toString(),c.value.decimals)),wo(A),y.value?t.value!==A.amountOut&&(Se.value=!0,t.value=A.amountOut):n.value!==A.amountIn&&(Se.value=!0,n.value=A.amountIn))}catch{}},tn=async a=>{if(u.value&&c.value&&(n.value||t.value)){const h=u.value.address===T.value.coinA.address&&c.value.address===T.value.coinB.address?0:1;try{let d=await X.value.preSwap({pool:T.value,a2b:h==0,byAmountIn:y.value,amount:y.value?n.value:t.value});O.value=d==null?void 0:d.isExceed,ro.value=d==null?void 0:d.estimatedFeeAmount,y.value?(Ae.value=(Number(d.estimatedAmountOut)/d.estimatedAmountIn).toString(),ye.value=(d.estimatedAmountIn/Number(d.estimatedAmountOut)).toString()):(Ae.value=(Number(d.estimatedAmountOut)/Number(d.estimatedAmountIn)).toString(),ye.value=(Number(d.estimatedAmountIn)/Number(d.estimatedAmountOut)).toString()),y.value?t.value!==d.estimatedAmountOut&&(Se.value=!0,t.value=d.estimatedAmountOut):n.value!==d.estimatedAmountIn&&(Se.value=!0,n.value=d.estimatedAmountIn),qe.value=S.value=="Aptos"?await Je(T.value):await Je(Pe.value||T.value),E.value=!1,C.value=!1}catch{E.value=!1,C.value=!1}}else E.value=!1,C.value=!1};let Oe=b(null);ee(()=>_.value,a=>{a?Oe.value=setInterval(()=>{S.value=="Aptos"?tn(y.value):Ao(y.value)},3e3):(clearInterval(Oe.value),window.clearInterval(Oe.value))},{immediate:!0});const $e=async a=>{S.value=="Aptos"?Do(a):yo()};ee(()=>Ke.value,a=>{(Number(n.value)>0||Number(t.value)>0)&&$e(y.value?n.value:t.value)},{immediate:!0});const an=P(()=>go),sn=P(()=>an.value.isInitRouter);ee(()=>sn.value,a=>{a||(g.value=0,$e(y.value?n.value:t.value))},{immediate:!0}),ee(()=>[u.value,c.value],([a,h])=>{if(a&&h&&(g.value=0,$e(y.value?n.value:t.value)),a||h){const d=`/swap?from=${a==null?void 0:a.address}&to=${h==null?void 0:h.address}`;e.push(d)}},{immediate:!0});function ln(a,h=500){let d=null;return function(...A){clearTimeout(d),d=setTimeout(()=>{a.call(this,...A)},h)}}const rn=ln(_o);function _o(){const a=u.value;u.value=c.value,c.value=a,R.value=!0,y.value=!y.value,y.value?(n.value=t.value,t.value=""):(t.value=n.value,n.value=""),setTimeout(()=>{R.value=!1},300)}return{closeSwapConfirmModal:()=>{_.value=!1,Se.value=!1},updateAccept:()=>{Se.value=!1},clickExchange:_o,debounceClickExchange:rn,closeTokenWarning:ho,isShowTokenWarning:oo,getTokenSource:eo,hasPool:co,getPoolInfoSuccess:Ne,halfBtnSelect:Lo,formCoinId:Ho,toCoinId:Yo,formCoinMarket:Zo,toCoinMarket:zo,fromCoinUrl:Qo,toCoinUrl:Xo,t:I,indicator:p,wallet:re,currentLpInfo:qo,fixD:ze,decimalFormat:mn,impact:qe,oneFromAmount:ye,oneToAmount:Ae,importIcon:he,clickRefresh:xe,refresh:w,change:R,isShowAddress:Q,isShowSwapSetting:K,fromCoin:u,toCoin:c,slippage:D,openCoinSelect:We,onCoinSelect:Eo,existingCoins:l,lastSelectCoin:oe,currentCoinKey:j,showCoinSelect:ne,fromCoinAmount:n,toCoinAmount:t,maxBtnSelect:Uo,fixedFromCoin:y,swapBtnText:De,toSwap:xo,loading:G,swaping:E,autoRefreshTime:k,countdown:g,marketTimer:$,rateChange:x,isSwapConfirmMpdal:_,fromCoinBlance:ue,toCoinBlance:ce,poolInfo:T,chainName:S,swapRouterLoading:Re,formatFee:Go,calculating:C,currentRate:io,currentRateReverse:lo,getCoinIcon:en,toAddLiquidiPoolInfo:Pe,decimalUi:fe,warningToCoin:pe,warningFromCoin:Ie,isShowRouterModal:on,toSwapLoading:nn,insufficientLiquidity:O,routerPool:no,routerTotalAmounts:po,store:L,suiPreSwapdata:Xe,suiSwapFee:Co,addCommom:H,debounce:Ze,notFoundRouter:_e,getSuiAmountAccept:Ao,isShowAccept:Se,getSuiAmount:yo}}});const we=e=>(Ee("data-v-8d31be4e"),e=e(),Ue(),e),Ti={class:"swap-container"},Fi={class:"title"},ji={class:"left"},Ei={class:"right title-right"},Ui=we(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Li={class:"swap-card"},Di={class:"card-container"},Wi=we(()=>o("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),qi=[Wi],Ji={key:1,class:"induction"},Qi={key:0,class:"exchange-rate-btn"},Xi={key:0},Hi={key:0},Yi={key:0},Zi={key:1},zi={key:0},Gi=we(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Ki=we(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Vi=[Gi,Ki],xi={class:"item"},el={class:"induction-text"},ol={key:0,class:"icon","aria-hidden":"true"},nl=we(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),tl=[nl],al={class:"item"},sl={class:"induction-text"},il={key:0,class:"induction-value"},ll={class:"item"},rl={class:"induction-text"},ul={key:0,class:"induction-value"},dl={key:0,class:"icon","aria-hidden":"true"},cl=we(()=>o("use",{"xlink:href":"#icon-icon-swap"},null,-1)),ml=[cl],vl={key:2,class:"token-info-container"},fl={class:"token-info-title"},hl=we(()=>o("span",{class:"coingecko"},"Price Reference",-1)),pl=we(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1));function gl(e,p,I,m,L,J){var n,t;const v=dn,R=cn,w=Bt,Q=Oo,K=Mo,x=jo,_=Cn,j=bn,l=kn,oe=Bo,ne=la,y=wn,G=us,E=Mi,C=je("image");return i(),f("div",Ti,[o("div",Fi,[o("div",ji,r(e.$t("menu.swap")),1),o("div",Ei,[o("div",{class:"slippage-icon",onClick:p[0]||(p[0]=k=>e.isShowSwapSetting=!0)},[Ui,o("span",null,r(e.slippage)+"%",1)]),Ce(v,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),o("div",Li,[o("div",Di,[o("div",{class:te(["card-item",!e.fixedFromCoin&&(e.swapRouterLoading||e.swapLoading)?"card-item-mask":""])},[Ce(R,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":p[1]||(p[1]=k=>e.fromCoinAmount=k),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From",onOnMax:p[2]||(p[2]=k=>e.maxBtnSelect("fromCoin")),onOnHalf:p[3]||(p[3]=k=>e.halfBtnSelect("fromCoin")),onOnInput:p[4]||(p[4]=k=>{e.fromCoinAmount=k,e.fixedFromCoin=!0}),onOnSelect:p[5]||(p[5]=k=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])],2),o("div",{class:te(["card-item",e.fixedFromCoin&&(e.swapRouterLoading||e.swapLoading)?"card-item-mask":""])},[Ce(R,{modelValue:e.toCoinAmount,"onUpdate:modelValue":p[6]||(p[6]=k=>e.toCoinAmount=k),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",havehalf:!1,onOnInput:p[7]||(p[7]=k=>{e.toCoinAmount=k,e.fixedFromCoin=!1}),onOnSelect:p[8]||(p[8]=k=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])],2),o("img",{class:te(e.change?"gang animationex":"gang"),src:An,alt:""},null,2),o("div",{class:te(["exchange",e.chainName=="Sui"?"sui-exchange":""]),onClick:p[9]||(p[9]=(...k)=>e.debounceClickExchange&&e.debounceClickExchange(...k))},[(i(),f("svg",{class:te(e.change?"icon animationex":"icon"),"aria-hidden":"true"},qi,2))],2)]),e.chainName=="Sui"&&!e.notFoundRouter?(i(),Y(w,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.impact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFee,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(i(),f("div",Ji,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(i(),f("div",Qi,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(i(),f("span",Zi,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(i(),f("span",zi,[V(o("img",null,null,512),[[C,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),q(" 1 "+r(e.toCoin.symbol)+" ≈ ",1),V(o("img",null,null,512),[[C,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),o("span",null,r(("addCommom"in e?e.addCommom:Z(H))(("decimalUi"in e?e.decimalUi:Z(fe))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),q("  "+r(e.fromCoin.symbol),1)])):(i(),Y(Q,{key:1,indicator:e.indicator},null,8,["indicator"]))])):B("",!0):(i(),f("span",Xi,[V(o("img",null,null,512),[[C,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),q(" 1 "+r(e.fromCoin.symbol)+" ≈ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(i(),f("span",Hi,[V(o("img",null,null,512),[[C,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),e.calculating?B("",!0):(i(),f("span",Yi,r(("addCommom"in e?e.addCommom:Z(H))(("decimalUi"in e?e.decimalUi:Z(fe))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(i(),Y(Q,{key:1,indicator:e.indicator},null,8,["indicator"])):B("",!0),q("  "+r(e.toCoin.symbol),1)])):(i(),Y(Q,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"icon-change",onClick:p[10]||(p[10]=k=>e.rateChange=!e.rateChange)},Vi)])):B("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(i(),f(Be,{key:1},[o("div",xi,[o("div",el,r(e.$t("common.priceImpact")),1),e.swaping?(i(),Y(K,{key:1,paragraph:!1,active:""})):(i(),f("div",{key:0,class:te(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[q(r(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(i(),f("svg",ol,tl)):B("",!0)],2))]),o("div",al,[o("div",sl,r(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(i(),Y(K,{key:1,paragraph:!1,active:""})):(i(),f("div",il,r(e.fixedFromCoin?("addCommom"in e?e.addCommom:Z(H))(("fixD"in e?e.fixD:Z(ze))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:Z(H))(("fixD"in e?e.fixD:Z(ze))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+r(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",ll,[o("div",rl,r(e.$t("common.fee")),1),e.swaping?(i(),Y(K,{key:1,paragraph:!1,active:""})):(i(),f("div",ul,r(("addCommom"in e?e.addCommom:Z(H))(e.formatFee,e.fromCoin.decimals))+" "+r(e.fromCoin.symbol)+" ("+r(e.chainName=="Aptos"?e.poolInfo.fee*100:((n=e.toAddLiquidiPoolInfo)==null?void 0:n.fee)*100)+"%) ",1))])],64)):B("",!0)])):B("",!0)]),Ce(x,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((t=e.poolInfo)==null?void 0:t.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.chainName=="Aptos"?e.swaping:!1,onClick:p[11]||(p[11]=k=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:de(()=>[e.wallet.connected?(i(),f("svg",dl,ml)):B("",!0),o("span",null,r(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),Ce(_),e.showCoinSelect?(i(),Y(j,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:p[12]||(p[12]=k=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):B("",!0),e.isShowSwapSetting?(i(),Y(l,{key:1,onOnClose:p[13]||(p[13]=k=>e.isShowSwapSetting=!1)})):B("",!0),e.chainName&&(e.formCoinMarket||e.toCoinMarket)?(i(),f("div",vl,[o("div",fl,[hl,Ce(oe,{placement:"top","arrow-point-at-center":""},{title:de(()=>[q(" The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus. ")]),default:de(()=>[pl]),_:1})]),e.fromCoin&&e.formCoinMarket?(i(),Y(ne,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):B("",!0),e.toCoin&&e.toCoinMarket?(i(),Y(ne,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):B("",!0)])):B("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(i(),Y(y,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):B("",!0),e.isShowRouterModal?(i(),Y(G,{key:4,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:p[14]||(p[14]=k=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):B("",!0),e.isSwapConfirmMpdal?(i(),Y(E,{key:5,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.impact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFee:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFee:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):B("",!0)])}const Xl=Fe(Bi,[["render",gl],["__scopeId","data-v-8d31be4e"]]);export{Xl as default};
