import{s as Rs,a as B,u as _s,d as as,c as z}from"./pool.00c1dae1.js";import{a as X,l as _,r as L,e as Z,o as t,f as n,h as o,i as u,v as p,u as m,S as zs,p as ls,k as is,j as D,F as M,E as ds,M as Ts,b as ps,Q as hs,s as Bs,w as rs,t as E,B as vs,y as Ns,z as us,A as J,x as q,H as Os,q as G,K as Hs,c as Ks}from"./entry.c64d2ad0.js";/* empty css              */import{a as x,u as gs}from"./sha256.5caf5571.js";import{_ as js}from"./auto-pool-apy-tips.d7a111a6.js";/* empty css              */import{u as Qs}from"./farms.4d86baaa.js";import{_ as Gs}from"./upgrade-loading.9e405e0a.js";import{_ as Vs}from"./token-warning.a78cf948.js";import{i as ns}from"./import-icon.de3e6c66.js";import{u as cs}from"./autoPool.176aefc1.js";import{R as Ds}from"./farms-range.f84b0e79.js";import{_ as Us}from"./img-connect-wallet_2x.ff427ba5.js";import{_ as Js}from"./img-no-Positions_2x.f7f92436.js";import"./decimal.0bdeb344.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const Xs=X({props:{list:{type:Array,default:()=>[]},listLoading:{type:Boolean,default:!1},totalTVL:{type:Number,default:0}},setup(s){const a=x(),y=_(()=>a),v=L(!1);return{wallet:y,sFixD:Rs,loading:v,addCommom:B}}});const ms=s=>(ls("data-v-5a52c866"),s=s(),is(),s),Zs={class:"farms-banner-bg"},xs={class:"vaults-banner"},so={class:"vaults-banner-center"},oo=ms(()=>o("div",{class:"title"},"Vaults",-1)),eo=ms(()=>o("div",{class:"desc"},"Harvesting, compounding & rebalancing is automated.Stake your tokens to earn.",-1)),to={class:"claim-rewards"},no={class:"claim-title"},ao=ms(()=>o("span",null,"Total Value Locked",-1)),lo={key:0,class:"loading-spin"},io={key:1},ro={key:2};function co(s,a,y,v,S,f){const d=zs;return t(),n("div",Zs,[o("div",xs,[o("div",so,[oo,eo,o("div",to,[o("div",no,[ao,s.listLoading?(t(),n("span",lo,[u(d)])):s.wallet.address?(t(),n("span",io,"$"+p(("addCommom"in s?s.addCommom:m(B))(("sFixD"in s?s.sFixD:m(Rs))(s.totalTVL||0,2))),1)):(t(),n("span",ro,"--"))])])])])])}const uo=Z(Xs,[["render",co],["__scopeId","data-v-5a52c866"]]),_o=X({setup(){const s=L(!1),a=x(),y=_(()=>a),v=Qs(),S=_(()=>v),f=_(()=>S.value.farmsPoolList);return{isShowMore:s,wallet:y,walletStore:a,farmsPoolList:f}}});const ss=s=>(ls("data-v-6c925870"),s=s(),is(),s),po={class:"vaults-table"},ho=ss(()=>o("th",null,"Vaults",-1)),vo=ss(()=>o("th",null,"TVL",-1)),go=ss(()=>o("th",null,"Your Deposit",-1)),mo=ss(()=>o("th",null,"Actions",-1)),ko=ss(()=>o("tr",{style:{height:"4px",background:"unset"}},null,-1)),$o={class:"pool"},yo={class:"staked-tvl"},bo={class:"apr"},fo={class:"my-staked"},wo={class:"actions"},Co=ss(()=>o("tr",{style:{height:"8px",background:"unset !important"}},null,-1));function So(s,a,y,v,S,f){const d=js,h=Ts;return t(),n("div",po,[o("table",null,[o("thead",null,[o("tr",null,[ho,vo,o("th",null,[o("span",null,[D("APY "),u(d)])]),go,mo]),ko]),o("tbody",null,[(t(),n(M,null,ds(4,(w,T)=>(t(),n(M,{key:T},[o("tr",null,[o("td",null,[o("div",$o,[u(h,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),u(h,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",yo,[u(h,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",bo,[o("span",null,[u(h,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),o("td",null,[o("div",fo,[u(h,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",wo,[u(h,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),Co],64))),64))])])])}const Lo=Z(_o,[["render",So],["__scopeId","data-v-6c925870"]]),Ao=X({components:{Range:Ds},props:{pItem:{type:Object,default:()=>({})}},setup(s){const a=gs(),y=_(()=>a),v=_s(),S=_(()=>v),f=i=>{var r;return(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((r=S.value.tokensObj[i==null?void 0:i.address])==null?void 0:r.logo_url)||(y.value.theme==="default"?ns("/image/coins/unknown.png"):ns("/image/coins/sui-unknown.png"))},d=L(!0),h=cs(),w=_(()=>h),T=_(()=>w.value.positionInfoObj[s.pItem.id]),A=ps(),C=(i,r)=>{A.push(`/vaults-detail/${i.id}?action=${r}`)},g=i=>{const r=i.needReverse,P=r?i.token_b.address:i.token_a.address,U=r?i.token_a.address:i.token_b.address;A.push(`/swap?from=${P}&to=${U}`)},e=x(),k=_(()=>e);return{getCoinIcon:f,direct:d,decimalUi:as,addCommom:B,autoPool:w,positionInfo:T,toAutoPoolDetail:C,toSwap:g,wallet:k}}}),qs=""+globalThis.__publicAssetsURL("sui-image/range-vaults.png");const H=s=>(ls("data-v-117caa62"),s=s(),is(),s),Po={class:"vaults-position-card"},Io={class:"auto-position-card-conetent"},Ro={key:0,class:"no-vaults-data no-data"},To=H(()=>o("img",{src:Us},null,-1)),Bo={key:1,class:"auto-position-card"},No={class:"position-range"},Oo=H(()=>o("div",{class:"inrange"},[o("img",{src:qs,alt:""}),o("span",null,"In range")],-1)),jo={class:"right"},Vo={class:"top"},Do=H(()=>o("p",null,"Position Range",-1)),Uo={key:0},qo={key:1},Mo={class:"item lp-tokens"},Yo=H(()=>o("div",{class:"top"},"Your LP Tokens",-1)),Wo={class:"bottom"},Fo={key:0,class:"lp-num"},Eo={key:1,class:"lp-num"},zo={class:"item share"},Ho=H(()=>o("div",{class:"top"},"Share",-1)),Ko={class:"bottom"},Qo={key:0},Go={key:1},Jo={class:"item yourBanlance"},Xo=H(()=>o("div",{class:"top"},"Your Balance",-1)),Zo={class:"bottom"},xo={class:"token-info"},se={class:"token-num"},oe={alt:""},ee={key:0},te={key:1},ne=H(()=>o("p",null,"--",-1)),ae=[ne],le={class:"token-num"},ie={alt:""},de={key:0},re={key:1},ce=H(()=>o("p",null,"--",-1)),ue=[ce],_e={class:"action"};function pe(s,a,y,v,S,f){var T,A,C,g,e,k,i,r;const d=vs,h=hs("Range"),w=Bs("image");return t(),n("div",Po,[o("div",Io,[s.wallet.address?(t(),n("div",Bo,[o("div",No,[Oo,o("div",jo,[o("div",Vo,[Do,s.direct?(t(),n("span",Uo,p(("addCommom"in s?s.addCommom:m(B))(("decimalUi"in s?s.decimalUi:m(as))(s.pItem.price,6)))+" Current",1)):(t(),n("span",qo,p(("addCommom"in s?s.addCommom:m(B))(("decimalUi"in s?s.decimalUi:m(as))(1/s.pItem.price,6)))+" Current",1))]),u(h,{"pool-info":s.positionInfo,"prop-direct":s.direct,"use-props-direct":!0,onClickChange:a[1]||(a[1]=P=>s.direct=!s.direct)},null,8,["pool-info","prop-direct"])])]),o("div",Mo,[Yo,o("div",Wo,[(T=s.wallet)!=null&&T.connected?(t(),n("div",Fo,p(("addCommom"in s?s.addCommom:m(B))((A=s.positionInfo)==null?void 0:A.myLiquidity))+" LP",1)):(t(),n("div",Eo,"--"))])]),o("div",zo,[Ho,o("div",Ko,[(C=s.wallet)!=null&&C.connected?(t(),n("span",Qo,p((g=s.positionInfo)==null?void 0:g.myShare)+"%",1)):(t(),n("span",Go,"--%"))])]),o("div",Jo,[Xo,o("div",Zo,[o("div",xo,[o("div",se,[E(o("img",oe,null,512),[[w,s.pItem.needReverse?s.pItem.coinB.logo_url:s.pItem.coinA.logo_url]]),(e=s.wallet)!=null&&e.connected?(t(),n("div",ee,[o("span",null,p(("addCommom"in s?s.addCommom:m(B))((k=s.positionInfo)==null?void 0:k.amountA)),1)])):(t(),n("div",te,ae))]),o("div",le,[E(o("img",ie,null,512),[[w,s.pItem.needReverse?s.pItem.coinA.logo_url:s.pItem.coinB.logo_url]]),(i=s.wallet)!=null&&i.connected?(t(),n("div",de,[o("span",null,p(("addCommom"in s?s.addCommom:m(B))((r=s.positionInfo)==null?void 0:r.amountB)),1)])):(t(),n("div",re,ue))])])])]),o("div",_e,[o("div",null,[o("div",{class:"remove-btn",onClick:a[2]||(a[2]=P=>s.toAutoPoolDetail(s.pItem,"remove"))},"Withdraw")])])])):(t(),n("div",Ro,[To,u(d,{class:"add-liquidity-btn",onClick:a[0]||(a[0]=P=>s.wallet.setIsShowWalletModal(!0))},{default:rs(()=>[D("Connect Wallet")]),_:1})]))])])}const he=Z(Ao,[["render",pe],["__scopeId","data-v-117caa62"]]),ve=X({components:{TokenWarning:Vs,Range:Ds},props:{list:{type:Array,default:()=>[]}},setup(){const{t:s}=Ns(),a=gs(),y=_(()=>a),v=_s(),S=_(()=>v),f=l=>{var N;return(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||((N=S.value.tokensObj[l==null?void 0:l.address])==null?void 0:N.logo_url)||(y.value.theme==="default"?ns("/image/coins/unknown.png"):ns("/image/coins/sui-unknown.png"))},d=_(()=>S.value.tokensObj),h=_(()=>y.value.statsData),w=_(()=>y.value.theme),T=cs(),A=_(()=>T),C=L({}),g=l=>{C.value[l]?C.value[l]=!1:C.value[l]=!0},e=_(()=>A.value.positionInfoObj),k=x(),i=_(()=>k),r=L(!1),P=ps(),U=(l,N)=>{P.push(`/vaults-detail/${l.id}?action=${N}`)},O=l=>{const N=l.needReverse,Y=N?l.token_b.address:l.token_a.address,W=N?l.token_a.address:l.token_b.address;P.push(`/swap?from=${Y}&to=${W}`)},j=L(!0);return{router:P,getCoinIcon:f,tokensObj:d,t:s,statsData:h,checkNullObj:z,addCommom:B,importIcon:ns,theme:w,isShowPosition:C,togglePosition:g,positionInfo:e,wallet:i,isShowDetail:r,toAutoPoolDetail:U,toSwap:O,direct:j}}});const R=s=>(ls("data-v-961474ed"),s=s(),is(),s),ge={class:"vaults-table-contianer"},me={class:"table pc-pool-item"},ke={class:"table-header"},$e={class:"table-tr"},ye=R(()=>o("th",null,"Vaults",-1)),be=R(()=>o("th",null,"TVL",-1)),fe=R(()=>o("th",null,"Your Deposit",-1)),we=R(()=>o("th",null,"Actions",-1)),Ce=R(()=>o("tr",{style:{height:"4px",background:"unset"}},null,-1)),Se={class:"table-body"},Le=["onClick"],Ae={class:"token"},Pe={class:"img-box"},Ie={class:"img-box img-last-box"},Re={class:"name"},Te={class:"top"},Be={class:"token-name"},Ne={class:"tokena"},Oe={class:"tokenb"},je={class:"fee-warning"},Ve={class:"fee-tier-top"},De={key:0},Ue={class:"skeleton-box"},qe={key:1},Me={key:2},Ye={class:"skeleton-box"},We={key:3},Fe={key:4},Ee={class:"skeleton-box"},ze={key:5},He={class:"show-position"},Ke={class:"svg-icon"},Qe=R(()=>o("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ge=[Qe],Je={key:0,class:"table-tr view-table-tr"},Xe={colspan:"5"},Ze=R(()=>o("td",null,null,-1)),xe=R(()=>o("tr",{style:{height:"8px",background:"unset"}},null,-1)),st={class:"h5-pool-item"},ot={class:"token"},et={class:"img-box"},tt={key:0,class:"pool-warning"},nt={class:"img-box img-last-box"},at={key:0,class:"pool-warning"},lt={class:"name"},it={class:"top"},dt={class:"token-name"},rt={class:"tokena"},ct={class:"tokenb"},ut={class:"fee-warning"},_t={class:"fee-tier-top"},pt={class:"bottom"},ht={class:"row"},vt=R(()=>o("div",{class:"left"},"TVL",-1)),gt={key:0,class:"right"},mt={key:1,class:"right"},kt={class:"row"},$t=R(()=>o("div",{class:"left"},"APY",-1)),yt={key:0,class:"right"},bt={key:1,class:"right theme-right"},ft={class:"row"},wt=R(()=>o("div",{class:"left"},"Your Deposit",-1)),Ct={key:0,class:"right"},St={key:1,class:"right"},Lt=["onClick"],At=R(()=>o("use",{"xlink:href":"#icon-icon_on"},null,-1)),Pt=[At],It={key:0,class:"h5-auto-pool-details"},Rt={class:"position-range"},Tt=R(()=>o("div",{class:"inrange"},[o("img",{src:qs,alt:""}),o("span",null,"In range")],-1)),Bt={class:"right"},Nt={class:"top"},Ot=R(()=>o("p",null,"Position Range",-1)),jt={key:0},Vt={key:1},Dt={class:"h5-item lp-tokens"},Ut=R(()=>o("div",{class:"top"},"Your LP Tokens",-1)),qt={class:"bottom"},Mt={key:0,class:"lp-num"},Yt={key:1,class:"lp-num"},Wt={class:"h5-item share"},Ft=R(()=>o("div",{class:"top"},"Share",-1)),Et={class:"bottom"},zt={key:0},Ht={key:1},Kt={class:"h5-item yourBanlance"},Qt=R(()=>o("div",{class:"top"},"Your Balance",-1)),Gt={class:"bottom"},Jt={class:"token-info"},Xt={class:"token-num"},Zt={alt:""},xt={key:0},sn={key:1},on=R(()=>o("p",null,"--",-1)),en=[on],tn={class:"token-num"},nn={alt:""},an={key:0},ln={key:1},dn=R(()=>o("p",null,"--",-1)),rn=[dn],cn={class:"action"};function un(s,a,y,v,S,f){const d=js,h=Vs,w=Ts,T=vs,A=he,C=hs("Range"),g=Bs("image");return t(),n("div",ge,[o("table",me,[o("thead",ke,[o("tr",$e,[ye,be,o("th",null,[o("span",null,[D("APY "),u(d)])]),fe,we]),Ce]),o("tbody",Se,[(t(!0),n(M,null,ds(s.list,(e,k)=>{var i,r,P,U,O,j,l,N,Y,W,K;return t(),n(M,{key:k},[o("tr",{class:"table-tr",onClick:Q=>s.togglePosition(k)},[o("td",null,[o("div",Ae,[o("div",Pe,[E(o("img",null,null,512),[[g,s.getCoinIcon(e.needReverse?e.coinB:e.coinA)]]),u(h,{address:e.needReverse?(r=e==null?void 0:e.coinB)==null?void 0:r.address:(i=e==null?void 0:e.coinA)==null?void 0:i.address,"style-params":{right:0,bottom:0,width:"12px",height:"12px"}},null,8,["address"])]),o("div",Ie,[E(o("img",null,null,512),[[g,s.getCoinIcon(e.needReverse?e.coinA:e.coinB)]]),u(h,{address:e.needReverse?(U=e.coinA)==null?void 0:U.address:(P=e==null?void 0:e.coinB)==null?void 0:P.address,"style-params":{right:0,bottom:0,width:"12px",height:"12px"}},null,8,["address"])]),o("div",Re,[o("div",Te,[o("p",Be,[o("span",Ne,p(e.needReverse?(j=e==null?void 0:e.coinB)==null?void 0:j.symbol:(O=e==null?void 0:e.coinA)==null?void 0:O.symbol),1),D(" - "),o("span",Oe,p(e.needReverse?(l=e==null?void 0:e.coinA)==null?void 0:l.symbol:(N=e==null?void 0:e.coinB)==null?void 0:N.symbol),1)]),o("div",je,[o("div",Ve,p((e==null?void 0:e.fee)*100)+"%",1)])])])])]),("checkNullObj"in s?s.checkNullObj:m(z))(s.statsData)?(t(),n("td",De,[o("div",Ue,[u(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",qe," $"+p(Number(e.poolUSD)!==0&&Number(e.poolUSD)<.01?"<0.01":("addCommom"in s?s.addCommom:m(B))(e.poolUSD,2)),1)),("checkNullObj"in s?s.checkNullObj:m(z))(s.statsData)?(t(),n("td",Me,[o("div",Ye,[u(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",We,p(e.apy),1)),(Y=s.wallet)!=null&&Y.connected&&!s.positionInfo[e.id].myLiquidityUSD?(t(),n("td",Fe,[o("div",Ee,[u(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",ze,[s.wallet.connected?(t(),n(M,{key:0},[D(p(((W=s.positionInfo[e.id])==null?void 0:W.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in s?s.addCommom:m(B))((K=s.positionInfo[e.id])==null?void 0:K.myLiquidityUSD)}`:"<$0.01"),1)],64)):(t(),n(M,{key:1},[D("--")],64))])),o("td",null,[o("div",He,[u(T,{class:"add-liquidity-btn",onClick:us(Q=>s.router.push(`/vaults-detail/${e.id}?action=deposit`),["stop"])},{default:rs(()=>[D("Deposit")]),_:2},1032,["onClick"]),o("div",Ke,[(t(),n("svg",{"aria-hidden":"true",class:J(["icon",s.isShowPosition&&s.isShowPosition[k]?"icon-open":""])},Ge,2))])])])],8,Le),s.isShowPosition&&s.isShowPosition[k]?(t(),n("tr",Je,[o("td",Xe,[u(A,{"p-item":e},null,8,["p-item"])]),Ze])):q("",!0),xe],64)}),128))])]),o("div",st,[(t(!0),n(M,null,ds(s.list,(e,k)=>{var i,r,P,U,O,j,l,N,Y,W,K,Q;return t(),n("div",{key:e.address,class:"item"},[o("div",ot,[o("div",et,[E(o("img",null,null,512),[[g,s.getCoinIcon(e.needReverse?e.coinB:e.coinA)]]),(e.needReverse?(r=s.tokensObj[e.coinB.address])!=null&&r.isSelfBuilt:(i=s.tokensObj[e.coinA.address])!=null&&i.isSelfBuilt)?(t(),n("div",tt)):q("",!0)]),o("div",nt,[E(o("img",null,null,512),[[g,s.getCoinIcon(e.needReverse?e.coinA:e.coinB)]]),(e.needReverse?(P=s.tokensObj[e.coinA.address])!=null&&P.isSelfBuilt:(U=s.tokensObj[e.coinB.address])!=null&&U.isSelfBuilt)?(t(),n("div",at)):q("",!0)]),o("div",lt,[o("div",it,[o("p",dt,[o("span",rt,p(e.needReverse?e.coinB.symbol:e.coinA.symbol),1),D(" - "),o("span",ct,p(e.needReverse?e.coinA.symbol:e.coinB.symbol),1)]),o("div",ut,[o("div",_t,p((e==null?void 0:e.fee)*100)+"%",1)])])])]),o("div",pt,[o("div",ht,[vt,("checkNullObj"in s?s.checkNullObj:m(z))(s.statsData)?(t(),n("div",gt,[u(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",mt," $"+p(Number(e.poolUSD)!==0&&Number(e.poolUSD)<.01?"<0.01":("addCommom"in s?s.addCommom:m(B))(e.poolUSD,2)),1))]),o("div",kt,[$t,("checkNullObj"in s?s.checkNullObj:m(z))(s.statsData)?(t(),n("div",yt,[u(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",bt,[o("i",null,p(e.apy),1),u(d)]))]),o("div",ft,[wt,("checkNullObj"in s?s.checkNullObj:m(z))(s.positionInfo)&&((O=s.wallet)!=null&&O.connected)?(t(),n("div",Ct,[u(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",St,[(j=s.wallet)!=null&&j.connected?(t(),n(M,{key:0},[D(p(((l=s.positionInfo[e.id])==null?void 0:l.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in s?s.addCommom:m(B))((N=s.positionInfo[e.id])==null?void 0:N.myLiquidityUSD)}`:"<$0.01"),1)],64)):(t(),n(M,{key:1},[D("--")],64))]))])]),u(T,{class:"h5-add-liquidity-btn",onClick:us(es=>s.router.push(`/vaults-detail/${e.id}?action=deposit`),["stop"])},{default:rs(()=>[D("Deposit")]),_:2},1032,["onClick"]),o("div",{class:J(["details-btn",s.isShowPosition&&s.isShowPosition[k]?"details-btn-text-active":""]),onClick:es=>s.togglePosition(k)},[(t(),n("svg",{"aria-hidden":"true",class:J(["icon",s.isShowPosition&&s.isShowPosition[k]?"icon-active":""])},Pt,2))],10,Lt),s.isShowPosition&&s.isShowPosition[k]?(t(),n("div",It,[o("div",Rt,[Tt,o("div",Bt,[o("div",Nt,[Ot,s.direct?(t(),n("span",jt,p(("addCommom"in s?s.addCommom:m(B))(("decimalUi"in s?s.decimalUi:m(as))(e.price,6)))+" Current",1)):(t(),n("span",Vt,p(("addCommom"in s?s.addCommom:m(B))(("decimalUi"in s?s.decimalUi:m(as))(1/e.price,6)))+" Current",1))]),u(C,{"pool-info":e,"prop-direct":s.direct,"use-props-direct":!0,onClickChange:a[0]||(a[0]=es=>s.direct=!s.direct)},null,8,["pool-info","prop-direct"])])]),o("div",Dt,[Ut,o("div",qt,[(Y=s.wallet)!=null&&Y.connected?(t(),n("div",Mt,p(("addCommom"in s?s.addCommom:m(B))(e==null?void 0:e.myLiquidity))+" LP",1)):(t(),n("div",Yt,"--"))])]),o("div",Wt,[Ft,o("div",Et,[(W=s.wallet)!=null&&W.connected?(t(),n("span",zt,p(e==null?void 0:e.myShare)+"%",1)):(t(),n("span",Ht,"--%"))])]),o("div",Kt,[Qt,o("div",Gt,[o("div",Jt,[o("div",Xt,[E(o("img",Zt,null,512),[[g,e.needReverse?e.coinB.logo_url:e.coinA.logo_url]]),(K=s.wallet)!=null&&K.connected?(t(),n("div",xt,[o("span",null,p(("addCommom"in s?s.addCommom:m(B))(e==null?void 0:e.amountA)),1)])):(t(),n("div",sn,en))]),o("div",tn,[E(o("img",nn,null,512),[[g,e.needReverse?e.coinA.logo_url:e.coinB.logo_url]]),(Q=s.wallet)!=null&&Q.connected?(t(),n("div",an,[o("span",null,p(("addCommom"in s?s.addCommom:m(B))(e==null?void 0:e.amountB)),1)])):(t(),n("div",ln,rn))])])])]),o("div",cn,[o("div",null,[o("div",{class:"remove-btn",onClick:a[1]||(a[1]=es=>s.toAutoPoolDetail(s.pItem,"remove"))},"Withdraw")])])])):q("",!0)])}),128))])])}const _n=Z(ve,[["render",un],["__scopeId","data-v-961474ed"]]),pn=X({props:{selectValue:{type:String,default:""},showList:{type:Object,default:()=>({})}},setup(s,a){const y=["All Vaults","My Vaults"],v=L("All Vaults"),S=L(s.selectValue),f=L(!1),d=L(!1),h=x(),w=_(()=>h),T=cs(),A=_(()=>T),C=_(()=>A.value.autoPoolList),g=()=>s.showList.length,e=()=>{a.emit("clickRefresh")},k=r=>{S.value=r,a.emit("changeSort",r)},i=r=>{v.value=r,r=="My Vaults"?a.emit("changeTab",!0):a.emit("changeTab",!1)};return Os(()=>{document.addEventListener("click",()=>{d.value=!1})}),{isOpenList:d,wallet:w,changeSort:k,tabList:y,currentTab:v,sortValue:S,clickRefresh:e,isRefresh:f,vaultsPoolList:C,getListNum:g,changeTab:i}}});const os=s=>(ls("data-v-1d1eae2e"),s=s(),is(),s),hn={class:"vaults-tab"},vn={class:"tab-left"},gn=["onClick"],mn={key:0},kn={class:"tab-right"},$n={class:"sort-select"},yn=os(()=>o("div",null,"Sort by",-1)),bn={class:"showSort"},fn=os(()=>o("svg",{class:"sort-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),wn=os(()=>o("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Cn=[wn],Sn={key:0,class:"sort-list"},Ln=os(()=>o("svg",{class:"sort-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),An=os(()=>o("svg",{class:"sort-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),Pn={class:"refresh"},In=os(()=>o("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),Rn=[In];function Tn(s,a,y,v,S,f){return t(),n("div",hn,[o("div",vn,[(t(!0),n(M,null,ds(s.tabList,d=>(t(),n("div",{key:d,class:J(["tab-item",s.currentTab==d?"tab-item-active":""]),onClick:h=>s.changeTab(d)},[o("span",null,p(d),1),s.currentTab==d&&s.getListNum()?(t(),n("p",mn,p(s.currentTab=="My Vaults"&&!s.wallet.address?0:s.getListNum()),1)):q("",!0)],10,gn))),128))]),o("div",kn,[o("div",$n,[o("div",{class:"sort-select-box",onClick:a[0]||(a[0]=us(d=>s.isOpenList=!s.isOpenList,["stop"]))},[yn,o("div",bn,[o("span",null,p(s.sortValue),1),fn,(t(),n("svg",{class:J(["arrow-icon",s.isOpenList?"arrow-icon-active":""]),"aria-hidden":"true"},Cn,2))])]),s.isOpenList?(t(),n("div",Sn,[o("div",{class:"sort-item",onClick:a[1]||(a[1]=d=>s.changeSort("APY"))},[D(" APY "),Ln]),o("div",{class:"sort-item",onClick:a[2]||(a[2]=d=>s.changeSort("TVL"))},[D(" TVL "),An])])):q("",!0)]),o("div",Pn,[(t(),n("svg",{"aria-hidden":"true",class:J(["refresh-icon",s.isRefresh?"refreshing":""]),onClick:a[3]||(a[3]=(...d)=>s.clickRefresh&&s.clickRefresh(...d))},Rn,2))])])])}const Bn=Z(pn,[["render",Tn],["__scopeId","data-v-1d1eae2e"]]),Nn=X({components:{VaultsTabs:Bn},setup(){Ns();const s=gs(),a=_(()=>s),y=_s(),v=_(()=>y),S=cs(),f=_(()=>S),d=x(),h=_(()=>d),w=_(()=>f.value.positionInfoObj),T=_(()=>a.value.chainName),A=L(!1),C=L(!1),g=L("TVL"),e=L(["APY"]),k=L(!1),i=$=>{const V=[];V.push(g.value),e.value.forEach((I,c)=>{I!=$&&V.push(I)}),e.value=V,g.value=$,U(f.value.positionInfoList)};Os(()=>{document.addEventListener("click",()=>{Q("")})});const r=L([]),P=L(!0),U=$=>{const V=[];$.filter(c=>!c.is_pause).forEach(c=>{var $s,ys,bs,fs,ws,Cs,Ss,Ls,As,Ps,Is;const b=a.value.addressLpTokens[c.address],F=v.value.poolsObj[c.address],ts=(($s=f.value.apyObj[c.id])==null?void 0:$s.apr)||"0%",Ms=((ys=f.value.apyObj[c.id])==null?void 0:ys.resultApr)||"0",Ys=((bs=f.value.apyObj[c.id])==null?void 0:bs.tvl)||0,Ws=c.needReverse?((Ss=v.value.tokensObj[(Cs=c.coinB)==null?void 0:Cs.address])==null?void 0:Ss.labels)||[]:((ws=v.value.tokensObj[(fs=c.coinA)==null?void 0:fs.address])==null?void 0:ws.labels)||[],Fs=c.needReverse?((As=v.value.tokensObj[(Ls=c.coinA)==null?void 0:Ls.address])==null?void 0:As.labels)||[]:((Is=v.value.tokensObj[(Ps=c.coinB)==null?void 0:Ps.address])==null?void 0:Is.labels)||[],Es=[...new Set(Ws.concat(Fs))];V.push({...c,liqidity:Ys,vol:b?b.vol_in_usd_24h:"0",fee:c.fee?c.fee:F!=null&&F.fee?F.fee:"--",labels:Es,isFarming:c==null?void 0:c.isFarming,fee_24_h:b&&b.fee_24_h,apy:ts,resultApr:Ms})});let I=[];g.value=="APY"?I=V.sort((c,b)=>Number(b.resultApr)-Number(c.resultApr)):I=V.sort((c,b)=>Number(b.liqidity)-Number(c.liqidity)),r.value=I,P.value=!1,y.setAutoPoolNum(r.value.length)};G(()=>[f.value.positionInfoList,f.value.apyObj,v.value.poolConfigObj],([$,V,I])=>{$&&$.length>0&&I&&!z(I)&&U($)},{immediate:!0,deep:!0}),G(()=>[h.value.address,f.value.autoPoolList,v.value.poolConfigObj],([$,V,I])=>{$&&V&&V.length>0&&I&&!z(I)&&S.getMyAutoPoolPosition()},{immediate:!0});const O=L(null),j=_(()=>O.value&&O.value.firstToken?O.value.firstToken:null),l=_(()=>O.value&&O.value.lastToken?O.value.lastToken:null),N=L(),Y=L(0),W=()=>{let $=[];$=r.value;const V=$.filter((b,F)=>j.value&&l.value?b.coinA.address==j.value.address&&b.coinB.address==l.value.address||b.coinA.address==l.value.address&&b.coinB.address==j.value.address:j.value?b.coinA.address.toLowerCase().includes(j.value.address.toLowerCase())||b.coinB.address.toLowerCase().includes(j.value.address.toLowerCase()):l.value?b.coinA.address.toLowerCase().includes(l.value.address.toLowerCase())||b.coinB.address.toLowerCase().includes(l.value.address.toLowerCase()):$);let I=[],c=[];V.forEach((b,F)=>{const ts=w.value&&w.value[b.id];A.value&&Number(ts==null?void 0:ts.myLiquidity)>0&&h.value.connected?c.push(b):I.push({...b})}),Y.value=I.reduce((b,F)=>Number(b)+Number(F.poolUSD),0),N.value=A.value&&h.value.connected?c:I,P.value||(A.value&&h.value.connected?y.setAutoPoolNum(c.length):y.setAutoPoolNum(I.length))};G(()=>[j.value,l.value,r.value,A.value,h.value.address],([$,V,I,c])=>{($||V||I||c)&&W()},{immediate:!0}),Hs(()=>{y.setAutoPoolNum("--")});const K=_(()=>v.value.autoPoolNum),Q=$=>{$=="label"?(s.setIsSelect("pools"),k.value=!k.value,C.value=!1,a.value.setIsShowMore(!1)):$=="select"?(s.setIsSelect("pools"),C.value=!C.value,k.value=!1,a.value.setIsShowMore(!1)):(C.value=!1,k.value=!1)};G(()=>a.value.isSelect,$=>{$!=="pools"&&Q("")},{immediate:!0});const es=ps(),ks=()=>{P.value=!0,S.getAutoPoolList(),S.getAutoPoolAPY()};return G(()=>a.value.isRefresh,$=>{ks()},{immediate:!0}),G(()=>T.value,$=>{$=="Aptos"&&es.push("/pools")},{immediate:!0}),{totalTVL:Y,clickRefresh:ks,isMyLiquidity:A,chainName:T,store:a,select:C,selectValue:g,selectList:e,label:k,changeSort:i,list:r,listLoading:P,showList:N,childTokenSelectRef:O,wallet:h,autoPoolNum:K}}});const On={class:"vaults-container-new"},jn={class:"vaults-container-center"},Vn={class:"auto-pool"},Dn={key:0,class:"no-vaults-data no-data"},Un=o("img",{src:Us},null,-1),qn={key:0,class:"upgrade-loading pc-loading"},Mn={key:1,class:"upgrade-loading h5-loading"},Yn={key:3,class:"no-vaults-data"},Wn=o("img",{src:Js},null,-1),Fn=o("span",{class:"no-vaults"},"No vaults found",-1),En=[Wn,Fn];function zn(s,a,y,v,S,f){const d=uo,h=hs("VaultsTabs"),w=vs,T=Lo,A=Gs,C=_n;return t(),n("div",On,[u(d,{list:s.showList,"total-t-v-l":s.totalTVL,"list-loading":s.listLoading},null,8,["list","total-t-v-l","list-loading"]),o("div",jn,[u(h,{"select-value":s.selectValue,"show-list":s.showList,onChangeSort:a[0]||(a[0]=g=>s.changeSort(g)),onChangeTab:a[1]||(a[1]=g=>{s.isMyLiquidity=g}),onClickRefresh:s.clickRefresh},null,8,["select-value","show-list","onClickRefresh"]),o("div",Vn,[s.isMyLiquidity&&!s.wallet.address?(t(),n("div",Dn,[Un,u(w,{class:"add-liquidity-btn",onClick:a[2]||(a[2]=g=>s.wallet.setIsShowWalletModal(!0))},{default:rs(()=>[D("Connect Wallet")]),_:1})])):q("",!0),s.isMyLiquidity&&s.wallet.address&&s.listLoading||!s.isMyLiquidity&&s.listLoading?(t(),n(M,{key:1},[s.listLoading?(t(),n("div",qn,[u(T)])):q("",!0),s.listLoading?(t(),n("div",Mn,[u(A,{type:"poolsCard",loading:!0})])):q("",!0)],64)):q("",!0),s.isMyLiquidity&&s.wallet.address&&!s.listLoading||!s.isMyLiquidity&&!s.listLoading?(t(),Ks(C,{key:2,list:s.showList},null,8,["list"])):q("",!0),s.autoPoolNum!=="--"&&Number(s.autoPoolNum)<=0&&!s.listLoading?(t(),n("div",Yn,En)):q("",!0)])])])}const ra=Z(Nn,[["render",zn]]);export{ra as default};
