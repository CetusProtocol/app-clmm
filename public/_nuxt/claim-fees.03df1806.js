import{_ as io}from"./status-block.c2057c78.js";import{a as F,u as X,l as E,i as O,g as to,h as b,e as w,c as Y}from"./import-icon.ebd1e745.js";import{a as V,J as Z,r as D,q as c,e as H,o as l,f as p,h as n,i as y,w as U,t as s,x as q,v as R,u as a,S as ao,p as J,k as z,s as L,b as lo,c as x,j as M,O as ro,B as oo,M as uo,H as mo}from"./entry.86b83171.js";/* empty css              */import{_ as no,a as eo}from"./icon-arrow_2x.45808d19.js";import{_ as so}from"./c-switch.f135e186.js";import{u as po}from"./notifi.2a9bf78d.js";const fo=V({props:{positionInfo:{type:Object,required:!0,default:()=>({})}},setup(o){const{t:f}=Z();let v=D(!1),S=D(!0);const g=F(),_=X(),e=c(()=>_);console.log(o.positionInfo,"===>props.positionInfo");const r=c(()=>{var i,d,k,h,$,A,N,j;if(Y(o.positionInfo))return" --";{const B=o.positionInfo.amountA*((d=e.value.RATES[(i=o.positionInfo)==null?void 0:i.token_a.address])==null?void 0:d.price),T=o.positionInfo.amountB*((h=e.value.RATES[(k=o.positionInfo)==null?void 0:k.token_b.address])==null?void 0:h.price);return(A=e.value.RATES[($=o.positionInfo)==null?void 0:$.token_a.address])!=null&&A.price&&((j=e.value.RATES[(N=o.positionInfo)==null?void 0:N.token_b.address])!=null&&j.price)?B+T:" --"}}),u=c(()=>{var i,d,k,h;return(d=e.value.RATES[(i=o.positionInfo)==null?void 0:i.token_a.name.toUpperCase()])!=null&&d.price&&r.value!=="--"?(o.positionInfo.amountA*((h=e.value.RATES[(k=o.positionInfo)==null?void 0:k.token_a.name.toUpperCase()])==null?void 0:h.price)/r.value*100).toFixed(0):" --"}),I=c(()=>{var i,d,k,h;return(d=e.value.RATES[(i=o.positionInfo)==null?void 0:i.token_b.name.toUpperCase()])!=null&&d.price&&r.value!=="--"?(o.positionInfo.amountB*((h=e.value.RATES[(k=o.positionInfo)==null?void 0:k.token_b.name.toUpperCase()])==null?void 0:h.price)/r.value*100).toFixed(0):" --"}),t=c(()=>e.value.allTokenObj&&o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.address&&e.value.allTokenObj[o.positionInfo.token_a.address]&&e.value.allTokenObj[o.positionInfo.token_a.address].logoURI),m=c(()=>e.value.allTokenObj&&o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.address&&e.value.allTokenObj[o.positionInfo.token_b.address]&&e.value.allTokenObj[o.positionInfo.token_b.address].logoURI),C=c(()=>{var i,d;return(d=(i=o.positionInfo)==null?void 0:i.poolInfo)==null?void 0:d.needReverse});return{fromPercent:I,toPercent:u,amountUSD:r,showNum:E,t:f,importIcon:O,indexStore:g,rateChange:S,decimalFormat:to,fromCoinUrl:t,toCoinUrl:m,pools:e,addCommom:b,isPc:v,needReverse:C,getCoinIcon:i=>{var d;return(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((d=e.value.tokensObj[i==null?void 0:i.address])==null?void 0:d.logo_url)||(g.theme==="default"?O("/image/coins/unknown.png"):O("/image/coins/sui-unknown.png"))},decimalUi:w}}});const co=o=>(J("data-v-9f9e3adb"),o=o(),z(),o),Io={key:0,class:"position-card"},ko={key:0,class:"coin-pair"},ho=["src"],bo=["src"],vo={key:1,class:"coin-pair"},go=["src"],_o=["src"],Co={class:"fee"},So={class:"right"},yo={key:0,class:"status"},Uo={class:"min-and-max"},$o={key:0},wo={class:"text"},Oo={key:0,src:no,alt:""},Ro={key:1,src:eo,alt:""},Po={class:"text"},Ao={key:1},No={class:"text"},jo={key:0,src:no,alt:""},Bo={key:1,src:eo,alt:""},To={class:"text"},Eo=co(()=>n("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Do=[Eo],Lo={class:"liquidity"},qo={class:"label"},Mo={class:"value"},Fo={class:"item"},Vo=["src"],Ho={class:"rate"},Jo={class:"item"},zo=["src"],Go={class:"rate"};function Ko(o,f,v,S,g,_){const e=ao,r=io;return o.positionInfo?(l(),p("div",Io,[n("div",{class:q(["left",`position-status-${o.positionInfo&&o.positionInfo.currentStatus&&o.positionInfo.currentStatus.toLowerCase()}`])},[y(e,{class:"left-skeleton",loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:U(()=>[o.needReverse?(l(),p("div",vo,[n("div",null,[n("img",{src:o.toCoinUrl||o.getCoinIcon(o.positionInfo.token_b)},null,8,go),n("img",{src:o.fromCoinUrl||o.getCoinIcon(o.positionInfo.token_a)},null,8,_o)]),n("span",null,s(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol)+" - "+s(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)])):(l(),p("div",ko,[n("div",null,[n("img",{src:o.fromCoinUrl||o.getCoinIcon(o.positionInfo.token_a)},null,8,ho),n("img",{src:o.toCoinUrl||o.getCoinIcon(o.positionInfo.token_b)},null,8,bo)]),n("span",null,s(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" - "+s(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)])),n("div",Co,s(o.$t("common.fee"))+" "+s(o.positionInfo.fee*100)+"%",1)]),_:1},8,["loading"])],2),n("div",So,[o.pools.currentPositionLoading?R("",!0):(l(),p("div",yo,[y(r,{"current-status":o.positionInfo.currentStatus||"","block-name":"detail"},null,8,["current-status"])])),y(e,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:U(()=>[n("div",Uo,[(o.needReverse?!o.rateChange:o.rateChange)?(l(),p("div",$o,[n("div",wo,s(("addCommom"in o?o.addCommom:a(b))(("decimalUi"in o?o.decimalUi:a(w))(String(o.positionInfo.minPrice),6))),1),o.indexStore.theme=="default"?(l(),p("img",Oo)):(l(),p("img",Ro)),n("div",Po,s(o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("∞")>-1||o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in o?o.addCommom:a(b))(("decimalUi"in o?o.decimalUi:a(w))(String(o.positionInfo.maxPrice),6)))+" "+s(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol)+" per "+s(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)])):(l(),p("div",Ao,[n("div",No,s(("addCommom"in o?o.addCommom:a(b))(("decimalUi"in o?o.decimalUi:a(w))(String(1/Number(o.positionInfo.maxPrice)),6))),1),o.indexStore.theme=="default"?(l(),p("img",jo)):(l(),p("img",Bo)),n("div",To,s(o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("∞")>-1||o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in o?o.addCommom:a(b))(("decimalUi"in o?o.decimalUi:a(w))(String(1/Number(o.positionInfo.minPrice)),6)))+" "+s(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" per "+s(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)])),(l(),p("svg",{class:"icon-change","aria-hidden":"true",onClick:f[0]||(f[0]=u=>o.rateChange=!o.rateChange)},Do))])]),_:1},8,["loading"]),n("div",Lo,[y(e,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:U(()=>[n("div",qo,s(o.$t("common.liquidity")),1),n("div",Mo," $"+s(o.amountUSD=="--"?"--":Number(o.amountUSD)==0?0:Number(o.amountUSD)<.01?"<0.01":("addCommom"in o?o.addCommom:a(b))(o.amountUSD,2)),1)]),_:1},8,["loading"])]),n("div",{class:q(o.needReverse?"token-num reverse":"token-num")},[y(e,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:U(()=>{var u,I,t,m,C,P,i,d,k,h,$,A,N,j,B,T,G,K,Q,W;return[n("div",Fo,[n("div",null,[n("img",{src:o.fromCoinUrl||o.getCoinIcon((u=o.positionInfo)==null?void 0:u.token_a)},null,8,Vo),n("p",null,s(("decimalUi"in o?o.decimalUi:a(w))((I=o.positionInfo)==null?void 0:I.amountA,(m=(t=o.positionInfo)==null?void 0:t.token_a)==null?void 0:m.decimals)),1),n("span",null,s((P=(C=o.positionInfo)==null?void 0:C.token_a)==null?void 0:P.symbol)+" "+s((d=(i=o.positionInfo)==null?void 0:i.token_a)!=null&&d.labels&&((h=(k=o.positionInfo)==null?void 0:k.token_a)!=null&&h.labels[0])?`(${o.positionInfo.token_a.labels[0]})`:""),1)]),n("div",Ho,s(("addCommom"in o?o.addCommom:a(b))(o.positionInfo.fromPercent,0))+"% ",1)]),n("div",Jo,[n("div",null,[n("img",{src:o.toCoinUrl||o.getCoinIcon(($=o.positionInfo)==null?void 0:$.token_b)},null,8,zo),n("p",null,s(("decimalUi"in o?o.decimalUi:a(w))((A=o.positionInfo)==null?void 0:A.amountB,(j=(N=o.positionInfo)==null?void 0:N.token_b)==null?void 0:j.decimals)),1),n("span",null,s((T=(B=o.positionInfo)==null?void 0:B.token_b)==null?void 0:T.symbol)+" "+s((K=(G=o.positionInfo)==null?void 0:G.token_b)!=null&&K.labels&&((W=(Q=o.positionInfo)==null?void 0:Q.token_b)!=null&&W.labels[0])?`(${o.positionInfo.token_b.labels[0]})`:""),1)]),n("div",Go,s(("addCommom"in o?o.addCommom:a(b))(o.positionInfo.toPercent,0))+"%",1)])]}),_:1},8,["loading"])],2)])])):R("",!0)}const gn=H(fo,[["render",Ko],["__scopeId","data-v-9f9e3adb"]]),Qo=V({components:{CSwitch:so},props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const f=po(),v=c(()=>f),S=c(()=>v.value.status),g=F();L(()=>[v.value.targetGroups],t=>{console.log("0327###watch###newTargetGoups###",t)},{immediate:!0});const _=D(!1);L(()=>S.value,t=>{t=="authenticated",_.value=!1},{immediate:!0});const e=D(!1),r=async()=>{e.value=!e.value;const t={pool_address:o.positionInfo.poolAddress,position_index:o.positionInfo.index},m=o.positionInfo.nftHash;await f.subscribePosition(t,m,e.value)},u=t=>{const m=t.sources;e.value=m.some(C=>JSON.parse(C.blockchainAddress).pool_address==o.positionInfo.poolAddress&&Number(JSON.parse(C.blockchainAddress).position_index)==Number(o.positionInfo.index))},I=lo();return console.log(I.currentRoute.value.query.token,"===>rouyter"),L(()=>[v.value.sourceGroups,o.positionInfo],([t,m])=>{var C,P,i;console.log(t,"==>newSourceGroups169"),console.log(m,"===>positionInfo170"),e.value=!1,t&&t.length>0&&t[0]&&m&&!Y(m)&&((i=(P=(C=I==null?void 0:I.currentRoute)==null?void 0:C.value)==null?void 0:P.query)==null?void 0:i.token)==(m==null?void 0:m.name)&&(console.log("触发"),console.log(t,"==>newSourceGroups"),console.log(m,"===>positionInfo"),u(t[0]))},{immediate:!0,deep:!0}),{importIcon:O,isShowSetUp:_,changeSwitch:r,checked:e,notifiStatus:S,store:g}}});const Wo=o=>(J("data-v-7a8bd083"),o=o(),z(),o),Xo={class:"range-alerts"},Yo={class:"range-alerts-top"},Zo={class:"title"},xo=Wo(()=>n("div",{class:"title-all"},[n("span",{class:"Range"},"Range Alerts")],-1)),on={key:1,class:"h5-switch-box"},nn={class:"range-alerts-bottom"},en={key:0,class:"pc-switch-box"};function sn(o,f,v,S,g,_){const e=oo,r=so;return l(),p("div",Xo,[n("div",Yo,[n("div",Zo,[xo,o.isShowSetUp||o.notifiStatus!=="authenticated"?(l(),x(e,{key:0,class:"range-alerts-button",onClick:f[0]||(f[0]=ro(u=>o.store.setIsShowNotifi(!0),["stop"]))},{default:U(()=>[M(" Set up ")]),_:1})):R("",!0),!o.isShowSetUp&&o.notifiStatus=="authenticated"?(l(),p("div",on,[y(r,{checked:o.checked,disabled:o.notifiStatus!=="authenticated",onChange:o.changeSwitch},null,8,["checked","disabled","onChange"])])):R("",!0)])]),n("div",nn,[M(" Receive alerts via Telegram, SMS, or email when this position goes out of range. "),!o.isShowSetUp&&o.notifiStatus=="authenticated"?(l(),p("div",en,[y(r,{checked:o.checked,disabled:o.notifiStatus!=="authenticated",onChange:o.changeSwitch},null,8,["checked","disabled","onChange"])])):R("",!0)])])}const _n=H(Qo,[["render",sn],["__scopeId","data-v-7a8bd083"]]),tn=V({components:{Modal:uo},props:{positionInfo:{type:Object,required:!0},isLoading:{type:Boolean,required:!0},needReverse:{type:Boolean,required:!1}},setup(o,f){const{t:v,locale:S}=Z(),g=F(),{copy:_}=g,e=()=>{f.emit("toClaim")},r=X(),u=c(()=>r),I=c(()=>u.value.tokensObj&&o.positionInfo.token_a.address&&u.value.tokensObj[o.positionInfo.token_a.address]&&u.value.tokensObj[o.positionInfo.token_a.address].logoURI),t=c(()=>u.value.tokensObj&&o.positionInfo.token_b.address&&u.value.tokensObj[o.positionInfo.token_b.address]&&u.value.tokensObj[o.positionInfo.token_b.address].logoURI);return{showNum:E,fromCoinUrl:I,toCoinUrl:t,toClaim:e,t:v,addCommom:b,importIcon:O,store:g,copy:_}}});const an=o=>(J("data-v-0d5910fb"),o=o(),z(),o),ln=an(()=>n("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),dn={key:0,class:"pc-claim"},rn=["src"],un={key:1,class:"pc-claim"},mn=["src"];function pn(o,f,v,S,g,_){const e=oo,r=mo("Modal");return l(),x(r,{visible:!0,class:"claim-fees",centered:"",closable:!0,title:o.$t("modal.claimFees"),width:"400px",footer:null,onCancel:f[0]||(f[0]=u=>o.$emit("onClose"))},{closeIcon:U(()=>[ln]),default:U(()=>[n("div",{class:q(o.needReverse?"claim-container reverse":"claim-container")},[o.positionInfo&&o.positionInfo.token_a.symbol?(l(),p("div",dn,[n("img",{src:o.fromCoinUrl||("importIcon"in o?o.importIcon:a(O))(`/image/coins/${o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,rn),n("span",null,s(("showNum"in o?o.showNum:a(E))(o.positionInfo.feeOwedA,o.positionInfo.token_a.decimals))+" "+s(o.positionInfo.token_a.symbol),1)])):R("",!0),o.positionInfo&&o.positionInfo.token_b.symbol?(l(),p("div",un,[n("img",{src:o.toCoinUrl||("importIcon"in o?o.importIcon:a(O))(`/image/coins/${o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,mn),n("span",null,s(("showNum"in o?o.showNum:a(E))(o.positionInfo.feeOwedB,o.positionInfo.token_b.decimals))+" "+s(o.positionInfo.token_b.symbol),1)])):R("",!0)],2),y(e,{class:"big-btn claim-btn",disabled:o.isLoading||("addCommom"in o?o.addCommom:a(b))(o.positionInfo.feeOwedA,o.positionInfo.token_a.decimals)==0&&("addCommom"in o?o.addCommom:a(b))(o.positionInfo.feeOwedB,o.positionInfo.token_b.decimals)==0||o.positionInfo.poolInfo.is_pause,onClick:o.toClaim},{default:U(()=>[M(s(o.$t("common.claim")),1)]),_:1},8,["disabled","onClick"])]),_:1},8,["title"])}const Cn=H(tn,[["render",pn],["__scopeId","data-v-0d5910fb"]]);export{gn as _,_n as a,Cn as b};
