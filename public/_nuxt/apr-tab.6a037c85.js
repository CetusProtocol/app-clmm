import{a as te,W as se,r as l,e as ie,i as M,f as de,w as $,aa as ne,b as oe,z as x,Q as ce,A as pe,j as G,k as ue,o as N,l as O,m as d,q as j,C as z,t as _,E as le,F as Q,G as J,T as K,N as _e,O as me,H as be,s as ge,v as we}from"./entry.dfbbf7bb.js";import"./index.0f1f8b87.js";const ye=te({props:{aprRewardsDateList:{type:Array,default:()=>[]},aprRewardsParameter:{type:Number,default:30},aprTitle:{type:String,default:""},nameTab:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""}},setup(r,U){se();const g=l(0),w=l(0),y=l(0),P=l(0),m=l(1e4),f=l("echartsBox"+Date.now()+Math.random()),C=ie(),o=M(()=>C),F=M(()=>o.value.chainName?pe(o.value.chainName):{}),c=l({});de(()=>{window.setTimeout(()=>{b()},1e3)}),$(()=>c.value,(e,s)=>{G(e)||(g.value=e==null?void 0:e.aprFee,w.value=e!=null&&e.rewardAprList[0].rewarder_display?e==null?void 0:e.rewardAprList[0].rewarder_apr:0,y.value=e!=null&&e.rewardAprList[1].rewarder_display?e==null?void 0:e.rewardAprList[1].rewarder_apr:0,P.value=e!=null&&e.rewardAprList[2].rewarder_display?e==null?void 0:e.rewardAprList[2].rewarder_apr:0,(e==null?void 0:e.aprPercentageTotal)==0||isNaN(e==null?void 0:e.aprPercentageTotal)||(e==null?void 0:e.aprPercentageTotal)==1/0?m.value=1e9:m.value=0,!e.is_display_rewarder&&g.value==0&&(m.value=1e9),e.is_display_rewarder||(w.value=0,y.value=0,P.value=0),b())},{immediate:!0});const b=()=>{const e=document.getElementById(f.value),s=ne(e);let p={tooltip:{show:!0,trigger:"axis",axisPointer:{type:"shadow",axis:"auto",snap:!0},renderMode:"html",backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderWidth:0,padding:5,textStyle:{color:"#fff",fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:14},extraCssText:"box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);",confine:!1,formatter:function(i){return i[0].name+"\u7684\u5206\u6570\u662F:"+i[0].data}},title:{text:"",left:"center",top:"center"},series:[{type:"pie",silent:!0,data:[{value:g.value,name:"A"},{value:w.value,name:"B"},{value:y.value,name:"C"},{value:P.value,name:"D"},{value:m.value,name:"E"}],labelLine:{show:!1},itemStyle:{normal:{color:function(i){var n=o.value.theme=="default"?["#9EFFC3","#65C8FF","#6C65FF","#D3E97C","#8D8D8D"]:["#91E1FF","#65C8FF","#6C65FF","#D3E97C","#8D8D8D"];return n[i.dataIndex]}}},radius:["74%","100%"]}]};p&&s.setOption(p,!0)},T=M(()=>{var s;let e=0;return c.value&&c.value.rewardAprList&&((s=c.value)==null?void 0:s.rewardAprList).forEach(i=>{i!=null&&i.rewarder_display&&e++}),e}),A=oe(),u=M(()=>A),v=async e=>{let s;e.token_a.address.toLowerCase()===r.fromCoin.address.toLowerCase()&&e.token_b.address.toLowerCase()===r.toCoin.address.toLowerCase()?s=!0:s=!1;const p=s?Number(r.minPrice):r.maxPrice=="\u221E"?1/2**50:1/Number(r.maxPrice),i=isNaN(Number(r.maxPrice))||r.maxPrice=="\u221E"?2**50:s?Number(r.maxPrice):1/Number(r.minPrice);let n=[];n=Object.fromEntries(o.value&&o.value&&o.value.addressHistTokens[e.poolAddress].data.map(D=>[D.key,D.value]));const a=Number(Number(r.aprRewardsParameter==7?n.before_7_d_contract_price_lowest:r.aprRewardsParameter==24?n.before_24_h_contract_price_lowest:n.before_30_d_contract_price_lowest)),q=Number(Number(r.aprRewardsParameter==7?n.before_7_d_contract_price_highest:r.aprRewardsParameter==24?n.before_24_h_contract_price_highest:n.before_30_d_contract_price_highest)),W=u.value.newTokenObj,Y=await F.value.getEstPositionAPRWithMulti(p,i,a,q),k=Number(Y.toString()),t=o.value.newTopPoolsObj[e.poolAddress];let S;if(t){r.aprRewardsParameter==7?S=t.apr_7day?Number(t.apr_7day.substring(0,t.apr_7day.length-1)):0:r.aprRewardsParameter==24?S=t.apr_24h?Number(t.apr_24h.substring(0,t.apr_24h.length-1)):0:S=t.apr_30day?Number(t.apr_30day.substring(0,t.apr_30day.length-1)):0;const D=t.rewarder_apr[0]?Number(t.rewarder_apr[0].substring(0,t.rewarder_apr[0].length-1)):0,Z=t.rewarder_apr[1]?Number(t.rewarder_apr[1].substring(0,t.rewarder_apr[1].length-1)):0,I=t.rewarder_apr[2]?Number(t.rewarder_apr[2].substring(0,t.rewarder_apr[2].length-1)):0,h=Number(k*S),E=Number(k*D),B=Number(k*Z),H=Number(k*I),L=h+(e.rewarder_display1?E:0)+(e.rewarder_display2?B:0)+(e.rewarder_display3?H:0),V=e.rewarder_infos[0]?W[e.rewarder_infos[0].coinAddress].symbol:"--",ee=e.rewarder_infos[1]?W[e.rewarder_infos[1].coinAddress].symbol:"--",re=e.rewarder_infos[2]?W[e.rewarder_infos[2].coinAddress].symbol:"--",ae={aprFee:h==1/0||isNaN(h)?0:h,rewardAprList:[{rewarder_name:V,rewarder_apr:E==1/0||isNaN(E)?0:E,styleName:"one",rewarder_display:e.rewarder_display1},{rewarder_name:ee,rewarder_apr:B==1/0||isNaN(B)?0:B,styleName:"two",rewarder_display:e.rewarder_display2},{rewarder_name:re,rewarder_apr:H==1/0||isNaN(H)?0:H,styleName:"three",rewarder_display:e.rewarder_display2}],aprPercentageTotal:L==1/0||isNaN(L)||L===0?0:L,aprPercentage:x(h/L,2),is_display_rewarder:e.is_display_rewarder};c.value=ae}};$(()=>[r.aprRewardsParameter],()=>{r.nameTab=="position"&&v(r.poolInfo)}),$(()=>[r.poolInfo,r.minPrice,r.maxPrice,o.value.addressHistTokens],([e,s,p,i])=>{e&&!G(e)&&i&&v(e)},{immediate:!0});const R=(e,s)=>{U.emit("aprTab",e)};return $(()=>u.value.currentPositionLoading,e=>{u.value.currentPositionLoading&&(c.value={})}),{pools:u,initialize:b,aprOne:g,aprTwo:w,aprThree:y,aprFour:P,echartsBox:f,aprPercentageObjList:c,rewardLength:T,fixD:x,addCommom:ce,aprTab:R}}});const X=r=>(ge("data-v-8860f9c5"),r=r(),we(),r),Pe={class:"apr-rewards"},fe=X(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-icon-information"})],-1)),ve={class:"apr-tab"},he=["onClick"],Le={class:"fees-all"},Ne=["id"],Oe={class:"progress-all-in"},je={class:"progress-fees progress-all"},Ce=X(()=>d("div",{class:"light-hint"},null,-1));function Fe(r,U,g,w,y,P){var f,C,o,F,c,b,T,A,u,v,R,e,s,p,i,n;const m=be;return N(),O("div",null,[d("div",Pe,[d("div",{class:j(["apr-title",r.nameTab])},[z(_(r.aprTitle)+" ",1),le(m,{placement:"bottom","arrow-point-at-center":""},{title:Q(()=>[d("span",null," Estimated according to trading activity and farming bonus in the past "+_(r.aprRewardsParameter==7?"7 days":r.aprRewardsParameter==24?"24 hours":"30 days")+". Historical data is only a reference. By no means can it guarantee future returns. ",1)]),default:Q(()=>[fe]),_:1})],2),d("div",ve,[(N(!0),O(J,null,K(r.aprRewardsDateList,a=>(N(),O("div",{key:a,class:j(["apr-item",{"apr-item-active":a.num===r.aprRewardsParameter}]),onClick:q=>r.aprTab(a)},_(a.time),11,he))),128))])]),d("div",{class:j(["trade-fees",r.rewardLength>0&&r.aprPercentageObjList.is_display_rewarder?"rewarded":""])},[d("div",Le,[d("span",null,[z(_(r.pools.currentPositionLoading?"--":r.aprPercentageObjList.is_display_rewarder?(f=r.aprPercentageObjList)!=null&&f.aprPercentageTotal?((C=r.aprPercentageObjList)==null?void 0:C.aprPercentageTotal)>1e4?">10,000":((o=r.aprPercentageObjList)==null?void 0:o.aprPercentageTotal)<.01?"<0.01":r.fixD((F=r.aprPercentageObjList)==null?void 0:F.aprPercentageTotal,2):(c=r.aprPercentageObjList)!=null&&c.rewardAprList?"0":"--":(b=r.aprPercentageObjList)!=null&&b.aprFee?((T=r.aprPercentageObjList)==null?void 0:T.aprFee)>1e4?">10,000":((A=r.aprPercentageObjList)==null?void 0:A.aprFee)<.01?"<0.01":r.addCommom((u=r.aprPercentageObjList)==null?void 0:u.aprFee,2):(v=r.aprPercentageObjList)!=null&&v.rewardAprList?"0":"--")+"% ",1),d("div",{id:r.echartsBox,class:"right"},null,8,Ne)])]),d("div",{class:j(["percentage-fee",r.nameTab])},[d("div",Oe,[d("div",je,[Ce,z(" Fees\xA0\xA0"+_(r.pools.currentPositionLoading?"--":(R=r.aprPercentageObjList)!=null&&R.aprFee?((e=r.aprPercentageObjList)==null?void 0:e.aprFee)>1e4?">10,000":((s=r.aprPercentageObjList)==null?void 0:s.aprFee)<.01?"<0.01":r.addCommom((p=r.aprPercentageObjList)==null?void 0:p.aprFee,2):(i=r.aprPercentageObjList)!=null&&i.rewardAprList?"0":"--")+"% ",1)]),(N(!0),O(J,null,K((n=r.aprPercentageObjList)==null?void 0:n.rewardAprList,a=>_e((N(),O("div",{key:a,class:"progress-rewards progress-all"},[d("div",{class:j(["light-hint",a==null?void 0:a.styleName])},null,2),z(" "+_(a==null?void 0:a.rewarder_name)+" Bonus\xA0\xA0"+_(a!=null&&a.rewarder_apr?(a==null?void 0:a.rewarder_apr)>1e4?">10,000":(a==null?void 0:a.rewarder_apr)<.01?"<0.01":r.addCommom(a==null?void 0:a.rewarder_apr,2):"0")+"% ",1)])),[[me,(a==null?void 0:a.rewarder_name)!="--"&&a.rewarder_display&&r.aprPercentageObjList.is_display_rewarder&&!r.pools.currentPositionLoading]])),128))])],2)],2)])}const Re=ue(ye,[["render",Fe],["__scopeId","data-v-8860f9c5"]]);export{Re as _};
