import{_ as un}from"./back.82dd53df.js";import{_ as rn}from"./refresh-icon.7f86d9be.js";import{a as Xe,$ as Vo,y as Ao,r as g,ag as dn,e as We,V as io,o as s,c as z,w as _e,h as o,i as W,j as Ee,v,f,F as to,E as Eo,A as Oe,x as F,ah as vn,I as mn,B as Po,p as ze,k as Ge,H as bo,K as So,l as h,q as Ie,b as To,m as xe,s as No,t as Qe,u as I,G as Wo,O as wo,D as vo,C as pn,L as cn,z as jo,M as Xo}from"./entry.09bfea1e.js";/* empty css              */import{a as fn,b as bn,_ as yn}from"./icon-error_2x.0db135cc.js";import{u as Ze,a as zo}from"./autoPool.aeabf2aa.js";import{u as eo,c as Ke,a as R,g as Io,d as Le,s as S,T as je,b as le,p as Oo,e as Go,f as hn}from"./pool.727774da.js";import{_ as yo}from"./token-warning.bad538ff.js";import{_ as Ho}from"./auto-pool-apy-tips.2f180d93.js";import{u as ho,a as Ro}from"./sha256.d07ebf16.js";import{i as uo}from"./import-icon.de3e6c66.js";import{_ as Yo}from"./assets-card.b3840830.js";import{_ as Ko}from"./coin-lock.099aba20.js";import{_ as Zo,a as Jo}from"./auto-pool-remove-modal.040ef22c.js";/* empty css              */import{D as l}from"./decimal.0bdeb344.js";import{V as Co}from"./index.89204e1c.js";/* empty css              *//* empty css              */import"./decimal.6f03adc8.js";import{u as kn}from"./swapRouter.6dbefc09.js";/* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.273bf9f8.js";const _n=Xe({components:{Modal:Vo},setup(e,t){const{t:O,locale:V}=Ao(),T=Ze(),N=["0.1","0.5","1"],p=g(T.slippage||.1),{setSlippage:P}=T,$=dn(),u=g(!1);function i(n,m){u.value=!1,p.value=m}function B(){P(p.value),t.emit("onClose",!1)}return{settingArr:N,changeActiveIndex:i,confirm:B,emit:$,slippage:p,t:O,isInput:u,inputChange:n=>{const m=new RegExp(/[^\d^\.]+/g);n.target.value=n.target.value.replace(m,""),p.value=n.target.value}}}});const Qo=e=>(ze("data-v-c5b99de4"),e=e(),Ge(),e),gn=Qo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),$n={class:"setting-container"},wn={class:"title"},In=Qo(()=>o("img",{src:yn,alt:""},null,-1)),Cn={class:"tag-list"},An={key:0,src:fn,alt:""},Pn={key:1,src:bn,alt:""},Sn={class:"footer"};function Tn(e,t,O,V,T,N){const p=vn,P=mn,$=Po,u=io("Modal");return s(),z(u,{title:"Settings",class:"setting",centered:"",visible:!0,width:"400px",onCancel:t[3]||(t[3]=i=>e.$emit("onClose"))},{closeIcon:_e(()=>[gn]),footer:_e(()=>[o("div",Sn,[W($,{type:"cancel",class:"cancel-btn cancel-btn-new",onClick:t[2]||(t[2]=i=>e.$emit("onClose"))},{default:_e(()=>[Ee(v(e.$t("button.cancel")),1)]),_:1}),W($,{class:"confirmbtn",disabled:Number(e.slippage)==0||Number(e.slippage)>1||Number(e.slippage)<.01,onClick:e.confirm},{default:_e(()=>[Ee(v(e.$t("button.confirm")),1)]),_:1},8,["disabled","onClick"])])]),default:_e(()=>[o("div",$n,[o("div",wn,[In,o("span",null,v(e.$t("modal.slippageTolerance")),1)]),o("div",Cn,[(s(!0),f(to,null,Eo(e.settingArr,(i,B)=>(s(),z(p,{key:B,class:Oe(!e.isInput&&i==e.slippage?"tag-active":""),onClick:k=>e.changeActiveIndex(B,i)},{default:_e(()=>[Ee(v(i)+"% ",1)]),_:2},1032,["class","onClick"]))),128)),W(p,{class:Oe(["input-tag",e.isInput?"tag-active":""]),onClick:t[1]||(t[1]=i=>e.isInput=!0)},{default:_e(()=>[W(P,{value:e.slippage,"onUpdate:value":t[0]||(t[0]=i=>e.slippage=i),placeholder:"",suffix:"%",class:Oe(["slippage-input",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-input-waring":Number(e.slippage)>1?"slippage-input-error":""]),onChange:e.inputChange},null,8,["value","class","onChange"])]),_:1},8,["class"])])]),Number(e.slippage)>.5&&Number(e.slippage)<1||Number(e.slippage)>1?(s(),f("div",{key:0,class:Oe(["slippage-hint",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-hint-waring":Number(e.slippage)>1?"slippage-hint-error":""])},[Number(e.slippage)>.5&&1>=Number(e.slippage)?(s(),f("img",An)):F("",!0),Number(e.slippage)>1?(s(),f("img",Pn)):F("",!0),o("p",null,v(Number(e.slippage)>.5&&1>=Number(e.slippage)?e.$t("tips.slippageTolerance2"):Number(e.slippage)>1?e.$t("tips.slippageTolerance1"):""),1)],2)):F("",!0)]),_:1})}const Nn=We(_n,[["render",Tn],["__scopeId","data-v-c5b99de4"]]),Rn=Xe({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,t){const O=g(!1),V=g(null),T=g(0);let N=g(!1);const p=g(20);eo();const P=Ze(),$=g(!1);bo(()=>{}),So(()=>{clearInterval(V.value)});const u=()=>{N.value=!1,V.value=setInterval(()=>{var d;$.value||T.value<p.value&&(T.value+=1,T.value===p.value&&((d=e==null?void 0:e.poolInfo)!=null&&d.address&&k(),T.value=0))},1e3)},i=h(()=>P.slippage),B=()=>{t.emit("clearAll")},k=()=>{N.value||(N.value=!0,T.value=0,t.emit("clickRefresh"),setTimeout(()=>{N.value=!1},1e3))};Ie(()=>e.poolInfo,d=>{d&&!V.value&&u()},{immediate:!0});const n=To(),m=xe();return{refresh:N,clickRefresh:k,isShowSwapSetting:O,countdown:T,autoRefreshTime:p,slippage:i,clearAll:B,checkNullObj:Ke,router:n,route:m}}});const qn=e=>(ze("data-v-71491a33"),e=e(),Ge(),e),Bn={class:"title"},Dn={class:"left"},Ln=qn(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Mn={key:0,class:"deposit-progress"};function Un(e,t,O,V,T,N){const p=un,P=rn,$=Nn;return s(),f("div",Bn,[o("div",Dn,[W(p)]),o("div",{class:Oe(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[o("div",{class:"slippage-icon",onClick:t[0]||(t[0]=u=>e.isShowSwapSetting=!0)},[Ln,o("span",null,v(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(s(),f("div",Mn,[W(P,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):F("",!0)],2),e.isShowSwapSetting?(s(),z($,{key:0,onOnClose:t[1]||(t[1]=u=>e.isShowSwapSetting=!1)})):F("",!0)])}const Fn=We(Rn,[["render",Un],["__scopeId","data-v-71491a33"]]),On=Xe({components:{AutoPoolApyTips:Ho},setup(){const e=ho(),t=h(()=>e),O=eo(),V=h(()=>O),T=Ze(),N=h(()=>T),p=h(()=>t.value.theme),P=xe(),$=g();Ie(()=>[N.value.positionInfoObj,P.params.id],([m,d])=>{m&&!Ke(m)&&d&&($.value=m[d])},{immediate:!0,deep:!0});const u=h(()=>{var m;return(m=$.value)==null?void 0:m.needReverse}),i=m=>{var d;return(m==null?void 0:m.logoURI)||(m==null?void 0:m.logo_url)||((d=V.value.tokensObj[m==null?void 0:m.address])==null?void 0:d.logo_url)||(p.value==="default"?uo("/image/coins/unknown.png"):uo("/image/coins/sui-unknown.png"))},B=h(()=>{var m;return(m=$==null?void 0:$.value)==null?void 0:m.poolUSD}),k=h(()=>{var m,d;return N.value.apyObj&&((d=N.value.apyObj[(m=$.value)==null?void 0:m.id])==null?void 0:d.apr)||"--"}),n=h(()=>t.value.currentExplorer);return{positionInfo:$,needReverse:u,getCoinIcon:i,tvl:B,apy:k,addCommom:R,getExplorerUrl:Io,currentExplorer:n}}});const He=e=>(ze("data-v-0947d30b"),e=e(),Ge(),e),Vn={class:"auto-pool-v2-info"},En={class:"pool-info"},Wn={class:"left"},jn={class:"coin-a"},Xn={alt:""},zn={class:"coin-b"},Gn={alt:""},Hn={class:"position-name"},Yn={key:0,class:"pool-fee"},Kn=He(()=>o("span",null,"Fee tier",-1)),Zn={class:"vault-address"},Jn=["href"],Qn=He(()=>o("span",null,"Vault Address",-1)),xn=He(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),et=[Qn,xn],ot={class:"apy-and-tvl"},nt={class:"apy"},tt=He(()=>o("div",{class:"apy-title"},"APY",-1)),it={class:"apy-text"},st={class:"tvl"},at=He(()=>o("div",{class:"tvl-title"},"TVL",-1)),lt={class:"tvl-text"},ut={class:"pool-info h5-pool-info"},rt={class:"left"},dt={class:"coin-a"},vt={alt:""},mt={class:"coin-b"},pt={alt:""},ct={class:"position-name"},ft={key:0,class:"pool-fee"},bt=He(()=>o("span",null,"Fee tier",-1)),yt={class:"left"},ht={class:"vault-address"},kt=["href"],_t=He(()=>o("span",null,"Vault Address",-1)),gt=He(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),$t=[_t,gt],wt={class:"apy-and-tvl"},It={class:"apy"},Ct=He(()=>o("div",{class:"apy-title"},"APY",-1)),At={class:"apy-text"},Pt={class:"tvl"},St=He(()=>o("div",{class:"tvl-title"},"TVL",-1)),Tt={class:"tvl-text"};function Nt(e,t,O,V,T,N){var u,i,B,k,n,m,d,b,C,c,M,D,U,G,J,K,_,r,q,ne,te,ue,j,x,ge,be,de,ve,H,ie,ye,me,y,X,Se,pe,Re,Ce,qe,$e,Me,Je,ro,re,Ae,Te;const p=yo,P=Ho,$=No("image");return s(),f("div",Vn,[o("div",En,[o("div",Wn,[o("div",jn,[Qe(o("img",Xn,null,512),[[$,e.needReverse?e.getCoinIcon((i=e.positionInfo)==null?void 0:i.token_b):e.getCoinIcon((u=e.positionInfo)==null?void 0:u.token_a)]]),W(p,{address:e.needReverse?(m=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:m.address:(k=(B=e.positionInfo)==null?void 0:B.token_a)==null?void 0:k.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",zn,[Qe(o("img",Gn,null,512),[[$,e.needReverse?e.getCoinIcon((b=e.positionInfo)==null?void 0:b.token_a):e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_b)]]),W(p,{address:e.needReverse?(D=(M=e.positionInfo)==null?void 0:M.token_a)==null?void 0:D.address:(c=(C=e.positionInfo)==null?void 0:C.token_b)==null?void 0:c.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Hn,v(e.needReverse?(G=(U=e.positionInfo)==null?void 0:U.token_b)==null?void 0:G.symbol:(K=(J=e.positionInfo)==null?void 0:J.token_a)==null?void 0:K.symbol)+" - "+v(e.needReverse?(r=(_=e.positionInfo)==null?void 0:_.token_a)==null?void 0:r.symbol:(ne=(q=e.positionInfo)==null?void 0:q.token_b)==null?void 0:ne.symbol),1),(te=e.positionInfo)!=null&&te.fee?(s(),f("div",Yn,[Kn,Ee(" "+v(((ue=e.positionInfo)==null?void 0:ue.fee)*100)+"% ",1)])):F("",!0),o("div",Zn,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:I(Io))(e.currentExplorer,"poolAddress",(j=e.positionInfo)==null?void 0:j.id),target:"_blank"},et,8,Jn)])]),o("div",ot,[o("div",nt,[tt,o("div",it,[Ee(v(e.apy)+" ",1),W(P)])]),o("div",st,[at,o("div",lt,"$"+v(("addCommom"in e?e.addCommom:I(R))(e.tvl,2)),1)])])]),o("div",ut,[o("div",rt,[o("div",dt,[Qe(o("img",vt,null,512),[[$,e.needReverse?e.getCoinIcon((ge=e.positionInfo)==null?void 0:ge.token_b):e.getCoinIcon((x=e.positionInfo)==null?void 0:x.token_a)]]),W(p,{address:e.needReverse?(H=(ve=e.positionInfo)==null?void 0:ve.token_b)==null?void 0:H.address:(de=(be=e.positionInfo)==null?void 0:be.token_a)==null?void 0:de.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",mt,[Qe(o("img",pt,null,512),[[$,e.needReverse?e.getCoinIcon((ye=e.positionInfo)==null?void 0:ye.token_a):e.getCoinIcon((ie=e.positionInfo)==null?void 0:ie.token_b)]]),W(p,{address:e.needReverse?(Se=(X=e.positionInfo)==null?void 0:X.token_a)==null?void 0:Se.address:(y=(me=e.positionInfo)==null?void 0:me.token_b)==null?void 0:y.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",ct,v(e.needReverse?(Re=(pe=e.positionInfo)==null?void 0:pe.token_b)==null?void 0:Re.symbol:(qe=(Ce=e.positionInfo)==null?void 0:Ce.token_a)==null?void 0:qe.symbol)+" - "+v(e.needReverse?(Me=($e=e.positionInfo)==null?void 0:$e.token_a)==null?void 0:Me.symbol:(ro=(Je=e.positionInfo)==null?void 0:Je.token_b)==null?void 0:ro.symbol),1),(re=e.positionInfo)!=null&&re.fee?(s(),f("div",ft,[bt,Ee(" "+v(((Ae=e.positionInfo)==null?void 0:Ae.fee)*100)+"% ",1)])):F("",!0)]),o("div",yt,[o("div",ht,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:I(Io))(e.currentExplorer,"poolAddress",(Te=e.positionInfo)==null?void 0:Te.id),target:"_blank"},$t,8,kt)])]),o("div",wt,[o("div",It,[Ct,o("div",At,[Ee(v(e.apy)+" ",1),W(P)])]),o("div",Pt,[St,o("div",Tt,"$"+v(("addCommom"in e?e.addCommom:I(R))(e.tvl,2)),1)])])])])}const xo=We(On,[["render",Nt],["__scopeId","data-v-0947d30b"]]),Rt=Xe({components:{Slider:Wo},setup(){const e=g(!0),t=eo(),O=h(()=>t),V=Ze(),T=h(()=>V),N=xe(),p=g();Ie(()=>[T.value.positionInfoObj,N.params.id],([k,n])=>{k&&!Ke(k)&&n&&(p.value=k[n])},{immediate:!0,deep:!0});const P=h(()=>{var k;return(k=p.value)==null?void 0:k.needReverse}),$=k=>{var n;return(k==null?void 0:k.logoURI)||(k==null?void 0:k.logo_url)||((n=O.value.tokensObj[k==null?void 0:k.address])==null?void 0:n.logo_url)||uo("/image/coins/sui-unknown.png")},u=h(()=>{var b,C,c,M,D,U,G;const k=e.value?((b=p.value)==null?void 0:b.minPrice)&&S(p==null?void 0:p.value.minPrice,6):((C=p.value)==null?void 0:C.maxPrice)&&S(1/(p==null?void 0:p.value.maxPrice),6),n=e.value?((c=p.value)==null?void 0:c.maxPrice)&&S((M=p.value)==null?void 0:M.maxPrice,6):((D=p.value)==null?void 0:D.minPrice)&&S(1/(p==null?void 0:p.value.minPrice),6),m=(P.value?!e.value:e.value)?S((U=p.value)==null?void 0:U.price,6):S(1/((G=p.value)==null?void 0:G.price),6);let d={};return d[k]={label:"Min Price"},d[n]={label:"Max Price"},m>k&&m<n?d[m]={label:"Current Price"}:m<k?d[Number(k)+1e-9]={label:"Current Price"}:m>n&&(d[Number(n)-1e-9]={label:"Current Price"}),d}),i=h(()=>{var n,m;return(P.value?!e.value:e.value)?Le((n=p.value)==null?void 0:n.price,6):Le(1/((m=p.value)==null?void 0:m.price),6)}),B=h(()=>{var n,m;return(P.value?!e.value:e.value)?Le((n=p.value)==null?void 0:n.price,6):Le(1/((m=p.value)==null?void 0:m.price),6)});return{direct:e,positionInfo:p,needReverse:P,getCoinIcon:$,decimalUi:Le,addCommom:R,sFixD:S,marks:u,currentPrice:i,currentPriceResever:B}}});const ko=e=>(ze("data-v-44da997b"),e=e(),Ge(),e),qt={class:"v2-position-range"},Bt={class:"position-range-top"},Dt=ko(()=>o("div",null,"Position Range",-1)),Lt={class:"base-coin"},Mt={key:0},Ut={alt:""},Ft={key:1},Ot={alt:""},Vt={key:2},Et={key:3},Wt=ko(()=>o("p",null,"Base coin",-1)),jt={class:"coin-rate"},Xt=ko(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),zt=ko(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Gt=[Xt,zt],Ht={class:"position-range-bottom"},Yt={class:"price-range"},Kt={class:"price-range-bg"},Zt={key:0,class:"min-price"},Jt={key:0},Qt={key:1},xt={key:1,class:"max-price"},ei={key:0},oi={key:1},ni={key:0,class:"min-price"},ti={key:0},ii={key:1},si={key:1,class:"max-price"},ai={key:0},li={key:1};function ui(e,t,O,V,T,N){var u,i,B,k,n,m,d,b,C,c,M,D,U,G,J,K,_,r,q,ne,te,ue,j,x,ge,be,de,ve;const p=yo,P=io("Slider"),$=No("image");return s(),f("div",qt,[o("div",Bt,[Dt,o("div",Lt,[e.needReverse?(s(),f("div",Ft,[Qe(o("img",Ot,null,512),[[$,e.direct?e.getCoinIcon((b=e.positionInfo)==null?void 0:b.token_b):e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_a)]]),W(p,{address:e.direct?(D=(M=e.positionInfo)==null?void 0:M.token_b)==null?void 0:D.address:(c=(C=e.positionInfo)==null?void 0:C.token_a)==null?void 0:c.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(s(),f("div",Mt,[Qe(o("img",Ut,null,512),[[$,e.direct?e.getCoinIcon((u=e.positionInfo)==null?void 0:u.token_a):e.getCoinIcon((i=e.positionInfo)==null?void 0:i.token_b)]]),W(p,{address:e.direct?(k=(B=e.positionInfo)==null?void 0:B.token_a)==null?void 0:k.address:(m=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:m.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(s(),f("span",Et,v(e.direct?(r=(_=e.positionInfo)==null?void 0:_.token_b)==null?void 0:r.symbol:(ne=(q=e.positionInfo)==null?void 0:q.token_a)==null?void 0:ne.symbol),1)):(s(),f("span",Vt,v(e.direct?(G=(U=e.positionInfo)==null?void 0:U.token_a)==null?void 0:G.symbol:(K=(J=e.positionInfo)==null?void 0:J.token_b)==null?void 0:K.symbol),1)),Wt,o("div",jt,[o("div",{onClick:t[0]||(t[0]=H=>e.direct=!e.direct)},Gt)])])]),o("div",Ht,[o("div",Yt,[o("div",Kt,[e.direct?(s(),z(P,{key:0,value:e.currentPrice,class:Oe(["position-slider",e.currentPrice<Number(("sFixD"in e?e.sFixD:I(S))((te=e.positionInfo)==null?void 0:te.minPrice,6))||e.currentPrice>Number(("sFixD"in e?e.sFixD:I(S))((ue=e.positionInfo)==null?void 0:ue.maxPrice,6))?"hide-handler":""]),step:null,marks:e.marks,disabled:!0,min:Number(("decimalUi"in e?e.decimalUi:I(Le))((j=e.positionInfo)==null?void 0:j.minPrice,6)),max:Number(("decimalUi"in e?e.decimalUi:I(Le))((x=e.positionInfo)==null?void 0:x.maxPrice,6))},{mark:_e(({label:H})=>{var ie,ye,me,y,X,Se,pe,Re,Ce,qe,$e,Me;return[H=="Min Price"?(s(),f("div",Zt,[o("div",null,v(H),1),e.direct?(s(),f("div",Jt,v(((ie=e.positionInfo)==null?void 0:ie.minPrice)&&("sFixD"in e?e.sFixD:I(S))((ye=e.positionInfo)==null?void 0:ye.minPrice,6)),1)):(s(),f("div",Qt,v(((me=e.positionInfo)==null?void 0:me.maxPrice)&&("sFixD"in e?e.sFixD:I(S))(1/((y=e.positionInfo)==null?void 0:y.maxPrice),6)),1))])):F("",!0),H=="Max Price"?(s(),f("div",xt,[o("div",null,v(H),1),e.direct?(s(),f("div",ei,v(((X=e.positionInfo)==null?void 0:X.maxPrice)&&("sFixD"in e?e.sFixD:I(S))((Se=e.positionInfo)==null?void 0:Se.maxPrice,6)),1)):(s(),f("div",oi,v(((pe=e.positionInfo)==null?void 0:pe.minPrice)&&("sFixD"in e?e.sFixD:I(S))(1/((Re=e.positionInfo)==null?void 0:Re.minPrice),6)),1))])):F("",!0),H=="Current Price"?(s(),f("div",{key:2,class:Oe(["current-price",e.currentPrice<Number(("sFixD"in e?e.sFixD:I(S))((Ce=e.positionInfo)==null?void 0:Ce.minPrice,6))?"current-price-left":e.currentPrice>Number(("sFixD"in e?e.sFixD:I(S))((qe=e.positionInfo)==null?void 0:qe.maxPrice,6))?"current-price-right":""])},[o("div",null,v(H),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(s(),f(to,{key:0},[Ee(v(("addCommom"in e?e.addCommom:I(R))(("decimalUi"in e?e.decimalUi:I(Le))(($e=e.positionInfo)==null?void 0:$e.price,6))),1)],64)):(s(),f(to,{key:1},[Ee(v(("addCommom"in e?e.addCommom:I(R))(("decimalUi"in e?e.decimalUi:I(Le))(1/((Me=e.positionInfo)==null?void 0:Me.price),6))),1)],64))])],2)):F("",!0)]}),_:1},8,["value","class","marks","min","max"])):(s(),z(P,{key:1,value:e.currentPriceResever,class:Oe(["position-slider",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:I(S))(1/((ge=e.positionInfo)==null?void 0:ge.maxPrice),6))||e.currentPriceResever>Number(("sFixD"in e?e.sFixD:I(S))(1/((be=e.positionInfo)==null?void 0:be.minPrice),6))?"hide-handler":""]),step:null,min:Number(("decimalUi"in e?e.decimalUi:I(Le))(1/((de=e.positionInfo)==null?void 0:de.maxPrice),6)),max:Number(("decimalUi"in e?e.decimalUi:I(Le))(1/((ve=e.positionInfo)==null?void 0:ve.minPrice),6)),marks:e.marks,disabled:!0},{mark:_e(({label:H})=>{var ie,ye,me,y,X,Se,pe,Re,Ce,qe,$e,Me;return[H=="Min Price"?(s(),f("div",ni,[o("div",null,v(H),1),e.direct?(s(),f("div",ti,v(((ie=e.positionInfo)==null?void 0:ie.minPrice)&&("sFixD"in e?e.sFixD:I(S))((ye=e.positionInfo)==null?void 0:ye.minPrice,6)),1)):(s(),f("div",ii,v(((me=e.positionInfo)==null?void 0:me.maxPrice)&&("sFixD"in e?e.sFixD:I(S))(1/((y=e.positionInfo)==null?void 0:y.maxPrice),6)),1))])):F("",!0),H=="Max Price"?(s(),f("div",si,[o("div",null,v(H),1),e.direct?(s(),f("div",ai,v(((X=e.positionInfo)==null?void 0:X.maxPrice)&&("sFixD"in e?e.sFixD:I(S))((Se=e.positionInfo)==null?void 0:Se.maxPrice,6)),1)):(s(),f("div",li,v(((pe=e.positionInfo)==null?void 0:pe.minPrice)&&("sFixD"in e?e.sFixD:I(S))(1/((Re=e.positionInfo)==null?void 0:Re.minPrice),6)),1))])):F("",!0),H=="Current Price"?(s(),f("div",{key:2,class:Oe(["current-price current-price-direct",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:I(S))(1/((Ce=e.positionInfo)==null?void 0:Ce.maxPrice),6))?"current-price-left":e.currentPriceResever>Number(("sFixD"in e?e.sFixD:I(S))(1/((qe=e.positionInfo)==null?void 0:qe.minPrice),6))?"current-price-right":""])},[o("div",null,v(H),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(s(),f(to,{key:0},[Ee(v(("addCommom"in e?e.addCommom:I(R))(("decimalUi"in e?e.decimalUi:I(Le))(($e=e.positionInfo)==null?void 0:$e.price,6))),1)],64)):(s(),f(to,{key:1},[Ee(v(("addCommom"in e?e.addCommom:I(R))(("decimalUi"in e?e.decimalUi:I(Le))(1/((Me=e.positionInfo)==null?void 0:Me.price),6))),1)],64))])],2)):F("",!0)]}),_:1},8,["value","class","min","max","marks"]))])])])])}const en=We(Rt,[["render",ui],["__scopeId","data-v-44da997b"]]),ri=Xe({components:{Modal:Vo},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const t=h(()=>{var V,T;const O=Math.ceil(((V=e.positionInfo)==null?void 0:V.poolUSD)/((T=e.positionInfo)==null?void 0:T.quoteUSD)*100);return Number(O)});return{sFixD:S,addCommom:R,ratio:t}}});const qo=e=>(ze("data-v-78a51262"),e=e(),Ge(),e),di=qo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),vi={class:"deposit-slider"},mi={class:"info-block"},pi=qo(()=>o("div",{class:"leabl"},"Current Deposit：",-1)),ci={class:"text"},fi={class:"info-block"},bi=qo(()=>o("div",{class:"leabl"},"Max Capacity：",-1)),yi={class:"text"};function hi(e,t,O,V,T,N){const p=io("Modal");return s(),z(p,{width:"440px",visible:!0,footer:null,title:"Vault Capacity",onCancel:t[0]||(t[0]=P=>e.$emit("onClose"))},{closeIcon:_e(()=>[di]),default:_e(()=>{var P,$,u,i;return[o("div",vi,[o("div",{class:"current-deposit",style:wo({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",mi,[pi,o("div",ci,v(("addCommom"in e?e.addCommom:I(R))(("sFixD"in e?e.sFixD:I(S))((P=e.positionInfo)==null?void 0:P.currentDeposit,2)))+" "+v(($=e.positionInfo)==null?void 0:$.quoteCoinInfo.symbol),1)]),o("div",fi,[bi,o("div",yi,v(("addCommom"in e?e.addCommom:I(R))(("sFixD"in e?e.sFixD:I(S))((u=e.positionInfo)==null?void 0:u.quoteUSD,2)))+" "+v((i=e.positionInfo)==null?void 0:i.quoteCoinInfo.symbol),1)])]}),_:1})}const on=We(ri,[["render",hi],["__scopeId","data-v-78a51262"]]),ki=Xe({components:{AutoPoolV2PoolCapacity:on},setup(){const e=eo(),t=h(()=>e),O=Ze(),V=h(()=>O),T=xe(),N=g();Ie(()=>[V.value.positionInfoObj,T.params.id],([u,i])=>{u&&!Ke(u)&&i&&(N.value=u[i])},{immediate:!0,deep:!0});const p=h(()=>{var u;return(u=N.value)==null?void 0:u.needReverse}),P=u=>{var i;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((i=t.value.tokensObj[u==null?void 0:u.address])==null?void 0:i.logo_url)||uo("/image/coins/sui-unknown.png")},$=g(!1);return{needReverse:p,positionInfo:N,getCoinIcon:P,addCommom:R,isShowModal:$}}});const _i=e=>(ze("data-v-ad8a33e9"),e=e(),Ge(),e),gi={class:"pool-composition"},$i={class:"pool-composition-top"},wi=_i(()=>o("span",null,"Vault Composition",-1)),Ii={class:"pool-composition-bottom"},Ci={class:"token-ratio"},Ai={class:"before-coin"},Pi={alt:""},Si={class:"after-coin"},Ti={alt:""},Ni={class:"token-num"},Ri={class:"num-box"},qi={class:"num-box"};function Bi(e,t,O,V,T,N){var u,i,B,k,n,m,d,b,C,c,M,D,U,G,J,K,_,r,q,ne,te,ue,j,x,ge,be,de,ve,H;const p=yo,P=on,$=No("image");return s(),f("div",gi,[o("div",$i,[wi,Number((u=e.positionInfo)==null?void 0:u.quoteUSD)>0?(s(),f("div",{key:0,class:"pool-capacity",onClick:t[0]||(t[0]=ie=>e.isShowModal=!0)},"Vault Capacity")):F("",!0)]),o("div",Ii,[o("div",Ci,[o("div",Ai,[o("div",null,[W(p,{address:e.needReverse?(n=(k=e.positionInfo)==null?void 0:k.token_b)==null?void 0:n.address:(B=(i=e.positionInfo)==null?void 0:i.token_a)==null?void 0:B.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),Qe(o("img",Pi,null,512),[[$,e.needReverse?e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_b):e.getCoinIcon((m=e.positionInfo)==null?void 0:m.token_a)]])]),o("span",null,v((b=e.positionInfo)==null?void 0:b.poolCoinARatio)+"%",1)]),o("div",Si,[o("span",null,v((C=e.positionInfo)==null?void 0:C.poolCoinBRatio)+"%",1),o("div",null,[Qe(o("img",Ti,null,512),[[$,e.needReverse?e.getCoinIcon((M=e.positionInfo)==null?void 0:M.token_a):e.getCoinIcon((c=e.positionInfo)==null?void 0:c.token_b)]]),W(p,{address:e.needReverse?(J=(G=e.positionInfo)==null?void 0:G.token_a)==null?void 0:J.address:(U=(D=e.positionInfo)==null?void 0:D.token_b)==null?void 0:U.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",Ni,[o("div",{class:"token-a-bg",style:wo({width:`${(K=e.positionInfo)==null?void 0:K.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:wo({width:`${(_=e.positionInfo)==null?void 0:_.poolCoinBRatio}%`})},null,4),o("div",Ri,[o("div",null,v(("addCommom"in e?e.addCommom:I(R))((r=e.positionInfo)==null?void 0:r.poolCoinANum))+" "+v(e.needReverse?(ue=(te=e.positionInfo)==null?void 0:te.token_b)==null?void 0:ue.symbol:(ne=(q=e.positionInfo)==null?void 0:q.token_a)==null?void 0:ne.symbol),1),o("div",null,"$"+v(("addCommom"in e?e.addCommom:I(R))((j=e.positionInfo)==null?void 0:j.poolCoinAUSD)),1)]),o("div",qi,[o("div",null,v(("addCommom"in e?e.addCommom:I(R))((x=e.positionInfo)==null?void 0:x.poolCoinBNum))+" "+v(e.needReverse?(ve=(de=e.positionInfo)==null?void 0:de.token_a)==null?void 0:ve.symbol:(be=(ge=e.positionInfo)==null?void 0:ge.token_b)==null?void 0:be.symbol),1),o("div",null,"$"+v(("addCommom"in e?e.addCommom:I(R))((H=e.positionInfo)==null?void 0:H.poolCoinBUSD)),1)])])]),e.isShowModal?(s(),z(P,{key:0,"position-info":e.positionInfo,onOnClose:t[1]||(t[1]=ie=>e.isShowModal=!1)},null,8,["position-info"])):F("",!0)])}const nn=We(ki,[["render",Bi],["__scopeId","data-v-ad8a33e9"]]),Di=Xe({setup(){const e=eo(),t=h(()=>e),O=Ze(),V=h(()=>O),T=xe(),N=g();Ie(()=>[V.value.positionInfoObj,T.params.id],([i,B])=>{i&&!Ke(i)&&B&&(N.value=i[B])},{immediate:!0,deep:!0});const p=h(()=>{var i;return(i=N.value)==null?void 0:i.needReverse}),P=i=>{var B;return(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((B=t.value.tokensObj[i==null?void 0:i.address])==null?void 0:B.logo_url)||uo("/image/coins/sui-unknown.png")},$=Ro(),u=h(()=>$);return{needReverse:p,positionInfo:N,getCoinIcon:P,addCommom:R,wallet:u}}});const mo=e=>(ze("data-v-61c3efe6"),e=e(),Ge(),e),Li={class:"my-liquidity"},Mi={class:"my-liquidity-top"},Ui=mo(()=>o("div",null,"My Liquidity",-1)),Fi=mo(()=>o("p",null,"My share of pool",-1)),Oi={class:"my-liquidity-bottom"},Vi={class:"lp-token"},Ei=mo(()=>o("div",null,[o("span",null,"LP Token Balance ")],-1)),Wi={class:"lp-balance"},ji={class:"token-num-content"},Xi={class:"token-num token-a-num"},zi={class:"logo"},Gi=["src"],Hi={class:"text"},Yi={class:"lp-logo"},Ki=["src"],Zi=mo(()=>o("div",null,"Pooled Assets",-1)),Ji={class:"token-num"},Qi={class:"logo"},xi=["src"],es={class:"text"},os=mo(()=>o("div",{class:"token-num-content-bg"},null,-1));function ns(e,t,O,V,T,N){var P,$,u,i,B,k,n,m,d,b,C,c,M,D,U,G,J,K,_,r,q,ne,te,ue,j,x,ge,be,de;const p=yo;return s(),f("div",Li,[o("div",Mi,[Ui,o("div",null,[Fi,o("p",null,v(e.wallet.connected?(P=e.positionInfo)==null?void 0:P.myShare:"--")+"%",1)])]),o("div",Oi,[o("div",Vi,[Ei,o("div",null,[o("span",Wi,v(e.wallet.connected?("addCommom"in e?e.addCommom:I(R))(($=e.positionInfo)==null?void 0:$.myLiquidity):"--")+" LP",1),o("span",null,v(e.wallet.connected?((u=e.positionInfo)==null?void 0:u.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in e?e.addCommom:I(R))((i=e.positionInfo)==null?void 0:i.myLiquidityUSD)}`:"<$0.01":"--"),1)])]),o("div",ji,[o("div",Xi,[o("div",zi,[o("img",{src:e.needReverse?e.getCoinIcon((k=e.positionInfo)==null?void 0:k.token_b):e.getCoinIcon((B=e.positionInfo)==null?void 0:B.token_a),alt:""},null,8,Gi),W(p,{address:e.needReverse?(b=(d=e.positionInfo)==null?void 0:d.token_b)==null?void 0:b.address:(m=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:m.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",Hi,[o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:I(R))((C=e.positionInfo)==null?void 0:C.amountA):"--")+" "+v(e.needReverse?(U=(D=e.positionInfo)==null?void 0:D.token_b)==null?void 0:U.symbol:(M=(c=e.positionInfo)==null?void 0:c.token_a)==null?void 0:M.symbol),1),o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:I(R))((G=e.positionInfo)==null?void 0:G.myAmountAUSD):"--"),1)])]),o("div",Yi,[o("img",{src:e.getCoinIcon((J=e.positionInfo)==null?void 0:J.lpInfo),alt:""},null,8,Ki),Zi]),o("div",Ji,[o("div",Qi,[o("img",{src:e.needReverse?e.getCoinIcon((_=e.positionInfo)==null?void 0:_.token_a):e.getCoinIcon((K=e.positionInfo)==null?void 0:K.token_b),alt:""},null,8,xi),W(p,{address:e.needReverse?(te=(ne=e.positionInfo)==null?void 0:ne.token_a)==null?void 0:te.address:(q=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:q.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",es,[o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:I(R))((ue=e.positionInfo)==null?void 0:ue.amountB):"--")+" "+v(e.needReverse?(be=(ge=e.positionInfo)==null?void 0:ge.token_a)==null?void 0:be.symbol:(x=(j=e.positionInfo)==null?void 0:j.token_b)==null?void 0:x.symbol),1),o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:I(R))((de=e.positionInfo)==null?void 0:de.myAmountBUSD):"--"),1)])]),os])])])}const tn=We(Di,[["render",ns],["__scopeId","data-v-61c3efe6"]]),ts=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const is={},sn=e=>(ze("data-v-fcbc716b"),e=e(),Ge(),e),ss={class:"status"},as=sn(()=>o("img",{src:ts,alt:""},null,-1)),ls=sn(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),us=[as,ls];function rs(e,t){return s(),f("div",ss,us)}const an=We(is,[["render",rs],["__scopeId","data-v-fcbc716b"]]),ds=Xe({components:{AutoPoolAddModal:Zo,AutoPoolV2PoolStatus:an},setup(){const e=Ro(),t=g(!1),O=ho(),V=h(()=>O),T=h(()=>V.value.chainName),N=h(()=>e),p=Ze(),P=h(()=>p),$=eo(),u=h(()=>$),i=g(),B=xe(),k=g(!1),n=g(!1);Ie(()=>[P.value.positionInfoObj,B.params.id],([A,E])=>{A&&!Ke(A)&&E&&(i.value=A[E])},{immediate:!0,deep:!0});const m=h(()=>{var A;return(A=i.value)==null?void 0:A.needReverse}),d=g(),b=g(),C=g(),c=g(),M=g(!0),D=h(()=>N.value.assets&&d.value&&N.value.assets[d.value.address]?Oo(N.value.assets[d.value.address].balance,d.value.decimals):0),U=h(()=>N.value.assets&&b.value&&N.value.assets[b.value.address]?Oo(N.value.assets[b.value.address].balance,b.value.decimals):0),G=A=>{A==="fromCoin"?(M.value=!0,C.value=D.value>0?d.value.symbol=="SUI"?new l(Number(D.value)).sub(new l(.05)).lt(new l(0))?"0":new l(Number(D.value)).sub(new l(.05)).toString():String(D.value):""):(M.value=!1,c.value=U.value>0?b.value.symbol=="SUI"?new l(Number(U.value)).sub(new l(.05)).lt(new l(0))?"0":new l(Number(U.value)).sub(new l(.05)).toString():String(U.value):"")},J=A=>{A==="fromCoin"?(M.value=!0,C.value=D.value>0?S(new l(Number(D.value)).div(2).toString(),d.value.decimals).toString():""):(M.value=!1,c.value=U.value>0?S(new l(Number(U.value)).div(2).toString(),b.value.decimals).toString():"")},K=h(()=>T.value?Go(T.value):{}),_=h(()=>P.value.slippage),r=g("--"),q=g("--"),ne=A=>{const E=new l(i.value.autoPoolPositionInfo.liquidity),ce=new l(A.toString());if(E.toNumber()>0&&ce.toNumber()>0){const w=ce.add(E),we=ce.div(w).mul(100).toNumber(),he=hn(we),ke=he==-1?2:he+2,Ne=S(ce.div(w).mul(100).toNumber(),ke),Be=new l(1).div(new l(Math.pow(10,i.value.lpInfo.decimals))).toString();Number(Ne)<Number(Be)?r.value=`<${Be}`:r.value=Ne}else ce.toNumber()>0&&E.toNumber()<=0?r.value="100":r.value="--"},te=A=>{new l(A.toString());const E=new l(_.value).div(100),ce=Co.get_lp_amount_by_liquidity({liquidity:i.value.liquidity,total_supply:i.value.total_supply},A.toString()),w=new l(Math.pow(10,i.value.lpInfo.decimals)),we=new l(ce).div(w).toString(),he=new l(we).mul(E),ke=new l(we).sub(he);q.value=S(ke.toString(),i.value.decimals)},ue=g(!1),j=g(!1),x=g(""),ge=g(),be=g(!1),de=async()=>{if(!i.value)return;n.value=!1,be.value=!0;const A=i.value.autoPoolPositionInfo.tick_lower_index,E=i.value.autoPoolPositionInfo.tick_upper_index,ce=je.sqrtPriceX64ToTickIndex(new le(i.value.current_sqrt_price));je.tickIndexToSqrtPriceX64(A),je.tickIndexToSqrtPriceX64(E),ce<A&&(m.value?ue.value=!0:j.value=!0),ce>E&&(m.value?j.value=!0:ue.value=!0);let w;if(C.value||c.value){M.value?w=new l(C.value).mul(Math.pow(10,d.value.decimals)).toString():w=new l(c.value).mul(Math.pow(10,b.value.decimals)).toString();let we,he=M.value;if(re.value||Ae.value){const L=new l(1);if(new l(w).lte(L))return n.value=!0,!1;const Z=await Je.calculateDepositSwapAmount({lowerTick:A,upperTick:E,curSqrtPrice:new le(i.value.current_sqrt_price),fix_amount_a:he,input_amount:w,coinTypeA:i.value.autoPoolPositionInfo.coin_type_a,coinTypeB:i.value.autoPoolPositionInfo.coin_type_b,clmm_pool:i.value.address,slippage:Number(_.value)/100,decimals:re.value?d.value.decimals:b.value.decimals,request_id:w});if(Z){if(Z.request_id!==w)return;k.value=Z.is_exceed,we=new le(Z.afterSqrtPrice),w=Z.fixAmountA===he?new le(new l(w).sub(Z.swapInAmount).toString()):new le(Z.swapOutAmount),ge.value={swap_amount:Z.swapInAmount,route_obj:Z.route_obj,a2b:he,input_amount:w},he=Z.fixAmountA;const ee=i.value.token_a.decimals,Q=i.value.token_b.decimals,ae=new l(Z.swapInAmount).div(new l(Math.pow(10,ee))).toString(),fe=S(new l(Z.swapOutAmountLimit).div(new l(Math.pow(10,Q))).toString(),Q),se=m.value?i.value.token_b.symbol:i.value.token_a.symbol,Y=m.value?i.value.token_a.symbol:i.value.token_b.symbol;x.value=`To deposit ${R(re.value?C.value:c.value)} ${re.value?se:Y},
          ${R(ae)} ${re.value?se:Y}  will be traded for ${R(fe)} ${re.value?Y:se} added to the pool.`}else we=i.value.current_sqrt_price,w=new le(w)}else k.value=!1,we=i.value.current_sqrt_price,w=new le(w),x.value="";let ke,Ne,Be;const a=K.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:d.value,tokenB:b.value,lowerTick:A,upperTick:E,coinAmount:w,iscoinA:he,roundUp:!0,slippage:Number(_.value)/100,curSqrtPrice:new le(we)});ke=a.liquidityAmount,Ne=a.tokenMaxA,Be=a.tokenMaxB,!re.value&&!Ae.value&&(M.value?c.value=Number(Be)>0?Be:"":C.value=Number(Ne)>0?Ne:""),ne(ke),te(ke),be.value=!1}};Ie(()=>i.value,A=>{A&&!Ke(A)&&(d.value=A==null?void 0:A.token_a,b.value=A==null?void 0:A.token_b,ue.value=!1,j.value=!1,de())},{immediate:!0});const ve=h(()=>u.value.RATES),H=h(()=>{var A,E,ce,w,we,he,ke,Ne;if((E=ve.value[(A=d.value)==null?void 0:A.address])!=null&&E.price&&((w=ve.value[(ce=b.value)==null?void 0:ce.address])!=null&&w.price)){const Be=new l(C.value||0).mul(new l((he=ve.value[(we=d.value)==null?void 0:we.address])==null?void 0:he.price)),a=new l(c.value||0).mul(new l((Ne=ve.value[(ke=b.value)==null?void 0:ke.address])==null?void 0:Ne.price));return Be.add(a).toNumber()}else return"--"});Ie(()=>C.value,vo((A,E)=>{A?de():(r.value="--",c.value="",q.value="--")},500),{immediate:!0}),Ie(()=>c.value,vo((A,E)=>{A?de():(C.value="",r.value="--",q.value="--")},500),{immediate:!0});const{t:ie,locale:ye}=Ao(),me=h(()=>{var A,E;if(re.value||Ae.value){const ce=re.value?C.value:c.value,w=re.value?d.value:b.value;if((A=ve.value[w==null?void 0:w.address])!=null&&A.price)return new l(ce||0).mul(new l((E=ve.value[w==null?void 0:w.address])==null?void 0:E.price)).toNumber()}return 0}),y=h(()=>{const A=Number(C.value)>Number(D.value),E=Number(c.value)>Number(U.value);return!C.value&&!c.value?ie("button.enterAmount"):A?ie("button.insufficientBalance",{name:d.value.symbol}):E?ie("button.insufficientBalance",{name:b.value.symbol}):k.value?ie("button.insufficientLiquidity"):Number(i.value.remainingTokenUSD)!==0&&Number(i.value.quoteUSD)>0&&Number(H.value)>Number(i.value.remainingTokenUSD)?"Exceeded the max capacity":n.value?ie("button.enterAmount"):"Add Liquidity"}),X=h(()=>{const A=Number(C.value)>Number(D.value),E=Number(c.value)>Number(U.value);return!!(!C.value&&!c.value||A||E||C.value<=0&&c.value<=0||k.value||co.value!=="STATUS_RUNNING"||Number(i.value.remainingTokenUSD)!==0&&Number(i.value.quoteUSD)>0&&Number(H.value)>Number(i.value.remainingTokenUSD)||n.value||me.value>1e4)}),Se=g(!0),{setIsShowSuccess:pe,setIsShowRejected:Re,setIsShowWaiting:Ce,setTransactionDesc:qe,setTransactionTxid:$e,setPositiomNum:Me}=O,Je=zo("Sui"),ro=async()=>{var Be,a;t.value=!1,Se.value=!0,$e("");const A=`${R(C.value)} ${(Be=d.value)==null?void 0:Be.symbol}`,E=`${R(c.value)} ${(a=b.value)==null?void 0:a.symbol}`;qe(`Deposit ${C.value>0?A:""} ${c.value>0&&C.value>0?"and":""} ${c.value>0?E:""}`),Ce(!0);const ce=M.value,w=i.value.autoPoolPositionInfo.tick_lower_index,we=i.value.autoPoolPositionInfo.tick_upper_index,he=je.sqrtPriceX64ToTickIndex(new le(i.value.current_sqrt_price));let ke;M.value?ke=new l(C.value).mul(Math.pow(10,d.value.decimals)).toString():ke=new l(c.value).mul(Math.pow(10,b.value.decimals)).toString();const Ne=i.value.rewarderInfo.map(L=>L.coinAddress);try{const L={lowerTick:w,upperTick:we,coinAmount:ke,fix_amount_a:ce,slippage:Number(_.value)/100,curSqrtPrice:new le(i.value.current_sqrt_price),id:i.value.id,clmm_pool:i.value.autoPoolPositionInfo.pool,lp_token_type:i.value.lp_token_type,coinTypeA:i.value.autoPoolPositionInfo.coin_type_a,coinTypeB:i.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:Ne,swapParams:ge.value,isOnlyA:re.value,isOnlyB:Ae.value,currentTickIndex:he,decimal_b:i.value.coinB.decimals},Z=await Je.deposit(L),ee=await N.value.currentWallet.signAndExecuteTransactionBlock(Z);let Q=K.value.handleTx(ee);if(Q&&Q.hash){$e(Q.hash),Ce(!1),pe(!0);const ae={title:"Supplied",desc:`Deposit ${C.value>0?A:""} ${c.value>0&&C.value>0?"and":""} ${c.value>0?E:""}`,hash:Q.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${C.value>0?A:""} ${c.value>0&&C.value>0?"and":""} ${c.value>0?E:""}`};T.value!=="Aptos"&&(ae.res=Q.res),K.value.showTransitionPending(ae),await K.value.watchTransaction(ae)&&setTimeout(()=>{p.updatePositionItem(i.value.id),K.value.getAccount(N.value.address)},1e3),Me()}else Ce(!1),Re(!0);C.value="",c.value="",Se.value=!1}catch{C.value="",c.value="",Se.value=!1,Ce(!1),Re(!0)}},re=g(!1),Ae=g(!1),Te=A=>{C.value="",c.value="",x.value="",A=="only-a"?(re.value=!re.value,Ae.value=!1):(Ae.value=!Ae.value,re.value=!1)},co=h(()=>P.value.currentAutoPoolStatus),fo=g(),_o=()=>{fo.value=window.setInterval(()=>{(C.value||c.value)&&de()},2e4)};bo(()=>{_o()}),So(()=>{window.clearInterval(fo.value)});const go=pn(cn,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0});return{currentAutoPoolStatus:co,wallet:N,positionInfo:i,isShowAddModal:t,needReverse:m,fromCoin:d,toCoin:b,fromCoinAmount:C,toCoinAmount:c,fromCoinBlance:D,toCoinBlance:U,fixedFromCoin:M,maxBtnSelect:G,halfBtnSelect:J,totalAmountUSD:H,addCommom:R,shareOfPool:r,minimumReceivedLP:q,addLiquidityBtnText:y,addLiquidityBtnDisabled:X,toAdd:ro,showToCoinLock:j,showFromCoinLock:ue,isOnlyA:re,isOnlyB:Ae,onlyToken:Te,onlyText:x,onlyTokenUSD:me,calculateLoading:be,indicator:go}}});const oo=e=>(ze("data-v-0861cfdc"),e=e(),Ge(),e),vs={class:"auto-pool-add"},ms={class:"auto-pool-add-content"},ps={class:"liquidity-action-tab"},cs=oo(()=>o("div",{class:"increase tab-active"},"Add",-1)),fs={class:"only-token"},bs=oo(()=>o("div",null,"Deposit Amounts",-1)),ys={key:0},hs=oo(()=>o("div",{class:"hover-text"},"You can also choose to deposit in only one asset type. In that case, the vault will convert your asset to the required propositions using Cetus. Please note that trading fees & slippage will be applied. When slippage is involved, a certain amount of post-swap dust (no loss of funds) will be returned to you.",-1)),ks={key:0},_s=oo(()=>o("div",{class:"hover-text"},"You can also choose to deposit in only one asset type. In that case, the vault will convert your asset to the required propositions using Cetus. Please note that trading fees & slippage will be applied. When slippage is involved, a certain amount of post-swap dust (no loss of funds) will be returned to you.",-1)),gs={key:0,class:"card-item"},$s={key:1,class:"card-item"},ws=oo(()=>o("span",null,"Pool Closed",-1)),Is={key:0,class:"add-info"},Cs={key:0,class:"only-text"},As={class:"total-amount"},Ps=oo(()=>o("span",null,"Total Amount",-1)),Ss={key:0},Ts={class:"total-amount"},Ns=oo(()=>o("span",null,"Share of Pool",-1)),Rs={key:0},qs={class:"total-amount"},Bs=oo(()=>o("span",null,"Minimum Received LP",-1)),Ds={key:0};function Ls(e,t,O,V,T,N){var k,n,m,d,b,C,c,M,D,U,G,J,K,_,r;const p=Yo,P=Ko,$=io("AutoPoolV2PoolStatus"),u=Po,i=Xo,B=Zo;return s(),f("div",vs,[o("div",ms,[o("div",ps,[cs,o("div",{class:"remove",onClick:t[0]||(t[0]=jo(q=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",fs,[bs,o("div",null,[o("div",{class:"only-a",onClick:t[1]||(t[1]=q=>e.onlyToken("only-a"))},[o("p",null,[e.isOnlyA?(s(),f("span",ys)):F("",!0)]),o("span",null,v(e.needReverse?(d=(m=e.positionInfo)==null?void 0:m.token_b)==null?void 0:d.symbol:(n=(k=e.positionInfo)==null?void 0:k.token_a)==null?void 0:n.symbol)+" only",1),hs]),o("div",{class:"only-b",onClick:t[2]||(t[2]=q=>e.onlyToken("only-b"))},[o("p",null,[e.isOnlyB?(s(),f("span",ks)):F("",!0)]),o("span",null,v(e.needReverse?(M=(c=e.positionInfo)==null?void 0:c.token_a)==null?void 0:M.symbol:(C=(b=e.positionInfo)==null?void 0:b.token_b)==null?void 0:C.symbol)+" only",1),_s])])]),o("div",{class:Oe(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(s(),f("div",gs,[W(p,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[3]||(t[3]=q=>e.fromCoinAmount=q),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[4]||(t[4]=q=>e.maxBtnSelect("fromCoin")),onOnHalf:t[5]||(t[5]=q=>e.halfBtnSelect("fromCoin")),onOnInput:t[6]||(t[6]=q=>{e.fromCoinAmount=q}),onOnFocus:t[7]||(t[7]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(s(),z(P,{key:0})):F("",!0)])):F("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(s(),f("div",$s,[W(p,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[8]||(t[8]=q=>e.toCoinAmount=q),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[9]||(t[9]=q=>e.maxBtnSelect("toCoin")),onOnHalf:t[10]||(t[10]=q=>e.halfBtnSelect("toCoin")),onOnInput:t[11]||(t[11]=q=>{e.toCoinAmount=q}),onOnFocus:t[12]||(t[12]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(s(),z(P,{key:0})):F("",!0)])):F("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(s(),z($,{key:0})):F("",!0),(D=e.positionInfo)!=null&&D.is_pause?(s(),z(u,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:_e(()=>[ws]),_:1})):e.wallet.connected?(s(),z(u,{key:2,class:"big-btn liquidity-btn",disabled:e.addLiquidityBtnDisabled,onClick:t[13]||(t[13]=q=>e.isShowAddModal=!0)},{default:_e(()=>[o("span",null,v(e.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(s(),z(u,{key:3,class:"big-btn liquidity-btn",onClick:t[14]||(t[14]=q=>e.wallet.setIsShowWalletModal(!0))},{default:_e(()=>[o("span",null,v(e.$t("button.connectWallet")),1)]),_:1})),(((U=e.positionInfo)==null?void 0:U.quoteUSD)==0||Number((G=e.positionInfo)==null?void 0:G.remainingTokenUSD)>Number(e.totalAmountUSD))&&(Number(e.fromCoinAmount)>0||Number(e.toCoinAmount)>0)&&!e.addLiquidityBtnDisabled?(s(),f(to,{key:4},[e.onlyTokenUSD<=1e4?(s(),f("div",Is,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount>0||e.isOnlyB&&e.toCoinAmount>0)?(s(),f("div",Cs,v(e.onlyText),1)):F("",!0),o("div",As,[Ps,e.calculateLoading?(s(),z(i,{key:1,paragraph:!1,active:""})):(s(),f("span",Ss,v(Number(e.totalAmountUSD)>0&&Number(e.totalAmountUSD)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:I(R))(e.totalAmountUSD,2)}`),1))]),o("div",Ts,[Ns,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(s(),f("span",Rs,v(e.shareOfPool)+"%",1)):(s(),z(i,{key:1,paragraph:!1,active:""}))]),o("div",qs,[Bs,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(s(),f("span",Ds,v(("addCommom"in e?e.addCommom:I(R))(e.minimumReceivedLP))+" "+v(e.needReverse?(J=e.toCoin)==null?void 0:J.symbol:(K=e.fromCoin)==null?void 0:K.symbol)+"-"+v(e.needReverse?(_=e.fromCoin)==null?void 0:_.symbol:(r=e.toCoin)==null?void 0:r.symbol),1)):(s(),z(i,{key:1,paragraph:!1,active:""}))])])):F("",!0)],64)):F("",!0),e.isShowAddModal?(s(),z(B,{key:5,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:t[15]||(t[15]=q=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):F("",!0)])}const Ms=We(ds,[["render",Ls],["__scopeId","data-v-0861cfdc"]]),Us=Xe({components:{AutoPoolRemoveModal:Jo,AutoPoolV2PoolStatus:an},setup(){const e=Ro(),t=h(()=>e),O=ho(),V=h(()=>O),T=h(()=>k.value.slippage),N=h(()=>V.value.chainName),p=kn(),P=h(()=>p),$=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],u=g(25),i=xe(),B=Ze(),k=h(()=>B),n=h(()=>k.value.positionInfoObj[i.params.id]),m=h(()=>{var a;return(a=n.value)==null?void 0:a.needReverse}),d=g(),b=g(),C=g(!1),c=g(),M=h(()=>{var a;return(a=n.value)==null?void 0:a.myLiquidity}),D=g(!0),U=h(()=>N.value?Go(N.value):{}),G=g(),J=g(),K=zo("Sui"),_=g(""),r=g(""),q=g("--"),ne=g(!1),te=g(!1),ue=g(),j=g(!0),x=g(),ge=eo(),be=h(()=>ge),de=h(()=>be.value.RATES),ve=g(!1),H=async()=>{if(D.value||!n.value)return;J.value=!1,ve.value=!0;const a=n.value.autoPoolPositionInfo.tick_lower_index,L=n.value.autoPoolPositionInfo.tick_upper_index,Z=je.sqrtPriceX64ToTickIndex(new le(n.value.current_sqrt_price));Z<a&&(m.value?ne.value=!0:te.value=!0),Z>L&&(m.value?te.value=!0:ne.value=!0);let ee;if(_.value||r.value){j.value?ee=new l(_.value).mul(Math.pow(10,d.value.decimals)).toString():ee=new l(r.value).mul(Math.pow(10,b.value.decimals)).toString();let Q,ae=j.value;if(y.value||X.value){y.value?Number(_.value)/Number(w.value):Number(r.value)/Number(w.value);const oe=await K.calculateRemoveSwapAmount({lowerTick:a,upperTick:L,curSqrtPrice:new le(n.value.current_sqrt_price),fix_amount_a:ae,receiveAmount:ee,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(T.value)/100,decimals:y.value?d.value.decimals:b.value.decimals,liquidity:_.value==w.value||r.value==w.value?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:ee});if(oe){if(oe.request_id!==ee)return;G.value=oe.is_exceed,ee=new le(oe.swapOutAmount),Q=n.value.current_sqrt_price,ue.value={swap_amount:oe.swapInAmount,liquidity:oe.liquidity,a2b:!ae,route_obj:oe.route_obj},ae=!ae;const Ye=n.value.token_a.decimals,Ve=n.value.token_b.decimals,Ue=new l(oe.swapInAmount).div(new l(Math.pow(10,Ye))).toString(),so=S(new l(oe.swapOutAmountLimit).div(new l(Math.pow(10,Ve))).toString(),Ve),Pe=m.value?n.value.token_b.symbol:n.value.token_a.symbol,De=m.value?n.value.token_a.symbol:n.value.token_b.symbol;x.value=_.value==w.value||r.value==w.value?`To withdraw ${R(y.value?_.value:r.value)} ${y.value?Pe:De},
          ${R(y.value?n.value.amountB:n.value.amountA)} ${y.value?De:Pe} 
           in the pool will be traded for ${Ue} ${y.value?Pe:De}`:`To withdraw ${R(y.value?_.value:r.value)} ${y.value?Pe:De},
          ${R(Ue)} ${y.value?De:Pe}  in the pool will be traded for ${R(so)} ${y.value?Pe:De}`}else{J.value=!0,x.value="";return}}else G.value=!1,Q=n.value.current_sqrt_price,ee=new le(ee);const{liquidityAmount:fe,tokenMaxA:se,tokenMaxB:Y}=U.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:d.value,tokenB:b.value,lowerTick:a,upperTick:L,coinAmount:ee,iscoinA:ae,roundUp:!1,slippage:Number(T.value)/100,curSqrtPrice:new le(Q)});if(!y.value&&!X.value&&(j.value?r.value=Number(Y)>0?Y:"":_.value=Number(se)>0?se:""),(y.value||X.value)&&(Number(_.value)>=Number(w.value)||Number(r.value)>=Number(w.value))){c.value=n.value.myLiquidity;const oe=new l(100);q.value=new l(n.value.myLiquidity).mul(new l(Math.pow(10,n.value.lpInfo.decimals))).toString(),ie.value=fe.toString(),u.value=oe.toNumber()}else{const oe=Co.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},fe.toString()),Ye=new l(oe).div(new l(Math.pow(10,n.value.lpInfo.decimals))).toString(),Ve=new l(Ye).div(new l(M.value)).mul(100);c.value=new l(M.value).mul(Ve.div(100)).toString(),q.value=oe,ie.value=fe.toString(),u.value=Ve.toNumber()}ve.value=!1}},ie=g(),ye=h(()=>{var a;return(a=n==null?void 0:n.value)==null?void 0:a.amountA}),me=h(()=>{var a;return(a=n==null?void 0:n.value)==null?void 0:a.amountB}),y=g(!1),X=g(!1),Se=h(()=>{var ae,fe,se,Y;const a=(fe=de.value[(ae=d==null?void 0:d.value)==null?void 0:ae.address])==null?void 0:fe.price,L=(Y=de.value[(se=b==null?void 0:b.value)==null?void 0:se.address])==null?void 0:Y.price;let Z=_.value!=="--"&&_.value!==""?_.value:0,ee=r.value!=="--"&&r.value!==""?r.value:0,Q;return a&&L&&(y.value||X.value?Q=new l(y.value?Z:ee).mul(new l(y.value?a:L)).toString():Q=new l(Z).mul(new l(a)).add(new l(ee).mul(new l(L))).toString()),Q>0&&Q<.01?"<$0.01":`$${R(S(Q,2))}`}),pe=async a=>{var Ye,Ve,Ue,so,Pe,De,$o,Bo,Do,Lo,Mo;if(!D.value)return;D.value=!0,J.value=!1,(Ve=(Ye=n.value)==null?void 0:Ye.token_a)==null||Ve.decimals,(so=(Ue=n.value)==null?void 0:Ue.token_b)==null||so.decimals;const L=(Pe=n.value)==null?void 0:Pe.tick_lower_index,Z=(De=n.value)==null?void 0:De.tick_upper_index;je.tickIndexToSqrtPriceX64(L),je.tickIndexToSqrtPriceX64(Z);const ee=(Bo=($o=n.value)==null?void 0:$o.autoPoolPositionInfo)==null?void 0:Bo.tick_lower_index,Q=(Lo=(Do=n.value)==null?void 0:Do.autoPoolPositionInfo)==null?void 0:Lo.tick_upper_index,ae=je.sqrtPriceX64ToTickIndex(new le((Mo=n==null?void 0:n.value)==null?void 0:Mo.current_sqrt_price));ae<ee&&(m.value?ne.value=!0:te.value=!0),ae>Q&&(m.value?te.value=!0:ne.value=!0);let fe="",se,Y,oe=j.value;if(y.value||X.value&&!ne.value&&!te.value){if(y.value){const no=new l(w.value).mul(Math.pow(10,d.value.decimals)).mul(a.value).toString();Y=S(no,0),_.value=S(new l(w.value).mul(a.value).toString(),d.value.decimals)}if(X.value){const no=new l(w.value).mul(a.value).mul(Math.pow(10,b.value.decimals)).toString();Y=S(no,0),r.value=S(new l(w.value).mul(a.value).toString(),b.value.decimals)}const Fe=await K.calculateRemoveSwapAmount({lowerTick:L,upperTick:Z,curSqrtPrice:new le(n.value.current_sqrt_price),fix_amount_a:oe,receiveAmount:Y,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(T.value)/100,decimals:y.value?d.value.decimals:b.value.decimals,liquidity:a.value==1?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:Y});if(Fe){if(Fe.request_id!==Y)return;G.value=Fe.is_exceed,Y=new le(Fe.swapOutAmount),n.value.current_sqrt_price,ue.value={swap_amount:Fe.swapInAmount,liquidity:Fe.liquidity,route_obj:Fe.route_obj,a2b:!oe},oe=!oe;const no=n.value.token_a.decimals,Uo=n.value.token_b.decimals,ln=new l(Fe.swapInAmount).div(new l(Math.pow(10,no))).toString(),Fo=S(new l(Fe.swapOutAmountLimit).div(new l(Math.pow(10,Uo))).toString(),Uo),ao=m.value?n.value.token_b.symbol:n.value.token_a.symbol,lo=m.value?n.value.token_a.symbol:n.value.token_b.symbol;x.value=a.value==1?`To withdraw ${R(y.value?_.value:r.value)} ${y.value?ao:lo},
          ${R(y.value?n.value.amountB:n.value.amountA)} ${y.value?lo:ao}  in the pool will be traded for ${R(Fo)} ${y.value?ao:lo}`:`To withdraw ${R(y.value?_.value:r.value)} ${y.value?ao:lo},
          ${R(ln)} ${y.value?lo:ao}  in the pool will be traded for ${R(Fo)} ${y.value?ao:lo}`,fe=Fe.liquidity}else n.value.current_sqrt_price,Y=new le(Y),x.value="",J.value=!0;q.value=new l(n.value.myLiquidity).mul(new l(a.value)).toString(),c.value=new l(q.value),ie.value=fe}else{G.value=!1;const Fe=new l(ye.value).mul(Math.pow(10,d.value.decimals)).mul(a.value).toString();Y=S(Fe,0),_.value=S(new l(ye.value).mul(a.value).toString(),d.value.decimals);const no=new l(me.value).mul(a.value).mul(Math.pow(10,b.value.decimals)).toString();Y=S(no,0),r.value=S(new l(me.value).mul(a.value).toString(),b.value.decimals),n.value.current_sqrt_price,Y=new le(Y),a.value!==1?se=new l(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(a.value).toString():se=new l(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),c.value=new l(se).div(Math.pow(10,n.value.lpInfo.decimals)),fe=Co.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},se),q.value=S(se,0),ie.value=S(fe,0)}};Ie(u,vo((a,L)=>{a!==L&&(Number(a)>100?u.value=100:a&&n.value?(u.value=a,pe({value:u.value/100})):(_.value="",r.value=""))},300)),Ie(()=>_.value,vo((a,L)=>{a?H():!y.value&&!X.value&&(r.value="",u.value=0)},500),{immediate:!0}),Ie(()=>r.value,vo((a,L)=>{a?H():!y.value&&!X.value&&(_.value="",u.value=0)},500),{immediate:!0});const Re=To(),{setIsShowSuccess:Ce,setIsShowRejected:qe,setIsShowWaiting:$e,setTransactionDesc:Me,setTransactionTxid:Je,setPositiomNum:ro,setTransactionDescText:re}=O,Ae=g(!1),{t:Te}=Ao(),co=async()=>{var Ye,Ve;Ae.value=!0,Je("");const a=Number(_.value)>0?`${R(_.value,d.value.decimals)} ${d.value.symbol}`:"",L=Number(r.value)>0?`${R(r.value,b.value.decimals)} ${b.value.symbol}`:"";Me(Te("tips.removeLiquidiyText",{from:m.value?L:a,and:Number(_.value)>0&&Number(r.value)>0?"and":"",to:m.value?a:L})),$e(!0);const Z=Te("modal.removeLiquidityText2");re(Z);const ee=n.value.autoPoolPositionInfo.tick_lower_index,Q=n.value.autoPoolPositionInfo.tick_upper_index,ae=je.tickIndexToSqrtPriceX64(ee),fe=je.tickIndexToSqrtPriceX64(Q),se=n.value.rewarderInfo.map(Ue=>Ue.coinAddress);let Y;j.value?Y=new l(_.value).mul(Math.pow(10,d.value.decimals)).toString():Y=new l(r.value).mul(Math.pow(10,b.value.decimals)).toString();const oe={lowerSqrtPrice:ae,upperSqrtPrice:fe,lpTokenAmount:q.value,liquidity:ie.value,curSqrtPrice:new le(n.value.object.current_sqrt_price),slippage:Number(T.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.pool,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:se,swapParams:ue.value,fix_amount_a:j.value,isOnlyA:!ne.value&&!te.value?y.value:!1,isOnlyB:!te.value&&!ne.value?X.value:!1,lowerTick:ee,upperTick:Q,receiveAmount:Y,sliderVal:u.value,positionInfo:n.value,maxLiquidity:n.value.positionLiquidity};try{const Ue=await K.remove(oe),so=await t.value.currentWallet.signAndExecuteTransactionBlock(Ue);let Pe=U.value.handleTx(so);if(Pe&&Pe.hash){Je(Pe.hash),$e(!1),Ce(!0);const De={title:Te("common.removeLiquidity"),desc:"",hash:Pe.hash,descTransactions:`Remove ${a} ${Number(_.value)>0&&Number(r.value)>0?"and":""} ${L} from the pool`,sender:t.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${_.value} ${(Ye=d.value)==null?void 0:Ye.symbol} and ${r.value} ${(Ve=b.value)==null?void 0:Ve.symbol}`};De.res=Pe.res,U.value.showTransitionPending(De),await U.value.watchTransaction(De)&&(_.value="",r.value="",c.value="",u.value=0,setTimeout(()=>{B.updatePositionItem(n.value.id),U.value.getAccount(t.value.address)},1e3),Number(u.value)==100&&i.name=="auto-pool-detail"&&Re.push("/pool/vaults"))}else $e(!1),qe(!0);Ae.value=!1}catch{Ae.value=!1,$e(!1),qe(!0)}};Ie(()=>n.value,(a,L)=>{a&&!Ke(a)&&(d.value=a==null?void 0:a.token_a,b.value=a==null?void 0:a.token_b,(!L||L&&L.address!==a.address)&&(u.value=u.value>0?u.value:25,pe({value:u.value/100})),L&&L.current_sqrt_price!==a.current_sqrt_price&&(D.value?pe({value:u.value/100}):H()))},{immediate:!0});const fo=h(()=>{const a=Number(c.value)>Number(M.value);return!_.value&&!r.value||!c.value||c.value<=0||!_.value&&y.value||!r.value&&X.value?Te("button.enterAmount"):a?"Invalid Amount":G.value?Te("button.insufficientLiquidity"):J.value?Te("button.enterAmount"):y.value&&Number(_.value)>Number(w.value)||X.value&&Number(r.value)>Number(w.value)?"Invalid Amount":Te("button.remove")}),_o=h(()=>{const a=Number(c.value)>Number(M.value);return!!(!_.value&&!r.value||Number(_.value)<=0&&y.value||Number(r.value)<=0&&X.value||!c.value||c.value<=0||a||G.value||ke.value!=="STATUS_RUNNING"||J.value||y.value&&Number(_.value)>Number(w.value)||X.value&&Number(r.value)>Number(w.value))}),go=a=>(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||uo("/image/coins/sui-unknown.png"),A=a=>{_.value="",r.value="",D.value=!0,x.value="",a=="only-a"?(y.value=!y.value,X.value=!1,j.value=!0):(X.value=!X.value,y.value=!1,j.value=!1)},E=a=>{D.value=!0,u.value=100,a==="fromCoin"?j.value=!0:j.value=!1},ce=a=>{D.value=!0,u.value=50,a==="fromCoin"?j.value=!0:j.value=!1},w=g(),we=async()=>{const a=n.value.token_a.decimals,L=n.value.token_b.decimals,Z=new l(ye.value).mul(new l(Math.pow(10,a))).toNumber(),ee=new l(me.value).mul(new l(Math.pow(10,L))).toNumber(),Q=y.value?ee:Z,ae=y.value?b.value.address===n.value.token_a.address:d.value.address===n.value.token_a.address;try{const fe=await P.value.swapRouterContract.getSwapRouter(y.value?b:d,y.value?d:b,Q,!0,Number(T.value)/100,"",void 0,[{pool_id:n.value.address,tick_lower:n.value.autoPoolPositionInfo.tick_lower_index,tick_upper:n.value.autoPoolPositionInfo.tick_upper_index,delta_liquidity:Number(n.value.positionLiquidity),is_increase:!1}]),se=new l(fe.amountOut);w.value=se.sub(se.mul(Number(T.value)/100)).add(new l(y.value?ye.value:me.value)).toString()}catch{if(y.value||X.value){let se=await U.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:ae,byAmountIn:!0,amount:Q});const Y=new l(se.estimatedAmountOut);w.value=Y.sub(Y.mul(Number(T.value)/100)).add(new l(y.value?ye.value:me.value)).toString(),y.value?_.value=S(new l(w.value).mul(u.value/100).toString(),d.value.decimals):r.value=S(new l(w.value).mul(u.value/100).toString(),b.value.decimals),pe({value:u.value/100})}}pe({value:u.value/100})};Ie(()=>[y.value,X.value,ye.value,me.value],([a,L])=>{a||L?we():pe({value:u.value/100})},{immediate:!0});const he=a=>`${a}%`,ke=h(()=>k.value.currentAutoPoolStatus),Ne=g(),Be=()=>{Ne.value=window.setInterval(()=>{(_.value||r.value)&&!D.value?H():pe({value:u.value/100})},2e4)};return bo(()=>{Be()}),So(()=>{window.clearInterval(Ne.value)}),{removeLiquidityBtnText:fo,removeLiquidityBtnDisabled:_o,wallet:t,ratioArr:$,positionInfo:n,isShowRemoveModal:C,needReverse:m,fromCoin:d,toCoin:b,lpAmount:c,lpBalance:M,sliderVal:u,sFixD:S,isSlider:D,fromCoinAmount:_,toCoinAmount:r,setPercent:pe,toRemove:co,addCommom:R,getCoinIcon:go,isOnlyA:y,isOnlyB:X,onlyToken:A,fixedFromCoin:j,maxBtnSelect:E,halfBtnSelect:ce,fromCoinBlance:ye,toCoinBlance:me,showFromCoinLock:ne,showToCoinLock:te,removeText:x,onlyTokenBalance:w,totalWithdraw:Se,formatter:he,currentAutoPoolStatus:ke,calculateLoading:ve}}});const po=e=>(ze("data-v-7b9122a1"),e=e(),Ge(),e),Fs={class:"auto-pool-add"},Os={class:"auto-pool-add-content"},Vs={class:"liquidity-action-tab"},Es=po(()=>o("div",{class:"remove tab-active"},"Remove",-1)),Ws={key:0,class:"only-token"},js=po(()=>o("div",null,"Deposit Amounts",-1)),Xs={key:0},zs={key:0},Gs={key:0,class:"card-item"},Hs={key:1,class:"card-item"},Ys={class:"remove-ratio"},Ks={class:"remove-ratio-select"},Zs={key:0,class:"ratio"},Js={key:1,class:"ratio"},Qs={class:"ratio-list"},xs=["onClick"],ea=po(()=>o("span",null,"Pool Closed",-1)),oa={key:4,class:"remove-info"},na={key:0,class:"remove-text total-amount"},ta={class:"total-amount"},ia=po(()=>o("span",null,"Total Withdraw",-1)),sa={key:0},aa={class:"total-amount"},la=po(()=>o("span",null,"LP Burn Amount",-1)),ua={key:0};function ra(e,t,O,V,T,N){var n,m,d,b,C,c,M,D,U,G,J,K,_;const p=Yo,P=Ko,$=Wo,u=io("AutoPoolV2PoolStatus"),i=Po,B=Xo,k=Jo;return s(),f("div",Fs,[o("div",Os,[o("div",Vs,[o("div",{class:"increase",onClick:t[0]||(t[0]=jo(r=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),Es]),!e.showFromCoinLock&&!e.showToCoinLock?(s(),f("div",Ws,[js,o("div",null,[o("div",{class:"only-a",onClick:t[1]||(t[1]=r=>e.onlyToken("only-a"))},[o("p",null,[e.isOnlyA?(s(),f("span",Xs)):F("",!0)]),o("span",null,v(e.needReverse?(b=(d=e.positionInfo)==null?void 0:d.token_b)==null?void 0:b.symbol:(m=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:m.symbol)+" only",1)]),o("div",{class:"only-b",onClick:t[2]||(t[2]=r=>e.onlyToken("only-b"))},[o("p",null,[e.isOnlyB?(s(),f("span",zs)):F("",!0)]),o("span",null,v(e.needReverse?(D=(M=e.positionInfo)==null?void 0:M.token_a)==null?void 0:D.symbol:(c=(C=e.positionInfo)==null?void 0:C.token_b)==null?void 0:c.symbol)+" only",1)])])])):F("",!0),o("div",{class:Oe(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(s(),f("div",Gs,[W(p,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[3]||(t[3]=r=>e.fromCoinAmount=r),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:t[4]||(t[4]=r=>e.maxBtnSelect("fromCoin")),onOnHalf:t[5]||(t[5]=r=>e.halfBtnSelect("fromCoin")),onOnInput:t[6]||(t[6]=r=>{e.isSlider=!1,e.fromCoinAmount=r}),onOnFocus:t[7]||(t[7]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(s(),z(P,{key:0})):F("",!0)])):F("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(s(),f("div",Hs,[W(p,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[8]||(t[8]=r=>e.toCoinAmount=r),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:t[9]||(t[9]=r=>e.maxBtnSelect("toCoin")),onOnHalf:t[10]||(t[10]=r=>e.halfBtnSelect("toCoin")),onOnInput:t[11]||(t[11]=r=>{e.isSlider=!1,e.toCoinAmount=r}),onOnFocus:t[12]||(t[12]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(s(),z(P,{key:0})):F("",!0)])):F("",!0)],2),o("div",Ys,[o("div",Ks,[Number(e.lpBalance)>=Number(e.lpAmount)?(s(),f("div",Zs,v(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:I(S))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:I(S))(e.sliderVal,2))+"% ",1)):(s(),f("div",Js,"--")),o("div",Qs,[(s(!0),f(to,null,Eo(e.ratioArr,(r,q)=>(s(),f("div",{key:q,class:Oe(["ratio-item",e.sliderVal==r.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=r.value}},v(r.name),11,xs))),128))])]),W($,{value:e.sliderVal,"onUpdate:value":t[13]||(t[13]=r=>e.sliderVal=r),"tip-formatter":e.formatter,onChange:t[14]||(t[14]=r=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(s(),z(u,{key:0})):F("",!0),(U=e.positionInfo)!=null&&U.is_pause?(s(),z(i,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:_e(()=>[ea]),_:1})):e.wallet.connected?(s(),z(i,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:t[15]||(t[15]=r=>e.toRemove())},{default:_e(()=>[o("span",null,v(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(s(),z(i,{key:3,class:"big-btn liquidity-btn",onClick:t[16]||(t[16]=r=>e.wallet.setIsShowWalletModal(!0))},{default:_e(()=>[o("span",null,v(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?F("",!0):(s(),f("div",oa,[e.removeText&&(e.isOnlyA&&Number(e.fromCoinAmount)>0||e.isOnlyB&&Number(e.toCoinAmount)>0)?(s(),f("div",na,v(e.removeText),1)):F("",!0),o("div",ta,[ia,e.calculateLoading?(s(),z(B,{key:1,paragraph:!1,active:""})):(s(),f("span",sa,v(e.totalWithdraw),1))]),o("div",aa,[la,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(s(),f("span",ua,v(("addCommom"in e?e.addCommom:I(R))(("sFixD"in e?e.sFixD:I(S))(e.lpAmount,e.positionInfo.decimals)))+" "+v(e.needReverse?(G=e.toCoin)==null?void 0:G.symbol:(J=e.fromCoin)==null?void 0:J.symbol)+"-"+v(e.needReverse?(K=e.fromCoin)==null?void 0:K.symbol:(_=e.toCoin)==null?void 0:_.symbol),1)):(s(),z(B,{key:1,paragraph:!1,active:""}))])])),e.isShowRemoveModal?(s(),z(k,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:t[17]||(t[17]=r=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):F("",!0)])}const da=We(Us,[["render",ra],["__scopeId","data-v-7b9122a1"]]),va=Xe({components:{AutoPoolV2Info:xo,AutoPoolV2PositionRange:en,AutoPoolV2PoolComposition:nn,AutoPoolV2PoolLiquidity:tn,AutoPoolV2PoolAdd:Ms,AutoPoolV2PoolRemove:da},setup(){const e=Ze();eo();const t=ho(),O=h(()=>t),V=h(()=>e),T=xe(),N=g();Ie(()=>[V.value.positionInfoObj,T.params.id],([$,u])=>{$&&!Ke($)&&u&&(N.value=$[u])},{immediate:!0,deep:!0});const p=async()=>{e.getAutoPoolAPY(),e.getVault(T.params.id)},P=g();return Ie(()=>T.query.action,$=>{$&&(P.value=$)},{immediate:!0}),bo(()=>{e.getVault(T.params.id)}),h(()=>O.value.chainName),To(),{clickRefresh:p,currentTab:P,positionInfo:N}}});const ma={class:"auto-pool-detail-v2"},pa={class:"detail-top"},ca={class:"detail-bottom pc-detail"},fa={class:"detail-bottom-left"},ba={class:"detail-bottom-right"},ya={class:"h5-detail"};function ha(e,t,O,V,T,N){const p=Fn,P=xo,$=en,u=nn,i=tn,B=io("AutoPoolV2PoolAdd"),k=io("AutoPoolV2PoolRemove");return s(),f("div",ma,[o("div",pa,[W(p,{"pool-info":e.positionInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"]),W(P)]),o("div",ca,[o("div",fa,[W($),W(u),W(i)]),o("div",ba,[e.currentTab=="deposit"?(s(),z(B,{key:0,onChangeCurrentTab:t[0]||(t[0]=n=>e.currentTab="remove")})):(s(),z(k,{key:1,onChangeCurrentTab:t[1]||(t[1]=n=>e.currentTab="deposit")}))])]),o("div",ya,[e.currentTab=="deposit"?(s(),z(B,{key:0,onChangeCurrentTab:t[2]||(t[2]=n=>e.currentTab="remove")})):(s(),z(k,{key:1,onChangeCurrentTab:t[3]||(t[3]=n=>e.currentTab="deposit")})),W($),W(u),W(i)])])}const Xa=We(va,[["render",ha],["__scopeId","data-v-cfbb0009"]]);export{Xa as default};
