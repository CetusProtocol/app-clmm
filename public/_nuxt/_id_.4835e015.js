import{_ as rn}from"./back.f8e4b7bf.js";import{_ as dn}from"./refresh-icon.bfd8d52a.js";import{a as je,a1 as Ho,y as So,r as g,af as vn,e as Ve,Q as to,o as a,c as G,w as se,h as o,i as L,j as Le,v,f as b,F as Ye,E as po,A as Se,x as E,ag as mn,I as pn,B as Ao,p as Xe,k as ze,H as co,K as Po,l as k,q as $e,b as To,m as xe,s as No,t as Ee,u as w,P as Eo,G as Wo,O as wo,D as vo,C as cn,L as fn,z as jo,M as Xo,S as yn}from"./entry.fb0d1e13.js";/* empty css              */import{a as bn,b as kn,_ as hn}from"./icon-error_2x.1a03776f.js";import{u as Qe,a as zo}from"./autoPool.9971602e.js";import{u as eo,c as Ke,a as T,g as Io,d as De,s as A,T as We,b as pe,p as Vo,e as Go,f as gn,V as Co}from"./pool.7066e590.js";import{_ as fo}from"./token-warning.9251daab.js";import{_ as Yo}from"./auto-pool-apy-tips.c4ccd1f3.js";/* empty css              */import{u as yo,a as bo}from"./sha256.53cbc506.js";import{i as ro}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as Ko}from"./assets-card.a64adfaa.js";import{_ as Qo}from"./coin-lock.bc279ccd.js";import{_ as Zo,a as Jo}from"./auto-pool-remove-modal.ae230cb7.js";/* empty css              */import{D as l}from"./decimal.0bdeb344.js";/* empty css              */import{u as _n}from"./swapRouter.dffd4829.js";/* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.150837a4.js";const $n=je({components:{Modal:Ho},setup(e,i){const{t:j,locale:W}=So(),N=Qe(),q=["0.1","0.5","1"],p=g(N.slippage||.1),{setSlippage:S}=N,I=vn(),u=g(!1);function t(n,d){u.value=!1,p.value=d}function R(){S(p.value),i.emit("onClose",!1)}return{settingArr:q,changeActiveIndex:t,confirm:R,emit:I,slippage:p,t:j,isInput:u,inputChange:n=>{const d=new RegExp(/[^\d^\.]+/g);n.target.value=n.target.value.replace(d,""),p.value=n.target.value}}}});const xo=e=>(Xe("data-v-c5b99de4"),e=e(),ze(),e),wn=xo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),In={class:"setting-container"},Cn={class:"title"},Sn=xo(()=>o("img",{src:hn,alt:""},null,-1)),An={class:"tag-list"},Pn={key:0,src:bn,alt:""},Tn={key:1,src:kn,alt:""},Nn={class:"footer"};function qn(e,i,j,W,N,q){const p=mn,S=pn,I=Ao,u=to("Modal");return a(),G(u,{title:"Settings",class:"setting",centered:"",visible:!0,width:"400px",onCancel:i[3]||(i[3]=t=>e.$emit("onClose"))},{closeIcon:se(()=>[wn]),footer:se(()=>[o("div",Nn,[L(I,{type:"cancel",class:"cancel-btn cancel-btn-new",onClick:i[2]||(i[2]=t=>e.$emit("onClose"))},{default:se(()=>[Le(v(e.$t("button.cancel")),1)]),_:1}),L(I,{class:"confirmbtn",disabled:Number(e.slippage)==0||Number(e.slippage)>1||Number(e.slippage)<.01,onClick:e.confirm},{default:se(()=>[Le(v(e.$t("button.confirm")),1)]),_:1},8,["disabled","onClick"])])]),default:se(()=>[o("div",In,[o("div",Cn,[Sn,o("span",null,v(e.$t("modal.slippageTolerance")),1)]),o("div",An,[(a(!0),b(Ye,null,po(e.settingArr,(t,R)=>(a(),G(p,{key:R,class:Se(!e.isInput&&t==e.slippage?"tag-active":""),onClick:f=>e.changeActiveIndex(R,t)},{default:se(()=>[Le(v(t)+"% ",1)]),_:2},1032,["class","onClick"]))),128)),L(p,{class:Se(["input-tag",e.isInput?"tag-active":""]),onClick:i[1]||(i[1]=t=>e.isInput=!0)},{default:se(()=>[L(S,{value:e.slippage,"onUpdate:value":i[0]||(i[0]=t=>e.slippage=t),placeholder:"",suffix:"%",class:Se(["slippage-input",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-input-waring":Number(e.slippage)>1?"slippage-input-error":""]),onChange:e.inputChange},null,8,["value","class","onChange"])]),_:1},8,["class"])])]),Number(e.slippage)>.5&&Number(e.slippage)<1||Number(e.slippage)>1?(a(),b("div",{key:0,class:Se(["slippage-hint",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-hint-waring":Number(e.slippage)>1?"slippage-hint-error":""])},[Number(e.slippage)>.5&&1>=Number(e.slippage)?(a(),b("img",Pn)):E("",!0),Number(e.slippage)>1?(a(),b("img",Tn)):E("",!0),o("p",null,v(Number(e.slippage)>.5&&1>=Number(e.slippage)?e.$t("tips.slippageTolerance2"):Number(e.slippage)>1?e.$t("tips.slippageTolerance1"):""),1)],2)):E("",!0)]),_:1})}const Rn=Ve($n,[["render",qn],["__scopeId","data-v-c5b99de4"]]),Bn=je({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,i){const j=g(!1),W=g(null),N=g(0);let q=g(!1);const p=g(20);eo();const S=Qe(),I=g(!1);co(()=>{}),Po(()=>{clearInterval(W.value)});const u=()=>{q.value=!1,W.value=setInterval(()=>{var m;I.value||N.value<p.value&&(N.value+=1,N.value===p.value&&((m=e==null?void 0:e.poolInfo)!=null&&m.address&&f(),N.value=0))},1e3)},t=k(()=>S.slippage),R=()=>{i.emit("clearAll")},f=()=>{q.value||(q.value=!0,N.value=0,i.emit("clickRefresh"),setTimeout(()=>{q.value=!1},1e3))};$e(()=>e.poolInfo,m=>{m&&!W.value&&u()},{immediate:!0});const n=To(),d=xe();return{refresh:q,clickRefresh:f,isShowSwapSetting:j,countdown:N,autoRefreshTime:p,slippage:t,clearAll:R,checkNullObj:Ke,router:n,route:d}}});const Dn=e=>(Xe("data-v-71491a33"),e=e(),ze(),e),Ln={class:"title"},Un={class:"left"},Mn=Dn(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),On={key:0,class:"deposit-progress"};function Fn(e,i,j,W,N,q){const p=rn,S=dn,I=Rn;return a(),b("div",Ln,[o("div",Un,[L(p)]),o("div",{class:Se(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[o("div",{class:"slippage-icon",onClick:i[0]||(i[0]=u=>e.isShowSwapSetting=!0)},[Mn,o("span",null,v(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(a(),b("div",On,[L(S,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):E("",!0)],2),e.isShowSwapSetting?(a(),G(I,{key:0,onOnClose:i[1]||(i[1]=u=>e.isShowSwapSetting=!1)})):E("",!0)])}const Vn=Ve(Bn,[["render",Fn],["__scopeId","data-v-71491a33"]]),Hn=je({components:{AutoPoolApyTips:Yo},setup(){const e=yo(),i=k(()=>e),j=eo(),W=k(()=>j),N=Qe(),q=k(()=>N),p=k(()=>i.value.theme),S=xe(),I=g();$e(()=>[q.value.positionInfoObj,S.params.id],([d,m])=>{d&&!Ke(d)&&m&&(I.value=d[m])},{immediate:!0,deep:!0});const u=k(()=>{var d;return(d=I.value)==null?void 0:d.needReverse}),t=d=>{var m;return(d==null?void 0:d.logoURI)||(d==null?void 0:d.logo_url)||((m=W.value.tokensObj[d==null?void 0:d.address])==null?void 0:m.logo_url)||(p.value==="default"?ro("/image/coins/unknown.png"):ro("/image/coins/sui-unknown.png"))},R=k(()=>{var d;return(d=I==null?void 0:I.value)==null?void 0:d.poolUSD}),f=k(()=>{var d,m;return q.value.apyObj&&((m=q.value.apyObj[(d=I.value)==null?void 0:d.id])==null?void 0:m.apr)||"--"}),n=k(()=>i.value.currentExplorer);return{positionInfo:I,needReverse:u,getCoinIcon:t,tvl:R,apy:f,addCommom:T,getExplorerUrl:Io,currentExplorer:n}}});const Fe=e=>(Xe("data-v-d4b397f3"),e=e(),ze(),e),En={class:"auto-pool-v2-info"},Wn={class:"pool-info"},jn={class:"left"},Xn={class:"coin-a"},zn={alt:""},Gn={class:"coin-b"},Yn={alt:""},Kn={class:"position-name"},Qn={key:0,class:"pool-fee"},Zn=Fe(()=>o("span",null,"Fee tier",-1)),Jn={class:"vault-address"},xn=["href"],et=Fe(()=>o("span",null,"Vault Address",-1)),ot=Fe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),nt=[et,ot],tt={class:"apy-and-tvl"},it={class:"apy"},st=Fe(()=>o("div",{class:"apy-title"},"APY",-1)),at={class:"apy-text"},lt={class:"reward-coin"},ut=Fe(()=>o("div",{class:"reward"},"Rewards",-1)),rt={class:"right"},dt={alt:""},vt={class:"tvl"},mt=Fe(()=>o("div",{class:"tvl-title"},"TVL",-1)),pt={class:"tvl-text"},ct={class:"pool-info h5-pool-info"},ft={class:"left"},yt={class:"coin-a"},bt={alt:""},kt={class:"coin-b"},ht={alt:""},gt={class:"position-name"},_t={key:0,class:"pool-fee"},$t=Fe(()=>o("span",null,"Fee tier",-1)),wt={class:"left"},It={class:"vault-address"},Ct=["href"],St=Fe(()=>o("span",null,"Vault Address",-1)),At=Fe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Pt=[St,At],Tt={class:"apy-and-tvl"},Nt={class:"apy"},qt=Fe(()=>o("div",{class:"apy-title"},"APY",-1)),Rt={class:"apy-text"},Bt={class:"reward-coin"},Dt=Fe(()=>o("div",{class:"reward"},"Rewards",-1)),Lt={class:"right"},Ut={alt:""},Mt={class:"tvl"},Ot=Fe(()=>o("div",{class:"tvl-title"},"TVL",-1)),Ft={class:"tvl-text"};function Vt(e,i,j,W,N,q){var t,R,f,n,d,m,h,C,r,M,U,O,ee,le,ne,$,_,Z,te,ie,ue,V,oe,ye,ce,re,P,B,ve,de,fe,y,Y,Ae,be,Ue,Pe,Re,we,Ie,oo,io,so,Ge,Te,ao;const p=fo,S=Yo,I=Eo,u=No("image");return a(),b("div",En,[o("div",Wn,[o("div",jn,[o("div",Xn,[Ee(o("img",zn,null,512),[[u,e.needReverse?e.getCoinIcon((R=e.positionInfo)==null?void 0:R.token_b):e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_a)]]),L(p,{address:e.needReverse?(m=(d=e.positionInfo)==null?void 0:d.token_b)==null?void 0:m.address:(n=(f=e.positionInfo)==null?void 0:f.token_a)==null?void 0:n.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Gn,[Ee(o("img",Yn,null,512),[[u,e.needReverse?e.getCoinIcon((C=e.positionInfo)==null?void 0:C.token_a):e.getCoinIcon((h=e.positionInfo)==null?void 0:h.token_b)]]),L(p,{address:e.needReverse?(O=(U=e.positionInfo)==null?void 0:U.token_a)==null?void 0:O.address:(M=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:M.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Kn,v(e.needReverse?(le=(ee=e.positionInfo)==null?void 0:ee.token_b)==null?void 0:le.symbol:($=(ne=e.positionInfo)==null?void 0:ne.token_a)==null?void 0:$.symbol)+" - "+v(e.needReverse?(Z=(_=e.positionInfo)==null?void 0:_.token_a)==null?void 0:Z.symbol:(ie=(te=e.positionInfo)==null?void 0:te.token_b)==null?void 0:ie.symbol),1),(ue=e.positionInfo)!=null&&ue.fee?(a(),b("div",Qn,[Zn,Le(" "+v(((V=e.positionInfo)==null?void 0:V.fee)*100)+"% ",1)])):E("",!0),o("div",Jn,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:w(Io))(e.currentExplorer,"poolAddress",(oe=e.positionInfo)==null?void 0:oe.id),target:"_blank"},nt,8,xn)])]),o("div",tt,[o("div",it,[st,o("div",at,[Le(v(e.apy)+" ",1),L(S)])]),o("div",lt,[ut,L(I,{"overlay-class-name":"reward-coin-tips"},{title:se(()=>[Le("Rewards will be auto harvested and compounded to your position.")]),default:se(()=>{var He;return[o("div",rt,[(a(!0),b(Ye,null,po((He=e.positionInfo)==null?void 0:He.rewardList,Me=>(a(),b("div",{key:Me,class:"coin-a"},[Ee(o("img",dt,null,512),[[u,e.getCoinIcon({address:Me})]]),L(p,{address:Me,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1})]),o("div",vt,[mt,o("div",pt,"$"+v(("addCommom"in e?e.addCommom:w(T))(e.tvl,2)),1)])])]),o("div",ct,[o("div",ft,[o("div",yt,[Ee(o("img",bt,null,512),[[u,e.needReverse?e.getCoinIcon((ce=e.positionInfo)==null?void 0:ce.token_b):e.getCoinIcon((ye=e.positionInfo)==null?void 0:ye.token_a)]]),L(p,{address:e.needReverse?(ve=(B=e.positionInfo)==null?void 0:B.token_b)==null?void 0:ve.address:(P=(re=e.positionInfo)==null?void 0:re.token_a)==null?void 0:P.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",kt,[Ee(o("img",ht,null,512),[[u,e.needReverse?e.getCoinIcon((fe=e.positionInfo)==null?void 0:fe.token_a):e.getCoinIcon((de=e.positionInfo)==null?void 0:de.token_b)]]),L(p,{address:e.needReverse?(be=(Ae=e.positionInfo)==null?void 0:Ae.token_a)==null?void 0:be.address:(Y=(y=e.positionInfo)==null?void 0:y.token_b)==null?void 0:Y.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",gt,v(e.needReverse?(Pe=(Ue=e.positionInfo)==null?void 0:Ue.token_b)==null?void 0:Pe.symbol:(we=(Re=e.positionInfo)==null?void 0:Re.token_a)==null?void 0:we.symbol)+" - "+v(e.needReverse?(oo=(Ie=e.positionInfo)==null?void 0:Ie.token_a)==null?void 0:oo.symbol:(so=(io=e.positionInfo)==null?void 0:io.token_b)==null?void 0:so.symbol),1),(Ge=e.positionInfo)!=null&&Ge.fee?(a(),b("div",_t,[$t,Le(" "+v(((Te=e.positionInfo)==null?void 0:Te.fee)*100)+"% ",1)])):E("",!0)]),o("div",wt,[o("div",It,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:w(Io))(e.currentExplorer,"poolAddress",(ao=e.positionInfo)==null?void 0:ao.id),target:"_blank"},Pt,8,Ct)])]),o("div",Tt,[o("div",Nt,[qt,o("div",Rt,[Le(v(e.apy)+" ",1),L(S)])]),o("div",Bt,[Dt,L(I,{"overlay-class-name":"reward-coin-tips"},{title:se(()=>[Le("Rewards will be auto harvested and compounded to your position.")]),default:se(()=>{var He;return[o("div",Lt,[(a(!0),b(Ye,null,po((He=e.positionInfo)==null?void 0:He.rewardList,Me=>(a(),b("div",{key:Me,class:"coin-a"},[Ee(o("img",Ut,null,512),[[u,e.getCoinIcon({address:Me})]]),L(p,{address:Me,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1})]),o("div",Mt,[Ot,o("div",Ft,"$"+v(("addCommom"in e?e.addCommom:w(T))(e.tvl,2)),1)])])])])}const en=Ve(Hn,[["render",Vt],["__scopeId","data-v-d4b397f3"]]),Ht=je({components:{Slider:Wo},setup(){const e=g(!0),i=eo(),j=k(()=>i),W=Qe(),N=k(()=>W),q=xe(),p=g();$e(()=>[N.value.positionInfoObj,q.params.id],([f,n])=>{f&&!Ke(f)&&n&&(p.value=f[n])},{immediate:!0,deep:!0});const S=k(()=>{var f;return(f=p.value)==null?void 0:f.needReverse}),I=f=>{var n;return(f==null?void 0:f.logoURI)||(f==null?void 0:f.logo_url)||((n=j.value.tokensObj[f==null?void 0:f.address])==null?void 0:n.logo_url)||ro("/image/coins/sui-unknown.png")},u=k(()=>{var h,C,r,M,U,O,ee;const f=e.value?((h=p.value)==null?void 0:h.minPrice)&&A(p==null?void 0:p.value.minPrice,6):((C=p.value)==null?void 0:C.maxPrice)&&A(1/(p==null?void 0:p.value.maxPrice),6),n=e.value?((r=p.value)==null?void 0:r.maxPrice)&&A((M=p.value)==null?void 0:M.maxPrice,6):((U=p.value)==null?void 0:U.minPrice)&&A(1/(p==null?void 0:p.value.minPrice),6),d=(S.value?!e.value:e.value)?A((O=p.value)==null?void 0:O.price,6):A(1/((ee=p.value)==null?void 0:ee.price),6);let m={};return m[f]={label:"Min Price"},m[n]={label:"Max Price"},d>f&&d<n?m[d]={label:"Current Price"}:d<f?m[Number(f)+1e-9]={label:"Current Price"}:d>n&&(m[Number(n)-1e-9]={label:"Current Price"}),m}),t=k(()=>{var n,d;return(S.value?!e.value:e.value)?De((n=p.value)==null?void 0:n.price,6):De(1/((d=p.value)==null?void 0:d.price),6)}),R=k(()=>{var n,d;return(S.value?!e.value:e.value)?De((n=p.value)==null?void 0:n.price,6):De(1/((d=p.value)==null?void 0:d.price),6)});return{direct:e,positionInfo:p,needReverse:S,getCoinIcon:I,decimalUi:De,addCommom:T,sFixD:A,marks:u,currentPrice:t,currentPriceResever:R}}});const ko=e=>(Xe("data-v-794c305c"),e=e(),ze(),e),Et={class:"v2-position-range"},Wt={class:"position-range-top"},jt=ko(()=>o("div",null,"Position Range",-1)),Xt={class:"base-coin"},zt={key:0},Gt={alt:""},Yt={key:1},Kt={alt:""},Qt={key:2},Zt={key:3},Jt=ko(()=>o("p",null,"Base coin",-1)),xt={class:"coin-rate"},ei=ko(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),oi=ko(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ni=[ei,oi],ti={class:"position-range-bottom"},ii={class:"price-range"},si={class:"price-range-bg"},ai={key:0,class:"min-price"},li={key:0},ui={key:1},ri={key:1,class:"max-price"},di={key:0},vi={key:1},mi={key:0,class:"min-price"},pi={key:0},ci={key:1},fi={key:1,class:"max-price"},yi={key:0},bi={key:1};function ki(e,i,j,W,N,q){var u,t,R,f,n,d,m,h,C,r,M,U,O,ee,le,ne,$,_,Z,te,ie,ue,V,oe,ye,ce,re,P;const p=fo,S=to("Slider"),I=No("image");return a(),b("div",Et,[o("div",Wt,[jt,o("div",Xt,[e.needReverse?(a(),b("div",Yt,[Ee(o("img",Kt,null,512),[[I,e.direct?e.getCoinIcon((h=e.positionInfo)==null?void 0:h.token_b):e.getCoinIcon((m=e.positionInfo)==null?void 0:m.token_a)]]),L(p,{address:e.direct?(U=(M=e.positionInfo)==null?void 0:M.token_b)==null?void 0:U.address:(r=(C=e.positionInfo)==null?void 0:C.token_a)==null?void 0:r.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(a(),b("div",zt,[Ee(o("img",Gt,null,512),[[I,e.direct?e.getCoinIcon((u=e.positionInfo)==null?void 0:u.token_a):e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_b)]]),L(p,{address:e.direct?(f=(R=e.positionInfo)==null?void 0:R.token_a)==null?void 0:f.address:(d=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:d.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(a(),b("span",Zt,v(e.direct?(_=($=e.positionInfo)==null?void 0:$.token_b)==null?void 0:_.symbol:(te=(Z=e.positionInfo)==null?void 0:Z.token_a)==null?void 0:te.symbol),1)):(a(),b("span",Qt,v(e.direct?(ee=(O=e.positionInfo)==null?void 0:O.token_a)==null?void 0:ee.symbol:(ne=(le=e.positionInfo)==null?void 0:le.token_b)==null?void 0:ne.symbol),1)),Jt,o("div",xt,[o("div",{onClick:i[0]||(i[0]=B=>e.direct=!e.direct)},ni)])])]),o("div",ti,[o("div",ii,[o("div",si,[e.direct?(a(),G(S,{key:0,value:e.currentPrice,class:Se(["position-slider",e.currentPrice<Number(("sFixD"in e?e.sFixD:w(A))((ie=e.positionInfo)==null?void 0:ie.minPrice,6))||e.currentPrice>Number(("sFixD"in e?e.sFixD:w(A))((ue=e.positionInfo)==null?void 0:ue.maxPrice,6))?"hide-handler":""]),step:null,marks:e.marks,disabled:!0,min:Number(("decimalUi"in e?e.decimalUi:w(De))((V=e.positionInfo)==null?void 0:V.minPrice,6)),max:Number(("decimalUi"in e?e.decimalUi:w(De))((oe=e.positionInfo)==null?void 0:oe.maxPrice,6))},{mark:se(({label:B})=>{var ve,de,fe,y,Y,Ae,be,Ue,Pe,Re,we,Ie;return[B=="Min Price"?(a(),b("div",ai,[o("div",null,v(B),1),e.direct?(a(),b("div",li,v(((ve=e.positionInfo)==null?void 0:ve.minPrice)&&("sFixD"in e?e.sFixD:w(A))((de=e.positionInfo)==null?void 0:de.minPrice,6)),1)):(a(),b("div",ui,v(((fe=e.positionInfo)==null?void 0:fe.maxPrice)&&("sFixD"in e?e.sFixD:w(A))(1/((y=e.positionInfo)==null?void 0:y.maxPrice),6)),1))])):E("",!0),B=="Max Price"?(a(),b("div",ri,[o("div",null,v(B),1),e.direct?(a(),b("div",di,v(((Y=e.positionInfo)==null?void 0:Y.maxPrice)&&("sFixD"in e?e.sFixD:w(A))((Ae=e.positionInfo)==null?void 0:Ae.maxPrice,6)),1)):(a(),b("div",vi,v(((be=e.positionInfo)==null?void 0:be.minPrice)&&("sFixD"in e?e.sFixD:w(A))(1/((Ue=e.positionInfo)==null?void 0:Ue.minPrice),6)),1))])):E("",!0),B=="Current Price"?(a(),b("div",{key:2,class:Se(["current-price",e.currentPrice<Number(("sFixD"in e?e.sFixD:w(A))((Pe=e.positionInfo)==null?void 0:Pe.minPrice,6))?"current-price-left":e.currentPrice>Number(("sFixD"in e?e.sFixD:w(A))((Re=e.positionInfo)==null?void 0:Re.maxPrice,6))?"current-price-right":""])},[o("div",null,v(B),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(a(),b(Ye,{key:0},[Le(v(("addCommom"in e?e.addCommom:w(T))(("decimalUi"in e?e.decimalUi:w(De))((we=e.positionInfo)==null?void 0:we.price,6))),1)],64)):(a(),b(Ye,{key:1},[Le(v(("addCommom"in e?e.addCommom:w(T))(("decimalUi"in e?e.decimalUi:w(De))(1/((Ie=e.positionInfo)==null?void 0:Ie.price),6))),1)],64))])],2)):E("",!0)]}),_:1},8,["value","class","marks","min","max"])):(a(),G(S,{key:1,value:e.currentPriceResever,class:Se(["position-slider",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:w(A))(1/((ye=e.positionInfo)==null?void 0:ye.maxPrice),6))||e.currentPriceResever>Number(("sFixD"in e?e.sFixD:w(A))(1/((ce=e.positionInfo)==null?void 0:ce.minPrice),6))?"hide-handler":""]),step:null,min:Number(("decimalUi"in e?e.decimalUi:w(De))(1/((re=e.positionInfo)==null?void 0:re.maxPrice),6)),max:Number(("decimalUi"in e?e.decimalUi:w(De))(1/((P=e.positionInfo)==null?void 0:P.minPrice),6)),marks:e.marks,disabled:!0},{mark:se(({label:B})=>{var ve,de,fe,y,Y,Ae,be,Ue,Pe,Re,we,Ie;return[B=="Min Price"?(a(),b("div",mi,[o("div",null,v(B),1),e.direct?(a(),b("div",pi,v(((ve=e.positionInfo)==null?void 0:ve.minPrice)&&("sFixD"in e?e.sFixD:w(A))((de=e.positionInfo)==null?void 0:de.minPrice,6)),1)):(a(),b("div",ci,v(((fe=e.positionInfo)==null?void 0:fe.maxPrice)&&("sFixD"in e?e.sFixD:w(A))(1/((y=e.positionInfo)==null?void 0:y.maxPrice),6)),1))])):E("",!0),B=="Max Price"?(a(),b("div",fi,[o("div",null,v(B),1),e.direct?(a(),b("div",yi,v(((Y=e.positionInfo)==null?void 0:Y.maxPrice)&&("sFixD"in e?e.sFixD:w(A))((Ae=e.positionInfo)==null?void 0:Ae.maxPrice,6)),1)):(a(),b("div",bi,v(((be=e.positionInfo)==null?void 0:be.minPrice)&&("sFixD"in e?e.sFixD:w(A))(1/((Ue=e.positionInfo)==null?void 0:Ue.minPrice),6)),1))])):E("",!0),B=="Current Price"?(a(),b("div",{key:2,class:Se(["current-price current-price-direct",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:w(A))(1/((Pe=e.positionInfo)==null?void 0:Pe.maxPrice),6))?"current-price-left":e.currentPriceResever>Number(("sFixD"in e?e.sFixD:w(A))(1/((Re=e.positionInfo)==null?void 0:Re.minPrice),6))?"current-price-right":""])},[o("div",null,v(B),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(a(),b(Ye,{key:0},[Le(v(("addCommom"in e?e.addCommom:w(T))(("decimalUi"in e?e.decimalUi:w(De))((we=e.positionInfo)==null?void 0:we.price,6))),1)],64)):(a(),b(Ye,{key:1},[Le(v(("addCommom"in e?e.addCommom:w(T))(("decimalUi"in e?e.decimalUi:w(De))(1/((Ie=e.positionInfo)==null?void 0:Ie.price),6))),1)],64))])],2)):E("",!0)]}),_:1},8,["value","class","min","max","marks"]))])])])])}const on=Ve(Ht,[["render",ki],["__scopeId","data-v-794c305c"]]),hi=je({components:{Modal:Ho},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const i=k(()=>{var W,N;const j=Math.ceil(((W=e.positionInfo)==null?void 0:W.poolUSD)/((N=e.positionInfo)==null?void 0:N.quoteUSD)*100);return Number(j)});return{sFixD:A,addCommom:T,ratio:i}}});const qo=e=>(Xe("data-v-78a51262"),e=e(),ze(),e),gi=qo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),_i={class:"deposit-slider"},$i={class:"info-block"},wi=qo(()=>o("div",{class:"leabl"},"Current Deposit：",-1)),Ii={class:"text"},Ci={class:"info-block"},Si=qo(()=>o("div",{class:"leabl"},"Max Capacity：",-1)),Ai={class:"text"};function Pi(e,i,j,W,N,q){const p=to("Modal");return a(),G(p,{width:"440px",visible:!0,footer:null,title:"Vault Capacity",onCancel:i[0]||(i[0]=S=>e.$emit("onClose"))},{closeIcon:se(()=>[gi]),default:se(()=>{var S,I,u,t;return[o("div",_i,[o("div",{class:"current-deposit",style:wo({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",$i,[wi,o("div",Ii,v(("addCommom"in e?e.addCommom:w(T))(("sFixD"in e?e.sFixD:w(A))((S=e.positionInfo)==null?void 0:S.currentDeposit,2)))+" "+v((I=e.positionInfo)==null?void 0:I.quoteCoinInfo.symbol),1)]),o("div",Ci,[Si,o("div",Ai,v(("addCommom"in e?e.addCommom:w(T))(("sFixD"in e?e.sFixD:w(A))((u=e.positionInfo)==null?void 0:u.quoteUSD,2)))+" "+v((t=e.positionInfo)==null?void 0:t.quoteCoinInfo.symbol),1)])]}),_:1})}const nn=Ve(hi,[["render",Pi],["__scopeId","data-v-78a51262"]]),Ti=je({components:{AutoPoolV2PoolCapacity:nn},setup(){const e=eo(),i=k(()=>e),j=Qe(),W=k(()=>j),N=xe(),q=g();$e(()=>[W.value.positionInfoObj,N.params.id],([u,t])=>{u&&!Ke(u)&&t&&(q.value=u[t])},{immediate:!0,deep:!0});const p=k(()=>{var u;return(u=q.value)==null?void 0:u.needReverse}),S=u=>{var t;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((t=i.value.tokensObj[u==null?void 0:u.address])==null?void 0:t.logo_url)||ro("/image/coins/sui-unknown.png")},I=g(!1);return{needReverse:p,positionInfo:q,getCoinIcon:S,addCommom:T,isShowModal:I}}});const Ni=e=>(Xe("data-v-ad8a33e9"),e=e(),ze(),e),qi={class:"pool-composition"},Ri={class:"pool-composition-top"},Bi=Ni(()=>o("span",null,"Vault Composition",-1)),Di={class:"pool-composition-bottom"},Li={class:"token-ratio"},Ui={class:"before-coin"},Mi={alt:""},Oi={class:"after-coin"},Fi={alt:""},Vi={class:"token-num"},Hi={class:"num-box"},Ei={class:"num-box"};function Wi(e,i,j,W,N,q){var u,t,R,f,n,d,m,h,C,r,M,U,O,ee,le,ne,$,_,Z,te,ie,ue,V,oe,ye,ce,re,P,B;const p=fo,S=nn,I=No("image");return a(),b("div",qi,[o("div",Ri,[Bi,Number((u=e.positionInfo)==null?void 0:u.quoteUSD)>0?(a(),b("div",{key:0,class:"pool-capacity",onClick:i[0]||(i[0]=ve=>e.isShowModal=!0)},"Vault Capacity")):E("",!0)]),o("div",Di,[o("div",Li,[o("div",Ui,[o("div",null,[L(p,{address:e.needReverse?(n=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:n.address:(R=(t=e.positionInfo)==null?void 0:t.token_a)==null?void 0:R.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),Ee(o("img",Mi,null,512),[[I,e.needReverse?e.getCoinIcon((m=e.positionInfo)==null?void 0:m.token_b):e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_a)]])]),o("span",null,v((h=e.positionInfo)==null?void 0:h.poolCoinARatio)+"%",1)]),o("div",Oi,[o("span",null,v((C=e.positionInfo)==null?void 0:C.poolCoinBRatio)+"%",1),o("div",null,[Ee(o("img",Fi,null,512),[[I,e.needReverse?e.getCoinIcon((M=e.positionInfo)==null?void 0:M.token_a):e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_b)]]),L(p,{address:e.needReverse?(le=(ee=e.positionInfo)==null?void 0:ee.token_a)==null?void 0:le.address:(O=(U=e.positionInfo)==null?void 0:U.token_b)==null?void 0:O.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",Vi,[o("div",{class:"token-a-bg",style:wo({width:`${(ne=e.positionInfo)==null?void 0:ne.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:wo({width:`${($=e.positionInfo)==null?void 0:$.poolCoinBRatio}%`})},null,4),o("div",Hi,[o("div",null,v(("addCommom"in e?e.addCommom:w(T))((_=e.positionInfo)==null?void 0:_.poolCoinANum))+" "+v(e.needReverse?(ue=(ie=e.positionInfo)==null?void 0:ie.token_b)==null?void 0:ue.symbol:(te=(Z=e.positionInfo)==null?void 0:Z.token_a)==null?void 0:te.symbol),1),o("div",null,"$"+v(("addCommom"in e?e.addCommom:w(T))((V=e.positionInfo)==null?void 0:V.poolCoinAUSD)),1)]),o("div",Ei,[o("div",null,v(("addCommom"in e?e.addCommom:w(T))((oe=e.positionInfo)==null?void 0:oe.poolCoinBNum))+" "+v(e.needReverse?(P=(re=e.positionInfo)==null?void 0:re.token_a)==null?void 0:P.symbol:(ce=(ye=e.positionInfo)==null?void 0:ye.token_b)==null?void 0:ce.symbol),1),o("div",null,"$"+v(("addCommom"in e?e.addCommom:w(T))((B=e.positionInfo)==null?void 0:B.poolCoinBUSD)),1)])])]),e.isShowModal?(a(),G(S,{key:0,"position-info":e.positionInfo,onOnClose:i[1]||(i[1]=ve=>e.isShowModal=!1)},null,8,["position-info"])):E("",!0)])}const tn=Ve(Ti,[["render",Wi],["__scopeId","data-v-ad8a33e9"]]),ji=je({setup(){const e=eo(),i=k(()=>e),j=Qe(),W=k(()=>j),N=xe(),q=g();$e(()=>[W.value.positionInfoObj,N.params.id],([t,R])=>{t&&!Ke(t)&&R&&(q.value=t[R])},{immediate:!0,deep:!0});const p=k(()=>{var t;return(t=q.value)==null?void 0:t.needReverse}),S=t=>{var R;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((R=i.value.tokensObj[t==null?void 0:t.address])==null?void 0:R.logo_url)||ro("/image/coins/sui-unknown.png")},I=bo(),u=k(()=>I);return{needReverse:p,positionInfo:q,getCoinIcon:S,addCommom:T,wallet:u}}});const mo=e=>(Xe("data-v-61c3efe6"),e=e(),ze(),e),Xi={class:"my-liquidity"},zi={class:"my-liquidity-top"},Gi=mo(()=>o("div",null,"My Liquidity",-1)),Yi=mo(()=>o("p",null,"My share of pool",-1)),Ki={class:"my-liquidity-bottom"},Qi={class:"lp-token"},Zi=mo(()=>o("div",null,[o("span",null,"LP Token Balance ")],-1)),Ji={class:"lp-balance"},xi={class:"token-num-content"},es={class:"token-num token-a-num"},os={class:"logo"},ns=["src"],ts={class:"text"},is={class:"lp-logo"},ss=["src"],as=mo(()=>o("div",null,"Pooled Assets",-1)),ls={class:"token-num"},us={class:"logo"},rs=["src"],ds={class:"text"},vs=mo(()=>o("div",{class:"token-num-content-bg"},null,-1));function ms(e,i,j,W,N,q){var S,I,u,t,R,f,n,d,m,h,C,r,M,U,O,ee,le,ne,$,_,Z,te,ie,ue,V,oe,ye,ce,re;const p=fo;return a(),b("div",Xi,[o("div",zi,[Gi,o("div",null,[Yi,o("p",null,v(e.wallet.connected?(S=e.positionInfo)==null?void 0:S.myShare:"--")+"%",1)])]),o("div",Ki,[o("div",Qi,[Zi,o("div",null,[o("span",Ji,v(e.wallet.connected?("addCommom"in e?e.addCommom:w(T))((I=e.positionInfo)==null?void 0:I.myLiquidity):"--")+" LP",1),o("span",null,v(e.wallet.connected?((u=e.positionInfo)==null?void 0:u.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in e?e.addCommom:w(T))((t=e.positionInfo)==null?void 0:t.myLiquidityUSD)}`:"<$0.01":"--"),1)])]),o("div",xi,[o("div",es,[o("div",os,[o("img",{src:e.needReverse?e.getCoinIcon((f=e.positionInfo)==null?void 0:f.token_b):e.getCoinIcon((R=e.positionInfo)==null?void 0:R.token_a),alt:""},null,8,ns),L(p,{address:e.needReverse?(h=(m=e.positionInfo)==null?void 0:m.token_b)==null?void 0:h.address:(d=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:d.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",ts,[o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:w(T))((C=e.positionInfo)==null?void 0:C.amountA):"--")+" "+v(e.needReverse?(O=(U=e.positionInfo)==null?void 0:U.token_b)==null?void 0:O.symbol:(M=(r=e.positionInfo)==null?void 0:r.token_a)==null?void 0:M.symbol),1),o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:w(T))((ee=e.positionInfo)==null?void 0:ee.myAmountAUSD):"--"),1)])]),o("div",is,[o("img",{src:e.getCoinIcon((le=e.positionInfo)==null?void 0:le.lpInfo),alt:""},null,8,ss),as]),o("div",ls,[o("div",us,[o("img",{src:e.needReverse?e.getCoinIcon(($=e.positionInfo)==null?void 0:$.token_a):e.getCoinIcon((ne=e.positionInfo)==null?void 0:ne.token_b),alt:""},null,8,rs),L(p,{address:e.needReverse?(ie=(te=e.positionInfo)==null?void 0:te.token_a)==null?void 0:ie.address:(Z=(_=e.positionInfo)==null?void 0:_.token_b)==null?void 0:Z.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",ds,[o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:w(T))((ue=e.positionInfo)==null?void 0:ue.amountB):"--")+" "+v(e.needReverse?(ce=(ye=e.positionInfo)==null?void 0:ye.token_a)==null?void 0:ce.symbol:(oe=(V=e.positionInfo)==null?void 0:V.token_b)==null?void 0:oe.symbol),1),o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:w(T))((re=e.positionInfo)==null?void 0:re.myAmountBUSD):"--"),1)])]),vs])])])}const sn=Ve(ji,[["render",ms],["__scopeId","data-v-61c3efe6"]]),ps=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const cs={},an=e=>(Xe("data-v-fcbc716b"),e=e(),ze(),e),fs={class:"status"},ys=an(()=>o("img",{src:ps,alt:""},null,-1)),bs=an(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),ks=[ys,bs];function hs(e,i){return a(),b("div",fs,ks)}const ln=Ve(cs,[["render",hs],["__scopeId","data-v-fcbc716b"]]),gs=je({components:{AutoPoolAddModal:Zo,AutoPoolV2PoolStatus:ln},setup(){const e=bo(),i=g(!1),j=yo(),W=k(()=>j),N=k(()=>W.value.chainName),q=k(()=>e),p=Qe(),S=k(()=>p),I=eo(),u=k(()=>I),t=g(),R=xe(),f=g(!1),n=g(!1);$e(()=>[S.value.positionInfoObj,R.params.id],([c,X])=>{c&&!Ke(c)&&X&&(t.value=c[X])},{immediate:!0,deep:!0});const d=k(()=>{var c;return(c=t.value)==null?void 0:c.needReverse}),m=g(),h=g(),C=g(),r=g(),M=g(!0),U=k(()=>q.value.assets&&m.value&&q.value.assets[m.value.address]?Vo(q.value.assets[m.value.address].balance,m.value.decimals):0),O=k(()=>q.value.assets&&h.value&&q.value.assets[h.value.address]?Vo(q.value.assets[h.value.address].balance,h.value.decimals):0),ee=c=>{c==="fromCoin"?(M.value=!0,C.value=U.value>0?m.value.symbol=="SUI"?new l(Number(U.value)).sub(new l(.05)).lt(new l(0))?"0":new l(Number(U.value)).sub(new l(.05)).toString():String(U.value):""):(M.value=!1,r.value=O.value>0?h.value.symbol=="SUI"?new l(Number(O.value)).sub(new l(.05)).lt(new l(0))?"0":new l(Number(O.value)).sub(new l(.05)).toString():String(O.value):"")},le=c=>{c==="fromCoin"?(M.value=!0,C.value=U.value>0?A(new l(Number(U.value)).div(2).toString(),m.value.decimals).toString():""):(M.value=!1,r.value=O.value>0?A(new l(Number(O.value)).div(2).toString(),h.value.decimals).toString():"")},ne=k(()=>N.value?Go(N.value):{}),$=k(()=>S.value.slippage),_=g("--"),Z=g("--"),te=c=>{const X=new l(t.value.autoPoolPositionInfo.liquidity),ke=new l(c.toString());if(X.toNumber()>0&&ke.toNumber()>0){const F=ke.add(X),he=ke.div(F).mul(100).toNumber(),ge=gn(he),s=ge==-1?2:ge+2,D=A(ke.div(F).mul(100).toNumber(),s),ae=new l(1).div(new l(Math.pow(10,t.value.lpInfo.decimals))).toString();Number(D)<Number(ae)?_.value=`<${ae}`:_.value=D}else ke.toNumber()>0&&X.toNumber()<=0?_.value="100":_.value="--"},ie=c=>{if(t.value.total_supply==0){Z.value="";return}new l(c.toString());const X=new l($.value).div(100),ke=Co.get_lp_amount_by_liquidity({liquidity:t.value.liquidity,total_supply:t.value.total_supply},c.toString()),F=new l(Math.pow(10,t.value.lpInfo.decimals)),he=new l(ke).div(F).toString(),ge=new l(he).mul(X),s=new l(he).sub(ge);Z.value=A(s.toString(),t.value.decimals)},ue=g(!1),V=g(!1),oe=g(""),ye=g(),ce=g(!1),re=g(!1),P=g(!1),B=g(!1),ve=async()=>{if(!t.value)return;if(t.value.supportHaedalStake&&B.value&&r.value<10){re.value=!0;return}n.value=!1,ce.value=!0;const c=t.value.autoPoolPositionInfo.tick_lower_index,X=t.value.autoPoolPositionInfo.tick_upper_index,ke=We.sqrtPriceX64ToTickIndex(new pe(t.value.current_sqrt_price));We.tickIndexToSqrtPriceX64(c),We.tickIndexToSqrtPriceX64(X),ke<c&&(d.value?ue.value=!0:V.value=!0),ke>X&&(d.value?V.value=!0:ue.value=!0);let F;if(C.value||r.value){M.value?F=new l(C.value).mul(Math.pow(10,m.value.decimals)).toString():F=new l(r.value).mul(Math.pow(10,h.value.decimals)).toString();let he,ge=M.value;if(P.value||B.value){const Q=new l(1);if(new l(F).lte(Q))return n.value=!0,!1;let H;try{H=await Ge.calculateDepositSwapAmount({lowerTick:c,upperTick:X,curSqrtPrice:new pe(t.value.current_sqrt_price),fix_amount_a:ge,input_amount:F,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number($.value)/100,decimals:P.value?m.value.decimals:h.value.decimals,request_id:F,staking_id:t.value.supportHaedalStake&&(B.value&&!t.value.isTokenA||P.value&&t.value.isTokenA)?t.value.staking_id:"",shouldRequestStake:!1})}catch{}if(H=="HaedalStakeSuiAmountError"){f.value=!1,re.value=!0;return}else if(H){if(H.request_id!==F)return;re.value=!1,f.value=t.value.supportHaedalStake?!1:H.is_exceed,he=new pe(H.afterSqrtPrice),F=H.fixAmountA===ge?new pe(new l(F).sub(H.swapInAmount).toString()):new pe(H.swapOutAmount),ye.value={swap_amount:H.swapInAmount,route_obj:H.route_obj,a2b:ge,input_amount:F,staking_id:H.staking_id},ge=H.fixAmountA;const me=t.value.token_a.decimals,J=t.value.token_b.decimals,z=new l(H.swapInAmount).div(new l(Math.pow(10,me))).toString(),x=A(new l(H.swapOutAmountLimit).div(new l(Math.pow(10,J))).toString(),J),Ne=d.value?t.value.token_b.symbol:t.value.token_a.symbol,_e=d.value?t.value.token_a.symbol:t.value.token_b.symbol,qe=`To deposit ${T(P.value?C.value:r.value)} ${P.value?Ne:_e},
            ${T(z)} ${P.value?Ne:_e}  will be traded for ${T(x)} ${P.value?_e:Ne} added to the pool.`,Je=`By depositing ${r.value} ${_e}, ${T(x)} ${_e} will be converted to ${Ne} via Haedal 
            liquid staking and added to the pool together.`;oe.value=t.value.supportHaedalStake&&B.value?Je:qe}else he=t.value.current_sqrt_price,F=new pe(F)}else f.value=!1,he=t.value.current_sqrt_price,F=new pe(F),oe.value="";let s,D,ae;const K=ne.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:m.value,tokenB:h.value,lowerTick:c,upperTick:X,coinAmount:F,iscoinA:ge,roundUp:!0,slippage:Number($.value)/100,curSqrtPrice:new pe(he)});s=K.liquidityAmount,D=K.tokenMaxA,ae=K.tokenMaxB,!P.value&&!B.value&&(M.value?r.value=Number(ae)>0?ae:"":C.value=Number(D)>0?D:""),te(s),ie(s),ce.value=!1}};$e(()=>t.value,c=>{c&&!Ke(c)&&(m.value=c==null?void 0:c.token_a,h.value=c==null?void 0:c.token_b,ue.value=!1,V.value=!1,ve())},{immediate:!0});const de=k(()=>u.value.RATES),fe=k(()=>{var c,X,ke,F,he,ge,s,D;if((X=de.value[(c=m.value)==null?void 0:c.address])!=null&&X.price&&((F=de.value[(ke=h.value)==null?void 0:ke.address])!=null&&F.price)){const ae=new l(C.value||0).mul(new l((ge=de.value[(he=m.value)==null?void 0:he.address])==null?void 0:ge.price)),K=new l(r.value||0).mul(new l((D=de.value[(s=h.value)==null?void 0:s.address])==null?void 0:D.price));return ae.add(K).toNumber()}else return"--"});$e(()=>C.value,vo((c,X)=>{c?ve():(_.value="--",r.value="",Z.value="--")},500),{immediate:!0}),$e(()=>r.value,vo((c,X)=>{c?ve():(C.value="",_.value="--",Z.value="--")},500),{immediate:!0});const{t:y,locale:Y}=So(),Ae=k(()=>{var c,X;if(P.value||B.value){const ke=P.value?C.value:r.value,F=P.value?m.value:h.value;if((c=de.value[F==null?void 0:F.address])!=null&&c.price)return new l(ke||0).mul(new l((X=de.value[F==null?void 0:F.address])==null?void 0:X.price)).toNumber()}return 0}),be=k(()=>{const c=Number(C.value)>Number(U.value),X=Number(r.value)>Number(O.value);return!C.value&&!r.value?y("button.enterAmount"):t.value.supportHaedalStake&&B.value&&r.value<10?"Minimum deposit 10 SUI":c?y("button.insufficientBalance",{name:m.value.symbol}):X?y("button.insufficientBalance",{name:h.value.symbol}):f.value?y("button.insufficientLiquidity"):Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(fe.value)>Number(t.value.remainingTokenUSD)?"Exceeded the max capacity":n.value?y("button.enterAmount"):"Add Liquidity"}),Ue=k(()=>{const c=Number(C.value)>Number(U.value),X=Number(r.value)>Number(O.value);return!!(!C.value&&!r.value||c||X||C.value<=0&&r.value<=0||f.value||He.value!=="STATUS_RUNNING"||Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(fe.value)>Number(t.value.remainingTokenUSD)||n.value||t.value.supportHaedalStake&&!B.value&&Ae.value>1e4||!t.value.supportHaedalStake&&Ae.value>1e4||re.value||t.value.supportHaedalStake&&B.value&&r.value<10)}),Pe=g(!0),{setIsShowSuccess:Re,setIsShowRejected:we,setIsShowWaiting:Ie,setTransactionDesc:oo,setTransactionTxid:io,setPositiomNum:so}=j,Ge=zo("Sui"),Te=async()=>{var ae,K;i.value=!1,Pe.value=!0,io("");const c=`${T(C.value)} ${(ae=m.value)==null?void 0:ae.symbol}`,X=`${T(r.value)} ${(K=h.value)==null?void 0:K.symbol}`;oo(`Deposit ${C.value>0?c:""} ${r.value>0&&C.value>0?"and":""} ${r.value>0?X:""}`),Ie(!0);const ke=M.value,F=t.value.autoPoolPositionInfo.tick_lower_index,he=t.value.autoPoolPositionInfo.tick_upper_index,ge=We.sqrtPriceX64ToTickIndex(new pe(t.value.current_sqrt_price));let s;M.value?s=new l(C.value).mul(Math.pow(10,m.value.decimals)).toString():s=new l(r.value).mul(Math.pow(10,h.value.decimals)).toString();const D=t.value.rewarderInfo.map(Q=>Q.coinAddress);try{const Q={lowerTick:F,upperTick:he,coinAmount:s,fix_amount_a:ke,slippage:Number($.value)/100,curSqrtPrice:new pe(t.value.current_sqrt_price),id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:D,swapParams:ye.value,isOnlyA:P.value,isOnlyB:B.value,currentTickIndex:ge,decimal_b:t.value.coinB.decimals,request_id:s,staking_id:t.value.supportHaedalStake&&(B.value&&!t.value.isTokenA||P.value&&t.value.isTokenA)?t.value.staking_id:"",shouldRequestStake:t.value.supportHaedalStake&&B.value,farming_pool:t.value.autoPoolPositionInfo.pool_id},H=await Ge.deposit(Q),me=await ne.value.signAndExecuteTransactionBlock(q.value.currentWallet,H);let J=ne.value.handleTx(me);if(J&&J.hash){io(J.hash),Ie(!1),Re(!0);const z={title:"Supplied",desc:`Deposit ${C.value>0?c:""} ${r.value>0&&C.value>0?"and":""} ${r.value>0?X:""}`,hash:J.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${C.value>0?c:""} ${r.value>0&&C.value>0?"and":""} ${r.value>0?X:""}`};N.value!=="Aptos"&&(z.res=J.res),ne.value.showTransitionPending(z),await ne.value.watchTransaction(z)&&setTimeout(()=>{p.updatePositionItem(t.value.id),ne.value.getAccount(q.value.address)},1e3),so()}else Ie(!1),we(!0);C.value="",r.value="",Pe.value=!1}catch{C.value="",r.value="",Pe.value=!1,Ie(!1),we(!0)}},ao=c=>{C.value="",r.value="",oe.value="",re.value=!1,c=="only-a-b"?(P.value=!1,B.value=!1):c=="only-a"?(P.value=!0,B.value=!1):(B.value=!0,P.value=!1)},He=k(()=>S.value.currentAutoPoolStatus),Me=g(),go=()=>{Me.value=window.setInterval(()=>{(C.value||r.value)&&ve()},2e4)};co(()=>{go()}),Po(()=>{window.clearInterval(Me.value)});const _o=cn(fn,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0});return{currentAutoPoolStatus:He,wallet:q,positionInfo:t,isShowAddModal:i,needReverse:d,fromCoin:m,toCoin:h,fromCoinAmount:C,toCoinAmount:r,fromCoinBlance:U,toCoinBlance:O,fixedFromCoin:M,maxBtnSelect:ee,halfBtnSelect:le,totalAmountUSD:fe,addCommom:T,shareOfPool:_,minimumReceivedLP:Z,addLiquidityBtnText:be,addLiquidityBtnDisabled:Ue,toAdd:Te,showToCoinLock:V,showFromCoinLock:ue,isOnlyA:P,isOnlyB:B,onlyToken:ao,onlyText:oe,onlyTokenUSD:Ae,calculateLoading:ce,indicator:_o,depositTokenTips:"You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",depositHaedalTokenTips:"When you deposit in only SUI tokens, a part of your SUI amount will be converted to haSUI via Haedal liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved."}}});const Ze=e=>(Xe("data-v-b1d46143"),e=e(),ze(),e),_s={class:"auto-pool-add"},$s={class:"auto-pool-add-content"},ws={class:"liquidity-action-tab"},Is=Ze(()=>o("div",{class:"increase tab-active"},"Add",-1)),Cs={class:"only-token"},Ss=Ze(()=>o("div",null,"Deposit Amounts",-1)),As=Ze(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),Ps=Ze(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),Ts={key:0,class:"card-item"},Ns={key:1,class:"card-item"},qs=Ze(()=>o("span",null,"Pool Closed",-1)),Rs={key:0,class:"add-info"},Bs={key:0,class:"only-text"},Ds={class:"total-amount"},Ls=Ze(()=>o("span",null,"Total Amount",-1)),Us={key:0},Ms={class:"total-amount"},Os=Ze(()=>o("span",null,"Share of Pool",-1)),Fs={key:0},Vs={class:"total-amount"},Hs=Ze(()=>o("span",null,"Minimum Received LP",-1)),Es={key:0},Ws={key:1,class:"add-info only-add-info"},js=Ze(()=>o("div",{class:"only-text"},"Single-asset deposit can't be higher than $10,000 at a time.",-1)),Xs=[js];function zs(e,i,j,W,N,q){var n,d,m,h,C,r,M,U,O,ee,le,ne,$,_,Z,te,ie,ue,V,oe,ye,ce,re;const p=Eo,S=Ko,I=Qo,u=to("AutoPoolV2PoolStatus"),t=Ao,R=Xo,f=Zo;return a(),b("div",_s,[o("div",$s,[o("div",ws,[Is,o("div",{class:"remove",onClick:i[0]||(i[0]=jo(P=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",Cs,[Ss,o("div",null,[o("div",{class:Se(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:i[1]||(i[1]=P=>e.onlyToken("only-a-b"))},[o("span",null,v(e.needReverse?(h=(m=e.positionInfo)==null?void 0:m.token_b)==null?void 0:h.symbol:(d=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:d.symbol)+" + "+v(e.needReverse?(U=(M=e.positionInfo)==null?void 0:M.token_a)==null?void 0:U.symbol:(r=(C=e.positionInfo)==null?void 0:C.token_b)==null?void 0:r.symbol),1)],2),o("div",{class:Se(["only-a",e.isOnlyA?"active-only":""]),onClick:i[2]||(i[2]=P=>e.onlyToken("only-a"))},[o("span",null,v(e.needReverse?(ne=(le=e.positionInfo)==null?void 0:le.token_b)==null?void 0:ne.symbol:(ee=(O=e.positionInfo)==null?void 0:O.token_a)==null?void 0:ee.symbol)+" only",1),L(p,{placement:"bottom","arrow-point-at-center":""},{title:se(()=>[o("span",null,v(e.depositTokenTips),1)]),default:se(()=>[As]),_:1})],2),o("div",{class:Se(["only-b",e.isOnlyB?"active-only":""]),onClick:i[3]||(i[3]=P=>e.onlyToken("only-b"))},[o("span",null,v(e.needReverse?(te=(Z=e.positionInfo)==null?void 0:Z.token_a)==null?void 0:te.symbol:(_=($=e.positionInfo)==null?void 0:$.token_b)==null?void 0:_.symbol)+" only",1),L(p,{placement:"bottom","arrow-point-at-center":""},{title:se(()=>[o("span",null,v(e.positionInfo.supportHaedalStake?e.depositHaedalTokenTips:e.depositTokenTips),1)]),default:se(()=>[Ps]),_:1})],2)])]),o("div",{class:Se(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(a(),b("div",Ts,[L(S,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":i[4]||(i[4]=P=>e.fromCoinAmount=P),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:i[5]||(i[5]=P=>e.maxBtnSelect("fromCoin")),onOnHalf:i[6]||(i[6]=P=>e.halfBtnSelect("fromCoin")),onOnInput:i[7]||(i[7]=P=>{e.fromCoinAmount=P}),onOnFocus:i[8]||(i[8]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(a(),G(I,{key:0})):E("",!0)])):E("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(a(),b("div",Ns,[L(S,{modelValue:e.toCoinAmount,"onUpdate:modelValue":i[9]||(i[9]=P=>e.toCoinAmount=P),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:i[10]||(i[10]=P=>e.maxBtnSelect("toCoin")),onOnHalf:i[11]||(i[11]=P=>e.halfBtnSelect("toCoin")),onOnInput:i[12]||(i[12]=P=>{e.toCoinAmount=P}),onOnFocus:i[13]||(i[13]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(a(),G(I,{key:0})):E("",!0)])):E("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(a(),G(u,{key:0})):E("",!0),(ie=e.positionInfo)!=null&&ie.is_pause?(a(),G(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:se(()=>[qs]),_:1})):e.wallet.connected?(a(),G(t,{key:2,class:"big-btn liquidity-btn",disabled:e.addLiquidityBtnDisabled,onClick:i[14]||(i[14]=P=>e.isShowAddModal=!0)},{default:se(()=>[o("span",null,v(e.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(a(),G(t,{key:3,class:"big-btn liquidity-btn",onClick:i[15]||(i[15]=P=>e.wallet.setIsShowWalletModal(!0))},{default:se(()=>[o("span",null,v(e.$t("button.connectWallet")),1)]),_:1})),(((ue=e.positionInfo)==null?void 0:ue.quoteUSD)==0||Number((V=e.positionInfo)==null?void 0:V.remainingTokenUSD)>Number(e.totalAmountUSD))&&(Number(e.fromCoinAmount)>0||Number(e.toCoinAmount)>0)?(a(),b(Ye,{key:4},[e.positionInfo.supportHaedalStake&&e.isOnlyB||e.onlyTokenUSD<=1e4?(a(),b("div",Rs,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount>0||e.isOnlyB&&e.toCoinAmount>0)?(a(),b("div",Bs,v(e.onlyText),1)):E("",!0),o("div",Ds,[Ls,e.calculateLoading?(a(),G(R,{key:1,paragraph:!1,active:""})):(a(),b("span",Us,v(Number(e.totalAmountUSD)>0&&Number(e.totalAmountUSD)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:w(T))(e.totalAmountUSD,2)}`),1))]),o("div",Ms,[Os,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),b("span",Fs,v(e.shareOfPool)+"%",1)):(a(),G(R,{key:1,paragraph:!1,active:""}))]),o("div",Vs,[Hs,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),b("span",Es,v(("addCommom"in e?e.addCommom:w(T))(e.minimumReceivedLP))+" "+v(e.needReverse?(oe=e.toCoin)==null?void 0:oe.symbol:(ye=e.fromCoin)==null?void 0:ye.symbol)+"-"+v(e.needReverse?(ce=e.fromCoin)==null?void 0:ce.symbol:(re=e.toCoin)==null?void 0:re.symbol),1)):(a(),G(R,{key:1,paragraph:!1,active:""}))])])):e.positionInfo.supportHaedalStake&&!e.isOnlyB&&e.onlyTokenUSD>1e4||!e.positionInfo.supportHaedalStake&&e.onlyTokenUSD>1e4?(a(),b("div",Ws,Xs)):E("",!0)],64)):E("",!0),e.isShowAddModal?(a(),G(f,{key:5,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:i[16]||(i[16]=P=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):E("",!0)])}const Gs=Ve(gs,[["render",zs],["__scopeId","data-v-b1d46143"]]),Ys=je({components:{AutoPoolRemoveModal:Jo,AutoPoolV2PoolStatus:ln},setup(){const e=bo(),i=k(()=>e),j=yo(),W=k(()=>j),N=k(()=>f.value.slippage),q=k(()=>W.value.chainName),p=_n(),S=k(()=>p),I=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],u=g(25),t=xe(),R=Qe(),f=k(()=>R),n=k(()=>f.value.positionInfoObj[t.params.id]),d=k(()=>{var s;return(s=n.value)==null?void 0:s.needReverse}),m=g(),h=g(),C=g(!1),r=g(),M=k(()=>{var s;return(s=n.value)==null?void 0:s.myLiquidity}),U=g(!0),O=k(()=>q.value?Go(q.value):{}),ee=g(),le=g(),ne=zo("Sui"),$=g(""),_=g(""),Z=g("--"),te=g(!1),ie=g(!1),ue=g(),V=g(!0),oe=g(),ye=eo(),ce=k(()=>ye),re=k(()=>ce.value.RATES),P=g(!1),B=async()=>{if(U.value||!n.value||n.value.positionLiquidity==0)return;le.value=!1,P.value=!0;const s=n.value.autoPoolPositionInfo.tick_lower_index,D=n.value.autoPoolPositionInfo.tick_upper_index,ae=We.sqrtPriceX64ToTickIndex(new pe(n.value.current_sqrt_price));ae<s&&(d.value?te.value=!0:ie.value=!0),ae>D&&(d.value?ie.value=!0:te.value=!0);let K;if($.value||_.value){V.value?K=new l($.value).mul(Math.pow(10,m.value.decimals)).toString():K=new l(_.value).mul(Math.pow(10,h.value.decimals)).toString();let Q,H=V.value;if(y.value||Y.value){y.value?Number($.value)/Number(c.value):Number(_.value)/Number(c.value);const x=await ne.calculateRemoveSwapAmount({lowerTick:s,upperTick:D,curSqrtPrice:new pe(n.value.current_sqrt_price),fix_amount_a:H,receiveAmount:K,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(N.value)/100,decimals:y.value?m.value.decimals:h.value.decimals,liquidity:$.value==c.value||_.value==c.value?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:K});if(x){if(x.request_id!==K)return;ee.value=x.is_exceed,K=new pe(x.swapOutAmount),Q=n.value.current_sqrt_price,ue.value={swap_amount:x.swapInAmount,liquidity:x.liquidity,a2b:!H,route_obj:x.route_obj},H=!H;const Ne=n.value.token_a.decimals,_e=n.value.token_b.decimals,qe=new l(x.swapInAmount).div(new l(Math.pow(10,Ne))).toString(),Je=A(new l(x.swapOutAmountLimit).div(new l(Math.pow(10,_e))).toString(),_e),Ce=d.value?n.value.token_b.symbol:n.value.token_a.symbol,Be=d.value?n.value.token_a.symbol:n.value.token_b.symbol;oe.value=$.value==c.value||_.value==c.value?`To withdraw ${T(y.value?$.value:_.value)} ${y.value?Ce:Be},
          ${T(y.value?n.value.amountB:n.value.amountA)} ${y.value?Be:Ce} 
           in the pool will be traded for ${qe} ${y.value?Ce:Be}`:`To withdraw ${T(y.value?$.value:_.value)} ${y.value?Ce:Be},
          ${T(qe)} ${y.value?Be:Ce}  in the pool will be traded for ${T(Je)} ${y.value?Ce:Be}`}else{le.value=!0,oe.value="";return}}else ee.value=!1,Q=n.value.current_sqrt_price,K=new pe(K);const{liquidityAmount:me,tokenMaxA:J,tokenMaxB:z}=O.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:m.value,tokenB:h.value,lowerTick:s,upperTick:D,coinAmount:K,iscoinA:H,roundUp:!1,slippage:Number(N.value)/100,curSqrtPrice:new pe(Q)});if(!y.value&&!Y.value&&(V.value?_.value=Number(z)>0?z:"":$.value=Number(J)>0?J:""),(y.value||Y.value)&&(Number($.value)>=Number(c.value)||Number(_.value)>=Number(c.value))){r.value=n.value.myLiquidity;const x=new l(100);Z.value=new l(n.value.myLiquidity).mul(new l(Math.pow(10,n.value.lpInfo.decimals))).toString(),ve.value=me.toString(),u.value=x.toNumber()}else{const x=Co.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},me.toString()),Ne=new l(x).div(new l(Math.pow(10,n.value.lpInfo.decimals))).toString(),_e=new l(Ne).div(new l(M.value)).mul(100);r.value=new l(M.value).mul(_e.div(100)).toString(),Z.value=x,ve.value=me.toString(),u.value=_e.toNumber()}P.value=!1}},ve=g(),de=k(()=>{var s;return(s=n==null?void 0:n.value)==null?void 0:s.amountA}),fe=k(()=>{var s;return(s=n==null?void 0:n.value)==null?void 0:s.amountB}),y=g(!1),Y=g(!1),Ae=k(()=>{var H,me,J,z;const s=(me=re.value[(H=m==null?void 0:m.value)==null?void 0:H.address])==null?void 0:me.price,D=(z=re.value[(J=h==null?void 0:h.value)==null?void 0:J.address])==null?void 0:z.price;let ae=$.value!=="--"&&$.value!==""?$.value:0,K=_.value!=="--"&&_.value!==""?_.value:0,Q;return s&&D&&(y.value||Y.value?Q=new l(y.value?ae:K).mul(new l(y.value?s:D)).toString():Q=new l(ae).mul(new l(s)).add(new l(K).mul(new l(D))).toString()),Q>0&&Q<.01?"<$0.01":`$${T(A(Q,2))}`}),be=async s=>{var Ne,_e,qe,Je,Ce,Be,$o,Do,Lo,Uo,Mo;if(!U.value)return;U.value=!0,le.value=!1,(_e=(Ne=n.value)==null?void 0:Ne.token_a)==null||_e.decimals,(Je=(qe=n.value)==null?void 0:qe.token_b)==null||Je.decimals;const D=(Ce=n.value)==null?void 0:Ce.tick_lower_index,ae=(Be=n.value)==null?void 0:Be.tick_upper_index;We.tickIndexToSqrtPriceX64(D),We.tickIndexToSqrtPriceX64(ae);const K=(Do=($o=n.value)==null?void 0:$o.autoPoolPositionInfo)==null?void 0:Do.tick_lower_index,Q=(Uo=(Lo=n.value)==null?void 0:Lo.autoPoolPositionInfo)==null?void 0:Uo.tick_upper_index,H=We.sqrtPriceX64ToTickIndex(new pe((Mo=n==null?void 0:n.value)==null?void 0:Mo.current_sqrt_price));H<K&&(d.value?te.value=!0:ie.value=!0),H>Q&&(d.value?ie.value=!0:te.value=!0);let me="",J,z,x=V.value;if(y.value||Y.value&&!te.value&&!ie.value){if(y.value){const no=new l(c.value).mul(Math.pow(10,m.value.decimals)).mul(s.value).toString();z=A(no,0),$.value=A(new l(c.value).mul(s.value).toString(),m.value.decimals)}if(Y.value){const no=new l(c.value).mul(s.value).mul(Math.pow(10,h.value.decimals)).toString();z=A(no,0),_.value=A(new l(c.value).mul(s.value).toString(),h.value.decimals)}const Oe=await ne.calculateRemoveSwapAmount({lowerTick:D,upperTick:ae,curSqrtPrice:new pe(n.value.current_sqrt_price),fix_amount_a:x,receiveAmount:z,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(N.value)/100,decimals:y.value?m.value.decimals:h.value.decimals,liquidity:s.value==1?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:z});if(Oe){if(Oe.request_id!==z)return;ee.value=Oe.is_exceed,z=new pe(Oe.swapOutAmount),n.value.current_sqrt_price,ue.value={swap_amount:Oe.swapInAmount,liquidity:Oe.liquidity,route_obj:Oe.route_obj,a2b:!x},x=!x;const no=n.value.token_a.decimals,Oo=n.value.token_b.decimals,un=new l(Oe.swapInAmount).div(new l(Math.pow(10,no))).toString(),Fo=A(new l(Oe.swapOutAmountLimit).div(new l(Math.pow(10,Oo))).toString(),Oo),lo=d.value?n.value.token_b.symbol:n.value.token_a.symbol,uo=d.value?n.value.token_a.symbol:n.value.token_b.symbol;oe.value=s.value==1?`To withdraw ${T(y.value?$.value:_.value)} ${y.value?lo:uo},
          ${T(y.value?n.value.amountB:n.value.amountA)} ${y.value?uo:lo}  in the pool will be traded for ${T(Fo)} ${y.value?lo:uo}`:`To withdraw ${T(y.value?$.value:_.value)} ${y.value?lo:uo},
          ${T(un)} ${y.value?uo:lo}  in the pool will be traded for ${T(Fo)} ${y.value?lo:uo}`,me=Oe.liquidity}else n.value.current_sqrt_price,z=new pe(z),oe.value="",le.value=!0;Z.value=new l(n.value.myLiquidity).mul(new l(s.value)).toString(),r.value=new l(Z.value),ve.value=me}else{ee.value=!1;const Oe=new l(de.value).mul(Math.pow(10,m.value.decimals)).mul(s.value).toString();z=A(Oe,0),$.value=A(new l(de.value).mul(s.value).toString(),m.value.decimals);const no=new l(fe.value).mul(s.value).mul(Math.pow(10,h.value.decimals)).toString();z=A(no,0),_.value=A(new l(fe.value).mul(s.value).toString(),h.value.decimals),n.value.current_sqrt_price,z=new pe(z),s.value!==1?J=new l(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(s.value).toString():J=new l(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),r.value=new l(J).div(Math.pow(10,n.value.lpInfo.decimals)),me=Co.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},J),Z.value=A(J,0),ve.value=A(me,0)}};$e(u,vo((s,D)=>{s!==D&&(Number(s)>100?u.value=100:s&&n.value?(u.value=s,be({value:u.value/100})):($.value="",_.value=""))},300)),$e(()=>$.value,vo((s,D)=>{s?B():!y.value&&!Y.value&&(_.value="",u.value=0)},500),{immediate:!0}),$e(()=>_.value,vo((s,D)=>{s?B():!y.value&&!Y.value&&($.value="",u.value=0)},500),{immediate:!0});const Ue=To(),{setIsShowSuccess:Pe,setIsShowRejected:Re,setIsShowWaiting:we,setTransactionDesc:Ie,setTransactionTxid:oo,setPositiomNum:io,setTransactionDescText:so}=j,Ge=g(!1),{t:Te}=So(),ao=async()=>{var Ne,_e;Ge.value=!0,oo("");const s=Number($.value)>0?`${T($.value,m.value.decimals)} ${m.value.symbol}`:"",D=Number(_.value)>0?`${T(_.value,h.value.decimals)} ${h.value.symbol}`:"";Ie(Te("tips.removeLiquidiyText",{from:d.value?D:s,and:Number($.value)>0&&Number(_.value)>0?"and":"",to:d.value?s:D})),we(!0);const ae=Te("modal.removeLiquidityText2");so(ae);const K=n.value.autoPoolPositionInfo.tick_lower_index,Q=n.value.autoPoolPositionInfo.tick_upper_index,H=We.tickIndexToSqrtPriceX64(K),me=We.tickIndexToSqrtPriceX64(Q),J=n.value.rewarderInfo.map(qe=>qe.coinAddress);let z;V.value?z=new l($.value).mul(Math.pow(10,m.value.decimals)).toString():z=new l(_.value).mul(Math.pow(10,h.value.decimals)).toString();const x={lowerSqrtPrice:H,upperSqrtPrice:me,lpTokenAmount:Z.value,liquidity:ve.value,curSqrtPrice:new pe(n.value.object.current_sqrt_price),slippage:Number(N.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:J,swapParams:ue.value,fix_amount_a:V.value,isOnlyA:!te.value&&!ie.value?y.value:!1,isOnlyB:!ie.value&&!te.value?Y.value:!1,lowerTick:K,upperTick:Q,receiveAmount:z,sliderVal:u.value,positionInfo:n.value,maxLiquidity:n.value.positionLiquidity,farming_pool:n.value.autoPoolPositionInfo.pool_id};try{const qe=await ne.remove(x),Je=await O.value.signAndExecuteTransactionBlock(i.value.currentWallet,qe);let Ce=O.value.handleTx(Je);if(Ce&&Ce.hash){oo(Ce.hash),we(!1),Pe(!0);const Be={title:Te("common.removeLiquidity"),desc:"",hash:Ce.hash,descTransactions:`Remove ${s} ${Number($.value)>0&&Number(_.value)>0?"and":""} ${D} from the pool`,sender:i.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${$.value} ${(Ne=m.value)==null?void 0:Ne.symbol} and ${_.value} ${(_e=h.value)==null?void 0:_e.symbol}`};Be.res=Ce.res,O.value.showTransitionPending(Be),await O.value.watchTransaction(Be)&&($.value="",_.value="",r.value="",u.value=0,setTimeout(()=>{R.updatePositionItem(n.value.id),O.value.getAccount(i.value.address)},1e3),Number(u.value)==100&&t.name=="auto-pool-detail"&&Ue.push("/vaults"))}else we(!1),Re(!0);Ge.value=!1}catch{Ge.value=!1,we(!1),Re(!0)}};$e(()=>n.value,(s,D)=>{s&&!Ke(s)&&(m.value=s==null?void 0:s.token_a,h.value=s==null?void 0:s.token_b,(!D||D&&D.address!==s.address)&&(u.value=u.value>0?u.value:25,be({value:u.value/100})),D&&D.current_sqrt_price!==s.current_sqrt_price&&(U.value?be({value:u.value/100}):B()))},{immediate:!0});const He=k(()=>{if(n.value.positionLiquidity==0)return"Insufficient LP Amount";const s=Number(r.value)>Number(M.value);return!$.value&&!_.value||!r.value||r.value<=0||!$.value&&y.value||!_.value&&Y.value?Te("button.enterAmount"):s?"Invalid Amount":ee.value?Te("button.insufficientLiquidity"):le.value?Te("button.enterAmount"):y.value&&Number($.value)>Number(c.value)||Y.value&&Number(_.value)>Number(c.value)?"Invalid Amount":Te("button.remove")}),Me=k(()=>{if(n.value.positionLiquidity==0)return!0;const s=Number(r.value)>Number(M.value);return!!(!$.value&&!_.value||Number($.value)<=0&&y.value||Number(_.value)<=0&&Y.value||!r.value||r.value<=0||s||ee.value||F.value!=="STATUS_RUNNING"||le.value||y.value&&Number($.value)>Number(c.value)||Y.value&&Number(_.value)>Number(c.value))}),go=s=>(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||ro("/image/coins/sui-unknown.png"),_o=s=>{$.value="",_.value="",U.value=!0,oe.value="",s=="only-a"?(y.value=!y.value,Y.value=!1,V.value=!0):(Y.value=!Y.value,y.value=!1,V.value=!1)},Ro=s=>{U.value=!0,u.value=100,s==="fromCoin"?V.value=!0:V.value=!1},Bo=s=>{U.value=!0,u.value=50,s==="fromCoin"?V.value=!0:V.value=!1},c=g(),X=async()=>{const s=n.value.token_a.decimals,D=n.value.token_b.decimals,ae=new l(de.value).mul(new l(Math.pow(10,s))).toNumber(),K=new l(fe.value).mul(new l(Math.pow(10,D))).toNumber(),Q=y.value?K:ae,H=y.value?h.value.address===n.value.token_a.address:m.value.address===n.value.token_a.address;try{const me=await S.value.swapRouterContract.getSwapRouter(y.value?h:m,y.value?m:h,Q,!0,Number(N.value)/100,"",void 0,[{pool_id:n.value.address,tick_lower:n.value.autoPoolPositionInfo.tick_lower_index,tick_upper:n.value.autoPoolPositionInfo.tick_upper_index,delta_liquidity:Number(n.value.positionLiquidity),is_increase:!1}]),J=new l(me.amountOut);c.value=J.sub(J.mul(Number(N.value)/100)).add(new l(y.value?de.value:fe.value)).toString()}catch{if(y.value||Y.value){let J=await O.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:H,byAmountIn:!0,amount:Q});const z=new l(J.estimatedAmountOut);c.value=z.sub(z.mul(Number(N.value)/100)).add(new l(y.value?de.value:fe.value)).toString(),y.value?$.value=A(new l(c.value).mul(u.value/100).toString(),m.value.decimals):_.value=A(new l(c.value).mul(u.value/100).toString(),h.value.decimals),be({value:u.value/100})}}be({value:u.value/100})};$e(()=>[y.value,Y.value,de.value,fe.value],([s,D])=>{s||D?X():be({value:u.value/100})},{immediate:!0});const ke=s=>`${s}%`,F=k(()=>f.value.currentAutoPoolStatus),he=g(),ge=()=>{he.value=window.setInterval(()=>{($.value||_.value)&&!U.value?B():be({value:u.value/100})},2e4)};return co(()=>{ge()}),Po(()=>{window.clearInterval(he.value)}),{removeLiquidityBtnText:He,removeLiquidityBtnDisabled:Me,wallet:i,ratioArr:I,positionInfo:n,isShowRemoveModal:C,needReverse:d,fromCoin:m,toCoin:h,lpAmount:r,lpBalance:M,sliderVal:u,sFixD:A,isSlider:U,fromCoinAmount:$,toCoinAmount:_,setPercent:be,toRemove:ao,addCommom:T,getCoinIcon:go,isOnlyA:y,isOnlyB:Y,onlyToken:_o,fixedFromCoin:V,maxBtnSelect:Ro,halfBtnSelect:Bo,fromCoinBlance:de,toCoinBlance:fe,showFromCoinLock:te,showToCoinLock:ie,removeText:oe,onlyTokenBalance:c,totalWithdraw:Ae,formatter:ke,currentAutoPoolStatus:F,calculateLoading:P}}});const ho=e=>(Xe("data-v-28b3865b"),e=e(),ze(),e),Ks={class:"auto-pool-add"},Qs={class:"auto-pool-add-content"},Zs={class:"liquidity-action-tab"},Js=ho(()=>o("div",{class:"remove tab-active"},"Remove",-1)),xs={key:0,class:"card-item"},ea={key:1,class:"card-item"},oa={class:"remove-ratio"},na={class:"remove-ratio-select"},ta={key:0,class:"ratio"},ia={key:1,class:"ratio"},sa={class:"ratio-list"},aa=["onClick"],la=ho(()=>o("span",null,"Pool Closed",-1)),ua={key:4,class:"remove-info"},ra={key:0,class:"remove-text total-amount"},da={class:"total-amount"},va=ho(()=>o("span",null,"Total Withdraw",-1)),ma={key:0},pa={class:"total-amount"},ca=ho(()=>o("span",null,"LP Burn Amount",-1)),fa={key:0};function ya(e,i,j,W,N,q){var n,d,m,h,C;const p=Ko,S=Qo,I=Wo,u=to("AutoPoolV2PoolStatus"),t=Ao,R=Xo,f=Jo;return a(),b("div",Ks,[o("div",Qs,[o("div",Zs,[o("div",{class:"increase",onClick:i[0]||(i[0]=jo(r=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),Js]),o("div",{class:Se(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(a(),b("div",xs,[L(p,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":i[1]||(i[1]=r=>e.fromCoinAmount=r),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:i[2]||(i[2]=r=>e.maxBtnSelect("fromCoin")),onOnHalf:i[3]||(i[3]=r=>e.halfBtnSelect("fromCoin")),onOnInput:i[4]||(i[4]=r=>{e.isSlider=!1,e.fromCoinAmount=r}),onOnFocus:i[5]||(i[5]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(a(),G(S,{key:0})):E("",!0)])):E("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(a(),b("div",ea,[L(p,{modelValue:e.toCoinAmount,"onUpdate:modelValue":i[6]||(i[6]=r=>e.toCoinAmount=r),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:i[7]||(i[7]=r=>e.maxBtnSelect("toCoin")),onOnHalf:i[8]||(i[8]=r=>e.halfBtnSelect("toCoin")),onOnInput:i[9]||(i[9]=r=>{e.isSlider=!1,e.toCoinAmount=r}),onOnFocus:i[10]||(i[10]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(a(),G(S,{key:0})):E("",!0)])):E("",!0)],2),o("div",oa,[o("div",na,[Number(e.lpBalance)>=Number(e.lpAmount)?(a(),b("div",ta,v(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:w(A))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:w(A))(e.sliderVal,2))+"% ",1)):(a(),b("div",ia,"--")),o("div",sa,[(a(!0),b(Ye,null,po(e.ratioArr,(r,M)=>(a(),b("div",{key:M,class:Se(["ratio-item",e.sliderVal==r.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=r.value}},v(r.name),11,aa))),128))])]),L(I,{value:e.sliderVal,"onUpdate:value":i[11]||(i[11]=r=>e.sliderVal=r),"tip-formatter":e.formatter,onChange:i[12]||(i[12]=r=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(a(),G(u,{key:0})):E("",!0),(n=e.positionInfo)!=null&&n.is_pause?(a(),G(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:se(()=>[la]),_:1})):e.wallet.connected?(a(),G(t,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:i[13]||(i[13]=r=>e.toRemove())},{default:se(()=>[o("span",null,v(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(a(),G(t,{key:3,class:"big-btn liquidity-btn",onClick:i[14]||(i[14]=r=>e.wallet.setIsShowWalletModal(!0))},{default:se(()=>[o("span",null,v(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?E("",!0):(a(),b("div",ua,[e.removeText&&(e.isOnlyA&&Number(e.fromCoinAmount)>0||e.isOnlyB&&Number(e.toCoinAmount)>0)?(a(),b("div",ra,v(e.removeText),1)):E("",!0),o("div",da,[va,e.calculateLoading?(a(),G(R,{key:1,paragraph:!1,active:""})):(a(),b("span",ma,v(e.totalWithdraw),1))]),o("div",pa,[ca,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),b("span",fa,v(("addCommom"in e?e.addCommom:w(T))(("sFixD"in e?e.sFixD:w(A))(e.lpAmount,e.positionInfo.decimals)))+" "+v(e.needReverse?(d=e.toCoin)==null?void 0:d.symbol:(m=e.fromCoin)==null?void 0:m.symbol)+"-"+v(e.needReverse?(h=e.fromCoin)==null?void 0:h.symbol:(C=e.toCoin)==null?void 0:C.symbol),1)):(a(),G(R,{key:1,paragraph:!1,active:""}))])])),e.isShowRemoveModal?(a(),G(f,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:i[15]||(i[15]=r=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):E("",!0)])}const ba=Ve(Ys,[["render",ya],["__scopeId","data-v-28b3865b"]]),ka=je({components:{AutoPoolV2Info:en,AutoPoolV2PositionRange:on,AutoPoolV2PoolComposition:tn,AutoPoolV2PoolLiquidity:sn,AutoPoolV2PoolAdd:Gs,AutoPoolV2PoolRemove:ba},setup(){const e=Qe();eo();const i=yo(),j=k(()=>i),W=k(()=>e),N=xe(),q=g();$e(()=>[W.value.positionInfoObj,N.params.id],([f,n])=>{f&&!Ke(f)&&n&&(q.value=f[n])},{immediate:!0,deep:!0});const p=async()=>{e.getAutoPoolAPY(),e.getVault(N.params.id,"refresh")},S=g();$e(()=>N.query.action,f=>{f&&(S.value=f)},{immediate:!0}),co(()=>{e.getVault(N.params.id,!1)}),k(()=>j.value.chainName);const I=To(),u=bo(),t=k(()=>u);$e(()=>t.value.address,f=>{f||I.push("/vaults")},{immediate:!0});const R=k(()=>W.value.autoPoolLoading);return{clickRefresh:p,currentTab:S,positionInfo:q,autoPoolLoading:R}}});const ha={class:"auto-pool-detail-v2"},ga={class:"detail-top"},_a={class:"detail-bottom pc-detail"},$a={class:"detail-bottom-left"},wa={class:"detail-bottom-right"},Ia={class:"h5-detail"},Ca={key:0,class:"loading-global"};function Sa(e,i,j,W,N,q){const p=Vn,S=en,I=on,u=tn,t=sn,R=to("AutoPoolV2PoolAdd"),f=to("AutoPoolV2PoolRemove"),n=yn;return a(),b("div",ha,[o("div",ga,[L(p,{"pool-info":e.positionInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"]),L(S)]),o("div",_a,[o("div",$a,[L(I),L(u),L(t)]),o("div",wa,[e.currentTab=="deposit"?(a(),G(R,{key:0,onChangeCurrentTab:i[0]||(i[0]=d=>e.currentTab="remove")})):(a(),G(f,{key:1,onChangeCurrentTab:i[1]||(i[1]=d=>e.currentTab="deposit")}))])]),o("div",Ia,[e.currentTab=="deposit"?(a(),G(R,{key:0,onChangeCurrentTab:i[2]||(i[2]=d=>e.currentTab="remove")})):(a(),G(f,{key:1,onChangeCurrentTab:i[3]||(i[3]=d=>e.currentTab="deposit")})),L(I),L(u),L(t)]),e.autoPoolLoading?(a(),b("div",Ca,[L(n)])):E("",!0)])}const Qa=Ve(ka,[["render",Sa],["__scopeId","data-v-bfb85e4a"]]);export{Qa as default};
