import{_ as Po}from"./back.a45a5458.js";import{_ as Oo}from"./status-block.ed0b4bc2.js";import{a as Ie,L as ye,r as d,x as $e,b as Ce,e as w,af as Y,i as Ae,C as oo,H as O,f as Se,o as p,h as f,j as o,q as k,s as g,t as i,v as K,k as Q,S as no,p as Te,l as Ne,M as Uo,K as Lo,c as ge,z as P,B as so,G as jo,A as we,w as Z,N as Bo,f4 as Eo,f6 as Do,y as qo,f9 as q,fg as xe,Y as x,m as E,J as Fo,R as pe,W as eo,a0 as he,E as Wo,F as Ho,a1 as Mo,a2 as Vo,a4 as zo}from"./entry.642476c1.js";/* empty css              */import{_ as io,a as ao}from"./icon-arrow_2x.db44c7c5.js";import{_ as Go}from"./apr-tab.2e451952.js";import{_ as Jo}from"./apr-tips.210b1b20.js";import{p as Ko}from"./precision.1cd464a0.js";import"./index.d78e7609.js";const Yo=Ie({props:{positionInfo:{type:Object,required:!0}},setup(e){const{t:c}=ye();let U=d(!1),F=d(!0);const L=$e(),j=Ce(),r=w(()=>j),v=w(()=>{var a,y,s,h,V,z,X,B;const S=e.positionInfo.amountA*((y=r.value.RATES[(a=e.positionInfo)==null?void 0:a.token_a.address])==null?void 0:y.price),T=e.positionInfo.amountB*((h=r.value.RATES[(s=e.positionInfo)==null?void 0:s.token_b.address])==null?void 0:h.price);return((z=r.value.RATES[(V=e.positionInfo)==null?void 0:V.token_a.address])==null?void 0:z.price)&&((B=r.value.RATES[(X=e.positionInfo)==null?void 0:X.token_b.address])==null?void 0:B.price)?S+T:" --"}),_=w(()=>{var S,T,a,y;return((T=r.value.RATES[(S=e.positionInfo)==null?void 0:S.token_a.name.toUpperCase()])==null?void 0:T.price)&&v.value!=="--"?(e.positionInfo.amountA*((y=r.value.RATES[(a=e.positionInfo)==null?void 0:a.token_a.name.toUpperCase()])==null?void 0:y.price)/v.value*100).toFixed(0):" --"}),W=w(()=>{var S,T,a,y;return((T=r.value.RATES[(S=e.positionInfo)==null?void 0:S.token_b.name.toUpperCase()])==null?void 0:T.price)&&v.value!=="--"?(e.positionInfo.amountB*((y=r.value.RATES[(a=e.positionInfo)==null?void 0:a.token_b.name.toUpperCase()])==null?void 0:y.price)/v.value*100).toFixed(0):" --"}),H=w(()=>r.value.tokensObj&&e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.address&&r.value.tokensObj[e.positionInfo.token_a.address]&&r.value.tokensObj[e.positionInfo.token_a.address].logoURI),M=w(()=>r.value.tokensObj&&e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.address&&r.value.tokensObj[e.positionInfo.token_b.address]&&r.value.tokensObj[e.positionInfo.token_b.address].logoURI);return{fromPercent:W,toPercent:_,amountUSD:v,showNum:Y,t:c,importIcon:Ae,indexStore:L,rateChange:F,decimalFormat:oo,fromCoinUrl:H,toCoinUrl:M,pools:r,addCommom:O,isPc:U}}});const Qo=e=>(Te("data-v-82a556ef"),e=e(),Ne(),e),Xo={class:"position-card"},Zo={class:"coin-pair"},xo=["src"],en=["src"],on={class:"fee"},nn={class:"right"},sn={key:0,class:"status"},an={class:"min-and-max"},tn={key:0},rn={class:"text"},ln={key:0,src:io,alt:""},dn={key:1,src:ao,alt:""},un={class:"text"},cn={key:1},pn={class:"text"},mn={key:0,src:io,alt:""},fn={key:1,src:ao,alt:""},vn={class:"text"},_n=Qo(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),kn=[_n],bn={class:"liquidity"},wn={class:"label"},hn={class:"value"},gn={class:"token-num"},In={class:"item"},yn=["src"],$n={class:"rate"},Cn={class:"item"},An=["src"],Sn={class:"rate"};function Tn(e,c,U,F,L,j){const r=no,v=Oo;return p(),f("div",Xo,[o("div",{class:K(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[k(r,{class:"left-skeleton",loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:g(()=>[o("div",Zo,[o("div",null,[o("img",{src:e.fromCoinUrl||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,xo),o("img",{src:e.toCoinUrl||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,en)]),o("span",null,i(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" - "+i(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)]),o("div",on,i(e.$t("common.fee"))+" "+i(e.positionInfo.fee)+"%",1)]),_:1},8,["loading"])],2),o("div",nn,[e.pools.currentPositionLoading?Q("",!0):(p(),f("div",sn,[k(v,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])])),k(r,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:g(()=>[o("div",an,[e.rateChange?(p(),f("div",tn,[o("div",rn,i(e.addCommom(e.decimalFormat(String(e.positionInfo.minPrice),6))),1),e.indexStore.theme=="default"?(p(),f("img",ln)):(p(),f("img",dn)),o("div",un,i(e.positionInfo&&e.positionInfo.maxPrice&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.addCommom(e.decimalFormat(String(e.positionInfo.maxPrice),6)))+" "+i(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol)+" per "+i(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol),1)])):(p(),f("div",cn,[o("div",pn,i(e.addCommom(e.decimalFormat(String(1/Number(e.positionInfo.maxPrice)),6))),1),e.indexStore.theme=="default"?(p(),f("img",mn)):(p(),f("img",fn)),o("div",vn,i(e.positionInfo&&e.positionInfo.maxPrice&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.addCommom(e.decimalFormat(String(1/Number(e.positionInfo.minPrice)),6),6))+" "+i(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" per "+i(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)])),(p(),f("svg",{class:"icon-change","aria-hidden":"true",onClick:c[0]||(c[0]=_=>e.rateChange=!e.rateChange)},kn))])]),_:1},8,["loading"]),o("div",bn,[k(r,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:g(()=>[o("div",wn,i(e.$t("common.liquidity")),1),o("div",hn," $"+i(e.amountUSD=="--"?"--":Number(e.amountUSD)==0?0:Number(e.amountUSD)<.01?"<0.01":e.addCommom(e.amountUSD,2)),1)]),_:1},8,["loading"])]),o("div",gn,[k(r,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:g(()=>[o("div",In,[o("div",null,[o("img",{src:e.fromCoinUrl||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,yn),o("p",null,i(e.showNum(e.positionInfo.amountA,e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.decimals)),1),o("span",null,i(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" "+i(e.positionInfo.token_a.labels&&e.positionInfo.token_a.labels[0]?`(${e.positionInfo.token_a.labels[0]})`:""),1)]),o("div",$n,i(e.addCommom(e.positionInfo.fromPercent,0))+"% ",1)]),o("div",Cn,[o("div",null,[o("img",{src:e.toCoinUrl||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,An),o("p",null,i(e.showNum(e.positionInfo.amountB,e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.decimals)),1),o("span",null,i(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_b.symbol)+" "+i(e.positionInfo.token_b.labels&&e.positionInfo.token_b.labels[0]?`(${e.positionInfo.token_b.labels[0]})`:""),1)]),o("div",Sn,i(e.addCommom(e.positionInfo.toPercent,0))+"%",1)])]),_:1},8,["loading"])])])])}const Nn=Se(Yo,[["render",Tn],["__scopeId","data-v-82a556ef"]]),Rn=Ie({components:{Modal:Uo},props:{positionInfo:{type:Object,required:!0},isLoading:{type:Boolean,required:!0}},setup(e,c){const{t:U,locale:F}=ye(),L=$e(),{copy:j}=L,r=()=>{c.emit("toClaim")},v=Ce(),_=w(()=>v),W=w(()=>_.value.tokensObj&&e.positionInfo.token_a.address&&_.value.tokensObj[e.positionInfo.token_a.address]&&_.value.tokensObj[e.positionInfo.token_a.address].logoURI),H=w(()=>_.value.tokensObj&&e.positionInfo.token_b.address&&_.value.tokensObj[e.positionInfo.token_b.address]&&_.value.tokensObj[e.positionInfo.token_b.address].logoURI);return{showNum:Y,fromCoinUrl:W,toCoinUrl:H,toClaim:r,t:U,addCommom:O,importIcon:Ae,store:L,copy:j}}});const Pn=e=>(Te("data-v-f6b71aa6"),e=e(),Ne(),e),On=Pn(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Un={class:"claim-container"},Ln={key:0,class:"pc-claim"},jn=["src"],Bn={key:1,class:"pc-claim"},En=["src"];function Dn(e,c,U,F,L,j){const r=so,v=Lo("Modal");return p(),ge(v,{visible:!0,class:"claim-fees",centered:"",closable:!0,title:e.$t("modal.claimFees"),width:"400px",footer:null,onCancel:c[0]||(c[0]=_=>e.$emit("onClose"))},{closeIcon:g(()=>[On]),default:g(()=>[o("div",Un,[e.positionInfo&&e.positionInfo.token_a.symbol?(p(),f("div",Ln,[o("img",{src:e.fromCoinUrl||e.importIcon(`/image/coins/${e.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,jn),o("span",null,i(e.showNum(e.positionInfo.feeOwedA,e.positionInfo.token_a.decimals))+" "+i(e.positionInfo.token_a.symbol),1)])):Q("",!0),e.positionInfo&&e.positionInfo.token_b.symbol?(p(),f("div",Bn,[o("img",{src:e.toCoinUrl||e.importIcon(`/image/coins/${e.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,En),o("span",null,i(e.showNum(e.positionInfo.feeOwedB,e.positionInfo.token_b.decimals))+" "+i(e.positionInfo.token_b.symbol),1)])):Q("",!0)]),k(r,{class:"big-btn claim-btn",disabled:e.isLoading||e.addCommom(e.positionInfo.feeOwedA,e.positionInfo.token_a.decimals)==0&&e.addCommom(e.positionInfo.feeOwedB,e.positionInfo.token_b.decimals)==0||e.positionInfo.poolInfo.is_pause,onClick:e.toClaim},{default:g(()=>[P(i(e.$t("common.claim")),1)]),_:1},8,["disabled","onClick"])]),_:1},8,["title"])}const qn=Se(Rn,[["render",Dn],["__scopeId","data-v-f6b71aa6"]]),Fn=Ie({setup(){const e=d(!1),c=d(!1),U=d(!1),F=d(!0),L=Ce(),j=d(""),r=d(""),v=d(""),_=d(7),W=d("Estimated APR"),H=d([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),M=d(!0),S=n=>{_.value=n.num},T=()=>{M.value=!M.value},a=w(()=>L),y=w(()=>{var u,l,m,I;const n=s.value.feeOwedA*((u=a.value.RATES[s.value&&s.value.token_a&&s.value.token_a.name.toUpperCase()])==null?void 0:u.price),t=s.value.feeOwedB*((l=a.value.RATES[s.value&&s.value.token_b&&s.value.token_b.name.toUpperCase()])==null?void 0:l.price);return((m=a.value.RATES[s.value&&s.value.token_a&&s.value.token_a.name.toUpperCase()])==null?void 0:m.price)&&((I=a.value.RATES[s.value&&s.value.token_b&&s.value.token_b.name.toUpperCase()])==null?void 0:I.price)?n+t:" --"}),s=d(a.value.currentPositionInfo||{}),h=jo();function V(){h.push(`/remove-liquidity?collect=${s.value.collectionName}&&token=${s.value.tokenName}&&address=${s.value.pool}`)}function z(){h.push(`/increase-liquidity?collect=${s.value.collectionName}&&token=${s.value.tokenName}&&address=${s.value.pool}`)}const X=()=>{me(),U.value=!0,setTimeout(()=>{U.value=!1},1e3)},B=we(),me=async()=>{a.value.setCurrentPositionLoading(!0);const n=h.currentRoute.value.query.token||"",t=h.currentRoute.value.query.collect||"";r.value=h.currentRoute.value.query.address||"",n&&t&&r.value&&(j.value=t,v.value=n,a.value.setCurrentPositionInfo(r.value,j.value,v.value))};Z(()=>a.value.addressLpTokens,n=>{x(n)||me()},{immediate:!0});const Re=d(""),Pe=d(""),Oe=d(""),N=$e(),G=w(()=>N),to=(n,t)=>n&&t?E(Ko.plus(he(n),he(t)),2)+"%":n,Ue=n=>{let t=0;return n&&n.forEach(u=>{t+=he(String(u))}),String(E(String(t),2))},Le=d(""),je=d("");Z(()=>[G.value.newTopPoolsObj,s.value],([n,t])=>{if(!x(n)&&!x(t)){const u=t.poolAddress,l=n[u];Re.value=l&&l.apr_7day,je.value=Ue(l&&l.rewarder_apr),Le.value=to(l&&l.apr_7day,l&&Ue(l.rewarder_apr)),Pe.value=l&&E(l.tvl_in_usd,2),Oe.value=l&&E(l.vol_in_usd_24h,2)}},{immediate:!0,deep:!0});const ro=Bo(),ee=w(()=>ro);Eo(()=>{ee.value.connected||h.push("/position")});const{t:fe}=ye(),{$notify:Be}=Do(),lo=async()=>{e.value=!0,c.value=!1,N.setTransactionDesc(fe("newAdd.claimWaitingText",{from:O(s.value.feeOwedA,s.value.token_a.decimals)==0?"":`${Y(s.value.feeOwedA,s.value.token_a.decimals)} ${s.value.token_a.symbol}`,and:O(s.value.feeOwedA,s.value.token_a.decimals)==0||O(s.value.feeOwedB,s.value.token_b.decimals)==0?"":"and",to:O(s.value.feeOwedB,s.value.token_b.decimals)==0?"":`${Y(s.value.feeOwedB,s.value.token_b.decimals)} ${s.value.token_b.symbol}`})),N.setIsShowWaiting(!0);let n;const t={pool:s.value.poolInfo,position:s.value},u=we();try{const l=await u.getCollectFeeTransactionPayload(t);if(n=await ee.value.currentWallet.signAndSubmitTransaction(l),n){N.setTransactionTxid(n.hash),N.setIsShowWaiting(!1),N.setIsShowSuccess(!0);const m={title:"Claim",desc:"",hash:n.hash,tit:`Claimed Fee: ${s.value.poolInfo.symbol}`,text:`Claim ${O(s.value.feeOwedA,s.value.token_a.decimals)==0?"":`${Y(s.value.feeOwedA,s.value.token_a.decimals)} ${s.value.token_a.symbol}`}  
              ${O(s.value.feeOwedA,s.value.token_a.decimals)==0||O(s.value.feeOwedB,s.value.token_b.decimals)==0?"":"and"} ${O(s.value.feeOwedB,s.value.token_b.decimals)==0?"":`${Y(s.value.feeOwedB,s.value.token_b.decimals)} ${s.value.token_b.symbol}`}
              
            `};u.showTransitionPending(m),await u.watchTransaction(m)&&setTimeout(()=>{me()},1e3)}else N.setIsShowWaiting(!1),N.setIsShowRejected(!0),Be.error({icon:q("svg",{class:{icon:!0},"aria-hidden":!0},[q("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),duration:4.5,message:q("div",{class:"notification-title"},[q("span",{innerHTML:xe.global.t("newAdd.claimFailed")},null)]),description:fe("newAdd.somethingWrong"),class:"ant-notification-copy ant-notification-error"});e.value=!1}catch{e.value=!1,N.setIsShowWaiting(!1),N.setIsShowRejected(!0),Be.error({icon:q("svg",{class:{icon:!0},"aria-hidden":!0},[q("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:q("div",{class:"notification-title"},[q("span",{innerHTML:xe.global.t("newAdd.claimFailed")},null)]),duration:4.5,description:fe("newAdd.somethingWrong"),class:"ant-notification-copy ant-notification-error"})}},ve=d(""),_e=d(""),uo=()=>{ve.value=s.value.token_b,_e.value=s.value.token_a},Ee=async()=>{const n=a.value.addressLpTokens[h.currentRoute.value.query.address],t=await B.getTickDataByIndex(n.ticks_handle,Number(s.value.tick_lower_index)),u=await B.getTickDataByIndex(n.ticks_handle,Number(s.value.tick_upper_index)),l=await B.getPosRewardersAmount({poolAddress:h.currentRoute.value.query.address,positionName:h.currentRoute.value.query.token,tickLowerData:t,tickUpperData:u}),m=[];let I=0;l.forEach((C,b)=>{if(s.value.poolInfo[`rewarder_display${b+1}`]){const $=a.value.newTokenObj[C.coin_address].decimals,D=a.value.newTokenObj[C.coin_address],J=Number(C.amount_owed.toString())/Math.pow(10,$),oe=a.value.RATES[a.value.newTokenObj[C.coin_address].name.toUpperCase()].price,re=J*oe;I+=re,m.push({...C,...D,amount:E(J,$),amountUSD:E(re,2)})}}),ae.value=m,ke.value=I,De.value=Number(E(I,2))};Z(()=>a.value.currentPositionInfo,n=>{n&&(s.value=a.value.currentPositionInfo,Ee(),ve.value=a.value.currentPositionInfo.token_a,_e.value=a.value.currentPositionInfo.token_b)},{immediate:!0});const co=w(()=>a.value.tokensObj&&s&&s.value.token_a&&s.value.token_a.address&&a.value.tokensObj[s.value.token_a.address]&&a.value.tokensObj[s.value.token_a.address].logoURI),po=w(()=>a.value.tokensObj&&s&&s.value.token_b&&s.value.token_b.address&&a.value.tokensObj[s.value.token_b.address]&&a.value.tokensObj[s.value.token_b.address].logoURI),mo=w(()=>G.value.chainName),fo=w(()=>Fo[mo.value]),ke=d(0),ae=d([]),De=d(0);qo(()=>{ke.value=0,ae.value=[],De.value=0});const{setIsShowSuccess:vo,setIsShowRejected:qe,setIsShowWaiting:be,setTransactionDesc:Fs,setTransactionTxid:_o}=N,te=d(!1),ko=async()=>{te.value=!0;const n=we(),t=ae.value;let u={coinTypeA:s.value.poolInfo.coinTypeA,coinTypeB:s.value.poolInfo.coinTypeB,coinTypeC:"",coinTypeD:"",coinTypeE:"",pool_address:s.value.poolAddress,pos_index:s.value.index,rewarder_nums:t.length};u.coinTypeC=t[0]?t[0].coin_address:"",u.coinTypeD=t[1]?t[1].coin_address:"",u.coinTypeE=t[2]?t[2].coin_address:"";try{const l=await n.getCollectRewarderTransactionPayload(u),m=await ee.value.currentWallet.signAndSubmitTransaction(l);if(m&&m.hash){_o(m.hash),be(!1),vo(!0);const I=t[0].amount+t[0].symbol,C=u.coinTypeD?" and "+t[1].amount+t[1].symbol:"",b=u.coinTypeE?" and "+t[2].amount+t[2].symbol:"",$={title:"Claim",desc:"",hash:m.hash,tit:`Claimed Rewards: ${s.value.poolInfo.symbol}`,text:I+C+b};n.showTransitionPending($),await n.watchTransaction($)&&setTimeout(()=>{Ee(),n.getAccount(ee.value.address)},1e3)}else be(!1),qe(!0);te.value=!1}catch{te.value=!1,be(!1),qe(!0)}},Fe=d([]);Z(()=>[s.value,a.value.addressLpTokens,a.value.newTokenObj,G.value.newTopPoolsObj],([n,t,u,l])=>{if(!x(n)&&!x(t)&&!x(u)){const m=n.address,I=t[m];let C=I.rewarder_infos||[];const b=l[m],$=[];C.forEach((D,J)=>{I[`rewarder_display${J+1}`]&&$.push({...D,symbol:u[D.coinAddress].symbol,rewarderApr:b.rewarder_apr[J],logoUrl:u[D.coinAddress].logoURI})}),Fe.value=$}},{immediate:!0}),Z(()=>[s.value,a.value.addressLpTokens],([n,t])=>{const u=n==null?void 0:n.address,l=t[u];bo(l)});const R=d();Z(()=>a.value.RATES,n=>{n&&(R.value=n)},{immediate:!0});const We=d({}),bo=async n=>{var He,Me,Ve,ze,Ge,Je,Ke,Ye,Qe,Xe;const t=await B.getPool(n.address),u=s.value.tokenName,l=s.value.collectionName,m=await B.getPositionInfo(t,l,u);Number(n.current_tick_index),Number(m.tick_lower_index),Number(m.tick_upper_index),new pe(n.current_sqrt_price),new pe(n.liquidity);const I=n.token_a.decimals,C=n.token_b.decimals,b=a.value.newTokenObj;n.rewarder_infos[0]&&b[n.rewarder_infos[0].coinAddress].decimals,n.rewarder_infos[1]&&b[n.rewarder_infos[1].coinAddress].decimals,n.rewarder_infos[2]&&b[n.rewarder_infos[2].coinAddress].decimals,Number(n.fee_rate),String(s.value.amountA),String(s.value.amountB),new pe(1),new pe(1);const $=G.value.newTopPoolsObj[n.address]||[];String(E($?Number($==null?void 0:$.vol_in_usd):0,2)),n.rewarder_infos[0]&&String(n.rewarder_infos[0].emissionsEveryDay),n.rewarder_infos[1]&&String(n.rewarder_infos[1].emissionsEveryDay),n.rewarder_infos[2]&&String(n.rewarder_infos[2].emissionsEveryDay),(He=R.value[n.token_a.name.toUpperCase()])!=null&&He.price||((Me=R.value[n.token_a.address])==null||Me.price),(Ve=R.value[n.token_b.name.toUpperCase()])!=null&&Ve.price||((ze=R.value[n.token_b.address])==null||ze.price),n.rewarder_infos[0]&&((Ge=R.value[b[n.rewarder_infos[0].coinAddress].name.toUpperCase()])!=null&&Ge.price||((Je=R.value[b[n.rewarder_infos[0].coinAddress].address])==null||Je.price)),n.rewarder_infos[1]&&((Ke=R.value[b[n.rewarder_infos[1].coinAddress].name.toUpperCase()])!=null&&Ke.price||((Ye=R.value[b[n.rewarder_infos[1].coinAddress].address])==null||Ye.price)),n.rewarder_infos[2]&&((Qe=R.value[b[n.rewarder_infos[2].coinAddress].name.toUpperCase()])!=null&&Qe.price||((Xe=R.value[b[n.rewarder_infos[2].coinAddress].address])==null||Xe.price));const D=eo.tickIndexToPrice(m.tick_lower_index,I,C).toString(),J=eo.tickIndexToPrice(m.tick_upper_index,I,C).toString();let oe=[];oe=Object.fromEntries(G.value.addressHistTokens[n.poolAddress].data.map(Ze=>[Ze.key,Ze.value]));const re=Number(D),wo=Number(J),ho=Number(oe.before_7_d_contract_price_lowest),go=Number(oe.before_7_d_contract_price_highest),Io=await B.getEstPositionAPRWithMulti(re,wo,ho,go),le=Number(Io.toString()),A=G.value.newTopPoolsObj[n.poolAddress],yo=A.apr_7day?Number(A.apr_7day.substring(0,A.apr_7day.length-1)):0,$o=A.rewarder_apr[0]?Number(A.rewarder_apr[0].substring(0,A.rewarder_apr[0].length-1)):0,Co=A.rewarder_apr[1]?Number(A.rewarder_apr[1].substring(0,A.rewarder_apr[1].length-1)):0,Ao=A.rewarder_apr[2]?Number(A.rewarder_apr[2].substring(0,A.rewarder_apr[2].length-1)):0,ne=Number(le*yo),de=Number(le*$o),ue=Number(le*Co),ce=Number(le*Ao),se=ne+(n.rewarder_display1?de:0)+(n.rewarder_display2?ue:0)+(n.rewarder_display3?ce:0),So=n.rewarder_infos[0]?b[n.rewarder_infos[0].coinAddress].symbol:"--",To=n.rewarder_infos[1]?b[n.rewarder_infos[1].coinAddress].symbol:"--",No=n.rewarder_infos[2]?b[n.rewarder_infos[2].coinAddress].symbol:"--",Ro={aprFee:ne==1/0||isNaN(ne)?0:ne,rewardAprList:[{rewarder_name:So,rewarder_apr:de==1/0||isNaN(de)?0:de,styleName:"one",rewarder_display:n.rewarder_display1},{rewarder_name:To,rewarder_apr:ue==1/0||isNaN(ue)?0:ue,styleName:"two",rewarder_display:n.rewarder_display2},{rewarder_name:No,rewarder_apr:ce==1/0||isNaN(ce)?0:ce,styleName:"three",rewarder_display:n.rewarder_display3}],aprPercentageTotal:se==1/0||isNaN(se)||se===0?0:se,aprPercentage:E(ne/se,2),is_display_rewarder:n.is_display_rewarder};We.value=Ro};return{rewarderArr:Fe,feeOwed:y,config:fo,showNum:Y,index:G,fromCoinUrl:co,toCoinUrl:po,toggle:uo,fromCoin:ve,toCoin:_e,apr:Re,liquidityTvl:Pe,vol24:Oe,addCommom:O,decimalFormat:oo,wallet:ee,isLoading:e,toClaim:lo,pools:a,positionInfo:s,importIcon:Ae,router:h,toRemove:V,toIncrease:z,isShowClaim:c,direct:F,refresh:U,clickRefresh:X,pendingRewarderArr:ae,pendingRewarder:ke,toClaimRewards:ko,rewarderLoading:te,aprRewardsParameter:_,aprRewardsDateList:H,aprTab:S,reviseValue:T,label:M,aprTitle:W,aprTotal:Le,aprPercentageObj:We,rewardAprList:je}}});const ie=e=>(Te("data-v-ed9e891b"),e=e(),Ne(),e),Wn={key:0,class:"position-detail-container"},Hn={class:"position-detail-header"},Mn={class:"back-and-refresh"},Vn=ie(()=>o("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),zn=[Vn],Gn={class:"action-position"},Jn={class:"coin-pair"},Kn=ie(()=>o("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Yn=[Kn],Qn=["href"],Xn=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-jump"})],-1)),Zn=[Xn],xn={class:"acton-btn-box"},es=ie(()=>o("svg",{"aria-hidden":"true",class:"action-icon"},[o("use",{"xlink:href":"#icon-icon-Reduction"})],-1)),os=ie(()=>o("svg",{"aria-hidden":"true",class:"action-icon"},[o("use",{"xlink:href":"#icon-icon-add"})],-1)),ns={class:"position-content"},ss={class:"pedding-fee pedding-apr"},is={class:"pedding-fee"},as={class:"top"},ts={class:"left"},rs={class:"bottom"},ls=["src"],ds=["src"],us={key:0,class:"pedding-fee"},cs={class:"top"},ps={class:"left"},ms={class:"bottom"},fs=["src"],vs={class:"poolInfo"},_s={class:"pool-info-title"},ks={class:"currentPrice"},bs={key:0,class:"coin"},ws={key:1,class:"coin"},hs={class:"toggle"},gs=["src"],Is=["src"],ys={key:0},$s={class:"info-block-container"},Cs={class:"info-block"},As={class:"leabl"},Ss={class:"text"},Ts={class:"apr-hover-content"},Ns={class:"info-block"},Rs={class:"leabl"},Ps={class:"text"},Os={class:"info-block"},Us={class:"leabl"},Ls={class:"text"},js={class:"info-block"},Bs={class:"leabl"},Es={class:"text"},Ds={class:"loading-global"};function qs(e,c,U,F,L,j){const r=Po,v=so,_=no,W=Nn,H=Go,M=Jo,S=qn,T=zo;return e.positionInfo?(p(),f("div",Wn,[o("div",Hn,[o("div",Mn,[k(r),(p(),f("svg",{"aria-hidden":"true",class:K(e.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:c[0]||(c[0]=(...a)=>e.clickRefresh&&e.clickRefresh(...a))},zn,2))]),o("div",Gn,[k(_,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:g(()=>[o("div",Jn,[P(i(e.positionInfo.tokenName)+" ",1),(p(),f("svg",{class:"icon","aria-hidden":"true",onClick:c[1]||(c[1]=a=>e.index.copy(e.positionInfo.nftHash))},Yn)),o("a",{href:`https://explorer.aptoslabs.com/token/${e.positionInfo.nftHash}/0?network=${e.config.network}`,target:"_blank"},Zn,8,Qn)]),o("div",xn,[k(v,{class:K(["remove-liquidity action-btn",e.positionInfo.poolInfo.is_pause?"text-default":""]),disabled:e.positionInfo.poolInfo.is_pause,onClick:e.toRemove},{default:g(()=>[es,P(" "+i(e.$t("button.remove")),1)]),_:1},8,["class","disabled","onClick"]),k(v,{class:"increase-liquidity action-btn",disabled:e.positionInfo.poolInfo.is_pause,onClick:e.toIncrease},{default:g(()=>[os,P(" "+i(e.$t("button.increase")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["loading"])])]),o("div",ns,[k(W,{"position-info":e.positionInfo},null,8,["position-info"])]),o("div",ss,[(p(),ge(H,{key:0,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"apr-percentage-obj":e.aprPercentageObj,"name-tab":"position",onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","apr-percentage-obj","onAprTab"]))]),o("div",is,[o("div",as,[o("div",ts,[o("span",null,i(e.$t("newAdd.pendingFees")),1),o("p",null," $"+i(e.feeOwed=="--"?"--":Number(e.feeOwed)==0?0:Number(e.feeOwed)<.01?"<0.01":e.addCommom(e.feeOwed,2)),1)]),k(v,{class:"increase-liquidity action-btn",disabled:e.isLoading||!e.wallet.connected||!(Number(e.positionInfo&&e.positionInfo.feeOwedA)||Number(e.positionInfo&&e.positionInfo.feeOwedB))||e.positionInfo.poolInfo.is_pause,onClick:c[2]||(c[2]=a=>e.isShowClaim=!0)},{default:g(()=>[P(i(e.$t("common.claim")),1)]),_:1},8,["disabled"])]),k(_,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:g(()=>[o("div",rs,[o("div",null,[o("img",{src:e.fromCoinUrl},null,8,ls),o("p",null,i(e.showNum(e.positionInfo.feeOwedA,e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.decimals)),1),o("span",null,i(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol),1)]),o("div",null,[o("img",{src:e.toCoinUrl},null,8,ds),o("p",null,i(e.showNum(e.positionInfo.feeOwedB,e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.decimals)),1),o("span",null,i(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)])])]),_:1},8,["loading"])]),e.positionInfo&&e.positionInfo.poolInfo&&e.positionInfo.poolInfo.rewarder_infos&&e.positionInfo.poolInfo.rewarder_infos.length>0&&e.positionInfo.poolInfo.is_display_rewarder&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(p(),f("div",us,[o("div",cs,[o("div",ps,[o("span",null,i(e.$t("newAdd.pendingRewards")),1),o("p",null," $"+i(e.pendingRewarder=="--"?"--":Number(e.pendingRewarder)==0?0:Number(e.pendingRewarder)<.01?"<0.01":e.addCommom(e.pendingRewarder,2)),1)]),k(v,{class:"increase-liquidity action-btn",disabled:e.rewarderLoading||!e.wallet.connected||e.pendingRewarder<=0||e.positionInfo.poolInfo.is_pause,loading:e.rewarderLoading,onClick:e.toClaimRewards},{default:g(()=>[P(i(e.$t("common.claim")),1)]),_:1},8,["disabled","loading","onClick"])]),k(_,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:g(()=>[o("div",ms,[(p(!0),f(Mo,null,Vo(e.pendingRewarderArr,a=>(p(),f("div",{key:a,class:K(Number(a==null?void 0:a.amount)==0?"reward-none":"")},[o("img",{src:a.logoURI,alt:""},null,8,fs),o("p",null,i(Number(a.amount)),1),o("span",null,i(a.symbol),1)],2))),128))])]),_:1},8,["loading"])])):Q("",!0),o("div",vs,[o("div",_s,i(e.$t("newAdd.poolInfo")),1),o("div",ks,[k(_,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:g(()=>{var a,y,s,h,V,z;return[e.direct?(p(),f("div",bs,[o("span",null,i(e.$t("common.currentPrice")),1),P(" "+i(e.addCommom(e.decimalFormat(e.positionInfo.currentPrice,6),6))+" "+i((a=e.toCoin)==null?void 0:a.symbol)+" per "+i((y=e.fromCoin)==null?void 0:y.symbol),1)])):(p(),f("div",ws,[o("span",null,i(e.$t("common.currentPrice")),1),P(" "+i(e.addCommom(e.decimalFormat(1/e.positionInfo.currentPrice,6),6))+" "+i((s=e.fromCoin)==null?void 0:s.symbol)+" per "+i((h=e.toCoin)==null?void 0:h.symbol),1)])),o("div",hs,[o("div",{class:K(e.direct?"item active-item":"item"),onClick:c[3]||(c[3]=X=>e.direct=!0)},[o("img",{src:e.fromCoinUrl,alt:""},null,8,gs),P(" "+i(e.positionInfo&&e.positionInfo.token_a&&((V=e.positionInfo.token_a)==null?void 0:V.symbol)),1)],2),o("div",{class:K(e.direct?"item ":"item active-item"),onClick:c[4]||(c[4]=X=>e.direct=!1)},[o("img",{src:e.toCoinUrl,alt:""},null,8,Is),P(" "+i(e.positionInfo&&e.positionInfo.token_b&&((z=e.positionInfo.token_b)==null?void 0:z.symbol)),1)],2)])]}),_:1},8,["loading"])]),k(_,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:g(()=>[e.aprTotal&&e.liquidityTvl&&e.vol24?(p(),f("div",ys,[o("div",$s,[o("div",Cs,[o("div",As,i(e.$t("common.apr")),1),o("div",Ss,[P(i(e.aprTotal?e.addCommom(e.aprTotal.substring(0,e.aprTotal.length-1),2):0)+"% ",1),o("div",Ts,[k(M,{class:K(e.isShow?"showHover apr-hover-con":"noHover apr-hover-con"),"l-item":{apr:e.apr,rewarder_apr:e.rewardAprList,aprTotal:e.aprTotal,is_display_rewarder:e.positionInfo.poolInfo.is_display_rewarder},"rewarder-info":e.rewarderArr},null,8,["class","l-item","rewarder-info"])])])]),o("div",Ns,[o("div",Rs,i(e.$t("common.liquidity")),1),o("div",Ps,"$"+i(e.addCommom(e.liquidityTvl,2)),1)]),o("div",Os,[o("div",Us,i(e.$t("common.volume24h")),1),o("div",Ls,"$"+i(e.addCommom(e.vol24,2)),1)]),o("div",js,[o("div",Bs,i(e.$t("newAdd.tickSpacing")),1),o("div",Es,i(e.positionInfo.tickSpacing),1)])])])):Q("",!0)]),_:1},8,["loading"])]),e.isShowClaim?(p(),ge(S,{key:1,"is-loading":e.isLoading,"position-info":e.positionInfo,onOnClose:c[5]||(c[5]=a=>e.isShowClaim=!1),onToClaim:e.toClaim},null,8,["is-loading","position-info","onToClaim"])):Q("",!0),Wo(o("div",Ds,[k(T)],512),[[Ho,e.pools.currentPositionLoading]])])):Q("",!0)}const Qs=Se(Fn,[["render",qs],["__scopeId","data-v-ed9e891b"]]);export{Qs as default};
