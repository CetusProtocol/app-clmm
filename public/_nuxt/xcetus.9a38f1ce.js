import{_ as nt}from"./xwhale-header.02b81f53.js";import{r as w,T as Oe,A as X,e as Y,o as m,f as T,h as n,t as y,j as B,l as ae,s as F,p as G,k as K,m as r,i as U,c as P,w as M,B as oe,K as Ve,u as Ie,x as fe,a as Be,a1 as at,a2 as ot,I as lt,S as st,M as it,v as ut,z as rt,F as Le,q as Me,E as dt,a3 as ct,a8 as mt}from"./entry.07f0a4d7.js";import{u as Ne,a as $e}from"./xcetus.8630dcbe.js";import{j as le,a as se,b as x,s as he,c as Fe,d as Ee,p as Z,u as He,v as ge,D as We}from"./pool.aceaded8.js";import{i as q}from"./import-icon.de3e6c66.js";import{_ as Xe}from"./xWHALE-icon.2df34cd4.js";import{_ as Ye}from"./WHALE-icon.28f954ba.js";import{_ as vt}from"./head-switch.51530a51.js";/* empty css              *//* empty css              */import{_ as gt}from"./icon-selected_3x.350736e2.js";/* empty css              *//* empty css              */import{_ as ft}from"./img-leverage_2x.1c577303.js";const ht={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,t){const i=w("--"),a=w("--"),C=w("--"),b=w("--");let c=null;Oe(()=>{window.clearInterval(c)});const S=()=>{const u=new Date().getTime()/1e3;Number(u)<=Number(e.startTime)&&o(e.startTime),Number(u)>Number(e.startTime)&&Number(u)<=Number(e.endTime)&&o(e.endTime)},o=u=>{clearInterval(c),window.clearInterval(c),c=setInterval(()=>{let p=new Date().getTime()/1e3,g=u-parseInt(String(p));if(g==0){t.emit("countDown"),clearInterval(c),window.clearInterval(c),c=null;return}else g<0&&(clearInterval(c),window.clearInterval(c),t.emit("countDown"),c=null);g--;let v=parseInt(String(g/60/60/24));v=v<10?"0"+v:v;let s=parseInt(String(g/60/60%24));s=s<10?"0"+s:s;let I=parseInt(String(g/60%60));I=I<10?"0"+I:I;let $=parseInt(String(g%60));$=$<10?"0"+$:$,i.value=v,a.value=s,C.value=I,b.value=$},1e3)};return X(()=>e.startTime,(u,p)=>{u!==p&&S()},{immediate:!0}),{day:i,hour:a,min:C,sec:b}}};const pt={class:"count-time"};function _t(e,t,i,a,C,b){return m(),T("div",pt,[n("p",null,y(a.day),1),B(" : "),n("p",null,y(a.hour),1),B(" : "),n("p",null,y(a.min),1),B(" : "),n("p",null,y(a.sec),1)])}const wt=Y(ht,[["render",_t],["__scopeId","data-v-8be4764c"]]),Ct={props:{titleText:{type:String,default:""},tipsText:{type:String,default:""},imgIcon:{type:String,default:""},value:{type:String,default:"--"}},setup(e){const{t}=ae();return{t}}};const bt=e=>(G("data-v-18a16c90"),e=e(),K(),e),St={class:"table-rewards"},yt={class:"text-top-all"},Tt={key:0,class:"icon-hover-box"},At=bt(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-information"})],-1)),kt={class:"tips-text-box"},It=["src"];function Bt(e,t,i,a,C,b){return m(),T("div",St,[n("div",yt,[n("p",null,y(i.titleText),1),i.tipsText?(m(),T("div",Tt,[At,n("div",kt,y(i.titleText=="est.APR"?"Estimated APR of the current epoch for all xCETUS holders.":"The number of qualified positions in this epoch."),1)])):F("",!0)]),n("span",null,[n("p",null,[i.imgIcon?(m(),T("img",{key:0,src:i.imgIcon,alt:""},null,8,It)):F("",!0),B(y(i.value),1)])])])}const Nt=Y(Ct,[["render",Bt],["__scopeId","data-v-18a16c90"]]),$t={setup(e){const{t}=ae(),i=Ne(),a=r(()=>i),C=r(()=>a.value.pendingAmount),b=r(()=>a.value.nextStartTime),c=r(()=>1683094391),S=r(()=>a.value.xcetusShare&&x(a.value.xcetusShare,2)),o=le(),u=r(()=>o),p=r(()=>a.value.cetusApr&&a.value.cetusApr>.01?x(he(a.value.cetusApr,2),2):x(a.value.cetusApr,2)),_=r(()=>a.value.pendingCoinInfo),g=w("");X(()=>_.value,f=>{f&&!Fe(f)?g.value=`Pending yield (${f.symbol})`:g.value="Pending yield"},{immediate:!0});const v=()=>{setTimeout(()=>{i.getDividendManager()},3e3)},s=r(()=>a.value.dividendManagerInfo),I=r(()=>{const f=parseInt(String(new Date().getTime()/1e3)),L=s.value.interval_day,Q=(f-Number(s.value.start_time))/(L*24*3600);return parseInt(String(Q))>0}),$=se(),ue=r(()=>$),{setIsShowSuccess:j,setIsShowRejected:re,setIsShowWaiting:W,setTransactionDesc:we,setTransactionTxid:de}=$,A=$e("Sui"),H=w(!1),Ce=r(()=>a.value.venft_id),J=r(()=>ue.value.chainName?Ee(ue.value.chainName):{});return{t,pendingAmount:C,nextStartTime:b,wallet:u,myShare:S,importIcon:q,nextEndTime:c,pendingYieldText:g,cetusApr:p,pendingCoinInfo:_,getNextEpoch:v,canClaim:I,claimPendingYield:async()=>{H.value=!0,W(!0),de(""),we(`${t("tips.claimingPendingYield")} ${C.value} ${_.value.symbol}`);try{let f;const L=await A.getRedeemDividendPayload(Ce.value),Q=await u.value.currentWallet.signAndExecuteTransactionBlock(L);if(f=J.value.handleTx(Q),f&&f.hash){de(f.hash),W(!1),j(!0);const h={title:"Claim",desc:`Claimed ${C.value} ${_.value.symbol} successfully.`,hash:f.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:_.value.symbol,numa:`+ ${C.value}`,logoa:_.value.logo_url}};J.value.showTransitionPending(h),await J.value.watchTransaction(h)&&setTimeout(()=>{i.getVeNFTDividendInfo(),H.value=!1},3e3),i.getOwnerLockCetuss(u.value.address)}else W(!1),re(!0),H.value=!1}catch{W(!1),re(!0),H.value=!1}},claimLoading:H,addCommom:x}}},Et=""+new URL("staking-rewards-banner-h5.1c7401db.png",import.meta.url).href,Dt="data:image/png;base64,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";const pe=e=>(G("data-v-99f5258f"),e=e(),K(),e),xt={class:"top-banner"},Ut=pe(()=>n("img",{src:Et,alt:""},null,-1)),Rt=pe(()=>n("p",null,"Convert CETUS to xCETUS to start earning",-1)),Pt={class:"bot-count"},Lt=pe(()=>n("span",null,"Reward distribution in ",-1)),Mt={class:"holder-rewards"},Wt={class:"title"},Ot=pe(()=>n("div",{class:"left"},[n("img",{src:Dt,alt:""}),n("span",null,"xCETUS Staking Rewards")],-1)),Vt={class:"right"},Ft={class:"rewards-value"},Ht={class:"claim-h5"};function Xt(e,t,i,a,C,b){var u;const c=wt,S=oe,o=Nt;return m(),T("div",null,[n("div",xt,[Ut,Rt,n("div",Pt,[Lt,U(c,{"start-time":a.nextStartTime,onCountDown:t[0]||(t[0]=p=>e.$emit("getNextEpoch"))},null,8,["start-time"])])]),n("div",Mt,[n("div",Wt,[Ot,n("div",Vt,[a.wallet&&a.wallet.address?(m(),P(S,{key:0,disabled:!a.canClaim||a.pendingAmount=="--"||a.pendingAmount<=0,loading:a.claimLoading,onClick:a.claimPendingYield},{default:M(()=>[B(" Claim ")]),_:1},8,["disabled","loading","onClick"])):F("",!0)])]),n("div",Ft,[U(o,{"title-text":"est.APR","tips-text":"good",value:a.cetusApr+"%"},null,8,["title-text","value"]),U(o,{"title-text":"My share",value:a.myShare+"%"},null,8,["value"]),U(o,{"title-text":a.pendingYieldText,"img-icon":(u=a.pendingCoinInfo)==null?void 0:u.logo_url,value:a.addCommom(a.pendingAmount,6)},null,8,["title-text","img-icon","value"])]),n("div",Ht,[a.wallet&&a.wallet.address?(m(),P(S,{key:0,disabled:!a.canClaim||a.pendingAmount=="--"||a.pendingAmount<=0,loading:a.claimLoading,onClick:t[1]||(t[1]=p=>e.$emit("claimPendingYield"))},{default:M(()=>[B(" Claim ")]),_:1},8,["disabled","loading"])):F("",!0)])])])}const Yt=Y($t,[["render",Xt],["__scopeId","data-v-99f5258f"]]),jt={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,t){const i=w("--"),a=w("--"),C=w("--"),b=w("--");let c=null;Oe(()=>{window.clearInterval(c)});const S=()=>{const u=new Date().getTime()/1e3;Number(u)<=Number(e.startTime)&&o(e.startTime),Number(u)>Number(e.startTime)&&Number(u)<=Number(e.endTime)&&o(e.endTime)},o=u=>{c=setInterval(()=>{let p=new Date().getTime()/1e3,g=u-parseInt(String(p));if(g==0){t.emit("countDown"),clearInterval(c),window.clearInterval(c),c=null;return}else g<0&&(clearInterval(c),window.clearInterval(c),t.emit("countDown"),c=null);g--;let v=parseInt(String(g/60/60/24));v=v<10?"0"+v:v;let s=parseInt(String(g/60/60%24));s=s<10?"0"+s:s;let I=parseInt(String(g/60%60));I=I<10?"0"+I:I;let $=parseInt(String(g%60));$=$<10?"0"+$:$,i.value=v,a.value=s,C.value=I,b.value=$},1e3)};return X(()=>e.startTime,(u,p)=>{u!==p&&S()},{immediate:!0}),{day:i,hour:a,min:C,sec:b}}};const _e=e=>(G("data-v-131b3f4e"),e=e(),K(),e),Zt={class:"count-down"},qt=_e(()=>n("span",null,"D : ",-1)),Gt=_e(()=>n("span",null,"H : ",-1)),Kt=_e(()=>n("span",null,"M : ",-1)),Qt=_e(()=>n("span",null,"S",-1));function zt(e,t,i,a,C,b){return m(),T("div",Zt,[B(y(a.day)+" ",1),qt,B(" "+y(a.hour)+" ",1),Gt,B(" "+y(a.min)+" ",1),Kt,B(" "+y(a.sec)+" ",1),Qt])}const Jt=Y(jt,[["render",zt],["__scopeId","data-v-131b3f4e"]]),en={components:{WcountDown:Jt},props:{vItem:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},setup(e,t){const{t:i}=ae(),a=Ne(),C=se(),b=r(()=>C),c=v=>{t.emit("claim",v),a.setClaimLoading(v.id)},S=r(()=>a),o=r(()=>new Date().getTime()/1e3>e.vItem.locked_until_time),u=v=>{t.emit("cancelRedeemPayload",v),a.setClaimLoading(v.id)};r(()=>b.value.chainName),$e("Sui");const p=le();return r(()=>p),r(()=>S.value.venft_id),r(()=>b.value.chainName?Ee(b.value.chainName):{}),{t:i,prettyAmount:Z,claimBoolean:o,toClaim:c,toCancel:u,claimWhale:v=>{t.emit("claimWhale",v)},cancelRedeemPayload:v=>{t.emit("cancelRedeemPayload",v)}}}};const De=e=>(G("data-v-50809946"),e=e(),K(),e),tn={class:"vesting-box"},nn={class:"left"},an=De(()=>n("img",{src:Xe,alt:""},null,-1)),on=De(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-swap2"})],-1)),ln=De(()=>n("img",{src:Ye,alt:""},null,-1)),sn={class:"available-all"},un={class:"available"},rn={key:0},dn={key:1};function cn(e,t,i,a,C,b){const c=Ve("WcountDown"),S=oe;return m(),T("div",tn,[n("div",nn,[n("p",null,[n("span",null,[an,B(" "+y(("addCommom"in e?e.addCommom:Ie(x))(a.prettyAmount(i.vItem.xcetus_amount,9),9))+" xCETUS ",1)]),on,n("span",null,[ln,B(" "+y(("addCommom"in e?e.addCommom:Ie(x))(a.prettyAmount(i.vItem.cetus_amount,9),9))+" CETUS ",1)])]),n("div",sn,[n("div",un,[n("span",null,y(a.claimBoolean?"Available":"Available in"),1),a.claimBoolean?F("",!0):(m(),P(c,{key:0,"start-time":i.vItem.locked_start_time,"end-time":i.vItem.locked_until_time,onCountDown:t[0]||(t[0]=o=>e.$emit("countDown"))},null,8,["start-time","end-time"]))]),n("div",{class:fe(a.claimBoolean?"highlight right-h5":"right-h5")},[a.claimBoolean?(m(),T("span",rn,"Claim")):(m(),T("span",dn,"Cancel"))],2)])]),a.claimBoolean?(m(),P(S,{key:0,disabled:!a.claimBoolean||i.loading,loading:i.loading,onClick:t[1]||(t[1]=o=>a.claimWhale(i.vItem))},{default:M(()=>[B(y(a.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"])):(m(),P(S,{key:1,type:"text",class:"right",disabled:i.loading,loading:i.loading,onClick:t[2]||(t[2]=o=>a.cancelRedeemPayload(i.vItem))},{default:M(()=>[B(y(a.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"]))])}const mn=Y(en,[["render",cn],["__scopeId","data-v-50809946"]]),vn=Be({props:{inputValue:{type:String,default:""},coinSymbol:{type:String,default:""},whaleDirection:{type:String,default:""},address:{type:String,default:""},balance:{type:String,default:""}},setup(e,t){const{t:i,locale:a}=ae(),C=se(),b=r(()=>C),c=at(ot,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),S=le(),o=r(()=>S),u=He(),p=r(()=>u),_=v=>{const I=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");v.target.value=v.target.value.replace(I,"$1")},g=r(()=>{var v;return p.value.tokensObj&&e.address&&p.value.tokensObj[e.address]&&((v=p.value.tokensObj[e.address])==null?void 0:v.decimals)});return X(()=>p.value.RATES,v=>{},{immediate:!0}),{pool:p,t:i,addCommom:x,store:b,wallet:o,indicator:c,inputChange:_,importIcon:q,coinDecimals:g}}});const gn=e=>(G("data-v-83d9dead"),e=e(),K(),e),fn={class:"card"},hn={class:"top"},pn={class:"left"},_n={class:"loading-token"},wn={key:0,src:Ye,alt:""},Cn={key:1,src:Xe,alt:""},bn={class:"bottom"},Sn=gn(()=>n("div",null,null,-1)),yn={class:"top"},Tn={class:"right"},An={key:0,class:"balance"};function kn(e,t,i,a,C,b){var u,p;const c=lt,S=st,o=oe;return m(),T("div",fn,[n("div",hn,[U(c,{value:e.inputValue,placeholder:"0.0",onChange:e.inputChange,onInput:t[0]||(t[0]=_=>e.$emit("onInput",_.target.value)),onFocus:t[1]||(t[1]=_=>e.$emit("onFocus"))},null,8,["value","onChange"]),n("div",pn,[n("div",_n,[e.coinSymbol=="CETUS"?(m(),T("img",wn)):(m(),T("img",Cn)),n("div",null,[n("p",null,y(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1)])])])]),n("div",bn,[Sn,n("div",yn,[n("div",Tn,[n("span",null,y(e.$t("common.balance")),1),e.balance?(m(),T("span",An,y(e.balance>1?("addCommom"in e?e.addCommom:Ie(x))(e.balance):e.balance),1)):(m(),P(S,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})),e.whaleDirection=="From"?(m(),P(o,{key:2,class:"max-btn",disabled:!e.balance||e.balance==0||!((u=e.wallet)!=null&&u.address),onClick:t[2]||(t[2]=_=>e.$emit("halfBalanne"))},{default:M(()=>[B(y("Half"))]),_:1},8,["disabled"])):F("",!0),e.whaleDirection=="From"?(m(),P(o,{key:3,class:"max-btn",disabled:!e.balance||e.balance==0||!((p=e.wallet)!=null&&p.address),onClick:t[3]||(t[3]=_=>e.$emit("maxBalanne"))},{default:M(()=>[B(y(e.$t("button.max")),1)]),_:1},8,["disabled"])):F("",!0)])])])])}const In=Y(vn,[["render",kn],["__scopeId","data-v-83d9dead"]]);const Bn=Be({components:{Modal:it},setup(e,t){const i=se(),a=w(!1);r(()=>i);const C=le(),b=r(()=>C);return{store:i,isSelect:a,clickConvert:()=>{a.value&&localStorage.setItem(`notRemind${b.value.address}`,!0),t.emit("clickConvert")}}}}),xe=e=>(G("data-v-f05dc960"),e=e(),K(),e),Nn=xe(()=>n("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),$n=[Nn],En={class:"token-waring-conetnt"},Dn=xe(()=>n("div",{class:"tips-text"},[B(" Please note that after conversion, if you want to convert xCETUS back to CETUS, a vesting period will be applied & different vesting durations correspond to different redeem ratios. "),n("a",{href:"https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus",target:"_blank"}," Learn more")],-1)),xn={class:"read-text"},Un={key:0,src:gt},Rn=xe(()=>n("span",null," Do not remind again. ",-1));function Pn(e,t,i,a,C,b){const c=oe,S=Ve("Modal");return m(),P(S,{width:"440px",visible:!0,footer:null,title:null,"mask-closable":!0,onCancel:t[3]||(t[3]=o=>e.$emit("close"))},{closeIcon:M(()=>[(m(),T("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:t[0]||(t[0]=o=>e.$emit("close"))},$n))]),default:M(()=>[n("div",En,[Dn,n("div",xn,[n("div",{class:"radio",onClick:t[1]||(t[1]=o=>e.isSelect=!e.isSelect)},[e.isSelect?(m(),T("img",Un)):F("",!0)]),Rn]),U(c,{class:"big-btn continue",onClick:t[2]||(t[2]=()=>e.clickConvert())},{default:M(()=>[B("Convert")]),_:1})])]),_:1})}const Ln=Y(Bn,[["render",Pn],["__scopeId","data-v-f05dc960"]]),Mn=Be({setup(){const e=Ne(),t=r(()=>e),i=r(()=>t.value.venft_id),a=r(()=>t.value.venftInfo),C=He(),b=r(()=>C);r(()=>b.value.tokensObj&&b.value.tokensObj["0x2a4f647bc73f070182436658bff75060246019857c769ad9268c22c4472bca7f::cetus::CETUS"]);const c=w("");let S=w(!1);const o=w(""),u=w(""),p=w(!1),_=w("convert"),{t:g}=ae(),v=w([{time:"15 D",num:15},{time:"30 D",num:30},{time:"90 D",num:90},{time:"180 D",num:180}]),s=w([{name:"est.APR",value:"100.12%"},{name:"My share",value:"<0.1%"},{name:"Pending yield (USDC)",value:0}]),I=w([{name:"My total locked",value:"$100.12"},{name:"Pending rewards (xCETUS)",value:"100.12"},{name:"",value:""}]),$=w([{name:"My positions",value:"12"},{name:"My qualified positions",value:"0"},{name:"Pending rewards (xCETUS)",value:"100.12"}]),ue=window.setInterval(()=>{e.getXcetusApr(),h.value.address&&(e.getMyShare(h.value.address),e.getVeNFTDividendInfo())},6e4);ut(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||e.getDividendManager()}),e.getXcetusApr(),e.getDividendManager()}),rt(()=>{window.clearInterval(ue),document.removeEventListener("visibilitychange",()=>{})});const j=r(()=>t.value.whaleBalance),re=r(()=>t.value.xWhaleBalance),W=r(()=>t.value.availableXwhale),we=r(()=>t.value.redeemingXwhale),de=r(()=>{if(_.value=="convert"){if(Number(o.value)>Number(j.value))return!0}else if(Number(o.value)>Number(W.value))return!0;return!o.value||!u.value||Number(o.value)==0||Number(u.value)==0}),A=w("180"),H=r(()=>_.value=="convert"&&Number(o.value)>Number(j.value)?g("button.insufficientBalance",{name:"CETUS"}):_.value!=="convert"&&Number(o.value)>Number(W.value)?g("button.insufficientBalance",{name:"xCETUS"}):Number(A.value)<15?"Minimum vesting duration is 15 days":_.value=="convert"&&i?"Convert":_.value!=="convert"&&i?"Redeem":"Convert"),Ce=l=>{o.value="",u.value="",_.value=l},J=()=>{S.value=!0,setTimeout(()=>{S.value=!1},300)},Ue=l=>{A.value=l},f=w(!1),L=$e("Sui"),Q=le(),h=r(()=>Q),be=r(()=>t.value.ownerLocks);X(()=>h.value.address,l=>{l?(e.getOwnerVeNFT(l),e.getAccountWhaleBalance(l),e.getOwnerLockCetuss(l),e.getMyShare(l)):e.loginOut()},{immediate:!0});const D=r(()=>Se.value.chainName?Ee(Se.value.chainName):{}),Re=se(),Se=r(()=>Re),ee=r(()=>Se.value.chainName),{setIsShowSuccess:te,setIsShowRejected:O,setIsShowWaiting:k,setTransactionDesc:ne,setTransactionTxid:V}=Re,ye=async()=>{f.value=!0,k(!0),V(""),ne(g("tips.converting",{from:`${x(o.value,9)} CETUS`,and:"to",to:`${x(o.value,9)} xCETUS`}));try{let l;const d=ge(o.value,9),N=await L.depositCetus(d,i.value),R=await h.value.currentWallet.signAndExecuteTransactionBlock(N);if(l=D.value.handleTx(R),l&&l.hash){V(l.hash),k(!1),te(!0);const E={title:"Converted",desc:`Converted ${x(o.value,9)} xCETUS successfully`,hash:l.hash,tit:"Converted",icon:"icon-icon-Swap",tokenInfo:{tokena:"CETUS",numa:`- ${o.value}`,logoa:q("/sui-image/WHALE-icon.png"),tokenb:"xCETUS",numb:`+ ${o.value}`,logob:q("/sui-image/xWHALE-icon.png")}};ee.value!=="Aptos"&&(E.res=l.res),D.value.showTransitionPending(E),await D.value.watchTransaction(E)&&setTimeout(()=>{e.getAccountWhaleBalance(h.value.address),e.getOwnerVeNFT(h.value.address),e.getOwnerLockCetuss(h.value.address),e.getMyShare(h.value.address)},3e3),f.value=!1}else k(!1),O(!0),f.value=!1;o.value=""}catch{k(!1),O(!0),f.value=!1,o.value=""}},z=w(!0),Te=w("0"),je=async()=>{const l=ge(o.value,9),d=await L.redeemNum(l,Number(A.value));u.value=Z(d.amountOut,9),Te.value=d.percent},Ze=async()=>{const l=ge(u.value,9),d=await L.reverseRedeemNum(l,Number(A.value));o.value=Z(d.amountOut,9),Te.value=d.percent};X(()=>[o.value,A.value,z.value],([l,d,N])=>{l&&d&&N&&Number(d)>=15&&je(),!l&&N&&(u.value="")},{immediate:!0}),X(()=>[u.value,A.value,z.value],([l,d,N])=>{l&&d&&!N&&Number(d)>=15&&Ze(),!l&&!N&&(o.value="")},{immediate:!0}),X(()=>[A.value,z.value],([l,d])=>{Number(l)>180?A.value="180":Number(l)<15?d?u.value="":o.value="":l||(d?o.value="":u.value="")},{immediate:!0});const qe=()=>{z.value=!0,o.value=he(new We(_.value!=="convert"?W.value:j.value).div(new We(2)).toString(),9)},Ge=()=>{z.value=!0,o.value=_.value!=="convert"?he(W.value,9):he(j.value,9)},Pe=async()=>{f.value=!0,k(!0),V(""),ne(g("tips.redeeming",{from:`${x(o.value,9)} xCETUS`,to:`${x(u.value,9)} CETUS`}));try{let l;const d=ge(o.value,9),N=await L.getRedeemLockPayload(d,i.value,Number(A.value)),R=await h.value.currentWallet.signAndExecuteTransactionBlock(N);if(l=D.value.handleTx(R),l&&l.hash){V(l.hash),k(!1),te(!0);const E={title:"Redemption",desc:"Redemption transaction submitted successfully.",hash:l.hash,tit:"Vesting",icon:"icon-icon-Removed",tokenInfo:{tokena:"xCETUS",numa:`- ${o.value}`,logoa:q("/sui-image/xWHALE-icon.png")}};ee.value!=="Aptos"&&(E.res=l.res),D.value.showTransitionPending(E),await D.value.watchTransaction(E)&&setTimeout(()=>{e.getAccountWhaleBalance(h.value.address),e.getOwnerVeNFT(h.value.address),e.getOwnerLockCetuss(h.value.address),e.getMyShare(h.value.address)},3e3),f.value=!1}else k(!1),O(!0),f.value=!1;o.value="",u.value=""}catch{k(!1),O(!0),f.value=!1,o.value="",u.value=""}};X(()=>[i.value,be.value,a.value,h.value.address],([l,d,N,R])=>{R&&(l&&e.getVeNFTDividendInfo(),l&&!Fe(N)&&d&&d.length>0&&e.getAvailableXCetus())},{immediate:!0,deep:!0});const Ke=async l=>{f.value=!0,k(!0),V(""),ne("");try{let d;const N=await L.getCancelRedeemPayload(l.id,i.value),R=await h.value.currentWallet.signAndExecuteTransactionBlock(N);if(d=D.value.handleTx(R),d&&d.hash){V(d.hash),k(!1),te(!0);const E={title:"Cancelled Redemption",desc:"Cancelled redemption successfully.",hash:d.hash,tit:"Cancelled Redemption",icon:"icon-a-icon-Shutdown",tokenInfo:{tokena:"xCETUS",numa:`+ ${Z(l.xcetus_amount,9)}`,logoa:q("/sui-image/xWHALE-icon.png")}};ee.value!=="Aptos"&&(E.res=d.res),D.value.showTransitionPending(E),await D.value.watchTransaction(E)&&setTimeout(()=>{e.getOwnerVeNFT(h.value.address),e.getOwnerLockCetuss(h.value.address),f.value=!1},3e3)}else k(!1),O(!0),f.value=!1;o.value="",u.value=""}catch{k(!1),O(!0),f.value=!1,o.value="",u.value="",e.setClaimLoading("")}},Qe=w({}),ze=()=>{e.getOwnerLockCetuss(h.value.address)},Je=async l=>{f.value=!0,k(!0),V(""),ne(`${g("tips.claimingPendingYield")} ${x(Z(l.cetus_amount,9),9)} CETUS`);try{let d;const N=await L.getRedeemPayload(l.id,i.value),R=await h.value.currentWallet.signAndExecuteTransactionBlock(N);if(d=D.value.handleTx(R),d&&d.hash){V(d.hash),k(!1),te(!0);const E={title:"Claimed",desc:`Claimed ${x(Z(l.cetus_amount,9),9)} CETUS successfully.`,hash:d.hash,tit:"CETUS Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:"CETUS",numa:`+ ${Z(l.cetus_amount,9)}`,logoa:q("/sui-image/WHALE-icon.png")}};ee.value!=="Aptos"&&(E.res=d.res),D.value.showTransitionPending(E),await D.value.watchTransaction(E)&&setTimeout(()=>{e.getOwnerLockCetuss(h.value.address),e.getAccountWhaleBalance(h.value.address),e.getOwnerVeNFT(h.value.address),e.getMyShare(h.value.address),e.getAvailableXCetus(),f.value=!1},3e3)}else k(!1),O(!0),f.value=!1;o.value="",u.value=""}catch{k(!1),O(!0),f.value=!1,o.value="",u.value="",e.setClaimLoading("")}},Ae=w(!1),et=()=>{!localStorage.getItem(`notRemind${h.value.address}`)&&H.value=="Convert"?Ae.value=!0:H.value=="Redeem"?Pe():ye()},tt=()=>{Ae.value=!1,ye()},ce=r(()=>t.value.pendingCoinInfo),me=r(()=>t.value.pendingAmount),ve=w(!1);return{clickModalConvert:tt,openConfirmModal:Ae,validateInput:()=>{A.value&&(A.value=A.value.replace(/[^\d]/g,""),A.value.charAt(0)==="0"&&(A.value=A.value.slice(1)))},countDown:ze,value:c,change:S,clickExchange:J,fromCoinAmount:o,toCoinAmount:u,showCoinSelect:p,headSwitchValue:_,headSwitchChange:Ce,vestingDateList:v,vestingParameter:A,vestingTab:Ue,holderList:s,lockupList:I,leaderboardList:$,whaleBalance:j,depositCetus:ye,btnText:H,loading:f,redeemRatio:Te,halfBalanne:qe,maxBalanne:Ge,xWhaleBalance:re,availableXwhale:W,redeemingXwhale:we,withdrawWhale:Pe,ownerLocks:be,cancelRedeemPayload:Ke,holderInfo:Qe,btnDisabled:de,fixedFromCoin:z,walletStore:Q,claimWhale:Je,wallet:h,depositOrWithdraw:et,pendingAmount:me,claimPendingYield:async()=>{ve.value=!0,k(!0),V(""),ne(`${g("tips.claimingPendingYield")} ${me.value} ${ce.value.symbol}`);try{let l;const d=await L.getRedeemDividendPayload(i.value),N=await h.value.currentWallet.signAndExecuteTransactionBlock(d);if(l=D.value.handleTx(N),l&&l.hash){V(l.hash),k(!1),te(!0);const R={title:"Claim",desc:`Claimed ${me.value} ${ce.value.symbol} successfully.`,hash:l.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:ce.value.symbol,numa:`+ ${me.value}`,logoa:ce.value.logo_url}};ee.value!=="Aptos"&&(R.res=l.res),D.value.showTransitionPending(R),await D.value.watchTransaction(R)&&setTimeout(()=>{e.getVeNFTDividendInfo(),ve.value=!1},3e3),e.getOwnerLockCetuss(h.value.address)}else k(!1),O(!0),ve.value=!1,f.value=!1}catch{k(!1),O(!0),ve.value=!1}},inputBlur:()=>{Number(A.value)<15&&(A.value="15")},getNextEpoch:()=>{e.getDividendManager()}}}});const ie=e=>(G("data-v-b867dff2"),e=e(),K(),e),Wn={class:"dashboard-all"},On={class:"dashboard-content"},Vn={class:"content-left"},Fn={key:0,class:"vesting"},Hn=ie(()=>n("p",null,"Vesting",-1)),Xn={class:"content-right"},Yn={key:0,class:"card-container"},jn={class:"card-item"},Zn={class:"card-item"},qn={class:"exchange"},Gn=ie(()=>n("use",{"xlink:href":"#icon-icon-swap2"},null,-1)),Kn=[Gn],Qn={key:1,class:"card-redeem"},zn={class:"card-item"},Jn={class:"vesting-duration"},ea=ie(()=>n("p",null,"Vesting duration",-1)),ta={class:"vesting-content"},na={class:"vesting-left"},aa={class:"value-days"},oa=ie(()=>n("span",null,"days",-1)),la={class:"vesting-right"},sa=["onClick"],ia={class:"card-item"},ua={class:"redeem-ratio"},ra=ie(()=>n("span",null,"Redeem ratio",-1));function da(e,t,i,a,C,b){const c=nt,S=Yt,o=mn,u=vt,p=In,_=mt,g=oe,v=Ln;return m(),T("div",Wn,[U(c,{title:"Dashboard","total-xwhale":e.xWhaleBalance,"available-xwhale":e.availableXwhale,"redeeming-xwhale":e.redeemingXwhale},null,8,["total-xwhale","available-xwhale","redeeming-xwhale"]),n("div",On,[n("div",Vn,[U(S,{"holder-info":e.holderInfo,"pending-amount":e.pendingAmount,"claim-loading":e.claimLoading,onClaimPendingYield:e.claimPendingYield,onGetNextEpoch:e.getNextEpoch},null,8,["holder-info","pending-amount","claim-loading","onClaimPendingYield","onGetNextEpoch"]),e.ownerLocks&&e.ownerLocks.length>0?(m(),T("div",Fn,[Hn,(m(!0),T(Le,null,Me(e.ownerLocks,s=>(m(),P(o,{key:s,"v-item":s,loading:e.loading,onCountDown:e.countDown,onClaimWhale:e.claimWhale,onCancelRedeemPayload:e.cancelRedeemPayload},null,8,["v-item","loading","onCountDown","onClaimWhale","onCancelRedeemPayload"]))),128))])):F("",!0)]),n("div",Xn,[U(u,{"head-switch-value":e.headSwitchValue,"left-text":"Get xCETUS","right-text":"Redeem CETUS",onHeadSwitchChange:t[0]||(t[0]=s=>{e.headSwitchChange(s)})},null,8,["head-switch-value"]),e.headSwitchValue=="convert"?(m(),T("div",Yn,[n("div",jn,[U(p,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[1]||(t[1]=s=>e.fromCoinAmount=s),"input-value":e.fromCoinAmount,"coin-symbol":"CETUS","whale-direction":"From",balance:e.whaleBalance,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:t[2]||(t[2]=s=>{e.fromCoinAmount=s})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),n("div",Zn,[U(p,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[3]||(t[3]=s=>e.fromCoinAmount=s),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"To",balance:e.availableXwhale,onOnInput:t[4]||(t[4]=s=>{e.fromCoinAmount=s})},null,8,["modelValue","input-value","balance"])]),n("img",{class:fe(e.change?"gang animationex":"gang"),src:ft,alt:""},null,2),n("div",qn,[(m(),T("svg",{class:fe(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Kn,2))])])):(m(),T("div",Qn,[n("div",zn,[U(p,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[5]||(t[5]=s=>e.fromCoinAmount=s),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"From",balance:e.availableXwhale,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:t[6]||(t[6]=s=>{e.fixedFromCoin=!0,e.fromCoinAmount=s})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),n("div",Jn,[ea,n("div",ta,[n("div",na,[n("div",aa,[dt(n("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>e.vestingParameter=s),onInput:t[8]||(t[8]=(...s)=>e.validateInput&&e.validateInput(...s)),onBlur:t[9]||(t[9]=(...s)=>e.inputBlur&&e.inputBlur(...s))},null,544),[[ct,e.vestingParameter]])]),oa]),n("div",la,[(m(!0),T(Le,null,Me(e.vestingDateList,s=>(m(),T("div",{key:s.time,class:fe(["box-table",{"box-table-active":s.num===Number(e.vestingParameter)}]),onClick:I=>e.vestingTab(s.num)},y(s.time),11,sa))),128))])]),U(_,{value:e.vestingParameter,"onUpdate:value":t[10]||(t[10]=s=>e.vestingParameter=s),max:180,min:15},null,8,["value"])]),n("div",ia,[U(p,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[11]||(t[11]=s=>e.toCoinAmount=s),"input-value":e.toCoinAmount,"coin-symbol":"CETUS","whale-direction":"To",balance:e.whaleBalance,onOnInput:t[12]||(t[12]=s=>{e.fixedFromCoin=!1,e.toCoinAmount=s})},null,8,["modelValue","input-value","balance"])]),n("div",ua,[ra,n("p",null,y(e.redeemRatio)+"%",1)])])),e.wallet&&e.wallet.address?(m(),P(g,{key:2,class:"big-btn",loading:e.loading,disabled:e.btnDisabled,onClick:e.depositOrWithdraw},{default:M(()=>[n("span",null,y(e.btnText),1)]),_:1},8,["loading","disabled","onClick"])):(m(),P(g,{key:3,class:"big-btn",onClick:t[13]||(t[13]=s=>e.walletStore.setIsShowWalletModal(!0))},{default:M(()=>[n("span",null,y(e.$t("button.connectWallet")),1)]),_:1}))])]),e.openConfirmModal?(m(),P(v,{key:0,onClickConvert:e.clickModalConvert,onClose:t[14]||(t[14]=()=>e.openConfirmModal=!e.openConfirmModal)},null,8,["onClickConvert"])):F("",!0)])}const Na=Y(Mn,[["render",da],["__scopeId","data-v-b867dff2"]]);export{Na as default};
