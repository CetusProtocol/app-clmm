import{_ as ce}from"./new-position-title.b01393ac.js";import{_ as Ho}from"./token-warning.0eb4bf5a.js";import{_ as ve}from"./status-block.d8c49d69.js";import{_ as Ko}from"./auto-pool-apy-tips.e0f50ca7.js";import{u as No,g as pe,a as T,d as qo,c as co,p as Go,b as Qo,s as ao,e as to,T as ko,f as fe,h as _e,C as Zo}from"./pool.aad36be9.js";import{u as Co,a as Do}from"./sha256.382a5e31.js";import{i as mo}from"./import-icon.de3e6c66.js";import{u as Uo,a as xo}from"./autoPool.87854e5f.js";import{a as ho,l as m,r as R,m as yo,q as so,e as go,s as Lo,o as f,f as L,h as e,t as eo,i as W,v as r,j as uo,x as bo,u as j,p as So,k as wo,M as oe,y as jo,z as ee,c as z,w as io,B as Eo,A as ne,C as Vo,D as be,L as he,I as ye,S as te,E as ge,b as se,F as $e,G as Ie,H as ke}from"./entry.548c3ce8.js";import{_ as Ce}from"./assets-card.343afc9a.js";import{_ as Se}from"./coin-lock.2586a573.js";import{D as g}from"./decimal.0e8aa3f1.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./decimal.633e31ee.js";import{V as Jo}from"./index.08515a45.js";import"./back.cc02c833.js";import"./swap-setting.0f03d558.js";/* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.1fe3040d.js";const we=ho({components:{AutoPoolApyTips:Ko},setup(){const o=Co(),n=m(()=>o),q=No(),A=m(()=>q),N=m(()=>n.value.theme),$=s=>{var t;return(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||((t=A.value.tokensObj[s==null?void 0:s.address])==null?void 0:t.logo_url)||(N.value==="default"?mo("/image/coins/unknown.png"):mo("/image/coins/sui-unknown.png"))},b=R(!0),_=Uo(),c=m(()=>_),h=yo(),a=R();so(()=>[c.value.positionInfoObj,h.params.id],([s,t])=>{s&&!co(s)&&t&&(a.value=s[t])},{immediate:!0,deep:!0});const i=m(()=>{var s;return(s=a.value)==null?void 0:s.needReverse}),u=m(()=>{var s,t;return c.value.apyObj&&((t=c.value.apyObj[(s=a.value)==null?void 0:s.id])==null?void 0:t.tvl)||"--"}),l=m(()=>{var s,t;return c.value.apyObj&&((t=c.value.apyObj[(s=a.value)==null?void 0:s.id])==null?void 0:t.apr)||"--"});return{positionInfo:a,tvl:u,store:n,indexStore:o,needReverse:i,getCoinIcon:$,getExplorerUrl:pe,addCommom:T,decimalUi:qo,direct:b,apy:l}}});const Bo=o=>(So("data-v-86289a90"),o=o(),wo(),o),Ae={class:"auto-position-info"},Pe={class:"pool-info"},Re={class:"left"},Te={class:"coin-a"},qe={alt:""},Ne={class:"coin-b"},Le={alt:""},Be={class:"position-name"},Me={key:0,class:"pool-fee"},Oe=Bo(()=>e("span",null,"Fee tier",-1)),De={class:"right"},Ue={class:"price-info"},je={class:"current-price"},Fe=Bo(()=>e("span",null,"Current Price",-1)),We={class:"coin-rate"},Ee=Bo(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Xe=Bo(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ze=[Ee,Xe],Ve={key:0},He={key:1},Ye={class:"apy-and-tvl"},Ge={class:"apy"},Ze=Bo(()=>e("div",{class:"apy-title"},"APY",-1)),Je={class:"apy-text"},Ke={class:"tvl"},Qe=Bo(()=>e("div",{class:"tvl-title"},"TVL",-1)),xe={class:"tvl-text"};function on(o,n,q,A,N,$){var a,i,u,l,s,t,d,I,C,y,E,P,k,F,M,O,S,K,Y,V,X,G,x,oo,Mo,vo,ro,po,Ro,$o,fo,p,H;const b=Ho,_=ve,c=Ko,h=Lo("image");return f(),L("div",Ae,[e("div",Pe,[e("div",Re,[e("div",Te,[eo(e("img",qe,null,512),[[h,o.needReverse?o.getCoinIcon((i=o.positionInfo)==null?void 0:i.token_b):o.getCoinIcon((a=o.positionInfo)==null?void 0:a.token_a)]]),W(b,{address:o.needReverse?(t=(s=o.positionInfo)==null?void 0:s.token_b)==null?void 0:t.address:(l=(u=o.positionInfo)==null?void 0:u.token_a)==null?void 0:l.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Ne,[eo(e("img",Le,null,512),[[h,o.needReverse?o.getCoinIcon((I=o.positionInfo)==null?void 0:I.token_a):o.getCoinIcon((d=o.positionInfo)==null?void 0:d.token_b)]]),W(b,{address:o.needReverse?(P=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:P.address:(y=(C=o.positionInfo)==null?void 0:C.token_b)==null?void 0:y.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Be,r(o.needReverse?(F=(k=o.positionInfo)==null?void 0:k.token_b)==null?void 0:F.symbol:(O=(M=o.positionInfo)==null?void 0:M.token_a)==null?void 0:O.symbol)+" - "+r(o.needReverse?(K=(S=o.positionInfo)==null?void 0:S.token_a)==null?void 0:K.symbol:(V=(Y=o.positionInfo)==null?void 0:Y.token_b)==null?void 0:V.symbol),1),(X=o.positionInfo)!=null&&X.fee?(f(),L("div",Me,[Oe,uo(" "+r(((G=o.positionInfo)==null?void 0:G.fee)*100)+"% ",1)])):bo("",!0)]),e("div",De,[W(_,{"current-status":(x=o.positionInfo)==null?void 0:x.currentStatus},null,8,["current-status"])])]),e("div",Ue,[e("div",je,[e("div",null,[Fe,e("div",We,[e("div",{onClick:n[0]||(n[0]=_o=>o.direct=!o.direct)},ze)])]),(o.needReverse?!o.direct:o.direct)?(f(),L("div",Ve,[uo(r(("addCommom"in o?o.addCommom:j(T))(("decimalUi"in o?o.decimalUi:j(qo))((oo=o.positionInfo)==null?void 0:oo.price,6)))+"   ",1),e("span",null,r((vo=(Mo=o.positionInfo)==null?void 0:Mo.token_b)==null?void 0:vo.symbol)+" per "+r((po=(ro=o.positionInfo)==null?void 0:ro.token_a)==null?void 0:po.symbol),1)])):(f(),L("div",He,[uo(r(("addCommom"in o?o.addCommom:j(T))(("decimalUi"in o?o.decimalUi:j(qo))(1/((Ro=o.positionInfo)==null?void 0:Ro.price),6)))+"   ",1),e("span",null,r((fo=($o=o.positionInfo)==null?void 0:$o.token_a)==null?void 0:fo.symbol)+" per "+r((H=(p=o.positionInfo)==null?void 0:p.token_b)==null?void 0:H.symbol),1)]))]),e("div",Ye,[e("div",Ge,[Ze,e("div",Je,[uo(r(o.apy)+" ",1),W(c)])]),e("div",Ke,[Qe,e("div",xe,"$"+r(("addCommom"in o?o.addCommom:j(T))(o.tvl,2)),1)])])])])}const ie=go(we,[["render",on],["__scopeId","data-v-86289a90"]]),en=ho({setup(){const o=Uo(),n=m(()=>o),q=yo(),A=m(()=>n.value.positionInfoObj[q.params.id]),N=m(()=>{var c;return(c=A.value)==null?void 0:c.needReverse}),$=Do(),b=m(()=>$);return{positionInfo:A,needReverse:N,addCommom:T,wallet:b,getCoinIcon:c=>(c==null?void 0:c.logoURI)||(c==null?void 0:c.logo_url)||mo("/image/coins/sui-unknown.png")}}});const Ao=o=>(So("data-v-ddd2440b"),o=o(),wo(),o),nn={class:"auto-position-liquidity"},tn={class:"my-liquidity"},sn={class:"left"},ln=Ao(()=>e("div",null,"My Liquidity",-1)),an={key:0},un={key:1},dn={class:"right"},rn=Ao(()=>e("div",null,"My share",-1)),mn={key:0},cn={key:1},vn={class:"my-liquidity-info"},pn={class:"lp-info"},fn={class:"lp-bg"},_n={alt:""},bn={key:0,class:"lp-num"},hn={key:1,class:"lp-num"},yn=Ao(()=>e("div",{class:"assets-pooled-title"}," Pooled Assets ",-1)),gn={class:"assets-pooled"},$n={alt:""},In={key:0},kn={key:1},Cn=Ao(()=>e("p",null,"--",-1)),Sn=Ao(()=>e("p",null,"--",-1)),wn=[Cn,Sn],An={alt:""},Pn={key:0},Rn={key:1},Tn=Ao(()=>e("p",null,"--",-1)),qn=Ao(()=>e("p",null,"--",-1)),Nn=[Tn,qn];function Ln(o,n,q,A,N,$){var _,c,h,a,i,u,l,s,t,d,I,C,y,E,P,k,F,M,O,S,K,Y,V,X,G,x,oo;const b=Lo("image");return f(),L("div",nn,[e("div",tn,[e("div",sn,[ln,(_=o.wallet)!=null&&_.connected?(f(),L("div",an,"$"+r(("addCommom"in o?o.addCommom:j(T))((c=o.positionInfo)==null?void 0:c.myLiquidityUSD)),1)):(f(),L("div",un,"--"))]),e("div",dn,[rn,(h=o.wallet)!=null&&h.connected?(f(),L("div",mn,r((a=o.positionInfo)==null?void 0:a.myShare)+"%",1)):(f(),L("div",cn,"--%"))])]),e("div",vn,[e("div",pn,[e("div",fn,[eo(e("img",_n,null,512),[[b,((u=(i=o.positionInfo)==null?void 0:i.lpInfo)==null?void 0:u.logo_url)||o.getCoinIcon((l=o.positionInfo)==null?void 0:l.lpInfo)]])]),(s=o.wallet)!=null&&s.connected?(f(),L("div",bn,r(("addCommom"in o?o.addCommom:j(T))((t=o.positionInfo)==null?void 0:t.myLiquidity))+" LP",1)):(f(),L("div",hn,"-- LP"))]),yn,e("div",gn,[e("div",null,[eo(e("img",$n,null,512),[[b,o.needReverse?o.getCoinIcon((d=o.positionInfo)==null?void 0:d.token_b):o.getCoinIcon((I=o.positionInfo)==null?void 0:I.token_a)]]),(C=o.wallet)!=null&&C.connected?(f(),L("div",In,[e("p",null,r((y=o.positionInfo)==null?void 0:y.myAmountAUSD),1),e("p",null,r(("addCommom"in o?o.addCommom:j(T))((E=o.positionInfo)==null?void 0:E.amountA))+" "+r(o.needReverse?(k=(P=o.positionInfo)==null?void 0:P.token_b)==null?void 0:k.symbol:(M=(F=o.positionInfo)==null?void 0:F.token_a)==null?void 0:M.symbol),1)])):(f(),L("div",kn,wn))]),e("div",null,[eo(e("img",An,null,512),[[b,o.needReverse?o.getCoinIcon((O=o.positionInfo)==null?void 0:O.token_a):o.getCoinIcon((S=o.positionInfo)==null?void 0:S.token_b)]]),(K=o.wallet)!=null&&K.connected?(f(),L("div",Pn,[e("p",null,r((Y=o.positionInfo)==null?void 0:Y.myAmountBUSD),1),e("p",null,r(("addCommom"in o?o.addCommom:j(T))((V=o.positionInfo)==null?void 0:V.amountB))+" "+r(o.needReverse?(G=(X=o.positionInfo)==null?void 0:X.token_a)==null?void 0:G.symbol:(oo=(x=o.positionInfo)==null?void 0:x.token_b)==null?void 0:oo.symbol),1)])):(f(),L("div",Rn,Nn))])])])])}const le=go(en,[["render",Ln],["__scopeId","data-v-ddd2440b"]]),Bn=ho({components:{Modal:oe},props:{poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},totalAmount:{type:String,default:""},shareOfPool:{type:String,default:""},minimumReceivedLP:{type:String,default:""}},setup(o,n){const{t:q}=jo(),A=m(()=>{var u,l,s;return((u=o==null?void 0:o.poolInfo)==null?void 0:u.needReverse)||((s=(l=o==null?void 0:o.poolInfo)==null?void 0:l.poolInfo)==null?void 0:s.needReverse)}),N=No(),$=m(()=>N),b=Co(),_=m(()=>b),c=u=>{var l;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((l=$.value.tokensObj[u==null?void 0:u.address])==null?void 0:l.logo_url)||(_.value.theme==="default"?mo("/image/coins/unknown.png"):mo("/image/coins/sui-unknown.png"))},h=yo(),a=R(!1);return{needReverse:A,getCoinIcon:c,addCommom:T,t:q,route:h,checked:a,decimalUi:qo,clickSubmit:()=>{n.emit("toAdd")}}}});const Fo=o=>(So("data-v-bb911124"),o=o(),wo(),o),Mn=Fo(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),On={class:"modal-content"},Dn={class:"pool-info"},Un={class:"left"},jn={alt:""},Fn={alt:""},Wn={class:"pool-name"},En={class:"right"},Xn={class:"coin-info"},zn={class:"from-coin-info"},Vn={class:"left"},Hn={class:"coin-amount"},Yn={class:"coin-symbol"},Gn={class:"right"},Zn={class:"to-coin-info"},Jn={class:"left"},Kn={class:"coin-amount"},Qn={class:"coin-symbol"},xn={class:"right"},ot=Fo(()=>e("div",{class:"to-swap-logo"},null,-1)),et={class:"add-info"},nt={class:"total-amount"},tt=Fo(()=>e("span",null,"Total Amount",-1)),st={class:"total-amount"},it=Fo(()=>e("span",null,"Share of Pool",-1)),lt={class:"total-amount"},at=Fo(()=>e("span",null,"Minimum Received LP",-1));function ut(o,n,q,A,N,$){const b=Ho,_=Eo,c=ee("Modal"),h=Lo("image");return f(),z(c,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:n[0]||(n[0]=a=>o.$emit("onClose"))},{closeIcon:io(()=>[Mn]),default:io(()=>{var a,i,u,l,s,t,d,I,C,y,E,P,k,F,M,O,S,K,Y,V,X,G,x,oo;return[e("div",On,[e("div",Dn,[e("div",Un,[e("div",null,[eo(e("img",jn,null,512),[[h,o.needReverse?(l=(u=o.poolInfo)==null?void 0:u.token_b)==null?void 0:l.logo_url:(i=(a=o.poolInfo)==null?void 0:a.token_a)==null?void 0:i.logo_url]]),W(b,{address:o.needReverse?(I=(d=o.poolInfo)==null?void 0:d.token_b)==null?void 0:I.address:(t=(s=o.poolInfo)==null?void 0:s.token_a)==null?void 0:t.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[eo(e("img",Fn,null,512),[[h,o.needReverse?(P=(E=o.poolInfo)==null?void 0:E.token_a)==null?void 0:P.logo_url:(y=(C=o.poolInfo)==null?void 0:C.token_b)==null?void 0:y.logo_url]]),W(b,{address:o.needReverse?(O=(M=o.poolInfo)==null?void 0:M.token_a)==null?void 0:O.address:(F=(k=o.poolInfo)==null?void 0:k.token_b)==null?void 0:F.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",Wn,[e("span",null,r(o.needReverse?(V=(Y=o.poolInfo)==null?void 0:Y.token_b)==null?void 0:V.symbol:(K=(S=o.poolInfo)==null?void 0:S.token_a)==null?void 0:K.symbol),1),uo(" - "),e("span",null,r(o.needReverse?(oo=(x=o.poolInfo)==null?void 0:x.token_a)==null?void 0:oo.symbol:(G=(X=o.poolInfo)==null?void 0:X.token_b)==null?void 0:G.symbol),1)])]),e("div",En,[uo(" Fee tier "),e("span",null,r(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),e("div",Xn,[e("div",zn,[e("div",Vn,[e("div",Hn,r(("addCommom"in o?o.addCommom:j(T))(o.fromCoinAmount)||0),1),e("div",Yn,r(o.fromCoin&&o.fromCoin.symbol),1)]),e("div",Gn,[eo(e("img",null,null,512),[[h,o.fromCoin&&o.fromCoin.logoURI||o.getCoinIcon(o.fromCoin)]]),W(b,{address:o.fromCoin&&o.fromCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])])]),e("div",Zn,[e("div",Jn,[e("div",Kn,r(("addCommom"in o?o.addCommom:j(T))(o.toCoinAmount)||0),1),e("div",Qn,r(o.toCoin&&o.toCoin.symbol),1)]),e("div",xn,[eo(e("img",null,null,512),[[h,o.toCoin&&o.toCoin.logoURI||o.getCoinIcon(o.toCoin)]]),W(b,{address:o.toCoin&&o.toCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),ot])]),e("div",et,[e("div",nt,[tt,e("span",null,"$"+r(("addCommom"in o?o.addCommom:j(T))(o.totalAmount)),1)]),e("div",st,[it,e("span",null,r(o.shareOfPool)+"%",1)]),e("div",lt,[at,e("span",null,r(("addCommom"in o?o.addCommom:j(T))(o.minimumReceivedLP))+" "+r(o.fromCoin.symbol)+"-"+r(o.toCoin.symbol),1)])])]),W(_,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:io(()=>[uo(" Add Liquidity ")]),_:1},8,["onClick"])]}),_:1})}const ae=go(Bn,[["render",ut],["__scopeId","data-v-bb911124"]]),dt=ho({components:{AutoPoolAddModal:ae},setup(){const o=Do(),n=R(!1),q=Co(),A=m(()=>q),N=m(()=>A.value.chainName),$=m(()=>o),b=Uo(),_=m(()=>b),c=No(),h=m(()=>c),a=R(),i=yo();so(()=>[_.value.positionInfoObj,i.params.id],([v,w])=>{v&&!co(v)&&w&&(a.value=v[w])},{immediate:!0,deep:!0});const u=m(()=>{var v;return(v=a.value)==null?void 0:v.needReverse}),l=R(),s=R(),t=R(),d=R(),I=R(!0),C=m(()=>$.value.assets&&l.value&&$.value.assets[l.value.address]?Go($.value.assets[l.value.address].balance,l.value.decimals):0),y=m(()=>$.value.assets&&s.value&&$.value.assets[s.value.address]?Go($.value.assets[s.value.address].balance,s.value.decimals):0),E=v=>{v==="fromCoin"?(I.value=!0,t.value=C.value>0?l.value.symbol=="SUI"?new g(Number(C.value)).sub(new g(.05)).lt(new g(0))?"0":new g(Number(C.value)).sub(new g(.05)).toString():String(C.value):""):(I.value=!1,d.value=y.value>0?s.value.symbol=="SUI"?new g(Number(y.value)).sub(new g(.05)).lt(new g(0))?"0":new g(Number(y.value)).sub(new g(.05)).toString():String(y.value):"")},P=v=>{v==="fromCoin"?(I.value=!0,t.value=C.value>0?ao(new g(Number(C.value)).div(2).toString(),l.value.decimals).toString():""):(I.value=!1,d.value=y.value>0?ao(new g(Number(y.value)).div(2).toString(),s.value.decimals).toString():"")},k=m(()=>N.value?Qo(N.value):{}),F=m(()=>A.value.slippage),M=R("--"),O=R("--"),S=v=>{const w=new g(a.value.autoPoolPositionInfo.liquidity),D=new g(v.toString());if(w.toNumber()>0&&D.toNumber()>0){const B=D.add(w),Z=D.div(B).mul(100).toString(),U=fe(Z),Q=U==-1?2:U+2,lo=ao(D.div(B).mul(100).toString(),Q),no=new g(1).div(new g(Math.pow(10,a.value.lpInfo.decimals))).toString();Number(lo)<Number(no)?M.value=`<${no}`:M.value=lo}else D.toNumber()>0&&w.toNumber()<=0?M.value="100":M.value="--"},K=v=>{const w=new g(v.toString()),D=w.mul(new g(F.value).div(100)),B=new g(Math.pow(10,a.value.lpInfo.decimals));O.value=ao(w.minus(D).div(B).toString(),a.value.lpInfo.decimals)},Y=R(!1),V=R(!1),X=()=>{if(!a.value)return;const v=a.value.autoPoolPositionInfo.tick_lower_index,w=a.value.autoPoolPositionInfo.tick_upper_index,D=ko.sqrtPriceX64ToTickIndex(new to(a.value.current_sqrt_price));D<v&&(u.value?Y.value=!0:V.value=!0),D>w&&(u.value?V.value=!0:Y.value=!0);let B;if(t.value||d.value){if(I.value){const J=new g(t.value).mul(Math.pow(10,l.value.decimals)).toString();B=new to(J)}else{const J=new g(d.value).mul(Math.pow(10,s.value.decimals)).toString();B=new to(J)}const{liquidityAmount:Z,tokenMaxA:U,tokenMaxB:Q,tokenMaxAOrigin:lo,tokenMaxBOrigin:no}=k.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:l.value,tokenB:s.value,lowerTick:v,upperTick:w,coinAmount:B,iscoinA:I.value,roundUp:!0,slippage:Number(F.value)/100,curSqrtPrice:new to(a.value.current_sqrt_price)});I.value?d.value=Number(Q)>0?Q:"":t.value=Number(U)>0?U:"",S(Z),K(Z)}};so(()=>a.value,v=>{v&&!co(v)&&(l.value=v==null?void 0:v.token_a,s.value=v==null?void 0:v.token_b,Y.value=!1,V.value=!1,X())},{immediate:!0});const G=m(()=>h.value.RATES),x=m(()=>{var v,w,D,B,Z,U,Q,lo;if((w=G.value[(v=l.value)==null?void 0:v.address])!=null&&w.price&&((B=G.value[(D=s.value)==null?void 0:D.address])!=null&&B.price)){const no=new g(t.value||0).mul(new g((U=G.value[(Z=l.value)==null?void 0:Z.address])==null?void 0:U.price)),J=new g(d.value||0).mul(new g((lo=G.value[(Q=s.value)==null?void 0:Q.address])==null?void 0:lo.price));return qo(no.add(J).toString(),2)}else return"--"});so(t,(v,w)=>{v&&X(),v==""&&(M.value="--",d.value="",O.value="--")}),so(d,(v,w)=>{v&&X(),v==""&&(t.value="",M.value="--",O.value="--")});const{t:oo,locale:Mo}=jo(),vo=m(()=>{const v=Number(t.value)>Number(C.value),w=Number(d.value)>Number(y.value);return!t.value&&!d.value?oo("button.enterAmount"):v?oo("button.insufficientBalance",{name:l.value.symbol}):w?oo("button.insufficientBalance",{name:s.value.symbol}):"Add Liquidity"}),ro=m(()=>{const v=Number(t.value)>Number(C.value),w=Number(d.value)>Number(y.value);return!!(!t.value&&!d.value||v||w||t.value<=0&&d.value<=0)}),po=R(!0),{setIsShowSuccess:Ro,setIsShowRejected:$o,setIsShowWaiting:fo,setTransactionDesc:p,setTransactionTxid:H,setPositiomNum:_o}=q,Io=xo("Sui");return{wallet:$,positionInfo:a,isShowAddModal:n,needReverse:u,fromCoin:l,toCoin:s,fromCoinAmount:t,toCoinAmount:d,fromCoinBlance:C,toCoinBlance:y,fixedFromCoin:I,maxBtnSelect:E,halfBtnSelect:P,totalAmountUSD:x,addCommom:T,shareOfPool:M,minimumReceivedLP:O,addLiquidityBtnText:vo,addLiquidityBtnDisabled:ro,toAdd:async()=>{var lo,no;n.value=!1,po.value=!0,H("");const v=`${T(t.value)} ${(lo=l.value)==null?void 0:lo.symbol}`,w=`${T(d.value)} ${(no=s.value)==null?void 0:no.symbol}`;p(`Deposit ${t.value>0?v:""} ${d.value>0&&t.value>0?"and":""} ${d.value>0?w:""}`),fo(!0);const D=I.value,B=a.value.autoPoolPositionInfo.tick_lower_index,Z=a.value.autoPoolPositionInfo.tick_upper_index;let U;if(I.value){const J=new g(t.value).mul(Math.pow(10,l.value.decimals)).toString();U=new to(J)}else{const J=new g(d.value).mul(Math.pow(10,s.value.decimals)).toString();U=new to(J)}const Q=a.value.rewarderInfo.map(J=>J.coinAddress);try{const J={lowerTick:B,upperTick:Z,coinAmount:U,fix_amount_a:D,slippage:Number(F.value)/100,curSqrtPrice:new to(a.value.current_sqrt_price),id:a.value.id,clmm_pool:a.value.autoPoolPositionInfo.pool,lp_token_type:a.value.lp_token_type,coinTypeA:a.value.autoPoolPositionInfo.coin_type_a,coinTypeB:a.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:Q},Yo=await Io.deposit(J),me=await $.value.currentWallet.signAndExecuteTransactionBlock(Yo);let Oo=k.value.handleTx(me);if(Oo&&Oo.hash){H(Oo.hash),fo(!1),Ro(!0);const zo={title:"Supplied",desc:`Deposit ${t.value>0?v:""} ${d.value>0&&t.value>0?"and":""} ${d.value>0?w:""}`,hash:Oo.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${t.value>0?v:""} ${d.value>0&&t.value>0?"and":""} ${d.value>0?w:""}`};N.value!=="Aptos"&&(zo.res=Oo.res),k.value.showTransitionPending(zo),await k.value.watchTransaction(zo)&&setTimeout(()=>{b.updatePositionItem(a.value.id),k.value.getAccount($.value.address)},1e3),_o()}else fo(!1),$o(!0);t.value="",d.value="",po.value=!1}catch{t.value="",d.value="",po.value=!1,fo(!1),$o(!0)}},showToCoinLock:V,showFromCoinLock:Y}}});const Wo=o=>(So("data-v-3857f699"),o=o(),wo(),o),rt={class:"auto-pool-add"},mt={class:"auto-pool-add-content"},ct={class:"liquidity-action-tab"},vt=Wo(()=>e("div",{class:"increase tab-active"},"Add",-1)),pt={class:"card-item"},ft={class:"card-item"},_t={class:"add-info"},bt={class:"total-amount"},ht=Wo(()=>e("span",null,"Total Amount",-1)),yt={class:"total-amount"},gt=Wo(()=>e("span",null,"Share of Pool",-1)),$t={class:"total-amount"},It=Wo(()=>e("span",null,"Minimum Received LP",-1)),kt=Wo(()=>e("span",null,"Pool Closed",-1));function Ct(o,n,q,A,N,$){var a,i,u,l,s;const b=Ce,_=Se,c=Eo,h=ae;return f(),L("div",rt,[e("div",mt,[e("div",ct,[vt,e("div",{class:"remove",onClick:n[0]||(n[0]=ne(t=>o.$emit("changeCurrentTab"),["stop"]))},"Remove")]),e("div",{class:Vo(o.needReverse?"card-container reverse":"card-container")},[e("div",pt,[W(b,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":n[1]||(n[1]=t=>o.fromCoinAmount=t),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[2]||(n[2]=t=>o.maxBtnSelect("fromCoin")),onOnHalf:n[3]||(n[3]=t=>o.halfBtnSelect("fromCoin")),onOnInput:n[4]||(n[4]=t=>{o.fromCoinAmount=t}),onOnFocus:n[5]||(n[5]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock?(f(),z(_,{key:0})):bo("",!0)]),e("div",ft,[W(b,{modelValue:o.toCoinAmount,"onUpdate:modelValue":n[6]||(n[6]=t=>o.toCoinAmount=t),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[7]||(n[7]=t=>o.maxBtnSelect("toCoin")),onOnHalf:n[8]||(n[8]=t=>o.halfBtnSelect("toCoin")),onOnInput:n[9]||(n[9]=t=>{o.toCoinAmount=t}),onOnFocus:n[10]||(n[10]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock?(f(),z(_,{key:0})):bo("",!0)])],2),e("div",_t,[e("div",bt,[ht,e("span",null,"$"+r(("addCommom"in o?o.addCommom:j(T))(o.totalAmountUSD)),1)]),e("div",yt,[gt,e("span",null,r(o.shareOfPool)+"%",1)]),e("div",$t,[It,e("span",null,r(("addCommom"in o?o.addCommom:j(T))(o.minimumReceivedLP))+" "+r(o.needReverse?(a=o.toCoin)==null?void 0:a.symbol:(i=o.fromCoin)==null?void 0:i.symbol)+"-"+r(o.needReverse?(u=o.fromCoin)==null?void 0:u.symbol:(l=o.toCoin)==null?void 0:l.symbol),1)])])]),(s=o.positionInfo)!=null&&s.is_pause?(f(),z(c,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:io(()=>[kt]),_:1})):o.wallet.connected?(f(),z(c,{key:1,class:"big-btn liquidity-btn",disabled:o.addLiquidityBtnDisabled,onClick:n[11]||(n[11]=t=>o.isShowAddModal=!0)},{default:io(()=>[e("span",null,r(o.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(f(),z(c,{key:2,class:"big-btn",onClick:n[12]||(n[12]=t=>o.wallet.setIsShowWalletModal(!0))},{default:io(()=>[e("span",null,r(o.$t("button.connectWallet")),1)]),_:1})),o.isShowAddModal?(f(),z(h,{key:3,"pool-info":o.positionInfo,"from-coin":o.needReverse?o.positionInfo.token_b:o.positionInfo.token_a,"to-coin":o.needReverse?o.positionInfo.token_a:o.positionInfo.token_b,"from-coin-amount":o.needReverse?o.toCoinAmount:o.fromCoinAmount,"to-coin-amount":o.needReverse?o.fromCoinAmount:o.toCoinAmount,"total-amount":o.totalAmountUSD,"share-of-pool":o.shareOfPool,"minimum-received-l-p":o.minimumReceivedLP,onOnClose:n[13]||(n[13]=t=>o.isShowAddModal=!1),onToAdd:o.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","onToAdd"])):bo("",!0)])}const ue=go(dt,[["render",Ct],["__scopeId","data-v-3857f699"]]),St=ho({props:{inputValue:{type:String,default:""},balance:{type:String,default:""},lpDecimals:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},inputDisabled:{type:Boolean,default:!1},positionInfo:{default:()=>({})}},setup(o,n){const{t:q,locale:A}=jo(),N=Co(),$=m(()=>N),b=m(()=>new g(Number(o.balance)).div(2)),_=be(he,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function c(){this.$emit("onSelect")}const h=y=>{const E=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${o.lpDecimals&&o.lpDecimals}})?).*$`);y.target.value=y.target.value.replace(E,"$1")},a=Do(),i=m(()=>a),u=No(),l=m(()=>u),s=m(()=>l.value.tokensWarningObj);so(()=>l.value.RATES,y=>{},{immediate:!0});const t=m(()=>l.value.tokensObj),d=m(()=>$.value.theme);return{route:yo(),theme:d,tokensObj:t,pool:l,halfBalance:b,t:q,addCommom:T,store:$,wallet:i,indicator:_,inputChange:h,importIcon:mo,selectCoin:c,formatNumber:_e,tokensWarningObj:s,checkNullObj:co,getCoinIcon:y=>(y==null?void 0:y.logoURI)||(y==null?void 0:y.logo_url)||mo("/image/coins/sui-unknown.png")}}});const wt=o=>(So("data-v-afb7957e"),o=o(),wo(),o),At={class:"card"},Pt={class:"top"},Rt={key:1,class:"input-div"},Tt={key:0},qt={class:"left"},Nt={class:"loading-token"},Lt={class:"lp-bg"},Bt={key:0,alt:""},Mt={class:"bottom"},Ot=wt(()=>e("div",null,null,-1)),Dt={class:"top"},Ut={class:"right"};function jt(o,n,q,A,N,$){const b=ye,_=te,c=Lo("image");return f(),L("div",At,[e("div",Pt,[o.inputDisabled?(f(),L("div",Rt,[o.inputValue?(f(),L("span",Tt,r(o.inputValue),1)):(f(),z(_,{key:1,indicator:o.indicator},null,8,["indicator"]))])):(f(),z(b,{key:0,value:o.inputValue=="InsufficientLiquidity"?"":o.inputValue,placeholder:"0.0",disabled:o.inputDisabled,onChange:o.inputChange,onInput:n[0]||(n[0]=h=>o.$emit("onInput",h.target.value)),onFocus:n[1]||(n[1]=h=>o.$emit("onFocus"))},null,8,["value","disabled","onChange"])),e("div",qt,[e("div",Nt,[e("div",Lt,[o.positionInfo&&!("checkNullObj"in o?o.checkNullObj:j(co))(o.positionInfo)&&o.positionInfo.lpInfo?eo((f(),L("img",Bt,null,512)),[[c,o.getCoinIcon(o.positionInfo.lpInfo)]]):bo("",!0)]),e("p",null,r(o.fromCoin.symbol)+" - "+r(o.toCoin.symbol),1)])])]),e("div",Mt,[Ot,e("div",Dt,[e("div",Ut,[uo(r(o.$t("common.balance"))+" ",1),e("span",{class:"balance",onClick:n[2]||(n[2]=h=>o.$emit("onMax"))},r(o.wallet.connected?("addCommom"in o?o.addCommom:j(T))(o.balance,o.lpDecimals):"0"),1)])])])])}const Ft=go(St,[["render",jt],["__scopeId","data-v-afb7957e"]]),Wt=ho({components:{Modal:oe},props:{title:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"11111111111"},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},isIncrease:{type:Boolean,default:!1},fixedFromCoin:{type:Boolean,default:!0},currentPriceTab:{type:String,default:""},currentPrice:{type:String,default:""},currentPriceReverse:{type:String,default:""},showFromCoinLock:{type:Boolean,default:!1},showToCoinLock:{type:Boolean,default:!1},currentDirect:{type:Boolean,default:!0},positionTotalAmount:{type:Number,default:0},tickLower:{type:Number,default:0},tickUpper:{type:Number,default:0},isCreate:{type:Boolean,default:!1}},setup(o,n){const{t:q}=jo(),A=m(()=>{var u,l,s;return((u=o==null?void 0:o.poolInfo)==null?void 0:u.needReverse)||((s=(l=o==null?void 0:o.poolInfo)==null?void 0:l.poolInfo)==null?void 0:s.needReverse)}),N=No(),$=m(()=>N),b=Co(),_=m(()=>b),c=u=>{var l;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((l=$.value.tokensObj[u==null?void 0:u.address])==null?void 0:l.logo_url)||(_.value.theme==="default"?mo("/image/coins/unknown.png"):mo("/image/coins/sui-unknown.png"))},h=yo(),a=R(!1);return{needReverse:A,getCoinIcon:c,addCommom:T,t:q,route:h,checked:a,decimalUi:qo,clickSubmit:()=>{n.emit("toAdd")}}}});const Po=o=>(So("data-v-a27577b5"),o=o(),wo(),o),Et=Po(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Xt={class:"modal-content"},zt={class:"pool-info"},Vt={class:"left"},Ht={alt:""},Yt={alt:""},Gt={class:"pool-name"},Zt={class:"right"},Jt=Po(()=>e("div",{class:"lp-info"},[e("div",{class:"lp-num"},[e("p",null,"1,126,122.123456"),e("span",null,"USDT-USDC LP")]),e("div",{class:"lp-bg"})],-1)),Kt={class:"est-receive"},Qt=Po(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),xt={class:"token-a"},os=Po(()=>e("div",null,"0.941824",-1)),es={alt:""},ns=Po(()=>e("span",null,"USDT",-1)),ts={class:"token-a"},ss=Po(()=>e("div",null,"0.941824",-1)),is={alt:""},ls=Po(()=>e("span",null,"USDC",-1));function as(o,n,q,A,N,$){const b=Ho,_=Eo,c=ee("Modal"),h=Lo("image");return f(),z(c,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:n[0]||(n[0]=a=>o.$emit("onClose"))},{closeIcon:io(()=>[Et]),default:io(()=>{var a,i,u,l,s,t,d,I,C,y,E,P,k,F,M,O,S,K,Y,V,X,G,x,oo;return[e("div",Xt,[e("div",zt,[e("div",Vt,[e("div",null,[eo(e("img",Ht,null,512),[[h,o.needReverse?(l=(u=o.poolInfo)==null?void 0:u.token_b)==null?void 0:l.logo_url:(i=(a=o.poolInfo)==null?void 0:a.token_a)==null?void 0:i.logo_url]]),W(b,{address:o.needReverse?(I=(d=o.poolInfo)==null?void 0:d.token_b)==null?void 0:I.address:(t=(s=o.poolInfo)==null?void 0:s.token_a)==null?void 0:t.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[eo(e("img",Yt,null,512),[[h,o.needReverse?(P=(E=o.poolInfo)==null?void 0:E.token_a)==null?void 0:P.logo_url:(y=(C=o.poolInfo)==null?void 0:C.token_b)==null?void 0:y.logo_url]]),W(b,{address:o.needReverse?(O=(M=o.poolInfo)==null?void 0:M.token_a)==null?void 0:O.address:(F=(k=o.poolInfo)==null?void 0:k.token_b)==null?void 0:F.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",Gt,[e("span",null,r(o.needReverse?(V=(Y=o.poolInfo)==null?void 0:Y.token_b)==null?void 0:V.symbol:(K=(S=o.poolInfo)==null?void 0:S.token_a)==null?void 0:K.symbol),1),uo(" - "),e("span",null,r(o.needReverse?(oo=(x=o.poolInfo)==null?void 0:x.token_a)==null?void 0:oo.symbol:(G=(X=o.poolInfo)==null?void 0:X.token_b)==null?void 0:G.symbol),1)])]),e("div",Zt,[uo(" Fee tier "),e("span",null,r(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),Jt,e("div",Kt,[Qt,e("div",xt,[os,e("div",null,[eo(e("img",es,null,512),[[h,"1"]]),ns])]),e("div",ts,[ss,e("div",null,[eo(e("img",is,null,512),[[h,"1"]]),ls])])])]),W(_,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:io(()=>[uo(r(o.isIncrease?"Increase Liquidity":o.title==o.$t("button.addLiquidity")?"Add Liquidity":"Create and Add Liquidity"),1)]),_:1},8,["onClick"])]}),_:1})}const de=go(Wt,[["render",as],["__scopeId","data-v-a27577b5"]]),us=ho({components:{AutoPoolRemoveModal:de},setup(){const o=Do(),n=m(()=>o),q=Co(),A=m(()=>q),N=m(()=>A.value.slippage),$=m(()=>A.value.chainName),b=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],_=R(25),c=yo(),h=Uo(),a=m(()=>h),i=m(()=>a.value.positionInfoObj[c.params.id]),u=m(()=>{var p;return(p=i.value)==null?void 0:p.needReverse}),l=R(),s=R(),t=R(!1),d=R(),I=m(()=>{var p;return(p=i.value)==null?void 0:p.myLiquidity}),C=R(!0),y=m(()=>$.value?Qo($.value):{}),E=xo("Sui"),P=R("--"),k=R("--"),F=R("--"),M=()=>{if(C.value||!i.value)return;if(!d.value){P.value="--",k.value="--",_.value=0;return}if(Number(d.value)>Number(I.value))return;if(Number(d.value)*Math.pow(10,i.value.decimals)==Number(I.value)){_.value=100,S({value:1}),C.value=!0;return}const p=new g(d.value).mul(Math.pow(10,i.value.lpInfo.decimals)).toString(),H=new g(d.value).div(new g(I.value)).mul(100),_o=i.value.tick_lower_index,Io=i.value.tick_upper_index,To=i.value.token_a.decimals,v=i.value.token_b.decimals,w=ko.tickIndexToSqrtPriceX64(_o),D=ko.tickIndexToSqrtPriceX64(Io),B=Jo.get_share_liquidity_by_amount({liquidity:i.value.liquidity,total_supply:i.value.total_supply},p.toString()),Z=Zo.getCoinAmountFromLiquidity(new to(B),new to(i.value.object.current_sqrt_price),w,D,!1),U=new g(Z.coinA.toString()).div(Math.pow(10,To)).toString(),Q=new g(Z.coinB.toString()).div(Math.pow(10,v)).toString();P.value=Number(U)>0?U:"--",k.value=Number(Q)>0?Q:"--",_.value=H.toString(),F.value=ao(p,0),O.value=ao(B,0)},O=R(),S=p=>{if(!C.value)return;C.value=!0;const H=i.value.token_a.decimals,_o=i.value.token_b.decimals,Io=i.value.tick_lower_index,To=i.value.tick_upper_index,v=ko.tickIndexToSqrtPriceX64(Io),w=ko.tickIndexToSqrtPriceX64(To);let D="",B;p.value!==1?B=new g(i.value.myLiquidity).mul(Math.pow(10,i.value.lpInfo.decimals)).mul(p.value).toString():B=new g(i.value.myLiquidity).mul(Math.pow(10,i.value.lpInfo.decimals)).toString(),d.value=new g(B).div(Math.pow(10,i.value.lpInfo.decimals)),D=Jo.get_share_liquidity_by_amount({liquidity:i.value.liquidity,total_supply:i.value.total_supply},B),F.value=ao(B,0),O.value=ao(D,0);const Z=Zo.getCoinAmountFromLiquidity(new to(D),new to(i.value.object.current_sqrt_price),v,w,!1),U=new g(Z.coinA.toString()).div(Math.pow(10,H)).toString(),Q=new g(Z.coinB.toString()).div(Math.pow(10,_o)).toString();P.value=Number(U)>0?U:"--",k.value=Number(Q)>0?Q:"--"};so(_,ge((p,H)=>{p!==H&&(Number(p)>100?_.value=100:p&&i.value?(_.value=p,S({value:_.value/100})):(P.value="--",k.value="--"))},300)),so(()=>d.value,p=>{M()},{immediate:!0});const K=se(),{setIsShowSuccess:Y,setIsShowRejected:V,setIsShowWaiting:X,setTransactionDesc:G,setTransactionTxid:x,setPositiomNum:oo,setTransactionDescText:Mo}=q,vo=R(!1),{t:ro}=jo(),po=async()=>{var B,Z;vo.value=!0,x("");const p=Number(P.value)>0?`${T(P.value,l.value.decimals)} ${l.value.symbol}`:"",H=Number(k.value)>0?`${T(k.value,s.value.decimals)} ${s.value.symbol}`:"";G(ro("tips.removeLiquidiyText",{from:u.value?H:p,and:Number(P.value)>0&&Number(k.value)>0?"and":"",to:u.value?p:H})),X(!0);const _o=ro("modal.removeLiquidityText2");Mo(_o);const Io=i.value.autoPoolPositionInfo.tick_lower_index,To=i.value.autoPoolPositionInfo.tick_upper_index,v=ko.tickIndexToSqrtPriceX64(Io),w=ko.tickIndexToSqrtPriceX64(To),D=i.value.rewarderInfo.map(U=>U.coinAddress);try{const U={lowerSqrtPrice:v,upperSqrtPrice:w,lpTokenAmount:new to(F.value),liquidity:new to(O.value),curSqrtPrice:new to(i.value.object.current_sqrt_price),slippage:Number(N.value)/100,id:i.value.id,clmm_pool:i.value.autoPoolPositionInfo.pool,lp_token_type:i.value.lp_token_type,coinTypeA:i.value.autoPoolPositionInfo.coin_type_a,coinTypeB:i.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:D},Q=await E.remove(U),lo=await n.value.currentWallet.signAndExecuteTransactionBlock(Q);let no=y.value.handleTx(lo);if(no&&no.hash){x(no.hash),X(!1),Y(!0);const J={title:ro("common.removeLiquidity"),desc:"",hash:no.hash,descTransactions:`Remove ${p} ${Number(P.value)>0&&Number(k.value)>0?"and":""} ${H} from the pool`,sender:n.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${P.value} ${(B=l.value)==null?void 0:B.symbol} and ${k.value} ${(Z=s.value)==null?void 0:Z.symbol}`};J.res=no.res,y.value.showTransitionPending(J),await y.value.watchTransaction(J)&&(P.value="",k.value="",d.value="",_.value=0,setTimeout(()=>{h.updatePositionItem(i.value.id),y.value.getAccount(n.value.address)},1e3),Number(_.value)==100&&c.name=="auto-pool-detail"&&K.push("/pool/auto"))}else X(!1),V(!0);vo.value=!1}catch{vo.value=!1,X(!1),V(!0)}};so(()=>i.value,(p,H)=>{p&&!co(p)&&(l.value=p==null?void 0:p.token_a,s.value=p==null?void 0:p.token_b,(!H||H&&H.address!==p.address)&&S({value:_.value/100}))},{immediate:!0});const Ro=m(()=>{const p=Number(d.value)>Number(I.value);return!d.value||d.value<=0?ro("button.enterAmount"):p?"Invalid Amount":ro("button.remove")}),$o=m(()=>{const p=Number(d.value)>Number(I.value);return!!(!d.value||d.value<=0||p)});return{removeLiquidityBtnText:Ro,removeLiquidityBtnDisabled:$o,wallet:n,ratioArr:b,positionInfo:i,isShowRemoveModal:t,needReverse:u,fromCoin:l,toCoin:s,lpAmount:d,lpBalance:I,sliderVal:_,sFixD:ao,isSlider:C,fromCoinAmount:P,toCoinAmount:k,setPercent:S,toRemove:po,addCommom:T,getCoinIcon:p=>(p==null?void 0:p.logoURI)||(p==null?void 0:p.logo_url)||mo("/image/coins/sui-unknown.png")}}});const Xo=o=>(So("data-v-3b3f70cf"),o=o(),wo(),o),ds={class:"auto-pool-add"},rs={class:"auto-pool-add-content"},ms={class:"liquidity-action-tab"},cs=Xo(()=>e("div",{class:"remove tab-active"},"Remove",-1)),vs={class:"card-item"},ps={class:"remove-ratio"},fs=Xo(()=>e("div",{class:"remove-ratio-title"},"Amount",-1)),_s={class:"remove-ratio-select"},bs={key:0,class:"ratio"},hs={key:1,class:"ratio"},ys={class:"ratio-list"},gs=["onClick"],$s={class:"est-receive"},Is=Xo(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),ks={class:"token-a"},Cs={alt:""},Ss={class:"token-a"},ws={alt:""},As=Xo(()=>e("span",null,"Pool Closed",-1));function Ps(o,n,q,A,N,$){var i,u,l,s,t,d,I,C,y,E,P,k,F,M,O;const b=Ft,_=ke,c=Eo,h=de,a=Lo("image");return f(),L("div",ds,[e("div",rs,[e("div",ms,[e("div",{class:"increase",onClick:n[0]||(n[0]=ne(S=>o.$emit("changeCurrentTab"),["stop"]))},"Add"),cs]),e("div",{class:Vo(o.needReverse?"card-container reverse":"card-container")},[e("div",vs,[W(b,{modelValue:o.lpAmount,"onUpdate:modelValue":n[1]||(n[1]=S=>o.lpAmount=S),"input-value":o.lpAmount,balance:o.lpBalance,"from-coin":o.needReverse?o.toCoin:o.fromCoin,"to-coin":o.needReverse?o.fromCoin:o.toCoin,"position-info":o.positionInfo,"lp-decimals":(u=(i=o.positionInfo)==null?void 0:i.lpInfo)==null?void 0:u.decimals,onOnMax:n[2]||(n[2]=()=>{o.sliderVal=100,o.setPercent({value:1})}),onOnInput:n[3]||(n[3]=S=>{o.isSlider=!1,o.lpAmount=S})},null,8,["modelValue","input-value","balance","from-coin","to-coin","position-info","lp-decimals"])])],2),e("div",ps,[fs,e("div",_s,[Number(o.lpBalance)>=Number(o.lpAmount)?(f(),L("div",bs,r(o.sliderVal>0&&Number(("sFixD"in o?o.sFixD:j(ao))(o.sliderVal,2))<.01?"<0.01":("sFixD"in o?o.sFixD:j(ao))(o.sliderVal,2))+"% ",1)):(f(),L("div",hs,"--")),e("div",ys,[(f(!0),L($e,null,Ie(o.ratioArr,(S,K)=>(f(),L("div",{key:K,class:Vo(["ratio-item",o.sliderVal==S.value?"ratio-item-active":""]),onClick:()=>{o.isSlider=!0,o.sliderVal=S.value}},r(S.name),11,gs))),128))])]),W(_,{value:o.sliderVal,"onUpdate:value":n[4]||(n[4]=S=>o.sliderVal=S)},null,8,["value"])]),e("div",$s,[Is,e("div",ks,[e("div",null,r(("addCommom"in o?o.addCommom:j(T))(o.fromCoinAmount)),1),e("div",null,[eo(e("img",Cs,null,512),[[a,o.needReverse?o.getCoinIcon((l=o.positionInfo)==null?void 0:l.token_b):o.getCoinIcon((s=o.positionInfo)==null?void 0:s.token_a)]]),e("span",null,r(o.needReverse?(d=(t=o.positionInfo)==null?void 0:t.token_b)==null?void 0:d.symbol:(C=(I=o.positionInfo)==null?void 0:I.token_a)==null?void 0:C.symbol),1)])]),e("div",Ss,[e("div",null,r(("addCommom"in o?o.addCommom:j(T))(o.toCoinAmount)),1),e("div",null,[eo(e("img",ws,null,512),[[a,o.needReverse?o.getCoinIcon((y=o.positionInfo)==null?void 0:y.token_a):o.getCoinIcon((E=o.positionInfo)==null?void 0:E.token_b)]]),e("span",null,r(o.needReverse?(k=(P=o.positionInfo)==null?void 0:P.token_a)==null?void 0:k.symbol:(M=(F=o.positionInfo)==null?void 0:F.token_b)==null?void 0:M.symbol),1)])])])]),(O=o.positionInfo)!=null&&O.is_pause?(f(),z(c,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:io(()=>[As]),_:1})):o.wallet.connected?(f(),z(c,{key:1,class:"big-btn liquidity-btn",disabled:o.removeLiquidityBtnDisabled,onClick:o.toRemove},{default:io(()=>[e("span",null,r(o.removeLiquidityBtnText),1)]),_:1},8,["disabled","onClick"])):(f(),z(c,{key:2,class:"big-btn",onClick:n[5]||(n[5]=S=>o.wallet.setIsShowWalletModal(!0))},{default:io(()=>[e("span",null,r(o.$t("button.connectWallet")),1)]),_:1})),o.isShowRemoveModal?(f(),z(h,{key:3,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,onOnClose:n[6]||(n[6]=S=>o.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):bo("",!0)])}const re=go(us,[["render",Ps],["__scopeId","data-v-3b3f70cf"]]),Rs=ho({components:{AutoPoolAdd:ue,AutoPositionInfo:ie,AutoPositionLiquidity:le,AutoPoolRemove:re},setup(){const o=R("add"),n=Do(),q=m(()=>n),A=Uo(),N=m(()=>A),$=No(),b=m(()=>$);so(()=>b.value.poolConfigList,l=>{l&&l.length>0&&A.getAutoPoolList()},{immediate:!0}),so(()=>[q.value.address,N.value.autoPoolList,b.value.poolConfigList],([l,s,t])=>{l&&s&&s.length>0&&t&&t.length>0&&A.getMyAutoPoolPosition()},{immediate:!0});const _=yo(),c=m(()=>N.value.positionInfoObj[_.params.id]||{});so(()=>_.query.action,l=>{l&&(o.value=l)},{immediate:!0});const h=se();so(()=>q.value.address,l=>{l||h.push("/pool/auto")},{immediate:!0});const a=Co(),i=m(()=>a);return{currentTab:o,positionInfo:c,clickRefresh:()=>{A.getAutoPoolAPY(),A.getAutoPoolList(),$.setPoolConfigList(i.value.chainName,i.value.filterCoinsObj)},checkNullObj:co}}});const Ts={class:"auto-increase-liquidity"},qs={class:"auto-increase-liquidity-content pc-content"},Ns={class:"left"},Ls={class:"right"},Bs={class:"auto-increase-liquidity-content h5-content"},Ms={class:"left"},Os={class:"right"};function Ds(o,n,q,A,N,$){const b=ce,_=ie,c=le,h=ue,a=re,i=te;return f(),L("div",Ts,[W(b,{onClickRefresh:o.clickRefresh},null,8,["onClickRefresh"]),e("div",qs,[e("div",Ns,[W(_),W(c)]),e("div",Ls,[o.currentTab=="add"?(f(),z(h,{key:0,onChangeCurrentTab:n[0]||(n[0]=u=>o.currentTab="remove")})):(f(),z(a,{key:1,onChangeCurrentTab:n[1]||(n[1]=u=>o.currentTab="add")}))]),("checkNullObj"in o?o.checkNullObj:j(co))(o.positionInfo)?(f(),z(i,{key:0})):bo("",!0)]),e("div",Bs,[e("div",Ms,[W(_),o.currentTab=="add"?(f(),z(h,{key:0,onChangeCurrentTab:n[2]||(n[2]=u=>o.currentTab="remove")})):(f(),z(a,{key:1,onChangeCurrentTab:n[3]||(n[3]=u=>o.currentTab="add")}))]),e("div",Os,[W(c)]),("checkNullObj"in o?o.checkNullObj:j(co))(o.positionInfo)?(f(),z(i,{key:0})):bo("",!0)])])}const di=go(Rs,[["render",Ds],["__scopeId","data-v-410a8251"]]);export{di as default};
