import{_ as ae}from"./token-warning.ba9676ac.js";import{D as ke,i as le,u as ie,f as ge,b as M,A as re,a as ye,p as Ce,B as $e}from"./pool.caea2355.js";import{a as de,l as ue,m as p,a2 as we,a3 as ce,D as q,e as me,q as pe,o as t,f as r,h as a,c as O,v as u,z as W,t as E,i as N,w as h,x as j,u as $,j as Z,I as Se,K as ve,ab as Te,S as Le,B as Ie,p as be,k as fe,M as Oe,r as P,y as Ne,ac as je,L as K,a4 as Be,F as se,s as te,G as Ae,ad as Pe}from"./entry.87554927.js";/* empty css              *//* empty css              *//* empty css              */import{i as D}from"./import-icon.de3e6c66.js";import{u as G}from"./index.222d0c10.js";/* empty css              */import{_ as De,a as Me}from"./img-no-Positions_2x.ed406d3e.js";const Re=de({components:{TokenWarning:ae},props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,d){const{t:i,locale:H}=ue(),F=G(),f=p(()=>F),g=p(()=>new ke(Number(e.balance)).div(2)),c=we(ce,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function T(){this.$emit("onSelect")}const _=s=>{const b=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(v==null?void 0:v.value)&&(v==null?void 0:v.value)}})?).*$`);s.target.value=s.target.value.replace(b,"$1")},w=le(),S=p(()=>w),m=ie(),o=p(()=>m);let k={};q(()=>o.value.RATES,s=>{s&&(k=s)},{immediate:!0});const B=p(()=>ge(Number(e.inputValue)*Number(k&&k[e.address]&&k[e.address].price),2)),L=p(()=>{var s,b;return o.value.tokensObj&&e.address&&o.value.tokensObj[e.address]&&((s=o.value.tokensObj[e.address])==null?void 0:s.labels)&&((b=o.value.tokensObj[e.address])==null?void 0:b.labels[0])}),v=p(()=>{var s;return o.value.tokensObj&&e.address&&o.value.tokensObj[e.address]&&((s=o.value.tokensObj[e.address])==null?void 0:s.decimals)}),V=p(()=>{var s,b,y,A;return e.coinIcon||((b=(s=o==null?void 0:o.value)==null?void 0:s.tokensObj[e.address])==null?void 0:b.logo_url)||((A=(y=o==null?void 0:o.value)==null?void 0:y.tokensObj[e.address])==null?void 0:A.logoURI)||""}),z=p(()=>o.value.tokensObj);return{theme:p(()=>f.value.theme),currentIcon:V,tokensObj:z,pool:o,halfBalance:g,coinLabels:L,t:i,addCommom:M,store:f,wallet:S,indicator:c,inputChange:_,importIcon:D,selectCoin:T,amountPirce:B,coinDecimals:v,formatNumber:re}}});const Fe=e=>(be("data-v-b33616d3"),e=e(),fe(),e),Ve={class:"card"},ze={class:"top"},Ue={key:1,class:"input-div"},Ze={key:0},qe={class:"loading-token"},Ee={key:1},We={key:0},He=Fe(()=>a("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ke=[He],Ge={class:"bottom"},Je={key:0,class:"amount-price"},Qe={key:1},Xe={class:"top"},Ye={class:"right"},xe={class:"balance"};function eo(e,d,i,H,F,f){const g=Se,c=ve,T=Te,_=ae,w=Le,S=Ie,m=pe("image");return t(),r("div",Ve,[a("div",ze,[e.inputDisabled?(t(),r("div",Ue,[e.inputValue?(t(),r("span",Ze,u(e.inputValue),1)):(t(),O(c,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(t(),O(g,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:d[0]||(d[0]=o=>e.$emit("onInput",o.target.value)),onFocus:d[1]||(d[1]=o=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),a("div",{class:W(["left",e.hasArrow?"":"nohands"]),onClick:d[2]||(d[2]=o=>e.hasArrow&&!e.pool.isTokenLoading?e.selectCoin():"")},[a("div",qe,[e.pool.isTokenLoading?(t(),O(T,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):E((t(),r("img",Ee,null,512)),[[m,e.currentIcon]]),N(_,{address:e.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),N(w,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:h(()=>[a("div",null,[a("p",null,u(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(t(),r("p",We,u(e.coinLabels),1)):j("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(t(),r("svg",{key:0,class:W(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},Ke,2)):j("",!0)],2)]),a("div",Ge,[e.inputValue&&e.amountPirce!="--"?(t(),r("div",Je," $"+u(("formatNumber"in e?e.formatNumber:$(re))(e.amountPirce)),1)):(t(),r("div",Qe)),a("div",Xe,[a("div",Ye,[Z(u(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),a("span",xe,u(e.wallet.connected?("addCommom"in e?e.addCommom:$(M))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(t(),O(S,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:$(M))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:d[3]||(d[3]=o=>e.$emit("onHalf"))},{default:h(()=>[Z(u("Half"))]),_:1},8,["disabled"])):j("",!0),e.havemax&&e.wallet.connected?(t(),O(S,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:$(M))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:d[4]||(d[4]=o=>e.$emit("onMax"))},{default:h(()=>[Z(u(e.$t("button.max")),1)]),_:1},8,["disabled"])):j("",!0)])])])])}const Ho=me(Re,[["render",eo],["__scopeId","data-v-b33616d3"]]);const oo=de({components:{Modal:Oe,LoadingOutlined:ce},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""},isCreatePoolToCoin:{type:Boolean,default:!1},isCreatePoolFromCoin:{type:Boolean,default:!1}},setup(e,d){const{t:i,locale:H}=ue(),F=le(),f=p(()=>F),g=ie(),c=p(()=>g),T=G(),_=p(()=>T),w=p(()=>{var s;return(s=_.value)==null?void 0:s.filterCreatePoolCoin}),S=P([i("tab.all"),i("tab.native"),i("tab.layerZero"),i("tab.wormhole"),i("tab.celer")]),m=P(i("tab.all")),o=P(i("tab.all")),k=G(),B=p(()=>k.chainName),L=P([]),v=P(null);Ne(()=>{});const V=P(!1);q(m,s=>{s!==i("tab.all")&&(V.value=!1),s==i("tab.all")?o.value=i("tab.all"):s==i("tab.layerZero")?o.value=i("tab.layerZero"):s==i("tab.wormhole")?o.value=i("tab.wormhole"):s==i("tab.celer")?o.value=i("tab.celer"):s==i("tab.native")&&(o.value=i("tab.native")),z(v.value)});const z=async s=>{var Q,X,Y,x,ee,oe,ne;let b=[],y=c.value.tokens;if(!(_.value.chainName&&y&&y[0]&&_.value.chainName.toLowerCase().includes((Q=y[0])==null?void 0:Q.chain))){L.value=[];return}let A=y;if(s&&s.split("::")&&s.split("::").length==3&&B.value=="Sui"){const l=ye("Sui");try{const n=c.value.tokensObj[s]||await l.getTokenBySymbol(c.value.tokens,s);n&&((X=y.filter(C=>(C==null?void 0:C.address)===(n==null?void 0:n.address)))==null?void 0:X.length)<1&&(g.setNewTokens({[s]:n}),A=y.concat(n))}catch{}}for(const l of Object.keys(A)){let n=je(A[l]);const C=f.value.assets[n.address]&&f.value.assets[n.address].balance?Ce(f.value.assets&&f.value.assets[n.address].balance,n.decimals):0;e.lastSelectCoin&&n&&n.address===e.lastSelectCoin?n.unusable=!0:n.unusable=!1;const _e=((Y=c.value.tokensObj[n.address])==null?void 0:Y.labels)&&((x=c.value.tokensObj[n.address])==null?void 0:x.labels[0]),he=c.value.tokensObj[n.address]?(ee=c.value.tokensObj[n.address])==null?void 0:ee.name:n.name;n={...n,balance:C,labels:_e,name:he,sort:(_.value.chainName==="Aptos"?n.symbol=="APT":n.symbol=="SUI")?1:-1},b.push(n)}let U;f.value.address?U=b.sort((l,n)=>n.balance-l.balance):U=b;let I=[];if(s){const l=U.filter(n=>n.symbol.toLowerCase().indexOf(s.toLowerCase())!==-1||n.address.toLowerCase().indexOf(s.toLowerCase())!==-1||n.address.toLowerCase().indexOf($e(s).full_address.toLowerCase())!==-1);m.value!==i("tab.all")?I=l.filter(C=>m.value==i("tab.native")?!C.labels:C.labels&&C.labels.toLowerCase()==m.value.toLowerCase()):I=l}else m.value!==i("tab.all")?I=U.filter(n=>m.value==i("tab.native")?!n.labels:n.labels&&n.labels.toLowerCase()==m.value.toLowerCase()):I=U;e.isCreatePoolToCoin?L.value=(oe=I.filter(l=>w.value[l==null?void 0:l.address]))==null?void 0:oe.sort((l,n)=>n.sort-l.sort).sort((l,n)=>n.unusable-l.unusable):L.value=I.sort((l,n)=>n.sort-l.sort).sort((l,n)=>n.unusable-l.unusable),e.isCreatePoolFromCoin&&(L.value=(ne=I.filter(l=>!w.value[l==null?void 0:l.address]))==null?void 0:ne.sort((l,n)=>n.sort-l.sort).sort((l,n)=>n.unusable-l.unusable))},J=s=>{s.unusable||(d.emit("onSelect",s),d.emit("onClose"))};return q(()=>[v.value,V.value],([s,b])=>{z(s)},{immediate:!0}),q(()=>c.value.tokens,s=>{s&&z(v.value)},{immediate:!0}),{pools:c,t:i,chainName:B,tabList:S,currentTab:m,addCommom:M,tokenList:L,importIcon:D,keyword:v,wallet:f,toSelect:J,store:_,isShowAll:V}}}),no=""+globalThis.__publicAssetsURL("image/warning@2x.png");const R=e=>(be("data-v-ef581b23"),e=e(),fe(),e),so=R(()=>a("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),to={class:"coin-select-modal"},ao={class:"search-input"},lo=["placeholder"],io=R(()=>a("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),ro=[io],uo={key:0,class:"tab-list"},co=["onClick"],mo={class:"item"},po=R(()=>a("div",{class:"line"},null,-1)),vo={class:"coin-list-box"},bo={key:0,class:"coin-list"},fo=["onClick"],_o={class:"left"},ho={key:0},ko={key:1,alt:""},go={class:"name-box"},yo=R(()=>a("img",{src:no,alt:""},null,-1)),Co={class:"balance-box"},$o={class:"balance"},wo={key:0},So={key:1},To={key:2},Lo={key:3},Io=R(()=>a("p",null,null,-1)),Oo={key:1,class:"no-data"},No={key:0,class:"token-loading"},jo={key:1,class:"no-data-content"},Bo={key:0,src:De},Ao={key:1,src:Me},Po=R(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1));function Do(e,d,i,H,F,f){const g=Ae,c=K("loading-outlined"),T=Pe,_=ve,w=K("vue-scroll"),S=K("Modal"),m=pe("image");return t(),O(S,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:d[2]||(d[2]=o=>e.$emit("onClose"))},{closeIcon:h(()=>[so]),default:h(()=>[a("div",to,[a("div",ao,[E(a("input",{"onUpdate:modelValue":d[0]||(d[0]=o=>e.keyword=o),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,lo),[[Be,e.keyword]]),e.keyword?(t(),r("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:d[1]||(d[1]=o=>e.keyword="")},ro)):j("",!0)]),e.chainName!=="Sui"?(t(),r("div",uo,[(t(!0),r(se,null,te(e.tabList,(o,k)=>(t(),r("div",{key:k,class:W(["item-container",e.currentTab==o?"item-container-active item-container":"item-container"]),onClick:B=>e.currentTab=o},[a("div",mo,u(o),1)],10,co))),128))])):j("",!0),po,a("div",vo,[N(w,null,{default:h(()=>[e.tokenList&&e.tokenList.length>0?(t(),r("ul",bo,[(t(!0),r(se,null,te(e.tokenList,(o,k)=>(t(),r("li",{key:k,class:W(o.unusable?"unusable":""),onClick:B=>e.toSelect(o)},[a("div",_o,[o.isChinaToken?E((t(),r("img",ko,null,512)),[[m,e.store.theme=="default"?("importIcon"in e?e.importIcon:$(D))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:$(D))("/image/coins/sui-unknown.png")]]):E((t(),r("img",ho,null,512)),[[m,o.icon||o.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:$(D))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:$(D))("/image/coins/sui-unknown.png"))]]),a("div",go,[a("span",null,[Z(u(o.symbol)+" ",1),o.isSelfBuilt?(t(),O(g,{key:0,placement:"right","arrow-point-at-center":""},{title:h(()=>[a("span",null,u(e.t("newAdd.notCetusTokenList")),1)]),default:h(()=>[yo]),_:1})):j("",!0)]),a("p",null,u(o.name)+" "+u(o.labels?`(${o.labels})`:""),1)])]),a("div",Co,[a("div",$o,[e.wallet.loading?(t(),r("div",wo,[N(T,null,{default:h(()=>[N(c)]),_:1})])):o.balance&&e.wallet.connected?(t(),r("div",So,u(("addCommom"in e?e.addCommom:$(M))(o.balance,o.decimals)),1)):!o.balance&&e.wallet.connected?(t(),r("div",To,"0")):(t(),r("div",Lo))]),Io])],10,fo))),128))])):(t(),r("div",Oo,[e.pools.isTokenLoading?(t(),r("div",No,[N(_)])):(t(),r("div",jo,[e.store.theme=="default"?(t(),r("img",Bo)):(t(),r("img",Ao)),a("p",null,u(e.t("newAdd.noTokensFound")),1),a("div",null,[Z(u(e.t("newAdd.enterCoinType"))+" ",1),N(g,{placement:"bottom","arrow-point-at-center":""},{title:h(()=>[a("span",null,u(e.t("newAdd.uniqueIdOfCoin")),1)]),default:h(()=>[Po]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const Ko=me(oo,[["render",Do],["__scopeId","data-v-ef581b23"]]);export{Ho as _,Ko as a};
