var Wg=Object.defineProperty;var Kg=(e,t,n)=>t in e?Wg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var we=(e,t,n)=>(Kg(e,typeof t!="symbol"?t+"":t,n),n);import{eP as Gs,eS as Jd,f as uc,T as ri,L as be,U as nn,eR as xi,eW as Go,eX as Xg,K as Zg,eY as Jg}from"./entry.7dbcdae4.js";import{l as Fc,c as Da,d as Yd,r as Yg,_ as ue,S as Qg,u as Qd,T as _n,f as e0,C as is,g as t0,h as n0,a as Al,e as kl,i as ef,p as xt,b as E,j as At,k as os,m as r0,o as s0,q as i0,Q as o0,s as Ma,D as on,t as La,v as a0}from"./common.ce6f3df4.js";import{b as ui}from"./index.59f7738f.js";import{u as tf}from"./wallet.3fc4a512.js";import{c as c0,r as u0,s as Wc,v as Kc,a as l0}from"./v4.78edc15a.js";var Mt={},it={};Object.defineProperty(it,"__esModule",{value:!0});it.output=it.exists=it.hash=it.bytes=it.bool=it.number=void 0;function bo(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}it.number=bo;function nf(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}it.bool=nf;function Xc(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}it.bytes=Xc;function rf(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");bo(e.outputLen),bo(e.blockLen)}it.hash=rf;function sf(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}it.exists=sf;function of(e,t){Xc(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}it.output=of;const d0={number:bo,bool:nf,bytes:Xc,hash:rf,exists:sf,output:of};it.default=d0;var ws={},af={},Fr={},zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.crypto=void 0;zo.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=zo,n=_=>new Uint8Array(_.buffer,_.byteOffset,_.byteLength);e.u8=n;const r=_=>new Uint32Array(_.buffer,_.byteOffset,Math.floor(_.byteLength/4));e.u32=r;const s=_=>new DataView(_.buffer,_.byteOffset,_.byteLength);e.createView=s;const i=(_,T)=>_<<32-T|_>>>T;if(e.rotr=i,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},(_,T)=>T.toString(16).padStart(2,"0"));function a(_){if(!(_ instanceof Uint8Array))throw new Error("Uint8Array expected");let T="";for(let x=0;x<_.length;x++)T+=o[_[x]];return T}e.bytesToHex=a;function c(_){if(typeof _!="string")throw new TypeError("hexToBytes: expected string, got "+typeof _);if(_.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const T=new Uint8Array(_.length/2);for(let x=0;x<T.length;x++){const k=x*2,B=_.slice(k,k+2),D=Number.parseInt(B,16);if(Number.isNaN(D)||D<0)throw new Error("Invalid byte sequence");T[x]=D}return T}e.hexToBytes=c;const u=async()=>{};e.nextTick=u;async function d(_,T,x){let k=Date.now();for(let B=0;B<_;B++){x(B);const D=Date.now()-k;D>=0&&D<T||(await(0,e.nextTick)(),k+=D)}}e.asyncLoop=d;function l(_){if(typeof _!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof _}`);return new TextEncoder().encode(_)}e.utf8ToBytes=l;function p(_){if(typeof _=="string"&&(_=l(_)),!(_ instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof _})`);return _}e.toBytes=p;function g(..._){if(!_.every(k=>k instanceof Uint8Array))throw new Error("Uint8Array list expected");if(_.length===1)return _[0];const T=_.reduce((k,B)=>k+B.length,0),x=new Uint8Array(T);for(let k=0,B=0;k<_.length;k++){const D=_[k];x.set(D,B),B+=D.length}return x}e.concatBytes=g;class w{clone(){return this._cloneInto()}}e.Hash=w;const h=_=>Object.prototype.toString.call(_)==="[object Object]"&&_.constructor===Object;function y(_,T){if(T!==void 0&&(typeof T!="object"||!h(T)))throw new TypeError("Options should be object or undefined");return Object.assign(_,T)}e.checkOpts=y;function v(_){const T=k=>_().update(p(k)).digest(),x=_();return T.outputLen=x.outputLen,T.blockLen=x.blockLen,T.create=()=>_(),T}e.wrapConstructor=v;function m(_){const T=(k,B)=>_(B).update(p(k)).digest(),x=_({});return T.outputLen=x.outputLen,T.blockLen=x.blockLen,T.create=k=>_(k),T}e.wrapConstructorWithOpts=m;function b(_=32){if(t.crypto.web)return t.crypto.web.getRandomValues(new Uint8Array(_));if(t.crypto.node)return new Uint8Array(t.crypto.node.randomBytes(_).buffer);throw new Error("The environment doesn't have randomBytes function")}e.randomBytes=b})(Fr);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const t=it,n=Fr;class r extends n.Hash{constructor(o,a){super(),this.finished=!1,this.destroyed=!1,t.default.hash(o);const c=(0,n.toBytes)(a);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,d=new Uint8Array(u);d.set(c.length>u?o.create().update(c).digest():c);for(let l=0;l<d.length;l++)d[l]^=54;this.iHash.update(d),this.oHash=o.create();for(let l=0;l<d.length;l++)d[l]^=106;this.oHash.update(d),d.fill(0)}update(o){return t.default.exists(this),this.iHash.update(o),this}digestInto(o){t.default.exists(this),t.default.bytes(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:c,finished:u,destroyed:d,blockLen:l,outputLen:p}=this;return o=o,o.finished=u,o.destroyed=d,o.blockLen=l,o.outputLen=p,o.oHash=a._cloneInto(o.oHash),o.iHash=c._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const s=(i,o,a)=>new r(i,o).update(a).digest();e.hmac=s,e.hmac.create=(i,o)=>new r(i,o)})(af);Object.defineProperty(ws,"__esModule",{value:!0});ws.pbkdf2Async=ws.pbkdf2=void 0;const Di=it,f0=af,hs=Fr;function cf(e,t,n,r){Di.default.hash(e);const s=(0,hs.checkOpts)({dkLen:32,asyncTick:10},r),{c:i,dkLen:o,asyncTick:a}=s;if(Di.default.number(i),Di.default.number(o),Di.default.number(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=(0,hs.toBytes)(t),u=(0,hs.toBytes)(n),d=new Uint8Array(o),l=f0.hmac.create(e,c),p=l._cloneInto().update(u);return{c:i,dkLen:o,asyncTick:a,DK:d,PRF:l,PRFSalt:p}}function uf(e,t,n,r,s){return e.destroy(),t.destroy(),r&&r.destroy(),s.fill(0),n}function h0(e,t,n,r){const{c:s,dkLen:i,DK:o,PRF:a,PRFSalt:c}=cf(e,t,n,r);let u;const d=new Uint8Array(4),l=(0,hs.createView)(d),p=new Uint8Array(a.outputLen);for(let g=1,w=0;w<i;g++,w+=a.outputLen){const h=o.subarray(w,w+a.outputLen);l.setInt32(0,g,!1),(u=c._cloneInto(u)).update(d).digestInto(p),h.set(p.subarray(0,h.length));for(let y=1;y<s;y++){a._cloneInto(u).update(p).digestInto(p);for(let v=0;v<h.length;v++)h[v]^=p[v]}}return uf(a,c,o,u,p)}ws.pbkdf2=h0;async function p0(e,t,n,r){const{c:s,dkLen:i,asyncTick:o,DK:a,PRF:c,PRFSalt:u}=cf(e,t,n,r);let d;const l=new Uint8Array(4),p=(0,hs.createView)(l),g=new Uint8Array(c.outputLen);for(let w=1,h=0;h<i;w++,h+=c.outputLen){const y=a.subarray(h,h+c.outputLen);p.setInt32(0,w,!1),(d=u._cloneInto(d)).update(l).digestInto(g),y.set(g.subarray(0,y.length)),await(0,hs.asyncLoop)(s-1,o,v=>{c._cloneInto(d).update(g).digestInto(g);for(let m=0;m<y.length;m++)y[m]^=g[m]})}return uf(c,u,a,d,g)}ws.pbkdf2Async=p0;var _s={},Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.SHA2=void 0;const ja=it,Ls=Fr;function g0(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}let y0=class extends Ls.Hash{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Ls.createView)(this.buffer)}update(t){ja.default.exists(this);const{view:n,buffer:r,blockLen:s}=this;t=(0,Ls.toBytes)(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=(0,Ls.createView)(t);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ja.default.exists(this),ja.default.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let l=o;l<s;l++)n[l]=0;g0(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=(0,Ls.createView)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,d[l],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%n&&t.buffer.set(r),t}};Ai.SHA2=y0;Object.defineProperty(_s,"__esModule",{value:!0});_s.sha224=_s.sha256=void 0;const b0=Ai,en=Fr,m0=(e,t,n)=>e&t^~e&n,w0=(e,t,n)=>e&t^e&n^t&n,_0=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),zn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Vn=new Uint32Array(64);let lf=class extends b0.SHA2{constructor(){super(64,32,8,!1),this.A=zn[0]|0,this.B=zn[1]|0,this.C=zn[2]|0,this.D=zn[3]|0,this.E=zn[4]|0,this.F=zn[5]|0,this.G=zn[6]|0,this.H=zn[7]|0}get(){const{A:t,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[t,n,r,s,i,o,a,c]}set(t,n,r,s,i,o,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let l=0;l<16;l++,n+=4)Vn[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const p=Vn[l-15],g=Vn[l-2],w=(0,en.rotr)(p,7)^(0,en.rotr)(p,18)^p>>>3,h=(0,en.rotr)(g,17)^(0,en.rotr)(g,19)^g>>>10;Vn[l]=h+Vn[l-7]+w+Vn[l-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:d}=this;for(let l=0;l<64;l++){const p=(0,en.rotr)(a,6)^(0,en.rotr)(a,11)^(0,en.rotr)(a,25),g=d+p+m0(a,c,u)+_0[l]+Vn[l]|0,h=((0,en.rotr)(r,2)^(0,en.rotr)(r,13)^(0,en.rotr)(r,22))+w0(r,s,i)|0;d=u,u=c,c=a,a=o+g|0,o=i,i=s,s=r,r=g+h|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,s,i,o,a,c,u,d)}roundClean(){Vn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},v0=class extends lf{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};_s.sha256=(0,en.wrapConstructor)(()=>new lf);_s.sha224=(0,en.wrapConstructor)(()=>new v0);var an={},df={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.add=e.toBig=e.split=e.fromBig=void 0;const t=BigInt(2**32-1),n=BigInt(32);function r(U,N=!1){return N?{h:Number(U&t),l:Number(U>>n&t)}:{h:Number(U>>n&t)|0,l:Number(U&t)|0}}e.fromBig=r;function s(U,N=!1){let G=new Uint32Array(U.length),X=new Uint32Array(U.length);for(let le=0;le<U.length;le++){const{h:O,l:q}=r(U[le],N);[G[le],X[le]]=[O,q]}return[G,X]}e.split=s;const i=(U,N)=>BigInt(U>>>0)<<n|BigInt(N>>>0);e.toBig=i;const o=(U,N,G)=>U>>>G,a=(U,N,G)=>U<<32-G|N>>>G,c=(U,N,G)=>U>>>G|N<<32-G,u=(U,N,G)=>U<<32-G|N>>>G,d=(U,N,G)=>U<<64-G|N>>>G-32,l=(U,N,G)=>U>>>G-32|N<<64-G,p=(U,N)=>N,g=(U,N)=>U,w=(U,N,G)=>U<<G|N>>>32-G,h=(U,N,G)=>N<<G|U>>>32-G,y=(U,N,G)=>N<<G-32|U>>>64-G,v=(U,N,G)=>U<<G-32|N>>>64-G;function m(U,N,G,X){const le=(N>>>0)+(X>>>0);return{h:U+G+(le/2**32|0)|0,l:le|0}}e.add=m;const b=(U,N,G)=>(U>>>0)+(N>>>0)+(G>>>0),_=(U,N,G,X)=>N+G+X+(U/2**32|0)|0,T=(U,N,G,X)=>(U>>>0)+(N>>>0)+(G>>>0)+(X>>>0),x=(U,N,G,X,le)=>N+G+X+le+(U/2**32|0)|0,k=(U,N,G,X,le)=>(U>>>0)+(N>>>0)+(G>>>0)+(X>>>0)+(le>>>0),B=(U,N,G,X,le,O)=>N+G+X+le+O+(U/2**32|0)|0,D={fromBig:r,split:s,toBig:e.toBig,shrSH:o,shrSL:a,rotrSH:c,rotrSL:u,rotrBH:d,rotrBL:l,rotr32H:p,rotr32L:g,rotlSH:w,rotlSL:h,rotlBH:y,rotlBL:v,add:m,add3L:b,add3H:_,add4L:T,add4H:x,add5H:B,add5L:k};e.default=D})(df);Object.defineProperty(an,"__esModule",{value:!0});an.sha384=an.sha512_256=an.sha512_224=an.sha512=an.SHA512=void 0;const T0=Ai,pe=df,Vo=Fr,[S0,x0]=pe.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Fn=new Uint32Array(80),Wn=new Uint32Array(80);let ki=class extends T0.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:d,Fh:l,Fl:p,Gh:g,Gl:w,Hh:h,Hl:y}=this;return[t,n,r,s,i,o,a,c,u,d,l,p,g,w,h,y]}set(t,n,r,s,i,o,a,c,u,d,l,p,g,w,h,y){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=l|0,this.Fl=p|0,this.Gh=g|0,this.Gl=w|0,this.Hh=h|0,this.Hl=y|0}process(t,n){for(let b=0;b<16;b++,n+=4)Fn[b]=t.getUint32(n),Wn[b]=t.getUint32(n+=4);for(let b=16;b<80;b++){const _=Fn[b-15]|0,T=Wn[b-15]|0,x=pe.default.rotrSH(_,T,1)^pe.default.rotrSH(_,T,8)^pe.default.shrSH(_,T,7),k=pe.default.rotrSL(_,T,1)^pe.default.rotrSL(_,T,8)^pe.default.shrSL(_,T,7),B=Fn[b-2]|0,D=Wn[b-2]|0,U=pe.default.rotrSH(B,D,19)^pe.default.rotrBH(B,D,61)^pe.default.shrSH(B,D,6),N=pe.default.rotrSL(B,D,19)^pe.default.rotrBL(B,D,61)^pe.default.shrSL(B,D,6),G=pe.default.add4L(k,N,Wn[b-7],Wn[b-16]),X=pe.default.add4H(G,x,U,Fn[b-7],Fn[b-16]);Fn[b]=X|0,Wn[b]=G|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:d,Eh:l,El:p,Fh:g,Fl:w,Gh:h,Gl:y,Hh:v,Hl:m}=this;for(let b=0;b<80;b++){const _=pe.default.rotrSH(l,p,14)^pe.default.rotrSH(l,p,18)^pe.default.rotrBH(l,p,41),T=pe.default.rotrSL(l,p,14)^pe.default.rotrSL(l,p,18)^pe.default.rotrBL(l,p,41),x=l&g^~l&h,k=p&w^~p&y,B=pe.default.add5L(m,T,k,x0[b],Wn[b]),D=pe.default.add5H(B,v,_,x,S0[b],Fn[b]),U=B|0,N=pe.default.rotrSH(r,s,28)^pe.default.rotrBH(r,s,34)^pe.default.rotrBH(r,s,39),G=pe.default.rotrSL(r,s,28)^pe.default.rotrBL(r,s,34)^pe.default.rotrBL(r,s,39),X=r&i^r&a^i&a,le=s&o^s&c^o&c;v=h|0,m=y|0,h=g|0,y=w|0,g=l|0,w=p|0,{h:l,l:p}=pe.default.add(u|0,d|0,D|0,U|0),u=a|0,d=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const O=pe.default.add3L(U,G,le);r=pe.default.add3H(O,D,N,X),s=O|0}({h:r,l:s}=pe.default.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=pe.default.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=pe.default.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=pe.default.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:l,l:p}=pe.default.add(this.Eh|0,this.El|0,l|0,p|0),{h:g,l:w}=pe.default.add(this.Fh|0,this.Fl|0,g|0,w|0),{h,l:y}=pe.default.add(this.Gh|0,this.Gl|0,h|0,y|0),{h:v,l:m}=pe.default.add(this.Hh|0,this.Hl|0,v|0,m|0),this.set(r,s,i,o,a,c,u,d,l,p,g,w,h,y,v,m)}roundClean(){Fn.fill(0),Wn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};an.SHA512=ki;let A0=class extends ki{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},k0=class extends ki{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},E0=class extends ki{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};an.sha512=(0,Vo.wrapConstructor)(()=>new ki);an.sha512_224=(0,Vo.wrapConstructor)(()=>new A0);an.sha512_256=(0,Vo.wrapConstructor)(()=>new k0);an.sha384=(0,Vo.wrapConstructor)(()=>new E0);Object.defineProperty(Mt,"__esModule",{value:!0});var ff=Mt.mnemonicToSeedSync=Mt.mnemonicToSeed=Mt.validateMnemonic=Mt.entropyToMnemonic=Mt.mnemonicToEntropy=Mt.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const hf=it,pf=ws,B0=_s,gf=an,I0=Fr,Mi=Fc,C0=e=>e[0]==="あいこくしん";function yf(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function Zc(e){const t=yf(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function bf(e){hf.default.bytes(e,16,20,24,28,32)}function O0(e,t=128){if(hf.default.number(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return _f((0,I0.randomBytes)(t/8),e)}Mt.generateMnemonic=O0;const $0=e=>{const t=8-e.length/4;return new Uint8Array([(0,B0.sha256)(e)[0]>>t<<t])};function mf(e){if(!Array.isArray(e)||e.length!==2**11||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(t=>{if(typeof t!="string")throw new Error(`Wordlist: non-string element: ${t}`)}),Mi.utils.chain(Mi.utils.checksum(1,$0),Mi.utils.radix2(11,!0),Mi.utils.alphabet(e))}function wf(e,t){const{words:n}=Zc(e),r=mf(t).decode(n);return bf(r),r}Mt.mnemonicToEntropy=wf;function _f(e,t){return bf(e),mf(t).encode(e).join(C0(t)?"　":" ")}Mt.entropyToMnemonic=_f;function R0(e,t){try{wf(e,t)}catch{return!1}return!0}Mt.validateMnemonic=R0;const vf=e=>yf(`mnemonic${e}`);function P0(e,t=""){return(0,pf.pbkdf2Async)(gf.sha512,Zc(e).nfkd,vf(t),{c:2048,dkLen:64})}Mt.mnemonicToSeed=P0;function U0(e,t=""){return(0,pf.pbkdf2)(gf.sha512,Zc(e).nfkd,vf(t),{c:2048,dkLen:64})}ff=Mt.mnemonicToSeedSync=U0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const q0=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Ha=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),N0=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!N0)throw new Error("Non little-endian hardware is not supported");const D0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Tf(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=D0[e[n]];return t}function Sf(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=n*2,s=e.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[n]=i}return t}function M0(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Ei(e){if(typeof e=="string"&&(e=M0(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}let Jc=class{clone(){return this._cloneInto()}};function Fo(e){const t=r=>e().update(Ei(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function L0(e){const t=(r,s)=>e(s).update(Ei(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function lc(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function j0(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function xf(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function H0(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");lc(e.outputLen),lc(e.blockLen)}function G0(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function z0(e,t){xf(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Lt={number:lc,bool:j0,bytes:xf,hash:H0,exists:G0,output:z0},Li=BigInt(2**32-1),dc=BigInt(32);function Af(e,t=!1){return t?{h:Number(e&Li),l:Number(e>>dc&Li)}:{h:Number(e>>dc&Li)|0,l:Number(e&Li)|0}}function V0(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:o}=Af(e[s],t);[n[s],r[s]]=[i,o]}return[n,r]}const F0=(e,t)=>BigInt(e>>>0)<<dc|BigInt(t>>>0),W0=(e,t,n)=>e>>>n,K0=(e,t,n)=>e<<32-n|t>>>n,X0=(e,t,n)=>e>>>n|t<<32-n,Z0=(e,t,n)=>e<<32-n|t>>>n,J0=(e,t,n)=>e<<64-n|t>>>n-32,Y0=(e,t,n)=>e>>>n-32|t<<64-n,Q0=(e,t)=>t,ey=(e,t)=>e,ty=(e,t,n)=>e<<n|t>>>32-n,ny=(e,t,n)=>t<<n|e>>>32-n,ry=(e,t,n)=>t<<n-32|e>>>64-n,sy=(e,t,n)=>e<<n-32|t>>>64-n;function iy(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}const oy=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),ay=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,cy=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),uy=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,ly=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0),dy=(e,t,n,r,s,i)=>t+n+r+s+i+(e/2**32|0)|0,de={fromBig:Af,split:V0,toBig:F0,shrSH:W0,shrSL:K0,rotrSH:X0,rotrSL:Z0,rotrBH:J0,rotrBL:Y0,rotr32H:Q0,rotr32L:ey,rotlSH:ty,rotlSL:ny,rotlBH:ry,rotlBL:sy,add:iy,add3L:oy,add3H:ay,add4L:cy,add4H:uy,add5H:dy,add5L:ly},[kf,Ef,Bf]=[[],[],[]],fy=BigInt(0),js=BigInt(1),hy=BigInt(2),py=BigInt(7),gy=BigInt(256),yy=BigInt(113);for(let e=0,t=js,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],kf.push(2*(5*r+n)),Ef.push((e+1)*(e+2)/2%64);let s=fy;for(let i=0;i<7;i++)t=(t<<js^(t>>py)*yy)%gy,t&hy&&(s^=js<<(js<<BigInt(i))-js);Bf.push(s)}const[by,my]=de.split(Bf,!0),El=(e,t,n)=>n>32?de.rotlBH(e,t,n):de.rotlSH(e,t,n),Bl=(e,t,n)=>n>32?de.rotlBL(e,t,n):de.rotlSL(e,t,n);function wy(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],d=n[c+1],l=El(u,d,1)^n[a],p=Bl(u,d,1)^n[a+1];for(let g=0;g<50;g+=10)e[o+g]^=l,e[o+g+1]^=p}let s=e[2],i=e[3];for(let o=0;o<24;o++){const a=Ef[o],c=El(s,i,a),u=Bl(s,i,a),d=kf[o];s=e[d],i=e[d+1],e[d]=c,e[d+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=by[r],e[1]^=my[r]}n.fill(0)}class Wo extends Jc{constructor(t,n,r,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Lt.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=q0(this.state)}keccak(){wy(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Lt.exists(this);const{blockLen:n,state:r}=this;t=Ei(t);const s=t.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=t[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,n&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Lt.exists(this,!1),Lt.bytes(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);t.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Lt.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Lt.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new Wo(n,r,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const yr=(e,t,n)=>Fo(()=>new Wo(t,e,n));yr(6,144,224/8);const vs=yr(6,136,256/8);yr(6,104,384/8);yr(6,72,512/8);yr(1,144,224/8);yr(1,136,256/8);yr(1,104,384/8);yr(1,72,512/8);const If=(e,t,n)=>L0((r={})=>new Wo(t,e,r.dkLen===void 0?n:r.dkLen,!0));If(31,168,128/8);If(31,136,256/8);let Cf=class extends Jc{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Lt.hash(t);const r=Ei(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return Lt.exists(this),this.iHash.update(t),this}digestInto(t){Lt.exists(this),Lt.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Yc=(e,t,n)=>new Cf(e,t).update(n).digest();Yc.create=(e,t)=>new Cf(e,t);function _y(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}let vy=class extends Jc{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ha(this.buffer)}update(t){Lt.exists(this);const{view:n,buffer:r,blockLen:s}=this;t=Ei(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Ha(t);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Lt.exists(this),Lt.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let c=o;c<s;c++)n[c]=0;_y(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Ha(t);this.get().forEach((c,u)=>a.setUint32(4*u,c,i))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%n&&t.buffer.set(r),t}};const[Ty,Sy]=de.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Kn=new Uint32Array(80),Xn=new Uint32Array(80);let Qc=class extends vy{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:d,Fh:l,Fl:p,Gh:g,Gl:w,Hh:h,Hl:y}=this;return[t,n,r,s,i,o,a,c,u,d,l,p,g,w,h,y]}set(t,n,r,s,i,o,a,c,u,d,l,p,g,w,h,y){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=l|0,this.Fl=p|0,this.Gh=g|0,this.Gl=w|0,this.Hh=h|0,this.Hl=y|0}process(t,n){for(let b=0;b<16;b++,n+=4)Kn[b]=t.getUint32(n),Xn[b]=t.getUint32(n+=4);for(let b=16;b<80;b++){const _=Kn[b-15]|0,T=Xn[b-15]|0,x=de.rotrSH(_,T,1)^de.rotrSH(_,T,8)^de.shrSH(_,T,7),k=de.rotrSL(_,T,1)^de.rotrSL(_,T,8)^de.shrSL(_,T,7),B=Kn[b-2]|0,D=Xn[b-2]|0,U=de.rotrSH(B,D,19)^de.rotrBH(B,D,61)^de.shrSH(B,D,6),N=de.rotrSL(B,D,19)^de.rotrBL(B,D,61)^de.shrSL(B,D,6),G=de.add4L(k,N,Xn[b-7],Xn[b-16]),X=de.add4H(G,x,U,Kn[b-7],Kn[b-16]);Kn[b]=X|0,Xn[b]=G|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:d,Eh:l,El:p,Fh:g,Fl:w,Gh:h,Gl:y,Hh:v,Hl:m}=this;for(let b=0;b<80;b++){const _=de.rotrSH(l,p,14)^de.rotrSH(l,p,18)^de.rotrBH(l,p,41),T=de.rotrSL(l,p,14)^de.rotrSL(l,p,18)^de.rotrBL(l,p,41),x=l&g^~l&h,k=p&w^~p&y,B=de.add5L(m,T,k,Sy[b],Xn[b]),D=de.add5H(B,v,_,x,Ty[b],Kn[b]),U=B|0,N=de.rotrSH(r,s,28)^de.rotrBH(r,s,34)^de.rotrBH(r,s,39),G=de.rotrSL(r,s,28)^de.rotrBL(r,s,34)^de.rotrBL(r,s,39),X=r&i^r&a^i&a,le=s&o^s&c^o&c;v=h|0,m=y|0,h=g|0,y=w|0,g=l|0,w=p|0,{h:l,l:p}=de.add(u|0,d|0,D|0,U|0),u=a|0,d=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const O=de.add3L(U,G,le);r=de.add3H(O,D,N,X),s=O|0}({h:r,l:s}=de.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=de.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=de.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=de.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:l,l:p}=de.add(this.Eh|0,this.El|0,l|0,p|0),{h:g,l:w}=de.add(this.Fh|0,this.Fl|0,g|0,w|0),{h,l:y}=de.add(this.Gh|0,this.Gl|0,h|0,y|0),{h:v,l:m}=de.add(this.Hh|0,this.Hl|0,v|0,m|0),this.set(r,s,i,o,a,c,u,d,l,p,g,w,h,y,v,m)}roundClean(){Kn.fill(0),Xn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},xy=class extends Qc{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Ay=class extends Qc{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const Of=Fo(()=>new Qc);Fo(()=>new xy);Fo(()=>new Ay);var $f=Object.defineProperty,ky=Object.getOwnPropertyDescriptor,Ko=(e,t)=>{for(var n in t)$f(e,n,{get:t[n],enumerable:!0})},Ce=(e,t,n,r)=>{for(var s=r>1?void 0:r?ky(t,n):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(s=(r?o(t,n,s):o(s))||s);return r&&s&&$f(t,n,s),s},Ey=/^m(\/[0-9]+')+$/,Rf=e=>e.replace("'",""),By="ed25519 seed",Iy=2147483648,Cy=e=>{const n=Yc.create(Of,By).update(Sf(e)).digest(),r=n.slice(0,32),s=n.slice(32);return{key:r,chainCode:s}},Oy=({key:e,chainCode:t},n)=>{const r=new ArrayBuffer(4);new DataView(r).setUint32(0,n);const s=new Uint8Array(r),i=new Uint8Array([0]),o=new Uint8Array([...i,...e,...s]),a=Yc.create(Of,t).update(o).digest(),c=a.slice(0,32),u=a.slice(32);return{key:c,chainCode:u}},$y=e=>Ey.test(e)?!e.split("/").slice(1).map(Rf).some(Number.isNaN):!1,Pf=(e,t,n=Iy)=>{if(!$y(e))throw new Error("Invalid derivation path");const{key:r,chainCode:s}=Cy(t);return e.split("/").slice(1).map(Rf).map(o=>parseInt(o,10)).reduce((o,a)=>Oy(o,a+n),{key:r,chainCode:s})};async function Ry(e){return new Promise(t=>{setTimeout(t,e)})}var Il="/v1";function Py(e){let t=`${e}`;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t.endsWith(Il)||(t=`${t}${Il}`),t}var Uf=2e5,qf=20,Nf=20,fc="0x1::aptos_coin::AptosCoin";function Xo(e){let t,n,r;return typeof e=="object"?(t=e.hashFunction,n=e.ttlMs,r=e.tags):t=e,(s,i,o)=>{if(o.value!=null)o.value=Cl(o.value,t,n,r);else if(o.get!=null)o.get=Cl(o.get,t,n,r);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}function Uy(e,t){return Xo({ttlMs:e,hashFunction:t})}var ro=new Map;function qy(e){const t=new Set;for(const n of e){const r=ro.get(n);if(r)for(const s of r)t.has(s)||(s.clear(),t.add(s))}return t.size}function Cl(e,t,n=0,r){const s=Symbol("__memoized_map__");return function(...i){let o;const a=this;a.hasOwnProperty(s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const c=a[s];if(Array.isArray(r))for(const u of r)ro.has(u)?ro.get(u).push(c):ro.set(u,[c]);if(t||i.length>0||n>0){let u;t===!0?u=i.map(p=>p.toString()).join("!"):t?u=t.apply(a,i):u=i[0];const d=`${u}__timestamp`;let l=!1;if(n>0)if(!c.has(d))l=!0;else{const p=c.get(d);l=Date.now()-p>n}c.has(u)&&!l?o=c.get(u):(o=e.apply(a,i),c.set(u,o),n>0&&c.set(d,Date.now()))}else{const u=a;c.has(u)?o=c.get(u):(o=e.apply(a,i),c.set(u,o))}return o}}var ae=class{static fromBuffer(e){return ae.fromUint8Array(e)}static fromUint8Array(e){return new ae(Tf(e))}static ensure(e){return typeof e=="string"?new ae(e):e}constructor(e){e.startsWith("0x")?this.hexString=e:this.hexString=`0x${e}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(Sf(this.noPrefix()))}};async function Ol(e,t,n,r){var s;const i=[];let o;for(;;){const a=await e(ae.ensure(t).hex(),(s=r==null?void 0:r.ledgerVersion)==null?void 0:s.toString(),o,n);if(o=a.__headers["x-aptos-cursor"],delete a.__headers,i.push(...a),o==null)break}return i}var Ny={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql"},Dy={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1"},Df=(e=>(e.MAINNET="mainnet",e.TESTNET="testnet",e.DEVNET="devnet",e))(Df||{}),Be={};Ko(Be,{AccountAddress:()=>je,AccountAuthenticator:()=>di,AccountAuthenticatorEd25519:()=>nu,AccountAuthenticatorMultiEd25519:()=>ru,ArgumentABI:()=>Ri,AuthenticationKey:()=>Dr,ChainId:()=>ra,ChangeSet:()=>Zy,Ed25519PublicKey:()=>rn,Ed25519Signature:()=>Tn,EntryFunction:()=>Ur,EntryFunctionABI:()=>Ss,Identifier:()=>Bt,Module:()=>jf,ModuleId:()=>Nr,MultiAgentRawTransaction:()=>ea,MultiEd25519PublicKey:()=>Bi,MultiEd25519Signature:()=>Zo,MultiSig:()=>ou,MultiSigTransactionPayload:()=>iu,RawTransaction:()=>Us,RawTransactionWithData:()=>Hf,RotationProofChallenge:()=>Yy,Script:()=>Qo,ScriptABI:()=>ha,SignedTransaction:()=>Ci,StructTag:()=>Ts,Transaction:()=>Gf,TransactionArgument:()=>wn,TransactionArgumentAddress:()=>la,TransactionArgumentBool:()=>fa,TransactionArgumentU128:()=>ca,TransactionArgumentU16:()=>ia,TransactionArgumentU256:()=>ua,TransactionArgumentU32:()=>oa,TransactionArgumentU64:()=>aa,TransactionArgumentU8:()=>sa,TransactionArgumentU8Vector:()=>da,TransactionAuthenticator:()=>Ii,TransactionAuthenticatorEd25519:()=>Jo,TransactionAuthenticatorMultiAgent:()=>tu,TransactionAuthenticatorMultiEd25519:()=>Yo,TransactionPayload:()=>Oi,TransactionPayloadEntryFunction:()=>na,TransactionPayloadMultisig:()=>au,TransactionPayloadScript:()=>ta,TransactionScriptABI:()=>pa,TypeArgumentABI:()=>$i,TypeTag:()=>bt,TypeTagAddress:()=>Jr,TypeTagBool:()=>Kr,TypeTagSigner:()=>su,TypeTagStruct:()=>Yr,TypeTagU128:()=>Zr,TypeTagU16:()=>Os,TypeTagU256:()=>Rs,TypeTagU32:()=>$s,TypeTagU64:()=>Xr,TypeTagU8:()=>jn,TypeTagVector:()=>Ps,UserTransaction:()=>cu,WriteSet:()=>Jy});var Mf={};Ko(Mf,{Deserializer:()=>eu,Serializer:()=>Ge,bcsSerializeBool:()=>Wy,bcsSerializeBytes:()=>us,bcsSerializeFixedBytes:()=>Xy,bcsSerializeStr:()=>Ky,bcsSerializeU128:()=>Fy,bcsSerializeU16:()=>zy,bcsSerializeU32:()=>Vy,bcsSerializeU8:()=>hc,bcsSerializeUint64:()=>Gy,bcsToBytes:()=>Gn,deserializeVector:()=>un,serializeVector:()=>Wt,serializeVectorWithFunc:()=>Hy});var My=2**8-1,Ly=2**16-1,li=2**32-1,si=BigInt(2**64)-BigInt(1),Lf=BigInt(2**128)-BigInt(1),jy=BigInt(2**256)-BigInt(1),Ge=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(e){for(;this.buffer.byteLength<this.offset+e;){const t=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t}}serialize(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length}serializeWithFunction(e,t,n){this.ensureBufferWillHandleSize(t);const r=new DataView(this.buffer,this.offset);e.apply(r,[0,n,!0]),this.offset+=t}serializeStr(e){const t=new TextEncoder;this.serializeBytes(t.encode(e))}serializeBytes(e){this.serializeU32AsUleb128(e.length),this.serialize(e)}serializeFixedBytes(e){this.serialize(e)}serializeBool(e){if(typeof e!="boolean")throw new Error("Value needs to be a boolean");const t=e?1:0;this.serialize(new Uint8Array([t]))}serializeU8(e){this.serialize(new Uint8Array([e]))}serializeU16(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)}serializeU32(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)}serializeU64(e){const t=BigInt(e.toString())&BigInt(li),n=BigInt(e.toString())>>BigInt(32);this.serializeU32(Number(t)),this.serializeU32(Number(n))}serializeU128(e){const t=BigInt(e.toString())&si,n=BigInt(e.toString())>>BigInt(64);this.serializeU64(t),this.serializeU64(n)}serializeU256(e){const t=BigInt(e.toString())&Lf,n=BigInt(e.toString())>>BigInt(128);this.serializeU128(t),this.serializeU128(n)}serializeU32AsUleb128(e){let t=e;const n=[];for(;t>>>7;)n.push(t&127|128),t>>>=7;n.push(t),this.serialize(new Uint8Array(n))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};Ce([Wr(0,My)],Ge.prototype,"serializeU8",1);Ce([Wr(0,Ly)],Ge.prototype,"serializeU16",1);Ce([Wr(0,li)],Ge.prototype,"serializeU32",1);Ce([Wr(BigInt(0),si)],Ge.prototype,"serializeU64",1);Ce([Wr(BigInt(0),Lf)],Ge.prototype,"serializeU128",1);Ce([Wr(BigInt(0),jy)],Ge.prototype,"serializeU256",1);Ce([Wr(0,li)],Ge.prototype,"serializeU32AsUleb128",1);function Wr(e,t,n){return(r,s,i)=>{const o=i.value;return i.value=function(c){const u=BigInt(c.toString());if(u>BigInt(t.toString())||u<BigInt(e.toString()))throw new Error(n||"Value is out of range");o.apply(this,[c])},i}}var eu=class{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}deserializeStr(){const e=this.deserializeBytes();return new TextDecoder().decode(e)}deserializeBytes(){const e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){const e=new Uint8Array(this.read(1))[0];if(e!==1&&e!==0)throw new Error("Invalid boolean value");return e===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const e=this.deserializeU32(),t=this.deserializeU32();return BigInt(BigInt(t)<<BigInt(32)|BigInt(e))}deserializeU128(){const e=this.deserializeU64(),t=this.deserializeU64();return BigInt(t<<BigInt(64)|e)}deserializeU256(){const e=this.deserializeU128(),t=this.deserializeU128();return BigInt(t<<BigInt(128)|e)}deserializeUleb128AsU32(){let e=BigInt(0),t=0;for(;e<li;){const n=this.deserializeU8();if(e|=BigInt(n&127)<<BigInt(t),!(n&128))break;t+=7}if(e>li)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}};function Wt(e,t){t.serializeU32AsUleb128(e.length),e.forEach(n=>{n.serialize(t)})}function Hy(e,t){const n=new Ge;n.serializeU32AsUleb128(e.length);const r=n[t];return e.forEach(s=>{r.call(n,s)}),n.getBytes()}function un(e,t){const n=e.deserializeUleb128AsU32(),r=[];for(let s=0;s<n;s+=1)r.push(t.deserialize(e));return r}function Gn(e){const t=new Ge;return e.serialize(t),t.getBytes()}function Gy(e){const t=new Ge;return t.serializeU64(e),t.getBytes()}function hc(e){const t=new Ge;return t.serializeU8(e),t.getBytes()}function zy(e){const t=new Ge;return t.serializeU16(e),t.getBytes()}function Vy(e){const t=new Ge;return t.serializeU32(e),t.getBytes()}function Fy(e){const t=new Ge;return t.serializeU128(e),t.getBytes()}function Wy(e){const t=new Ge;return t.serializeBool(e),t.getBytes()}function Ky(e){const t=new Ge;return t.serializeStr(e),t.getBytes()}function us(e){const t=new Ge;return t.serializeBytes(e),t.getBytes()}function Xy(e){const t=new Ge;return t.serializeFixedBytes(e),t.getBytes()}var tn=class{constructor(e){if(e.length!==tn.LENGTH)throw new Error("Expected address of length 32");this.address=e}static fromHex(e){let t=ae.ensure(e);t.noPrefix().length%2!==0&&(t=new ae(`0${t.noPrefix()}`));const n=t.toUint8Array();if(n.length>tn.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(n.length===tn.LENGTH)return new tn(n);const r=new Uint8Array(tn.LENGTH);return r.set(n,tn.LENGTH-n.length),new tn(r)}static isValid(e){if(e==="")return!1;let t=ae.ensure(e);return t.noPrefix().length%2!==0&&(t=new ae(`0${t.noPrefix()}`)),t.toUint8Array().length<=tn.LENGTH}toHexString(){return ae.fromUint8Array(this.address).hex()}serialize(e){e.serializeFixedBytes(this.address)}static deserialize(e){return new tn(e.deserializeFixedBytes(tn.LENGTH))}},je=tn;je.LENGTH=32;je.CORE_CODE_ADDRESS=tn.fromHex("0x1");var so=class{constructor(e){if(e.length!==so.LENGTH)throw new Error(`Ed25519PublicKey length should be ${so.LENGTH}`);this.value=e}toBytes(){return this.value}serialize(e){e.serializeBytes(this.value)}static deserialize(e){const t=e.deserializeBytes();return new so(t)}},rn=so;rn.LENGTH=32;var io=class{constructor(e){if(this.value=e,e.length!==io.LENGTH)throw new Error(`Ed25519Signature length should be ${io.LENGTH}`)}serialize(e){e.serializeBytes(this.value)}static deserialize(e){const t=e.deserializeBytes();return new io(t)}},Tn=io;Tn.LENGTH=64;var pc=32,Bi=class{constructor(e,t){if(this.public_keys=e,this.threshold=t,t>pc)throw new Error(`"threshold" cannot be larger than ${pc}`)}toBytes(){const e=new Uint8Array(this.public_keys.length*rn.LENGTH+1);return this.public_keys.forEach((t,n)=>{e.set(t.value,n*rn.LENGTH)}),e[this.public_keys.length*rn.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){const t=e.deserializeBytes(),n=t[t.length-1],r=[];for(let s=0;s<t.length-1;s+=rn.LENGTH){const i=s;r.push(new rn(t.subarray(i,i+rn.LENGTH)))}return new Bi(r,n)}},zs=class{constructor(e,t){if(this.signatures=e,this.bitmap=t,t.length!==zs.BITMAP_LEN)throw new Error(`"bitmap" length should be ${zs.BITMAP_LEN}`)}toBytes(){const e=new Uint8Array(this.signatures.length*Tn.LENGTH+zs.BITMAP_LEN);return this.signatures.forEach((t,n)=>{e.set(t.value,n*Tn.LENGTH)}),e.set(this.bitmap,this.signatures.length*Tn.LENGTH),e}static createBitmap(e){const n=new Uint8Array([0,0,0,0]),r=new Set;return e.forEach(s=>{if(s>=pc)throw new Error(`Invalid bit value ${s}.`);if(r.has(s))throw new Error("Duplicated bits detected.");r.add(s);const i=Math.floor(s/8);let o=n[i];o|=128>>s%8,n[i]=o}),n}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){const t=e.deserializeBytes(),n=t.subarray(t.length-4),r=[];for(let s=0;s<t.length-n.length;s+=Tn.LENGTH){const i=s;r.push(new Tn(t.subarray(i,i+Tn.LENGTH)))}return new zs(r,n)}},Zo=zs;Zo.BITMAP_LEN=4;var Ii=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Jo.load(e);case 1:return Yo.load(e);case 2:return tu.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${t}`)}}},Jo=class extends Ii{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=rn.deserialize(e),n=Tn.deserialize(e);return new Jo(t,n)}},Yo=class extends Ii{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=Bi.deserialize(e),n=Zo.deserialize(e);return new Yo(t,n)}},tu=class extends Ii{constructor(e,t,n){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=n}serialize(e){e.serializeU32AsUleb128(2),this.sender.serialize(e),Wt(this.secondary_signer_addresses,e),Wt(this.secondary_signers,e)}static load(e){const t=di.deserialize(e),n=un(e,je),r=un(e,di);return new tu(t,n,r)}},di=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return nu.load(e);case 1:return ru.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${t}`)}}},nu=class extends di{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=rn.deserialize(e),n=Tn.deserialize(e);return new nu(t,n)}},ru=class extends di{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=Bi.deserialize(e),n=Zo.deserialize(e);return new ru(t,n)}},Bt=class{constructor(e){this.value=e}serialize(e){e.serializeStr(this.value)}static deserialize(e){const t=e.deserializeStr();return new Bt(t)}},bt=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Kr.load(e);case 1:return jn.load(e);case 2:return Xr.load(e);case 3:return Zr.load(e);case 4:return Jr.load(e);case 5:return su.load(e);case 6:return Ps.load(e);case 7:return Yr.load(e);case 8:return Os.load(e);case 9:return $s.load(e);case 10:return Rs.load(e);default:throw new Error(`Unknown variant index for TypeTag: ${t}`)}}},Kr=class extends bt{serialize(e){e.serializeU32AsUleb128(0)}static load(e){return new Kr}},jn=class extends bt{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new jn}},Os=class extends bt{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new Os}},$s=class extends bt{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new $s}},Xr=class extends bt{serialize(e){e.serializeU32AsUleb128(2)}static load(e){return new Xr}},Zr=class extends bt{serialize(e){e.serializeU32AsUleb128(3)}static load(e){return new Zr}},Rs=class extends bt{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new Rs}},Jr=class extends bt{serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new Jr}},su=class extends bt{serialize(e){e.serializeU32AsUleb128(5)}static load(e){return new su}},Ps=class extends bt{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),this.value.serialize(e)}static load(e){const t=bt.deserialize(e);return new Ps(t)}},Yr=class extends bt{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),this.value.serialize(e)}static load(e){const t=Ts.deserialize(e);return new Yr(t)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===je.fromHex("0x1").toHexString()}},Ts=class{constructor(e,t,n,r){this.address=e,this.module_name=t,this.name=n,this.type_args=r}static fromString(e){if(e.includes("<"))throw new Error("Not implemented");const t=e.split("::");if(t.length!==3)throw new Error("Invalid struct tag string literal.");return new Ts(je.fromHex(t[0]),new Bt(t[1]),new Bt(t[2]),[])}serialize(e){this.address.serialize(e),this.module_name.serialize(e),this.name.serialize(e),Wt(this.type_args,e)}static deserialize(e){const t=je.deserialize(e),n=Bt.deserialize(e),r=Bt.deserialize(e),s=un(e,bt);return new Ts(t,n,r,s)}},Us=class{constructor(e,t,n,r,s,i,o){this.sender=e,this.sequence_number=t,this.payload=n,this.max_gas_amount=r,this.gas_unit_price=s,this.expiration_timestamp_secs=i,this.chain_id=o}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){const t=je.deserialize(e),n=e.deserializeU64(),r=Oi.deserialize(e),s=e.deserializeU64(),i=e.deserializeU64(),o=e.deserializeU64(),a=ra.deserialize(e);return new Us(t,n,r,s,i,o,a)}},Qo=class{constructor(e,t,n){this.code=e,this.ty_args=t,this.args=n}serialize(e){e.serializeBytes(this.code),Wt(this.ty_args,e),Wt(this.args,e)}static deserialize(e){const t=e.deserializeBytes(),n=un(e,bt),r=un(e,wn);return new Qo(t,n,r)}},Ur=class{constructor(e,t,n,r){this.module_name=e,this.function_name=t,this.ty_args=n,this.args=r}static natural(e,t,n,r){return new Ur(Nr.fromStr(e),new Bt(t),n,r)}static natual(e,t,n,r){return Ur.natural(e,t,n,r)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),Wt(this.ty_args,e),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{e.serializeBytes(t)})}static deserialize(e){const t=Nr.deserialize(e),n=Bt.deserialize(e),r=un(e,bt),s=e.deserializeUleb128AsU32(),i=[];for(let a=0;a<s;a+=1)i.push(e.deserializeBytes());const o=i;return new Ur(t,n,r,o)}},iu=class{constructor(e){this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return new iu(Ur.deserialize(e))}},ou=class{constructor(e,t){this.multisig_address=e,this.transaction_payload=t}serialize(e){this.multisig_address.serialize(e),this.transaction_payload===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.transaction_payload.serialize(e))}static deserialize(e){const t=je.deserialize(e),n=e.deserializeBool();let r;return n&&(r=iu.deserialize(e)),new ou(t,r)}},jf=class{constructor(e){this.code=e}serialize(e){e.serializeBytes(this.code)}static deserialize(e){const t=e.deserializeBytes();return new jf(t)}},Nr=class{constructor(e,t){this.address=e,this.name=t}static fromStr(e){const t=e.split("::");if(t.length!==2)throw new Error("Invalid module id.");return new Nr(je.fromHex(new ae(t[0])),new Bt(t[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){const t=je.deserialize(e),n=Bt.deserialize(e);return new Nr(t,n)}},Zy=class{serialize(e){throw new Error("Not implemented.")}static deserialize(e){throw new Error("Not implemented.")}},Jy=class{serialize(e){throw new Error("Not implmented.")}static deserialize(e){throw new Error("Not implmented.")}},Ci=class{constructor(e,t){this.raw_txn=e,this.authenticator=t}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){const t=Us.deserialize(e),n=Ii.deserialize(e);return new Ci(t,n)}},Hf=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return ea.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${t}`)}}},ea=class extends Hf{constructor(e,t){super(),this.raw_txn=e,this.secondary_signer_addresses=t}serialize(e){e.serializeU32AsUleb128(0),this.raw_txn.serialize(e),Wt(this.secondary_signer_addresses,e)}static load(e){const t=Us.deserialize(e),n=un(e,je);return new ea(t,n)}},Oi=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return ta.load(e);case 2:return na.load(e);case 3:return au.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},ta=class extends Oi{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){const t=Qo.deserialize(e);return new ta(t)}},na=class extends Oi{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),this.value.serialize(e)}static load(e){const t=Ur.deserialize(e);return new na(t)}},au=class extends Oi{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){const t=ou.deserialize(e);return new au(t)}},ra=class{constructor(e){this.value=e}serialize(e){e.serializeU8(this.value)}static deserialize(e){const t=e.deserializeU8();return new ra(t)}},wn=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return sa.load(t);case 1:return aa.load(t);case 2:return ca.load(t);case 3:return la.load(t);case 4:return da.load(t);case 5:return fa.load(t);case 6:return ia.load(t);case 7:return oa.load(t);case 8:return ua.load(t);default:throw new Error(`Unknown variant index for TransactionArgument: ${n}`)}}},sa=class extends wn{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),e.serializeU8(this.value)}static load(e){const t=e.deserializeU8();return new sa(t)}},ia=class extends wn{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),e.serializeU16(this.value)}static load(e){const t=e.deserializeU16();return new ia(t)}},oa=class extends wn{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),e.serializeU32(this.value)}static load(e){const t=e.deserializeU32();return new oa(t)}},aa=class extends wn{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(1),e.serializeU64(this.value)}static load(e){const t=e.deserializeU64();return new aa(t)}},ca=class extends wn{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),e.serializeU128(this.value)}static load(e){const t=e.deserializeU128();return new ca(t)}},ua=class extends wn{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(8),e.serializeU256(this.value)}static load(e){const t=e.deserializeU256();return new ua(t)}},la=class extends wn{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){const t=je.deserialize(e);return new la(t)}},da=class extends wn{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(4),e.serializeBytes(this.value)}static load(e){const t=e.deserializeBytes();return new da(t)}},fa=class extends wn{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(5),e.serializeBool(this.value)}static load(e){const t=e.deserializeBool();return new fa(t)}},Gf=class{getHashSalt(){const e=vs.create();return e.update("APTOS::Transaction"),e.digest()}static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return cu.load(e);default:throw new Error(`Unknown variant index for Transaction: ${t}`)}}},cu=class extends Gf{constructor(e){super(),this.value=e}hash(){const e=vs.create();return e.update(this.getHashSalt()),e.update(Gn(this)),e.digest()}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){return new cu(Ci.deserialize(e))}},$i=class{constructor(e){this.name=e}serialize(e){e.serializeStr(this.name)}static deserialize(e){const t=e.deserializeStr();return new $i(t)}},Ri=class{constructor(e,t){this.name=e,this.type_tag=t}serialize(e){e.serializeStr(this.name),this.type_tag.serialize(e)}static deserialize(e){const t=e.deserializeStr(),n=bt.deserialize(e);return new Ri(t,n)}},ha=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return pa.load(e);case 1:return Ss.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},pa=class extends ha{constructor(e,t,n,r,s){super(),this.name=e,this.doc=t,this.code=n,this.ty_args=r,this.args=s}serialize(e){e.serializeU32AsUleb128(0),e.serializeStr(this.name),e.serializeStr(this.doc),e.serializeBytes(this.code),Wt(this.ty_args,e),Wt(this.args,e)}static load(e){const t=e.deserializeStr(),n=e.deserializeStr(),r=e.deserializeBytes(),s=un(e,$i),i=un(e,Ri);return new pa(t,n,r,s,i)}},Ss=class extends ha{constructor(e,t,n,r,s){super(),this.name=e,this.module_name=t,this.doc=n,this.ty_args=r,this.args=s}serialize(e){e.serializeU32AsUleb128(1),e.serializeStr(this.name),this.module_name.serialize(e),e.serializeStr(this.doc),Wt(this.ty_args,e),Wt(this.args,e)}static load(e){const t=e.deserializeStr(),n=Nr.deserialize(e),r=e.deserializeStr(),s=un(e,$i),i=un(e,Ri);return new Ss(t,n,r,s,i)}},ls=class{constructor(e){if(e.length!==ls.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=e}static fromMultiEd25519PublicKey(e){const t=e.toBytes(),n=new Uint8Array(t.length+1);n.set(t),n.set([ls.MULTI_ED25519_SCHEME],t.length);const r=vs.create();return r.update(n),new ls(r.digest())}static fromEd25519PublicKey(e){const t=e.value,n=new Uint8Array(t.length+1);n.set(t),n.set([ls.ED25519_SCHEME],t.length);const r=vs.create();return r.update(n),new ls(r.digest())}derivedAddress(){return ae.fromUint8Array(this.bytes)}},Dr=ls;Dr.LENGTH=32;Dr.MULTI_ED25519_SCHEME=1;Dr.ED25519_SCHEME=0;Dr.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var Yy=class{constructor(e,t,n,r,s,i,o){this.accountAddress=e,this.moduleName=t,this.structName=n,this.sequenceNumber=r,this.originator=s,this.currentAuthKey=i,this.newPublicKey=o}serialize(e){this.accountAddress.serialize(e),e.serializeStr(this.moduleName),e.serializeStr(this.structName),e.serializeU64(this.sequenceNumber),this.originator.serialize(e),this.currentAuthKey.serialize(e),e.serializeBytes(this.newPublicKey)}},oo=class{static fromAptosAccountObject(e){return new oo(ae.ensure(e.privateKeyHex).toUint8Array(),e.address)}static fromDerivePath(e,t){if(!oo.isValidPath(e))throw new Error("Invalid derivation path");const n=t.trim().split(/\s+/).map(s=>s.toLowerCase()).join(" "),{key:r}=Pf(e,Tf(ff(n)));return new oo(r)}constructor(e,t){e?this.signingKey=Da.sign.keyPair.fromSeed(e.slice(0,32)):this.signingKey=Da.sign.keyPair(),this.accountAddress=ae.ensure(t||this.authKey().hex())}address(){return this.accountAddress}authKey(){const e=new rn(this.signingKey.publicKey);return Dr.fromEd25519PublicKey(e).derivedAddress()}static getResourceAccountAddress(e,t){const n=Gn(je.fromHex(e)),r=new Uint8Array([...n,...t,Dr.DERIVE_RESOURCE_ACCOUNT_SCHEME]),s=vs.create();return s.update(r),ae.fromUint8Array(s.digest())}pubKey(){return ae.fromUint8Array(this.signingKey.publicKey)}signBuffer(e){const t=Da.sign(e,this.signingKey.secretKey);return ae.fromUint8Array(t.slice(0,64))}signHexString(e){const t=ae.ensure(e).toUint8Array();return this.signBuffer(t)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:ae.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}},xs=oo;xs.isValidPath=e=>!!/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(e);Ce([Xo()],xs.prototype,"authKey",1);function Rn(e){return e instanceof xs?e.address():ae.ensure(e)}var Qy=`
    fragment TokenDataFields on current_token_datas {
  creator_address
  collection_name
  description
  metadata_uri
  name
  token_data_id_hash
  collection_data_id_hash
}
    `,eb=`
    fragment CollectionDataFields on current_collection_datas {
  metadata_uri
  supply
  description
  collection_name
  collection_data_id_hash
  table_handle
  creator_address
}
    `,tb=`
    query getAccountCoinsData($owner_address: String, $offset: Int, $limit: Int) {
  current_coin_balances(
    where: {owner_address: {_eq: $owner_address}}
    offset: $offset
    limit: $limit
  ) {
    amount
    coin_type
    coin_info {
      name
      decimals
      symbol
    }
  }
}
    `,nb=`
    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}
    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]
    offset: $offset
    limit: $limit
  ) {
    amount
    current_token_data {
      ...TokenDataFields
    }
    current_collection_data {
      ...CollectionDataFields
    }
    last_transaction_version
    property_version
  }
}
    ${Qy}
${eb}`,rb=`
    query getAccountTokensCount($owner_address: String) {
  current_token_ownerships_aggregate(
    where: {owner_address: {_eq: $owner_address}, amount: {_gt: "0"}}
  ) {
    aggregate {
      count
    }
  }
}
    `,sb=`
    query getAccountTransactionsCount($address: String) {
  move_resources_aggregate(
    where: {address: {_eq: $address}}
    distinct_on: transaction_version
  ) {
    aggregate {
      count
    }
  }
}
    `,ib=`
    query getAccountTransactionsData($address: String, $limit: Int, $offset: Int) {
  move_resources(
    where: {address: {_eq: $address}}
    order_by: {transaction_version: desc}
    distinct_on: transaction_version
    limit: $limit
    offset: $offset
  ) {
    transaction_version
  }
}
    `,ob=`
    query getCurrentDelegatorBalancesCount($poolAddress: String) {
  current_delegator_balances_aggregate(
    where: {pool_type: {_eq: "active_shares"}, pool_address: {_eq: $poolAddress}, amount: {_gt: "0"}}
    distinct_on: delegator_address
  ) {
    aggregate {
      count
    }
  }
}
    `,ab=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,cb=`
    query getIndexerLedgerInfo {
  ledger_infos {
    chain_id
  }
}
    `,ub=`
    query getTokenActivities($idHash: String!, $offset: Int, $limit: Int) {
  token_activities(
    where: {token_data_id_hash: {_eq: $idHash}}
    order_by: {transaction_version: desc}
    offset: $offset
    limit: $limit
  ) {
    creator_address
    collection_name
    name
    token_data_id_hash
    collection_data_id_hash
    from_address
    to_address
    transaction_version
    transaction_timestamp
    property_version
    transfer_type
    event_sequence_number
    token_amount
  }
}
    `,lb=`
    query getTokenActivitiesCount($token_id: String) {
  token_activities_aggregate(where: {token_data_id_hash: {_eq: $token_id}}) {
    aggregate {
      count
    }
  }
}
    `,db=`
    query getTokenData($token_id: String) {
  current_token_datas(where: {token_data_id_hash: {_eq: $token_id}}) {
    token_data_id_hash
    name
    collection_name
    creator_address
    default_properties
    largest_property_version
    maximum
    metadata_uri
    payee_address
    royalty_points_denominator
    royalty_points_numerator
    supply
  }
}
    `,fb=`
    query getTokenOwnersData($token_id: String, $property_version: numeric) {
  current_token_ownerships(
    where: {token_data_id_hash: {_eq: $token_id}, property_version: {_eq: $property_version}}
  ) {
    owner_address
  }
}
    `,hb=`
    query getTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,pb=`
    query getUserTransactions($limit: Int, $start_version: bigint, $offset: Int) {
  user_transactions(
    limit: $limit
    order_by: {version: desc}
    where: {version: {_lte: $start_version}}
    offset: $offset
  ) {
    version
  }
}
    `,hn=class{constructor(e){this.endpoint=e}static validateAddress(e){if(e.length<66)throw new Error("Address needs to be 66 chars long.")}async queryIndexer(e){const{data:t}=await ui.post(this.endpoint,e);if(t.errors)throw new Error(`Indexer data error ${JSON.stringify(t.errors,null," ")}`);return t.data}async getIndexerLedgerInfo(){const e={query:cb};return this.queryIndexer(e)}async getAccountNFTs(e,t){const n=ae.ensure(e).hex();hn.validateAddress(n);const r={query:nb,variables:{address:n,offset:t==null?void 0:t.offset,limit:t==null?void 0:t.limit}};return this.queryIndexer(r)}async getTokenActivities(e,t){const n={query:ub,variables:{idHash:e,offset:t==null?void 0:t.offset,limit:t==null?void 0:t.limit}};return this.queryIndexer(n)}async getAccountCoinsData(e,t){const n=ae.ensure(e).hex();hn.validateAddress(n);const r={query:tb,variables:{owner_address:n,offset:t==null?void 0:t.offset,limit:t==null?void 0:t.limit}};return this.queryIndexer(r)}async getAccountTokensCount(e){const t=ae.ensure(e).hex();hn.validateAddress(t);const n={query:rb,variables:{owner_address:t}};return this.queryIndexer(n)}async getAccountTransactionsCount(e){const t=ae.ensure(e).hex();hn.validateAddress(t);const n={query:sb,variables:{address:t}};return this.queryIndexer(n)}async getAccountTransactionsData(e,t){const n=ae.ensure(e).hex();hn.validateAddress(n);const r={query:ib,variables:{address:n,offset:t==null?void 0:t.offset,limit:t==null?void 0:t.limit}};return this.queryIndexer(r)}async getDelegatedStakingActivities(e,t){const n=ae.ensure(e).hex(),r=ae.ensure(t).hex();hn.validateAddress(n),hn.validateAddress(r);const s={query:ab,variables:{delegatorAddress:n,poolAddress:r}};return this.queryIndexer(s)}async getTokenActivitiesCount(e){const t={query:lb,variables:{token_id:e}};return this.queryIndexer(t)}async getTokenData(e){const t={query:db,variables:{token_id:e}};return this.queryIndexer(t)}async getTokenOwnersData(e,t){const n={query:fb,variables:{token_id:e,property_version:t}};return this.queryIndexer(n)}async getTopUserTransactions(e){const t={query:hb,variables:{limit:e}};return this.queryIndexer(t)}async getUserTransactions(e,t){const n={query:pb,variables:{start_version:e,offset:t==null?void 0:t.offset,limit:t==null?void 0:t.limit}};return this.queryIndexer(n)}async getCurrentDelegatorBalancesCount(e){const t=ae.ensure(e).hex();hn.validateAddress(t);const n={query:ob,variables:{poolAddress:t}};return this.queryIndexer(n)}},zf={};Ko(zf,{$AccountData:()=>Ib,$AccountSignature:()=>Cb,$AccountSignature_Ed25519Signature:()=>Ob,$AccountSignature_MultiEd25519Signature:()=>$b,$Address:()=>Rb,$AptosError:()=>Pb,$AptosErrorCode:()=>Ub,$Block:()=>qb,$BlockMetadataTransaction:()=>Nb,$DecodedTableData:()=>Db,$DeleteModule:()=>Lb,$DeleteResource:()=>jb,$DeleteTableItem:()=>Hb,$DeletedTableData:()=>Mb,$DirectWriteSet:()=>Gb,$Ed25519Signature:()=>zb,$EncodeSubmissionRequest:()=>Vb,$EntryFunctionId:()=>Fb,$EntryFunctionPayload:()=>Wb,$Event:()=>Kb,$EventGuid:()=>Xb,$GasEstimation:()=>Zb,$GenesisPayload:()=>Jb,$GenesisPayload_WriteSetPayload:()=>Yb,$GenesisTransaction:()=>Qb,$HashValue:()=>em,$HealthCheckSuccess:()=>tm,$HexEncodedBytes:()=>nm,$IdentifierWrapper:()=>rm,$IndexResponse:()=>sm,$ModuleBundlePayload:()=>im,$MoveAbility:()=>om,$MoveFunction:()=>am,$MoveFunctionGenericTypeParam:()=>cm,$MoveFunctionVisibility:()=>um,$MoveModule:()=>lm,$MoveModuleBytecode:()=>dm,$MoveModuleId:()=>fm,$MoveResource:()=>hm,$MoveScriptBytecode:()=>pm,$MoveStruct:()=>gm,$MoveStructField:()=>ym,$MoveStructGenericTypeParam:()=>bm,$MoveStructTag:()=>mm,$MoveStructValue:()=>wm,$MoveType:()=>_m,$MoveValue:()=>vm,$MultiAgentSignature:()=>Tm,$MultiEd25519Signature:()=>Sm,$MultisigPayload:()=>xm,$MultisigTransactionPayload:()=>Am,$PendingTransaction:()=>km,$RawTableItemRequest:()=>Em,$RoleType:()=>Bm,$ScriptPayload:()=>Im,$ScriptWriteSet:()=>Cm,$StateCheckpointTransaction:()=>Om,$StateKeyWrapper:()=>$m,$SubmitTransactionRequest:()=>Rm,$TableItemRequest:()=>Pm,$Transaction:()=>Um,$TransactionPayload:()=>jm,$TransactionPayload_EntryFunctionPayload:()=>Hm,$TransactionPayload_ModuleBundlePayload:()=>Gm,$TransactionPayload_MultisigPayload:()=>zm,$TransactionPayload_ScriptPayload:()=>Vm,$TransactionSignature:()=>Km,$TransactionSignature_Ed25519Signature:()=>Xm,$TransactionSignature_MultiAgentSignature:()=>Zm,$TransactionSignature_MultiEd25519Signature:()=>Jm,$Transaction_BlockMetadataTransaction:()=>qm,$Transaction_GenesisTransaction:()=>Nm,$Transaction_PendingTransaction:()=>Dm,$Transaction_StateCheckpointTransaction:()=>Mm,$Transaction_UserTransaction:()=>Lm,$TransactionsBatchSingleSubmissionFailure:()=>Fm,$TransactionsBatchSubmissionResult:()=>Wm,$U128:()=>Ym,$U256:()=>Qm,$U64:()=>ew,$UserTransaction:()=>tw,$VersionedEvent:()=>nw,$ViewRequest:()=>rw,$WriteModule:()=>sw,$WriteResource:()=>iw,$WriteSet:()=>ow,$WriteSetChange:()=>uw,$WriteSetChange_DeleteModule:()=>lw,$WriteSetChange_DeleteResource:()=>dw,$WriteSetChange_DeleteTableItem:()=>fw,$WriteSetChange_WriteModule:()=>hw,$WriteSetChange_WriteResource:()=>pw,$WriteSetChange_WriteTableItem:()=>gw,$WriteSetPayload:()=>yw,$WriteSet_DirectWriteSet:()=>aw,$WriteSet_ScriptWriteSet:()=>cw,$WriteTableItem:()=>bw,AccountsService:()=>Yf,ApiError:()=>fi,AptosErrorCode:()=>oh,AptosGeneratedClient:()=>ih,BaseHttpRequest:()=>Vf,BlocksService:()=>Qf,CancelError:()=>Ff,CancelablePromise:()=>Wf,EventsService:()=>eh,GeneralService:()=>th,MoveFunctionVisibility:()=>ah,OpenAPI:()=>Bb,RoleType:()=>ch,TablesService:()=>nh,TransactionsService:()=>rh,ViewService:()=>sh});var Vf=class{constructor(e){this.config=e}},fi=class extends Error{constructor(e,t,n){super(n),this.name="ApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.body=t.body,this.request=e}},Ff=class extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}},Wf=class{constructor(e){this._isResolved=!1,this._isRejected=!1,this._isCancelled=!1,this._cancelHandlers=[],this._promise=new Promise((t,n)=>{this._resolve=t,this._reject=n;const r=o=>{var a;this._isResolved||this._isRejected||this._isCancelled||(this._isResolved=!0,(a=this._resolve)==null||a.call(this,o))},s=o=>{var a;this._isResolved||this._isRejected||this._isCancelled||(this._isRejected=!0,(a=this._reject)==null||a.call(this,o))},i=o=>{this._isResolved||this._isRejected||this._isCancelled||this._cancelHandlers.push(o)};return Object.defineProperty(i,"isResolved",{get:()=>this._isResolved}),Object.defineProperty(i,"isRejected",{get:()=>this._isRejected}),Object.defineProperty(i,"isCancelled",{get:()=>this._isCancelled}),e(r,s,i)})}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(){var e;if(!(this._isResolved||this._isRejected||this._isCancelled)){if(this._isCancelled=!0,this._cancelHandlers.length)try{for(const t of this._cancelHandlers)t()}catch(t){console.warn("Cancellation threw an error",t);return}this._cancelHandlers.length=0,(e=this._reject)==null||e.call(this,new Ff("Request aborted"))}}get isCancelled(){return this._isCancelled}},Kf=class{constructor(e=new Map){this.jar=e}setCookie(e,t){var n;const r=e.origin.toLowerCase();this.jar.has(r)||this.jar.set(r,[]);const s=Kf.parse(t);this.jar.set(r,[...((n=this.jar.get(r))==null?void 0:n.filter(i=>i.name!==s.name))||[],s])}getCookies(e){var t;const n=e.origin.toLowerCase();return this.jar.get(n)?((t=this.jar.get(n))==null?void 0:t.filter(r=>!r.expires||r.expires>new Date))||[]:[]}static parse(e){if(typeof e!="string")throw new Error("argument str must be a string");const t=e.split(";").map(r=>r.trim());let n;if(t.length>0){const[r,s]=t[0].split("=");if(!r||!s)throw new Error("Invalid cookie");n={name:r,value:s}}else throw new Error("Invalid cookie");return t.slice(1).forEach(r=>{const[s,i]=r.split("=");if(!s.trim())throw new Error("Invalid cookie");const o=s.toLowerCase(),a=(i==null?void 0:i.charAt(0))==="'"||(i==null?void 0:i.charAt(0))==='"'?i==null?void 0:i.slice(1,-1):i;if(o==="expires"&&(n.expires=new Date(a)),o==="path"&&(n.path=a),o==="samesite"){if(a!=="Lax"&&a!=="None"&&a!=="Strict")throw new Error("Invalid cookie SameSite value");n.sameSite=a}o==="secure"&&(n.secure=!0)}),n}},Xf=new Kf;ui.interceptors.response.use(e=>(Array.isArray(e.headers["set-cookie"])&&e.headers["set-cookie"].forEach(t=>{Xf.setCookie(new URL(e.config.url),t)}),e));ui.interceptors.request.use(function(e){const t=Xf.getCookies(new URL(e.url));return(t==null?void 0:t.length)>0&&e.headers&&(e.headers.cookie=t.map(n=>`${n.name}=${n.value}`).join("; ")),e});var uu=e=>e!=null,ga=e=>typeof e=="string",Ga=e=>ga(e)&&e!=="",Zf=e=>typeof e=="object"&&typeof e.type=="string"&&typeof e.stream=="function"&&typeof e.arrayBuffer=="function"&&typeof e.constructor=="function"&&typeof e.constructor.name=="string"&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag]),gb=e=>e instanceof Yd,yb=e=>e>=200&&e<300,bb=e=>btoa(e),mb=e=>{const t=[],n=(s,i)=>{t.push(`${encodeURIComponent(s)}=${encodeURIComponent(String(i))}`)},r=(s,i)=>{uu(i)&&(Array.isArray(i)?i.forEach(o=>{r(s,o)}):typeof i=="object"?Object.entries(i).forEach(([o,a])=>{r(`${s}[${o}]`,a)}):n(s,i))};return Object.entries(e).forEach(([s,i])=>{r(s,i)}),t.length>0?`?${t.join("&")}`:""},wb=(e,t)=>{const n=e.ENCODE_PATH||encodeURI,r=t.url.replace("{api-version}",e.VERSION).replace(/{(.*?)}/g,(i,o)=>{var a;return(a=t.path)!=null&&a.hasOwnProperty(o)?n(String(t.path[o])):i}),s=`${e.BASE}${r}`;return t.query?`${s}${mb(t.query)}`:s},_b=e=>{if(e.formData){const t=new Yd,n=(r,s)=>{ga(s)||Zf(s)?t.append(r,s):t.append(r,JSON.stringify(s))};return Object.entries(e.formData).filter(([r,s])=>uu(s)).forEach(([r,s])=>{Array.isArray(s)?s.forEach(i=>n(r,i)):n(r,s)}),t}},ji=async(e,t)=>typeof t=="function"?t(e):t,vb=async(e,t,n)=>{const r=await ji(t,e.TOKEN),s=await ji(t,e.USERNAME),i=await ji(t,e.PASSWORD),o=await ji(t,e.HEADERS),a=typeof(n==null?void 0:n.getHeaders)=="function"&&(n==null?void 0:n.getHeaders())||{},c=Object.entries({Accept:"application/json",...o,...t.headers,...a}).filter(([u,d])=>uu(d)).reduce((u,[d,l])=>({...u,[d]:String(l)}),{});if(Ga(r)&&(c.Authorization=`Bearer ${r}`),Ga(s)&&Ga(i)){const u=bb(`${s}:${i}`);c.Authorization=`Basic ${u}`}return t.body&&(t.mediaType?c["Content-Type"]=t.mediaType:Zf(t.body)?c["Content-Type"]=t.body.type||"application/octet-stream":ga(t.body)?c["Content-Type"]="text/plain":gb(t.body)||(c["Content-Type"]="application/json")),c},Tb=e=>{if(e.body)return e.body},Sb=async(e,t,n,r,s,i,o)=>{const a=ui.CancelToken.source(),c={url:n,headers:i,data:r??s,method:t.method,withCredentials:e.WITH_CREDENTIALS,cancelToken:a.token};Object.keys(e.HEADERS||{}).filter(d=>d.toLowerCase()==="accept").map(d=>e.HEADERS[d]).includes("application/x-bcs")&&(c.responseType="arraybuffer"),o(()=>a.cancel("The user aborted a request."));try{return await ui.request(c)}catch(d){const l=d;if(l.response)return l.response;throw d}},xb=(e,t)=>{if(t){const n=e.headers[t];if(ga(n))return n}},Ab=e=>{if(e.status!==204)return e.data},kb=(e,t)=>{const r={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...e.errors}[t.status];if(r)throw new fi(e,t,r);if(!t.ok)throw new fi(e,t,"Generic Error")},Eb=(e,t)=>new Wf(async(n,r,s)=>{try{const i=wb(e,t),o=_b(t),a=Tb(t),c=await vb(e,t,o);if(!s.isCancelled){const u=await Sb(e,t,i,a,o,c,s),d=Ab(u),l=xb(u,t.responseHeader),p={url:i,ok:yb(u.status),status:u.status,statusText:u.statusText,body:l??d};kb(t,p);const g=p.body;try{g.__headers=u.headers}catch{}n(g)}}catch(i){r(i)}}),Jf=class extends Vf{constructor(e){super(e)}request(e){return Eb(this.config,e)}},Yf=class{constructor(e){this.httpRequest=e}getAccount(e,t){return this.httpRequest.request({method:"GET",url:"/accounts/{address}",path:{address:e},query:{ledger_version:t}})}getAccountResources(e,t,n,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resources",path:{address:e},query:{ledger_version:t,start:n,limit:r}})}getAccountModules(e,t,n,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/modules",path:{address:e},query:{ledger_version:t,start:n,limit:r}})}getAccountResource(e,t,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resource/{resource_type}",path:{address:e,resource_type:t},query:{ledger_version:n}})}getAccountModule(e,t,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/module/{module_name}",path:{address:e,module_name:t},query:{ledger_version:n}})}},Qf=class{constructor(e){this.httpRequest=e}getBlockByHeight(e,t){return this.httpRequest.request({method:"GET",url:"/blocks/by_height/{block_height}",path:{block_height:e},query:{with_transactions:t}})}getBlockByVersion(e,t){return this.httpRequest.request({method:"GET",url:"/blocks/by_version/{version}",path:{version:e},query:{with_transactions:t}})}},eh=class{constructor(e){this.httpRequest=e}getEventsByCreationNumber(e,t,n,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{creation_number}",path:{address:e,creation_number:t},query:{start:n,limit:r}})}getEventsByEventHandle(e,t,n,r,s){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{event_handle}/{field_name}",path:{address:e,event_handle:t,field_name:n},query:{start:r,limit:s}})}},th=class{constructor(e){this.httpRequest=e}spec(){return this.httpRequest.request({method:"GET",url:"/spec"})}healthy(e){return this.httpRequest.request({method:"GET",url:"/-/healthy",query:{duration_secs:e}})}getLedgerInfo(){return this.httpRequest.request({method:"GET",url:"/"})}},nh=class{constructor(e){this.httpRequest=e}getTableItem(e,t,n){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/item",path:{table_handle:e},query:{ledger_version:n},body:t,mediaType:"application/json"})}getRawTableItem(e,t,n){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/raw_item",path:{table_handle:e},query:{ledger_version:n},body:t,mediaType:"application/json"})}},rh=class{constructor(e){this.httpRequest=e}getTransactions(e,t){return this.httpRequest.request({method:"GET",url:"/transactions",query:{start:e,limit:t}})}submitTransaction(e){return this.httpRequest.request({method:"POST",url:"/transactions",body:e,mediaType:"application/json"})}getTransactionByHash(e){return this.httpRequest.request({method:"GET",url:"/transactions/by_hash/{txn_hash}",path:{txn_hash:e}})}getTransactionByVersion(e){return this.httpRequest.request({method:"GET",url:"/transactions/by_version/{txn_version}",path:{txn_version:e}})}getAccountTransactions(e,t,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/transactions",path:{address:e},query:{start:t,limit:n}})}submitBatchTransactions(e){return this.httpRequest.request({method:"POST",url:"/transactions/batch",body:e,mediaType:"application/json"})}simulateTransaction(e,t,n,r){return this.httpRequest.request({method:"POST",url:"/transactions/simulate",query:{estimate_max_gas_amount:t,estimate_gas_unit_price:n,estimate_prioritized_gas_unit_price:r},body:e,mediaType:"application/json"})}encodeSubmission(e){return this.httpRequest.request({method:"POST",url:"/transactions/encode_submission",body:e,mediaType:"application/json"})}estimateGasPrice(){return this.httpRequest.request({method:"GET",url:"/estimate_gas_price"})}},sh=class{constructor(e){this.httpRequest=e}view(e,t){return this.httpRequest.request({method:"POST",url:"/view",query:{ledger_version:t},body:e,mediaType:"application/json"})}},ih=class{constructor(e,t=Jf){var n,r,s,i;this.request=new t({BASE:(n=e==null?void 0:e.BASE)!=null?n:"/v1",VERSION:(r=e==null?void 0:e.VERSION)!=null?r:"1.2.0",WITH_CREDENTIALS:(s=e==null?void 0:e.WITH_CREDENTIALS)!=null?s:!1,CREDENTIALS:(i=e==null?void 0:e.CREDENTIALS)!=null?i:"include",TOKEN:e==null?void 0:e.TOKEN,USERNAME:e==null?void 0:e.USERNAME,PASSWORD:e==null?void 0:e.PASSWORD,HEADERS:e==null?void 0:e.HEADERS,ENCODE_PATH:e==null?void 0:e.ENCODE_PATH}),this.accounts=new Yf(this.request),this.blocks=new Qf(this.request),this.events=new eh(this.request),this.general=new th(this.request),this.tables=new nh(this.request),this.transactions=new rh(this.request),this.view=new sh(this.request)}},Bb={BASE:"/v1",VERSION:"1.2.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},oh=(e=>(e.ACCOUNT_NOT_FOUND="account_not_found",e.RESOURCE_NOT_FOUND="resource_not_found",e.MODULE_NOT_FOUND="module_not_found",e.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",e.VERSION_NOT_FOUND="version_not_found",e.TRANSACTION_NOT_FOUND="transaction_not_found",e.TABLE_ITEM_NOT_FOUND="table_item_not_found",e.BLOCK_NOT_FOUND="block_not_found",e.VERSION_PRUNED="version_pruned",e.BLOCK_PRUNED="block_pruned",e.INVALID_INPUT="invalid_input",e.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",e.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",e.VM_ERROR="vm_error",e.HEALTH_CHECK_FAILED="health_check_failed",e.MEMPOOL_IS_FULL="mempool_is_full",e.INTERNAL_ERROR="internal_error",e.WEB_FRAMEWORK_ERROR="web_framework_error",e.BCS_NOT_SUPPORTED="bcs_not_supported",e.API_DISABLED="api_disabled",e))(oh||{}),ah=(e=>(e.PRIVATE="private",e.PUBLIC="public",e.FRIEND="friend",e))(ah||{}),ch=(e=>(e.VALIDATOR="validator",e.FULL_NODE="full_node",e))(ch||{}),Ib={description:`Account data

    A simplified version of the onchain Account resource`,properties:{sequence_number:{type:"U64",isRequired:!0},authentication_key:{type:"HexEncodedBytes",isRequired:!0}}},Cb={type:"one-of",description:`Account signature scheme

    The account signature scheme allows you to have two types of accounts:

    1. A single Ed25519 key account, one private key
    2. A k-of-n multi-Ed25519 key account, multiple private keys, such that k-of-n must sign a transaction.`,contains:[{type:"AccountSignature_Ed25519Signature"},{type:"AccountSignature_MultiEd25519Signature"}]},Ob={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},$b={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},Rb={type:"string",description:`A hex encoded 32 byte Aptos account address.

    This is represented in a string as a 64 character hex string, sometimes
    shortened by stripping leading 0s, and adding a 0x.

    For example, address 0x0000000000000000000000000000000000000000000000000000000000000001 is represented as 0x1.
    `,format:"hex"},Pb={description:`This is the generic struct we use for all API errors, it contains a string
    message and an Aptos API specific error code.`,properties:{message:{type:"string",description:"A message describing the error",isRequired:!0},error_code:{type:"AptosErrorCode",isRequired:!0},vm_error_code:{type:"number",description:"A code providing VM error details when submitting transactions to the VM",format:"uint64"}}},Ub={type:"Enum"},qb={description:`A Block with or without transactions

    This contains the information about a transactions along with
    associated transactions if requested`,properties:{block_height:{type:"U64",isRequired:!0},block_hash:{type:"HashValue",isRequired:!0},block_timestamp:{type:"U64",isRequired:!0},first_version:{type:"U64",isRequired:!0},last_version:{type:"U64",isRequired:!0},transactions:{type:"array",contains:{type:"Transaction"}}}},Nb={description:`A block metadata transaction

    This signifies the beginning of a block, and contains information
    about the specific block`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},id:{type:"HashValue",isRequired:!0},epoch:{type:"U64",isRequired:!0},round:{type:"U64",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0},previous_block_votes_bitvec:{type:"array",contains:{type:"number",format:"uint8"},isRequired:!0},proposer:{type:"Address",isRequired:!0},failed_proposer_indices:{type:"array",contains:{type:"number",format:"uint32"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},Db={description:"Decoded table data",properties:{key:{description:"Key of table in JSON",properties:{},isRequired:!0},key_type:{type:"string",description:"Type of key",isRequired:!0},value:{description:"Value of table in JSON",properties:{},isRequired:!0},value_type:{type:"string",description:"Type of value",isRequired:!0}}},Mb={description:"Deleted table data",properties:{key:{description:"Deleted key",properties:{},isRequired:!0},key_type:{type:"string",description:"Deleted key type",isRequired:!0}}},Lb={description:"Delete a module",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},module:{type:"MoveModuleId",isRequired:!0}}},jb={description:"Delete a resource",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},resource:{type:"MoveStructTag",isRequired:!0}}},Hb={description:"Delete a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DeletedTableData"}}},Gb={properties:{changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},zb={description:"A single Ed25519 signature",properties:{public_key:{type:"HexEncodedBytes",isRequired:!0},signature:{type:"HexEncodedBytes",isRequired:!0}}},Vb={description:"Request to encode a submission",properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},secondary_signers:{type:"array",contains:{type:"Address"}}}},Fb={type:"string",description:"Entry function id is string representation of a entry function defined on-chain.\n\n    Format: `{address}::{module name}::{function name}`\n\n    Both `module name` and `function name` are case-sensitive.\n    "},Wb={description:"Payload which runs a single entry function",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},Kb={description:"An event from a transaction",properties:{guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},Xb={properties:{creation_number:{type:"U64",isRequired:!0},account_address:{type:"Address",isRequired:!0}}},Zb={description:"Struct holding the outputs of the estimate gas API",properties:{deprioritized_gas_estimate:{type:"number",description:"The deprioritized estimate for the gas unit price",format:"uint64"},gas_estimate:{type:"number",description:"The current estimate for the gas unit price",isRequired:!0,format:"uint64"},prioritized_gas_estimate:{type:"number",description:"The prioritized estimate for the gas unit price",format:"uint64"}}},Jb={type:"one-of",description:"The writeset payload of the Genesis transaction",contains:[{type:"GenesisPayload_WriteSetPayload"}]},Yb={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteSetPayload"}]},Qb={description:`The genesis transaction

    This only occurs at the genesis transaction (version 0)`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},payload:{type:"GenesisPayload",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},em={type:"string"},tm={description:"Representation of a successful healthcheck",properties:{message:{type:"string",isRequired:!0}}},nm={type:"string",description:"All bytes (Vec<u8>) data is represented as hex-encoded string prefixed with `0x` and fulfilled with\n    two hex digits per byte.\n\n    Unlike the `Address` type, HexEncodedBytes will not trim any zeros.\n    ",format:"hex"},rm={type:"string"},sm={description:`The struct holding all data returned to the client by the
    index endpoint (i.e., GET "/").  Only for responding in JSON`,properties:{chain_id:{type:"number",description:"Chain ID of the current chain",isRequired:!0,format:"uint8"},epoch:{type:"U64",isRequired:!0},ledger_version:{type:"U64",isRequired:!0},oldest_ledger_version:{type:"U64",isRequired:!0},ledger_timestamp:{type:"U64",isRequired:!0},node_role:{type:"RoleType",isRequired:!0},oldest_block_height:{type:"U64",isRequired:!0},block_height:{type:"U64",isRequired:!0},git_hash:{type:"string",description:`Git hash of the build of the API endpoint.  Can be used to determine the exact
            software version used by the API endpoint.`}}},im={properties:{modules:{type:"array",contains:{type:"MoveModuleBytecode"},isRequired:!0}}},om={type:"string"},am={description:"Move function",properties:{name:{type:"IdentifierWrapper",isRequired:!0},visibility:{type:"MoveFunctionVisibility",isRequired:!0},is_entry:{type:"boolean",description:"Whether the function can be called as an entry function directly in a transaction",isRequired:!0},is_view:{type:"boolean",description:"Whether the function is a view function or not",isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveFunctionGenericTypeParam"},isRequired:!0},params:{type:"array",contains:{type:"MoveType"},isRequired:!0},return:{type:"array",contains:{type:"MoveType"},isRequired:!0}}},cm={description:"Move function generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},um={type:"Enum"},lm={description:"A Move module",properties:{address:{type:"Address",isRequired:!0},name:{type:"IdentifierWrapper",isRequired:!0},friends:{type:"array",contains:{type:"MoveModuleId"},isRequired:!0},exposed_functions:{type:"array",contains:{type:"MoveFunction"},isRequired:!0},structs:{type:"array",contains:{type:"MoveStruct"},isRequired:!0}}},dm={description:"Move module bytecode along with it's ABI",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveModule"}}},fm={type:"string",description:`Move module id is a string representation of Move module.

    Format: \`{address}::{module name}\`

    \`address\` should be hex-encoded 32 byte account address that is prefixed with \`0x\`.

    Module name is case-sensitive.
    `},hm={description:"A parsed Move resource",properties:{type:{type:"MoveStructTag",isRequired:!0},data:{type:"MoveStructValue",isRequired:!0}}},pm={description:"Move script bytecode",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveFunction"}}},gm={description:"A move struct",properties:{name:{type:"IdentifierWrapper",isRequired:!0},is_native:{type:"boolean",description:"Whether the struct is a native struct of Move",isRequired:!0},abilities:{type:"array",contains:{type:"MoveAbility"},isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveStructGenericTypeParam"},isRequired:!0},fields:{type:"array",contains:{type:"MoveStructField"},isRequired:!0}}},ym={description:"Move struct field",properties:{name:{type:"IdentifierWrapper",isRequired:!0},type:{type:"MoveType",isRequired:!0}}},bm={description:"Move generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},mm={type:"string",description:"String representation of a MoveStructTag (on-chain Move struct type). This exists so you\n    can specify MoveStructTags as path / query parameters, e.g. for get_events_by_event_handle.\n\n    It is a combination of:\n    1. `move_module_address`, `module_name` and `struct_name`, all joined by `::`\n    2. `struct generic type parameters` joined by `, `\n\n    Examples:\n     * `0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>`\n     * `0x1::account::Account`\n\n    Note:\n    1. Empty chars should be ignored when comparing 2 struct tag ids.\n    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).\n\n    See [doc](https://aptos.dev/concepts/accounts) for more details.\n    ",pattern:"^0x[0-9a-zA-Z:_<>]+$"},wm={description:'This is a JSON representation of some data within an account resource. More specifically,\n    it is a map of strings to arbitrary JSON values / objects, where the keys are top level\n    fields within the given resource.\n\n    To clarify, you might query for 0x1::account::Account and see the example data.\n\n    Move `bool` type value is serialized into `boolean`.\n\n    Move `u8`, `u16` and `u32` type value is serialized into `integer`.\n\n    Move `u64`, `u128` and `u256` type value is serialized into `string`.\n\n    Move `address` type value (32 byte Aptos account address) is serialized into a HexEncodedBytes string.\n    For example:\n    - `0x1`\n    - `0x1668f6be25668c1a17cd8caf6b8d2f25`\n\n    Move `vector` type value is serialized into `array`, except `vector<u8>` which is serialized into a\n    HexEncodedBytes string with `0x` prefix.\n    For example:\n    - `vector<u64>{255, 255}` => `["255", "255"]`\n    - `vector<u8>{255, 255}` => `0xffff`\n\n    Move `struct` type value is serialized into `object` that looks like this (except some Move stdlib types, see the following section):\n    ```json\n    {\n        field1_name: field1_value,\n        field2_name: field2_value,\n        ......\n    }\n    ```\n\n    For example:\n    `{ "created": "0xa550c18", "role_id": "0" }`\n\n     **Special serialization for Move stdlib types**:\n    - [0x1::string::String](https://github.com/aptos-labs/aptos-core/blob/main/language/move-stdlib/docs/ascii.md)\n    is serialized into `string`. For example, struct value `0x1::string::String{bytes: b"Hello World!"}`\n    is serialized as `"Hello World!"` in JSON.\n    ',properties:{}},_m={type:"string",description:`String representation of an on-chain Move type tag that is exposed in transaction payload.
    Values:
    - bool
    - u8
    - u16
    - u32
    - u64
    - u128
    - u256
    - address
    - signer
    - vector: \`vector<{non-reference MoveTypeId}>\`
    - struct: \`{address}::{module_name}::{struct_name}::<{generic types}>\`

    Vector type value examples:
    - \`vector<u8>\`
    - \`vector<vector<u64>>\`
    - \`vector<0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>>\`

    Struct type value examples:
    - \`0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>
    - \`0x1::account::Account\`

    Note:
    1. Empty chars should be ignored when comparing 2 struct tag ids.
    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).
    `,pattern:"^(bool|u8|u64|u128|address|signer|vector<.+>|0x[0-9a-zA-Z:_<, >]+)$"},vm={type:"any-of",description:"An enum of the possible Move value types",contains:[{type:"number",format:"uint8"},{type:"number",format:"uint16"},{type:"number",format:"uint32"},{type:"U64"},{type:"U128"},{type:"U256"},{type:"boolean"},{type:"Address"},{type:"array",contains:{type:"MoveValue"}},{type:"HexEncodedBytes"},{type:"MoveStructValue"},{type:"string"}]},Tm={description:`Multi agent signature for multi agent transactions

    This allows you to have transactions across multiple accounts`,properties:{sender:{type:"AccountSignature",isRequired:!0},secondary_signer_addresses:{type:"array",contains:{type:"Address"},isRequired:!0},secondary_signers:{type:"array",contains:{type:"AccountSignature"},isRequired:!0}}},Sm={description:`A Ed25519 multi-sig signature

    This allows k-of-n signing for a transaction`,properties:{public_keys:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},signatures:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},threshold:{type:"number",description:"The number of signatures required for a successful transaction",isRequired:!0,format:"uint8"},bitmap:{type:"HexEncodedBytes",isRequired:!0}}},xm={description:`A multisig transaction that allows an owner of a multisig account to execute a pre-approved
    transaction as the multisig account.`,properties:{multisig_address:{type:"Address",isRequired:!0},transaction_payload:{type:"MultisigTransactionPayload"}}},Am={type:"any-of",contains:[{type:"EntryFunctionPayload"}]},km={description:"A transaction waiting in mempool",properties:{hash:{type:"HashValue",isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"}}},Em={description:"Table Item request for the GetTableItemRaw API",properties:{key:{type:"HexEncodedBytes",isRequired:!0}}},Bm={type:"Enum"},Im={description:"Payload which runs a script that can run multiple functions",properties:{code:{type:"MoveScriptBytecode",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},Cm={properties:{execute_as:{type:"Address",isRequired:!0},script:{type:"ScriptPayload",isRequired:!0}}},Om={description:"A state checkpoint transaction",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},$m={type:"string",description:`Representation of a StateKey as a hex string. This is used for cursor based pagination.
    `},Rm={description:`A request to submit a transaction

    This requires a transaction and a signature of it`,properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature",isRequired:!0}}},Pm={description:"Table Item request for the GetTableItem API",properties:{key_type:{type:"MoveType",isRequired:!0},value_type:{type:"MoveType",isRequired:!0},key:{description:"The value of the table item's key",properties:{},isRequired:!0}}},Um={type:"one-of",description:"Enum of the different types of transactions in Aptos",contains:[{type:"Transaction_PendingTransaction"},{type:"Transaction_UserTransaction"},{type:"Transaction_GenesisTransaction"},{type:"Transaction_BlockMetadataTransaction"},{type:"Transaction_StateCheckpointTransaction"}]},qm={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"BlockMetadataTransaction"}]},Nm={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"GenesisTransaction"}]},Dm={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"PendingTransaction"}]},Mm={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"StateCheckpointTransaction"}]},Lm={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"UserTransaction"}]},jm={type:"one-of",description:"An enum of the possible transaction payloads",contains:[{type:"TransactionPayload_EntryFunctionPayload"},{type:"TransactionPayload_ScriptPayload"},{type:"TransactionPayload_ModuleBundlePayload"},{type:"TransactionPayload_MultisigPayload"}]},Hm={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"EntryFunctionPayload"}]},Gm={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ModuleBundlePayload"}]},zm={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultisigPayload"}]},Vm={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptPayload"}]},Fm={description:"Information telling which batch submission transactions failed",properties:{error:{type:"AptosError",isRequired:!0},transaction_index:{type:"number",description:"The index of which transaction failed, same as submission order",isRequired:!0,format:"uint64"}}},Wm={description:`Batch transaction submission result

    Tells which transactions failed`,properties:{transaction_failures:{type:"array",contains:{type:"TransactionsBatchSingleSubmissionFailure"},isRequired:!0}}},Km={type:"one-of",description:"An enum representing the different transaction signatures available",contains:[{type:"TransactionSignature_Ed25519Signature"},{type:"TransactionSignature_MultiEd25519Signature"},{type:"TransactionSignature_MultiAgentSignature"}]},Xm={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},Zm={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiAgentSignature"}]},Jm={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},Ym={type:"string",description:`A string containing a 128-bit unsigned integer.

    We represent u128 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u128s in JSON natively.
    `,format:"uint128"},Qm={type:"string",description:`A string containing a 256-bit unsigned integer.

    We represent u256 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u256s in JSON natively.
    `,format:"uint256"},ew={type:"string",description:`A string containing a 64-bit unsigned integer.

    We represent u64 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u64s in JSON natively.
    `,format:"uint64"},tw={description:"A transaction submitted by a user to change the state of the blockchain",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"},events:{type:"array",contains:{type:"Event"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},nw={description:"An event from a transaction with a version",properties:{version:{type:"U64",isRequired:!0},guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},rw={description:"View request for the Move View Function API",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},sw={description:"Write a new module or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveModuleBytecode",isRequired:!0}}},iw={description:"Write a resource or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveResource",isRequired:!0}}},ow={type:"one-of",description:"The associated writeset with a payload",contains:[{type:"WriteSet_ScriptWriteSet"},{type:"WriteSet_DirectWriteSet"}]},aw={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DirectWriteSet"}]},cw={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptWriteSet"}]},uw={type:"one-of",description:"A final state change of a transaction on a resource or module",contains:[{type:"WriteSetChange_DeleteModule"},{type:"WriteSetChange_DeleteResource"},{type:"WriteSetChange_DeleteTableItem"},{type:"WriteSetChange_WriteModule"},{type:"WriteSetChange_WriteResource"},{type:"WriteSetChange_WriteTableItem"}]},lw={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteModule"}]},dw={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteResource"}]},fw={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteTableItem"}]},hw={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteModule"}]},pw={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteResource"}]},gw={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteTableItem"}]},yw={description:"A writeset payload, used only for genesis",properties:{write_set:{type:"WriteSet",isRequired:!0}}},bw={description:"Change set to write a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},value:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DecodedTableData"}}},mw=new Ts(je.fromHex("0x1"),new Bt("string"),new Bt("String"),[]);function ya(e,t,n){if(!(t!=null&&t.includes(typeof e)))throw new Error(n||`Invalid arg: ${e} type should be ${t instanceof Array?t.join(" or "):t}`)}function Sr(e){throw new Error(e)}function $l(e){return!!e.match(/\s/)}function Rl(e){return!!e.match(/[_A-Za-z0-9]/g)}function ww(e,t){const n=e[t];if(n===":"){if(e.slice(t,t+2)==="::")return[["COLON","::"],2];Sr("Unrecognized token.")}else{if(n==="<")return[["LT","<"],1];if(n===">")return[["GT",">"],1];if(n===",")return[["COMMA",","],1];if($l(n)){let r="";for(let s=t;s<e.length;s+=1){const i=e[s];if($l(i))r=`${r}${i}`;else break}return[["SPACE",r],r.length]}else if(Rl(n)){let r="";for(let s=t;s<e.length;s+=1){const i=e[s];if(Rl(i))r=`${r}${i}`;else break}return[["IDENT",r],r.length]}}throw new Error("Unrecognized token.")}function _w(e){let t=0;const n=[];for(;t<e.length;){const[r,s]=ww(e,t);r[0]!=="SPACE"&&n.push(r),t+=s}return n}var ba=class{constructor(e){this.tokens=_w(e)}consume(e){const t=this.tokens.shift();(!t||t[1]!==e)&&Sr("Invalid type tag.")}parseCommaList(e,t){const n=[];for(this.tokens.length<=0&&Sr("Invalid type tag.");this.tokens[0][1]!==e&&(n.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===e||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===e&&t)));)this.tokens.length<=0&&Sr("Invalid type tag.");return n}parseTypeTag(){this.tokens.length===0&&Sr("Invalid type tag.");const[e,t]=this.tokens.shift();if(t==="u8")return new jn;if(t==="u16")return new Os;if(t==="u32")return new $s;if(t==="u64")return new Xr;if(t==="u128")return new Zr;if(t==="u256")return new Rs;if(t==="bool")return new Kr;if(t==="address")return new Jr;if(t==="vector"){this.consume("<");const n=this.parseTypeTag();return this.consume(">"),new Ps(n)}if(e==="IDENT"&&(t.startsWith("0x")||t.startsWith("0X"))){const n=t;this.consume("::");const[r,s]=this.tokens.shift();r!=="IDENT"&&Sr("Invalid type tag."),this.consume("::");const[i,o]=this.tokens.shift();i!=="IDENT"&&Sr("Invalid type tag.");let a=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),a=this.parseCommaList(">",!0),this.consume(">"));const c=new Ts(je.fromHex(n),new Bt(s),new Bt(o),a);return new Yr(c)}throw new Error("Invalid type tag.")}};function uh(e){if(ya(e,["boolean","string"]),typeof e=="boolean")return e;if(e==="true")return!0;if(e==="false")return!1;throw new Error("Invalid boolean string.")}function ps(e){if(ya(e,["number","string"]),typeof e=="number")return e;const t=Number.parseInt(e,10);if(Number.isNaN(t))throw new Error("Invalid number string.");return t}function gs(e){return ya(e,["number","bigint","string"]),BigInt(e)}function lu(e,t,n){if(t instanceof Kr){n.serializeBool(uh(e));return}if(t instanceof jn){n.serializeU8(ps(e));return}if(t instanceof Os){n.serializeU16(ps(e));return}if(t instanceof $s){n.serializeU32(ps(e));return}if(t instanceof Xr){n.serializeU64(gs(e));return}if(t instanceof Zr){n.serializeU128(gs(e));return}if(t instanceof Rs){n.serializeU256(gs(e));return}if(t instanceof Jr){let r;if(typeof e=="string"||e instanceof ae)r=je.fromHex(e);else if(e instanceof je)r=e;else throw new Error("Invalid account address.");r.serialize(n);return}if(t instanceof Ps){if(t.value instanceof jn){if(e instanceof Uint8Array){n.serializeBytes(e);return}if(typeof e=="string"){n.serializeStr(e);return}}if(!Array.isArray(e))throw new Error("Invalid vector args.");n.serializeU32AsUleb128(e.length),e.forEach(r=>lu(r,t.value,n));return}if(t instanceof Yr){const{address:r,module_name:s,name:i}=t.value;if(`${ae.fromUint8Array(r.address).toShortString()}::${s.value}::${i.value}`!="0x1::string::String")throw new Error("The only supported struct arg is of type 0x1::string::String");ya(e,["string"]),n.serializeStr(e);return}throw new Error("Unsupported arg type.")}function vw(e,t){if(t instanceof Kr)return new fa(uh(e));if(t instanceof jn)return new sa(ps(e));if(t instanceof Os)return new ia(ps(e));if(t instanceof $s)return new oa(ps(e));if(t instanceof Xr)return new aa(gs(e));if(t instanceof Zr)return new ca(gs(e));if(t instanceof Rs)return new ua(gs(e));if(t instanceof Jr){let n;if(typeof e=="string"||e instanceof ae)n=je.fromHex(e);else if(e instanceof je)n=e;else throw new Error("Invalid account address.");return new la(n)}if(t instanceof Ps&&t.value instanceof jn){if(!(e instanceof Uint8Array))throw new Error(`${e} should be an instance of Uint8Array`);return new da(e)}throw new Error("Unknown type for TransactionArgument.")}var Tw="APTOS::RawTransaction",Sw="APTOS::RawTransactionWithData",Mr=class{constructor(e,t){this.rawTxnBuilder=t,this.signingFunction=e}build(e,t,n){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(e,t,n)}static getSigningMessage(e){const t=vs.create();if(e instanceof Us)t.update(Tw);else if(e instanceof ea)t.update(Sw);else throw new Error("Unknown transaction type.");const n=t.digest(),r=Gn(e),s=new Uint8Array(n.length+r.length);return s.set(n),s.set(r,n.length),s}},ao=class extends Mr{constructor(e,t,n){super(e,n),this.publicKey=t}rawToSigned(e){const t=Mr.getSigningMessage(e),n=this.signingFunction(t),r=new Jo(new rn(this.publicKey),n);return new Ci(e,r)}sign(e){return Gn(this.rawToSigned(e))}},lh=class extends Mr{constructor(e,t){super(e),this.publicKey=t}rawToSigned(e){const t=Mr.getSigningMessage(e),n=this.signingFunction(t),r=new Yo(this.publicKey,n);return new Ci(e,r)}sign(e){return Gn(this.rawToSigned(e))}},mo=class{constructor(e,t){this.abiMap=new Map,e.forEach(n=>{const r=new eu(n),s=ha.deserialize(r);let i;if(s instanceof Ss){const o=s,{address:a,name:c}=o.module_name;i=`${ae.fromUint8Array(a.address).toShortString()}::${c.value}::${o.name}`}else i=s.name;if(this.abiMap.has(i))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(i,s)}),this.builderConfig={maxGasAmount:BigInt(Uf),expSecFromNow:qf,...t}}static toBCSArgs(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((n,r)=>{const s=new Ge;return lu(n,e[r].type_tag,s),s.getBytes()})}static toTransactionArguments(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((n,r)=>vw(n,e[r].type_tag))}setSequenceNumber(e){this.builderConfig.sequenceNumber=BigInt(e)}buildTransactionPayload(e,t,n){const r=t.map(o=>new ba(o).parseTypeTag());let s;if(!this.abiMap.has(e))throw new Error(`Cannot find function: ${e}`);const i=this.abiMap.get(e);if(i instanceof Ss){const o=i,a=mo.toBCSArgs(o.args,n);s=new na(new Ur(o.module_name,new Bt(o.name),r,a))}else if(i instanceof pa){const o=i,a=mo.toTransactionArguments(o.args,n);s=new ta(new Qo(o.code,r,a))}else throw new Error("Unknown ABI format.");return s}build(e,t,n){const{sender:r,sequenceNumber:s,gasUnitPrice:i,maxGasAmount:o,expSecFromNow:a,chainId:c}=this.builderConfig;if(!i)throw new Error("No gasUnitPrice provided.");const u=r instanceof je?r:je.fromHex(r),d=BigInt(Math.floor(Date.now()/1e3)+Number(a)),l=this.buildTransactionPayload(e,t,n);if(l)return new Us(u,BigInt(s),l,BigInt(o),BigInt(i),d,new ra(Number(c)));throw new Error("Invalid ABI.")}},St=class{constructor(e,t){this.aptosClient=e,this.builderConfig=t}async fetchABI(e){const n=(await this.aptosClient.getAccountModules(e)).map(s=>s.abi).flatMap(s=>s.exposed_functions.filter(i=>i.is_entry).map(i=>({fullName:`${s.address}::${s.name}::${i.name}`,...i}))),r=new Map;return n.forEach(s=>{r.set(s.fullName,s)}),r}async build(e,t,n){if(e=(b=>b.replace(/^0[xX]0*/g,"0x"))(e),e.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coins::transfer");const[i,o]=e.split("::"),a=await this.fetchABI(i);if(!a.has(e))throw new Error(`${e} doesn't exist.`);const c=a.get(e),d=c.params.filter(b=>b!=="signer"&&b!=="&signer").map((b,_)=>new Ri(`var${_}`,new ba(b).parseTypeTag())),l=new Ss(c.name,Nr.fromStr(`${i}::${o}`),"",c.generic_type_params.map((b,_)=>new $i(`${_}`)),d),{sender:p,...g}=this.builderConfig,w=p instanceof je?ae.fromUint8Array(p.address):p,[{sequence_number:h},y,{gas_estimate:v}]=await Promise.all([g!=null&&g.sequenceNumber?Promise.resolve({sequence_number:g==null?void 0:g.sequenceNumber}):this.aptosClient.getAccount(w),g!=null&&g.chainId?Promise.resolve(g==null?void 0:g.chainId):this.aptosClient.getChainId(),g!=null&&g.gasUnitPrice?Promise.resolve({gas_estimate:g==null?void 0:g.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new mo([Gn(l)],{sender:p,sequenceNumber:h,chainId:y,gasUnitPrice:BigInt(v),...g}).build(e,t,n)}};Ce([Uy(10*60*1e3)],St.prototype,"fetchABI",1);var Vs=class{constructor(e,t,n=!1){if(!e)throw new Error("Node URL cannot be empty.");const r=t==null?{}:{...t};n?this.nodeUrl=e:this.nodeUrl=Py(e),r.BASE=this.nodeUrl,(t==null?void 0:t.WITH_CREDENTIALS)===!1?r.WITH_CREDENTIALS=!1:r.WITH_CREDENTIALS=!0,this.client=new ih(r)}async getAccount(e){return this.client.accounts.getAccount(ae.ensure(e).hex())}async getAccountTransactions(e,t){var n;return this.client.transactions.getAccountTransactions(ae.ensure(e).hex(),(n=t==null?void 0:t.start)==null?void 0:n.toString(),t==null?void 0:t.limit)}async getAccountModules(e,t){const n=this.client.accounts.getAccountModules.bind({httpRequest:this.client.request});return await Ol(n,e,1e3,t)}async getAccountModule(e,t,n){var r;return this.client.accounts.getAccountModule(ae.ensure(e).hex(),t,(r=n==null?void 0:n.ledgerVersion)==null?void 0:r.toString())}async getAccountResources(e,t){const n=this.client.accounts.getAccountResources.bind({httpRequest:this.client.request});return await Ol(n,e,9999,t)}async getAccountResource(e,t,n){var r;return this.client.accounts.getAccountResource(ae.ensure(e).hex(),t,(r=n==null?void 0:n.ledgerVersion)==null?void 0:r.toString())}static generateBCSTransaction(e,t){return new ao(r=>{const s=e.signBuffer(r);return new Be.Ed25519Signature(s.toUint8Array())},e.pubKey().toUint8Array()).sign(t)}static generateBCSSimulation(e,t){return new ao(r=>{const s=new Uint8Array(64);return new Be.Ed25519Signature(s)},e.pubKey().toUint8Array()).sign(t)}async generateTransaction(e,t,n){const r={sender:e};if(n!=null&&n.sequence_number&&(r.sequenceNumber=n.sequence_number),n!=null&&n.gas_unit_price&&(r.gasUnitPrice=n.gas_unit_price),n!=null&&n.max_gas_amount&&(r.maxGasAmount=n.max_gas_amount),n!=null&&n.expiration_timestamp_secs){const i=Number.parseInt(n.expiration_timestamp_secs,10);r.expSecFromNow=i-Math.floor(Date.now()/1e3)}return new St(this,r).build(t.function,t.type_arguments,t.arguments)}async signTransaction(e,t){return Promise.resolve(Vs.generateBCSTransaction(e,t))}async getEventsByCreationNumber(e,t,n){var r;return this.client.events.getEventsByCreationNumber(ae.ensure(e).hex(),t.toString(),(r=n==null?void 0:n.start)==null?void 0:r.toString(),n==null?void 0:n.limit)}async getEventsByEventHandle(e,t,n,r){var s;return this.client.events.getEventsByEventHandle(ae.ensure(e).hex(),t,n,(s=r==null?void 0:r.start)==null?void 0:s.toString(),r==null?void 0:r.limit)}async submitTransaction(e){return this.submitSignedBCSTransaction(e)}async simulateTransaction(e,t,n){let r;return e instanceof xs?r=Vs.generateBCSSimulation(e,t):e instanceof Bi?r=new lh(()=>{const{threshold:i}=e,o=[],a=[];for(let u=0;u<i;u+=1)o.push(u),a.push(new Be.Ed25519Signature(new Uint8Array(64)));const c=Be.MultiEd25519Signature.createBitmap(o);return new Be.MultiEd25519Signature(a,c)},e).sign(t):r=new ao(()=>{const i=new Uint8Array(64);return new Be.Ed25519Signature(i)},e.toBytes()).sign(t),this.submitBCSSimulation(r,n)}async submitSignedBCSTransaction(e){return this.client.request.request({url:"/transactions",method:"POST",body:e,mediaType:"application/x.aptos.signed_transaction+bcs"})}async submitBCSSimulation(e,t){var n,r,s;const i={estimate_gas_unit_price:(n=t==null?void 0:t.estimateGasUnitPrice)!=null?n:!1,estimate_max_gas_amount:(r=t==null?void 0:t.estimateMaxGasAmount)!=null?r:!1,estimate_prioritized_gas_unit_price:(s=t==null?void 0:t.estimatePrioritizedGasUnitPrice)!=null?s:!1};return this.client.request.request({url:"/transactions/simulate",query:i,method:"POST",body:e,mediaType:"application/x.aptos.signed_transaction+bcs"})}async getTransactions(e){var t;return this.client.transactions.getTransactions((t=e==null?void 0:e.start)==null?void 0:t.toString(),e==null?void 0:e.limit)}async getTransactionByHash(e){return this.client.transactions.getTransactionByHash(e)}async getTransactionByVersion(e){return this.client.transactions.getTransactionByVersion(e.toString())}async transactionPending(e){try{return(await this.client.transactions.getTransactionByHash(e)).type==="pending_transaction"}catch(t){if((t==null?void 0:t.status)===404)return!0;throw t}}async waitForTransactionWithResult(e,t){var n,r;const s=(n=t==null?void 0:t.timeoutSecs)!=null?n:Nf,i=(r=t==null?void 0:t.checkSuccess)!=null?r:!1;let o=!0,a=0,c;for(;o&&!(a>=s);){try{if(c=await this.client.transactions.getTransactionByHash(e),o=c.type==="pending_transaction",!o)break}catch(u){const d=u instanceof fi,l=d&&u.status!==404&&u.status>=400&&u.status<500;if(!d||l)throw u}await Ry(1e3),a+=1}if(c===void 0)throw new Error(`Waiting for transaction ${e} failed`);if(o)throw new fh(`Waiting for transaction ${e} timed out after ${s} seconds`,c);if(!i)return c;if(!(c!=null&&c.success))throw new hh(`Transaction ${e} committed to the blockchain but execution failed`,c);return c}async waitForTransaction(e,t){await this.waitForTransactionWithResult(e,t)}async getLedgerInfo(){return this.client.general.getLedgerInfo()}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(e,t,n){var r;return await this.client.tables.getTableItem(e,t,(r=n==null?void 0:n.ledgerVersion)==null?void 0:r.toString())}async generateRawTransaction(e,t,n){const[{sequence_number:r},s,{gas_estimate:i}]=await Promise.all([this.getAccount(e),this.getChainId(),n!=null&&n.gasUnitPrice?Promise.resolve({gas_estimate:n.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:o,gasUnitPrice:a,expireTimestamp:c}={maxGasAmount:BigInt(Uf),gasUnitPrice:BigInt(i),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+qf),...n};return new Be.RawTransaction(Be.AccountAddress.fromHex(e),BigInt(r),t,o,a,c,new Be.ChainId(s))}async generateSignSubmitTransaction(e,t,n){const r=await this.generateRawTransaction(e.address(),t,n),s=Vs.generateBCSTransaction(e,r);return(await this.submitSignedBCSTransaction(s)).hash}async publishPackage(e,t,n,r){const s=new Ge;Wt(n,s);const i=new Be.TransactionPayloadEntryFunction(Be.EntryFunction.natural("0x1::code","publish_package_txn",[],[us(t),s.getBytes()]));return this.generateSignSubmitTransaction(e,i,r)}async generateSignSubmitWaitForTransaction(e,t,n){const r=await this.generateSignSubmitTransaction(e,t,n);return this.waitForTransactionWithResult(r,n)}async estimateGasPrice(){return this.client.transactions.estimateGasPrice()}async estimateMaxGasAmount(e){const t=`0x1::coin::CoinStore<${fc}>`,[{gas_estimate:n},r]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(e)]),s=r.find(o=>o.type===t);return BigInt(s.data.coin.value)/BigInt(n)}async rotateAuthKeyEd25519(e,t,n){const{sequence_number:r,authentication_key:s}=await this.getAccount(e.address()),i=new xs(t),o=new Be.RotationProofChallenge(Be.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(r),Be.AccountAddress.fromHex(e.address()),new Be.AccountAddress(new ae(s).toUint8Array()),i.pubKey().toUint8Array()),a=ae.fromUint8Array(Gn(o)),c=e.signHexString(a),u=i.signHexString(a),d=new Be.TransactionPayloadEntryFunction(Be.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[hc(0),us(e.pubKey().toUint8Array()),hc(0),us(i.pubKey().toUint8Array()),us(c.toUint8Array()),us(u.toUint8Array())])),l=await this.generateRawTransaction(e.address(),d,n),p=Vs.generateBCSTransaction(e,l);return this.submitSignedBCSTransaction(p)}async lookupOriginalAddress(e){const t=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:n}}=t.data,r=await this.getTableItem(n,{key_type:"address",value_type:"address",key:ae.ensure(e).hex()});return new ae(r)}async getBlockByHeight(e,t){return this.client.blocks.getBlockByHeight(e,t)}async getBlockByVersion(e,t){return this.client.blocks.getBlockByVersion(e,t)}async view(e,t){return this.client.view.view(e,t)}clearCache(e){qy(e)}},_e=Vs;Ce([Ze],_e.prototype,"getAccount",1);Ce([Ze],_e.prototype,"getAccountTransactions",1);Ce([Ze],_e.prototype,"getAccountModules",1);Ce([Ze],_e.prototype,"getAccountModule",1);Ce([Ze],_e.prototype,"getAccountResources",1);Ce([Ze],_e.prototype,"getAccountResource",1);Ce([Ze],_e.prototype,"getEventsByCreationNumber",1);Ce([Ze],_e.prototype,"getEventsByEventHandle",1);Ce([Ze],_e.prototype,"submitSignedBCSTransaction",1);Ce([Ze],_e.prototype,"submitBCSSimulation",1);Ce([Ze],_e.prototype,"getTransactions",1);Ce([Ze],_e.prototype,"getTransactionByHash",1);Ce([Ze],_e.prototype,"getTransactionByVersion",1);Ce([Ze],_e.prototype,"getLedgerInfo",1);Ce([Xo()],_e.prototype,"getChainId",1);Ce([Ze],_e.prototype,"getTableItem",1);Ce([Ze,Xo({ttlMs:5*60*1e3,tags:["gas_estimates"]})],_e.prototype,"estimateGasPrice",1);Ce([Ze],_e.prototype,"estimateMaxGasAmount",1);Ce([Ze],_e.prototype,"getBlockByHeight",1);Ce([Ze],_e.prototype,"getBlockByVersion",1);Ce([Ze],_e.prototype,"view",1);var dh=class extends Error{constructor(e,t,n,r){super(t),this.status=e,this.message=t,this.errorCode=n,this.vmErrorCode=r}},fh=class extends Error{constructor(e,t){super(e),this.lastSubmittedTransaction=t}},hh=class extends Error{constructor(e,t){super(e),this.transaction=t}};function Ze(e,t,n){const r=n.value;return n.value=async function(...i){var o,a;try{return await r.apply(this,[...i])}catch(c){throw c instanceof fi?new dh(c.status,JSON.stringify({message:c.message,...c.body}),(o=c.body)==null?void 0:o.error_code,(a=c.body)==null?void 0:a.vm_error_code):c}},n}var du=class{constructor(e,t,n=!1){let r=null,s=null;if(typeof e=="object"&&xw(e)?(r=e.fullnodeUrl,s=e.indexerUrl,this.network="CUSTOM"):(r=Dy[e],s=Ny[e],this.network=e),!r||!s)throw new Error("network is not provided");this.aptosClient=new _e(r,t,n),this.indexerClient=new hn(s)}};function ph(e,t,n){Object.getOwnPropertyNames(t.prototype).forEach(r=>{const s=Object.getOwnPropertyDescriptor(t.prototype,r);s&&(s.value=function(...i){return this[n][r](...i)},Object.defineProperty(e.prototype,r,s))})}ph(du,_e,"aptosClient");ph(du,hn,"indexerClient");function xw(e){return e.fullnodeUrl!==void 0&&typeof e.fullnodeUrl=="string"&&e.indexerUrl!==void 0&&typeof e.indexerUrl=="string"}var gh=class{constructor(e,t){this.type=e,this.value=t}},fu=class{constructor(){this.data={}}setProperty(e,t){this.data[e]=t}};function yh(e){let t;return e==="string"||e==="String"?t=new Yr(mw):t=new ba(e).parseTypeTag(),t}function bh(e,t){if(e.length!==t.length)throw new Error("Length of property values and types not match");const n=new Array;return t.forEach((r,s)=>{try{const i=yh(r),o=new Ge;lu(e[s],i,o),n.push(o.getBytes())}catch{n.push(new TextEncoder().encode(e[s]))}}),n}function hu(e){const t=e.map.data,n=new fu;return t.forEach(r=>{const{key:s}=r,i=r.value.value,o=r.value.type,a=yh(o),c=mh(a,i),u=new gh(o,c);n.setProperty(s,u)}),n}function mh(e,t){const n=new eu(new ae(t).toUint8Array());let r="";return e instanceof jn?r=n.deserializeU8().toString():e instanceof Xr?r=n.deserializeU64().toString():e instanceof Zr?r=n.deserializeU128().toString():e instanceof Kr?r=n.deserializeBool()?"true":"false":e instanceof Jr?r=ae.fromUint8Array(n.deserializeFixedBytes(32)).hex():e instanceof Yr&&e.isStringTypeTag()?r=n.deserializeStr():r=t,r}var wh={};Ko(wh,{PropertyMap:()=>fu,PropertyValue:()=>gh,Token:()=>vh,TokenData:()=>_h});var _h=class{constructor(e,t,n,r,s,i,o,a){this.collection=e,this.description=t,this.name=n,this.maximum=r,this.supply=s,this.uri=i,this.default_properties=hu(o),this.mutability_config=a}},vh=class{constructor(e,t,n){this.id=e,this.amount=t,this.token_properties=hu(n)}},Aw=class{constructor(e){this.aptosClient=e}async createCollection(e,t,n,r,s=si,i){const a=await new St(this.aptosClient,{sender:e.address(),...i}).build("0x3::token::create_collection_script",[],[t,n,r,s,[!1,!1,!1]]),c=_e.generateBCSTransaction(e,a);return(await this.aptosClient.submitSignedBCSTransaction(c)).hash}async createToken(e,t,n,r,s,i,o=si,a=e.address(),c=0,u=0,d=[],l=[],p=[],g){const h=await new St(this.aptosClient,{sender:e.address(),...g}).build("0x3::token::create_token_script",[],[t,n,r,s,o,i,a,c,u,[!1,!1,!1,!1,!1],d,bh(l,p),p]),y=_e.generateBCSTransaction(e,h);return(await this.aptosClient.submitSignedBCSTransaction(y)).hash}async createTokenWithMutabilityConfig(e,t,n,r,s,i,o=si,a=e.address(),c=0,u=0,d=[],l=[],p=[],g=[!1,!1,!1,!1,!1],w){const y=await new St(this.aptosClient,{sender:e.address(),...w}).build("0x3::token::create_token_script",[],[t,n,r,s,o,i,a,c,u,g,d,l,p]),v=_e.generateBCSTransaction(e,y);return(await this.aptosClient.submitSignedBCSTransaction(v)).hash}async offerToken(e,t,n,r,s,i,o=0,a){const u=await new St(this.aptosClient,{sender:e.address(),...a}).build("0x3::token_transfers::offer_script",[],[t,n,r,s,o,i]),d=_e.generateBCSTransaction(e,u);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async claimToken(e,t,n,r,s,i=0,o){const c=await new St(this.aptosClient,{sender:e.address(),...o}).build("0x3::token_transfers::claim_script",[],[t,n,r,s,i]),u=_e.generateBCSTransaction(e,c);return(await this.aptosClient.submitSignedBCSTransaction(u)).hash}async cancelTokenOffer(e,t,n,r,s,i=0,o){const c=await new St(this.aptosClient,{sender:e.address(),...o}).build("0x3::token_transfers::cancel_offer_script",[],[t,n,r,s,i]),u=_e.generateBCSTransaction(e,c);return(await this.aptosClient.submitSignedBCSTransaction(u)).hash}async directTransferToken(e,t,n,r,s,i,o=0,a){const u=await new St(this.aptosClient,{sender:e.address(),...a}).build("0x3::token::direct_transfer_script",[],[n,r,s,o,i]),d=new Be.MultiAgentRawTransaction(u,[Be.AccountAddress.fromHex(t.address())]),l=new Be.Ed25519Signature(e.signBuffer(Mr.getSigningMessage(d)).toUint8Array()),p=new Be.AccountAuthenticatorEd25519(new Be.Ed25519PublicKey(e.signingKey.publicKey),l),g=new Be.Ed25519Signature(t.signBuffer(Mr.getSigningMessage(d)).toUint8Array()),w=new Be.AccountAuthenticatorEd25519(new Be.Ed25519PublicKey(t.signingKey.publicKey),g),h=new Be.TransactionAuthenticatorMultiAgent(p,[Be.AccountAddress.fromHex(t.address())],[w]),y=Gn(new Be.SignedTransaction(u,h));return(await this.aptosClient.submitSignedBCSTransaction(y)).hash}async optInTokenTransfer(e,t,n){const s=await new St(this.aptosClient,{sender:e.address(),...n}).build("0x3::token::opt_in_direct_transfer",[],[t]),i=_e.generateBCSTransaction(e,s);return(await this.aptosClient.submitSignedBCSTransaction(i)).hash}async transferWithOptIn(e,t,n,r,s,i,o,a){const u=await new St(this.aptosClient,{sender:e.address(),...a}).build("0x3::token::transfer_with_opt_in",[],[t,n,r,s,i,o]),d=_e.generateBCSTransaction(e,u);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async burnByCreator(e,t,n,r,s,i,o){const c=await new St(this.aptosClient,{sender:e.address(),...o}).build("0x3::token::burn_by_creator",[],[t,n,r,s,i]),u=_e.generateBCSTransaction(e,c);return(await this.aptosClient.submitSignedBCSTransaction(u)).hash}async burnByOwner(e,t,n,r,s,i,o){const c=await new St(this.aptosClient,{sender:e.address(),...o}).build("0x3::token::burn",[],[t,n,r,s,i]),u=_e.generateBCSTransaction(e,c);return(await this.aptosClient.submitSignedBCSTransaction(u)).hash}async mutateTokenProperties(e,t,n,r,s,i,o,a,c,u,d){const p=await new St(this.aptosClient,{sender:e.address(),...d}).build("0x3::token::mutate_token_properties",[],[t,n,r,s,i,o,a,c,u]),g=_e.generateBCSTransaction(e,p);return(await this.aptosClient.submitSignedBCSTransaction(g)).hash}async getCollectionData(e,t){const r=(await this.aptosClient.getAccountResources(e)).find(a=>a.type==="0x3::token::Collections"),{handle:s}=r.data.collection_data,i={key_type:"0x1::string::String",value_type:"0x3::token::CollectionData",key:t};return await this.aptosClient.getTableItem(s,i)}async getTokenData(e,t,n){const r=e instanceof ae?e.hex():e,s=await this.aptosClient.getAccountResource(r,"0x3::token::Collections"),{handle:i}=s.data.token_data,a={key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:r,collection:t,name:n}},c=await this.aptosClient.getTableItem(i,a);return new _h(c.collection,c.description,c.name,c.maximum,c.supply,c.uri,c.default_properties,c.mutability_config)}async getToken(e,t,n,r="0"){const s={creator:e instanceof ae?e.hex():e,collection:t,name:n};return this.getTokenForAccount(e,{token_data_id:s,property_version:r})}async getTokenForAccount(e,t){const n=await this.aptosClient.getAccountResource(e instanceof ae?e.hex():e,"0x3::token::TokenStore"),{handle:r}=n.data.tokens,s={key_type:"0x3::token::TokenId",value_type:"0x3::token::Token",key:t};try{const i=await this.aptosClient.getTableItem(r,s);return new vh(i.id,i.amount,i.token_properties)}catch(i){return(i==null?void 0:i.status)===404?{id:t,amount:"0",token_properties:new fu}:i}}},kw=class{constructor(e){this.aptosClient=e}async transfer(e,t,n,r){var s;const i=(s=r==null?void 0:r.coinType)!=null?s:fc,o=r!=null&&r.createReceiverIfMissing?"0x1::aptos_account::transfer_coins":"0x1::coin::transfer",a=Rn(t),u=await new St(this.aptosClient,{sender:e.address(),...r}).build(o,[i],[a,n]),d=_e.generateBCSTransaction(e,u);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async checkBalance(e,t){var n;const s=`0x1::coin::CoinStore<${(n=t==null?void 0:t.coinType)!=null?n:fc}>`,i=Rn(e),o=await this.aptosClient.getAccountResource(i,s);return BigInt(o.data.coin.value)}},Ew=class extends _e{constructor(e,t,n){var r,s,i;if(super(e,n),!t)throw new Error("Faucet URL cannot be empty.");this.faucetRequester=new Jf({BASE:t,VERSION:(r=n==null?void 0:n.VERSION)!=null?r:"0.1.0",WITH_CREDENTIALS:(s=n==null?void 0:n.WITH_CREDENTIALS)!=null?s:!1,CREDENTIALS:(i=n==null?void 0:n.CREDENTIALS)!=null?i:"include",TOKEN:n==null?void 0:n.TOKEN,USERNAME:n==null?void 0:n.USERNAME,PASSWORD:n==null?void 0:n.PASSWORD,HEADERS:n==null?void 0:n.HEADERS,ENCODE_PATH:n==null?void 0:n.ENCODE_PATH})}async fundAccount(e,t,n=Nf){const r=await this.faucetRequester.request({method:"POST",url:"/mint",query:{address:ae.ensure(e).noPrefix(),amount:t}}),s=[];for(let i=0;i<r.length;i+=1){const o=r[i];s.push(this.waitForTransaction(o,{timeoutSecs:n}))}return await Promise.all(s),r}};const e3=Object.freeze(Object.defineProperty({__proto__:null,ApiError:dh,AptosAccount:xs,AptosClient:_e,BCS:Mf,CoinClient:kw,FailedTransactionError:hh,FaucetClient:Ew,HexString:ae,IndexerClient:hn,Network:Df,Provider:du,TokenClient:Aw,TokenTypes:wh,TransactionBuilder:Mr,TransactionBuilderABI:mo,TransactionBuilderEd25519:ao,TransactionBuilderMultiEd25519:lh,TransactionBuilderRemoteABI:St,TxnBuilderTypes:Be,TypeTagParser:ba,Types:zf,WaitForTransactionError:fh,derivePath:Pf,deserializePropertyMap:hu,deserializeValueBasedOnTypeTag:mh,getAddressFromAccountOrAddress:Rn,getPropertyValueRaw:bh},Symbol.toStringTag,{value:"Module"})),Bw=(e,t,n=!0)=>{if(`${e}`=="0")return!parseFloat(t)||!n?0:"0.".padEnd(t+2,"0");if(!e)return"--";const r=parseFloat(e),s=e.toString(),i=r<0;let o=s;if(s.toLowerCase().includes("e")){const a=s.match(/(\d+?)(?:\.(\d*))?e([+-])(\d+)/),c=a[1],u=a[2],d=a[3],l=a[4];let p="",g=u?u.substr(l):"";if(g&&(g=`.${g}`),d!=="-"){for(let w=0;w<l;w+=1){const h=u[w]||"0";p+=h}o=c+p+g}else{let w="0";for(let h=0;h<l;h+=1)p=(c[c.length-h-1]||"0")+p;c.length>l&&(w=c.substr(0,c.length-l)),o=`${w}.${p}${u}`}}if(t&&n){let a=`${o.split(".")[0]}.`;const c=o.split(".")[1]||"";for(let u=0;u<t;u+=1)a+=c[u]||"0";o=a}if(o.length>14){const a=o.split(".");a[0].length>14?o=`${a[0].slice(0,14)}+`:(o=o.slice(0,13),o.indexOf(".")===12&&(o=o.slice(0,12)))}return`${i?"-":""}${o}`};function Xe(e,t){if(t=t>-1?t:0,`${e}`=="0")return parseFloat(t)?"0.".padEnd(t+2,"0"):"0";if(!e)return"--";let n=!1;parseFloat(e)<0&&(n=!0);const r=`${Math.abs(parseFloat(e))}`;if(r==="NaN")return"--";let s=r;if(r.toLowerCase().includes("e")){if(r.toLowerCase().includes("+"))return Bw(r,t);const o=r.toLowerCase().split("e");let a=o[0];const c=Math.abs(parseFloat(o[1]));let u="",d=a.length,l;for(o[0].split(".")[1]&&(a=o[0].split(".")[0]+o[0].split(".")[1],d=o[0].split(".")[0].length),l=0;l<c-d;l+=1)u+="0";s=`0.${u}${a}`}if(`${t}`!="0"&&!t||`${parseFloat(e)}`=="NaN")return(n?"-":"")+s;const i=s.split(".");if(t===0)s=parseInt(s,10);else if(t>0&&i[1])if(i[1].length>t)if(i[1].includes("999999999")){const o=parseFloat(s).toFixed(t+1);s=o.slice(0,o.length-1)}else s=`${i[0]}.${i[1].slice(0,t)}`;else s=parseFloat(s).toFixed(t);else s=parseFloat(s).toFixed(t);if(s.length>=14&&s.includes(".")){const o=s.split(".");o[0].length>14?s=`${o[0].slice(0,14)}+`:(s=s.slice(0,13),s.indexOf(".")===12&&(s=s.slice(0,12)))}return(n?"-":"")+s}function t3(e,t){const n=String(e);if(!n.includes("."))return n;const r=n.split("."),s=r[0],i=r[1].slice(0,t);return ds(i)?`${s}.${ds(i)}`:`${s}`}function ds(e){return e.replace(/(\s|0|\.)+$/g,"")}function Lr(e,t){if(typeof e=="number"&&isNaN(e)||!Number(e))return 0;if(!String(e).includes("."))return e;const n=String(e).split(".");if(n[1]&&n[1].length<=t&&Number(n[1]))return e;const r=Math.pow(10,-t);if(Number(e)<r)return n[1]&&ds(n[1])?n[0]+"."+ds(n[1]):n[0];const s=Xe(e,t),i=String(s).split(".");return s==="--"?"--":i[1]&&ds(String(i[1]))?i[0]+"."+ds(String(i[1])):i[0]}const Iw=(e,t)=>isNaN(e)||!e?e:(e=String(e),Number(e)==0?0:isNaN(t)?e.replace(/^\d+/,n=>n.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")):(t===0&&(e=e.split(".")[0]),e.replace(/(\d+)(\.\d+)?/,(n,r,s)=>r.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+(s?s.slice(0,t+1):""))));function Cw(e,t){const r=String(e).split(".");let s=!0;if(!r[1]||r[1]&&r[1].length<=t||r[0]!=="0")return!1;if(r&&r[1]&&r[0]==="0"&&r[1][r[1].length-1]==="1")for(let i=0;i<r[1].length-1;i++)r[1]!=="0"&&(s=!1);else s=!1;return s}const gc=(e,t,n=2)=>{if(e=="∞")return e;if(isNaN(e)||Number(e)==0)return 0;const r=Lr(e,t),s=Math.pow(10,-t);return Number(r)&&Math.abs(Number(r))<=s||Cw(r,t)?gc(e,t+n):r};function n3(e){if(e){const t=e.toString(),n=t.indexOf(".")>-1?/(\d)(?=(\d{3})+\.)/g:/(\d)(?=(?:\d{3})+$)/g;return t.replace(n,"$1,")}}function r3(e){return Object.keys(e).length===0}const s3=(e,t)=>{if(!t)return null;for(const n in e){const r=e[n];if(r.address.toUpperCase()===t.toUpperCase())return r}return null};function Mn(e){return e.toString().length===1?"0"+e:e}function Pl(e){const t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return t+"-"+Mn(n)+"-"+Mn(r)}function Ow(e){const t=e.getMonth()+1,n=e.getDate();return Mn(t)+"/"+Mn(n)}function Ul(e){const t=e.getHours(),n=e.getMinutes(),r=e.getSeconds();return Mn(t)+":"+Mn(n)+":"+Mn(r)}function $w(e){const t=e.getHours(),n=e.getMinutes();return Mn(t)+":"+Mn(n)}function Rw(e){const n=new Date(e),r=n.getTimezoneOffset()+480;return n.setMinutes(n.getMinutes()+r),n}const i3=(e,t)=>{if(e){const n=Rw(e);if(!t)return Pl(n)+" "+Ul(n);switch(t){case"HMS":return Ul(n);case"YMD":return Pl(n);case"MD":return Ow(n);case"HM":return $w(n)}}},o3=(e,t)=>isNaN(e)||!e?e:Number(e)<1e-6&&Number(e)!==0?"<0.000001":Iw(Lr(String(e),t),t);function a3(e){const t=e.replace("%","");return Number(t)}function c3(e,t=1){return!e||isNaN(Number(e))?e:Math.abs(String(e))<1e3?gc(e,t):gc(Number(e)/1e3,t)+"k"}const ii=async e=>new Promise(t=>{setTimeout(()=>{t(1)},e)});var yc={},Pw={get exports(){return yc},set exports(e){yc=e}},wo={},Uw={get exports(){return wo},set exports(e){wo=e}},ql;function qw(){return ql||(ql=1,function(e,t){(function(n,r){e.exports=r()})(Gs,function(){var n=n||function(r,s){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof Gs<"u"&&Gs.crypto&&(i=Gs.crypto),!i&&typeof c0=="function")try{i=Yg}catch{}var o=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function m(){}return function(b){var _;return m.prototype=b,_=new m,m.prototype=null,_}}(),c={},u=c.lib={},d=u.Base=function(){return{extend:function(m){var b=a(this);return m&&b.mixIn(m),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var b in m)m.hasOwnProperty(b)&&(this[b]=m[b]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),l=u.WordArray=d.extend({init:function(m,b){m=this.words=m||[],b!=s?this.sigBytes=b:this.sigBytes=m.length*4},toString:function(m){return(m||g).stringify(this)},concat:function(m){var b=this.words,_=m.words,T=this.sigBytes,x=m.sigBytes;if(this.clamp(),T%4)for(var k=0;k<x;k++){var B=_[k>>>2]>>>24-k%4*8&255;b[T+k>>>2]|=B<<24-(T+k)%4*8}else for(var D=0;D<x;D+=4)b[T+D>>>2]=_[D>>>2];return this.sigBytes+=x,this},clamp:function(){var m=this.words,b=this.sigBytes;m[b>>>2]&=4294967295<<32-b%4*8,m.length=r.ceil(b/4)},clone:function(){var m=d.clone.call(this);return m.words=this.words.slice(0),m},random:function(m){for(var b=[],_=0;_<m;_+=4)b.push(o());return new l.init(b,m)}}),p=c.enc={},g=p.Hex={stringify:function(m){for(var b=m.words,_=m.sigBytes,T=[],x=0;x<_;x++){var k=b[x>>>2]>>>24-x%4*8&255;T.push((k>>>4).toString(16)),T.push((k&15).toString(16))}return T.join("")},parse:function(m){for(var b=m.length,_=[],T=0;T<b;T+=2)_[T>>>3]|=parseInt(m.substr(T,2),16)<<24-T%8*4;return new l.init(_,b/2)}},w=p.Latin1={stringify:function(m){for(var b=m.words,_=m.sigBytes,T=[],x=0;x<_;x++){var k=b[x>>>2]>>>24-x%4*8&255;T.push(String.fromCharCode(k))}return T.join("")},parse:function(m){for(var b=m.length,_=[],T=0;T<b;T++)_[T>>>2]|=(m.charCodeAt(T)&255)<<24-T%4*8;return new l.init(_,b)}},h=p.Utf8={stringify:function(m){try{return decodeURIComponent(escape(w.stringify(m)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(m){return w.parse(unescape(encodeURIComponent(m)))}},y=u.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(m){typeof m=="string"&&(m=h.parse(m)),this._data.concat(m),this._nDataBytes+=m.sigBytes},_process:function(m){var b,_=this._data,T=_.words,x=_.sigBytes,k=this.blockSize,B=k*4,D=x/B;m?D=r.ceil(D):D=r.max((D|0)-this._minBufferSize,0);var U=D*k,N=r.min(U*4,x);if(U){for(var G=0;G<U;G+=k)this._doProcessBlock(T,G);b=T.splice(0,U),_.sigBytes-=N}return new l.init(b,N)},clone:function(){var m=d.clone.call(this);return m._data=this._data.clone(),m},_minBufferSize:0});u.Hasher=y.extend({cfg:d.extend(),init:function(m){this.cfg=this.cfg.extend(m),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(m){return this._append(m),this._process(),this},finalize:function(m){m&&this._append(m);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(m){return function(b,_){return new m.init(_).finalize(b)}},_createHmacHelper:function(m){return function(b,_){return new v.HMAC.init(m,_).finalize(b)}}});var v=c.algo={};return c}(Math);return n})}(Uw)),wo}(function(e,t){(function(n,r){e.exports=r(qw())})(Gs,function(n){return function(r){var s=n,i=s.lib,o=i.WordArray,a=i.Hasher,c=s.algo,u=[],d=[];(function(){function g(v){for(var m=r.sqrt(v),b=2;b<=m;b++)if(!(v%b))return!1;return!0}function w(v){return(v-(v|0))*4294967296|0}for(var h=2,y=0;y<64;)g(h)&&(y<8&&(u[y]=w(r.pow(h,1/2))),d[y]=w(r.pow(h,1/3)),y++),h++})();var l=[],p=c.SHA256=a.extend({_doReset:function(){this._hash=new o.init(u.slice(0))},_doProcessBlock:function(g,w){for(var h=this._hash.words,y=h[0],v=h[1],m=h[2],b=h[3],_=h[4],T=h[5],x=h[6],k=h[7],B=0;B<64;B++){if(B<16)l[B]=g[w+B]|0;else{var D=l[B-15],U=(D<<25|D>>>7)^(D<<14|D>>>18)^D>>>3,N=l[B-2],G=(N<<15|N>>>17)^(N<<13|N>>>19)^N>>>10;l[B]=U+l[B-7]+G+l[B-16]}var X=_&T^~_&x,le=y&v^y&m^v&m,O=(y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22),q=(_<<26|_>>>6)^(_<<21|_>>>11)^(_<<7|_>>>25),z=k+q+X+d[B]+l[B],ee=O+le;k=x,x=T,T=_,_=b+z|0,b=m,m=v,v=y,y=z+ee|0}h[0]=h[0]+y|0,h[1]=h[1]+v|0,h[2]=h[2]+m|0,h[3]=h[3]+b|0,h[4]=h[4]+_|0,h[5]=h[5]+T|0,h[6]=h[6]+x|0,h[7]=h[7]+k|0},_doFinalize:function(){var g=this._data,w=g.words,h=this._nDataBytes*8,y=g.sigBytes*8;return w[y>>>5]|=128<<24-y%32,w[(y+64>>>9<<4)+14]=r.floor(h/4294967296),w[(y+64>>>9<<4)+15]=h,g.sigBytes=w.length*4,this._process(),this._hash},clone:function(){var g=a.clone.call(this);return g._hash=this._hash.clone(),g}});s.SHA256=a._createHelper(p),s.HmacSHA256=a._createHmacHelper(p)}(Math),n.SHA256})})(Pw);const Nw=yc;function Dw(){const e=ue.Aptos.liquidswapDeployer,t={rpcUrl:ue.Aptos.rpcUrl,fraphQLUrl:ue.Aptos.fraphQLUrl,networkOptions:{nativeToken:"0x1::aptos_coin::AptosCoin",launchpad:{cetusLaunchpad:ue.Aptos.Launchpad,crowdCoin:ue.Aptos.LaunchpadCrowdCoin},simulationAccount:{pubkey:ue.Aptos.accountPublicKey,address:ue.Aptos.accountAddress},modules:{LiquidswapDeployer:e,ClmmIntegrate:ue.Aptos.clmmIntegrate,FetcherDeployer:ue.Aptos.fetcher,TokenDeployer:ue.Aptos.TokenDeployer,IntegerMate:ue.Aptos.IntegerMate}}},n=Jd(new Qg(t)),r=tf(),s=Qd(),i=uc(()=>s),{$notify:o}=ri(),a=A=>{const{$notify:I}=ri();I.success({key:A.hash+"loading",icon:be("img",{class:{"notify-icon":!0,"loading-animate":!0},src:i.value.theme=="default"?"/image/img-loading@2x.png":"/sui-image/img-loading.png"}),message:be("div",{class:"notification-title"},[be("span",{innerHTML:A.title},null)]),description:be("div",{class:"notification-title"},[be("div",{class:"notification-text",innerHTML:nn.global.t("newAdd.confirmingTransaction")},null),be("a",{href:`https://explorer.aptoslabs.com/txn/${A.hash}?network=${ue.Aptos.network}`,target:"_blank",innerHTML:nn.global.t("common.viewTransaction")},null)]),duration:0,class:"ant-notification-copy ant-notification-swap"})},c=A=>{o.success({icon:be("svg",{class:{icon:!0},"aria-hidden":!0},[be("use",{"xlink:href":"#icon-icon-change1"})]),message:be("div",{class:"notification-title"},[be("span",{innerHTML:`${A.title} `+nn.global.t("newAdd.success")},null)]),description:be("div",{class:"notification-title"},[be("div",{class:"notification-text",innerHTML:A.desc},null),be("a",{href:`https://explorer.aptoslabs.com/txn/${A.hash}?network=${ue.Aptos.network}`,target:"_blank",innerHTML:nn.global.t("common.viewTransaction")},null)]),duration:4.5,class:"ant-notification-copy ant-notification-swap"})},u=A=>{o.error({icon:be("svg",{class:{icon:!0},"aria-hidden":!0},[be("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:be("div",{class:"notification-title"},[be("span",{innerHTML:`${A} `+nn.global.t("newAdd.failed")},null)]),description:nn.global.t("newAdd.somethingWrong"),duration:4.5,class:"ant-notification-copy ant-notification-error"})},d=async(A,I=!1)=>{const P=await n.client.waitForTransactionWithResult(A.hash);if(P&&P.success){o.close(A.hash+"loading"),c(A);const $={walletAddress:r.address,chainName:"Aptos",...A,...P,date:new Date().getTime()+6048e5};return s.setTransactionList($),I?{status:!0,nftInfo:P.events.filter(H=>H.type.includes("CreateTokenDataEvent"))}:!0}else{if(P&&!P.success)return o.close(A.hash+"loading"),u(A.title),!1;setTimeout(()=>d(A,I),3e3)}},l=async(A,I=!1)=>{const P=await n.client.waitForTransactionWithResult(A.hash);if(P&&P.success){const $={walletAddress:r.address,chainName:"Aptos",...A,...P,date:new Date().getTime()+6048e5};s.setTransactionList($)}},p=async A=>{try{const I=await n.Resources.getCoinStores(A),P=[];return I.forEach($=>{let M="";$.coinAddress.includes("0x0000000000000000000000000000000000000000000000000000000000000001")?M=$.coinAddress.replace(/0x0000000000000000000000000000000000000000000000000000000000000001/,"0x1"):M=$.coinAddress,P.push({...$,coinAddress:M})}),P}catch{return[]}},g=async A=>{try{r.setLoading(!0);const I=await p(A),P={};I.forEach($=>{const M=$?$.coin.value:"0";P[$.coinAddress]={...$,balance:M}}),r.setAssets(P),r.setLoading(!1)}catch{r.setLoading(!1),r.setAssets({})}},w=async()=>{const A={pubkey:Rn(ue.Aptos.accountPublicKey),address:Rn(ue.Aptos.accountAddress)};return await n.Token.getAllRegisteredTokenList(A)},h=async(A,I,P)=>n.Resources.getPoolState(A,I,P),y=async()=>{const A={pubkey:Rn(ue.Aptos.accountPublicKey),address:Rn(ue.Aptos.accountAddress)};return await n.Token.getOwnerWarpPoolList(ue.Aptos.TokenDeployer,A)},v=async A=>await n.Resources.getPool(A);return{setTransations:l,showTransitionPending:a,showTransitionSuccess:c,showTransitionError:u,watchTransaction:d,getAccount:g,getPoolState:h,getPools:async A=>await n.Resources.getPools(A),getPool:v,registerCoin:A=>({function:"0x1::managed_coin::register",type_arguments:[A],arguments:[],type:"entry_function_payload"}),estLiquidityAndcoinAmountFromOneAmounts:A=>{const{tokenA:I,tokenB:P,lowerTick:$,upperTick:M,coinAmount:L,iscoinA:H,roundUp:W,slippage:J,curSqrtPrice:ie}=A,Q=is.estLiquidityAndcoinAmountFromOneAmounts($,M,L,H,W,J,ie),fe=I.decimals,ce=P.decimals,{tokenMaxA:oe,tokenMaxB:Te,liquidityAmount:he}=Q;return{tokenMaxAOrigin:oe.toString(),tokenMaxBOrigin:Te.toString(),tokenMaxA:xt(oe.toString(),fe),tokenMaxB:xt(Te.toString(),ce),liquidityAmount:he}},getCoinAmountFromLiquidity:A=>{const{pool:I,position:P,roundUp:$}=A,M=Number(P.tick_lower_index),L=Number(P.tick_upper_index),H=_n.tickIndexToSqrtPriceX64(M),W=_n.tickIndexToSqrtPriceX64(L),J=is.getCoinAmountFromLiquidity(new E(P.liquidity),new E(I.current_sqrt_price),H,W,$),ie=xt(J.coinA.toString(),I.coinA.decimals),Q=xt(J.coinB.toString(),I.coinB.decimals);return{coinaAmount:ie,coinbAmount:Q}},getAddLiquidityTransactionPayload:async A=>{const{pool:I,amount:P,fix_amount_a:$,roundUp:M,tick_lower:L,tick_upper:H,index:W,slippage:J}=A,ie=await v(I.poolAddress),Q=$?At(P,I.token_a.decimals):At(P,I.token_b.decimals),fe=_n.sqrtPriceX64ToTickIndex(new E(ie.current_sqrt_price));let ce,oe;if(fe>L&&fe<H){const he=is.estLiquidityAndcoinAmountFromOneAmounts(L,H,new E(Q.toString()),$,M,J,new E(ie.current_sqrt_price));ce=$?Q.toNumber():he.tokenMaxA.toNumber(),oe=$?he.tokenMaxB.toNumber():Q.toNumber()}else fe>=H?(ce=0,oe=Q.toNumber()):fe<=L&&(ce=Q.toNumber(),oe=0);return n.Position.createAddLiquidityTransactionPayload({pool:I.poolAddress,coinTypeA:I.token_a.address,coinTypeB:I.token_b.address,amount_a:ce,amount_b:oe,fix_amount_a:$,tick_lower:L,tick_upper:H,is_open:!W,index:W})},getRemoveLiquidityTransactionPayload:async A=>{const{pool:I,coinTypeA:P,coinTypeB:$,coinTypeC:M,coinTypeD:L,coinTypeE:H,position:W,delta_liquidity:J,rewards_num:ie}=A,Q=await v(I.poolAddress),fe={...I,...Q},ce=Number(W.tick_lower_index),oe=Number(W.tick_upper_index),Te=_n.tickIndexToSqrtPriceX64(ce),he=_n.tickIndexToSqrtPriceX64(oe),Ee=is.getCoinAmountFromLiquidity(J,new E(fe.current_sqrt_price),Te,he,!0),nt=os(Ee.coinA.toString()).mul(os(1-A.slippage)),lt=os(Ee.coinB.toString()).mul(os(1-A.slippage));return await n.Position.removeLiquidityTransactionPayload({pool:I.poolAddress,coinTypeA:P,coinTypeB:$,coinTypeC:M,coinTypeD:L,coinTypeE:H,delta_liquidity:J,min_amount_a:Number(Xe(nt.toString(),0)),min_amount_b:Number(Xe(lt.toString(),0)),pos_index:A.position.index,is_close:!1,rewards_num:ie})},getCollectFeeTransactionPayload:async A=>await n.Position.collectFeeTransactionPayload({pool:A.pool.poolAddress,coinTypeA:A.pool.token_a.address,coinTypeB:A.pool.token_b.address,pos_index:A.position.index}),getPositionList:async(A,I)=>{if(ue.Aptos.network==="mainnet"){const P={operationName:"AccountTokensData",variables:{owner_address:A,limit:1e5,offset:0},query:`query AccountTokensData($owner_address: String, $limit: Int, $offset: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $owner_address}, amount: {_gt: "0"}}
    limit: $limit
    offset: $offset
  ) {
    token_data_id_hash
 creator_address
 name
    collection_name
  table_type
    property_version
    amount
    __typename
  }
}`},$=await $fetch("https://indexer.mainnet.aptoslabs.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)}),M=$&&$.data&&$.data.current_token_ownerships||[],L=[];for(let H=0;H<M.length;H++){const W=M[H],J=I[ef(W.creator_address)];if(J){const ie=W.name.split("-")[1],Q=J.positions_handle,fe=await n.Resources.getPositionInfoByIndex(Q,ie);L.push({...fe,tokenName:W.name})}}return L}else{const P=Object.values(I);return await n.Resources.getPositionList(A,P)}},getPositionInfo:async(A,I,P,$="")=>({...await n.Resources.getPositionInfo(A,P),tokenName:P,collectionName:I}),getSwapTransactionPayload:async A=>{const{pool:I,a2b:P,byAmountIn:$,amount:M,slippage:L}=A,H=I.poolAddress,W=I.token_a.decimals,J=I.token_b.decimals,ie=await v(I.address);let Q;P&&$||!P&&!$?Q=At(M,W):Q=At(M,J);const fe=await n.Swap.preswap({pool:ie,decimalsA:W,decimalsB:J,a2b:P,by_amount_in:$,amount:Q.toString()}),ce=os(fe.estimatedAmountOut.toString()),oe=os(fe.estimatedAmountIn.toString()),Te=$?ce.sub(ce.mul(L)):oe.add(oe.mul(L));return n.Swap.createSwapTransactionPayload({pool_addr:H,coinTypeA:I.token_a.address,coinTypeB:I.token_b.address,a_to_b:fe.aToB,by_amount_in:fe.byAmountIn,amount:fe.amount.toString(),amount_limit:Xe(Te.toString(),0)||"",partner:""})},getCoin:A=>({type:"entry_function_payload",function:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet",arguments:[],type_arguments:[]}),preSwap:async A=>{const{pool:I,a2b:P,byAmountIn:$,amount:M}=A,L=I.coinA.decimals,H=I.coinB.decimals;let W=I;I.coinTypeA||(W={...I,poolAddress:I.address,coinTypeA:I.coinA.address,coinTypeB:I.coinB.address});let J;P&&$||!P&&!$?J=At(M,L):J=At(M,H);const ie=await n.Swap.preswap({pool:W,decimalsA:L,decimalsB:H,a2b:P,by_amount_in:$,amount:J.toString()});return{...ie,estimatedAmountIn:Lr(xt(ie.estimatedAmountIn.toString(),P?L:H),P?L:H),estimatedAmountOut:Lr(xt(ie.estimatedAmountOut.toString(),P?H:L),P?H:L),priceImpactPct:Xe(ie.priceImpactPct,2)}},getTicks:async A=>{try{return await n.Fetcher.fetchTicks({pool:A.poolAddress,coinTypeA:A.coinTypeA,coinTypeB:A.coinTypeB})}catch{}},TickMath:_n,TickUtil:e0,ClmmPoolUtil:is,getNearestTickByTick:t0,getTickDataFromUrlData:n0,getCollectFeesQuote:async A=>{const{pool:I,position:P,tickLowerData:$,tickUpperData:M}=A,L=r0({clmmpool:I,position:P,tickLower:$,tickUpper:M}),H=xt(L.feeOwedA.toString(),I.token_a.decimals),W=xt(L.feeOwedB.toString(),I.token_b.decimals);return{feeOwedA:Number(H)>99999999999||Number(H)<0?"0":H,feeOwedB:Number(W)>99999999999||Number(W)<0?"0":W}},mintCoin:A=>({function:`${ue.Aptos.faucetObjectId}::coin::mint`,type_arguments:[`${ue.Aptos.faucetObjectId}::coin::${A.name}`],arguments:[A.amount],type:"entry_function_payload"}),getNftHash:A=>{const I=`${A.creator}::${A.collection}::${A.name}`;return Nw(I).toString()},getCollectRewarderTransactionPayload:A=>n.Rewarder.collectPoolRewarderTransactionPayload(A),getPosRewardersAmount:async A=>{const{poolAddress:I,positionName:P,tickLowerData:$,tickUpperData:M}=A;return await n.Rewarder.posRewardersAmount(I,P,$,M)},getTokenList:w,getTickDataByIndex:async(A,I)=>await n.Resources.getTickDataByIndex(A,I),initSwapRouter:async A=>{n.Router.addPathProvider(A),await n.Router.setCoinList({pubkey:Rn(ue.Aptos.accountPublicKey),address:Rn(ue.Aptos.accountAddress)}),await n.Router.loadGraph()},getSwapRouter:async(A,I)=>await n.Router.price(A,I),getEstPositionAPRWithDelta:async(A,I,P,$,M,L,H,W,J,ie,Q,fe,ce,oe,Te,he,Ee,nt,lt,dt,ze,_r,rs,ss)=>await s0(A,I,P,$,M,L,H,W,J,ie,Q,fe,ce,oe,Te,he,Ee,nt,lt,dt,ze,_r,rs,ss),getPriceImpactPct:(A,I,P)=>{const $=_n.sqrtPriceX64ToPrice(new E(A.current_sqrt_price),A.coinA.decimals,A.coinB.decimals).toNumber(),M=P?$:1/$,L=Math.abs(M-Number(I))/Number(I)*100;return Number(Xe(L,2))},getLpList:y,getEstPositionAPRWithMulti:async(A,I,P,$)=>await i0(A,I,P,$),getCreatPoolTransactionPayload:async A=>{const{coinTypeA:I,coinTypeB:P,tick_lower:$,tick_upper:M,tick_spacing:L,initialize_sqrt_price:H,max_amount_a:W,max_amount_b:J,slippage:ie,fix_amount_a:Q,decimalsA:fe,decimalsB:ce,liquidityInput:oe}=A,Te=Q?At(W,fe):At(J,ce),he=_n.sqrtPriceX64ToTickIndex(new E(H));let Ee,nt;const lt=_n.tickIndexToSqrtPriceX64($),dt=_n.tickIndexToSqrtPriceX64(M);let ze;return he>$&&he<M?(ze=is.estLiquidityAndcoinAmountFromOneAmounts($,M,new E(Te.toString()),Q,!0,ie,new E(H)),Ee=Q?Te.toNumber():ze.tokenMaxA.toNumber(),nt=Q?ze.tokenMaxB.toNumber():Te.toNumber()):he>=M?(ze=kl(lt,dt,new E(Te.toString())),Ee=new E(oe.tokenMaxA*Math.pow(10,fe)),nt=new E(oe.tokenMaxB*Math.pow(10,ce))):he<=$&&(ze=Al(lt,dt,new E(Te.toString())),Ee=new E(oe.tokenMaxA*Math.pow(10,fe)),nt=new E(oe.tokenMaxB*Math.pow(10,ce))),await n.Pool.creatPoolTransactionPayload({coinTypeA:I,coinTypeB:P,tick_spacing:L,initialize_sqrt_price:new E(H),uri:"",delta_liquidity:he>$&&he<M?ze.liquidityAmount:ze,max_amount_a:Ee,max_amount_b:nt,tick_lower:$,tick_upper:M},!0)},getTokenListByCoinType:async()=>await n.Token.getTokenListByCoinType("",0,99999),getPoolImmutables:async()=>await n.Resources.getPoolImmutables(),estimateLiquidityForCoinA:Al,estimateLiquidityForCoinB:kl}}function Mw(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var s=e.charAt(r),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=r}var o=e.length,a=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var w=0,h=0,y=0,v=g.length;y!==v&&g[y]===0;)y++,w++;for(var m=(v-y)*u+1>>>0,b=new Uint8Array(m);y!==v;){for(var _=g[y],T=0,x=m-1;(_!==0||T<h)&&x!==-1;x--,T++)_+=256*b[x]>>>0,b[x]=_%o>>>0,_=_/o>>>0;if(_!==0)throw new Error("Non-zero carry");h=T,y++}for(var k=m-h;k!==m&&b[k]===0;)k++;for(var B=a.repeat(w);k<m;++k)B+=e.charAt(b[k]);return B}function l(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;for(var w=0,h=0,y=0;g[w]===a;)h++,w++;for(var v=(g.length-w)*c+1>>>0,m=new Uint8Array(v);g[w];){var b=t[g.charCodeAt(w)];if(b===255)return;for(var _=0,T=v-1;(b!==0||_<y)&&T!==-1;T--,_++)b+=o*m[T]>>>0,m[T]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");y=_,w++}for(var x=v-y;x!==v&&m[x]===0;)x++;for(var k=new Uint8Array(h+(v-x)),B=h;x!==v;)k[B++]=m[x++];return k}function p(g){var w=l(g);if(w)return w;throw new Error("Non-base"+o+" character")}return{encode:d,decodeUnsafe:l,decode:p}}var Lw=Mw;const jw=Lw,Hw="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var Th=jw(Hw);function Gw(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:e===43?62:e===47?63:0}function Hn(e,t){for(var n=e.replace(/[^A-Za-z0-9+/]/g,""),r=n.length,s=t?Math.ceil((r*3+1>>2)/t)*t:r*3+1>>2,i=new Uint8Array(s),o,a,c=0,u=0,d=0;d<r;d++)if(a=d&3,c|=Gw(n.charCodeAt(d))<<6*(3-a),a===3||r-d===1){for(o=0;o<3&&u<s;o++,u++)i[u]=c>>>(16>>>o&24)&255;c=0}return i}function Hi(e){return e<26?e+65:e<52?e+71:e<62?e-4:e===62?43:e===63?47:65}function $r(e){for(var t=2,n="",r=e.length,s=0,i=0;i<r;i++)t=i%3,i>0&&i*4/3%76===0&&(n+=""),s|=e[i]<<(16>>>t&24),(t===2||e.length-i===1)&&(n+=String.fromCodePoint(Hi(s>>>18&63),Hi(s>>>12&63),Hi(s>>>6&63),Hi(s&63)),s=0);return n.slice(0,n.length-2+t)+(t===2?"":t===1?"=":"==")}function pu(e){let t=e.replace("0x","").match(/.{1,2}/g).map(n=>parseInt(n,16));if(t===null)throw new Error(`Unable to parse HEX: ${e}`);return Uint8Array.from(t)}function gu(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}var zw=32;function za(e,t){let n=new Uint8Array(t),r=0;for(;e>0;)n[r]=Number(e%BigInt(256)),e=e/BigInt(256),r+=1;return n}var ma=e=>Th.encode(e),yu=e=>Th.decode(e),Vw=class{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),n=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let e=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read256(){let e=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:n,length:r}=Kw(t);return this.shift(r),n}readVec(e){let t=this.readULEB(),n=[];for(let r=0;r<t;r++)n.push(e(this,r,t));return n}},Fw=class{constructor({size:e=1024,maxSize:t,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t||e,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(t>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=n;const r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return za(BigInt(e),8).forEach(t=>this.write8(t)),this}write128(e){return za(BigInt(e),16).forEach(t=>this.write8(t)),this}write256(e){return za(BigInt(e),32).forEach(t=>this.write8(t)),this}writeULEB(e){return Ww(e).forEach(t=>this.write8(t)),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach((n,r)=>t(this,n,r,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return Xw(this.toBytes(),e)}};function Ww(e){let t=[],n=0;if(e===0)return[0];for(;e>0;)t[n]=e&127,(e>>=7)&&(t[n]|=128),n+=1;return t}function Kw(e){let t=0,n=0,r=0;for(;;){let s=e[r];if(r+=1,t|=(s&127)<<n,!(s&128))break;n+=7}return{value:t,length:r}}var Fs=class{constructor(e){if(this.types=new Map,this.counter=0,e instanceof Fs){this.schema=e.schema,this.types=new Map(e.types);return}if(this.schema=e,this.registerAddressType(Fs.ADDRESS,e.addressLength,e.addressEncoding),this.registerVectorType(e.vectorType),e.types&&e.types.structs)for(let t of Object.keys(e.types.structs))this.registerStructType(t,e.types.structs[t]);if(e.types&&e.types.enums)for(let t of Object.keys(e.types.enums))this.registerEnumType(t,e.types.enums[t]);if(e.types&&e.types.aliases)for(let t of Object.keys(e.types.aliases))this.registerAlias(t,e.types.aliases[t]);e.withPrimitives!==!1&&Jw(this)}tempKey(){return`bcs-struct-${++this.counter}`}ser(e,t,n){if(typeof e=="string"||Array.isArray(e)){const{name:r,params:s}=this.parseTypeName(e);return this.getTypeInterface(r).encode(this,t,n,s)}if(typeof e=="object"){const r=this.tempKey();return new Fs(this).registerStructType(r,e).ser(r,t,n)}throw new Error(`Incorrect type passed into the '.ser()' function. 
${JSON.stringify(e)}`)}de(e,t,n){if(typeof t=="string")if(n)t=Zw(t,n);else throw new Error("To pass a string to `bcs.de`, specify encoding");if(typeof e=="string"||Array.isArray(e)){const{name:r,params:s}=this.parseTypeName(e);return this.getTypeInterface(r).decode(this,t,s)}if(typeof e=="object"){const r=new Fs(this),s=this.tempKey();return r.registerStructType(s,e).de(s,t,n)}throw new Error(`Incorrect type passed into the '.de()' function. 
${JSON.stringify(e)}`)}hasType(e){return this.types.has(e)}registerAlias(e,t){return this.types.set(e,t),this}registerType(e,t,n,r=()=>!0){const{name:s,params:i}=this.parseTypeName(e);return this.types.set(s,{encode(o,a,c,u){const d=i.reduce((l,p,g)=>Object.assign(l,{[p]:u[g]}),{});return this._encodeRaw.call(o,new Fw(c),a,u,d)},decode(o,a,c){const u=i.reduce((d,l,p)=>Object.assign(d,{[l]:c[p]}),{});return this._decodeRaw.call(o,new Vw(a),c,u)},_encodeRaw(o,a,c,u){if(r(a))return t.call(this,o,a,c,u);throw new Error(`Validation failed for type ${s}, data: ${a}`)},_decodeRaw(o,a,c){return n.call(this,o,a,c)}}),this}registerAddressType(e,t,n="hex"){switch(n){case"base64":return this.registerType(e,function(s,i){return Hn(i).reduce((o,a)=>o.write8(a),s)},function(s){return $r(s.readBytes(t))});case"hex":return this.registerType(e,function(s,i){return pu(i).reduce((o,a)=>o.write8(a),s)},function(s){return gu(s.readBytes(t))});default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(e){let{name:t,params:n}=this.parseTypeName(e);if(n.length>1)throw new Error("Vector can have only one type parameter; got "+t);return this.registerType(e,function(s,i,o,a){return s.writeVec(i,(c,u)=>{let d=o[0];if(!d)throw new Error(`Incorrect number of type parameters passed a to vector '${e}'`);let{name:l,params:p}=this.parseTypeName(d);if(this.hasType(l))return this.getTypeInterface(l)._encodeRaw.call(this,c,u,p,a);if(!(l in a))throw new Error(`Unable to find a matching type definition for ${l} in vector; make sure you passed a generic`);let{name:g,params:w}=this.parseTypeName(a[l]);return this.getTypeInterface(g)._encodeRaw.call(this,c,u,w,a)})},function(s,i,o){return s.readVec(a=>{let c=i[0];if(!c)throw new Error(`Incorrect number of type parameters passed to a vector '${e}'`);let{name:u,params:d}=this.parseTypeName(c);if(this.hasType(u))return this.getTypeInterface(u)._decodeRaw.call(this,a,d,o);if(!(u in o))throw new Error(`Unable to find a matching type definition for ${u} in vector; make sure you passed a generic`);let{name:l,params:p}=this.parseTypeName(o[u]);this.getTypeInterface(l)._decodeRaw.call(this,a,p,o)})})}registerStructType(e,t){for(let o in t){let a=this.tempKey(),c=t[o];!Array.isArray(c)&&typeof c!="string"&&(t[o]=a,this.registerStructType(a,c))}let n=Object.freeze(t),r=Object.keys(n),{name:s,params:i}=this.parseTypeName(e);return this.registerType(e,function(a,c,u,d){if(!c||c.constructor!==Object)throw new Error(`Expected ${s} to be an Object, got: ${c}`);if(u.length!==i.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${i.length}, got: ${u.length}`);for(let l of r){if(!(l in c))throw new Error(`Struct ${s} requires field ${l}:${n[l]}`);const{name:p,params:g}=this.parseTypeName(n[l]);if(!i.includes(p))this.getTypeInterface(p)._encodeRaw.call(this,a,c[l],g,d);else{const w=i.indexOf(p);let{name:h,params:y}=this.parseTypeName(u[w]);if(this.hasType(h)){this.getTypeInterface(h)._encodeRaw.call(this,a,c[l],y,d);continue}if(!(h in d))throw new Error(`Unable to find a matching type definition for ${h} in ${s}; make sure you passed a generic`);let{name:v,params:m}=this.parseTypeName(d[h]);this.getTypeInterface(v)._encodeRaw.call(this,a,c[l],m,d)}}return a},function(a,c,u){if(c.length!==i.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${i.length}, got: ${c.length}`);let d={};for(let l of r){const{name:p,params:g}=this.parseTypeName(n[l]);if(!i.includes(p))d[l]=this.getTypeInterface(p)._decodeRaw.call(this,a,g,u);else{const w=i.indexOf(p);let{name:h,params:y}=this.parseTypeName(c[w]);if(this.hasType(h)){d[l]=this.getTypeInterface(h)._decodeRaw.call(this,a,y,u);continue}if(!(h in u))throw new Error(`Unable to find a matching type definition for ${h} in ${s}; make sure you passed a generic`);let{name:v,params:m}=this.parseTypeName(u[h]);d[l]=this.getTypeInterface(v)._decodeRaw.call(this,a,m,u)}}return d})}registerEnumType(e,t){for(let o in t){let a=this.tempKey(),c=t[o];c!==null&&!Array.isArray(c)&&typeof c!="string"&&(t[o]=a,this.registerStructType(a,c))}let n=Object.freeze(t),r=Object.keys(n),{name:s,params:i}=this.parseTypeName(e);return this.registerType(e,function(a,c,u,d){if(!c)throw new Error(`Unable to write enum "${s}", missing data.
Received: "${c}"`);if(typeof c!="object")throw new Error(`Incorrect data passed into enum "${s}", expected object with properties: "${r.join(" | ")}".
Received: "${JSON.stringify(c)}"`);let l=Object.keys(c)[0];if(l===void 0)throw new Error(`Empty object passed as invariant of the enum "${s}"`);let p=r.indexOf(l);if(p===-1)throw new Error(`Unknown invariant of the enum "${s}", allowed values: "${r.join(" | ")}"; received "${l}"`);let g=r[p],w=n[g];if(a.write8(p),w===null)return a;let h=i.indexOf(w),y=h===-1?w:u[h];{let{name:v,params:m}=this.parseTypeName(y);return this.getTypeInterface(v)._encodeRaw.call(this,a,c[l],m,d)}},function(a,c,u){let d=a.readULEB(),l=r[d],p=n[l];if(d===-1)throw new Error(`Decoding type mismatch, expected enum "${s}" invariant index, received "${d}"`);if(p===null)return{[l]:!0};let g=i.indexOf(p),w=g===-1?p:c[g];{let{name:h,params:y}=this.parseTypeName(w);return{[l]:this.getTypeInterface(h)._decodeRaw.call(this,a,y,u)}}})}getTypeInterface(e){let t=this.types.get(e);if(typeof t=="string"){let n=[];for(;typeof t=="string";){if(n.includes(t))throw new Error(`Recursive definition found: ${n.join(" -> ")} -> ${t}`);n.push(t),t=this.types.get(t)}}if(t===void 0)throw new Error(`Type ${e} is not registered`);return t}parseTypeName(e){if(Array.isArray(e)){let[a,...c]=e;return{name:a,params:c}}if(typeof e!="string")throw new Error(`Illegal type passed as a name of the type: ${e}`);let[t,n]=this.schema.genericSeparators||["<",">"],r=e.indexOf(t),s=Array.from(e).reverse().indexOf(n);if(r===-1&&s===-1)return{name:e,params:[]};if(r===-1||s===-1)throw new Error(`Unclosed generic in name '${e}'`);let i=e.slice(0,r),o=e.slice(r+1,e.length-s-1).split(",").map(a=>a.trim());return{name:i,params:o}}},F=Fs;F.U8="u8";F.U16="u16";F.U32="u32";F.U64="u64";F.U128="u128";F.U256="u256";F.BOOL="bool";F.VECTOR="vector";F.ADDRESS="address";F.STRING="string";F.HEX="hex-string";F.BASE58="base58-string";F.BASE64="base64-string";function Xw(e,t){switch(t){case"base58":return ma(e);case"base64":return $r(e);case"hex":return gu(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Zw(e,t){switch(t){case"base58":return yu(e);case"base64":return Hn(e);case"hex":return pu(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Jw(e){e.registerType(F.U8,function(t,n){return t.write8(n)},function(t){return t.read8()},t=>t<256),e.registerType(F.U16,function(t,n){return t.write16(n)},function(t){return t.read16()},t=>t<65536),e.registerType(F.U32,function(t,n){return t.write32(n)},function(t){return t.read32()},t=>t<=4294967296n),e.registerType(F.U64,function(t,n){return t.write64(n)},function(t){return t.read64()}),e.registerType(F.U128,function(t,n){return t.write128(n)},function(t){return t.read128()}),e.registerType(F.U256,function(t,n){return t.write256(n)},function(t){return t.read256()}),e.registerType(F.BOOL,function(t,n){return t.write8(n)},function(t){return t.read8().toString(10)==="1"}),e.registerType(F.STRING,function(t,n){return t.writeVec(Array.from(n),(r,s)=>r.write8(s.charCodeAt(0)))},function(t){return t.readVec(n=>n.read8()).map(n=>String.fromCharCode(Number(n))).join("")},t=>!0),e.registerType(F.HEX,function(t,n){return t.writeVec(Array.from(pu(n)),(r,s)=>r.write8(s))},function(t){let n=t.readVec(r=>r.read8());return gu(new Uint8Array(n))}),e.registerType(F.BASE58,function(t,n){return t.writeVec(Array.from(yu(n)),(r,s)=>r.write8(s))},function(t){let n=t.readVec(r=>r.read8());return ma(new Uint8Array(n))}),e.registerType(F.BASE64,function(t,n){return t.writeVec(Array.from(Hn(n)),(r,s)=>r.write8(s))},function(t){let n=t.readVec(r=>r.read8());return $r(new Uint8Array(n))})}function Sh(){return{genericSeparators:["<",">"],vectorType:"vector",addressLength:zw,addressEncoding:"hex"}}function bc(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Yw(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function xh(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Qw(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");bc(e.outputLen),bc(e.blockLen)}function e_(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function t_(e,t){xh(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const jt={number:bc,bool:Yw,bytes:xh,hash:Qw,exists:e_,output:t_},co=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,n_=Object.freeze(Object.defineProperty({__proto__:null,crypto:co},Symbol.toStringTag,{value:"Module"}));/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const r_=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),hi=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),uo=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),fn=(e,t)=>e<<32-t|e>>>t,Ah=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ah)throw new Error("Non little-endian hardware is not supported");const s_=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function i_(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=s_[e[n]];return t}function o_(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=n*2,s=e.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[n]=i}return t}const kh=async()=>{};async function a_(e,t,n){let r=Date.now();for(let s=0;s<e;s++){n(s);const i=Date.now()-r;i>=0&&i<t||(await kh(),r+=i)}}function bu(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Ln(e){if(typeof e=="string"&&(e=bu(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function mu(...e){if(!e.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const t=e.reduce((r,s)=>r+s.length,0),n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const i=e[r];n.set(i,s),s+=i.length}return n}class wa{clone(){return this._cloneInto()}}const c_=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function u_(e,t){if(t!==void 0&&(typeof t!="object"||!c_(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}function br(e){const t=r=>e().update(Ln(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Eh(e){const t=(r,s)=>e(s).update(Ln(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function Pi(e=32){if(co&&typeof co.getRandomValues=="function")return co.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const l_=Object.freeze(Object.defineProperty({__proto__:null,Hash:wa,asyncLoop:a_,bytesToHex:i_,checkOpts:u_,concatBytes:mu,createView:uo,hexToBytes:o_,isLE:Ah,nextTick:kh,randomBytes:Pi,rotr:fn,toBytes:Ln,u32:hi,u8:r_,utf8ToBytes:bu,wrapConstructor:br,wrapConstructorWithOpts:Eh},Symbol.toStringTag,{value:"Module"}));function d_(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}class wu extends wa{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=uo(this.buffer)}update(t){jt.exists(this);const{view:n,buffer:r,blockLen:s}=this;t=Ln(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=uo(t);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){jt.exists(this),jt.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let l=o;l<s;l++)n[l]=0;d_(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=uo(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,d[l],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%n&&t.buffer.set(r),t}}const f_=(e,t,n)=>e&t^~e&n,h_=(e,t,n)=>e&t^e&n^t&n,p_=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Zn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Jn=new Uint32Array(64);class Bh extends wu{constructor(){super(64,32,8,!1),this.A=Zn[0]|0,this.B=Zn[1]|0,this.C=Zn[2]|0,this.D=Zn[3]|0,this.E=Zn[4]|0,this.F=Zn[5]|0,this.G=Zn[6]|0,this.H=Zn[7]|0}get(){const{A:t,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[t,n,r,s,i,o,a,c]}set(t,n,r,s,i,o,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let l=0;l<16;l++,n+=4)Jn[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const p=Jn[l-15],g=Jn[l-2],w=fn(p,7)^fn(p,18)^p>>>3,h=fn(g,17)^fn(g,19)^g>>>10;Jn[l]=h+Jn[l-7]+w+Jn[l-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:d}=this;for(let l=0;l<64;l++){const p=fn(a,6)^fn(a,11)^fn(a,25),g=d+p+f_(a,c,u)+p_[l]+Jn[l]|0,h=(fn(r,2)^fn(r,13)^fn(r,22))+h_(r,s,i)|0;d=u,u=c,c=a,a=o+g|0,o=i,i=s,s=r,r=g+h|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,s,i,o,a,c,u,d)}roundClean(){Jn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class g_ extends Bh{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const kn=br(()=>new Bh),y_=br(()=>new g_),b_=Object.freeze(Object.defineProperty({__proto__:null,sha224:y_,sha256:kn},Symbol.toStringTag,{value:"Module"})),m_=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class w_ extends wa{constructor(t,n,r={},s,i,o){if(super(),this.blockLen=t,this.outputLen=n,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,jt.number(t),jt.number(n),jt.number(s),n<0||n>s)throw new Error("outputLen bigger than keyLen");if(r.key!==void 0&&(r.key.length<1||r.key.length>s))throw new Error(`key must be up 1..${s} byte long or undefined`);if(r.salt!==void 0&&r.salt.length!==i)throw new Error(`salt must be ${i} byte long or undefined`);if(r.personalization!==void 0&&r.personalization.length!==o)throw new Error(`personalization must be ${o} byte long or undefined`);this.buffer32=hi(this.buffer=new Uint8Array(t))}update(t){jt.exists(this);const{blockLen:n,buffer:r,buffer32:s}=this;t=Ln(t);const i=t.length;for(let o=0;o<i;){this.pos===n&&(this.compress(s,0,!1),this.pos=0);const a=Math.min(n-this.pos,i-o),c=t.byteOffset+o;if(a===n&&!(c%4)&&o+a<i){const u=new Uint32Array(t.buffer,c,Math.floor((i-o)/4));for(let d=0;o+n<i;d+=s.length,o+=n)this.length+=n,this.compress(u,d,!1);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,this.length+=a,o+=a}return this}digestInto(t){jt.exists(this),jt.output(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,this.buffer.subarray(n).fill(0),this.compress(r,0,!0);const s=hi(t);this.get().forEach((i,o)=>s[o]=i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return t||(t=new this.constructor({dkLen:o})),t.set(...this.get()),t.length=r,t.finished=s,t.destroyed=i,t.outputLen=o,t.buffer.set(n),t.pos=a,t}}const Gi=BigInt(2**32-1),mc=BigInt(32);function Ih(e,t=!1){return t?{h:Number(e&Gi),l:Number(e>>mc&Gi)}:{h:Number(e>>mc&Gi)|0,l:Number(e&Gi)|0}}function __(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:o}=Ih(e[s],t);[n[s],r[s]]=[i,o]}return[n,r]}const v_=(e,t)=>BigInt(e>>>0)<<mc|BigInt(t>>>0),T_=(e,t,n)=>e>>>n,S_=(e,t,n)=>e<<32-n|t>>>n,x_=(e,t,n)=>e>>>n|t<<32-n,A_=(e,t,n)=>e<<32-n|t>>>n,k_=(e,t,n)=>e<<64-n|t>>>n-32,E_=(e,t,n)=>e>>>n-32|t<<64-n,B_=(e,t)=>t,I_=(e,t)=>e,C_=(e,t,n)=>e<<n|t>>>32-n,O_=(e,t,n)=>t<<n|e>>>32-n,$_=(e,t,n)=>t<<n-32|e>>>64-n,R_=(e,t,n)=>e<<n-32|t>>>64-n;function P_(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}const U_=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),q_=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,N_=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),D_=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,M_=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0),L_=(e,t,n,r,s,i)=>t+n+r+s+i+(e/2**32|0)|0,te={fromBig:Ih,split:__,toBig:v_,shrSH:T_,shrSL:S_,rotrSH:x_,rotrSL:A_,rotrBH:k_,rotrBL:E_,rotr32H:B_,rotr32L:I_,rotlSH:C_,rotlSL:O_,rotlBH:$_,rotlBL:R_,add:P_,add3L:U_,add3H:q_,add4L:N_,add4H:D_,add5H:L_,add5L:M_},et=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),K=new Uint32Array(32);function Yn(e,t,n,r,s,i){const o=s[i],a=s[i+1];let c=K[2*e],u=K[2*e+1],d=K[2*t],l=K[2*t+1],p=K[2*n],g=K[2*n+1],w=K[2*r],h=K[2*r+1],y=te.add3L(c,d,o);u=te.add3H(y,u,l,a),c=y|0,{Dh:h,Dl:w}={Dh:h^u,Dl:w^c},{Dh:h,Dl:w}={Dh:te.rotr32H(h,w),Dl:te.rotr32L(h,w)},{h:g,l:p}=te.add(g,p,h,w),{Bh:l,Bl:d}={Bh:l^g,Bl:d^p},{Bh:l,Bl:d}={Bh:te.rotrSH(l,d,24),Bl:te.rotrSL(l,d,24)},K[2*e]=c,K[2*e+1]=u,K[2*t]=d,K[2*t+1]=l,K[2*n]=p,K[2*n+1]=g,K[2*r]=w,K[2*r+1]=h}function Qn(e,t,n,r,s,i){const o=s[i],a=s[i+1];let c=K[2*e],u=K[2*e+1],d=K[2*t],l=K[2*t+1],p=K[2*n],g=K[2*n+1],w=K[2*r],h=K[2*r+1],y=te.add3L(c,d,o);u=te.add3H(y,u,l,a),c=y|0,{Dh:h,Dl:w}={Dh:h^u,Dl:w^c},{Dh:h,Dl:w}={Dh:te.rotrSH(h,w,16),Dl:te.rotrSL(h,w,16)},{h:g,l:p}=te.add(g,p,h,w),{Bh:l,Bl:d}={Bh:l^g,Bl:d^p},{Bh:l,Bl:d}={Bh:te.rotrBH(l,d,63),Bl:te.rotrBL(l,d,63)},K[2*e]=c,K[2*e+1]=u,K[2*t]=d,K[2*t+1]=l,K[2*n]=p,K[2*n+1]=g,K[2*r]=w,K[2*r+1]=h}class j_ extends w_{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=et[0]|0,this.v0h=et[1]|0,this.v1l=et[2]|0,this.v1h=et[3]|0,this.v2l=et[4]|0,this.v2h=et[5]|0,this.v3l=et[6]|0,this.v3h=et[7]|0,this.v4l=et[8]|0,this.v4h=et[9]|0,this.v5l=et[10]|0,this.v5h=et[11]|0,this.v6l=et[12]|0,this.v6h=et[13]|0,this.v7l=et[14]|0,this.v7h=et[15]|0;const n=t.key?t.key.length:0;if(this.v0l^=this.outputLen|n<<8|1<<16|1<<24,t.salt){const r=hi(Ln(t.salt));this.v4l^=r[0],this.v4h^=r[1],this.v5l^=r[2],this.v5h^=r[3]}if(t.personalization){const r=hi(Ln(t.personalization));this.v6l^=r[0],this.v6h^=r[1],this.v7l^=r[2],this.v7h^=r[3]}if(t.key){const r=new Uint8Array(this.blockLen);r.set(Ln(t.key)),this.update(r)}}get(){let{v0l:t,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:u,v4h:d,v5l:l,v5h:p,v6l:g,v6h:w,v7l:h,v7h:y}=this;return[t,n,r,s,i,o,a,c,u,d,l,p,g,w,h,y]}set(t,n,r,s,i,o,a,c,u,d,l,p,g,w,h,y){this.v0l=t|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=d|0,this.v5l=l|0,this.v5h=p|0,this.v6l=g|0,this.v6h=w|0,this.v7l=h|0,this.v7h=y|0}compress(t,n,r){this.get().forEach((c,u)=>K[u]=c),K.set(et,16);let{h:s,l:i}=te.fromBig(BigInt(this.length));K[24]=et[8]^i,K[25]=et[9]^s,r&&(K[28]=~K[28],K[29]=~K[29]);let o=0;const a=m_;for(let c=0;c<12;c++)Yn(0,4,8,12,t,n+2*a[o++]),Qn(0,4,8,12,t,n+2*a[o++]),Yn(1,5,9,13,t,n+2*a[o++]),Qn(1,5,9,13,t,n+2*a[o++]),Yn(2,6,10,14,t,n+2*a[o++]),Qn(2,6,10,14,t,n+2*a[o++]),Yn(3,7,11,15,t,n+2*a[o++]),Qn(3,7,11,15,t,n+2*a[o++]),Yn(0,5,10,15,t,n+2*a[o++]),Qn(0,5,10,15,t,n+2*a[o++]),Yn(1,6,11,12,t,n+2*a[o++]),Qn(1,6,11,12,t,n+2*a[o++]),Yn(2,7,8,13,t,n+2*a[o++]),Qn(2,7,8,13,t,n+2*a[o++]),Yn(3,4,9,14,t,n+2*a[o++]),Qn(3,4,9,14,t,n+2*a[o++]);this.v0l^=K[0]^K[16],this.v0h^=K[1]^K[17],this.v1l^=K[2]^K[18],this.v1h^=K[3]^K[19],this.v2l^=K[4]^K[20],this.v2h^=K[5]^K[21],this.v3l^=K[6]^K[22],this.v3h^=K[7]^K[23],this.v4l^=K[8]^K[24],this.v4h^=K[9]^K[25],this.v5l^=K[10]^K[26],this.v5h^=K[11]^K[27],this.v6l^=K[12]^K[28],this.v6h^=K[13]^K[29],this.v7l^=K[14]^K[30],this.v7h^=K[15]^K[31],K.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ch=Eh(e=>new j_(e));class H_ extends TypeError{constructor(t,n){let r;const{message:s,explanation:i,...o}=t,{path:a}=t,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...n()])}}function G_(e){return cn(e)&&typeof e[Symbol.iterator]=="function"}function cn(e){return typeof e=="object"&&e!=null}function ln(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function z_(e){const{done:t,value:n}=e.next();return t?void 0:n}function V_(e,t,n,r){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:s,branch:i}=t,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${ln(r)}\``}=e;return{value:r,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...e,message:c}}function*Nl(e,t,n,r){G_(e)||(e=[e]);for(const s of e){const i=V_(s,t,n,r);i&&(yield i)}}function*_u(e,t,n={}){const{path:r=[],branch:s=[e],coerce:i=!1,mask:o=!1}=n,a={path:r,branch:s};if(i&&(e=t.coercer(e,a),o&&t.type!=="type"&&cn(t.schema)&&cn(e)&&!Array.isArray(e)))for(const u in e)t.schema[u]===void 0&&delete e[u];let c="valid";for(const u of t.validator(e,a))u.explanation=n.message,c="not_valid",yield[u,void 0];for(let[u,d,l]of t.entries(e,a)){const p=_u(d,l,{path:u===void 0?r:[...r,u],branch:u===void 0?s:[...s,d],coerce:i,mask:o,message:n.message});for(const g of p)g[0]?(c=g[0].refinement!=null?"not_refined":"not_valid",yield[g[0],void 0]):i&&(d=g[1],u===void 0?e=d:e instanceof Map?e.set(u,d):e instanceof Set?e.add(d):cn(e)&&(d!==void 0||u in e)&&(e[u]=d))}if(c!=="not_valid")for(const u of t.refiner(e,a))u.explanation=n.message,c="not_refined",yield[u,void 0];c==="valid"&&(yield[void 0,e])}class En{constructor(t){const{type:n,schema:r,validator:s,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=t;this.type=n,this.schema=r,this.entries=a,this.coercer=o,s?this.validator=(c,u)=>{const d=s(c,u);return Nl(d,u,this,c)}:this.validator=()=>[],i?this.refiner=(c,u)=>{const d=i(c,u);return Nl(d,u,this,c)}:this.refiner=()=>[]}assert(t,n){return jr(t,this,n)}create(t,n){return vu(t,this,n)}is(t){return Ue(t,this)}mask(t,n){return Tu(t,this,n)}validate(t,n={}){return qs(t,this,n)}}function jr(e,t,n){const r=qs(e,t,{message:n});if(r[0])throw r[0]}function vu(e,t,n){const r=qs(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function Tu(e,t,n){const r=qs(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function Ue(e,t){return!qs(e,t)[0]}function qs(e,t,n={}){const r=_u(e,t,n),s=z_(r);return s[0]?[new H_(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function ot(...e){const t=e[0].type==="type",n=e.map(s=>s.schema),r=Object.assign({},...n);return t?F_(r):S(r)}function kt(e,t){return new En({type:e,schema:null,validator:t})}function mt(){return kt("any",()=>!0)}function C(e){return new En({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,r]of t.entries())yield[n,r,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${ln(t)}`}})}function se(){return kt("boolean",e=>typeof e=="boolean")}function yt(){return kt("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${ln(e)}`)}function j(e){const t=ln(e),n=typeof e;return new En({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?e:null,validator(r){return r===e||`Expected the literal \`${t}\`, but received: ${ln(r)}`}})}function Oh(){return kt("never",()=>!1)}function re(e){return new En({...e,validator:(t,n)=>t===null||e.validator(t,n),refiner:(t,n)=>t===null||e.refiner(t,n)})}function V(){return kt("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${ln(e)}`)}function S(e){const t=e?Object.keys(e):[],n=Oh();return new En({type:"object",schema:e||null,*entries(r){if(e&&cn(r)){const s=new Set(Object.keys(r));for(const i of t)s.delete(i),yield[i,r[i],e[i]];for(const i of s)yield[i,r[i],n]}},validator(r){return cn(r)||`Expected an object, but received: ${ln(r)}`},coercer(r){return cn(r)?{...r}:r}})}function R(e){return new En({...e,validator:(t,n)=>t===void 0||e.validator(t,n),refiner:(t,n)=>t===void 0||e.refiner(t,n)})}function ut(e,t){return new En({type:"record",schema:null,*entries(n){if(cn(n))for(const r in n){const s=n[r];yield[r,r,e],yield[r,s,t]}},validator(n){return cn(n)||`Expected an object, but received: ${ln(n)}`}})}function f(){return kt("string",e=>typeof e=="string"||`Expected a string, but received: ${ln(e)}`)}function Le(e){const t=Oh();return new En({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(e.length,n.length);for(let s=0;s<r;s++)yield[s,n[s],e[s]||t]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${ln(n)}`}})}function F_(e){const t=Object.keys(e);return new En({type:"type",schema:e,*entries(n){if(cn(n))for(const r of t)yield[r,n[r],e[r]]},validator(n){return cn(n)||`Expected an object, but received: ${ln(n)}`},coercer(n){return cn(n)?{...n}:n}})}function Z(e){const t=e.map(n=>n.type).join(" | ");return new En({type:"union",schema:null,coercer(n){for(const r of e){const[s,i]=r.validate(n,{coerce:!0});if(!s)return i}return n},validator(n,r){const s=[];for(const i of e){const[...o]=_u(n,i,r),[a]=o;if(a[0])for(const[c]of o)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${ln(n)}`,...s]}})}function $h(e){return/^\d+\.\d+\.\d+$/.test(e)}function mn(e){if(!$h(e))throw new Error("Invalid semver version: "+e);const[t,n,r]=e.split(".").map(s=>parseInt(s,10));return{major:t,minor:n,patch:r}}function W_(e,t){const n=mn(e),r=mn(t);return n.major!==r.major?n.major<r.major:n.minor!==r.minor?n.minor<r.minor:n.patch!==r.patch?n.patch<r.patch:!1}function K_(e,t){const n=mn(e),r=mn(t);return n.major!==r.major?n.major<=r.major:n.minor!==r.minor?n.minor<=r.minor:n.patch!==r.patch?n.patch<=r.patch:!0}function X_(e,t){const n=mn(e),r=mn(t);return n.major!==r.major?n.major>r.major:n.minor!==r.minor?n.minor>r.minor:n.patch!==r.patch?n.patch>r.patch:!1}function Z_(e,t){const n=mn(e),r=mn(t);return n.major!==r.major?n.major>=r.major:n.minor!==r.minor?n.minor>=r.minor:n.patch!==r.patch?n.patch>=r.patch:!0}function J_(e,t){return mn(e),mn(t),e===t}var Y_={isValid:$h,parse:mn,lt:W_,lte:K_,gt:X_,gte:Z_,eq:J_};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Q_=BigInt(0),Su=BigInt(1),ev=BigInt(2),_a=e=>e instanceof Uint8Array,tv=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function As(e){if(!_a(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=tv[e[n]];return t}function Rh(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function xu(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function ks(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(e.length%2)throw new Error("hex string is invalid: unpadded "+e.length);const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=n*2,s=e.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("invalid byte sequence");t[n]=i}return t}function It(e){return xu(As(e))}function Au(e){if(!_a(e))throw new Error("Uint8Array expected");return xu(As(Uint8Array.from(e).reverse()))}const fr=(e,t)=>ks(e.toString(16).padStart(t*2,"0")),Ph=(e,t)=>fr(e,t).reverse(),nv=e=>ks(Rh(e));function ht(e,t,n){let r;if(typeof t=="string")try{r=ks(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(_a(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${e} expected ${n} bytes, got ${s}`);return r}function Ht(...e){const t=new Uint8Array(e.reduce((r,s)=>r+s.length,0));let n=0;return e.forEach(r=>{if(!_a(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function rv(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function va(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function sv(e){let t;for(t=0;e>0n;e>>=Su,t+=1);return t}const iv=(e,t)=>e>>BigInt(t)&1n,ov=(e,t,n)=>e|(n?Su:Q_)<<BigInt(t),ku=e=>(ev<<BigInt(e-1))-Su,Va=e=>new Uint8Array(e),Dl=e=>Uint8Array.from(e);function Uh(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Va(e),s=Va(e),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...l)=>n(s,r,...l),c=(l=Va())=>{s=a(Dl([0]),l),r=a(),l.length!==0&&(s=a(Dl([1]),l),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const p=[];for(;l<t;){r=a();const g=r.slice();p.push(g),l+=r.length}return Ht(...p)};return(l,p)=>{o(),c(l);let g;for(;!(g=p(u()));)c();return o(),g}}const av={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Ns(e,t,n={}){const r=(s,i,o)=>{const a=av[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=e[s];if(!(o&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return e}const cv=Object.freeze(Object.defineProperty({__proto__:null,bitGet:iv,bitLen:sv,bitMask:ku,bitSet:ov,bytesToHex:As,bytesToNumberBE:It,bytesToNumberLE:Au,concatBytes:Ht,createHmacDrbg:Uh,ensureBytes:ht,equalBytes:rv,hexToBytes:ks,hexToNumber:xu,numberToBytesBE:fr,numberToBytesLE:Ph,numberToHexUnpadded:Rh,numberToVarBytesBE:nv,utf8ToBytes:va,validateObject:Ns},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const at=BigInt(0),Fe=BigInt(1),kr=BigInt(2),uv=BigInt(3),wc=BigInt(4),Ml=BigInt(5),Ll=BigInt(8);BigInt(9);BigInt(16);function rt(e,t){const n=e%t;return n>=at?n:t+n}function lv(e,t,n){if(n<=at||t<at)throw new Error("Expected power/modulo > 0");if(n===Fe)return at;let r=Fe;for(;t>at;)t&Fe&&(r=r*e%n),e=e*e%n,t>>=Fe;return r}function Zt(e,t,n){let r=e;for(;t-- >at;)r*=r,r%=n;return r}function _c(e,t){if(e===at||t<=at)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=rt(e,t),r=t,s=at,i=Fe;for(;n!==at;){const a=r/n,c=r%n,u=s-i*a;r=n,n=c,s=i,i=u}if(r!==Fe)throw new Error("invert: does not exist");return rt(s,t)}function dv(e){const t=(e-Fe)/kr;let n,r,s;for(n=e-Fe,r=0;n%kr===at;n/=kr,r++);for(s=kr;s<e&&lv(s,t,e)!==e-Fe;s++);if(r===1){const o=(e+Fe)/wc;return function(c,u){const d=c.pow(u,o);if(!c.eql(c.sqr(d),u))throw new Error("Cannot find square root");return d}}const i=(n+Fe)/kr;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,d=a.pow(a.mul(a.ONE,s),n),l=a.pow(c,i),p=a.pow(c,n);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let g=1;for(let h=a.sqr(p);g<u&&!a.eql(h,a.ONE);g++)h=a.sqr(h);const w=a.pow(d,Fe<<BigInt(u-g-1));d=a.sqr(w),l=a.mul(l,w),p=a.mul(p,d),u=g}return l}}function fv(e){if(e%wc===uv){const t=(e+Fe)/wc;return function(r,s){const i=r.pow(s,t);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(e%Ll===Ml){const t=(e-Ml)/Ll;return function(r,s){const i=r.mul(s,kr),o=r.pow(i,t),a=r.mul(s,o),c=r.mul(r.mul(a,kr),o),u=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),s))throw new Error("Cannot find square root");return u}}return dv(e)}const hv=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function qh(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=hv.reduce((r,s)=>(r[s]="function",r),t);return Ns(e,n)}function pv(e,t,n){if(n<at)throw new Error("Expected power > 0");if(n===at)return e.ONE;if(n===Fe)return t;let r=e.ONE,s=t;for(;n>at;)n&Fe&&(r=e.mul(r,s)),s=e.sqr(s),n>>=Fe;return r}function gv(e,t){const n=new Array(t.length),r=t.reduce((i,o,a)=>e.is0(o)?i:(n[a]=i,e.mul(i,o)),e.ONE),s=e.inv(r);return t.reduceRight((i,o,a)=>e.is0(o)?i:(n[a]=e.mul(i,n[a]),e.mul(i,o)),s),n}function Eu(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function yv(e,t,n=!1,r={}){if(e<=at)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:s,nByteLength:i}=Eu(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=fv(e),a=Object.freeze({ORDER:e,BITS:s,BYTES:i,MASK:ku(s),ZERO:at,ONE:Fe,create:c=>rt(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return at<=c&&c<e},is0:c=>c===at,isOdd:c=>(c&Fe)===Fe,neg:c=>rt(-c,e),eql:(c,u)=>c===u,sqr:c=>rt(c*c,e),add:(c,u)=>rt(c+u,e),sub:(c,u)=>rt(c-u,e),mul:(c,u)=>rt(c*u,e),pow:(c,u)=>pv(a,c,u),div:(c,u)=>rt(c*_c(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>_c(c,e),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>gv(a,c),cmov:(c,u,d)=>d?u:c,toBytes:c=>n?Ph(c,i):fr(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?Au(c):It(c)}});return Object.freeze(a)}function bv(e,t,n=!1){e=ht("privateHash",e);const r=e.length,s=Eu(t).nByteLength+8;if(s<24||r<s||r>1024)throw new Error(`hashToPrivateScalar: expected ${s}-1024 bytes of input, got ${r}`);const i=n?Au(e):It(e);return rt(i,t-Fe)+Fe}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mv=BigInt(0),Fa=BigInt(1);function wv(e,t){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(t/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=e.ZERO,a=s;for(;i>mv;)i&Fa&&(o=o.add(a)),a=a.double(),i>>=Fa;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let u=s,d=u;for(let l=0;l<o;l++){d=u,c.push(d);for(let p=1;p<a;p++)d=d.add(u),c.push(d);u=d.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let u=e.ZERO,d=e.BASE;const l=BigInt(2**s-1),p=2**s,g=BigInt(s);for(let w=0;w<a;w++){const h=w*c;let y=Number(o&l);o>>=g,y>c&&(y-=p,o+=Fa);const v=h,m=h+Math.abs(y)-1,b=w%2!==0,_=y<0;y===0?d=d.add(n(b,i[v])):u=u.add(n(_,i[m]))}return{p:u,f:d}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let u=i.get(s);return u||(u=this.precomputeWindow(s,c),c!==1&&i.set(s,a(u))),this.wNAF(c,u,o)}}}function Nh(e){return qh(e.Fp),Ns(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Eu(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _v(e){const t=Nh(e);Ns(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:vv,hexToBytes:Tv}=cv,Rr={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Rr;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new t("Invalid signature integer: trailing length");return{d:vv(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Rr,n=typeof e=="string"?Tv(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=Rr._parseInt(n.subarray(2)),{d:o,l:a}=Rr._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(e){const t=u=>Number.parseInt(u[0],16)>=8?"00"+u:u,n=u=>{const d=u.toString(16);return d.length&1?`0${d}`:d},r=t(n(e.s)),s=t(n(e.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},pn=BigInt(0),tt=BigInt(1),In=BigInt(2),_o=BigInt(3),jl=BigInt(4);function Sv(e){const t=_v(e),{Fp:n}=t,r=t.toBytes||((w,h,y)=>{const v=h.toAffine();return Ht(Uint8Array.from([4]),n.toBytes(v.x),n.toBytes(v.y))}),s=t.fromBytes||(w=>{const h=w.subarray(1),y=n.fromBytes(h.subarray(0,n.BYTES)),v=n.fromBytes(h.subarray(n.BYTES,2*n.BYTES));return{x:y,y:v}});function i(w){const{a:h,b:y}=t,v=n.sqr(w),m=n.mul(v,w);return n.add(n.add(m,n.mul(w,h)),y)}function o(w){return typeof w=="bigint"&&pn<w&&w<t.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(w){const{allowedPrivateKeyLengths:h,nByteLength:y,wrapPrivateKey:v,n:m}=t;if(h&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=As(w)),typeof w!="string"||!h.includes(w.length))throw new Error("Invalid key");w=w.padStart(y*2,"0")}let b;try{b=typeof w=="bigint"?w:It(ht("private key",w,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof w}`)}return v&&(b=rt(b,m)),a(b),b}const u=new Map;function d(w){if(!(w instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(h,y,v){if(this.px=h,this.py=y,this.pz=v,h==null||!n.isValid(h))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(v==null||!n.isValid(v))throw new Error("z required")}static fromAffine(h){const{x:y,y:v}=h||{};if(!h||!n.isValid(y)||!n.isValid(v))throw new Error("invalid affine point");if(h instanceof l)throw new Error("projective point not allowed");const m=b=>n.eql(b,n.ZERO);return m(y)&&m(v)?l.ZERO:new l(y,v,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(h){const y=n.invertBatch(h.map(v=>v.pz));return h.map((v,m)=>v.toAffine(y[m])).map(l.fromAffine)}static fromHex(h){const y=l.fromAffine(s(ht("pointHex",h)));return y.assertValidity(),y}static fromPrivateKey(h){return l.BASE.multiply(c(h))}_setWindowSize(h){this._WINDOW_SIZE=h,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:h,y}=this.toAffine();if(!n.isValid(h)||!n.isValid(y))throw new Error("bad point: x or y not FE");const v=n.sqr(y),m=i(h);if(!n.eql(v,m))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:h}=this.toAffine();if(n.isOdd)return!n.isOdd(h);throw new Error("Field doesn't support isOdd")}equals(h){d(h);const{px:y,py:v,pz:m}=this,{px:b,py:_,pz:T}=h,x=n.eql(n.mul(y,T),n.mul(b,m)),k=n.eql(n.mul(v,T),n.mul(_,m));return x&&k}negate(){return new l(this.px,n.neg(this.py),this.pz)}double(){const{a:h,b:y}=t,v=n.mul(y,_o),{px:m,py:b,pz:_}=this;let T=n.ZERO,x=n.ZERO,k=n.ZERO,B=n.mul(m,m),D=n.mul(b,b),U=n.mul(_,_),N=n.mul(m,b);return N=n.add(N,N),k=n.mul(m,_),k=n.add(k,k),T=n.mul(h,k),x=n.mul(v,U),x=n.add(T,x),T=n.sub(D,x),x=n.add(D,x),x=n.mul(T,x),T=n.mul(N,T),k=n.mul(v,k),U=n.mul(h,U),N=n.sub(B,U),N=n.mul(h,N),N=n.add(N,k),k=n.add(B,B),B=n.add(k,B),B=n.add(B,U),B=n.mul(B,N),x=n.add(x,B),U=n.mul(b,_),U=n.add(U,U),B=n.mul(U,N),T=n.sub(T,B),k=n.mul(U,D),k=n.add(k,k),k=n.add(k,k),new l(T,x,k)}add(h){d(h);const{px:y,py:v,pz:m}=this,{px:b,py:_,pz:T}=h;let x=n.ZERO,k=n.ZERO,B=n.ZERO;const D=t.a,U=n.mul(t.b,_o);let N=n.mul(y,b),G=n.mul(v,_),X=n.mul(m,T),le=n.add(y,v),O=n.add(b,_);le=n.mul(le,O),O=n.add(N,G),le=n.sub(le,O),O=n.add(y,m);let q=n.add(b,T);return O=n.mul(O,q),q=n.add(N,X),O=n.sub(O,q),q=n.add(v,m),x=n.add(_,T),q=n.mul(q,x),x=n.add(G,X),q=n.sub(q,x),B=n.mul(D,O),x=n.mul(U,X),B=n.add(x,B),x=n.sub(G,B),B=n.add(G,B),k=n.mul(x,B),G=n.add(N,N),G=n.add(G,N),X=n.mul(D,X),O=n.mul(U,O),G=n.add(G,X),X=n.sub(N,X),X=n.mul(D,X),O=n.add(O,X),N=n.mul(G,O),k=n.add(k,N),N=n.mul(q,O),x=n.mul(le,x),x=n.sub(x,N),N=n.mul(le,G),B=n.mul(q,B),B=n.add(B,N),new l(x,k,B)}subtract(h){return this.add(h.negate())}is0(){return this.equals(l.ZERO)}wNAF(h){return g.wNAFCached(this,u,h,y=>{const v=n.invertBatch(y.map(m=>m.pz));return y.map((m,b)=>m.toAffine(v[b])).map(l.fromAffine)})}multiplyUnsafe(h){const y=l.ZERO;if(h===pn)return y;if(a(h),h===tt)return this;const{endo:v}=t;if(!v)return g.unsafeLadder(this,h);let{k1neg:m,k1:b,k2neg:_,k2:T}=v.splitScalar(h),x=y,k=y,B=this;for(;b>pn||T>pn;)b&tt&&(x=x.add(B)),T&tt&&(k=k.add(B)),B=B.double(),b>>=tt,T>>=tt;return m&&(x=x.negate()),_&&(k=k.negate()),k=new l(n.mul(k.px,v.beta),k.py,k.pz),x.add(k)}multiply(h){a(h);let y=h,v,m;const{endo:b}=t;if(b){const{k1neg:_,k1:T,k2neg:x,k2:k}=b.splitScalar(y);let{p:B,f:D}=this.wNAF(T),{p:U,f:N}=this.wNAF(k);B=g.constTimeNegate(_,B),U=g.constTimeNegate(x,U),U=new l(n.mul(U.px,b.beta),U.py,U.pz),v=B.add(U),m=D.add(N)}else{const{p:_,f:T}=this.wNAF(y);v=_,m=T}return l.normalizeZ([v,m])[0]}multiplyAndAddUnsafe(h,y,v){const m=l.BASE,b=(T,x)=>x===pn||x===tt||!T.equals(m)?T.multiplyUnsafe(x):T.multiply(x),_=b(this,y).add(b(h,v));return _.is0()?void 0:_}toAffine(h){const{px:y,py:v,pz:m}=this,b=this.is0();h==null&&(h=b?n.ONE:n.inv(m));const _=n.mul(y,h),T=n.mul(v,h),x=n.mul(m,h);if(b)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:_,y:T}}isTorsionFree(){const{h,isTorsionFree:y}=t;if(h===tt)return!0;if(y)return y(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h,clearCofactor:y}=t;return h===tt?this:y?y(l,this):this.multiplyUnsafe(t.h)}toRawBytes(h=!0){return this.assertValidity(),r(l,this,h)}toHex(h=!0){return As(this.toRawBytes(h))}}l.BASE=new l(t.Gx,t.Gy,n.ONE),l.ZERO=new l(n.ZERO,n.ONE,n.ZERO);const p=t.nBitLength,g=wv(l,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function xv(e){const t=Nh(e);return Ns(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Av(e){const t=xv(e),{Fp:n,n:r}=t,s=n.BYTES+1,i=2*n.BYTES+1;function o(O){return pn<O&&O<n.ORDER}function a(O){return rt(O,r)}function c(O){return _c(O,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:l,isWithinCurveOrder:p}=Sv({...t,toBytes(O,q,z){const ee=q.toAffine(),Y=n.toBytes(ee.x),Se=Ht;return z?Se(Uint8Array.from([q.hasEvenY()?2:3]),Y):Se(Uint8Array.from([4]),Y,n.toBytes(ee.y))},fromBytes(O){const q=O.length,z=O[0],ee=O.subarray(1);if(q===s&&(z===2||z===3)){const Y=It(ee);if(!o(Y))throw new Error("Point is not on curve");const Se=l(Y);let Ne=n.sqrt(Se);const Oe=(Ne&tt)===tt;return(z&1)===1!==Oe&&(Ne=n.neg(Ne)),{x:Y,y:Ne}}else if(q===i&&z===4){const Y=n.fromBytes(ee.subarray(0,n.BYTES)),Se=n.fromBytes(ee.subarray(n.BYTES,2*n.BYTES));return{x:Y,y:Se}}else throw new Error(`Point of length ${q} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),g=O=>As(fr(O,t.nByteLength));function w(O){const q=r>>tt;return O>q}function h(O){return w(O)?a(-O):O}const y=(O,q,z)=>It(O.slice(q,z));class v{constructor(q,z,ee){this.r=q,this.s=z,this.recovery=ee,this.assertValidity()}static fromCompact(q){const z=t.nByteLength;return q=ht("compactSignature",q,z*2),new v(y(q,0,z),y(q,z,2*z))}static fromDER(q){const{r:z,s:ee}=Rr.toSig(ht("DER",q));return new v(z,ee)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(q){return new v(this.r,this.s,q)}recoverPublicKey(q){const{r:z,s:ee,recovery:Y}=this,Se=k(ht("msgHash",q));if(Y==null||![0,1,2,3].includes(Y))throw new Error("recovery id invalid");const Ne=Y===2||Y===3?z+t.n:z;if(Ne>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const Oe=Y&1?"03":"02",Je=u.fromHex(Oe+g(Ne)),Ye=c(Ne),Et=a(-Se*Ye),qt=a(ee*Ye),Qe=u.BASE.multiplyAndAddUnsafe(Je,Et,qt);if(!Qe)throw new Error("point at infinify");return Qe.assertValidity(),Qe}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return ks(this.toDERHex())}toDERHex(){return Rr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ks(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const m={isValidPrivateKey(O){try{return d(O),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const O=t.randomBytes(n.BYTES+8),q=bv(O,r);return fr(q,t.nByteLength)},precompute(O=8,q=u.BASE){return q._setWindowSize(O),q.multiply(BigInt(3)),q}};function b(O,q=!0){return u.fromPrivateKey(O).toRawBytes(q)}function _(O){const q=O instanceof Uint8Array,z=typeof O=="string",ee=(q||z)&&O.length;return q?ee===s||ee===i:z?ee===2*s||ee===2*i:O instanceof u}function T(O,q,z=!0){if(_(O))throw new Error("first arg must be private key");if(!_(q))throw new Error("second arg must be public key");return u.fromHex(q).multiply(d(O)).toRawBytes(z)}const x=t.bits2int||function(O){const q=It(O),z=O.length*8-t.nBitLength;return z>0?q>>BigInt(z):q},k=t.bits2int_modN||function(O){return a(x(O))},B=ku(t.nBitLength);function D(O){if(typeof O!="bigint")throw new Error("bigint expected");if(!(pn<=O&&O<B))throw new Error(`bigint expected < 2^${t.nBitLength}`);return fr(O,t.nByteLength)}function U(O,q,z=N){if(["recovered","canonical"].some(A=>A in z))throw new Error("sign() legacy options not supported");const{hash:ee,randomBytes:Y}=t;let{lowS:Se,prehash:Ne,extraEntropy:Oe}=z;Se==null&&(Se=!0),O=ht("msgHash",O),Ne&&(O=ht("prehashed msgHash",ee(O)));const Je=k(O),Ye=d(q),Et=[D(Ye),D(Je)];if(Oe!=null){const A=Oe===!0?Y(n.BYTES):Oe;Et.push(ht("extraEntropy",A,n.BYTES))}const qt=Ht(...Et),Qe=Je;function Bn(A){const I=x(A);if(!p(I))return;const P=c(I),$=u.BASE.multiply(I).toAffine(),M=a($.x);if(M===pn)return;const L=a(P*a(Qe+M*Ye));if(L===pn)return;let H=($.x===M?0:2)|Number($.y&tt),W=L;return Se&&w(L)&&(W=h(L),H^=1),new v(M,W,H)}return{seed:qt,k2sig:Bn}}const N={lowS:t.lowS,prehash:!1},G={lowS:t.lowS,prehash:!1};function X(O,q,z=N){const{seed:ee,k2sig:Y}=U(O,q,z);return Uh(t.hash.outputLen,t.nByteLength,t.hmac)(ee,Y)}u.BASE._setWindowSize(8);function le(O,q,z,ee=G){var $;const Y=O;if(q=ht("msgHash",q),z=ht("publicKey",z),"strict"in ee)throw new Error("options.strict was renamed to lowS");const{lowS:Se,prehash:Ne}=ee;let Oe,Je;try{if(typeof Y=="string"||Y instanceof Uint8Array)try{Oe=v.fromDER(Y)}catch(M){if(!(M instanceof Rr.Err))throw M;Oe=v.fromCompact(Y)}else if(typeof Y=="object"&&typeof Y.r=="bigint"&&typeof Y.s=="bigint"){const{r:M,s:L}=Y;Oe=new v(M,L)}else throw new Error("PARSE");Je=u.fromHex(z)}catch(M){if(M.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Se&&Oe.hasHighS())return!1;Ne&&(q=t.hash(q));const{r:Ye,s:Et}=Oe,qt=k(q),Qe=c(Et),Bn=a(qt*Qe),A=a(Ye*Qe),I=($=u.BASE.multiplyAndAddUnsafe(Je,Bn,A))==null?void 0:$.toAffine();return I?a(I.x)===Ye:!1}return{CURVE:t,getPublicKey:b,getSharedSecret:T,sign:X,verify:le,ProjectivePoint:u,Signature:v,utils:m}}function kv(e,t){const n=e.ORDER;let r=pn;for(let p=n-tt;p%In===pn;p/=In)r+=tt;const s=r,i=(n-tt)/In**s,o=(i-tt)/In,a=In**s-tt,c=In**(s-tt),u=e.pow(t,i),d=e.pow(t,(i+tt)/In);let l=(p,g)=>{let w=u,h=e.pow(g,a),y=e.sqr(h);y=e.mul(y,g);let v=e.mul(p,y);v=e.pow(v,o),v=e.mul(v,h),h=e.mul(v,g),y=e.mul(v,p);let m=e.mul(y,h);v=e.pow(m,c);let b=e.eql(v,e.ONE);h=e.mul(y,d),v=e.mul(m,w),y=e.cmov(h,y,b),m=e.cmov(v,m,b);for(let _=s;_>1;_--){let T=In**(_-In),x=e.pow(m,T);const k=e.eql(x,e.ONE);h=e.mul(y,w),w=e.mul(w,w),x=e.mul(m,w),y=e.cmov(h,y,k),m=e.cmov(x,m,k)}return{isValid:b,value:y}};if(e.ORDER%jl===_o){const p=(e.ORDER-_o)/jl,g=e.sqrt(e.neg(t));l=(w,h)=>{let y=e.sqr(h);const v=e.mul(w,h);y=e.mul(y,v);let m=e.pow(y,p);m=e.mul(m,v);const b=e.mul(m,g),_=e.mul(e.sqr(m),h),T=e.eql(_,w);let x=e.cmov(b,m,T);return{isValid:T,value:x}}}return l}function Ev(e,t){if(qh(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=kv(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let s,i,o,a,c,u,d,l;s=e.sqr(r),s=e.mul(s,t.Z),i=e.sqr(s),i=e.add(i,s),o=e.add(i,e.ONE),o=e.mul(o,t.B),a=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),a=e.mul(a,t.A),i=e.sqr(o),u=e.sqr(a),c=e.mul(u,t.A),i=e.add(i,c),i=e.mul(i,o),u=e.mul(u,a),c=e.mul(u,t.B),i=e.add(i,c),d=e.mul(s,o);const{isValid:p,value:g}=n(i,u);l=e.mul(s,r),l=e.mul(l,g),d=e.cmov(d,o,p),l=e.cmov(l,g,p);const w=e.isOdd(r)===e.isOdd(l);return l=e.cmov(e.neg(l),l,w),d=e.div(d,a),{x:d,y:l}}}function Bv(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return va(e);throw new Error("DST must be Uint8Array or string")}const Iv=It;function sr(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=e&255,e>>>=8;return new Uint8Array(n)}function Cv(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function pi(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function Bu(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Ov(e,t,n,r){pi(e),pi(t),Bu(n),t.length>255&&(t=r(Ht(va("H2C-OVERSIZE-DST-"),t)));const{outputLen:s,blockLen:i}=r,o=Math.ceil(n/s);if(o>255)throw new Error("Invalid xmd length");const a=Ht(t,sr(t.length,1)),c=sr(0,i),u=sr(n,2),d=new Array(o),l=r(Ht(c,e,u,sr(0,1),a));d[0]=r(Ht(l,sr(1,1),a));for(let g=1;g<=o;g++){const w=[Cv(l,d[g-1]),sr(g+1,1),a];d[g]=r(Ht(...w))}return Ht(...d).slice(0,n)}function $v(e,t,n,r,s){if(pi(e),pi(t),Bu(n),t.length>255){const i=Math.ceil(2*r/8);t=s.create({dkLen:i}).update(va("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:n}).update(e).update(sr(n,2)).update(t).update(sr(t.length,1)).digest()}function Hl(e,t,n){Ns(n,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:s,m:i,hash:o,expand:a,DST:c}=n;pi(e),Bu(t);const u=Bv(c),d=r.toString(2).length,l=Math.ceil((d+s)/8),p=t*i*l;let g;if(a==="xmd")g=Ov(e,u,p,o);else if(a==="xof")g=$v(e,u,p,s,o);else if(a===void 0)g=e;else throw new Error('expand must be "xmd", "xof" or undefined');const w=new Array(t);for(let h=0;h<t;h++){const y=new Array(i);for(let v=0;v<i;v++){const m=l*(v+h*i),b=g.subarray(m,m+l);y[v]=rt(Iv(b),r)}w[h]=y}return w}function Rv(e,t){const n=t.map(r=>Array.from(r).reverse());return(r,s)=>{const[i,o,a,c]=n.map(u=>u.reduce((d,l)=>e.add(e.mul(d,r),l)));return r=e.div(i,o),s=e.mul(s,e.div(a,c)),{x:r,y:s}}}function Pv(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,s){const i=Hl(r,2,{...n,DST:n.DST,...s}),o=e.fromAffine(t(i[0])),a=e.fromAffine(t(i[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,s){const i=Hl(r,1,{...n,DST:n.encodeDST,...s}),o=e.fromAffine(t(i[0])).clearCofactor();return o.assertValidity(),o}}}class Dh extends wa{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,jt.hash(t);const r=Ln(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return jt.exists(this),this.iHash.update(t),this}digestInto(t){jt.exists(this),jt.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Iu=(e,t,n)=>new Dh(e,t).update(n).digest();Iu.create=(e,t)=>new Dh(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Uv(e){return{hash:e,hmac:(t,...n)=>Iu(e,t,mu(...n)),randomBytes:Pi}}function qv(e,t){const n=r=>Av({...e,...Uv(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ta=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),vo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Mh=BigInt(1),To=BigInt(2),Gl=(e,t)=>(e+t/To)/t;function Lh(e){const t=Ta,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,d=u*u*e%t,l=Zt(d,n,t)*d%t,p=Zt(l,n,t)*d%t,g=Zt(p,To,t)*u%t,w=Zt(g,s,t)*g%t,h=Zt(w,i,t)*w%t,y=Zt(h,a,t)*h%t,v=Zt(y,c,t)*y%t,m=Zt(v,a,t)*h%t,b=Zt(m,n,t)*d%t,_=Zt(b,o,t)*w%t,T=Zt(_,r,t)*u%t,x=Zt(T,To,t);if(!pr.eql(pr.sqr(x),e))throw new Error("Cannot find square root");return x}const pr=yv(Ta,void 0,void 0,{sqrt:Lh}),Sa=qv({a:BigInt(0),b:BigInt(7),Fp:pr,n:vo,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=vo,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Mh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=Gl(i*e,t),c=Gl(-r*e,t);let u=rt(e-a*n-c*s,t),d=rt(-a*r-c*i,t);const l=u>o,p=d>o;if(l&&(u=t-u),p&&(d=t-d),u>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:p,k2:d}}}},kn),xa=BigInt(0),jh=e=>typeof e=="bigint"&&xa<e&&e<Ta,Nv=e=>typeof e=="bigint"&&xa<e&&e<vo,zl={};function So(e,...t){let n=zl[e];if(n===void 0){const r=kn(Uint8Array.from(e,s=>s.charCodeAt(0)));n=Ht(r,r),zl[e]=n}return kn(Ht(n,...t))}const Cu=e=>e.toRawBytes(!0).slice(1),vc=e=>fr(e,32),Wa=e=>rt(e,Ta),gi=e=>rt(e,vo),Ou=Sa.ProjectivePoint,Dv=(e,t,n)=>Ou.BASE.multiplyAndAddUnsafe(e,t,n);function Tc(e){let t=Sa.utils.normPrivateKeyToScalar(e),n=Ou.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:gi(-t),bytes:Cu(n)}}function Hh(e){if(!jh(e))throw new Error("bad x: need 0 < x < p");const t=Wa(e*e),n=Wa(t*e+BigInt(7));let r=Lh(n);r%To!==xa&&(r=Wa(-r));const s=new Ou(e,r,Mh);return s.assertValidity(),s}function Gh(...e){return gi(It(So("BIP0340/challenge",...e)))}function Mv(e){return Tc(e).bytes}function Lv(e,t,n=Pi(32)){const r=ht("message",e),{bytes:s,scalar:i}=Tc(t),o=ht("auxRand",n,32),a=vc(i^It(So("BIP0340/aux",o))),c=So("BIP0340/nonce",a,s,r),u=gi(It(c));if(u===xa)throw new Error("sign failed: k is zero");const{bytes:d,scalar:l}=Tc(u),p=Gh(d,s,r),g=new Uint8Array(64);if(g.set(d,0),g.set(vc(gi(l+p*i)),32),!zh(g,r,s))throw new Error("sign: Invalid signature produced");return g}function zh(e,t,n){const r=ht("signature",e,64),s=ht("message",t),i=ht("publicKey",n,32);try{const o=Hh(It(i)),a=It(r.subarray(0,32));if(!jh(a))return!1;const c=It(r.subarray(32,64));if(!Nv(c))return!1;const u=Gh(vc(a),Cu(o),s),d=Dv(o,c,gi(-u));return!(!d||!d.hasEvenY()||d.toAffine().x!==a)}catch{return!1}}Sa.utils.randomPrivateKey;const jv=Rv(pr,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),Hv=Ev(pr,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:pr.create(BigInt("-11"))});Pv(Sa.ProjectivePoint,e=>{const{x:t,y:n}=Hv(pr.create(e[0]));return jv(t,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:pr.ORDER,m:1,k:128,expand:"xmd",hash:kn});var Gt={},gt={};Object.defineProperty(gt,"__esModule",{value:!0});gt.output=gt.exists=gt.hash=gt.bytes=gt.bool=gt.number=void 0;function xo(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}gt.number=xo;function Vh(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}gt.bool=Vh;function $u(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}gt.bytes=$u;function Fh(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");xo(e.outputLen),xo(e.blockLen)}gt.hash=Fh;function Wh(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}gt.exists=Wh;function Kh(e,t){$u(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}gt.output=Kh;const Gv={number:xo,bool:Vh,bytes:$u,hash:Fh,exists:Wh,output:Kh};gt.default=Gv;var Es={},Xh={},Ru={};const zv=xi(n_);(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=zv,n=_=>new Uint8Array(_.buffer,_.byteOffset,_.byteLength);e.u8=n;const r=_=>new Uint32Array(_.buffer,_.byteOffset,Math.floor(_.byteLength/4));e.u32=r;const s=_=>new DataView(_.buffer,_.byteOffset,_.byteLength);e.createView=s;const i=(_,T)=>_<<32-T|_>>>T;if(e.rotr=i,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},(_,T)=>T.toString(16).padStart(2,"0"));function a(_){if(!(_ instanceof Uint8Array))throw new Error("Uint8Array expected");let T="";for(let x=0;x<_.length;x++)T+=o[_[x]];return T}e.bytesToHex=a;function c(_){if(typeof _!="string")throw new TypeError("hexToBytes: expected string, got "+typeof _);if(_.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const T=new Uint8Array(_.length/2);for(let x=0;x<T.length;x++){const k=x*2,B=_.slice(k,k+2),D=Number.parseInt(B,16);if(Number.isNaN(D)||D<0)throw new Error("Invalid byte sequence");T[x]=D}return T}e.hexToBytes=c;const u=async()=>{};e.nextTick=u;async function d(_,T,x){let k=Date.now();for(let B=0;B<_;B++){x(B);const D=Date.now()-k;D>=0&&D<T||(await(0,e.nextTick)(),k+=D)}}e.asyncLoop=d;function l(_){if(typeof _!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof _}`);return new TextEncoder().encode(_)}e.utf8ToBytes=l;function p(_){if(typeof _=="string"&&(_=l(_)),!(_ instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof _})`);return _}e.toBytes=p;function g(..._){if(!_.every(k=>k instanceof Uint8Array))throw new Error("Uint8Array list expected");if(_.length===1)return _[0];const T=_.reduce((k,B)=>k+B.length,0),x=new Uint8Array(T);for(let k=0,B=0;k<_.length;k++){const D=_[k];x.set(D,B),B+=D.length}return x}e.concatBytes=g;class w{clone(){return this._cloneInto()}}e.Hash=w;const h=_=>Object.prototype.toString.call(_)==="[object Object]"&&_.constructor===Object;function y(_,T){if(T!==void 0&&(typeof T!="object"||!h(T)))throw new TypeError("Options should be object or undefined");return Object.assign(_,T)}e.checkOpts=y;function v(_){const T=k=>_().update(p(k)).digest(),x=_();return T.outputLen=x.outputLen,T.blockLen=x.blockLen,T.create=()=>_(),T}e.wrapConstructor=v;function m(_){const T=(k,B)=>_(B).update(p(k)).digest(),x=_({});return T.outputLen=x.outputLen,T.blockLen=x.blockLen,T.create=k=>_(k),T}e.wrapConstructorWithOpts=m;function b(_=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(_));throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=b})(Ru);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const t=gt,n=Ru;class r extends n.Hash{constructor(o,a){super(),this.finished=!1,this.destroyed=!1,t.default.hash(o);const c=(0,n.toBytes)(a);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,d=new Uint8Array(u);d.set(c.length>u?o.create().update(c).digest():c);for(let l=0;l<d.length;l++)d[l]^=54;this.iHash.update(d),this.oHash=o.create();for(let l=0;l<d.length;l++)d[l]^=106;this.oHash.update(d),d.fill(0)}update(o){return t.default.exists(this),this.iHash.update(o),this}digestInto(o){t.default.exists(this),t.default.bytes(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:c,finished:u,destroyed:d,blockLen:l,outputLen:p}=this;return o=o,o.finished=u,o.destroyed=d,o.blockLen=l,o.outputLen=p,o.oHash=a._cloneInto(o.oHash),o.iHash=c._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const s=(i,o,a)=>new r(i,o).update(a).digest();e.hmac=s,e.hmac.create=(i,o)=>new r(i,o)})(Xh);Object.defineProperty(Es,"__esModule",{value:!0});Es.pbkdf2Async=Es.pbkdf2=void 0;const zi=gt,Vv=Xh,ys=Ru;function Zh(e,t,n,r){zi.default.hash(e);const s=(0,ys.checkOpts)({dkLen:32,asyncTick:10},r),{c:i,dkLen:o,asyncTick:a}=s;if(zi.default.number(i),zi.default.number(o),zi.default.number(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=(0,ys.toBytes)(t),u=(0,ys.toBytes)(n),d=new Uint8Array(o),l=Vv.hmac.create(e,c),p=l._cloneInto().update(u);return{c:i,dkLen:o,asyncTick:a,DK:d,PRF:l,PRFSalt:p}}function Jh(e,t,n,r,s){return e.destroy(),t.destroy(),r&&r.destroy(),s.fill(0),n}function Fv(e,t,n,r){const{c:s,dkLen:i,DK:o,PRF:a,PRFSalt:c}=Zh(e,t,n,r);let u;const d=new Uint8Array(4),l=(0,ys.createView)(d),p=new Uint8Array(a.outputLen);for(let g=1,w=0;w<i;g++,w+=a.outputLen){const h=o.subarray(w,w+a.outputLen);l.setInt32(0,g,!1),(u=c._cloneInto(u)).update(d).digestInto(p),h.set(p.subarray(0,h.length));for(let y=1;y<s;y++){a._cloneInto(u).update(p).digestInto(p);for(let v=0;v<h.length;v++)h[v]^=p[v]}}return Jh(a,c,o,u,p)}Es.pbkdf2=Fv;async function Wv(e,t,n,r){const{c:s,dkLen:i,asyncTick:o,DK:a,PRF:c,PRFSalt:u}=Zh(e,t,n,r);let d;const l=new Uint8Array(4),p=(0,ys.createView)(l),g=new Uint8Array(c.outputLen);for(let w=1,h=0;h<i;w++,h+=c.outputLen){const y=a.subarray(h,h+c.outputLen);p.setInt32(0,w,!1),(d=u._cloneInto(d)).update(l).digestInto(g),y.set(g.subarray(0,y.length)),await(0,ys.asyncLoop)(s-1,o,v=>{c._cloneInto(d).update(g).digestInto(g);for(let m=0;m<y.length;m++)y[m]^=g[m]})}return Jh(c,u,a,d,g)}Es.pbkdf2Async=Wv;const Kv=xi(b_),[Xv,Zv]=te.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),er=new Uint32Array(80),tr=new Uint32Array(80);class Ui extends wu{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:d,Fh:l,Fl:p,Gh:g,Gl:w,Hh:h,Hl:y}=this;return[t,n,r,s,i,o,a,c,u,d,l,p,g,w,h,y]}set(t,n,r,s,i,o,a,c,u,d,l,p,g,w,h,y){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=l|0,this.Fl=p|0,this.Gh=g|0,this.Gl=w|0,this.Hh=h|0,this.Hl=y|0}process(t,n){for(let b=0;b<16;b++,n+=4)er[b]=t.getUint32(n),tr[b]=t.getUint32(n+=4);for(let b=16;b<80;b++){const _=er[b-15]|0,T=tr[b-15]|0,x=te.rotrSH(_,T,1)^te.rotrSH(_,T,8)^te.shrSH(_,T,7),k=te.rotrSL(_,T,1)^te.rotrSL(_,T,8)^te.shrSL(_,T,7),B=er[b-2]|0,D=tr[b-2]|0,U=te.rotrSH(B,D,19)^te.rotrBH(B,D,61)^te.shrSH(B,D,6),N=te.rotrSL(B,D,19)^te.rotrBL(B,D,61)^te.shrSL(B,D,6),G=te.add4L(k,N,tr[b-7],tr[b-16]),X=te.add4H(G,x,U,er[b-7],er[b-16]);er[b]=X|0,tr[b]=G|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:d,Eh:l,El:p,Fh:g,Fl:w,Gh:h,Gl:y,Hh:v,Hl:m}=this;for(let b=0;b<80;b++){const _=te.rotrSH(l,p,14)^te.rotrSH(l,p,18)^te.rotrBH(l,p,41),T=te.rotrSL(l,p,14)^te.rotrSL(l,p,18)^te.rotrBL(l,p,41),x=l&g^~l&h,k=p&w^~p&y,B=te.add5L(m,T,k,Zv[b],tr[b]),D=te.add5H(B,v,_,x,Xv[b],er[b]),U=B|0,N=te.rotrSH(r,s,28)^te.rotrBH(r,s,34)^te.rotrBH(r,s,39),G=te.rotrSL(r,s,28)^te.rotrBL(r,s,34)^te.rotrBL(r,s,39),X=r&i^r&a^i&a,le=s&o^s&c^o&c;v=h|0,m=y|0,h=g|0,y=w|0,g=l|0,w=p|0,{h:l,l:p}=te.add(u|0,d|0,D|0,U|0),u=a|0,d=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const O=te.add3L(U,G,le);r=te.add3H(O,D,N,X),s=O|0}({h:r,l:s}=te.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=te.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=te.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=te.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:l,l:p}=te.add(this.Eh|0,this.El|0,l|0,p|0),{h:g,l:w}=te.add(this.Fh|0,this.Fl|0,g|0,w|0),{h,l:y}=te.add(this.Gh|0,this.Gl|0,h|0,y|0),{h:v,l:m}=te.add(this.Hh|0,this.Hl|0,v|0,m|0),this.set(r,s,i,o,a,c,u,d,l,p,g,w,h,y,v,m)}roundClean(){er.fill(0),tr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Jv extends Ui{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Yv extends Ui{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Qv extends Ui{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const e1=br(()=>new Ui),t1=br(()=>new Jv),n1=br(()=>new Yv),r1=br(()=>new Qv),s1=Object.freeze(Object.defineProperty({__proto__:null,SHA512:Ui,sha384:r1,sha512:e1,sha512_224:t1,sha512_256:n1},Symbol.toStringTag,{value:"Module"})),i1=xi(s1),o1=xi(l_);Object.defineProperty(Gt,"__esModule",{value:!0});Gt.mnemonicToSeedSync=Gt.mnemonicToSeed=Gt.validateMnemonic=Gt.entropyToMnemonic=Gt.mnemonicToEntropy=Gt.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const Yh=gt,Qh=Es,a1=Kv,ep=i1,c1=o1,Vi=Fc,u1=e=>e[0]==="あいこくしん";function tp(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function Pu(e){const t=tp(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function np(e){Yh.default.bytes(e,16,20,24,28,32)}function l1(e,t=128){if(Yh.default.number(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return ip((0,c1.randomBytes)(t/8),e)}Gt.generateMnemonic=l1;const d1=e=>{const t=8-e.length/4;return new Uint8Array([(0,a1.sha256)(e)[0]>>t<<t])};function rp(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(t=>{if(typeof t!="string")throw new Error(`Wordlist: non-string element: ${t}`)}),Vi.utils.chain(Vi.utils.checksum(1,d1),Vi.utils.radix2(11,!0),Vi.utils.alphabet(e))}function sp(e,t){const{words:n}=Pu(e),r=rp(t).decode(n);return np(r),r}Gt.mnemonicToEntropy=sp;function ip(e,t){return np(e),rp(t).encode(e).join(u1(t)?"　":" ")}Gt.entropyToMnemonic=ip;function f1(e,t){try{sp(e,t)}catch{return!1}return!0}Gt.validateMnemonic=f1;const op=e=>tp(`mnemonic${e}`);function h1(e,t=""){return(0,Qh.pbkdf2Async)(ep.sha512,Pu(e).nfkd,op(t),{c:2048,dkLen:64})}Gt.mnemonicToSeed=h1;function p1(e,t=""){return(0,Qh.pbkdf2)(ep.sha512,Pu(e).nfkd,op(t),{c:2048,dkLen:64})}Gt.mnemonicToSeedSync=p1;const g1=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),ap=Uint8Array.from({length:16},(e,t)=>t),y1=ap.map(e=>(9*e+5)%16);let Uu=[ap],qu=[y1];for(let e=0;e<4;e++)for(let t of[Uu,qu])t.push(t[e].map(n=>g1[n]));const cp=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),b1=Uu.map((e,t)=>e.map(n=>cp[t][n])),m1=qu.map((e,t)=>e.map(n=>cp[t][n])),w1=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),_1=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Fi=(e,t)=>e<<t|e>>>32-t;function Vl(e,t,n,r){return e===0?t^n^r:e===1?t&n|~t&r:e===2?(t|~n)^r:e===3?t&r|n&~r:t^(n|~r)}const Wi=new Uint32Array(16);class v1 extends wu{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:n,h2:r,h3:s,h4:i}=this;return[t,n,r,s,i]}set(t,n,r,s,i){this.h0=t|0,this.h1=n|0,this.h2=r|0,this.h3=s|0,this.h4=i|0}process(t,n){for(let g=0;g<16;g++,n+=4)Wi[g]=t.getUint32(n,!0);let r=this.h0|0,s=r,i=this.h1|0,o=i,a=this.h2|0,c=a,u=this.h3|0,d=u,l=this.h4|0,p=l;for(let g=0;g<5;g++){const w=4-g,h=w1[g],y=_1[g],v=Uu[g],m=qu[g],b=b1[g],_=m1[g];for(let T=0;T<16;T++){const x=Fi(r+Vl(g,i,a,u)+Wi[v[T]]+h,b[T])+l|0;r=l,l=u,u=Fi(a,10)|0,a=i,i=x}for(let T=0;T<16;T++){const x=Fi(s+Vl(w,o,c,d)+Wi[m[T]]+y,_[T])+p|0;s=p,p=d,d=Fi(c,10)|0,c=o,o=x}}this.set(this.h1+a+d|0,this.h2+u+p|0,this.h3+l+s|0,this.h4+r+o|0,this.h0+i+c|0)}roundClean(){Wi.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}br(()=>new v1);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const up=BigInt(0),Aa=BigInt(1),T1=BigInt(2),ka=e=>e instanceof Uint8Array,S1=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Bs(e){if(!ka(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=S1[e[n]];return t}function lp(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function Nu(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Is(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(e.length%2)throw new Error("hex string is invalid: unpadded "+e.length);const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=n*2,s=e.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("invalid byte sequence");t[n]=i}return t}function Ct(e){return Nu(Bs(e))}function Du(e){if(!ka(e))throw new Error("Uint8Array expected");return Nu(Bs(Uint8Array.from(e).reverse()))}const hr=(e,t)=>Is(e.toString(16).padStart(t*2,"0")),dp=(e,t)=>hr(e,t).reverse(),x1=e=>Is(lp(e));function pt(e,t,n){let r;if(typeof t=="string")try{r=Is(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(ka(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${e} expected ${n} bytes, got ${s}`);return r}function zt(...e){const t=new Uint8Array(e.reduce((r,s)=>r+s.length,0));let n=0;return e.forEach(r=>{if(!ka(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function A1(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ea(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function k1(e){let t;for(t=0;e>up;e>>=Aa,t+=1);return t}const E1=(e,t)=>e>>BigInt(t)&Aa,B1=(e,t,n)=>e|(n?Aa:up)<<BigInt(t),Mu=e=>(T1<<BigInt(e-1))-Aa,Ka=e=>new Uint8Array(e),Fl=e=>Uint8Array.from(e);function fp(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Ka(e),s=Ka(e),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...l)=>n(s,r,...l),c=(l=Ka())=>{s=a(Fl([0]),l),r=a(),l.length!==0&&(s=a(Fl([1]),l),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const p=[];for(;l<t;){r=a();const g=r.slice();p.push(g),l+=r.length}return zt(...p)};return(l,p)=>{o(),c(l);let g;for(;!(g=p(u()));)c();return o(),g}}const I1={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Ds(e,t,n={}){const r=(s,i,o)=>{const a=I1[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=e[s];if(!(o&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return e}const C1=Object.freeze(Object.defineProperty({__proto__:null,bitGet:E1,bitLen:k1,bitMask:Mu,bitSet:B1,bytesToHex:Bs,bytesToNumberBE:Ct,bytesToNumberLE:Du,concatBytes:zt,createHmacDrbg:fp,ensureBytes:pt,equalBytes:A1,hexToBytes:Is,hexToNumber:Nu,numberToBytesBE:hr,numberToBytesLE:dp,numberToHexUnpadded:lp,numberToVarBytesBE:x1,utf8ToBytes:Ea,validateObject:Ds},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ct=BigInt(0),We=BigInt(1),Er=BigInt(2),O1=BigInt(3),Sc=BigInt(4),Wl=BigInt(5),Kl=BigInt(8);BigInt(9);BigInt(16);function st(e,t){const n=e%t;return n>=ct?n:t+n}function $1(e,t,n){if(n<=ct||t<ct)throw new Error("Expected power/modulo > 0");if(n===We)return ct;let r=We;for(;t>ct;)t&We&&(r=r*e%n),e=e*e%n,t>>=We;return r}function Jt(e,t,n){let r=e;for(;t-- >ct;)r*=r,r%=n;return r}function xc(e,t){if(e===ct||t<=ct)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=st(e,t),r=t,s=ct,i=We;for(;n!==ct;){const a=r/n,c=r%n,u=s-i*a;r=n,n=c,s=i,i=u}if(r!==We)throw new Error("invert: does not exist");return st(s,t)}function R1(e){const t=(e-We)/Er;let n,r,s;for(n=e-We,r=0;n%Er===ct;n/=Er,r++);for(s=Er;s<e&&$1(s,t,e)!==e-We;s++);if(r===1){const o=(e+We)/Sc;return function(c,u){const d=c.pow(u,o);if(!c.eql(c.sqr(d),u))throw new Error("Cannot find square root");return d}}const i=(n+We)/Er;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,d=a.pow(a.mul(a.ONE,s),n),l=a.pow(c,i),p=a.pow(c,n);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let g=1;for(let h=a.sqr(p);g<u&&!a.eql(h,a.ONE);g++)h=a.sqr(h);const w=a.pow(d,We<<BigInt(u-g-1));d=a.sqr(w),l=a.mul(l,w),p=a.mul(p,d),u=g}return l}}function P1(e){if(e%Sc===O1){const t=(e+We)/Sc;return function(r,s){const i=r.pow(s,t);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(e%Kl===Wl){const t=(e-Wl)/Kl;return function(r,s){const i=r.mul(s,Er),o=r.pow(i,t),a=r.mul(s,o),c=r.mul(r.mul(a,Er),o),u=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),s))throw new Error("Cannot find square root");return u}}return R1(e)}const U1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function hp(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=U1.reduce((r,s)=>(r[s]="function",r),t);return Ds(e,n)}function q1(e,t,n){if(n<ct)throw new Error("Expected power > 0");if(n===ct)return e.ONE;if(n===We)return t;let r=e.ONE,s=t;for(;n>ct;)n&We&&(r=e.mul(r,s)),s=e.sqr(s),n>>=We;return r}function N1(e,t){const n=new Array(t.length),r=t.reduce((i,o,a)=>e.is0(o)?i:(n[a]=i,e.mul(i,o)),e.ONE),s=e.inv(r);return t.reduceRight((i,o,a)=>e.is0(o)?i:(n[a]=e.mul(i,n[a]),e.mul(i,o)),s),n}function Lu(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function D1(e,t,n=!1,r={}){if(e<=ct)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:s,nByteLength:i}=Lu(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=P1(e),a=Object.freeze({ORDER:e,BITS:s,BYTES:i,MASK:Mu(s),ZERO:ct,ONE:We,create:c=>st(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return ct<=c&&c<e},is0:c=>c===ct,isOdd:c=>(c&We)===We,neg:c=>st(-c,e),eql:(c,u)=>c===u,sqr:c=>st(c*c,e),add:(c,u)=>st(c+u,e),sub:(c,u)=>st(c-u,e),mul:(c,u)=>st(c*u,e),pow:(c,u)=>q1(a,c,u),div:(c,u)=>st(c*xc(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>xc(c,e),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>N1(a,c),cmov:(c,u,d)=>d?u:c,toBytes:c=>n?dp(c,i):hr(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?Du(c):Ct(c)}});return Object.freeze(a)}function M1(e,t,n=!1){e=pt("privateHash",e);const r=e.length,s=Lu(t).nByteLength+8;if(s<24||r<s||r>1024)throw new Error(`hashToPrivateScalar: expected ${s}-1024 bytes of input, got ${r}`);const i=n?Du(e):Ct(e);return st(i,t-We)+We}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const L1=BigInt(0),Xa=BigInt(1);function j1(e,t){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(t/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=e.ZERO,a=s;for(;i>L1;)i&Xa&&(o=o.add(a)),a=a.double(),i>>=Xa;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let u=s,d=u;for(let l=0;l<o;l++){d=u,c.push(d);for(let p=1;p<a;p++)d=d.add(u),c.push(d);u=d.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let u=e.ZERO,d=e.BASE;const l=BigInt(2**s-1),p=2**s,g=BigInt(s);for(let w=0;w<a;w++){const h=w*c;let y=Number(o&l);o>>=g,y>c&&(y-=p,o+=Xa);const v=h,m=h+Math.abs(y)-1,b=w%2!==0,_=y<0;y===0?d=d.add(n(b,i[v])):u=u.add(n(_,i[m]))}return{p:u,f:d}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let u=i.get(s);return u||(u=this.precomputeWindow(s,c),c!==1&&i.set(s,a(u))),this.wNAF(c,u,o)}}}function pp(e){return hp(e.Fp),Ds(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Lu(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function H1(e){const t=pp(e);Ds(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:G1,hexToBytes:z1}=C1,Pr={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Pr;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:G1(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Pr,n=typeof e=="string"?z1(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=Pr._parseInt(n.subarray(2)),{d:o,l:a}=Pr._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(e){const t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,n=u=>{const d=u.toString(16);return d.length&1?`0${d}`:d},r=t(n(e.s)),s=t(n(e.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},gn=BigInt(0),Ke=BigInt(1),Cn=BigInt(2),Ao=BigInt(3),Xl=BigInt(4);function V1(e){const t=H1(e),{Fp:n}=t,r=t.toBytes||((w,h,y)=>{const v=h.toAffine();return zt(Uint8Array.from([4]),n.toBytes(v.x),n.toBytes(v.y))}),s=t.fromBytes||(w=>{const h=w.subarray(1),y=n.fromBytes(h.subarray(0,n.BYTES)),v=n.fromBytes(h.subarray(n.BYTES,2*n.BYTES));return{x:y,y:v}});function i(w){const{a:h,b:y}=t,v=n.sqr(w),m=n.mul(v,w);return n.add(n.add(m,n.mul(w,h)),y)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&gn<w&&w<t.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(w){const{allowedPrivateKeyLengths:h,nByteLength:y,wrapPrivateKey:v,n:m}=t;if(h&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=Bs(w)),typeof w!="string"||!h.includes(w.length))throw new Error("Invalid key");w=w.padStart(y*2,"0")}let b;try{b=typeof w=="bigint"?w:Ct(pt("private key",w,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof w}`)}return v&&(b=st(b,m)),a(b),b}const u=new Map;function d(w){if(!(w instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(h,y,v){if(this.px=h,this.py=y,this.pz=v,h==null||!n.isValid(h))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(v==null||!n.isValid(v))throw new Error("z required")}static fromAffine(h){const{x:y,y:v}=h||{};if(!h||!n.isValid(y)||!n.isValid(v))throw new Error("invalid affine point");if(h instanceof l)throw new Error("projective point not allowed");const m=b=>n.eql(b,n.ZERO);return m(y)&&m(v)?l.ZERO:new l(y,v,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(h){const y=n.invertBatch(h.map(v=>v.pz));return h.map((v,m)=>v.toAffine(y[m])).map(l.fromAffine)}static fromHex(h){const y=l.fromAffine(s(pt("pointHex",h)));return y.assertValidity(),y}static fromPrivateKey(h){return l.BASE.multiply(c(h))}_setWindowSize(h){this._WINDOW_SIZE=h,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:h,y}=this.toAffine();if(!n.isValid(h)||!n.isValid(y))throw new Error("bad point: x or y not FE");const v=n.sqr(y),m=i(h);if(!n.eql(v,m))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:h}=this.toAffine();if(n.isOdd)return!n.isOdd(h);throw new Error("Field doesn't support isOdd")}equals(h){d(h);const{px:y,py:v,pz:m}=this,{px:b,py:_,pz:T}=h,x=n.eql(n.mul(y,T),n.mul(b,m)),k=n.eql(n.mul(v,T),n.mul(_,m));return x&&k}negate(){return new l(this.px,n.neg(this.py),this.pz)}double(){const{a:h,b:y}=t,v=n.mul(y,Ao),{px:m,py:b,pz:_}=this;let T=n.ZERO,x=n.ZERO,k=n.ZERO,B=n.mul(m,m),D=n.mul(b,b),U=n.mul(_,_),N=n.mul(m,b);return N=n.add(N,N),k=n.mul(m,_),k=n.add(k,k),T=n.mul(h,k),x=n.mul(v,U),x=n.add(T,x),T=n.sub(D,x),x=n.add(D,x),x=n.mul(T,x),T=n.mul(N,T),k=n.mul(v,k),U=n.mul(h,U),N=n.sub(B,U),N=n.mul(h,N),N=n.add(N,k),k=n.add(B,B),B=n.add(k,B),B=n.add(B,U),B=n.mul(B,N),x=n.add(x,B),U=n.mul(b,_),U=n.add(U,U),B=n.mul(U,N),T=n.sub(T,B),k=n.mul(U,D),k=n.add(k,k),k=n.add(k,k),new l(T,x,k)}add(h){d(h);const{px:y,py:v,pz:m}=this,{px:b,py:_,pz:T}=h;let x=n.ZERO,k=n.ZERO,B=n.ZERO;const D=t.a,U=n.mul(t.b,Ao);let N=n.mul(y,b),G=n.mul(v,_),X=n.mul(m,T),le=n.add(y,v),O=n.add(b,_);le=n.mul(le,O),O=n.add(N,G),le=n.sub(le,O),O=n.add(y,m);let q=n.add(b,T);return O=n.mul(O,q),q=n.add(N,X),O=n.sub(O,q),q=n.add(v,m),x=n.add(_,T),q=n.mul(q,x),x=n.add(G,X),q=n.sub(q,x),B=n.mul(D,O),x=n.mul(U,X),B=n.add(x,B),x=n.sub(G,B),B=n.add(G,B),k=n.mul(x,B),G=n.add(N,N),G=n.add(G,N),X=n.mul(D,X),O=n.mul(U,O),G=n.add(G,X),X=n.sub(N,X),X=n.mul(D,X),O=n.add(O,X),N=n.mul(G,O),k=n.add(k,N),N=n.mul(q,O),x=n.mul(le,x),x=n.sub(x,N),N=n.mul(le,G),B=n.mul(q,B),B=n.add(B,N),new l(x,k,B)}subtract(h){return this.add(h.negate())}is0(){return this.equals(l.ZERO)}wNAF(h){return g.wNAFCached(this,u,h,y=>{const v=n.invertBatch(y.map(m=>m.pz));return y.map((m,b)=>m.toAffine(v[b])).map(l.fromAffine)})}multiplyUnsafe(h){const y=l.ZERO;if(h===gn)return y;if(a(h),h===Ke)return this;const{endo:v}=t;if(!v)return g.unsafeLadder(this,h);let{k1neg:m,k1:b,k2neg:_,k2:T}=v.splitScalar(h),x=y,k=y,B=this;for(;b>gn||T>gn;)b&Ke&&(x=x.add(B)),T&Ke&&(k=k.add(B)),B=B.double(),b>>=Ke,T>>=Ke;return m&&(x=x.negate()),_&&(k=k.negate()),k=new l(n.mul(k.px,v.beta),k.py,k.pz),x.add(k)}multiply(h){a(h);let y=h,v,m;const{endo:b}=t;if(b){const{k1neg:_,k1:T,k2neg:x,k2:k}=b.splitScalar(y);let{p:B,f:D}=this.wNAF(T),{p:U,f:N}=this.wNAF(k);B=g.constTimeNegate(_,B),U=g.constTimeNegate(x,U),U=new l(n.mul(U.px,b.beta),U.py,U.pz),v=B.add(U),m=D.add(N)}else{const{p:_,f:T}=this.wNAF(y);v=_,m=T}return l.normalizeZ([v,m])[0]}multiplyAndAddUnsafe(h,y,v){const m=l.BASE,b=(T,x)=>x===gn||x===Ke||!T.equals(m)?T.multiplyUnsafe(x):T.multiply(x),_=b(this,y).add(b(h,v));return _.is0()?void 0:_}toAffine(h){const{px:y,py:v,pz:m}=this,b=this.is0();h==null&&(h=b?n.ONE:n.inv(m));const _=n.mul(y,h),T=n.mul(v,h),x=n.mul(m,h);if(b)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:_,y:T}}isTorsionFree(){const{h,isTorsionFree:y}=t;if(h===Ke)return!0;if(y)return y(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h,clearCofactor:y}=t;return h===Ke?this:y?y(l,this):this.multiplyUnsafe(t.h)}toRawBytes(h=!0){return this.assertValidity(),r(l,this,h)}toHex(h=!0){return Bs(this.toRawBytes(h))}}l.BASE=new l(t.Gx,t.Gy,n.ONE),l.ZERO=new l(n.ZERO,n.ONE,n.ZERO);const p=t.nBitLength,g=j1(l,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function F1(e){const t=pp(e);return Ds(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function W1(e){const t=F1(e),{Fp:n,n:r}=t,s=n.BYTES+1,i=2*n.BYTES+1;function o(O){return gn<O&&O<n.ORDER}function a(O){return st(O,r)}function c(O){return xc(O,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:l,isWithinCurveOrder:p}=V1({...t,toBytes(O,q,z){const ee=q.toAffine(),Y=n.toBytes(ee.x),Se=zt;return z?Se(Uint8Array.from([q.hasEvenY()?2:3]),Y):Se(Uint8Array.from([4]),Y,n.toBytes(ee.y))},fromBytes(O){const q=O.length,z=O[0],ee=O.subarray(1);if(q===s&&(z===2||z===3)){const Y=Ct(ee);if(!o(Y))throw new Error("Point is not on curve");const Se=l(Y);let Ne=n.sqrt(Se);const Oe=(Ne&Ke)===Ke;return(z&1)===1!==Oe&&(Ne=n.neg(Ne)),{x:Y,y:Ne}}else if(q===i&&z===4){const Y=n.fromBytes(ee.subarray(0,n.BYTES)),Se=n.fromBytes(ee.subarray(n.BYTES,2*n.BYTES));return{x:Y,y:Se}}else throw new Error(`Point of length ${q} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),g=O=>Bs(hr(O,t.nByteLength));function w(O){const q=r>>Ke;return O>q}function h(O){return w(O)?a(-O):O}const y=(O,q,z)=>Ct(O.slice(q,z));class v{constructor(q,z,ee){this.r=q,this.s=z,this.recovery=ee,this.assertValidity()}static fromCompact(q){const z=t.nByteLength;return q=pt("compactSignature",q,z*2),new v(y(q,0,z),y(q,z,2*z))}static fromDER(q){const{r:z,s:ee}=Pr.toSig(pt("DER",q));return new v(z,ee)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(q){return new v(this.r,this.s,q)}recoverPublicKey(q){const{r:z,s:ee,recovery:Y}=this,Se=k(pt("msgHash",q));if(Y==null||![0,1,2,3].includes(Y))throw new Error("recovery id invalid");const Ne=Y===2||Y===3?z+t.n:z;if(Ne>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const Oe=Y&1?"03":"02",Je=u.fromHex(Oe+g(Ne)),Ye=c(Ne),Et=a(-Se*Ye),qt=a(ee*Ye),Qe=u.BASE.multiplyAndAddUnsafe(Je,Et,qt);if(!Qe)throw new Error("point at infinify");return Qe.assertValidity(),Qe}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Is(this.toDERHex())}toDERHex(){return Pr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Is(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const m={isValidPrivateKey(O){try{return d(O),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const O=t.randomBytes(n.BYTES+8),q=M1(O,r);return hr(q,t.nByteLength)},precompute(O=8,q=u.BASE){return q._setWindowSize(O),q.multiply(BigInt(3)),q}};function b(O,q=!0){return u.fromPrivateKey(O).toRawBytes(q)}function _(O){const q=O instanceof Uint8Array,z=typeof O=="string",ee=(q||z)&&O.length;return q?ee===s||ee===i:z?ee===2*s||ee===2*i:O instanceof u}function T(O,q,z=!0){if(_(O))throw new Error("first arg must be private key");if(!_(q))throw new Error("second arg must be public key");return u.fromHex(q).multiply(d(O)).toRawBytes(z)}const x=t.bits2int||function(O){const q=Ct(O),z=O.length*8-t.nBitLength;return z>0?q>>BigInt(z):q},k=t.bits2int_modN||function(O){return a(x(O))},B=Mu(t.nBitLength);function D(O){if(typeof O!="bigint")throw new Error("bigint expected");if(!(gn<=O&&O<B))throw new Error(`bigint expected < 2^${t.nBitLength}`);return hr(O,t.nByteLength)}function U(O,q,z=N){if(["recovered","canonical"].some(A=>A in z))throw new Error("sign() legacy options not supported");const{hash:ee,randomBytes:Y}=t;let{lowS:Se,prehash:Ne,extraEntropy:Oe}=z;Se==null&&(Se=!0),O=pt("msgHash",O),Ne&&(O=pt("prehashed msgHash",ee(O)));const Je=k(O),Ye=d(q),Et=[D(Ye),D(Je)];if(Oe!=null){const A=Oe===!0?Y(n.BYTES):Oe;Et.push(pt("extraEntropy",A,n.BYTES))}const qt=zt(...Et),Qe=Je;function Bn(A){const I=x(A);if(!p(I))return;const P=c(I),$=u.BASE.multiply(I).toAffine(),M=a($.x);if(M===gn)return;const L=a(P*a(Qe+M*Ye));if(L===gn)return;let H=($.x===M?0:2)|Number($.y&Ke),W=L;return Se&&w(L)&&(W=h(L),H^=1),new v(M,W,H)}return{seed:qt,k2sig:Bn}}const N={lowS:t.lowS,prehash:!1},G={lowS:t.lowS,prehash:!1};function X(O,q,z=N){const{seed:ee,k2sig:Y}=U(O,q,z);return fp(t.hash.outputLen,t.nByteLength,t.hmac)(ee,Y)}u.BASE._setWindowSize(8);function le(O,q,z,ee=G){var $;const Y=O;if(q=pt("msgHash",q),z=pt("publicKey",z),"strict"in ee)throw new Error("options.strict was renamed to lowS");const{lowS:Se,prehash:Ne}=ee;let Oe,Je;try{if(typeof Y=="string"||Y instanceof Uint8Array)try{Oe=v.fromDER(Y)}catch(M){if(!(M instanceof Pr.Err))throw M;Oe=v.fromCompact(Y)}else if(typeof Y=="object"&&typeof Y.r=="bigint"&&typeof Y.s=="bigint"){const{r:M,s:L}=Y;Oe=new v(M,L)}else throw new Error("PARSE");Je=u.fromHex(z)}catch(M){if(M.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Se&&Oe.hasHighS())return!1;Ne&&(q=t.hash(q));const{r:Ye,s:Et}=Oe,qt=k(q),Qe=c(Et),Bn=a(qt*Qe),A=a(Ye*Qe),I=($=u.BASE.multiplyAndAddUnsafe(Je,Bn,A))==null?void 0:$.toAffine();return I?a(I.x)===Ye:!1}return{CURVE:t,getPublicKey:b,getSharedSecret:T,sign:X,verify:le,ProjectivePoint:u,Signature:v,utils:m}}function K1(e,t){const n=e.ORDER;let r=gn;for(let p=n-Ke;p%Cn===gn;p/=Cn)r+=Ke;const s=r,i=(n-Ke)/Cn**s,o=(i-Ke)/Cn,a=Cn**s-Ke,c=Cn**(s-Ke),u=e.pow(t,i),d=e.pow(t,(i+Ke)/Cn);let l=(p,g)=>{let w=u,h=e.pow(g,a),y=e.sqr(h);y=e.mul(y,g);let v=e.mul(p,y);v=e.pow(v,o),v=e.mul(v,h),h=e.mul(v,g),y=e.mul(v,p);let m=e.mul(y,h);v=e.pow(m,c);let b=e.eql(v,e.ONE);h=e.mul(y,d),v=e.mul(m,w),y=e.cmov(h,y,b),m=e.cmov(v,m,b);for(let _=s;_>Ke;_--){let T=Cn**(_-Cn),x=e.pow(m,T);const k=e.eql(x,e.ONE);h=e.mul(y,w),w=e.mul(w,w),x=e.mul(m,w),y=e.cmov(h,y,k),m=e.cmov(x,m,k)}return{isValid:b,value:y}};if(e.ORDER%Xl===Ao){const p=(e.ORDER-Ao)/Xl,g=e.sqrt(e.neg(t));l=(w,h)=>{let y=e.sqr(h);const v=e.mul(w,h);y=e.mul(y,v);let m=e.pow(y,p);m=e.mul(m,v);const b=e.mul(m,g),_=e.mul(e.sqr(m),h),T=e.eql(_,w);let x=e.cmov(b,m,T);return{isValid:T,value:x}}}return l}function X1(e,t){if(hp(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=K1(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let s,i,o,a,c,u,d,l;s=e.sqr(r),s=e.mul(s,t.Z),i=e.sqr(s),i=e.add(i,s),o=e.add(i,e.ONE),o=e.mul(o,t.B),a=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),a=e.mul(a,t.A),i=e.sqr(o),u=e.sqr(a),c=e.mul(u,t.A),i=e.add(i,c),i=e.mul(i,o),u=e.mul(u,a),c=e.mul(u,t.B),i=e.add(i,c),d=e.mul(s,o);const{isValid:p,value:g}=n(i,u);l=e.mul(s,r),l=e.mul(l,g),d=e.cmov(d,o,p),l=e.cmov(l,g,p);const w=e.isOdd(r)===e.isOdd(l);return l=e.cmov(e.neg(l),l,w),d=e.div(d,a),{x:d,y:l}}}function Z1(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return Ea(e);throw new Error("DST must be Uint8Array or string")}const J1=Ct;function ir(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=e&255,e>>>=8;return new Uint8Array(n)}function Y1(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function yi(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function ju(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Q1(e,t,n,r){yi(e),yi(t),ju(n),t.length>255&&(t=r(zt(Ea("H2C-OVERSIZE-DST-"),t)));const{outputLen:s,blockLen:i}=r,o=Math.ceil(n/s);if(o>255)throw new Error("Invalid xmd length");const a=zt(t,ir(t.length,1)),c=ir(0,i),u=ir(n,2),d=new Array(o),l=r(zt(c,e,u,ir(0,1),a));d[0]=r(zt(l,ir(1,1),a));for(let g=1;g<=o;g++){const w=[Y1(l,d[g-1]),ir(g+1,1),a];d[g]=r(zt(...w))}return zt(...d).slice(0,n)}function e2(e,t,n,r,s){if(yi(e),yi(t),ju(n),t.length>255){const i=Math.ceil(2*r/8);t=s.create({dkLen:i}).update(Ea("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:n}).update(e).update(ir(n,2)).update(t).update(ir(t.length,1)).digest()}function Zl(e,t,n){Ds(n,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:s,m:i,hash:o,expand:a,DST:c}=n;yi(e),ju(t);const u=Z1(c),d=r.toString(2).length,l=Math.ceil((d+s)/8),p=t*i*l;let g;if(a==="xmd")g=Q1(e,u,p,o);else if(a==="xof")g=e2(e,u,p,s,o);else if(a==="_internal_pass")g=e;else throw new Error('expand must be "xmd" or "xof"');const w=new Array(t);for(let h=0;h<t;h++){const y=new Array(i);for(let v=0;v<i;v++){const m=l*(v+h*i),b=g.subarray(m,m+l);y[v]=st(J1(b),r)}w[h]=y}return w}function t2(e,t){const n=t.map(r=>Array.from(r).reverse());return(r,s)=>{const[i,o,a,c]=n.map(u=>u.reduce((d,l)=>e.add(e.mul(d,r),l)));return r=e.div(i,o),s=e.mul(s,e.div(a,c)),{x:r,y:s}}}function n2(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,s){const i=Zl(r,2,{...n,DST:n.DST,...s}),o=e.fromAffine(t(i[0])),a=e.fromAffine(t(i[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,s){const i=Zl(r,1,{...n,DST:n.encodeDST,...s}),o=e.fromAffine(t(i[0])).clearCofactor();return o.assertValidity(),o}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function r2(e){return{hash:e,hmac:(t,...n)=>Iu(e,t,mu(...n)),randomBytes:Pi}}function s2(e,t){const n=r=>W1({...e,...r2(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ba=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ko=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),gp=BigInt(1),Eo=BigInt(2),Jl=(e,t)=>(e+t/Eo)/t;function yp(e){const t=Ba,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,d=u*u*e%t,l=Jt(d,n,t)*d%t,p=Jt(l,n,t)*d%t,g=Jt(p,Eo,t)*u%t,w=Jt(g,s,t)*g%t,h=Jt(w,i,t)*w%t,y=Jt(h,a,t)*h%t,v=Jt(y,c,t)*y%t,m=Jt(v,a,t)*h%t,b=Jt(m,n,t)*d%t,_=Jt(b,o,t)*w%t,T=Jt(_,r,t)*u%t,x=Jt(T,Eo,t);if(!gr.eql(gr.sqr(x),e))throw new Error("Cannot find square root");return x}const gr=D1(Ba,void 0,void 0,{sqrt:yp}),qi=s2({a:BigInt(0),b:BigInt(7),Fp:gr,n:ko,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=ko,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-gp*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=Jl(i*e,t),c=Jl(-r*e,t);let u=st(e-a*n-c*s,t),d=st(-a*r-c*i,t);const l=u>o,p=d>o;if(l&&(u=t-u),p&&(d=t-d),u>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:p,k2:d}}}},kn),Ia=BigInt(0),bp=e=>typeof e=="bigint"&&Ia<e&&e<Ba,i2=e=>typeof e=="bigint"&&Ia<e&&e<ko,Yl={};function Bo(e,...t){let n=Yl[e];if(n===void 0){const r=kn(Uint8Array.from(e,s=>s.charCodeAt(0)));n=zt(r,r),Yl[e]=n}return kn(zt(n,...t))}const Hu=e=>e.toRawBytes(!0).slice(1),Ac=e=>hr(e,32),Za=e=>st(e,Ba),bi=e=>st(e,ko),Gu=qi.ProjectivePoint,o2=(e,t,n)=>Gu.BASE.multiplyAndAddUnsafe(e,t,n);function kc(e){let t=qi.utils.normPrivateKeyToScalar(e),n=Gu.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:bi(-t),bytes:Hu(n)}}function mp(e){if(!bp(e))throw new Error("bad x: need 0 < x < p");const t=Za(e*e),n=Za(t*e+BigInt(7));let r=yp(n);r%Eo!==Ia&&(r=Za(-r));const s=new Gu(e,r,gp);return s.assertValidity(),s}function wp(...e){return bi(Ct(Bo("BIP0340/challenge",...e)))}function a2(e){return kc(e).bytes}function c2(e,t,n=Pi(32)){const r=pt("message",e),{bytes:s,scalar:i}=kc(t),o=pt("auxRand",n,32),a=Ac(i^Ct(Bo("BIP0340/aux",o))),c=Bo("BIP0340/nonce",a,s,r),u=bi(Ct(c));if(u===Ia)throw new Error("sign failed: k is zero");const{bytes:d,scalar:l}=kc(u),p=wp(d,s,r),g=new Uint8Array(64);if(g.set(d,0),g.set(Ac(bi(l+p*i)),32),!_p(g,r,s))throw new Error("sign: Invalid signature produced");return g}function _p(e,t,n){const r=pt("signature",e,64),s=pt("message",t),i=pt("publicKey",n,32);try{const o=mp(Ct(i)),a=Ct(r.subarray(0,32));if(!bp(a))return!1;const c=Ct(r.subarray(32,64));if(!i2(c))return!1;const u=wp(Ac(a),Hu(o),s),d=o2(o,c,bi(-u));return!(!d||!d.hasEvenY()||d.toAffine().x!==a)}catch{return!1}}qi.utils.randomPrivateKey;const u2=t2(gr,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),l2=X1(gr,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:gr.create(BigInt("-11"))});n2(qi.ProjectivePoint,e=>{const{x:t,y:n}=l2(gr.create(e[0]));return u2(t,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:gr.ORDER,m:1,k:128,expand:"xmd",hash:kn});qi.ProjectivePoint;Fc.base58check(kn);bu("Bitcoin seed");var Ql,Ja,Ya=0,Qa=0;function d2(e,t,n){var r=t&&n||0,s=t||new Array(16);e=e||{};var i=e.node||Ql,o=e.clockseq!==void 0?e.clockseq:Ja;if(i==null||o==null){var a=e.random||(e.rng||u0)();i==null&&(i=Ql=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Ja=(a[6]<<8|a[7])&16383)}var c=e.msecs!==void 0?e.msecs:Date.now(),u=e.nsecs!==void 0?e.nsecs:Qa+1,d=c-Ya+(u-Qa)/1e4;if(d<0&&e.clockseq===void 0&&(o=o+1&16383),(d<0||c>Ya)&&e.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ya=c,Qa=u,Ja=o,c+=122192928e5;var l=((c&268435455)*1e4+u)%4294967296;s[r++]=l>>>24&255,s[r++]=l>>>16&255,s[r++]=l>>>8&255,s[r++]=l&255;var p=c/4294967296*1e4&268435455;s[r++]=p>>>8&255,s[r++]=p&255,s[r++]=p>>>24&15|16,s[r++]=p>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var g=0;g<6;++g)s[r+g]=i[g];return t||Wc(s)}function vp(e){if(!Kc(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}function f2(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}var h2="6ba7b810-9dad-11d1-80b4-00c04fd430c8",p2="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Tp(e,t,n){function r(s,i,o,a){if(typeof s=="string"&&(s=f2(s)),typeof i=="string"&&(i=vp(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=n(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,o){a=a||0;for(var u=0;u<16;++u)o[a+u]=c[u];return o}return Wc(c)}try{r.name=e}catch{}return r.DNS=h2,r.URL=p2,r}function g2(e){if(typeof e=="string"){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return y2(b2(m2(e),e.length*8))}function y2(e){for(var t=[],n=e.length*32,r="0123456789abcdef",s=0;s<n;s+=8){var i=e[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(o)}return t}function Sp(e){return(e+64>>>9<<4)+14+1}function b2(e,t){e[t>>5]|=128<<t%32,e[Sp(t)-1]=t;for(var n=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<e.length;o+=16){var a=n,c=r,u=s,d=i;n=wt(n,r,s,i,e[o],7,-680876936),i=wt(i,n,r,s,e[o+1],12,-389564586),s=wt(s,i,n,r,e[o+2],17,606105819),r=wt(r,s,i,n,e[o+3],22,-1044525330),n=wt(n,r,s,i,e[o+4],7,-176418897),i=wt(i,n,r,s,e[o+5],12,1200080426),s=wt(s,i,n,r,e[o+6],17,-1473231341),r=wt(r,s,i,n,e[o+7],22,-45705983),n=wt(n,r,s,i,e[o+8],7,1770035416),i=wt(i,n,r,s,e[o+9],12,-1958414417),s=wt(s,i,n,r,e[o+10],17,-42063),r=wt(r,s,i,n,e[o+11],22,-1990404162),n=wt(n,r,s,i,e[o+12],7,1804603682),i=wt(i,n,r,s,e[o+13],12,-40341101),s=wt(s,i,n,r,e[o+14],17,-1502002290),r=wt(r,s,i,n,e[o+15],22,1236535329),n=_t(n,r,s,i,e[o+1],5,-165796510),i=_t(i,n,r,s,e[o+6],9,-1069501632),s=_t(s,i,n,r,e[o+11],14,643717713),r=_t(r,s,i,n,e[o],20,-373897302),n=_t(n,r,s,i,e[o+5],5,-701558691),i=_t(i,n,r,s,e[o+10],9,38016083),s=_t(s,i,n,r,e[o+15],14,-660478335),r=_t(r,s,i,n,e[o+4],20,-405537848),n=_t(n,r,s,i,e[o+9],5,568446438),i=_t(i,n,r,s,e[o+14],9,-1019803690),s=_t(s,i,n,r,e[o+3],14,-187363961),r=_t(r,s,i,n,e[o+8],20,1163531501),n=_t(n,r,s,i,e[o+13],5,-1444681467),i=_t(i,n,r,s,e[o+2],9,-51403784),s=_t(s,i,n,r,e[o+7],14,1735328473),r=_t(r,s,i,n,e[o+12],20,-1926607734),n=vt(n,r,s,i,e[o+5],4,-378558),i=vt(i,n,r,s,e[o+8],11,-2022574463),s=vt(s,i,n,r,e[o+11],16,1839030562),r=vt(r,s,i,n,e[o+14],23,-35309556),n=vt(n,r,s,i,e[o+1],4,-1530992060),i=vt(i,n,r,s,e[o+4],11,1272893353),s=vt(s,i,n,r,e[o+7],16,-155497632),r=vt(r,s,i,n,e[o+10],23,-1094730640),n=vt(n,r,s,i,e[o+13],4,681279174),i=vt(i,n,r,s,e[o],11,-358537222),s=vt(s,i,n,r,e[o+3],16,-722521979),r=vt(r,s,i,n,e[o+6],23,76029189),n=vt(n,r,s,i,e[o+9],4,-640364487),i=vt(i,n,r,s,e[o+12],11,-421815835),s=vt(s,i,n,r,e[o+15],16,530742520),r=vt(r,s,i,n,e[o+2],23,-995338651),n=Tt(n,r,s,i,e[o],6,-198630844),i=Tt(i,n,r,s,e[o+7],10,1126891415),s=Tt(s,i,n,r,e[o+14],15,-1416354905),r=Tt(r,s,i,n,e[o+5],21,-57434055),n=Tt(n,r,s,i,e[o+12],6,1700485571),i=Tt(i,n,r,s,e[o+3],10,-1894986606),s=Tt(s,i,n,r,e[o+10],15,-1051523),r=Tt(r,s,i,n,e[o+1],21,-2054922799),n=Tt(n,r,s,i,e[o+8],6,1873313359),i=Tt(i,n,r,s,e[o+15],10,-30611744),s=Tt(s,i,n,r,e[o+6],15,-1560198380),r=Tt(r,s,i,n,e[o+13],21,1309151649),n=Tt(n,r,s,i,e[o+4],6,-145523070),i=Tt(i,n,r,s,e[o+11],10,-1120210379),s=Tt(s,i,n,r,e[o+2],15,718787259),r=Tt(r,s,i,n,e[o+9],21,-343485551),n=ar(n,a),r=ar(r,c),s=ar(s,u),i=ar(i,d)}return[n,r,s,i]}function m2(e){if(e.length===0)return[];for(var t=e.length*8,n=new Uint32Array(Sp(t)),r=0;r<t;r+=8)n[r>>5]|=(e[r/8]&255)<<r%32;return n}function ar(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}function w2(e,t){return e<<t|e>>>32-t}function Ca(e,t,n,r,s,i){return ar(w2(ar(ar(t,e),ar(r,i)),s),n)}function wt(e,t,n,r,s,i,o){return Ca(t&n|~t&r,e,t,s,i,o)}function _t(e,t,n,r,s,i,o){return Ca(t&r|n&~r,e,t,s,i,o)}function vt(e,t,n,r,s,i,o){return Ca(t^n^r,e,t,s,i,o)}function Tt(e,t,n,r,s,i,o){return Ca(n^(t|~r),e,t,s,i,o)}var _2=Tp("v3",48,g2);const v2=_2;function T2(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function ec(e,t){return e<<t|e>>>32-t}function S2(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var r=unescape(encodeURIComponent(e));e=[];for(var s=0;s<r.length;++s)e.push(r.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var u=new Uint32Array(16),d=0;d<16;++d)u[d]=e[c*64+d*4]<<24|e[c*64+d*4+1]<<16|e[c*64+d*4+2]<<8|e[c*64+d*4+3];a[c]=u}a[o-1][14]=(e.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(e.length-1)*8&4294967295;for(var l=0;l<o;++l){for(var p=new Uint32Array(80),g=0;g<16;++g)p[g]=a[l][g];for(var w=16;w<80;++w)p[w]=ec(p[w-3]^p[w-8]^p[w-14]^p[w-16],1);for(var h=n[0],y=n[1],v=n[2],m=n[3],b=n[4],_=0;_<80;++_){var T=Math.floor(_/20),x=ec(h,5)+T2(T,y,v,m)+b+t[T]+p[_]>>>0;b=m,m=v,v=ec(y,30)>>>0,y=h,h=x}n[0]=n[0]+h>>>0,n[1]=n[1]+y>>>0,n[2]=n[2]+v>>>0,n[3]=n[3]+m>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var x2=Tp("v5",80,S2);const A2=x2,k2="00000000-0000-0000-0000-000000000000";function E2(e){if(!Kc(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}const B2=Object.freeze(Object.defineProperty({__proto__:null,NIL:k2,parse:vp,stringify:Wc,v1:d2,v3:v2,v4:l0,v5:A2,validate:Kc,version:E2},Symbol.toStringTag,{value:"Module"})),Oa=xi(B2);Oa.v4;Oa.v4;var zu={},mi={},I2={get exports(){return mi},set exports(e){mi=e}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(I2);var Io={},C2={get exports(){return Io},set exports(e){Io=e}},Co={},O2={get exports(){return Co},set exports(e){Co=e}},Oo={},$2={get exports(){return Oo},set exports(e){Oo=e}},ed;function R2(){return ed||(ed=1,function(e){var t=Go.default;function n(r,s){if(t(r)!=="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var o=i.call(r,s||"default");if(t(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}($2)),Oo}var td;function P2(){return td||(td=1,function(e){var t=Go.default,n=R2();function r(s){var i=n(s,"string");return t(i)==="symbol"?i:String(i)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(O2)),Co}var nd;function Vu(){return nd||(nd=1,function(e){var t=P2();function n(s,i){for(var o=0;o<i.length;o++){var a=i[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,t(a.key),a)}}function r(s,i,o){return i&&n(s.prototype,i),o&&n(s,o),Object.defineProperty(s,"prototype",{writable:!1}),s}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(C2)),Io}var $o={},U2={get exports(){return $o},set exports(e){$o=e}},rd;function Fu(){return rd||(rd=1,function(e){function t(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(U2)),$o}var Ro={},q2={get exports(){return Ro},set exports(e){Ro=e}},Po={},N2={get exports(){return Po},set exports(e){Po=e}},sd;function D2(){return sd||(sd=1,function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(N2)),Po}var id;function Wu(){return id||(id=1,function(e){var t=D2();function n(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&t(r,s)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(q2)),Ro}var Uo={},M2={get exports(){return Uo},set exports(e){Uo=e}},qo={},L2={get exports(){return qo},set exports(e){qo=e}},od;function j2(){return od||(od=1,function(e){function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(L2)),qo}var ad;function Ku(){return ad||(ad=1,function(e){var t=Go.default,n=j2();function r(s,i){if(i&&(t(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(s)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(M2)),Uo}var No={},H2={get exports(){return No},set exports(e){No=e}},cd;function Xu(){return cd||(cd=1,function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(H2)),No}var tc={},Do={},G2={get exports(){return Do},set exports(e){Do=e}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,l,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new s(d,l||c,p),w=n?n+u:u;return c._events[w]?c._events[w].fn?c._events[w]=[c._events[w],g]:c._events[w].push(g):(c._events[w]=g,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],d,l;if(this._eventsCount===0)return u;for(l in d=this._events)t.call(d,l)&&u.push(n?l.slice(1):l);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},a.prototype.listeners=function(u){var d=n?n+u:u,l=this._events[d];if(!l)return[];if(l.fn)return[l.fn];for(var p=0,g=l.length,w=new Array(g);p<g;p++)w[p]=l[p].fn;return w},a.prototype.listenerCount=function(u){var d=n?n+u:u,l=this._events[d];return l?l.fn?1:l.length:0},a.prototype.emit=function(u,d,l,p,g,w){var h=n?n+u:u;if(!this._events[h])return!1;var y=this._events[h],v=arguments.length,m,b;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,l),!0;case 4:return y.fn.call(y.context,d,l,p),!0;case 5:return y.fn.call(y.context,d,l,p,g),!0;case 6:return y.fn.call(y.context,d,l,p,g,w),!0}for(b=1,m=new Array(v-1);b<v;b++)m[b-1]=arguments[b];y.fn.apply(y.context,m)}else{var _=y.length,T;for(b=0;b<_;b++)switch(y[b].once&&this.removeListener(u,y[b].fn,void 0,!0),v){case 1:y[b].fn.call(y[b].context);break;case 2:y[b].fn.call(y[b].context,d);break;case 3:y[b].fn.call(y[b].context,d,l);break;case 4:y[b].fn.call(y[b].context,d,l,p);break;default:if(!m)for(T=1,m=new Array(v-1);T<v;T++)m[T-1]=arguments[T];y[b].fn.apply(y[b].context,m)}}return!0},a.prototype.on=function(u,d,l){return i(this,u,d,l,!1)},a.prototype.once=function(u,d,l){return i(this,u,d,l,!0)},a.prototype.removeListener=function(u,d,l,p){var g=n?n+u:u;if(!this._events[g])return this;if(!d)return o(this,g),this;var w=this._events[g];if(w.fn)w.fn===d&&(!p||w.once)&&(!l||w.context===l)&&o(this,g);else{for(var h=0,y=[],v=w.length;h<v;h++)(w[h].fn!==d||p&&!w[h].once||l&&w[h].context!==l)&&y.push(w[h]);y.length?this._events[g]=y.length===1?y[0]:y:o(this,g)}return this},a.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(G2);var ud;function z2(){return ud||(ud=1,function(e){var t=mi;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=t(Fu()),r=t(Vu()),s=t(Wu()),i=t(Ku()),o=t(Xu()),a=Do;function c(p){var g=u();return function(){var h=(0,o.default)(p),y;if(g){var v=(0,o.default)(this).constructor;y=Reflect.construct(h,arguments,v)}else y=h.apply(this,arguments);return(0,i.default)(this,y)}}function u(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var d=function(p){(0,s.default)(w,p);var g=c(w);function w(h,y,v){var m;return(0,n.default)(this,w),m=g.call(this),m.socket=new window.WebSocket(h,v),m.socket.onopen=function(){return m.emit("open")},m.socket.onmessage=function(b){return m.emit("message",b.data)},m.socket.onerror=function(b){return m.emit("error",b)},m.socket.onclose=function(b){m.emit("close",b.code,b.reason)},m}return(0,r.default)(w,[{key:"send",value:function(y,v,m){var b=m||v;try{this.socket.send(y),b()}catch(_){b(_)}}},{key:"close",value:function(y,v){this.socket.close(y,v)}},{key:"addEventListener",value:function(y,v,m){this.socket.addEventListener(y,v,m)}}]),w}(a.EventEmitter);function l(p,g){return new d(p,g)}}(tc)),tc}var nc={},Mo={},V2={get exports(){return Mo},set exports(e){Mo=e}},ld;function F2(){return ld||(ld=1,function(e){function t(r,s,i,o,a,c,u){try{var d=r[c](u),l=d.value}catch(p){i(p);return}d.done?s(l):Promise.resolve(l).then(o,a)}function n(r){return function(){var s=this,i=arguments;return new Promise(function(o,a){var c=r.apply(s,i);function u(l){t(c,o,a,u,d,"next",l)}function d(l){t(c,o,a,u,d,"throw",l)}u(void 0)})}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(V2)),Mo}var dd;function W2(){return dd||(dd=1,function(e){var t=mi;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Xg),r=t(F2()),s=t(Go),i=t(Fu()),o=t(Vu()),a=t(Wu()),c=t(Ku()),u=t(Xu()),d=Do;function l(h){var y=p();return function(){var m=(0,u.default)(h),b;if(y){var _=(0,u.default)(this).constructor;b=Reflect.construct(m,arguments,_)}else b=m.apply(this,arguments);return(0,c.default)(this,b)}}function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var g=function(h,y){var v={};for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&y.indexOf(m)<0&&(v[m]=h[m]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,m=Object.getOwnPropertySymbols(h);b<m.length;b++)y.indexOf(m[b])<0&&Object.prototype.propertyIsEnumerable.call(h,m[b])&&(v[m[b]]=h[m[b]]);return v},w=function(h){(0,a.default)(v,h);var y=l(v);function v(m){var b,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},x=arguments.length>3?arguments[3]:void 0;(0,i.default)(this,v);var k=T.autoconnect,B=k===void 0?!0:k,D=T.reconnect,U=D===void 0?!0:D,N=T.reconnect_interval,G=N===void 0?1e3:N,X=T.max_reconnects,le=X===void 0?5:X,O=g(T,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return b=y.call(this),b.webSocketFactory=m,b.queue={},b.rpc_id=0,b.address=_,b.autoconnect=B,b.ready=!1,b.reconnect=U,b.reconnect_timer_id=void 0,b.reconnect_interval=G,b.max_reconnects=le,b.rest_options=O,b.current_reconnects=0,b.generate_request_id=x||function(){return++b.rpc_id},b.autoconnect&&b._connect(b.address,Object.assign({autoconnect:b.autoconnect,reconnect:b.reconnect,reconnect_interval:b.reconnect_interval,max_reconnects:b.max_reconnects},b.rest_options)),b}return(0,o.default)(v,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(b,_,T,x){var k=this;return!x&&(0,s.default)(T)==="object"&&(x=T,T=null),new Promise(function(B,D){if(!k.ready)return D(new Error("socket not ready"));var U=k.generate_request_id(b,_),N={jsonrpc:"2.0",method:b,params:_||null,id:U};k.socket.send(JSON.stringify(N),x,function(G){if(G)return D(G);k.queue[U]={promise:[B,D]},T&&(k.queue[U].timeout=setTimeout(function(){delete k.queue[U],D(new Error("reply timeout"))},T))})})}},{key:"login",value:function(){var m=(0,r.default)(n.default.mark(function _(T){var x;return n.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this.call("rpc.login",T);case 2:if(x=B.sent,x){B.next=5;break}throw new Error("authentication failed");case 5:return B.abrupt("return",x);case 6:case"end":return B.stop()}},_,this)}));function b(_){return m.apply(this,arguments)}return b}()},{key:"listMethods",value:function(){var m=(0,r.default)(n.default.mark(function _(){return n.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.call("__listMethods");case 2:return x.abrupt("return",x.sent);case 3:case"end":return x.stop()}},_,this)}));function b(){return m.apply(this,arguments)}return b}()},{key:"notify",value:function(b,_){var T=this;return new Promise(function(x,k){if(!T.ready)return k(new Error("socket not ready"));var B={jsonrpc:"2.0",method:b,params:_||null};T.socket.send(JSON.stringify(B),function(D){if(D)return k(D);x()})})}},{key:"subscribe",value:function(){var m=(0,r.default)(n.default.mark(function _(T){var x;return n.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return typeof T=="string"&&(T=[T]),B.next=3,this.call("rpc.on",T);case 3:if(x=B.sent,!(typeof T=="string"&&x[T]!=="ok")){B.next=6;break}throw new Error("Failed subscribing to an event '"+T+"' with: "+x[T]);case 6:return B.abrupt("return",x);case 7:case"end":return B.stop()}},_,this)}));function b(_){return m.apply(this,arguments)}return b}()},{key:"unsubscribe",value:function(){var m=(0,r.default)(n.default.mark(function _(T){var x;return n.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return typeof T=="string"&&(T=[T]),B.next=3,this.call("rpc.off",T);case 3:if(x=B.sent,!(typeof T=="string"&&x[T]!=="ok")){B.next=6;break}throw new Error("Failed unsubscribing from an event with: "+x);case 6:return B.abrupt("return",x);case 7:case"end":return B.stop()}},_,this)}));function b(_){return m.apply(this,arguments)}return b}()},{key:"close",value:function(b,_){this.socket.close(b||1e3,_)}},{key:"_connect",value:function(b,_){var T=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(b,_),this.socket.addEventListener("open",function(){T.ready=!0,T.emit("open"),T.current_reconnects=0}),this.socket.addEventListener("message",function(x){var k=x.data;k instanceof ArrayBuffer&&(k=Buffer.from(k).toString());try{k=JSON.parse(k)}catch{return}if(k.notification&&T.listeners(k.notification).length){if(!Object.keys(k.params).length)return T.emit(k.notification);var B=[k.notification];if(k.params.constructor===Object)B.push(k.params);else for(var D=0;D<k.params.length;D++)B.push(k.params[D]);return Promise.resolve().then(function(){T.emit.apply(T,B)})}if(!T.queue[k.id])return k.method&&k.params?Promise.resolve().then(function(){T.emit(k.method,k.params)}):void 0;"error"in k=="result"in k&&T.queue[k.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),T.queue[k.id].timeout&&clearTimeout(T.queue[k.id].timeout),k.error?T.queue[k.id].promise[1](k.error):T.queue[k.id].promise[0](k.result),delete T.queue[k.id]}),this.socket.addEventListener("error",function(x){return T.emit("error",x)}),this.socket.addEventListener("close",function(x){var k=x.code,B=x.reason;T.ready&&setTimeout(function(){return T.emit("close",k,B)},0),T.ready=!1,T.socket=void 0,k!==1e3&&(T.current_reconnects++,T.reconnect&&(T.max_reconnects>T.current_reconnects||T.max_reconnects===0)&&(T.reconnect_timer_id=setTimeout(function(){return T._connect(b,_)},T.reconnect_interval)))})}}]),v}(d.EventEmitter);e.default=w}(nc)),nc}var Qr=mi;Object.defineProperty(zu,"__esModule",{value:!0});var xp=zu.Client=void 0,K2=Qr(Vu()),X2=Qr(Fu()),Z2=Qr(Wu()),J2=Qr(Ku()),fd=Qr(Xu()),Y2=Qr(z2()),Q2=Qr(W2());function eT(e){var t=tT();return function(){var r=(0,fd.default)(e),s;if(t){var i=(0,fd.default)(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return(0,J2.default)(this,s)}}function tT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var nT=function(e){(0,Z2.default)(n,e);var t=eT(n);function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ws://localhost:8080",s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.autoconnect,o=i===void 0?!0:i,a=s.reconnect,c=a===void 0?!0:a,u=s.reconnect_interval,d=u===void 0?1e3:u,l=s.max_reconnects,p=l===void 0?5:l,g=arguments.length>2?arguments[2]:void 0;return(0,X2.default)(this,n),t.call(this,Y2.default,r,{autoconnect:o,reconnect:c,reconnect_interval:d,max_reconnects:p},g)}return(0,K2.default)(n)}(Q2.default);xp=zu.Client=nT;var Zu=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},$e=(e,t,n)=>(Zu(e,t,"read from private field"),n?n.call(e):t.get(e)),Ws=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ks=(e,t,n,r)=>(Zu(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Xs=(e,t,n)=>(Zu(e,t,"access private method"),n),Kt=f(),rT=f(),sT=f(),ke=f(),$t=f(),Pt=f(),mr=Z([S({AddressOwner:$t}),S({ObjectOwner:$t}),S({Shared:S({initial_shared_version:V()})}),j("Immutable")]),iT=kt("SuiJsonValue",()=>!0),Ap=32;function oT(e){return aT(e)&&cT(e)===Ap}function bn(e,t=!1){let n=e.toLowerCase();return!t&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(Ap*2,"0")}`}function wi(e,t=!1){return bn(e,t)}function aT(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function cT(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}Z([f(),j("package")]);var Sn=S({digest:Kt,objectId:f(),version:Z([V(),f()])}),uT=S({payment:C(Sn),owner:f(),price:f(),budget:f()}),lT=ot(Sn,S({type:f(),owner:mr,previousTransaction:Kt})),dT=ut(f(),mt()),fT=ut(f(),f()),kp=S({type:f(),fields:dT,hasPublicTransfer:se()}),Ec=S({disassembled:fT}),hT=Z([ot(kp,S({dataType:j("moveObject")})),ot(Ec,S({dataType:j("package")}))]);S({type:f(),hasPublicTransfer:se(),version:Pt,bcsBytes:C(V())});var pT=S({id:ke,moduleMap:ut(f(),f())}),gT=Z([ot(kp,S({dataType:j("moveObject")})),ot(pT,S({dataType:j("package")}))]);BigInt(1e9);var es=f(),Ep=S({code:f(),error:R(f()),object_id:R(ke),version:R(Pt),digest:R(es)}),yT=S({data:re(ut(f(),f())),error:re(Ep)}),bT=Z([yT,R(ut(f(),f()))]),mT=S({objectId:ke,version:Pt,digest:es,type:R(f()),content:R(hT),bcs:R(gT),owner:R(mr),previousTransaction:R(Kt),storageRebate:R(f()),display:R(bT)});S({showType:R(se()),showContent:R(se()),showBcs:R(se()),showOwner:R(se()),showPreviousTransaction:R(se()),showStorageRebate:R(se()),showDisplay:R(se())});Z([j("Exists"),j("notExists"),j("Deleted")]);C(lT);var wT=S({data:R(mT),error:R(Ep)});function Bp(e){return e.data}function _T(e){if(e.error&&"object_id"in e.error&&"version"in e.error&&"digest"in e.error){const t=e.error;return{objectId:t.object_id,version:t.version,digest:t.digest}}}function vT(e){if("reference"in e)return e.reference;const t=Bp(e);return t?{objectId:t.objectId,version:t.version,digest:t.digest}:_T(e)}function TT(e){var t;return Ue(e,mr)?e:(t=Bp(e))==null?void 0:t.owner}function ST(e){const t=TT(e);if(typeof t=="object"&&"Shared"in t)return t.Shared.initial_shared_version}var xT=S({objectId:ke,atCheckpoint:R(V())});S({data:C(wT),nextCursor:Z([re(ke),re(xT)]),hasNextPage:se()});var Ip=S({txDigest:Kt,eventSeq:Pt}),Ju=S({id:Ip,packageId:ke,transactionModule:f(),sender:$t,type:f(),parsedJson:R(ut(f(),mt())),bcs:R(f()),timestampMs:R(f())});S({data:C(Ju),nextCursor:re(Ip),hasNextPage:se()});var AT=V();S({subscription:AT,result:Ju});var Hr=f(),kT=S({epoch:Hr,storage_charge:f(),computation_charge:f(),storage_rebate:f(),epoch_start_timestamp_ms:R(f())}),ET=S({epoch:Hr,round:f(),commit_timestamp_ms:f()}),BT=S({objects:C(ke)}),vn=Z([j("GasCoin"),S({Input:V()}),S({Result:V()}),S({NestedResult:Le([V(),V()])})]),IT=S({arguments:R(C(vn)),type_arguments:R(C(f())),package:ke,module:f(),function:f()}),CT=Z([S({MoveCall:IT}),S({TransferObjects:Le([C(vn),vn])}),S({SplitCoins:Le([vn,C(vn)])}),S({MergeCoins:Le([vn,C(vn)])}),S({Publish:Le([Ec,C(ke)])}),S({Upgrade:Le([Ec,C(ke),ke,vn])}),S({MakeMoveVec:Le([re(f()),C(vn)])})]),OT=Z([S({type:j("pure"),valueType:R(f()),value:iT}),S({type:j("object"),objectType:j("immOrOwnedObject"),objectId:ke,version:Pt,digest:es}),S({type:j("object"),objectType:j("sharedObject"),objectId:ke,initialSharedVersion:Pt,mutable:se()})]),$T=S({transactions:C(CT),inputs:C(OT)}),RT=Z([ot(kT,S({kind:j("ChangeEpoch")})),ot(ET,S({kind:j("ConsensusCommitPrologue")})),ot(BT,S({kind:j("Genesis")})),ot($T,S({kind:j("ProgrammableTransaction")}))]),Cp=S({messageVersion:j("v1"),transaction:RT,sender:$t,gasData:uT}),hd=f(),PT=Z([hd,C(hd)]);S({epoch:Hr,signature:PT,signers_map:C(V())});var UT=S({computationCost:f(),storageCost:f(),storageRebate:f(),nonRefundableStorageFee:f()}),qT=Z([j("success"),j("failure")]),NT=S({status:qT,error:R(f())}),Ki=S({owner:mr,reference:Sn}),DT=S({objectId:ke,sequenceNumber:Pt}),Yu=S({messageVersion:j("v1"),status:NT,executedEpoch:Hr,modifiedAtVersions:R(C(DT)),gasUsed:UT,sharedObjects:R(C(Sn)),transactionDigest:Kt,created:R(C(Ki)),mutated:R(C(Ki)),unwrapped:R(C(Ki)),deleted:R(C(Sn)),unwrapped_then_deleted:R(C(Sn)),wrapped:R(C(Sn)),gasObject:Ki,eventsDigest:R(sT),dependencies:R(C(Kt))}),Qu=C(Ju),MT=Le([C(V()),f()]),LT=Le([vn,C(V()),f()]),jT=S({mutableReferenceOutputs:R(C(LT)),returnValues:R(C(MT))});S({effects:Yu,events:Qu,results:R(C(jT)),error:R(f())});var HT=f(),GT=S({data:Cp,txSignatures:C(f())}),zT=S({type:j("published"),packageId:ke,version:Pt,digest:es,modules:C(f())}),VT=S({type:j("transferred"),sender:$t,recipient:mr,objectType:f(),objectId:ke,version:Pt,digest:es}),FT=S({type:j("mutated"),sender:$t,owner:mr,objectType:f(),objectId:ke,version:Pt,previousVersion:Pt,digest:es}),WT=S({type:j("deleted"),sender:$t,objectType:f(),objectId:ke,version:Pt}),KT=S({type:j("wrapped"),sender:$t,objectType:f(),objectId:ke,version:Pt}),XT=S({type:j("created"),sender:$t,owner:mr,objectType:f(),objectId:ke,version:Pt,digest:es}),Op=Z([zT,VT,FT,WT,KT,XT]),$p=S({owner:mr,coinType:f(),amount:f()}),ZT=S({digest:Kt,transaction:R(GT),effects:R(Yu),events:R(Qu),timestampMs:R(f()),checkpoint:R(f()),confirmedLocalExecution:R(se()),objectChanges:R(C(Op)),balanceChanges:R(C($p)),errors:R(C(f()))});S({showInput:R(se()),showEffects:R(se()),showEvents:R(se()),showObjectChanges:R(se()),showBalanceChanges:R(se())});S({data:C(ZT),nextCursor:re(Kt),hasNextPage:se()});S({effects:Yu,events:Qu,objectChanges:C(Op),balanceChanges:C($p),input:R(Cp)});var Rp="0x2",el="0x1",JT="object",YT="ID",QT=`${Rp}::sui::SUI`;wi("0x6");S({decimals:V(),name:f(),symbol:f(),description:f(),iconUrl:re(f()),id:re(ke)});function eS(e){e.registerType("utf8string",(t,n)=>{const r=Array.from(new TextEncoder().encode(n));return t.writeVec(r,(s,i)=>s.write8(i))},t=>{let n=t.readVec(r=>r.read8());return new TextDecoder().decode(new Uint8Array(n))})}var as="vector",tS={kind:"TransactionKind",sender:F.ADDRESS,gasData:"GasData",expiration:"TransactionExpiration"},nS={enums:{"Option<T>":{None:null,Some:"T"},ObjectArg:{ImmOrOwned:"SuiObjectRef",Shared:"SharedObjectRef"},CallArg:{Pure:[as,F.U8],Object:"ObjectArg",ObjVec:[as,"ObjectArg"]},TypeTag:{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:"TypeTag",struct:"StructTag",u16:null,u32:null,u256:null},TransactionKind:{ProgrammableTransaction:"ProgrammableTransaction",ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null},TransactionExpiration:{None:null,Epoch:F.U64},TransactionData:{V1:"TransactionDataV1"}},structs:{SuiObjectRef:{objectId:F.ADDRESS,version:F.U64,digest:"ObjectDigest"},SharedObjectRef:{objectId:F.ADDRESS,initialSharedVersion:F.U64,mutable:F.BOOL},StructTag:{address:F.ADDRESS,module:F.STRING,name:F.STRING,typeParams:[as,"TypeTag"]},GasData:{payment:[as,"SuiObjectRef"],owner:F.ADDRESS,price:F.U64,budget:F.U64},SenderSignedData:{data:"TransactionData",txSignatures:[as,[as,F.U8]]},TransactionDataV1:tS},aliases:{ObjectDigest:F.BASE58}},Pp=new F({...Sh(),types:nS});eS(Pp);var rS=S({amount:V(),id:ke,transferTxDigest:Kt});S({transferredGasObjects:C(rS),error:re(f())});var sS=Z([f(),S({Object:f()})]);C(sS);var iS=S({address:f(),name:f()}),oS=Z([j("Private"),j("Public"),j("Friend")]),tl=S({abilities:C(f())}),aS=S({constraints:tl,isPhantom:se()}),cS=S({TypeParameter:V()});function Up(e){if(!e)return!1;if(typeof e=="string"||Ue(e,cS)||qp(e))return!0;if(typeof e!="object")return!1;const t=e;return!!(Ue(t.Reference,bs)||Ue(t.MutableReference,bs)||Ue(t.Vector,bs))}var bs=kt("SuiMoveNormalizedType",Up);function qp(e){if(!e||typeof e!="object")return!1;const t=e;if(!t.Struct||typeof t.Struct!="object")return!1;const n=t.Struct;return!(typeof n.address!="string"||typeof n.module!="string"||typeof n.name!="string"||!Array.isArray(n.typeArguments)||!n.typeArguments.every(r=>Up(r)))}kt("SuiMoveNormalizedStructType",qp);var uS=S({visibility:oS,isEntry:se(),typeParameters:C(tl),parameters:C(bs),return:C(bs)}),lS=S({name:f(),type:bs}),dS=S({abilities:tl,typeParameters:C(aS),fields:C(lS)}),fS=S({fileFormatVersion:V(),address:f(),name:f(),friends:C(iS),structs:ut(f(),dS),exposedFunctions:ut(f(),uS)});ut(f(),fS);function Np(e){return typeof e=="object"&&"MutableReference"in e?e.MutableReference:void 0}function hS(e){return typeof e=="object"&&"Reference"in e?e.Reference:void 0}function Dp(e){if(typeof e=="object"&&"Struct"in e)return e;const t=hS(e),n=Np(e);if(typeof t=="object"&&"Struct"in t)return t;if(typeof n=="object"&&"Struct"in n)return n}S({value:V()});var pS=S({stakedSuiId:ke,stakeRequestEpoch:Hr,stakeActiveEpoch:Hr,principal:f(),status:Z([j("Active"),j("Pending"),j("Unstaked")]),estimatedReward:R(V())});S({validatorAddress:$t,stakingPool:ke,stakes:C(pS)});var gS=S({balance:S({value:V()}),distribution_counter:V(),current_distribution_amount:V(),stake_subsidy_period_length:V(),stake_subsidy_decrease_rate:V()});S({type:f(),fields:gS});S({value:V()});var yS=S({id:f(),size:V(),head:S({vec:C()}),tail:S({vec:C()})});S({id:f(),size:V()});S({type:f(),fields:yS});var bS=S({exchangeRates:S({id:f(),size:V()}),id:f(),pendingStake:V(),pendingPoolTokenWithdraw:V(),pendingTotalSuiWithdraw:V(),poolTokenBalance:V(),rewardsPool:S({value:V()}),activationEpoch:S({vec:C()}),deactivationEpoch:S({vec:C()}),suiBalance:V()});S({type:f(),fields:bS});var mS=C(Le([HT,f()]));S({epoch:Hr,validators:mS});var Mp=S({suiAddress:$t,protocolPubkeyBytes:f(),networkPubkeyBytes:f(),workerPubkeyBytes:f(),proofOfPossessionBytes:f(),operationCapId:f(),name:f(),description:f(),imageUrl:f(),projectUrl:f(),p2pAddress:f(),netAddress:f(),primaryAddress:f(),workerAddress:f(),nextEpochProtocolPubkeyBytes:re(f()),nextEpochProofOfPossession:re(f()),nextEpochNetworkPubkeyBytes:re(f()),nextEpochWorkerPubkeyBytes:re(f()),nextEpochNetAddress:re(f()),nextEpochP2pAddress:re(f()),nextEpochPrimaryAddress:re(f()),nextEpochWorkerAddress:re(f()),votingPower:f(),gasPrice:f(),commissionRate:f(),nextEpochStake:f(),nextEpochGasPrice:f(),nextEpochCommissionRate:f(),stakingPoolId:f(),stakingPoolActivationEpoch:re(f()),stakingPoolDeactivationEpoch:re(f()),stakingPoolSuiBalance:f(),rewardsPool:f(),poolTokenBalance:f(),pendingStake:f(),pendingPoolTokenWithdraw:f(),pendingTotalSuiWithdraw:f(),exchangeRatesId:f(),exchangeRatesSize:f()});S({epoch:f(),protocolVersion:f(),systemStateVersion:f(),storageFundTotalObjectStorageRebates:f(),storageFundNonRefundableBalance:f(),referenceGasPrice:f(),safeMode:se(),safeModeStorageRewards:f(),safeModeComputationRewards:f(),safeModeStorageRebates:f(),safeModeNonRefundableStorageFee:f(),epochStartTimestampMs:f(),epochDurationMs:f(),stakeSubsidyStartEpoch:f(),maxValidatorCount:f(),minValidatorJoiningStake:f(),validatorLowStakeThreshold:f(),validatorVeryLowStakeThreshold:f(),validatorLowStakeGracePeriod:f(),stakeSubsidyBalance:f(),stakeSubsidyDistributionCounter:f(),stakeSubsidyCurrentDistributionAmount:f(),stakeSubsidyPeriodLength:f(),stakeSubsidyDecreaseRate:V(),totalStake:f(),activeValidators:C(Mp),pendingActiveValidatorsId:f(),pendingActiveValidatorsSize:f(),pendingRemovals:C(f()),stakingPoolMappingsId:f(),stakingPoolMappingsSize:f(),inactivePoolsId:f(),inactivePoolsSize:f(),validatorCandidatesId:f(),validatorCandidatesSize:f(),atRiskValidators:C(Le([$t,f()])),validatorReportRecords:C(Le([$t,C($t)]))});var wS=S({coinType:f(),coinObjectId:ke,version:f(),digest:Kt,balance:f(),lockedUntilEpoch:re(V()),previousTransaction:Kt});S({data:C(wS),nextCursor:re(ke),hasNextPage:se()});S({coinType:f(),coinObjectCount:V(),totalBalance:f(),lockedBalance:S({epochId:R(V()),number:R(V())})});S({value:f()});var _S=S({computationCost:f(),storageCost:f(),storageRebate:f(),nonRefundableStorageFee:f()});f();var pd=f();S({digest:C(V())});var Lp=mt(),vS=f(),TS=S({nextEpochCommittee:C(Le([f(),f()])),nextEpochProtocolVersion:f(),epochCommitments:C(Lp)});S({transaction:Kt,effects:rT});var SS=S({epoch:f(),sequenceNumber:f(),digest:pd,networkTotalTransactions:f(),previousDigest:R(pd),epochRollingGasCostSummary:_S,timestampMs:f(),endOfEpochData:R(TS),validatorSignature:R(vS),transactions:C(Kt),checkpointCommitments:C(Lp)});S({data:C(SS),nextCursor:re(f()),hasNextPage:se()});S({jsonrpc:j("2.0"),id:f(),result:mt()});S({jsonrpc:j("2.0"),id:f(),error:S({code:mt(),message:f(),data:R(mt())})});var xS=Z([j("DynamicField"),j("DynamicObject")]),AS=S({type:f(),value:mt()}),kS=S({name:AS,bcsName:f(),type:xS,objectType:f(),objectId:ke,version:V(),digest:f()});S({data:C(kS),nextCursor:re(ke),hasNextPage:se()});var xr,nl=class{constructor(t){Ws(this,xr,void 0),Ks(this,xr,t)}get fullnode(){return $e(this,xr).fullnode}get websocket(){return $e(this,xr).websocket||$e(this,xr).fullnode}get faucet(){return $e(this,xr).faucet}};xr=new WeakMap;new nl({fullnode:"http://127.0.0.1:9000",faucet:"http://127.0.0.1:9123/gas"});new nl({fullnode:"https://fullnode.devnet.sui.io:443/",faucet:"https://faucet.devnet.sui.io/gas"});new nl({fullnode:"https://fullnode.testnet.sui.io:443/",faucet:"https://faucet.testnet.sui.io/gas"});function Dt(e,t){return vu(e,t)}var Lo=Symbol("transaction-argument-type"),ES=e=>Z([S({None:j(null)}),S({Some:e})]),_i=S({kind:j("Input"),index:yt(),value:R(mt()),type:R(Z([j("pure"),j("object")]))}),rl=[_i,S({kind:j("GasCoin")}),S({kind:j("Result"),index:yt()}),S({kind:j("NestedResult"),index:yt(),resultIndex:yt()})],BS=Z([...rl]),Gr=Z([...rl]);Gr[Lo]={kind:"object"};var jp=e=>{const t=Z([...rl]);return t[Lo]={kind:"pure",type:e},t},Hp=S({kind:j("MoveCall"),target:kt("target",f().validator),typeArguments:C(f()),arguments:C(BS)}),Gp=S({kind:j("TransferObjects"),objects:C(Gr),address:jp(F.ADDRESS)}),zp=S({kind:j("SplitCoins"),coin:Gr,amounts:C(jp("u64"))}),Vp=S({kind:j("MergeCoins"),destination:Gr,sources:C(Gr)}),Fp=S({kind:j("MakeMoveVec"),type:R(ES(f())),objects:C(Gr)}),Wp=S({kind:j("Publish"),modules:C(C(yt())),dependencies:C(ke)}),Kp=S({kind:j("Upgrade"),modules:C(C(yt())),dependencies:C(ke),packageId:ke,ticket:Gr}),Xp=[Hp,Gp,zp,Vp,Wp,Kp,Fp],Zp=Z([...Xp]);function IS(e){return jr(e,Zp),Xp.find(t=>Ue(e,t))}var nr={MoveCall(e){return Dt({kind:"MoveCall",target:e.target,arguments:e.arguments??[],typeArguments:e.typeArguments??[]},Hp)},TransferObjects(e,t){return Dt({kind:"TransferObjects",objects:e,address:t},Gp)},SplitCoins(e,t){return Dt({kind:"SplitCoins",coin:e,amounts:t},zp)},MergeCoins(e,t){return Dt({kind:"MergeCoins",destination:e,sources:t},Vp)},Publish({modules:e,dependencies:t}){return Dt({kind:"Publish",modules:e.map(n=>typeof n=="string"?Array.from(Hn(n)):n),dependencies:t.map(n=>wi(n))},Wp)},Upgrade({modules:e,dependencies:t,packageId:n,ticket:r}){return Dt({kind:"Upgrade",modules:e.map(s=>typeof s=="string"?Array.from(Hn(s)):s),dependencies:t.map(s=>wi(s)),packageId:n,ticket:r},Kp)},MakeMoveVec({type:e,objects:t}){return Dt({kind:"MakeMoveVec",type:e?{Some:e}:{None:null},objects:t},Fp)}},CS=/^vector<(.+)>$/,OS=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,Br=class{static parseFromStr(t,n=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};const r=t.match(CS);if(r)return{vector:Br.parseFromStr(r[1],n)};const s=t.match(OS);if(s)return{struct:{address:n?bn(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:Br.parseStructTypeArgs(s[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,n=!1){const r=[];let s="",i=0;for(let o=0;o<t.length;o++){const a=t[o];if(a==="<"&&i++,a===">"&&i--,i===0&&a===","){r.push(s.trim()),s="";continue}s+=a}return r.push(s.trim()),r.map(o=>Br.parseFromStr(o,n))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${Br.tagToString(t.vector)}>`;if("struct"in t){const n=t.struct,r=n.typeParams.map(Br.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${r?`<${r}>`:""}`}throw new Error("Invalid TypeTag")}},Jp="Argument",Ot="vector",$S="Option",RS="CallArg",gd="TypeTag",PS="ProgrammableTransaction",Bc="ProgrammableMoveCall",Yp="Transaction",sl="EnumKind",US=[sl,Yp],On=[sl,Jp],Qp="SimpleProgrammableMoveCall",cr=new F(Pp).registerStructType(PS,{inputs:[Ot,RS],transactions:[Ot,US]}).registerEnumType(Jp,{GasCoin:null,Input:{index:F.U16},Result:{index:F.U16},NestedResult:{index:F.U16,resultIndex:F.U16}}).registerStructType(Bc,{package:F.ADDRESS,module:F.STRING,function:F.STRING,type_arguments:[Ot,gd],arguments:[Ot,On]}).registerEnumType(Yp,{MoveCall:Qp,TransferObjects:{objects:[Ot,On],address:On},SplitCoins:{coin:On,amounts:[Ot,On]},MergeCoins:{destination:On,sources:[Ot,On]},Publish:{modules:[Ot,[Ot,F.U8]],dependencies:[Ot,F.ADDRESS]},MakeMoveVec:{type:[$S,gd],objects:[Ot,On]},Upgrade:{modules:[Ot,[Ot,F.U8]],dependencies:[Ot,F.ADDRESS],packageId:F.ADDRESS,ticket:On}});cr.registerType([sl,"T"],function(t,n,r,s){const o={[n.kind]:n},[a]=r;return this.getTypeInterface(a)._encodeRaw.call(this,t,o,r,s)},function(t,n,r){const[s]=n,i=this.getTypeInterface(s)._decodeRaw.call(this,t,n,r),o=Object.keys(i)[0];return{kind:o,...i[o]}},e=>{if(typeof e!="object"&&!("kind"in e))throw new Error(`EnumKind: Missing property "kind" in the input ${JSON.stringify(e)}`);return!0});cr.registerType(Qp,function(t,n,r,s){const[i,o,a]=n.target.split("::"),c=n.typeArguments.map(u=>Br.parseFromStr(u,!0));return this.getTypeInterface(Bc)._encodeRaw.call(this,t,{package:bn(i),module:o,function:a,type_arguments:c,arguments:n.arguments},r,s)},function(t,n,r){let s=cr.getTypeInterface(Bc)._decodeRaw.call(this,t,n,r);return{target:[s.package,s.module,s.function].join("::"),arguments:s.arguments,typeArguments:s.type_arguments.map(Br.tagToString)}},e=>e.target.split("::").length===3);var qS=Z([S({ImmOrOwned:Sn}),S({Shared:S({objectId:f(),initialSharedVersion:Z([yt(),f()]),mutable:se()})})]),Ic=S({Pure:C(yt())}),NS=S({Object:qS}),oi=Z([Ic,NS]),Un={Pure(e,t){return{Pure:Array.from(e instanceof Uint8Array?e:cr.ser(t,e).toBytes())}},ObjectRef({objectId:e,digest:t,version:n}){return{Object:{ImmOrOwned:{digest:t,version:n,objectId:bn(e)}}}},SharedObjectRef({objectId:e,mutable:t,initialSharedVersion:n}){return{Object:{Shared:{mutable:t,initialSharedVersion:n,objectId:bn(e)}}}}};function yd(e){return typeof e=="string"?bn(e):"ImmOrOwned"in e.Object?bn(e.Object.ImmOrOwned.objectId):bn(e.Object.Shared.objectId)}function DS(e){return typeof e=="object"&&"Object"in e&&"Shared"in e.Object?e.Object.Shared:void 0}function MS(e){var t;return((t=DS(e))==null?void 0:t.mutable)??!1}var LS="ascii",jS="String",HS="string",GS="String",zS="option",VS="Option",FS={address:Rp,module:JT,name:YT},WS={address:el,module:LS,name:jS},KS={address:el,module:HS,name:GS},XS={address:el,module:zS,name:VS},Xi=(e,t)=>e.address===t.address&&e.module===t.module&&e.name===t.name;function ZS(e){var n;const t=(n=Dp(e))==null?void 0:n.Struct;return(t==null?void 0:t.address)==="0x2"&&(t==null?void 0:t.module)==="tx_context"&&(t==null?void 0:t.name)==="TxContext"}function rc(e,t){if(!(typeof t>"u")&&typeof t!==e)throw new Error(`Expect ${t} to be ${e}, received ${typeof t}`)}var JS=["Address","Bool","U8","U16","U32","U64","U128","U256"];function Cc(e,t){if(typeof e=="string"&&JS.includes(e)){if(e in["U8","U16","U32","U64","U128","U256"])rc("number",t);else if(e==="Bool")rc("boolean",t);else if(e==="Address"&&(rc("string",t),t&&!oT(t)))throw new Error("Invalid Sui Address");return e.toLowerCase()}else if(typeof e=="string")throw new Error(`Unknown pure normalized type ${JSON.stringify(e,null,2)}`);if("Vector"in e){if((t===void 0||typeof t=="string")&&e.Vector==="U8")return"string";if(t!==void 0&&!Array.isArray(t))throw new Error(`Expect ${t} to be a array, received ${typeof t}`);const n=Cc(e.Vector,t?t[0]:void 0);return n===void 0?void 0:`vector<${n}>`}if("Struct"in e){if(Xi(e.Struct,WS))return"string";if(Xi(e.Struct,KS))return"utf8string";if(Xi(e.Struct,FS))return"address";if(Xi(e.Struct,XS)){const n={Vector:e.Struct.typeArguments[0]};return Cc(n,t)}}}function YS(e,t){const n=Array.from(`${e}::`).map(s=>s.charCodeAt(0)),r=new Uint8Array(n.length+t.length);return r.set(n),r.set(t,n.length),Ch(r,{dkLen:32})}var QS=R(re(Z([S({Epoch:yt()}),S({None:Z([j(!0),j(null)])})]))),eg=f(),bd=kt("StringEncodedBigint",e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}}),ex=S({budget:R(bd),price:R(bd),payment:R(C(Sn)),owner:R(eg)}),Zi=S({version:j(1),sender:R(eg),expiration:QS,gasConfig:ex,inputs:C(_i),transactions:C(Zp)});function md(e){return bn(e).replace("0x","")}var wd=128*1024,ur=class{constructor(t){this.version=1,this.sender=t==null?void 0:t.sender,this.expiration=t==null?void 0:t.expiration,this.gasConfig=(t==null?void 0:t.gasConfig)??{},this.inputs=(t==null?void 0:t.inputs)??[],this.transactions=(t==null?void 0:t.transactions)??[]}static fromKindBytes(t){const n=cr.de("TransactionKind",t),r=n==null?void 0:n.ProgrammableTransaction;if(!r)throw new Error("Unable to deserialize from bytes.");const s=Dt({version:1,gasConfig:{},inputs:r.inputs.map((i,o)=>Dt({kind:"Input",value:i,index:o,type:Ue(i,Ic)?"pure":"object"},_i)),transactions:r.transactions},Zi);return ur.restore(s)}static fromBytes(t){var o;const n=cr.de("TransactionData",t),r=n==null?void 0:n.V1,s=(o=r==null?void 0:r.kind)==null?void 0:o.ProgrammableTransaction;if(!r||!s)throw new Error("Unable to deserialize from bytes.");const i=Dt({version:1,sender:r.sender,expiration:r.expiration,gasConfig:r.gasData,inputs:s.inputs.map((a,c)=>Dt({kind:"Input",value:a,index:c,type:Ue(a,Ic)?"pure":"object"},_i)),transactions:s.transactions},Zi);return ur.restore(i)}static restore(t){jr(t,Zi);const n=new ur;return Object.assign(n,t),n}static getDigestFromBytes(t){const n=YS("TransactionData",t);return ma(n)}build({overrides:t,onlyTransactionKind:n}={}){const r=this.inputs.map(u=>(jr(u.value,oi),u.value)),s={ProgrammableTransaction:{inputs:r,transactions:this.transactions}};if(n)return cr.ser("TransactionKind",s,{maxSize:wd}).toBytes();const i=(t==null?void 0:t.expiration)??this.expiration,o=(t==null?void 0:t.sender)??this.sender,a={...this.gasConfig,...t==null?void 0:t.gasConfig};if(!o)throw new Error("Missing transaction sender");if(!a.budget)throw new Error("Missing gas budget");if(!a.payment)throw new Error("Missing gas payment");if(!a.price)throw new Error("Missing gas price");const c={sender:md(o),expiration:i||{None:!0},gasData:{payment:a.payment,owner:md(this.gasConfig.owner??o),price:BigInt(a.price),budget:BigInt(a.budget)},kind:{ProgrammableTransaction:{inputs:r,transactions:this.transactions}}};return cr.ser("TransactionData",{V1:c},{maxSize:wd}).toBytes()}getDigest(){const t=this.build({onlyTransactionKind:!1});return ur.getDigestFromBytes(t)}snapshot(){return Dt(this,Zi)}};function tx(e){const t={kind:"Result",index:e},n=[],r=s=>n[s]??(n[s]={kind:"NestedResult",index:e,resultIndex:s});return new Proxy(t,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,i){if(i in s)return Reflect.get(s,i);if(i===Symbol.iterator)return function*(){let a=0;for(;;)yield r(a),a++};if(typeof i=="symbol")return;const o=parseInt(i,10);if(!(Number.isNaN(o)||o<0))return r(o)}})}function Zs(e){if(!e)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e}var _d=Symbol.for("@mysten/transaction"),Oc=256,nx=1e9,rx=10n,xe,lo,$c,il,tg,fo,Rc,Pc=class{constructor(t){Ws(this,lo),Ws(this,il),Ws(this,fo),Ws(this,xe,void 0),Ks(this,xe,new ur(t?t.blockData:void 0))}static is(t){return!!t&&typeof t=="object"&&t[_d]===!0}static fromKind(t){const n=new Pc;return Ks(n,xe,ur.fromKindBytes(typeof t=="string"?Hn(t):t)),n}static from(t){const n=new Pc;return typeof t!="string"||!t.startsWith("{")?Ks(n,xe,ur.fromBytes(typeof t=="string"?Hn(t):t)):Ks(n,xe,ur.restore(JSON.parse(t))),n}static get Transactions(){return nr}static get Inputs(){return Un}setSender(t){$e(this,xe).sender=t}setSenderIfNotSet(t){$e(this,xe).sender||($e(this,xe).sender=t)}setExpiration(t){$e(this,xe).expiration=t}setGasPrice(t){$e(this,xe).gasConfig.price=String(t)}setGasBudget(t){$e(this,xe).gasConfig.budget=String(t)}setGasOwner(t){$e(this,xe).gasConfig.owner=t}setGasPayment(t){if(t.length>=Oc)throw new Error(`Payment objects exceed maximum amount ${Oc}`);$e(this,xe).gasConfig.payment=t.map(n=>Tu(n,Sn))}get blockData(){return $e(this,xe).snapshot()}get[_d](){return!0}get gas(){return{kind:"GasCoin"}}object(t){const n=yd(t);return $e(this,xe).inputs.find(s=>s.type==="object"&&n===yd(s.value))??Xs(this,lo,$c).call(this,"object",t)}objectRef(...t){return this.object(Un.ObjectRef(...t))}sharedObjectRef(...t){return this.object(Un.SharedObjectRef(...t))}pure(t,n){return Xs(this,lo,$c).call(this,"pure",t instanceof Uint8Array?Un.Pure(t):n?Un.Pure(t,n):t)}add(t){const n=$e(this,xe).transactions.push(t);return tx(n-1)}splitCoins(...t){return this.add(nr.SplitCoins(...t))}mergeCoins(...t){return this.add(nr.MergeCoins(...t))}publish(...t){return this.add(nr.Publish(...t))}upgrade(...t){return this.add(nr.Upgrade(...t))}moveCall(...t){return this.add(nr.MoveCall(...t))}transferObjects(...t){return this.add(nr.TransferObjects(...t))}makeMoveVec(...t){return this.add(nr.MakeMoveVec(...t))}serialize(){return JSON.stringify($e(this,xe).snapshot())}async build({provider:t,onlyTransactionKind:n}={}){return await Xs(this,fo,Rc).call(this,{provider:t,onlyTransactionKind:n}),$e(this,xe).build({onlyTransactionKind:n})}async getDigest({provider:t}={}){return await Xs(this,fo,Rc).call(this,{provider:t}),$e(this,xe).getDigest()}},vd=Pc;xe=new WeakMap;lo=new WeakSet;$c=function(e,t){const n=$e(this,xe).inputs.length,r=Dt({kind:"Input",value:typeof t=="bigint"?String(t):t,index:n,type:e},_i);return $e(this,xe).inputs.push(r),r};il=new WeakSet;tg=async function(e){const t=$e(this,xe).gasConfig.owner??$e(this,xe).sender,r=(await Zs(e).getCoins({owner:t,coinType:QT})).data.filter(s=>!$e(this,xe).inputs.find(o=>Ue(o.value,oi)&&"Object"in o.value&&"ImmOrOwned"in o.value.Object?s.coinObjectId===o.value.Object.ImmOrOwned.objectId:!1)).slice(0,Oc-1).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!r.length)throw new Error("No valid gas coins found for the transaction.");return r};fo=new WeakSet;Rc=async function({provider:e,onlyTransactionKind:t}){var o;if(!t&&!$e(this,xe).sender)throw new Error("Missing transaction sender");const{inputs:n,transactions:r}=$e(this,xe),s=[],i=[];if(r.forEach(a=>{if(a.kind==="MoveCall"){a.arguments.some(d=>d.kind==="Input"&&!Ue(n[d.index].value,oi))&&s.push(a);return}const c=IS(a);c.schema&&Object.entries(a).forEach(([u,d])=>{if(u==="kind")return;const l=c.schema[u],p=l.type==="array",g=p?l.schema[Lo]:l[Lo];if(!g)return;const w=h=>{const y=n[h];if(!y)throw new Error(`Missing input ${d.index}`);if(!Ue(y.value,oi))if(g.kind==="object"&&typeof y.value=="string")i.push({id:y.value,input:y});else if(g.kind==="pure")y.value=Un.Pure(y.value,g.type);else throw new Error("Unexpected input format.")};if(p)d.forEach(h=>{h.kind==="Input"&&w(h.index)});else{if(d.kind!=="Input")return;w(d.index)}})}),s.length&&await Promise.all(s.map(async a=>{const[c,u,d]=a.target.split("::"),l=await Zs(e).getNormalizedMoveFunction({package:wi(c),module:u,function:d}),g=l.parameters.length>0&&ZS(l.parameters.at(-1))?l.parameters.slice(0,l.parameters.length-1):l.parameters;if(g.length!==a.arguments.length)throw new Error("Incorrect number of arguments.");g.forEach((w,h)=>{const y=a.arguments[h];if(y.kind!=="Input")return;const v=n[y.index];if(Ue(v.value,oi))return;const m=v.value,b=Cc(w,m);if(b){v.value=Un.Pure(m,b);return}if(Dp(w)!=null||typeof w=="object"&&"TypeParameter"in w){if(typeof m!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(m,null,2)}`);i.push({id:m,input:v,normalizedType:w});return}throw new Error(`Unknown call arg type ${JSON.stringify(w,null,2)} for value ${JSON.stringify(m,null,2)}`)})})),i.length){const a=[...new Set(i.map(({id:l})=>l))],c=await Zs(e).multiGetObjects({ids:a,options:{showOwner:!0}});let u=new Map(a.map((l,p)=>[l,c[p]]));const d=Array.from(u).filter(([l,p])=>p.error).map(([l,p])=>l);if(d.length)throw new Error(`The following input objects are not invalid: ${d.join(", ")}`);i.forEach(({id:l,input:p,normalizedType:g})=>{const w=u.get(l),h=ST(w);if(h){const y=MS(p.value)||g!=null&&Np(g)!=null;p.value=Un.SharedObjectRef({objectId:l,initialSharedVersion:h,mutable:y})}else p.value=Un.ObjectRef(vT(w))})}if(!t&&($e(this,xe).gasConfig.price||this.setGasPrice(await Zs(e).getReferenceGasPrice()),$e(this,xe).gasConfig.payment||($e(this,xe).gasConfig.payment=await Xs(this,il,tg).call(this,e)),!this.blockData.gasConfig.budget)){const a=await Zs(e).dryRunTransactionBlock({transactionBlock:$e(this,xe).build({overrides:{gasConfig:{budget:String(nx),payment:[]}}})});if(a.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${a.effects.status.error}`,{cause:a});const c=rx*BigInt(((o=this.blockData.gasConfig.payment)==null?void 0:o.length)||0n)*BigInt(this.blockData.gasConfig.price||1n);this.setGasBudget(BigInt(a.effects.gasUsed.computationCost)+BigInt(a.effects.gasUsed.storageCost)+c)}};S({currentTps:V(),tps30Days:V(),currentCheckpoint:f(),currentEpoch:f(),totalAddresses:f(),totalObjects:f(),totalPackages:f()});var sx=S({lastCheckpointId:f(),epochEndTimestamp:f(),protocolVersion:f(),referenceGasPrice:f(),totalStake:f(),storageFundReinvestment:f(),storageCharge:f(),storageRebate:f(),storageFundBalance:f(),stakeSubsidyAmount:f(),totalGasFees:f(),totalStakeRewardsDistributed:f(),leftoverStorageFundInflow:f()}),ix=S({epoch:f(),validators:C(Mp),epochTotalTransactions:f(),firstCheckpointId:f(),epochStartTimestamp:f(),endOfEpochInfo:re(sx)});S({data:C(ix),nextCursor:re(f()),hasNextPage:se()});wi("0x5");const ox=Oa.v4,ax=function(e,t,n,r){if(typeof e!="string")throw new TypeError(e+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:e};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof n>"u"){const o=typeof r.generator=="function"?r.generator:function(){return ox()};i.id=o(i,r)}else s===2&&n===null?r.notificationIdNull&&(i.id=null):i.id=n;return i};var cx=ax;const ux=Oa.v4,lx=cx,vi=function(e,t){if(!(this instanceof vi))return new vi(e,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return ux()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=e};var dx=vi;vi.prototype.request=function(e,t,n,r){const s=this;let i=null;const o=Array.isArray(e)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&e&&typeof e=="object"&&typeof t=="function")r=t,i=e;else{typeof n=="function"&&(r=n,n=void 0);const u=typeof r=="function";try{i=lx(e,t,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(d){if(u)return r(d);throw d}if(!u)return i}let c;try{c=JSON.stringify(i,this.options.replacer)}catch(u){return r(u)}return this.callServer(c,function(u,d){s._parseResponse(u,d,r)}),i};vi.prototype._parseResponse=function(e,t,n){if(e){n(e);return}if(!t)return n();let r;try{r=JSON.parse(t,this.options.reviver)}catch(s){return n(s)}if(n.length===3)if(Array.isArray(r)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return n(null,r.filter(s),r.filter(i))}else return n(null,r.error,r.result);n(null,r)};var ol=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Re=(e,t,n)=>(ol(e,t,"read from private field"),n?n.call(e):t.get(e)),Js=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ys=(e,t,n,r)=>(ol(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Qs=(e,t,n)=>(ol(e,t,"access private method"),n),Xt=f(),fx=f(),hx=f(),De=f(),Rt=f(),Ut=f(),wr=Z([S({AddressOwner:Rt}),S({ObjectOwner:Rt}),S({Shared:S({initial_shared_version:V()})}),j("Immutable")]),px=kt("SuiJsonValue",()=>!0),gx=32;function Td(e){try{return yu(e).length===gx}catch{return!1}}var ng=32;function Pn(e){return yx(e)&&bx(e)===ng}function Ji(e){return Pn(e)}function He(e,t=!1){let n=e.toLowerCase();return!t&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(ng*2,"0")}`}function xn(e,t=!1){return He(e,t)}function yx(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function bx(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}Z([f(),j("package")]);var An=S({digest:Xt,objectId:f(),version:Z([V(),f()])}),mx=S({payment:C(An),owner:f(),price:f(),budget:f()}),wx=ot(An,S({type:f(),owner:wr,previousTransaction:Xt})),_x=ut(f(),mt()),vx=ut(f(),f()),rg=S({type:f(),fields:_x,hasPublicTransfer:se()}),sg=S({disassembled:vx}),Tx=Z([ot(rg,S({dataType:j("moveObject")})),ot(sg,S({dataType:j("package")}))]);S({type:f(),hasPublicTransfer:se(),version:Ut,bcsBytes:C(V())});var Sx=S({id:De,moduleMap:ut(f(),f())}),xx=Z([ot(rg,S({dataType:j("moveObject")})),ot(Sx,S({dataType:j("package")}))]);BigInt(1e9);var ts=f(),ig=S({code:f(),error:R(f()),object_id:R(De),version:R(Ut),digest:R(ts)}),Ax=S({data:re(ut(f(),f())),error:re(ig)}),kx=Z([Ax,R(ut(f(),f()))]),Ex=S({objectId:De,version:Ut,digest:ts,type:R(f()),content:R(Tx),bcs:R(xx),owner:R(wr),previousTransaction:R(Xt),storageRebate:R(f()),display:R(kx)});S({showType:R(se()),showContent:R(se()),showBcs:R(se()),showOwner:R(se()),showPreviousTransaction:R(se()),showStorageRebate:R(se()),showDisplay:R(se())});Z([j("Exists"),j("notExists"),j("Deleted")]);C(wx);var ho=S({data:R(Ex),error:R(ig)});function $a(e){return e.data}function Bx(e){if(e.error&&"object_id"in e.error&&"version"in e.error&&"digest"in e.error){const t=e.error;return{objectId:t.object_id,version:t.version,digest:t.digest}}}function Ix(e){if(e.error&&"object_id"in e.error&&!("version"in e.error)&&!("digest"in e.error))return e.error.object_id}function og(e){if("reference"in e)return e.reference;const t=$a(e);return t?{objectId:t.objectId,version:t.version,digest:t.digest}:Bx(e)}function Ni(e){var t;return"objectId"in e?e.objectId:((t=og(e))==null?void 0:t.objectId)??Ix(e)}function Cx(e){return e.data!==void 0}function ag(e){var n;const t=Cx(e)?e.data:e;return!(t!=null&&t.type)&&"data"in e?((n=t==null?void 0:t.content)==null?void 0:n.dataType)==="package"?"package":Ra(e):t==null?void 0:t.type}function al(e){var t;return(t=$a(e))==null?void 0:t.previousTransaction}function cg(e){var t;return Ue(e,wr)?e:(t=$a(e))==null?void 0:t.owner}function Ox(e){const t=cg(e);if(typeof t=="object"&&"Shared"in t)return t.Shared.initial_shared_version}function Ra(e){var t;return(t=cl(e))==null?void 0:t.type}function ns(e){var t;return"fields"in e?e.fields:(t=cl(e))==null?void 0:t.fields}function $x(e){return e.content!==void 0}function cl(e){const t="data"in e?$a(e):e;if(!(!t||!$x(t)||t.content.dataType!=="moveObject"))return t.content}var Rx=S({objectId:De,atCheckpoint:R(V())}),Px=S({data:C(ho),nextCursor:Z([re(De),re(Rx)]),hasNextPage:se()}),ug=S({txDigest:Xt,eventSeq:Ut}),ul=S({id:ug,packageId:De,transactionModule:f(),sender:Rt,type:f(),parsedJson:R(ut(f(),mt())),bcs:R(f()),timestampMs:R(f())}),Ux=S({data:C(ul),nextCursor:re(ug),hasNextPage:se()}),qx=V(),Nx=S({subscription:qx,result:ul}),zr=f(),Dx=S({epoch:zr,storage_charge:f(),computation_charge:f(),storage_rebate:f(),epoch_start_timestamp_ms:R(f())}),Mx=S({epoch:zr,round:f(),commit_timestamp_ms:f()}),Lx=S({objects:C(De)}),$n=Z([j("GasCoin"),S({Input:V()}),S({Result:V()}),S({NestedResult:Le([V(),V()])})]),jx=S({arguments:R(C($n)),type_arguments:R(C(f())),package:De,module:f(),function:f()}),Hx=Z([S({MoveCall:jx}),S({TransferObjects:Le([C($n),$n])}),S({SplitCoins:Le([$n,C($n)])}),S({MergeCoins:Le([$n,C($n)])}),S({Publish:Le([sg,C(De)])}),S({MakeMoveVec:Le([re(f()),C($n)])})]),Gx=Z([S({type:j("pure"),valueType:R(f()),value:px}),S({type:j("object"),objectType:j("immOrOwnedObject"),objectId:De,version:Ut,digest:ts}),S({type:j("object"),objectType:j("sharedObject"),objectId:De,initialSharedVersion:Ut,mutable:se()})]),zx=S({transactions:C(Hx),inputs:C(Gx)}),Vx=Z([ot(Dx,S({kind:j("ChangeEpoch")})),ot(Mx,S({kind:j("ConsensusCommitPrologue")})),ot(Lx,S({kind:j("Genesis")})),ot(zx,S({kind:j("ProgrammableTransaction")}))]),lg=S({messageVersion:j("v1"),transaction:Vx,sender:Rt,gasData:mx}),Sd=f(),Fx=Z([Sd,C(Sd)]);S({epoch:zr,signature:Fx,signers_map:C(V())});var Wx=S({computationCost:f(),storageCost:f(),storageRebate:f(),nonRefundableStorageFee:f()}),Kx=Z([j("success"),j("failure")]),Xx=S({status:Kx,error:R(f())}),Yi=S({owner:wr,reference:An}),Zx=S({objectId:De,sequenceNumber:Ut}),ll=S({messageVersion:j("v1"),status:Xx,executedEpoch:zr,modifiedAtVersions:R(C(Zx)),gasUsed:Wx,sharedObjects:R(C(An)),transactionDigest:Xt,created:R(C(Yi)),mutated:R(C(Yi)),unwrapped:R(C(Yi)),deleted:R(C(An)),unwrapped_then_deleted:R(C(An)),wrapped:R(C(An)),gasObject:Yi,eventsDigest:R(hx),dependencies:R(C(Xt))}),dl=C(ul),Jx=Le([C(V()),f()]),Yx=Le([$n,C(V()),f()]),Qx=S({mutableReferenceOutputs:R(C(Yx)),returnValues:R(C(Jx))}),eA=S({effects:ll,events:dl,results:R(C(Qx)),error:R(f())}),tA=f(),nA=S({data:lg,txSignatures:C(f())}),rA=S({type:j("published"),packageId:De,version:Ut,digest:ts,modules:C(f())}),sA=S({type:j("transferred"),sender:Rt,recipient:wr,objectType:f(),objectId:De,version:Ut,digest:ts}),iA=S({type:j("mutated"),sender:Rt,owner:wr,objectType:f(),objectId:De,version:Ut,previousVersion:Ut,digest:ts}),oA=S({type:j("deleted"),sender:Rt,objectType:f(),objectId:De,version:Ut}),aA=S({type:j("wrapped"),sender:Rt,objectType:f(),objectId:De,version:Ut}),cA=S({type:j("created"),sender:Rt,owner:wr,objectType:f(),objectId:De,version:Ut,digest:ts}),dg=Z([rA,sA,iA,oA,aA,cA]),fg=S({owner:wr,coinType:f(),amount:f()}),po=S({digest:Xt,transaction:R(nA),effects:R(ll),events:R(dl),timestampMs:R(f()),checkpoint:R(f()),confirmedLocalExecution:R(se()),objectChanges:R(C(dg)),balanceChanges:R(C(fg)),errors:R(C(f()))});S({showInput:R(se()),showEffects:R(se()),showEvents:R(se()),showObjectChanges:R(se()),showBalanceChanges:R(se())});var uA=S({data:C(po),nextCursor:re(Xt),hasNextPage:se()}),lA=S({effects:ll,events:dl,objectChanges:C(dg),balanceChanges:C(fg),input:R(lg)}),hg="0x2",fl="0x1",dA="object",fA="ID",hA=`${hg}::sui::SUI`;xn("0x6");var xd=/^0x2::coin::Coin<(.+)>$/;function pA(e){return!!e.data||!!e.type}var gA=S({decimals:V(),name:f(),symbol:f(),description:f(),iconUrl:re(f()),id:re(De)}),Qt=class{static isCoin(e){var t;return((t=Qt.getType(e))==null?void 0:t.match(xd))!=null}static getCoinType(e){const[,t]=e.match(xd)??[];return t||null}static getCoinTypeArg(e){const t=Qt.getType(e);return t?Qt.getCoinType(t):null}static isSUI(e){const t=Qt.getCoinTypeArg(e);return t?Qt.getCoinSymbol(t)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getCoinStructTag(e){return{address:xn(e.split("::")[0]),module:e.split("::")[1],name:e.split("::")[2],typeParams:[]}}static getID(e){return"fields"in e?e.fields.id.id:Ni(e)}static totalBalance(e){return e.reduce((t,n)=>t+Qt.getBalanceFromCoinStruct(n),BigInt(0))}static sortByBalance(e){return[...e].sort((t,n)=>Qt.getBalanceFromCoinStruct(t)<Qt.getBalanceFromCoinStruct(n)?-1:Qt.getBalanceFromCoinStruct(t)>Qt.getBalanceFromCoinStruct(n)?1:0)}static getBalanceFromCoinStruct(e){return BigInt(e.balance)}static getBalance(e){var n;if(!Qt.isCoin(e))return;const t=(n=ns(e))==null?void 0:n.balance;return BigInt(t)}static getType(e){return pA(e)?ag(e):e.type}};function yA(e){e.registerType("utf8string",(t,n)=>{const r=Array.from(new TextEncoder().encode(n));return t.writeVec(r,(s,i)=>s.write8(i))},t=>{let n=t.readVec(r=>r.read8());return new TextDecoder().decode(new Uint8Array(n))})}var cs="vector",bA={kind:"TransactionKind",sender:F.ADDRESS,gasData:"GasData",expiration:"TransactionExpiration"},mA={enums:{"Option<T>":{None:null,Some:"T"},ObjectArg:{ImmOrOwned:"SuiObjectRef",Shared:"SharedObjectRef"},CallArg:{Pure:[cs,F.U8],Object:"ObjectArg",ObjVec:[cs,"ObjectArg"]},TypeTag:{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:"TypeTag",struct:"StructTag",u16:null,u32:null,u256:null},TransactionKind:{ProgrammableTransaction:"ProgrammableTransaction",ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null},TransactionExpiration:{None:null,Epoch:F.U64},TransactionData:{V1:"TransactionDataV1"}},structs:{SuiObjectRef:{objectId:F.ADDRESS,version:F.U64,digest:"ObjectDigest"},SharedObjectRef:{objectId:F.ADDRESS,initialSharedVersion:F.U64,mutable:F.BOOL},StructTag:{address:F.ADDRESS,module:F.STRING,name:F.STRING,typeParams:[cs,"TypeTag"]},GasData:{payment:[cs,"SuiObjectRef"],owner:F.ADDRESS,price:F.U64,budget:F.U64},SenderSignedData:{data:"TransactionData",txSignatures:[cs,[cs,F.U8]]},TransactionDataV1:bA},aliases:{ObjectDigest:F.BASE58}},pg=new F({...Sh(),types:mA});yA(pg);function wA(e){return Y_.parse(e)}var _A=S({amount:V(),id:De,transferTxDigest:Xt});S({transferredGasObjects:C(_A),error:re(f())});var vA=Z([f(),S({Object:f()})]),TA=C(vA),SA=S({address:f(),name:f()}),xA=Z([j("Private"),j("Public"),j("Friend")]),hl=S({abilities:C(f())}),AA=S({constraints:hl,isPhantom:se()}),kA=S({TypeParameter:V()});function gg(e){if(!e)return!1;if(typeof e=="string"||Ue(e,kA)||yg(e))return!0;if(typeof e!="object")return!1;const t=e;return!!(Ue(t.Reference,ms)||Ue(t.MutableReference,ms)||Ue(t.Vector,ms))}var ms=kt("SuiMoveNormalizedType",gg);function yg(e){if(!e||typeof e!="object")return!1;const t=e;if(!t.Struct||typeof t.Struct!="object")return!1;const n=t.Struct;return!(typeof n.address!="string"||typeof n.module!="string"||typeof n.name!="string"||!Array.isArray(n.typeArguments)||!n.typeArguments.every(r=>gg(r)))}kt("SuiMoveNormalizedStructType",yg);var bg=S({visibility:xA,isEntry:se(),typeParameters:C(hl),parameters:C(ms),return:C(ms)}),EA=S({name:f(),type:ms}),mg=S({abilities:hl,typeParameters:C(AA),fields:C(EA)}),wg=S({fileFormatVersion:V(),address:f(),name:f(),friends:C(SA),structs:ut(f(),mg),exposedFunctions:ut(f(),bg)}),BA=ut(f(),wg);function _g(e){return typeof e=="object"&&"MutableReference"in e?e.MutableReference:void 0}function IA(e){return typeof e=="object"&&"Reference"in e?e.Reference:void 0}function vg(e){if(typeof e=="object"&&"Struct"in e)return e;const t=IA(e),n=_g(e);if(typeof t=="object"&&"Struct"in t)return t;if(typeof n=="object"&&"Struct"in n)return n}S({value:V()});var CA=S({stakedSuiId:De,stakeRequestEpoch:zr,stakeActiveEpoch:zr,principal:f(),status:Z([j("Active"),j("Pending"),j("Unstaked")]),estimatedReward:R(V())}),Ad=S({validatorAddress:Rt,stakingPool:De,stakes:C(CA)}),OA=S({balance:S({value:V()}),distribution_counter:V(),current_distribution_amount:V(),stake_subsidy_period_length:V(),stake_subsidy_decrease_rate:V()});S({type:f(),fields:OA});S({value:V()});var $A=S({id:f(),size:V(),head:S({vec:C()}),tail:S({vec:C()})});S({id:f(),size:V()});S({type:f(),fields:$A});var RA=S({exchangeRates:S({id:f(),size:V()}),id:f(),pendingStake:V(),pendingPoolTokenWithdraw:V(),pendingTotalSuiWithdraw:V(),poolTokenBalance:V(),rewardsPool:S({value:V()}),activationEpoch:S({vec:C()}),deactivationEpoch:S({vec:C()}),suiBalance:V()});S({type:f(),fields:RA});var PA=C(Le([tA,f()])),UA=S({epoch:zr,validators:PA}),Tg=S({suiAddress:Rt,protocolPubkeyBytes:f(),networkPubkeyBytes:f(),workerPubkeyBytes:f(),proofOfPossessionBytes:f(),operationCapId:f(),name:f(),description:f(),imageUrl:f(),projectUrl:f(),p2pAddress:f(),netAddress:f(),primaryAddress:f(),workerAddress:f(),nextEpochProtocolPubkeyBytes:re(f()),nextEpochProofOfPossession:re(f()),nextEpochNetworkPubkeyBytes:re(f()),nextEpochWorkerPubkeyBytes:re(f()),nextEpochNetAddress:re(f()),nextEpochP2pAddress:re(f()),nextEpochPrimaryAddress:re(f()),nextEpochWorkerAddress:re(f()),votingPower:f(),gasPrice:f(),commissionRate:f(),nextEpochStake:f(),nextEpochGasPrice:f(),nextEpochCommissionRate:f(),stakingPoolId:f(),stakingPoolActivationEpoch:re(f()),stakingPoolDeactivationEpoch:re(f()),stakingPoolSuiBalance:f(),rewardsPool:f(),poolTokenBalance:f(),pendingStake:f(),pendingPoolTokenWithdraw:f(),pendingTotalSuiWithdraw:f(),exchangeRatesId:f(),exchangeRatesSize:f()}),qA=S({epoch:f(),protocolVersion:f(),systemStateVersion:f(),storageFundTotalObjectStorageRebates:f(),storageFundNonRefundableBalance:f(),referenceGasPrice:f(),safeMode:se(),safeModeStorageRewards:f(),safeModeComputationRewards:f(),safeModeStorageRebates:f(),safeModeNonRefundableStorageFee:f(),epochStartTimestampMs:f(),epochDurationMs:f(),stakeSubsidyStartEpoch:f(),maxValidatorCount:f(),minValidatorJoiningStake:f(),validatorLowStakeThreshold:f(),validatorVeryLowStakeThreshold:f(),validatorLowStakeGracePeriod:f(),stakeSubsidyBalance:f(),stakeSubsidyDistributionCounter:f(),stakeSubsidyCurrentDistributionAmount:f(),stakeSubsidyPeriodLength:f(),stakeSubsidyDecreaseRate:V(),totalStake:f(),activeValidators:C(Tg),pendingActiveValidatorsId:f(),pendingActiveValidatorsSize:f(),pendingRemovals:C(f()),stakingPoolMappingsId:f(),stakingPoolMappingsSize:f(),inactivePoolsId:f(),inactivePoolsSize:f(),validatorCandidatesId:f(),validatorCandidatesSize:f(),atRiskValidators:C(Le([Rt,f()])),validatorReportRecords:C(Le([Rt,C(Rt)]))}),NA=S({coinType:f(),coinObjectId:De,version:f(),digest:Xt,balance:f(),lockedUntilEpoch:re(V()),previousTransaction:Xt}),kd=S({data:C(NA),nextCursor:re(De),hasNextPage:se()}),Ed=S({coinType:f(),coinObjectCount:V(),totalBalance:f(),lockedBalance:S({epochId:R(V()),number:R(V())})}),DA=S({value:f()}),MA=S({computationCost:f(),storageCost:f(),storageRebate:f(),nonRefundableStorageFee:f()});f();var Bd=f();S({digest:C(V())});var Sg=mt(),LA=f(),jA=S({nextEpochCommittee:C(Le([f(),f()])),nextEpochProtocolVersion:f(),epochCommitments:C(Sg)});S({transaction:Xt,effects:fx});var xg=S({epoch:f(),sequenceNumber:f(),digest:Bd,networkTotalTransactions:f(),previousDigest:R(Bd),epochRollingGasCostSummary:MA,timestampMs:f(),endOfEpochData:R(jA),validatorSignature:R(LA),transactions:C(Xt),checkpointCommitments:C(Sg)}),HA=S({data:C(xg),nextCursor:re(f()),hasNextPage:se()}),GA="0.32.0",Uc=class extends Error{constructor(e){super("RPC Error",{cause:e.cause}),this.req=e.req,this.code=e.code,this.data=e.data}},Id=class extends Error{constructor(e){super("RPC Validation Error: The response returned from RPC server does not match the TypeScript definition. This is likely because the SDK version is not compatible with the RPC server.",{cause:e.cause}),this.req=e.req,this.result=e.result,this.message=this.toString()}toString(){let e=super.toString();return this.cause&&(e+=`
Cause: ${this.cause}`),this.result&&(e+=`
Reponse Received: ${JSON.stringify(this.result,null,2)}`),e}},zA=class extends Error{},VA=S({jsonrpc:j("2.0"),id:f(),result:mt()}),Ag=S({jsonrpc:j("2.0"),id:f(),error:S({code:mt(),message:f(),data:R(mt())})}),FA=class{constructor(e,t){this.rpcClient=new dx(async(n,r)=>{const s={method:"POST",body:n,headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":GA,"Client-Target-Api-Version":Nk,...t}};try{let i=await fetch(e,s);const o=await i.text();if(i.ok)r(null,o);else{const a=i.headers.get("content-type")==="text/html";r(new Error(`${i.status} ${i.statusText}${a?"":`: ${o}`}`))}}catch(i){r(i)}},{})}async requestWithType(e,t,n,r=!1){const s={method:e,args:t},i=await this.request(e,t);if(Ue(i,Ag))throw new Uc({req:s,code:i.error.code,data:i.error.data,cause:new Error(i.error.message)});if(Ue(i,VA)){const[o]=qs(i.result,n);if(r&&o)return console.warn(new Id({req:s,result:i.result,cause:o})),i.result;if(o)throw new Id({req:s,result:i.result,cause:o});return i.result}throw new Uc({req:s,data:i})}async request(e,t){return new Promise((n,r)=>{this.rpcClient.request(e,t,(s,i)=>{if(s){r(s);return}n(i)})})}},WA=Z([j("DynamicField"),j("DynamicObject")]),KA=S({type:f(),value:mt()}),XA=S({name:KA,bcsName:f(),type:WA,objectType:f(),objectId:De,version:V(),digest:f()}),ZA=S({data:C(XA),nextCursor:re(De),hasNextPage:se()}),JA=(e,t)=>{const n=new URL(e);return n.protocol=n.protocol.replace("http","ws"),t&&(n.port=t.toString()),n.toString()},YA=e=>e&&"subscription"in e&&typeof e.subscription=="number"&&"result"in e&&typeof e.result=="object",kg={connectTimeout:15e3,callTimeout:3e4,reconnectInterval:3e3,maxReconnects:5},Cd="suix_subscribeEvent",QA="suix_unsubscribeEvent",ek=class{constructor(e,t,n=kg){this.endpoint=e,this.skipValidation=t,this.options=n,this.connectionState=0,this.connectionTimeout=null,this.isSetup=!1,this.connectionPromise=null,this.eventSubscriptions=new Map,this.endpoint.startsWith("http")&&(this.endpoint=JA(this.endpoint)),this.rpcClient=new xp(this.endpoint,{reconnect_interval:this.options.reconnectInterval,max_reconnects:this.options.maxReconnects,autoconnect:!1})}setupSocket(){this.isSetup||(this.rpcClient.on("open",()=>{this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.connectionState=2,this.rpcClient.socket.on("message",this.onSocketMessage.bind(this))}),this.rpcClient.on("close",()=>{this.connectionState=0}),this.rpcClient.on("error",console.error),this.isSetup=!0)}onSocketMessage(e){const t=JSON.parse(e),n=t.params;if(t.method===Cd){if(this.skipValidation&&YA(n)){const r=this.eventSubscriptions.get(n.subscription);r&&r.onMessage(n.result)}else if(Ue(n,Nx)){const r=this.eventSubscriptions.get(n.subscription);r&&r.onMessage(n.result)}}}async connect(){return this.connectionPromise?this.connectionPromise:this.connectionState===2?Promise.resolve():(this.setupSocket(),this.rpcClient.connect(),this.connectionState=1,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeout=setTimeout(()=>t(new Error("timeout")),this.options.connectTimeout),this.rpcClient.once("open",()=>{this.refreshSubscriptions(),this.connectionPromise=null,e()}),this.rpcClient.once("error",n=>{this.connectionPromise=null,t(n)})}),this.connectionPromise)}async refreshSubscriptions(){if(this.eventSubscriptions.size!==0)try{let e=new Map;(await Promise.all(Array.from(this.eventSubscriptions.values()).map(async n=>{const r=n.onMessage,s=n.filter;return!s||!r?Promise.resolve(null):{id:await this.subscribeEvent(s,r),onMessage:r,filter:s}}))).forEach(n=>{if(n===null)return;const r=n.filter,s=n.onMessage;e.set(n.id,{filter:r,onMessage:s})}),this.eventSubscriptions=e}catch(e){throw new Error(`error refreshing event subscriptions: ${e}`)}}async subscribeEvent(e,t){try{this.connectionState!==2&&await this.connect();let n=await this.rpcClient.call(Cd,[e],this.options.callTimeout);return this.eventSubscriptions.set(n,{filter:e,onMessage:t}),n}catch(n){throw new Error(`Error subscribing to event: ${JSON.stringify(n,null,2)}, filter: ${JSON.stringify(e)}`)}}async unsubscribeEvent(e){try{this.connectionState!==2&&await this.connect();let t=await this.rpcClient.call(QA,[e],this.options.callTimeout);return this.eventSubscriptions.delete(e)||t}catch(t){throw new Error(`Error unsubscribing from event: ${t}, subscription: ${e}`)}}};async function tk(e,t,n){const r=await fetch(e,{method:"POST",body:JSON.stringify({FixedAmountRequest:{recipient:t}}),headers:{"Content-Type":"application/json",...n||{}}});if(r.status===429)throw new zA("Too many requests from this client have been sent to the faucet. Please retry later");let s;try{s=await r.json()}catch(i){throw new Error(`Ecountered error when parsing response from faucet, error: ${i}, status ${r.status}, response ${r}`)}if(s.error)throw new Error(`Faucet returns error: ${s.error}`);return s}var Ar,Pa=class{constructor(e){Js(this,Ar,void 0),Ys(this,Ar,e)}get fullnode(){return Re(this,Ar).fullnode}get websocket(){return Re(this,Ar).websocket||Re(this,Ar).fullnode}get faucet(){return Re(this,Ar).faucet}};Ar=new WeakMap;new Pa({fullnode:"http://127.0.0.1:9000",faucet:"http://127.0.0.1:9123/gas"});var nk=new Pa({fullnode:"https://fullnode.devnet.sui.io:443/",faucet:"https://faucet.devnet.sui.io/gas"});new Pa({fullnode:"https://fullnode.testnet.sui.io:443/",faucet:"https://faucet.testnet.sui.io/gas"});function sn(e,t){return vu(e,t)}var jo=Symbol("transaction-argument-type"),rk=e=>Z([S({None:j(null)}),S({Some:e})]),Ti=S({kind:j("Input"),index:yt(),value:R(mt()),type:R(Z([j("pure"),j("object")]))}),pl=[Ti,S({kind:j("GasCoin")}),S({kind:j("Result"),index:yt()}),S({kind:j("NestedResult"),index:yt(),resultIndex:yt()})],sk=Z([...pl]),Cs=Z([...pl]);Cs[jo]={kind:"object"};var Eg=e=>{const t=Z([...pl]);return t[jo]={kind:"pure",type:e},t},Bg=S({kind:j("MoveCall"),target:kt("target",f().validator),typeArguments:C(f()),arguments:C(sk)}),Ig=S({kind:j("TransferObjects"),objects:C(Cs),address:Eg(F.ADDRESS)}),Cg=S({kind:j("SplitCoins"),coin:Cs,amounts:C(Eg("u64"))}),Og=S({kind:j("MergeCoins"),destination:Cs,sources:C(Cs)}),$g=S({kind:j("MakeMoveVec"),type:R(rk(f())),objects:C(Cs)}),Rg=S({kind:j("Publish"),modules:C(C(yt())),dependencies:C(De)}),Pg=[Bg,Ig,Cg,Og,Rg,$g],Ug=Z([...Pg]);function ik(e){return jr(e,Ug),Pg.find(t=>Ue(e,t))}var vr={MoveCall(e){return sn({kind:"MoveCall",target:e.target,arguments:e.arguments??[],typeArguments:e.typeArguments??[]},Bg)},TransferObjects(e,t){return sn({kind:"TransferObjects",objects:e,address:t},Ig)},SplitCoins(e,t){return sn({kind:"SplitCoins",coin:e,amounts:t},Cg)},MergeCoins(e,t){return sn({kind:"MergeCoins",destination:e,sources:t},Og)},Publish(e,t){return sn({kind:"Publish",modules:e,dependencies:t},Rg)},MakeMoveVec({type:e,objects:t}){return sn({kind:"MakeMoveVec",type:e?{Some:e}:{None:null},objects:t},$g)}},ok=/^vector<(.+)>$/,ak=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,Ir=class{static parseFromStr(e,t=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const n=e.match(ok);if(n)return{vector:Ir.parseFromStr(n[1],t)};const r=e.match(ak);if(r)return{struct:{address:t?He(r[1]):r[1],module:r[2],name:r[3],typeParams:r[5]===void 0?[]:Ir.parseStructTypeArgs(r[5],t)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,t=!1){const n=[];let r="",s=0;for(let i=0;i<e.length;i++){const o=e[i];if(o==="<"&&s++,o===">"&&s--,s===0&&o===","){n.push(r.trim()),r="";continue}r+=o}return n.push(r.trim()),n.map(i=>Ir.parseFromStr(i,t))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${Ir.tagToString(e.vector)}>`;if("struct"in e){const t=e.struct,n=t.typeParams.map(Ir.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}},qg="Argument",dn="vector",ck="Option",uk="CallArg",Od="TypeTag",lk="ProgrammableTransaction",qc="ProgrammableMoveCall",Ng="Transaction",gl="EnumKind",dk=[gl,Ng],rr=[gl,qg],Dg="SimpleProgrammableMoveCall",lr=new F(pg).registerStructType(lk,{inputs:[dn,uk],transactions:[dn,dk]}).registerEnumType(qg,{GasCoin:null,Input:{index:F.U16},Result:{index:F.U16},NestedResult:{index:F.U16,resultIndex:F.U16}}).registerStructType(qc,{package:F.ADDRESS,module:F.STRING,function:F.STRING,type_arguments:[dn,Od],arguments:[dn,rr]}).registerEnumType(Ng,{MoveCall:Dg,TransferObjects:{objects:[dn,rr],address:rr},SplitCoins:{coin:rr,amounts:[dn,rr]},MergeCoins:{destination:rr,sources:[dn,rr]},Publish:{modules:[dn,[dn,F.U8]],dependencies:[dn,F.ADDRESS]},MakeMoveVec:{type:[ck,Od],objects:[dn,rr]}});lr.registerType([gl,"T"],function(t,n,r,s){const o={[n.kind]:n},[a]=r;return this.getTypeInterface(a)._encodeRaw.call(this,t,o,r,s)},function(t,n,r){const[s]=n,i=this.getTypeInterface(s)._decodeRaw.call(this,t,n,r),o=Object.keys(i)[0];return{kind:o,...i[o]}},e=>{if(typeof e!="object"&&!("kind"in e))throw new Error(`EnumKind: Missing property "kind" in the input ${JSON.stringify(e)}`);return!0});lr.registerType(Dg,function(t,n,r,s){const[i,o,a]=n.target.split("::"),c=n.typeArguments.map(u=>Ir.parseFromStr(u,!0));return this.getTypeInterface(qc)._encodeRaw.call(this,t,{package:He(i),module:o,function:a,type_arguments:c,arguments:n.arguments},r,s)},function(t,n,r){let s=lr.getTypeInterface(qc)._decodeRaw.call(this,t,n,r);return{target:[s.package,s.module,s.function].join("::"),arguments:s.arguments,typeArguments:s.type_arguments.map(Ir.tagToString)}},e=>e.target.split("::").length===3);var fk=Z([S({ImmOrOwned:An}),S({Shared:S({objectId:f(),initialSharedVersion:Z([yt(),f()]),mutable:se()})})]),Nc=S({Pure:C(yt())}),hk=S({Object:fk}),ai=Z([Nc,hk]),qn={Pure(e,t){return{Pure:Array.from(e instanceof Uint8Array?e:lr.ser(t,e).toBytes())}},ObjectRef({objectId:e,digest:t,version:n}){return{Object:{ImmOrOwned:{digest:t,version:n,objectId:He(e)}}}},SharedObjectRef({objectId:e,mutable:t,initialSharedVersion:n}){return{Object:{Shared:{mutable:t,initialSharedVersion:n,objectId:He(e)}}}}};function $d(e){return typeof e=="string"?He(e):"ImmOrOwned"in e.Object?He(e.Object.ImmOrOwned.objectId):He(e.Object.Shared.objectId)}function pk(e){return typeof e=="object"&&"Object"in e&&"Shared"in e.Object?e.Object.Shared:void 0}function gk(e){var t;return((t=pk(e))==null?void 0:t.mutable)??!1}var yk="ascii",bk="String",mk="string",wk="String",_k="option",vk="Option",Tk={address:hg,module:dA,name:fA},Sk={address:fl,module:yk,name:bk},xk={address:fl,module:mk,name:wk},Ak={address:fl,module:_k,name:vk},Qi=(e,t)=>e.address===t.address&&e.module===t.module&&e.name===t.name;function kk(e){var n;const t=(n=vg(e))==null?void 0:n.Struct;return(t==null?void 0:t.address)==="0x2"&&(t==null?void 0:t.module)==="tx_context"&&(t==null?void 0:t.name)==="TxContext"}function sc(e,t){if(!(typeof t>"u")&&typeof t!==e)throw new Error(`Expect ${t} to be ${e}, received ${typeof t}`)}var Ek=["Address","Bool","U8","U16","U32","U64","U128","U256"];function Dc(e,t){if(typeof e=="string"&&Ek.includes(e)){if(e in["U8","U16","U32","U64","U128","U256"])sc("number",t);else if(e==="Bool")sc("boolean",t);else if(e==="Address"&&(sc("string",t),t&&!Pn(t)))throw new Error("Invalid Sui Address");return e.toLowerCase()}else if(typeof e=="string")throw new Error(`Unknown pure normalized type ${JSON.stringify(e,null,2)}`);if("Vector"in e){if((t===void 0||typeof t=="string")&&e.Vector==="U8")return"string";if(t!==void 0&&!Array.isArray(t))throw new Error(`Expect ${t} to be a array, received ${typeof t}`);const n=Dc(e.Vector,t?t[0]:void 0);return n===void 0?void 0:`vector<${n}>`}if("Struct"in e){if(Qi(e.Struct,Sk))return"string";if(Qi(e.Struct,xk))return"utf8string";if(Qi(e.Struct,Tk))return"address";if(Qi(e.Struct,Ak)){const n={Vector:e.Struct.typeArguments[0]};return Dc(n,t)}}}function Bk(e,t){const n=Array.from(`${e}::`).map(s=>s.charCodeAt(0)),r=new Uint8Array(n.length+t.length);return r.set(n),r.set(t,n.length),Ch(r,{dkLen:32})}var Ik=R(re(Z([S({Epoch:yt()}),S({None:Z([j(!0),j(null)])})]))),Mg=f(),Rd=kt("StringEncodedBigint",e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}}),Ck=S({budget:R(Rd),price:R(Rd),payment:R(C(An)),owner:R(Mg)}),eo=S({version:j(1),sender:R(Mg),expiration:Ik,gasConfig:Ck,inputs:C(Ti),transactions:C(Ug)});function Pd(e){return He(e).replace("0x","")}var Ud=128*1024,dr=class{constructor(e){this.version=1,this.sender=e==null?void 0:e.sender,this.expiration=e==null?void 0:e.expiration,this.gasConfig=(e==null?void 0:e.gasConfig)??{},this.inputs=(e==null?void 0:e.inputs)??[],this.transactions=(e==null?void 0:e.transactions)??[]}static fromKindBytes(e){const t=lr.de("TransactionKind",e),n=t==null?void 0:t.ProgrammableTransaction;if(!n)throw new Error("Unable to deserialize from bytes.");const r=sn({version:1,gasConfig:{},inputs:n.inputs.map((s,i)=>sn({kind:"Input",value:s,index:i,type:Ue(s,Nc)?"pure":"object"},Ti)),transactions:n.transactions},eo);return dr.restore(r)}static fromBytes(e){var i;const t=lr.de("TransactionData",e),n=t==null?void 0:t.V1,r=(i=n==null?void 0:n.kind)==null?void 0:i.ProgrammableTransaction;if(!n||!r)throw new Error("Unable to deserialize from bytes.");const s=sn({version:1,sender:n.sender,expiration:n.expiration,gasConfig:n.gasData,inputs:r.inputs.map((o,a)=>sn({kind:"Input",value:o,index:a,type:Ue(o,Nc)?"pure":"object"},Ti)),transactions:r.transactions},eo);return dr.restore(s)}static restore(e){jr(e,eo);const t=new dr;return Object.assign(t,e),t}static getDigestFromBytes(e){const t=Bk("TransactionData",e);return ma(t)}build({overrides:e,onlyTransactionKind:t}={}){const n=this.inputs.map(c=>(jr(c.value,ai),c.value)),r={ProgrammableTransaction:{inputs:n,transactions:this.transactions}};if(t)return lr.ser("TransactionKind",r,{maxSize:Ud}).toBytes();const s=(e==null?void 0:e.expiration)??this.expiration,i=(e==null?void 0:e.sender)??this.sender,o={...this.gasConfig,...e==null?void 0:e.gasConfig};if(!i)throw new Error("Missing transaction sender");if(!o.budget)throw new Error("Missing gas budget");if(!o.payment)throw new Error("Missing gas payment");if(!o.price)throw new Error("Missing gas price");const a={sender:Pd(i),expiration:s||{None:!0},gasData:{payment:o.payment,owner:Pd(this.gasConfig.owner??i),price:BigInt(o.price),budget:BigInt(o.budget)},kind:{ProgrammableTransaction:{inputs:n,transactions:this.transactions}}};return lr.ser("TransactionData",{V1:a},{maxSize:Ud}).toBytes()}getDigest(){const e=this.build({onlyTransactionKind:!1});return dr.getDigestFromBytes(e)}snapshot(){return sn(this,eo)}};function Ok(e){const t={kind:"Result",index:e},n=[],r=s=>n[s]??(n[s]={kind:"NestedResult",index:e,resultIndex:s});return new Proxy(t,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,i){if(i in s)return Reflect.get(s,i);if(i===Symbol.iterator)return function*(){let a=0;for(;;)yield r(a),a++};if(typeof i=="symbol")return;const o=parseInt(i,10);if(!(Number.isNaN(o)||o<0))return r(o)}})}function ei(e){if(!e)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e}var qd=Symbol.for("@mysten/transaction"),Mc=256,$k=1e9,Rk=10n,Ae,go,Lc,yl,Lg,yo,jc,Hc=class{constructor(e){Js(this,go),Js(this,yl),Js(this,yo),Js(this,Ae,void 0),Ys(this,Ae,new dr(e?e.blockData:void 0))}static is(e){return!!e&&typeof e=="object"&&e[qd]===!0}static fromKind(e){const t=new Hc;return Ys(t,Ae,dr.fromKindBytes(typeof e=="string"?Hn(e):e)),t}static from(e){const t=new Hc;return typeof e!="string"||!e.startsWith("{")?Ys(t,Ae,dr.fromBytes(typeof e=="string"?Hn(e):e)):Ys(t,Ae,dr.restore(JSON.parse(e))),t}static get Transactions(){return vr}static get Inputs(){return qn}setSender(e){Re(this,Ae).sender=e}setSenderIfNotSet(e){Re(this,Ae).sender||(Re(this,Ae).sender=e)}setExpiration(e){Re(this,Ae).expiration=e}setGasPrice(e){Re(this,Ae).gasConfig.price=String(e)}setGasBudget(e){Re(this,Ae).gasConfig.budget=String(e)}setGasOwner(e){Re(this,Ae).gasConfig.owner=e}setGasPayment(e){if(e.length>=Mc)throw new Error(`Payment objects exceed maximum amount ${Mc}`);Re(this,Ae).gasConfig.payment=e.map(t=>Tu(t,An))}get blockData(){return Re(this,Ae).snapshot()}get[qd](){return!0}get gas(){return{kind:"GasCoin"}}object(e){const t=$d(e);return Re(this,Ae).inputs.find(r=>r.type==="object"&&t===$d(r.value))??Qs(this,go,Lc).call(this,"object",e)}objectRef(...e){return this.object(qn.ObjectRef(...e))}sharedObjectRef(...e){return this.object(qn.SharedObjectRef(...e))}pure(e,t){return Qs(this,go,Lc).call(this,"pure",e instanceof Uint8Array?qn.Pure(e):t?qn.Pure(e,t):e)}add(e){const t=Re(this,Ae).transactions.push(e);return Ok(t-1)}splitCoins(...e){return this.add(vr.SplitCoins(...e))}mergeCoins(...e){return this.add(vr.MergeCoins(...e))}publish(...e){return this.add(vr.Publish(...e))}moveCall(...e){return this.add(vr.MoveCall(...e))}transferObjects(...e){return this.add(vr.TransferObjects(...e))}makeMoveVec(...e){return this.add(vr.MakeMoveVec(...e))}serialize(){return JSON.stringify(Re(this,Ae).snapshot())}async build({provider:e,onlyTransactionKind:t}={}){return await Qs(this,yo,jc).call(this,{provider:e,onlyTransactionKind:t}),Re(this,Ae).build({onlyTransactionKind:t})}async getDigest({provider:e}={}){return await Qs(this,yo,jc).call(this,{provider:e}),Re(this,Ae).getDigest()}},Me=Hc;Ae=new WeakMap;go=new WeakSet;Lc=function(e,t){const n=Re(this,Ae).inputs.length,r=sn({kind:"Input",value:typeof t=="bigint"?String(t):t,index:n,type:e},Ti);return Re(this,Ae).inputs.push(r),r};yl=new WeakSet;Lg=async function(e){const t=Re(this,Ae).gasConfig.owner??Re(this,Ae).sender,r=(await ei(e).getCoins({owner:t,coinType:hA})).data.filter(s=>!Re(this,Ae).inputs.find(o=>Ue(o.value,ai)&&"Object"in o.value&&"ImmOrOwned"in o.value.Object?s.coinObjectId===o.value.Object.ImmOrOwned.objectId:!1)).slice(0,Mc-1).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!r.length)throw new Error("No valid gas coins found for the transaction.");return r};yo=new WeakSet;jc=async function({provider:e,onlyTransactionKind:t}){var o;if(!t&&!Re(this,Ae).sender)throw new Error("Missing transaction sender");const{inputs:n,transactions:r}=Re(this,Ae),s=[],i=[];if(r.forEach(a=>{if(a.kind==="MoveCall"){a.arguments.some(d=>d.kind==="Input"&&!Ue(n[d.index].value,ai))&&s.push(a);return}const c=ik(a);c.schema&&Object.entries(a).forEach(([u,d])=>{if(u==="kind")return;const l=c.schema[u],p=l.type==="array",g=p?l.schema[jo]:l[jo];if(!g)return;const w=h=>{const y=n[h];if(!y)throw new Error(`Missing input ${d.index}`);if(!Ue(y.value,ai))if(g.kind==="object"&&typeof y.value=="string")i.push({id:y.value,input:y});else if(g.kind==="pure")y.value=qn.Pure(y.value,g.type);else throw new Error("Unexpected input format.")};if(p)d.forEach(h=>{h.kind==="Input"&&w(h.index)});else{if(d.kind!=="Input")return;w(d.index)}})}),s.length&&await Promise.all(s.map(async a=>{const[c,u,d]=a.target.split("::"),l=await ei(e).getNormalizedMoveFunction({package:xn(c),module:u,function:d}),g=l.parameters.length>0&&kk(l.parameters.at(-1))?l.parameters.slice(0,l.parameters.length-1):l.parameters;if(g.length!==a.arguments.length)throw new Error("Incorrect number of arguments.");g.forEach((w,h)=>{const y=a.arguments[h];if(y.kind!=="Input")return;const v=n[y.index];if(Ue(v.value,ai))return;const m=v.value,b=Dc(w,m);if(b){v.value=qn.Pure(m,b);return}if(vg(w)!=null||typeof w=="object"&&"TypeParameter"in w){if(typeof m!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(m,null,2)}`);i.push({id:m,input:v,normalizedType:w});return}throw new Error(`Unknown call arg type ${JSON.stringify(w,null,2)} for value ${JSON.stringify(m,null,2)}`)})})),i.length){const a=[...new Set(i.map(({id:l})=>l))],c=await ei(e).multiGetObjects({ids:a,options:{showOwner:!0}});let u=new Map(a.map((l,p)=>[l,c[p]]));const d=Array.from(u).filter(([l,p])=>p.error).map(([l,p])=>l);if(d.length)throw new Error(`The following input objects are not invalid: ${d.join(", ")}`);i.forEach(({id:l,input:p,normalizedType:g})=>{const w=u.get(l),h=Ox(w);if(h){const y=gk(p.value)||g!=null&&_g(g)!=null;p.value=qn.SharedObjectRef({objectId:l,initialSharedVersion:h,mutable:y})}else p.value=qn.ObjectRef(og(w))})}if(!t&&(Re(this,Ae).gasConfig.price||this.setGasPrice(await ei(e).getReferenceGasPrice()),Re(this,Ae).gasConfig.payment||(Re(this,Ae).gasConfig.payment=await Qs(this,yl,Lg).call(this,e)),!this.blockData.gasConfig.budget)){const a=await ei(e).dryRunTransactionBlock({transactionBlock:Re(this,Ae).build({overrides:{gasConfig:{budget:String($k),payment:[]}}})});if(a.effects.status.status!=="success")throw new Error("Dry run failed, could not automatically determine a budget",{cause:a});const c=Rk*BigInt(((o=this.blockData.gasConfig.payment)==null?void 0:o.length)||0n)*BigInt(this.blockData.gasConfig.price||1n);this.setGasBudget(BigInt(a.effects.gasUsed.computationCost)+BigInt(a.effects.gasUsed.storageCost)+c)}};var Pk=S({currentTps:V(),tps30Days:V(),currentCheckpoint:f(),currentEpoch:f(),totalAddresses:f(),totalObjects:f(),totalPackages:f()}),Uk=S({lastCheckpointId:f(),epochEndTimestamp:f(),protocolVersion:f(),referenceGasPrice:f(),totalStake:f(),storageFundReinvestment:f(),storageCharge:f(),storageRebate:f(),storageFundBalance:f(),stakeSubsidyAmount:f(),totalGasFees:f(),totalStakeRewardsDistributed:f(),leftoverStorageFundInflow:f()}),jg=S({epoch:f(),validators:C(Tg),epochTotalTransactions:f(),firstCheckpointId:f(),epochStartTimestamp:f(),endOfEpochInfo:re(Uk)}),qk=S({data:C(jg),nextCursor:re(f()),hasNextPage:se()}),Nk="0.29.0",Nd={skipDataValidation:!0,socketOptions:kg,versionCacheTimeoutInSeconds:600},Dk=class{constructor(e=nk,t=Nd){this.options=t,this.connection=e;const n={...Nd,...t};this.options=n,this.client=n.rpcClient??new FA(this.connection.fullnode),this.wsClient=n.websocketClient??new ek(this.connection.websocket,n.skipDataValidation,n.socketOptions)}async getRpcApiVersion(){if(this.rpcApiVersion&&this.cacheExpiry&&this.cacheExpiry<=Date.now())return this.rpcApiVersion;try{const e=await this.client.requestWithType("rpc.discover",[],mt(),this.options.skipDataValidation);return this.rpcApiVersion=wA(e.info.version),this.cacheExpiry=Date.now()+(this.options.versionCacheTimeoutInSeconds??0)*1e3,this.rpcApiVersion}catch(e){console.warn("Error fetching version number of the RPC API",e)}}async requestSuiFromFaucet(e,t){if(!this.connection.faucet)throw new Error("Faucet URL is not specified");return tk(this.connection.faucet,e,t)}async getCoins(e){if(!e.owner||!Pn(He(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getCoins",[e.owner,e.coinType,e.cursor,e.limit],kd,this.options.skipDataValidation)}async getAllCoins(e){if(!e.owner||!Pn(He(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getAllCoins",[e.owner,e.cursor,e.limit],kd,this.options.skipDataValidation)}async getBalance(e){if(!e.owner||!Pn(He(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getBalance",[e.owner,e.coinType],Ed,this.options.skipDataValidation)}async getAllBalances(e){if(!e.owner||!Pn(He(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getAllBalances",[e.owner],C(Ed),this.options.skipDataValidation)}async getCoinMetadata(e){return await this.client.requestWithType("suix_getCoinMetadata",[e.coinType],gA,this.options.skipDataValidation)}async getTotalSupply(e){return await this.client.requestWithType("suix_getTotalSupply",[e.coinType],DA,this.options.skipDataValidation)}async call(e,t){const n=await this.client.request(e,t);if(Ue(n,Ag))throw new Uc({req:{method:e,args:t},code:n.error.code,data:n.error.data,cause:new Error(n.error.message)});return n.result}async getMoveFunctionArgTypes(e){return await this.client.requestWithType("sui_getMoveFunctionArgTypes",[e.package,e.module,e.function],TA,this.options.skipDataValidation)}async getNormalizedMoveModulesByPackage(e){return await this.client.requestWithType("sui_getNormalizedMoveModulesByPackage",[e.package],BA,this.options.skipDataValidation)}async getNormalizedMoveModule(e){return await this.client.requestWithType("sui_getNormalizedMoveModule",[e.package,e.module],wg,this.options.skipDataValidation)}async getNormalizedMoveFunction(e){return await this.client.requestWithType("sui_getNormalizedMoveFunction",[e.package,e.module,e.function],bg,this.options.skipDataValidation)}async getNormalizedMoveStruct(e){return await this.client.requestWithType("sui_getNormalizedMoveStruct",[e.package,e.module,e.struct],mg,this.options.skipDataValidation)}async getOwnedObjects(e){if(!e.owner||!Pn(He(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getOwnedObjects",[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit],Px,this.options.skipDataValidation)}async getObject(e){if(!e.id||!Ji(xn(e.id)))throw new Error("Invalid Sui Object id");return await this.client.requestWithType("sui_getObject",[e.id,e.options],ho,this.options.skipDataValidation)}async multiGetObjects(e){if(e.ids.forEach(n=>{if(!n||!Ji(xn(n)))throw new Error(`Invalid Sui Object id ${n}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.client.requestWithType("sui_multiGetObjects",[e.ids,e.options],C(ho),this.options.skipDataValidation)}async queryTransactionBlocks(e){return await this.client.requestWithType("suix_queryTransactionBlocks",[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"],uA,this.options.skipDataValidation)}async getTransactionBlock(e){if(!Td(e.digest))throw new Error("Invalid Transaction digest");return await this.client.requestWithType("sui_getTransactionBlock",[e.digest,e.options],po,this.options.skipDataValidation)}async multiGetTransactionBlocks(e){if(e.digests.forEach(n=>{if(!Td(n))throw new Error(`Invalid Transaction digest ${n}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.client.requestWithType("sui_multiGetTransactionBlocks",[e.digests,e.options],C(po),this.options.skipDataValidation)}async executeTransactionBlock(e){return await this.client.requestWithType("sui_executeTransactionBlock",[typeof e.transactionBlock=="string"?e.transactionBlock:$r(e.transactionBlock),Array.isArray(e.signature)?e.signature:[e.signature],e.options,e.requestType],po,this.options.skipDataValidation)}async getTotalTransactionBlocks(){const e=await this.client.requestWithType("sui_getTotalTransactionBlocks",[],f(),this.options.skipDataValidation);return BigInt(e)}async getReferenceGasPrice(){const e=await this.client.requestWithType("suix_getReferenceGasPrice",[],f(),this.options.skipDataValidation);return BigInt(e)}async getStakes(e){if(!e.owner||!Pn(He(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getStakes",[e.owner],C(Ad),this.options.skipDataValidation)}async getStakesByIds(e){return e.stakedSuiIds.forEach(t=>{if(!t||!Ji(xn(t)))throw new Error(`Invalid Sui Stake id ${t}`)}),await this.client.requestWithType("suix_getStakesByIds",[e.stakedSuiIds],C(Ad),this.options.skipDataValidation)}async getLatestSuiSystemState(){return await this.client.requestWithType("suix_getLatestSuiSystemState",[],qA,this.options.skipDataValidation)}async queryEvents(e){return await this.client.requestWithType("suix_queryEvents",[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"],Ux,this.options.skipDataValidation)}async subscribeEvent(e){return this.wsClient.subscribeEvent(e.filter,e.onMessage)}async unsubscribeEvent(e){return this.wsClient.unsubscribeEvent(e.id)}async devInspectTransactionBlock(e){let t;if(Me.is(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),t=$r(await e.transactionBlock.build({provider:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")t=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)t=$r(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.client.requestWithType("sui_devInspectTransactionBlock",[e.sender,t,e.gasPrice,e.epoch],eA,this.options.skipDataValidation)}async dryRunTransactionBlock(e){return await this.client.requestWithType("sui_dryRunTransactionBlock",[typeof e.transactionBlock=="string"?e.transactionBlock:$r(e.transactionBlock)],lA,this.options.skipDataValidation)}async getDynamicFields(e){if(!e.parentId||!Ji(xn(e.parentId)))throw new Error("Invalid Sui Object id");return await this.client.requestWithType("suix_getDynamicFields",[e.parentId,e.cursor,e.limit],ZA,this.options.skipDataValidation)}async getDynamicFieldObject(e){return await this.client.requestWithType("suix_getDynamicFieldObject",[e.parentId,e.name],ho,this.options.skipDataValidation)}async getLatestCheckpointSequenceNumber(){const e=await this.client.requestWithType("sui_getLatestCheckpointSequenceNumber",[],f(),this.options.skipDataValidation);return String(e)}async getCheckpoint(e){return await this.client.requestWithType("sui_getCheckpoint",[e.id],xg,this.options.skipDataValidation)}async getCheckpoints(e){return await this.client.requestWithType("sui_getCheckpoints",[e.cursor,e.limit,e.descendingOrder],HA,this.options.skipDataValidation)}async getCommitteeInfo(e){return await this.client.requestWithType("suix_getCommitteeInfo",[e==null?void 0:e.epoch],UA)}async getNetworkMetrics(){return await this.client.requestWithType("suix_getNetworkMetrics",[],Pk,this.options.skipDataValidation)}async getEpochs(e){return await this.client.requestWithType("suix_getEpochs",[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder],qk,this.options.skipDataValidation)}async getCurrentEpoch(){return await this.client.requestWithType("suix_getCurrentEpoch",[],jg,this.options.skipDataValidation)}};xn("0x5");var Mk=function(){function e(t,n,r){r===void 0&&(r=0),this.startVertex=t,this.endVertex=n,this.weight=r}return e.prototype.getKey=function(){var t=this.startVertex.getKey(),n=this.endVertex.getKey();return t+"_"+n},e.prototype.reverse=function(){var t=this.startVertex;return this.startVertex=this.endVertex,this.endVertex=t,this},e.prototype.clone=function(){return new e(this.startVertex,this.endVertex,this.weight)},e.prototype.toString=function(){return this.getKey()},e}();function Gc(e,t,n){if(n===void 0&&(n="ss-graph"),!e)throw new Error((n?"["+n+"]":"")+" Invariant failed: "+t)}function Lk(e,t){t===void 0&&(t=!0);var n=typeof e<"u"&&e!==null;return t?n&&e!=="undefined"&&e!=="null":n}var Dd=function(){function e(t){Gc(Lk(t),"Graph vertex must have a value"),this.value=t,this.edges=new Map}return e.prototype.addEdge=function(t){return this.edges.set(t.getKey(),t),this},e.prototype.deleteEdge=function(t){this.edges.delete(t.getKey())},e.prototype.getNeighbors=function(){var t=this,n=this.getEdges(),r=function(s){return s.startVertex===t?s.endVertex:s.startVertex};return n.map(r)},e.prototype.getEdges=function(){return Array.from(this.edges.values())},e.prototype.getDegree=function(){return this.getEdges().length},e.prototype.hasEdge=function(t){var n=this.getEdges().find(function(r){return r===t});return!!n},e.prototype.hasNeighbor=function(t){var n=this.getEdges().find(function(r){return r.startVertex===t||r.endVertex===t});return!!n},e.prototype.findEdge=function(t){var n=function(s){return s.startVertex===t||s.endVertex===t},r=this.getEdges().find(n);return r||null},e.prototype.getKey=function(){return this.value},e.prototype.deleteAllEdges=function(){var t=this;return this.getEdges().forEach(function(n){return t.deleteEdge(n)}),this},e.prototype.toString=function(t){return t?t(this.value):""+this.value},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function ic(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return c([u,d])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(d){u=[6,d],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Md(e,t,n,r){if(e){t.push(e),r.set(e.getKey(),!0);var s=e.getNeighbors().filter(function(i){return!r.get(i.getKey())});n.push(s)}}function Ld(e,t,n){var r=e.pop();r&&n.set(r.getKey(),!1),t.pop()}var jk=function(){function e(t){t===void 0&&(t=!1),this.vertices={},this.edges={},this.isDirected=t}return e.prototype.addVertex=function(t){return this.vertices[t.getKey()]=t,this},e.prototype.getVertexByKey=function(t){return this.vertices[t]},e.prototype.getNeighbors=function(t){return t.getNeighbors()},e.prototype.getAllVertices=function(){return Object.values(this.vertices)},e.prototype.getAllEdges=function(){return Object.values(this.edges)},e.prototype.addEdge=function(t,n){if(n===void 0&&(n=!1),this.edges[t.getKey()]){if(n)return this;Gc(!1,"Edge has already been added before")}var r=this.getVertexByKey(t.startVertex.getKey()),s=this.getVertexByKey(t.endVertex.getKey());if(r||(this.addVertex(t.startVertex),r=this.getVertexByKey(t.startVertex.getKey())),s||(this.addVertex(t.endVertex),s=this.getVertexByKey(t.endVertex.getKey())),this.edges[t.getKey()]=t,this.isDirected)r.addEdge(t);else{r.addEdge(t);var i=t.clone();s.addEdge(i.reverse())}return this},e.prototype.deleteEdge=function(t,n){if(n===void 0&&(n=!1),!this.edges[t.getKey()]){if(n)return this;Gc(!1,"Edge not found in graph")}delete this.edges[t.getKey()];var r=this.getVertexByKey(t.startVertex.getKey()),s=this.getVertexByKey(t.endVertex.getKey());return r.deleteEdge(t),s.deleteEdge(t),this},e.prototype.findEdge=function(t,n){var r=this.getVertexByKey(t.getKey());return r?r.findEdge(n):null},e.prototype.getWeight=function(){return this.getAllEdges().reduce(function(t,n){return t+n.weight},0)},e.prototype.reverse=function(){var t=this;return this.getAllEdges().forEach(function(n){t.deleteEdge(n),n.reverse(),t.addEdge(n)}),this},e.prototype.getVerticesIndices=function(){var t={};return this.getAllVertices().forEach(function(n,r){t[n.getKey()]=r}),t},e.prototype.getAdjacencyMatrix=function(){var t=this,n=this.getAllVertices(),r=this.getVerticesIndices(),s=Array(n.length).fill(null).map(function(){return Array(n.length).fill(1/0)});return n.forEach(function(i,o){i.getNeighbors().forEach(function(a){var c=r[a.getKey()],u=t.findEdge(i,a);u&&(s[o][c]=u.weight)})}),s},e.prototype.toString=function(){return Object.keys(this.vertices).toString()},e.prototype.bfs=function(t){var n,r,s;return ic(this,function(i){switch(i.label){case 0:n=new Map,r=new o0,r.enqueue(t),i.label=1;case 1:return r.isEmpty()?[3,4]:(s=r.dequeue(),s&&!n.has(s.getKey())?[4,s]:[3,3]);case 2:i.sent(),n.set(s.getKey(),s),s.getNeighbors().forEach(function(o){return r.enqueue(o)}),i.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.dfs=function(t){var n,r,s;return ic(this,function(i){switch(i.label){case 0:n=new Map,r=new Ma,r.push(t),i.label=1;case 1:return r.isEmpty()?[3,4]:(s=r.pop(),s&&!n.has(s.getKey())?[4,s]:[3,3]);case 2:i.sent(),n.set(s.getKey(),s),s.getNeighbors().forEach(function(o){return r.push(o)}),i.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.findAllPath=function(t,n){var r,s,i,o,a,c,u;return ic(this,function(d){switch(d.label){case 0:return r=[],t!==n?[3,2]:(r.push(t),[4,r]);case 1:return d.sent(),[2];case 2:s=new Map,i=new Ma,o=new Ma,Md(t,i,o,s),d.label=3;case 3:if(i.isEmpty())return[3,6];if(a=o.pop(),a&&a.length)c=a.shift(),o.push(a),c&&Md(c,i,o,s);else return o.push(a),Ld(i,o,s),[3,3];u=i.peek;debugger;return u!==n?[3,5]:[4,i.toArray()];case 4:d.sent(),Ld(i,o,s),d.label=5;case 5:return[3,3];case 6:return[2]}})},e}(),Pe="0x0000000000000000000000000000000000000000000000000000000000000006",Vt="pool_script",Hg="fetcher_script",yn=75e5,Cr=12e6,ci=3e7,Gg=55e6,jd="PoolLiquidityCoin";function Hk(e){return e.startsWith("0x")?e:`0x${e}`}var Gk=0,zg=1,zk=2;function Hd(e,t){return e===t?Gk:e<t?zg:zk}function Vk(e,t){let n=0;const r=e.length<=t.length?e.length:t.length,s=Hd(e.length,t.length);for(;n<r;){const i=Hd(e.charCodeAt(n),t.charCodeAt(n));if(n+=1,i!==0)return i}return s}function bl(e,t){return Vk(e,t)===zg}function Si(e,...t){const n=Array.isArray(t[t.length-1])?t.pop():[];let s=[e,...t].filter(Boolean).join("::");return n&&n.length&&(s+=`<${n.join(", ")}>`),s}function Ie(e){var o;let t=e.replace(/\s/g,"");const n=t.match(/(<.+>)$/),r=(o=n==null?void 0:n[0])==null?void 0:o.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(r){t=t.slice(0,t.indexOf("<"));const c={...Ie(t),type_arguments:[...r]};return c.source_address=Si(c.full_address,c.type_arguments),c}const s=t.split("::"),i={full_address:t,address:s[2]==="SUI"?"0x2":xn(s[0]),module:s[1],name:s[2],type_arguments:[],source_address:""};return i.full_address=`${i.address}::${i.module}::${i.name}`,i.source_address=Si(i.full_address,i.type_arguments),i}var Fk="0x2::coin::Coin",Wk=/^0x2::coin::Coin<(.+)>$/,Kk="0x2::sui::SUI",Ve=class{static getCoinTypeArg(e){const t=e.type.match(Wk);return t?t[1]:null}static isSUI(e){const t=Ve.getCoinTypeArg(e);return t?Ve.getCoinSymbol(t)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getBalance(e){return BigInt(e.fields.balance)}static totalBalance(e,t){let n=BigInt(0);return e.forEach(r=>{t===r.coinAddress&&(n+=BigInt(r.balance))}),n}static getID(e){return e.fields.id.id}static getCoinTypeFromArg(e){return`${Fk}<${e}>`}static getFaucetCoins(e){const{events:t}=e,n=[];return t==null||t.forEach(r=>{const{type:s}=r;if(Ie(s).name==="InitEvent"){const i=r.parsedJson;n.push({transactionModule:r.transactionModule,address:i.address,suplyID:i.suplyID,decimals:i.decimals})}}),n}static getCoinAssets(e,t){const n=[];return t.forEach(r=>{r.coinAddress===e&&n.push(r)}),n}static isSuiCoin(e){return Ie(e).full_address===Kk}static selectCoinObjectIdGreaterThanOrEqual(e,t,n=[]){return Ve.selectCoinAssetGreaterThanOrEqual(e,t,n).map(r=>r.coinObjectId)}static selectCoinAssetGreaterThanOrEqual(e,t,n=[]){const r=Ve.sortByBalance(e.filter(a=>!n.includes(a.coinObjectId))),s=Ve.calculateTotalBalance(r);if(s<t)return[];if(s===t)return r;let i=BigInt(0);const o=[];for(;i<s;){const a=t-i,c=r.find(d=>d.balance>=a);if(c){o.push(c);break}const u=r.pop();u.balance>0&&(o.push(u),i+=u.balance)}return Ve.sortByBalance(o)}static sortByBalance(e){return e.sort((t,n)=>t.balance<n.balance?-1:t.balance>n.balance?1:0)}static sortByBalanceDes(e){return e.sort((t,n)=>t.balance>n.balance?-1:t.balance<n.balance?0:1)}static calculateTotalBalance(e){return e.reduce((t,n)=>t+n.balance,BigInt(0))}};function ml(e){const t=Ve.isSuiCoin(e.coinTypeA),n=Ve.isSuiCoin(e.coinTypeB);return{isAdjustCoinA:t,isAdjustCoinB:n}}var qe=class{static async adjustTransactionForGas(e,t,n,r){r.setSender(e.senderAddress);const s=Ve.selectCoinAssetGreaterThanOrEqual(t,n);if(s.length===0)throw new Error("Insufficient balance");if(Ve.calculateTotalBalance(t)-Ve.calculateTotalBalance(s)>25*1e3)return{fixAmount:n};const i=await qe.calculationTxGas(e,r);if(console.log("estimateGas: ",i),Ve.selectCoinAssetGreaterThanOrEqual(t,BigInt(i),s.map(a=>a.coinObjectId)).length===0){if(n-=BigInt(500),n-=BigInt(i),n<0)throw new Error("gas Insufficient balance");const a=new Me,c=a.splitCoins(a.gas,[a.pure(n)]);return a.setGasBudget(i+500),{fixAmount:n,fixCoinInput:c,newTx:a}}return{fixAmount:n}}static async buildAddLiquidityTransactionForGas(e,t,n,r){let s=await qe.buildAddLiquidityTransaction(e,t,n);const{isAdjustCoinA:i}=ml(n),o=i?n.amount_a:n.amount_b,a=await qe.adjustTransactionForGas(e,Ve.getCoinAssets(i?n.coinTypeA:n.coinTypeB,t),BigInt(o),s),{fixAmount:c}=a,{fixCoinInput:u}=a,{newTx:d}=a;if(u!==void 0&&d!==void 0){let l,p;if(i)n.amount_a=Number(c),l=u,p=qe.buildCoinInputForAmount(d,t,BigInt(n.amount_b),n.coinTypeB);else{n.amount_b=Number(c),l=qe.buildCoinInputForAmount(d,t,BigInt(n.amount_a),n.coinTypeA),p=u,n=qe.fixAddLiquidityFixTokenParams(n,r.slippage,r.curSqrtPrice);const g=e.sdkOptions.networkOptions.modules.cetus_integrate;return s=qe.buildAddLiquidityFixTokenArgs(d,g,n,l,p),s}}return s}static async buildAddLiquidityTransaction(e,t,n){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const r=!("delta_liquidity"in n);let s=new Me;const i=qe.buildCoinInputForAmount(s,t,BigInt(r?n.amount_a:n.max_amount_a),n.coinTypeA),o=qe.buildCoinInputForAmount(s,t,BigInt(r?n.amount_b:n.max_amount_b),n.coinTypeB),a=e.sdkOptions.networkOptions.modules.cetus_integrate;return r?(s.setGasBudget(n.is_open?ci:yn),s=qe.buildAddLiquidityFixTokenArgs(s,a,n,i,o)):(s.setGasBudget(yn),s=qe.buildAddLiquidityArgs(s,a,n,i,o)),s}static fixAddLiquidityFixTokenParams(e,t,n){const r=e.fix_amount_a?e.amount_a:e.amount_b,s=Or.estLiquidityAndcoinAmountFromOneAmounts(Number(e.tick_lower),Number(e.tick_upper),new E(r),e.fix_amount_a,!0,t,n);return e.amount_a=e.fix_amount_a?e.amount_a:s.tokenMaxA.toNumber(),e.amount_b=e.fix_amount_a?s.tokenMaxB.toNumber():e.amount_b,e}static buildAddLiquidityFixTokenArgs(e,t,n,r,s){const i=[n.coinTypeA,n.coinTypeB];let o="add_liquidity_fix_coin_with_all";const a=[];r&&a.push({coinInput:r,coinAmount:n.amount_a.toString()}),s&&a.push({coinInput:s,coinAmount:n.amount_b.toString()});const c=a.length===2;c?o=n.is_open?"open_position_with_liquidity_with_all":"add_liquidity_fix_coin_with_all":o=n.is_open?r!==void 0?"open_position_with_liquidity_only_a":"open_position_with_liquidity_only_b":r!==void 0?"add_liquidity_fix_coin_only_a":"add_liquidity_fix_coin_only_b";const u=n.is_open?c?[e.pure(n.pool_id),e.pure(Dn(BigInt(n.tick_lower)).toString()),e.pure(Dn(BigInt(n.tick_upper)).toString()),...a.map(d=>d.coinInput),...a.map(d=>e.pure(d.coinAmount)),e.pure(n.fix_amount_a),e.pure(Pe)]:[e.pure(n.pool_id),e.pure(Dn(BigInt(n.tick_lower)).toString()),e.pure(Dn(BigInt(n.tick_upper)).toString()),...a.map(d=>d.coinInput),...a.map(d=>e.pure(d.coinAmount)),e.pure(Pe)]:c?[e.pure(n.pool_id),e.pure(n.pos_id),...a.map(d=>d.coinInput),...a.map(d=>e.pure(d.coinAmount)),e.pure(n.fix_amount_a),e.pure(Pe)]:[e.pure(n.pool_id),e.pure(n.pos_id),...a.map(d=>d.coinInput),...a.map(d=>e.pure(d.coinAmount)),e.pure(Pe)];return e.moveCall({target:`${t}::${Vt}::${o}`,typeArguments:i,arguments:u}),e}static buildAddLiquidityArgs(e,t,n,r,s){const i=[n.coinTypeA,n.coinTypeB];let o="add_liquidity_with_all",a;const c=[];return r&&c.push(r),s&&c.push(s),c.length===2?o="add_liquidity_with_all":o=r!==void 0?"add_liquidity_only_a":"add_liquidity_only_b",r!==void 0&&s!==void 0?(o="add_liquidity_with_all",a=[e.pure(n.pool_id),e.pure(n.pos_id),r,s,e.pure(n.max_amount_a.toString()),e.pure(n.max_amount_b.toString()),e.pure(n.delta_liquidity),e.pure(Pe)]):a=[e.pure(n.pool_id),e.pure(n.pos_id),r!==void 0?r:s,e.pure(n.max_amount_a.toString()),e.pure(n.max_amount_b.toString()),e.pure(n.delta_liquidity),e.pure(Pe)],e.moveCall({target:`${t}::${Vt}::${o}`,typeArguments:i,arguments:a}),e}static async buildSwapTransactionForGas(e,t,n,r){let s=qe.buildSwapTransaction(e,t,n);const i=await qe.adjustTransactionForGas(e,Ve.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,n),BigInt(t.by_amount_in?t.amount:t.amount_limit),s),{fixAmount:o}=i,{fixCoinInput:a}=i,{newTx:c}=i;return a!==void 0&&c!==void 0&&(t.by_amount_in?t.amount=o.toString():t.amount_limit=o.toString(),t=qe.fixSwapParams(e,t,r),s=qe.buildSwapTransactionArgs(c,t,e.sdkOptions,a)),s}static buildSwapTransaction(e,t,n){let r=new Me;r.setGasBudget(Cr);const s=qe.buildCoinInputForAmount(r,n,BigInt(t.by_amount_in?t.amount:t.amount_limit),t.a2b?t.coinTypeA:t.coinTypeB);return r=qe.buildSwapTransactionArgs(r,t,e.sdkOptions,s),r}static buildSwapTransactionArgs(e,t,n,r){var l;const{modules:s}=n.networkOptions,i=wl.getDefaultSqrtPriceLimit(t.a2b),o=[t.coinTypeA,t.coinTypeB],a=(l=s.config)==null?void 0:l.global_config_id;if(a===void 0)throw Error("modules.config.global_config_id is undefined");const c=t.swap_partner!==void 0&&Pn(t.swap_partner),u=c?t.a2b?"swap_a2b_with_partner":"swap_b2a_with_partner":t.a2b?"swap_a2b":"swap_b2a",d=c?[e.pure(t.pool_id),e.pure(a),e.pure(t.swap_partner),r,e.pure(t.by_amount_in),e.pure(t.amount),e.pure(t.amount_limit),e.pure(i.toString()),e.pure(Pe)]:[e.pure(t.pool_id),e.pure(a),r,e.pure(t.by_amount_in),e.pure(t.amount),e.pure(t.amount_limit),e.pure(i.toString()),e.pure(Pe)];return e.moveCall({target:`${s.cetus_integrate}::${Vt}::${u}`,typeArguments:o,arguments:d}),e}static fixSwapParams(e,t,n){const r=e.Swap.calculateRates({decimalsA:n.decimalsA,decimalsB:n.decimalsB,a2b:t.a2b,byAmountIn:t.by_amount_in,amount:new E(t.amount),swapTicks:n.swapTicks,currentPool:n.currentPool}),s=n.byAmountIn?r.estimatedAmountOut:r.estimatedAmountIn,i=mE(s,n.slippage,!n.byAmountIn);return t.amount_limit=i.toString(),t}static async syncBuildCoinInputForAmount(e,t,n,r){const s=await e.Resources.getOwnerCoinAssets(e.senderAddress,r);return qe.buildCoinInputForAmount(t,s,n,r)}static buildCoinInputForAmount(e,t,n,r){const s=Ve.getCoinAssets(r,t);if(n===BigInt(0))return;const i=Ve.calculateTotalBalance(s);if(i<n)throw new Error(`The amount(${i}) is Insufficient balance for ${r} , expect ${n} `);if(Ve.isSuiCoin(r))return e.splitCoins(e.gas,[e.pure(n.toString())]);const o=Ve.selectCoinObjectIdGreaterThanOrEqual(s,n),[a,...c]=o,u=e.object(a);return c.length>0&&e.mergeCoins(u,c.map(d=>e.object(d))),u}static async calculationTxGas(e,t){let{sender:n}=t.blockData;n===void 0&&(n=e.sdkOptions.networkOptions.simulationAccount.address);const r=await e.fullClient.devInspectTransactionBlock({transactionBlock:t,sender:n}),{gasUsed:s}=r.effects;return Number(s.computationCost)+Number(s.storageCost)-Number(s.storageRebate)}},ft=class extends Error{constructor(t,n){super(t);we(this,"message");we(this,"errorCode");this.message=t,this.errorCode=n}static isClmmpoolsErrorCode(t,n){return t instanceof ft&&t.errorCode===n}},Gd=443636,zd=-443636,Ua="79226673515401279992447579055",qa="4295048016",fs=new E(1e6);on.config({precision:64,rounding:on.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var Ft=on,me=new E(0),qr=new E(1),Na=new E(2);Na.pow(new E(128));var Ho=Na.pow(new E(64)).sub(qr),Xk=Na.pow(new E(128)).sub(qr),ye=class{static toX64_BN(e){return e.mul(new E(2).pow(new E(64)))}static toX64_Decimal(e){return e.mul(Ft.pow(2,64))}static toX64(e){return new E(e.mul(Ft.pow(2,64)).floor().toFixed())}static fromX64(e){return new Ft(e.toString()).mul(Ft.pow(2,-64))}static fromX64_Decimal(e){return e.mul(Ft.pow(2,-64))}static fromX64_BN(e){return e.div(new E(2).pow(new E(64)))}static shiftRightRoundUp(e){let t=e.shrn(64);return e.mod(Ho).gt(me)&&(t=t.add(qr)),t}static divRoundUp(e,t){return e.mod(t).eq(me)?e.div(t):e.div(t).add(new E(1))}static subUnderflowU128(e,t){return e.lt(t)?e.sub(t).add(Xk):e.sub(t)}static checkUnsignedSub(e,t){const n=e.sub(t);if(n.isNeg())throw new ft("Unsigned integer sub overflow","UnsignedIntegerOverflow");return n}static checkMul(e,t,n){const r=e.mul(t);if(this.isOverflow(r,n))throw new ft("Multiplication overflow","MultiplicationOverflow");return r}static checkMulDivFloor(e,t,n,r){if(n.eq(me))throw new ft("Devide by zero","DivideByZero");const s=e.mul(t).div(n);if(this.isOverflow(s,r))throw new ft("Multiplication div overflow","MulDivOverflow");return s}static checkMulDivCeil(e,t,n,r){if(n.eq(me))throw new ft("Devide by zero","DivideByZero");const s=e.mul(t).add(n.sub(qr)).div(n);if(this.isOverflow(s,r))throw new ft("Multiplication div overflow","MulDivOverflow");return s}static checkMulDivRound(e,t,n,r){if(n.eq(me))throw new ft("Devide by zero","DivideByZero");const s=e.mul(t.add(n.shrn(1))).div(n);if(this.isOverflow(s,r))throw new ft("Multiplication div overflow","MulDivOverflow");return s}static checkMulShiftRight(e,t,n,r){const s=e.mul(t).div(new E(2).pow(new E(n)));if(this.isOverflow(s,r))throw new ft("Multiplication shift right overflow","MulShiftRightOverflow");return s}static checkMulShiftRight64RoundUpIf(e,t,n,r){const s=e.mul(t),o=r&&s.and(Ho).gt(me)?s.shrn(64).add(qr):s.shrn(64);if(this.isOverflow(o,n))throw new ft("Multiplication shift right overflow","MulShiftRightOverflow");return o}static checkMulShiftLeft(e,t,n,r){const s=e.mul(t).shln(n);if(this.isOverflow(s,r))throw new ft("Multiplication shift left overflow","MulShiftLeftOverflow");return s}static checkDivRoundUpIf(e,t,n){if(t.eq(me))throw new ft("Devide by zero","DivideByZero");return n?this.divRoundUp(e,t):e.div(t)}static isOverflow(e,t){return e.gte(Na.pow(new E(t)))}},wl=class{static getDefaultSqrtPriceLimit(e){return new E(e?qa:Ua)}static getDefaultOtherAmountThreshold(e){return e?me:Ho}},_l=class{constructor(e,t=0){we(this,"overdueTime");we(this,"value");this.overdueTime=t,this.value=e}getCacheData(){return this.value===null?null:this.overdueTime===0?this.value:Date.parse(new Date().toString())>this.overdueTime?null:this.value}};function ne(e){return on.isDecimal(e)?e:new on(e===void 0?0:e)}function Dn(e,t=32){return BigInt.asUintN(t,BigInt(e)).toString()}function Vr(e,t=32){return BigInt.asIntN(t,BigInt(e)).toString()}function Zk(e,t,n){const r=Ie(e).name,s=Ie(t).name;return`${r}-${s}[${n}]`}function Vd(e){const t=Ra(e),n=Ie(t),r=ns(e),s={poolAddress:Ni(e),poolType:t,coinTypeA:n.type_arguments[0],coinTypeB:n.type_arguments[1],coinAmountA:r.coin_a,coinAmountB:r.coin_b,current_sqrt_price:r.current_sqrt_price,current_tick_index:Number(Vr(BigInt(r.current_tick_index.fields.bits)).toString()),fee_growth_global_a:r.fee_growth_global_a,fee_growth_global_b:r.fee_growth_global_b,fee_protocol_coin_a:r.fee_protocol_coin_a,fee_protocol_coin_b:r.fee_protocol_coin_b,fee_rate:r.fee_rate,is_pause:r.is_pause,liquidity:r.liquidity,positions_handle:r.position_manager.fields.positions.fields.id.id,rewarder_infos:r.rewarder_manager.fields.rewarders,rewarder_balances:r.rewarder_manager.fields.balances.fields.id.id,rewarder_last_updated_time:r.rewarder_manager.fields.last_updated_time,tickSpacing:r.tick_spacing,ticks_handle:r.tick_manager.fields.ticks.fields.id.id,uri:r.url,index:Number(r.index),name:""};return s.name=Zk(s.coinTypeA,s.coinTypeB,s.tickSpacing),s}function zc(e){const t=Ra(e);let n=ns(e);return"nft"in n&&(n=n.nft.fields),{pos_object_id:Ni(e),type:t,uri:n.url,liquidity:n.liquidity,tick_lower_index:Vr(BigInt(n.tick_lower_index.fields.bits)).toString(),tick_upper_index:Vr(BigInt(n.tick_upper_index.fields.bits)).toString(),index:n.index,pool:n.pool,name:n.name,description:n.description,reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0"}}function Jk(e,t){const n=ns(e),r=[];for(const i of n.rewards)r.push({amount_owed:i.fields.amount_owned,growth_inside:i.fields.growth_inside});return{...t,liquidity:n.liquidity,reward_amount_owed_0:r[0].amount_owed,reward_amount_owed_1:r[1].amount_owed,reward_amount_owed_2:r[2].amount_owed,reward_growth_inside_0:r[0].growth_inside,reward_growth_inside_1:r[1].growth_inside,reward_growth_inside_2:r[2].growth_inside,fee_growth_inside_a:n.fee_growth_inside_a,fee_owed_a:n.fee_owned_a,fee_growth_inside_b:n.fee_growth_inside_b,fee_owed_b:n.fee_owned_b}}function oc(e){const n=ns(e).value.fields.value.fields;return{objectId:Ni(e),index:Vr(BigInt(n.index.fields.bits)).toString(),sqrtPrice:new E(n.sqrt_price),liquidityNet:new E(n.liquidity_net.fields.bits),liquidityGross:new E(n.liquidity_gross),feeGrowthOutsideA:new E(n.fee_growth_outside_a),feeGrowthOutsideB:new E(n.fee_growth_outside_b),rewardersGrowthOutside:n.rewards_growth_outside}}function Yk(e){return{objectId:"",index:Vr(BigInt(e.index.bits)).toString(),sqrtPrice:new E(e.sqrt_price),liquidityNet:new E(e.liquidity_net.bits),liquidityGross:new E(e.liquidity_gross),feeGrowthOutsideA:new E(e.fee_growth_outside_a),feeGrowthOutsideB:new E(e.fee_growth_outside_b),rewardersGrowthOutside:e.rewards_growth_outside}}var Nt="router",Vc=1e9,or=class{static priceRealToFix(e,t,n){const r=ne(t-n).toNumber();return Number(ne(e).div(ne(10).pow(ne(r))).toString())}static priceFixToReal(e,t,n){const r=ne(t-n).toNumber();return Number(ne(e).mul(ne(10).pow(ne(r))).toString())}static raiseTotalAmount(e,t,n){const r=ne(t-n).abs().toNumber();return t>n?Number(ne(e.sale_total).mul(e.current_price).div(ne(10).pow(ne(r))).toString()):Number(ne(e.sale_total).mul(e.current_price).mul(ne(10).pow(ne(r))).toString())}static buildLaunchPadPool(e){const t=Ra(e),n=Ie(t),r=ns(e),s={coin_type_sale:n.type_arguments[0],coin_type_raise:n.type_arguments[1],pool_address:xn(Ni(e)),pool_type:Si(n.full_address,n.type_arguments),is_settle:r.is_settle,current_price:ne(r.initialize_price).div(ne(Vc)).toString(),min_price:"0",max_price:"0",sale_coin_amount:r.sale_coin,raise_coin_amount:r.raise_coin,sale_total:r.sale_total,min_purchase:r.min_purchase,max_purchase:r.max_purchase,least_raise_amount:r.least_raise_amount,softcap:r.softcap,hardcap:r.hardcap,liquidity_rate:Number(r.liquidity_rate)/100,activity_start_time:Number(r.start_time),activity_end_time:0,settle_end_time:0,activity_duration:Number(r.activity_duration),settle_duration:Number(r.settle_duration),locked_duration:Number(r.locked_duration),is_cancel:r.is_cancel,lp_supply:r.lp_supply.fields.value,white_handle:r.white_list.fields.users.fields.id.id,has_white_list:Number(r.white_list.fields.users.fields.size)>0,each_safe_cap:Number(r.white_list.fields.each_safe_cap),unused_sale:r.unused_sale,unused_raise:r.unused_raise,tick_spacing:Number(r.tick_spacing),recipient:r.recipient,pool_status:"Failed"};return or.updatePoolStatus(s),s}static updatePoolStatus(e){const t=Number(ne(Date.now()/1e3).toFixed(0)),n=e.activity_start_time+e.activity_duration,r=n+e.settle_duration;return e.activity_end_time=n,e.settle_end_time=r,e.is_settle?e.pool_status="Ended":e.is_cancel?e.pool_status="Canceled":t<e.activity_start_time?e.pool_status="Upcoming":t>e.activity_start_time&&t<n?e.pool_status="Live":t>n&&t<r&&(e.raise_coin_amount<e.least_raise_amount&&(e.pool_status="Failed"),e.pool_status="Settle"),e}static updatePoolCurrentPrice(e,t,n){const r=BigInt(e.raise_coin_amount);return r<BigInt(e.softcap)?e.current_price=e.min_price:r<=BigInt(e.hardcap)?e.current_price=this.priceFixToReal(ne(r.toString()).div(ne(e.sale_total)).toNumber(),t,n).toString():r>BigInt(e.hardcap)&&(e.current_price=e.max_price),Number(e.current_price)}static async calculatePoolPrice(e,t){const n=await e.Token.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),r=n[t.coin_type_sale].decimals,s=n[t.coin_type_raise].decimals;t.min_price=this.priceFixToReal(Number(ne(t.softcap).div(ne(t.sale_total))),r,s).toString(),t.max_price=this.priceFixToReal(Number(ne(t.hardcap).div(ne(t.sale_total))),r,s).toString(),or.updatePoolCurrentPrice(t,r,s)}static getWithdrawRaise(e){return e.pool_status==="Ended"||e.pool_status==="Failed"?ne(e.raise_coin_amount).sub(ne(e.unused_raise)).toString():"0"}static getWithdrawSale(e){return e.pool_status==="Ended"?e.unused_sale:e.sale_coin_amount}},ac=class{static getMinIndex(e){return zd+Math.abs(zd)%e}static getMaxIndex(e){return Gd-Gd%e}};function cc(e,t){const n=Math.abs(e)%t;return e>0?n>t/2?e+t-n:e-n:n>t/2?e-t+n:e+n}function Qk(e,t,n,r,s,i){const o=e.rewarder_infos,a=[];for(let c=0;c<o.length;c+=1){let u=i[c];t!==null&&(Number(e.current_tick_index)<r?u=i[c].sub(new E(t.rewardersGrowthOutside[c])):u=t.rewardersGrowthOutside[c]);let d=new E(0);n!==null&&(Number(e.current_tick_index)>=s?d=i[c].sub(new E(n.rewardersGrowthOutside[c])):d=n.rewardersGrowthOutside[c]);const l=ye.subUnderflowU128(ye.subUnderflowU128(new E(i[c]),new E(u)),new E(d));a.push(l)}return a}var eE=14,tE="59543866431248",nE="184467440737095516",rE="15793534762490258745",sE=443636;function iE(e,t,n){const r=e.toTwos(n).shln(t);return r.imaskn(n+1),r.fromTwos(n)}function ge(e,t,n){const r=e.toTwos(n).shrn(t);return r.imaskn(n-t+1),r.fromTwos(n-t)}function oE(e){let t;return e&1?t=new E("79232123823359799118286999567"):t=new E("79228162514264337593543950336"),e&2&&(t=ge(t.mul(new E("79236085330515764027303304731")),96,256)),e&4&&(t=ge(t.mul(new E("79244008939048815603706035061")),96,256)),e&8&&(t=ge(t.mul(new E("79259858533276714757314932305")),96,256)),e&16&&(t=ge(t.mul(new E("79291567232598584799939703904")),96,256)),e&32&&(t=ge(t.mul(new E("79355022692464371645785046466")),96,256)),e&64&&(t=ge(t.mul(new E("79482085999252804386437311141")),96,256)),e&128&&(t=ge(t.mul(new E("79736823300114093921829183326")),96,256)),e&256&&(t=ge(t.mul(new E("80248749790819932309965073892")),96,256)),e&512&&(t=ge(t.mul(new E("81282483887344747381513967011")),96,256)),e&1024&&(t=ge(t.mul(new E("83390072131320151908154831281")),96,256)),e&2048&&(t=ge(t.mul(new E("87770609709833776024991924138")),96,256)),e&4096&&(t=ge(t.mul(new E("97234110755111693312479820773")),96,256)),e&8192&&(t=ge(t.mul(new E("119332217159966728226237229890")),96,256)),e&16384&&(t=ge(t.mul(new E("179736315981702064433883588727")),96,256)),e&32768&&(t=ge(t.mul(new E("407748233172238350107850275304")),96,256)),e&65536&&(t=ge(t.mul(new E("2098478828474011932436660412517")),96,256)),e&131072&&(t=ge(t.mul(new E("55581415166113811149459800483533")),96,256)),e&262144&&(t=ge(t.mul(new E("38992368544603139932233054999993551")),96,256)),ge(t,32,256)}function aE(e){const t=Math.abs(e);let n;return t&1?n=new E("18445821805675392311"):n=new E("18446744073709551616"),t&2&&(n=ge(n.mul(new E("18444899583751176498")),64,256)),t&4&&(n=ge(n.mul(new E("18443055278223354162")),64,256)),t&8&&(n=ge(n.mul(new E("18439367220385604838")),64,256)),t&16&&(n=ge(n.mul(new E("18431993317065449817")),64,256)),t&32&&(n=ge(n.mul(new E("18417254355718160513")),64,256)),t&64&&(n=ge(n.mul(new E("18387811781193591352")),64,256)),t&128&&(n=ge(n.mul(new E("18329067761203520168")),64,256)),t&256&&(n=ge(n.mul(new E("18212142134806087854")),64,256)),t&512&&(n=ge(n.mul(new E("17980523815641551639")),64,256)),t&1024&&(n=ge(n.mul(new E("17526086738831147013")),64,256)),t&2048&&(n=ge(n.mul(new E("16651378430235024244")),64,256)),t&4096&&(n=ge(n.mul(new E("15030750278693429944")),64,256)),t&8192&&(n=ge(n.mul(new E("12247334978882834399")),64,256)),t&16384&&(n=ge(n.mul(new E("8131365268884726200")),64,256)),t&32768&&(n=ge(n.mul(new E("3584323654723342297")),64,256)),t&65536&&(n=ge(n.mul(new E("696457651847595233")),64,256)),t&131072&&(n=ge(n.mul(new E("26294789957452057")),64,256)),t&262144&&(n=ge(n.mul(new E("37481735321082")),64,256)),n}var ve=class{static priceToSqrtPriceX64(e,t,n){return ye.toX64(e.mul(Ft.pow(10,n-t)).sqrt())}static sqrtPriceX64ToPrice(e,t,n){return ye.fromX64(e).pow(2).mul(Ft.pow(10,t-n))}static tickIndexToSqrtPriceX64(e){return e>0?new E(oE(e)):new E(aE(e))}static sqrtPriceX64ToTickIndex(e){if(e.gt(new E(Ua))||e.lt(new E(qa)))throw new Error("Provided sqrtPrice is not within the supported sqrtPrice range.");const t=e.bitLength()-1,n=new E(t-64),r=iE(n,32,128);let s=new E("8000000000000000","hex"),i=0,o=new E(0),a=t>=64?e.shrn(t-63):e.shln(63-t);for(;s.gt(new E(0))&&i<eE;){a=a.mul(a);const w=a.shrn(127);a=a.shrn(63+w.toNumber()),o=o.add(s.mul(w)),s=s.shrn(1),i+=1}const c=o.shrn(32),d=r.add(c).mul(new E(tE)),l=ge(d.sub(new E(nE)),64,128).toNumber(),p=ge(d.add(new E(rE)),64,128).toNumber();return l===p?l:ve.tickIndexToSqrtPriceX64(p).lte(e)?p:l}static tickIndexToPrice(e,t,n){return ve.sqrtPriceX64ToPrice(ve.tickIndexToSqrtPriceX64(e),t,n)}static priceToTickIndex(e,t,n){return ve.sqrtPriceX64ToTickIndex(ve.priceToSqrtPriceX64(e,t,n))}static priceToInitializableTickIndex(e,t,n,r){return ve.getInitializableTickIndex(ve.priceToTickIndex(e,t,n),r)}static getInitializableTickIndex(e,t){return e-e%t}static getNextInitializableTickIndex(e,t){return ve.getInitializableTickIndex(e,t)+t}static getPrevInitializableTickIndex(e,t){return ve.getInitializableTickIndex(e,t)-t}};function cE(e){const t=[];for(const n of e){const r={objectId:n.objectId,index:Number(Vr(BigInt(n.index)).toString()),sqrtPrice:n.sqrtPrice,liquidityNet:new E(Vr(BigInt(n.liquidityNet.toString())).toString()),liquidityGross:n.liquidityGross,feeGrowthOutsideA:n.feeGrowthOutsideA,feeGrowthOutsideB:n.feeGrowthOutsideB,rewardersGrowthOutside:[new E(n.rewardersGrowthOutside[0]),new E(n.rewardersGrowthOutside[1]),new E(n.rewardersGrowthOutside[2])]};t.push(r)}return t}function uE(e){return ne(e).add(ne(sE))}function Vg(e,t,n,r){if(n.eq(me))return e;const s=ye.checkMulShiftLeft(e,t,64,256),i=t.shln(64),o=ye.checkMul(e,n,256);if(!r&&i.lte(o))throw new ft("getNextSqrtPriceAUp - Unable to divide liquidityShl64 by product","DivideByZero");const a=r?ye.checkDivRoundUpIf(s,i.add(o),!0):ye.checkDivRoundUpIf(s,i.sub(o),!0);if(a.lt(new E(qa)))throw new ft("getNextSqrtPriceAUp - Next sqrt price less than min sqrt price","CoinAmountMinSubceeded ");if(a.gt(new E(Ua)))throw new ft("getNextSqrtPriceAUp - Next sqrt price greater than max sqrt price","CoinAmountMaxExceeded");return a}function Fg(e,t,n,r){const s=ye.checkDivRoundUpIf(n.shln(64),t,!r),i=r?e.add(s):e.sub(s);if(i.lt(new E(qa))||i.gt(new E(Ua)))throw new ft("getNextSqrtPriceAUp - Next sqrt price out of bounds","SqrtPriceOutOfBounds");return i}function lE(e,t,n,r){return r?Vg(e,t,n,!0):Fg(e,t,n,!0)}function dE(e,t,n,r){return r?Fg(e,t,n,!1):Vg(e,t,n,!1)}function Fd(e,t,n,r){const s=e.gt(t)?e.sub(t):t.sub(e);if(n.lte(me)||s.eq(me))return me;let i;if(r){const o=new E(n).mul(new E(s)).shln(64),a=t.mul(e),c=o.div(a);i=o.mod(a).eq(me)?c:c.add(qr)}else{const o=new E(n).mul(new E(s));i=o.and(Ho).gt(me)?o.shrn(64).add(qr):o.shrn(64)}return i}function Wd(e,t,n,r){const s=e.gt(t)?e.sub(t):t.sub(e);if(n.lte(me)||s.eq(me))return me;let i;if(r)i=n.mul(s).shrn(64);else{const o=n.mul(s).shln(64),a=t.mul(e);i=o.div(a)}return i}function fE(e,t,n,r,s,i){if(n===me)return{amountIn:me,amountOut:me,nextSqrtPrice:t,feeAmount:me};const o=e.gte(t);let a,c,u,d;if(i){const l=ye.checkMulDivFloor(r,ye.checkUnsignedSub(fs,s),fs,64),p=Fd(e,t,n,o);p.gt(l)?(a=l,d=ye.checkUnsignedSub(r,l),u=lE(e,n,l,o)):(a=p,d=ye.checkMulDivCeil(a,s,fs.sub(s),64),u=t),c=Wd(e,u,n,o)}else{const l=Wd(e,t,n,o);l.gt(r)?(c=r,u=dE(e,n,r,o)):(c=l,u=t),a=Fd(e,u,n,o),d=ye.checkMulDivCeil(a,s,fs.sub(s),64)}return{amountIn:a,amountOut:c,nextSqrtPrice:u,feeAmount:d}}function hE(e,t,n,r,s){let i=n,o=r.liquidity,{currentSqrtPrice:a}=r;const c={amountIn:me,amountOut:me,feeAmount:me,refAmount:me,nextSqrtPrice:me,crossTickNum:0};let u,d;const l=wl.getDefaultSqrtPriceLimit(e);for(const p of s){if(e&&r.currentTickIndex<Number(p.index)||!e&&r.currentTickIndex>Number(p.index)||p===null)continue;e&&l.gt(p.sqrtPrice)||!e&&l.lt(p.sqrtPrice)?u=l:u=p.sqrtPrice;const g=fE(a,u,o,i,r.feeRate,t);if(g.amountIn.eq(me)||(i=t?i.sub(g.amountIn.add(g.feeAmount)):i.sub(g.amountOut)),c.amountIn=c.amountIn.add(g.amountIn),c.amountOut=c.amountOut.add(g.amountOut),c.feeAmount=c.feeAmount.add(g.feeAmount),g.nextSqrtPrice.eq(p.sqrtPrice)?(d=e?p.liquidityNet.mul(new E(-1)):p.liquidityNet,o=d.gt(me)?o.add(d):o.sub(d.abs()),a=p.sqrtPrice):a=g.nextSqrtPrice,c.crossTickNum+=1,i.eq(me))break}return c.amountIn=c.amountIn.add(c.feeAmount),c.nextSqrtPrice=a,c}function ti(e,t,n){const r=E.min(e,t),s=E.max(e,t),i=ye.fromX64_BN(n.mul(s).mul(r)),o=s.sub(r);return i.div(o)}function ni(e,t,n){const r=E.min(e,t),i=E.max(e,t).sub(r);return n.shln(64).div(i)}var Or=class{static updateFeeRate(e,t,n,r,s){const i=ye.checkMulDivCeil(t,new E(r),fs,64),o=n===0?me:ye.checkMulDivFloor(t,new E(n),fs,64),a=t.mul(i).mul(o);if(s?e.feeProtocolCoinA=e.feeProtocolCoinA.add(i):e.feeProtocolCoinB=e.feeProtocolCoinB.add(i),a.eq(me)||e.liquidity.eq(me))return{refFee:o,clmm:e};const c=a.shln(64).div(e.liquidity);return s?e.feeGrowthGlobalA=e.feeGrowthGlobalA.add(c):e.feeGrowthGlobalB=e.feeGrowthGlobalB.add(c),{refFee:o,clmm:e}}static getCoinAmountFromLiquidity(e,t,n,r,s){const i=new Ft(e.toString()),o=new Ft(t.toString()),a=new Ft(n.toString()),c=new Ft(r.toString());let u,d;return t.lt(n)?(u=ye.toX64_Decimal(i).mul(c.sub(a)).div(a.mul(c)),d=new Ft(0)):t.lt(r)?(u=ye.toX64_Decimal(i).mul(c.sub(o)).div(o.mul(c)),d=ye.fromX64_Decimal(i.mul(o.sub(a)))):(u=new Ft(0),d=ye.fromX64_Decimal(i.mul(c.sub(a)))),s?{coinA:new E(u.ceil().toString()),coinB:new E(d.ceil().toString())}:{coinA:new E(u.floor().toString()),coinB:new E(d.floor().toString())}}static estimateLiquidityFromcoinAmounts(e,t,n,r){if(t>n)throw new Error("lower tick cannot be greater than lower tick");const s=ve.sqrtPriceX64ToTickIndex(e),i=ve.tickIndexToSqrtPriceX64(t),o=ve.tickIndexToSqrtPriceX64(n);if(s<t)return ti(i,o,r.coinA);if(s>=n)return ni(o,i,r.coinB);const a=ti(e,o,r.coinA),c=ni(e,i,r.coinB);return E.min(a,c)}static estLiquidityAndcoinAmountFromOneAmounts(e,t,n,r,s,i,o){const a=ve.sqrtPriceX64ToTickIndex(o),c=ve.tickIndexToSqrtPriceX64(e),u=ve.tickIndexToSqrtPriceX64(t);let d;if(a<=e){if(!r)throw new Error("lower tick cannot calculate liquidity by coinB");d=ti(c,u,n)}else if(a>=t){if(r)throw new Error("upper tick cannot calculate liquidity by coinA");d=ni(u,c,n)}else r?d=ti(o,u,n):d=ni(o,c,n);const l=Or.getCoinAmountFromLiquidity(d,o,c,u,s),p=l.coinA.mul(new E(1+i)),g=l.coinB.mul(new E(1+i));return{tokenMaxA:p,tokenMaxB:g,liquidityAmount:d}}};new E(365);new E(24);new E(3600);new E(.5);function pE(e,t,n,r){const s=Math.max(e,n),o=Math.min(t,r)-s,a=t-e,c=r-n,u=new on(a.toString()),d=new on(c.toString()),l=new on(o.toString());let p=new on("0");return o<0?p=new on("0"):a===o?p=d.div(l):c===o?p=l.div(u):p=l.mul(l).div(d).div(u),p}function gE(e,t,n){let r=new E(0),s=new E(0);Number(e.current_tick_index)<Number(t.index)?(r=ye.subUnderflowU128(new E(e.fee_growth_global_a),new E(t.feeGrowthOutsideA)),s=ye.subUnderflowU128(new E(e.fee_growth_global_b),new E(t.feeGrowthOutsideB))):(r=new E(t.feeGrowthOutsideA),s=new E(t.feeGrowthOutsideB));let i=new E(0),o=new E(0);Number(e.current_tick_index)<Number(n.index)?(i=new E(n.feeGrowthOutsideA),o=new E(n.feeGrowthOutsideB)):(i=ye.subUnderflowU128(new E(e.fee_growth_global_a),new E(n.feeGrowthOutsideA)),o=ye.subUnderflowU128(new E(e.fee_growth_global_b),new E(n.feeGrowthOutsideB)));const a=ye.subUnderflowU128(ye.subUnderflowU128(new E(e.fee_growth_global_a),r),i),c=ye.subUnderflowU128(ye.subUnderflowU128(new E(e.fee_growth_global_b),s),o);return{fee_growth_inside_a:a,fee_growth_inside_b:c}}function yE(e,t,n){const r=ye.subUnderflowU128(t,new E(e.fee_growth_inside_a)),s=new E(e.liquidity).mul(r).shrn(64),i=ye.subUnderflowU128(n,new E(e.fee_growth_inside_b)),o=new E(e.liquidity).mul(i).shrn(64),a=new E(e.fee_owed_a).add(s),c=new E(e.fee_owed_b).add(o);return{feeOwedA:a,feeOwedB:c}}function bE(e){const{fee_growth_inside_a:t,fee_growth_inside_b:n}=gE(e.clmmpool,e.tickLower,e.tickUpper);return yE(e.position,t,n)}function mE(e,{numerator:t,denominator:n},r){return r?e.mul(n.add(t)).div(n):e.mul(n).div(n.add(t))}var wE=5*60*1e3,Hs=24*60*60*1e3;function Kd(e){return Date.parse(new Date().toString())+e}var _E=class{constructor(e){we(this,"_sdk");we(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=[],t=0,n=100,r=!1){const{ido:s}=this._sdk.sdkOptions.networkOptions.launchpad;if(s===void 0)throw Error("sdk.sdkOptions.networkOptions.launchpad is undefined");const i=`${s}_getInitPoolEvent`,o=this._cache[i],a=[],c=[];if(o!==void 0&&o.getCacheData()&&!r&&a.push(...o.value),a.length===0)try{(await this._sdk.fullClient.queryEvents({query:{MoveEventType:`${s}::factory::CreatePoolEvent`}})).data.forEach(l=>{const p=l.parsedJson;p&&a.push({pool_address:p.pool_id,coin_type_sale:Ie(p.sale_coin).full_address,coin_type_raise:Ie(p.raise_coin).full_address})}),this.updateCache(i,a,Hs)}catch(d){console.log("getPoolImmutables",d)}const u=e.length>0;for(let d=0;d<a.length;d+=1){const l=a[d];if(!(u&&!e.includes(l.pool_address))){if(!u){const p=Number(d);if(p<t||p>=t+n)continue}c.push(l)}}return c}async getPools(e=[],t=0,n=100){const r=[];let s=[];e.length>0?s=[...e]:(await this.getPoolImmutables([],t,n,!1)).forEach(a=>{s.push(a.pool_address)});const i=await this.sdk.fullClient.multiGetObjects({ids:s,options:{showType:!0,showContent:!0}});for(const o of i){const a=or.buildLaunchPadPool(o);await or.calculatePoolPrice(this._sdk,a),r.push(a);const c=`${a.pool_address}_getPoolObject`;this.updateCache(c,a,Hs)}return r}async getPool(e,t=!0){const n=`${e}_getPoolObject`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!t){const o=r.value;return or.updatePoolStatus(o),o}const s=await this._sdk.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),i=or.buildLaunchPadPool(s);return await or.calculatePoolPrice(this._sdk,i),this.updateCache(n,i),i}async getInitFactoryEvent(e=!1){const t=this._sdk.sdkOptions.networkOptions.launchpad.ido,n=`${t}_getInitEvent`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!e)return r.value;const s=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),i=al(s),o=(await this._sdk.fullClient.queryEvents({query:{Transaction:i}})).data,a={pools_id:"",admin_cap_id:""};return o.length>0&&(o.forEach(c=>{const u=c.parsedJson;if(u)switch(Ie(c.type).full_address){case`${t}::config::InitConfigEvent`:a.admin_cap_id=u.admin_cap_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=u.pools_id;break}}),this.updateCache(n,a,Hs)),a}async getInitLockEvent(e=!1){const{nft_lock:t}=this._sdk.sdkOptions.networkOptions.launchpad,n=`${t}_getInitLockEvent`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!e)return r.value;const s={lock_manager_id:""};try{(await this._sdk.fullClient.queryEvents({query:{MoveEventType:`${t}::lock::InitManagerEvent`}})).data.forEach(o=>{const a=o.parsedJson;a&&(s.lock_manager_id=a.lock_manager_id)}),this.updateCache(n,s,Hs)}catch(i){console.log("getInitLockEvent",i)}return s}async getLockNFT(e,t=!1){const n=`${e}_getLockNFT`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!t)return r.value;const s=await this._sdk.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if(!s.error)return zc(s)}async getLockNFTEvent(e,t,n=!1){const{networkOptions:r}=this._sdk.sdkOptions,s=`${e}_getInitLockEvent`,i=this._cache[s];if(i!==void 0&&i.getCacheData()&&!n)return i.value;try{const o=(await this._sdk.fullClient.queryEvents({query:{MoveEventType:`${r.launchpad.nft_lock}::lock::LockNFTEvent`}})).data,a=Ie(e);for(const c of o){const u=c.parsedJson;if(console.log("fields: ",u),u){const d={locked_time:Number(u.locked_time),end_lock_time:Number(u.end_lock_time),nft_type:u.nft_type_name.name,lock_nft_id:u.lock_nft_id,recipient:u.recipient},l=Ie(u.nft_type_name.name),p=Ie(l.type_arguments[0]).full_address,g=Ie(l.type_arguments[1]).full_address;if(t===d.recipient&&`${r.modules.cetus_clmm}`===l.address&&(a.type_arguments[0]===p&&a.type_arguments[1]===g||a.type_arguments[0]===g&&a.type_arguments[1]===p))return this.updateCache(s,d,Hs),d}}}catch(o){console.log("getLockNFTEvent:",o)}}async creatPoolTransactionPayload(e){var l;const{launchpad:t,modules:n}=this.sdk.sdkOptions.networkOptions,r=t.config;if(this.assertLuanchpadConfig(),this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const s=e.clmm_args!==void 0,i=or.priceRealToFix(Number(e.initialize_price),e.sale_decimals,e.raise_decimals),o=new Me,a=ne(e.sale_total).add(ne(e.sale_total).mul(ne(e.liquidity_rate))).toNumber(),c=await qe.syncBuildCoinInputForAmount(this._sdk,o,BigInt(a),e.coin_type_sale);let u=[];if(s){const p=n.config;if(p===void 0)throw Error("modules config is null");let g;bl(He(e.coin_type_sale),He(e.coin_type_raise))?g=ve.priceToSqrtPriceX64(ne(1).div(e.initialize_price),e.raise_decimals,e.sale_decimals).toString():g=ve.priceToSqrtPriceX64(ne(e.initialize_price),e.sale_decimals,e.raise_decimals).toString(),o.setGasBudget(Gg),u=[o.pure(r.admin_cap_id),o.pure(r.pools_id),o.pure(He(e.recipient)),o.pure((i*Vc).toString()),c,o.pure(e.sale_total.toString()),o.pure(e.min_purchase.toString()),o.pure(e.max_purchase.toString()),o.pure(e.least_raise_amount.toString()),o.pure(e.hardcap.toString()),o.pure((e.liquidity_rate*100).toString()),o.pure(e.start_time.toString()),o.pure(e.activity_duration.toString()),o.pure(e.settle_duration.toString()),o.pure(e.locked_duration.toString()),o.pure(p.global_config_id),o.pure(e.tick_spacing.toString()),o.pure(g),o.pure(p.pools_id),o.pure((l=e.clmm_args)==null?void 0:l.url),o.pure(Pe)]}else o.setGasBudget(ci),u=[o.pure(r.admin_cap_id),o.pure(r.pools_id),o.pure(He(e.recipient)),o.pure((i*Vc).toString()),c,o.pure(e.sale_total.toString()),o.pure(e.min_purchase.toString()),o.pure(e.max_purchase.toString()),o.pure(e.least_raise_amount.toString()),o.pure(e.hardcap.toString()),o.pure((e.liquidity_rate*100).toString()),o.pure(e.start_time.toString()),o.pure(e.activity_duration.toString()),o.pure(e.settle_duration.toString()),o.pure(e.locked_duration.toString()),o.pure(e.tick_spacing.toString()),o.pure(Pe)];const d=[e.coin_type_sale,e.coin_type_raise];return o.moveCall({target:`${t.ido}::${Nt}::${s?"create_clmm_and_launchpad_pool":"create_launch_pool_single"}`,typeArguments:d,arguments:u}),o}async creatPurchasePayload(e){const{launchpad:t}=this.sdk.sdkOptions.networkOptions;if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=new Me;n.setGasBudget(Cr);const r=await qe.syncBuildCoinInputForAmount(this._sdk,n,BigInt(e.purchase_amount),e.coin_type_raise),s=[e.coin_type_sale,e.coin_type_raise],i=[n.pure(e.pool_address),r,n.pure(e.purchase_amount.toString()),n.pure(Pe)];return n.moveCall({target:`${t.ido}::${Nt}::purchase`,typeArguments:s,arguments:i}),n}async creatClaimPayload(e){const{launchpad:t}=this.sdk.sdkOptions.networkOptions;if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=new Me,r=this.buildLaunchpadCoinType(e.coin_type_sale,e.coin_type_raise),s=await qe.syncBuildCoinInputForAmount(this._sdk,n,BigInt(e.amount_lp),r);n.setGasBudget(Cr);const i=[e.coin_type_sale,e.coin_type_raise],o=[n.pure(e.pool_address),s,n.pure(e.amount_lp.toString()),n.pure(Pe)];return n.moveCall({target:`${t.ido}::${Nt}::claim`,typeArguments:i,arguments:o}),n}async creatSettlePayload(e){const{launchpad:t,modules:n}=this.sdk.sdkOptions.networkOptions;if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");this.assertLuanchpadConfig();const r=n.config;if(r===void 0)throw Error("modules config is null");const s=e.opposite?e.a2b?e.coin_type_raise:e.coin_type_sale:e.a2b?e.coin_type_sale:e.coin_type_raise,i=await this._sdk.Resources.getOwnerCoinAssets(this._sdk.senderAddress,s),o=new Me;let a=Ve.calculateTotalBalance(i);o.setGasBudget(ci),Ve.isSuiCoin(s)&&(a-=BigInt(ci));const c=qe.buildCoinInputForAmount(o,i,a,s),u=e.opposite?e.a2b?"opposite_settle_only_with_a":"opposite_settle_only_with_b":e.a2b?"settle_only_with_a":"settle_only_with_b",d=[e.coin_type_sale,e.coin_type_raise],l=[o.pure(e.pool_address),o.pure(e.clmm_pool_address),o.pure(r.global_config_id),o.pure(t.config.lock_manager_id),o.pure(e.initialize_sqrt_price),c,o.pure(Pe)];return o.moveCall({target:`${t.ido}::${Nt}::${u}`,typeArguments:d,arguments:l}),o}creatWithdrawPayload(e){const{launchpad:t}=this.sdk.sdkOptions.networkOptions,n=new Me;n.setGasBudget(Cr);const r=[e.coin_type_sale,e.coin_type_raise],s=[n.object(e.pool_address),n.object(Pe)];return e.sale_amount>BigInt(0)&&n.moveCall({target:`${t.ido}::${Nt}::withdraw_sale`,typeArguments:r,arguments:s}),e.raise_amount>BigInt(0)&&n.moveCall({target:`${t.ido}::${Nt}::withdraw_raise`,typeArguments:r,arguments:s}),n}creatAddWhitelistPayload(e){const{launchpad:t}=this.sdk.sdkOptions.networkOptions;this.assertLuanchpadConfig();const n=new Me;n.setGasBudget(Cr);const r=[e.coin_type_sale,e.coin_type_raise];return e.each_safe_cap>0&&n.moveCall({target:`${t.ido}::${Nt}::config_white_list_cap`,typeArguments:r,arguments:[n.object(t.config.admin_cap_id),n.object(e.pool_address),n.pure(e.each_safe_cap),n.object(Pe)]}),e.user_addrs.forEach(s=>{const i=[n.object(t.config.admin_cap_id),n.object(e.pool_address),n.object(s),n.object(Pe)];n.moveCall({target:`${t.ido}::${Nt}::add_user_to_whitelist`,typeArguments:r,arguments:i})}),n}creatRemoveWhitelistPayload(e){const{launchpad:t}=this.sdk.sdkOptions.networkOptions;this.assertLuanchpadConfig();const n=new Me;n.setGasBudget(Cr);const r=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(s=>{const i=[n.pure(t.config.admin_cap_id),n.pure(e.pool_address),n.pure(s),n.pure(Pe)];n.moveCall({target:`${t.ido}::${Nt}::remove_user_from_whitelist`,typeArguments:r,arguments:i})}),n}creatCancelPoolPayload(e){const{launchpad:t}=this.sdk.sdkOptions.networkOptions;this.assertLuanchpadConfig();const n=new Me;n.setGasBudget(yn);const r=[e.coin_type_sale,e.coin_type_raise],s=[n.pure(t.config.admin_cap_id),n.pure(e.pool_address),n.pure(Pe)];return n.moveCall({target:`${t.ido}::${Nt}::cancel`,typeArguments:r,arguments:s}),n}creatResertRecipientPayload(e){const{launchpad:t}=this.sdk.sdkOptions.networkOptions;this.assertLuanchpadConfig();const n=new Me;n.setGasBudget(yn);const r=[e.coin_type_sale,e.coin_type_raise],s=[n.pure(t.config.admin_cap_id),n.pure(e.pool_address),n.pure(e.new_recipient),n.pure(Pe)];return n.moveCall({target:`${t.ido}::${Nt}::resert_recipient_address`,typeArguments:r,arguments:s}),n}creatResertStartTimePayload(e){const{launchpad:t}=this.sdk.sdkOptions.networkOptions;this.assertLuanchpadConfig();const n=new Me;n.setGasBudget(yn);const r=[e.coin_type_sale,e.coin_type_raise],s=[n.pure(t.config.admin_cap_id),n.pure(e.pool_address),n.pure(e.new_start_time),n.pure(Pe)];return n.moveCall({target:`${t.ido}::${Nt}::reset_start_time`,typeArguments:r,arguments:s}),n}creatResertPoolDuractionPayload(e){const{launchpad:t}=this.sdk.sdkOptions.networkOptions;this.assertLuanchpadConfig();const n=new Me;n.setGasBudget(yn);const r=[e.coin_type_sale,e.coin_type_raise],s=[n.pure(t.config.admin_cap_id),n.pure(e.pool_address),n.pure(e.activity_duration),n.pure(e.settle_duration),n.pure(e.lock_duration),n.pure(Pe)];return n.moveCall({target:`${t.ido}::${Nt}::resert_pool_duraction`,typeArguments:r,arguments:s}),n}creatUnlockNftPayload(e){const{launchpad:t}=this.sdk.sdkOptions.networkOptions;if(t.config===void 0)throw Error("launchpad.config  is null");const n=new Me;n.setGasBudget(yn);const r=[e.nft_type],s=[n.pure(t.config.lock_manager_id),n.pure(e.lock_nft),n.pure(Pe)];return n.moveCall({target:`${t.nft_lock}::lock::unlock_nft`,typeArguments:r,arguments:s}),n}async getOwnerLaunchpadCoins(e,t){let n=null;if(t){const s=Ie(t);n=this.buildLaunchpadCoinType(s.type_arguments[0],s.type_arguments[1])}const r=await this._sdk.Resources.getOwnerCoinAssets(e,n);return t?r.filter(s=>s.coinAddress===n):r.filter(s=>Ie(s.coinAddress).full_address===Si(this._sdk.sdkOptions.networkOptions.launchpad.ido,"pool",jd))}async isAdminCap(e){const{launchpad:t}=this._sdk.sdkOptions.networkOptions;if(t.config===void 0)throw Error("launchpad config is empty");const n=await this._sdk.fullClient.getObject({id:t.config.admin_cap_id,options:{showType:!0,showOwner:!0}}),r=ag(n),s=cg(n);return s&&r===`${t.ido}::config::AdminCap`?s.AddressOwner===He(e):!1}async isWhiteListUser(e,t){const n={type:"address",value:t};try{return await this._sdk.fullClient.getDynamicFieldObject({parentId:e,name:n}),!0}catch{return!1}}buildLaunchpadCoinType(e,t){return Si(this._sdk.sdkOptions.networkOptions.launchpad.ido,"pool",jd,[e,t])}assertLuanchpadConfig(){const{launchpad:e}=this.sdk.sdkOptions.networkOptions;if(e.config===void 0)throw Error("sdk launchpad.config is null")}updateCache(e,t,n=wE){let r=this._cache[e];r?(r.overdueTime=Kd(n),r.value=t):r=new _l(t,Kd(n)),this._cache[e]=r}},vE=class{constructor(e){we(this,"_sdk");this._sdk=e}get sdk(){return this._sdk}async creatPoolTransactionPayload(e){const{modules:t}=this.sdk.sdkOptions.networkOptions,n=t.config;if(n===void 0)throw Error("eventConfig is null");if(bl(He(e.coinTypeA),He(e.coinTypeB))){const w=e.coinTypeB;e.coinTypeB=e.coinTypeA,e.coinTypeA=w}if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const r=await this._sdk.Resources.getOwnerCoinAssets(this._sdk.senderAddress),s=new Me,i=e.amount_a>0&&e.amount_b>0,o=n.global_config_id,a=n.pools_id,c=qe.buildCoinInputForAmount(s,r,BigInt(e.amount_a),e.coinTypeA),u=qe.buildCoinInputForAmount(s,r,BigInt(e.amount_b),e.coinTypeB),d=[];c&&d.push({coinInput:c,coinAmount:e.amount_a.toString()}),u&&d.push({coinInput:u,coinAmount:e.amount_b.toString()});let l;d.length===2?l="create_pool_with_liquidity_with_all":l=c!==void 0?"create_pool_with_liquidity_only_a":"create_pool_with_liquidity_only_b";const p=[e.coinTypeA,e.coinTypeB];let g;return i?(s.setGasBudget(Gg),g=[s.pure(a),s.pure(o),s.pure(e.tick_spacing.toString()),s.pure(e.initialize_sqrt_price),s.pure(e.uri),...d.map(w=>w.coinInput),s.pure(Dn(BigInt(e.tick_lower)).toString()),s.pure(Dn(BigInt(e.tick_upper)).toString()),...d.map(w=>s.pure(w.coinAmount)),s.pure(e.fix_amount_a),s.pure(Pe)]):(s.setGasBudget(ci),g=[s.pure(a),s.pure(o),s.pure(e.tick_spacing.toString()),s.pure(e.initialize_sqrt_price),s.pure(e.uri),s.pure(Pe)]),s.moveCall({target:`${t.cetus_integrate}::${Vt}::${i?l:"create_pool"}`,typeArguments:p,arguments:g}),s}async fetchTicks(e){let t=[],n=[];for(;;){const s=await this.getTicks({pool_id:e.pool_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,start:n,limit:512});if(t=[...t,...s],s.length<512)break;n=[s[s.length-1].index]}return t}async getTicks(e){var c;const{modules:t,simulationAccount:n}=this.sdk.sdkOptions.networkOptions,r=[],s=[e.coinTypeA,e.coinTypeB],i=new Me,o=[i.pure(e.pool_id),i.pure(e.start),i.pure(e.limit.toString())];return i.moveCall({target:`${t.cetus_integrate}::${Hg}::fetch_ticks`,arguments:o,typeArguments:s}),console.log("payload: ",i.blockData.transactions[0]),(c=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address})).events)==null||c.forEach(u=>{Ie(u.type).name==="FetchTicksResultEvent"&&u.parsedJson.ticks.forEach(d=>{r.push(Yk(d))})}),r}async fetchTicksByRpc(e){let t=[],n=null;const r=512;for(;;){const s=[],i=await this.sdk.fullClient.getDynamicFields({parentId:e,cursor:n,limit:r});if(n=i.nextCursor,i.data.forEach(o=>{Ie(o.objectType).module==="skip_list"&&s.push(o.objectId)}),t=[...t,...await this.getTicksByRpc(s)],n===null||i.data.length<r)break}return t}async getTicksByRpc(e){const t=[],n=await this.sdk.fullClient.multiGetObjects({ids:e,options:{showContent:!0,showType:!0}});for(const r of n)t.push(oc(r));return t}async getTickDataByIndex(e,t){const n={type:"u64",value:Dn(BigInt(uE(Number(t)).toString())).toString()},r=await this.sdk.fullClient.getDynamicFieldObject({parentId:e,name:n});return oc(r)}async getTickDataByObjectId(e){const t=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0}});return oc(t)}},TE=class{constructor(e){we(this,"_sdk");this._sdk=e}get sdk(){return this._sdk}async createAddLiquidityTransactionPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=await this._sdk.Resources.getOwnerCoinAssets(this._sdk.senderAddress),r=!("delta_liquidity"in e);if(t){const{isAdjustCoinA:s,isAdjustCoinB:i}=ml(e);if(r&&(e=e,e.fix_amount_a&&s||!e.fix_amount_a&&i))return await qe.buildAddLiquidityTransactionForGas(this._sdk,n,e,t)}return qe.buildAddLiquidityTransaction(this._sdk,n,e)}removeLiquidityTransactionPayload(e){const{modules:t}=this.sdk.sdkOptions.networkOptions,n="remove_liquidity",r=new Me;r.setGasBudget(yn);const s=[e.coinTypeA,e.coinTypeB],i=[r.pure(e.pool_id),r.pure(e.pos_id),r.pure(e.delta_liquidity),r.pure(e.min_amount_a),r.pure(e.min_amount_b),r.pure(Pe)];return r.moveCall({target:`${t.cetus_integrate}::${Vt}::${n}`,typeArguments:s,arguments:i}),r}closePositionTransactionPayload(e){const{modules:t}=this.sdk.sdkOptions.networkOptions,n=new Me;n.setGasBudget(yn);const r=[e.coinTypeA,e.coinTypeB];return n.moveCall({target:`${t.cetus_integrate}::${Vt}::collect_fee`,typeArguments:r,arguments:[n.object(e.pool_id),n.object(e.pos_id)]}),e.rewarder_coin_types.forEach(s=>{n.moveCall({target:`${t.cetus_integrate}::${Vt}::collect_reward`,typeArguments:[...r,s],arguments:[n.object(e.pool_id),n.object(e.pos_id),n.pure(Pe)]})}),n.moveCall({target:`${t.cetus_integrate}::${Vt}::close_position`,typeArguments:r,arguments:[n.object(e.pool_id),n.object(e.pos_id),n.pure(e.min_amount_a),n.pure(e.min_amount_b),n.pure(Pe)]}),n}openPositionTransactionPayload(e){const{modules:t}=this.sdk.sdkOptions.networkOptions,n=new Me;n.setGasBudget(Cr);const r=[e.coinTypeA,e.coinTypeB],s=Dn(BigInt(e.tick_lower)).toString(),i=Dn(BigInt(e.tick_upper)).toString(),o=[n.pure(e.pool_id),n.pure(s),n.pure(i)];return n.moveCall({target:`${t.cetus_integrate}::${Vt}::open_position`,typeArguments:r,arguments:o}),n}collectFeeTransactionPayload(e){const{modules:t}=this.sdk.sdkOptions.networkOptions,n=new Me;n.setGasBudget(yn);const r=[e.coinTypeA,e.coinTypeB],s=[n.pure(e.pool_id),n.pure(e.pos_id)];return n.moveCall({target:`${t.cetus_integrate}::${Vt}::collect_fee`,typeArguments:r,arguments:s}),n}},SE=5*60*1e3,Tr=24*60*60*1e3;function Xd(e){return Date.parse(new Date().toString())+e}var xE=class{constructor(e){we(this,"_sdk");we(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getSuiTransactionResponse(e,t=!1){const n=`${e}_getSuiTransactionResponse`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!t)return r.value;const s=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0}});return this.updateCache(n,s,Tr),s}async getFaucetEvent(e,t,n=!0){const r=`${e}_${t}_getFaucetEvent`,s=this._cache[r];if(s!==void 0&&s.getCacheData()&&!n)return s.value;const i=(await this._sdk.fullClient.queryEvents({query:{MoveEventType:`${e}::faucet::FaucetEvent`}})).data;let o={id:"",time:0};return i.forEach(a=>{if(Hk(t)===a.sender){const c=a.parsedJson;if(c){const u={id:c.id,time:Number(c.time)},d=o.time;d>0?u.time>d&&(o=u):o=u}}}),o.time>0?(this.updateCache(r,o,Tr),o):null}async getInitEvent(e=!1){const t=this._sdk.sdkOptions.networkOptions.modules.cetus_clmm,n=`${t}_getInitEvent`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!e)return r.value;const s=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),i=al(s),o=(await this._sdk.fullClient.queryEvents({query:{Transaction:i}})).data;console.log("objects: ",o,s);const a={pools_id:"",global_config_id:""};return o.length>0&&(o.forEach(c=>{const u=c.parsedJson;if(c.type)switch(Ie(c.type).full_address){case`${t}::config::InitConfigEvent`:a.global_config_id=u.global_config_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=u.pools_id;break}}),this.updateCache(n,a,Tr)),a}async getCreatePartnerEvent(e=!1){const t=this._sdk.sdkOptions.networkOptions.modules.cetus_clmm,n=`${t}_getInitEvent`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!e)return r.value;const s=(await this._sdk.fullClient.queryEvents({query:{MoveEventType:`${t}::partner::CreatePartnerEvent`}})).data,i=[];return s.length>0&&(s.forEach(o=>{i.push(o.parsedJson)}),this.updateCache(n,i,Tr)),i}async getPoolImmutables(e=[],t=0,n=100,r=!1){const s=this._sdk.sdkOptions.networkOptions.modules.cetus_clmm,i=`${s}_getInitPoolEvent`,o=this._cache[i],a=[],c=[];if(o!==void 0&&o.getCacheData()&&!r&&a.push(...o.value),a.length===0)try{const d=await this._sdk.fullClient.queryEvents({query:{MoveEventType:`${s}::factory::CreatePoolEvent`}});console.log("objects: ",d),d.data.forEach(l=>{const p=l.parsedJson;p&&a.push({poolAddress:p.pool_id,tickSpacing:p.tick_spacing,coinTypeA:Ie(p.coin_type_a).full_address,coinTypeB:Ie(p.coin_type_b).full_address})}),this.updateCache(i,a,Tr)}catch(d){console.log("getPoolImmutables",d)}const u=e.length>0;for(let d=0;d<a.length;d+=1){const l=a[d];if(!(u&&!e.includes(l.poolAddress))){if(!u){const p=Number(d);if(p<t||p>=t+n)continue}c.push(l)}}return c}async getPools(e=[],t=0,n=100){const r=[];let s=[];e.length>0?s=[...e]:(await this.getPoolImmutables([],t,n,!1)).forEach(a=>{s.push(a.poolAddress)});const i=await this.sdk.fullClient.multiGetObjects({ids:s,options:{showContent:!0,showType:!0}});for(const o of i){const a=Vd(o);r.push(a);const c=`${a.poolAddress}_getPoolObject`;this.updateCache(c,a,Tr)}return r}async getPool(e,t=!0){const n=`${e}_getPoolObject`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!t)return r.value;const s=await this._sdk.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}}),i=Vd(s);return this.updateCache(n,i),i}async getPositionList(e,t=[]){const n=this._sdk.sdkOptions.networkOptions.modules.cetus_clmm,r=[],s=await this._sdk.fullClient.getOwnedObjects({owner:e,options:{showType:!0,showContent:!0}}),i=t.length>0;for(const o of s.data)if(Ie(o.data.type).full_address===`${n}::position::Position`){const c=zc(o.data),u=`${c.pos_object_id}_getPositionList`;this.updateCache(u,c,Tr),i?t.includes(c.pool)&&r.push(c):r.push(c)}return r}async getPosition(e,t){let n=await this.getSipmlePosition(t);return n=await this.updatePositionRewarders(e,n),n}async getSipmlePosition(e){const t=`${e}_getPositionList`,n=this._cache[t];let r=null;if(n!==void 0&&n.getCacheData()&&(r=n.value),r===null){const s=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}});r=zc(s)}return r}async updatePositionRewarders(e,t){const n=await this._sdk.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t.pos_object_id}}),r=ns(n.data).value.fields.value;return Jk(r,t)}async getOwnerCoinAssets(e,t){const n=[];let r=null;for(;;){const s=await(t?this._sdk.fullClient.getCoins({owner:e,coinType:t,cursor:r}):this._sdk.fullClient.getAllCoins({owner:e,cursor:r}));if(s.data.forEach(i=>{BigInt(i.balance)>0&&n.push({coinAddress:Ie(i.coinType).source_address,coinObjectId:i.coinObjectId,balance:BigInt(i.balance)})}),r=s.nextCursor,!s.hasNextPage)break}return n}async getSuiObjectOwnedByAddress(e){const t=[],r=(await this._sdk.fullClient.getOwnedObjects({owner:e})).data.map(i=>i.objectId);return(await this._sdk.fullClient.multiGetObjects({ids:r})).forEach(i=>{const o=cl(i);if(o){const a=Ve.getCoinTypeArg(o),c=Qt.getBalance(o),u={coinAddress:a,balance:c,...o};t.push(u)}}),t}updateCache(e,t,n=SE){let r=this._cache[e];r?(r.overdueTime=Xd(n),r.value=t):r=new _l(t,Xd(n)),this._cache[e]=r}},AE=class{constructor(e){we(this,"_sdk");we(this,"growthGlobal");this._sdk=e,this.growthGlobal=[me,me,me]}get sdk(){return this._sdk}async emissionsEveryDay(e){const n=(await this.sdk.Resources.getPool(e)).rewarder_infos;if(!n)return null;const r=[];for(const s of n){const i=ye.fromX64(new E(s.emissions_per_second));r.push({emissions:Math.floor(i.toNumber()*60*60*24),coin_address:s.coin_name})}return r}async updatePoolRewarder(e,t){const n=await this.sdk.Resources.getPool(e),r=n.rewarder_last_updated_time;if(n.rewarder_last_updated_time=t.toString(),Number(n.liquidity)===0||t.eq(new E(r)))return n;const s=t.div(new E(1e3)).sub(new E(r)).add(new E(15)),i=n.rewarder_infos;for(let o=0;o<i.length;o+=1){const a=i[o],c=ye.checkMulDivFloor(s,new E(a.emissions_per_second),new E(n.liquidity),128);this.growthGlobal[o]=new E(a.growth_global).add(new E(c))}return n}async posRewardersAmount(e,t,n){const r=Date.parse(new Date().toString()),s=await this.updatePoolRewarder(e,new E(r)),i=await this.sdk.Resources.getPosition(t,n);if(i===void 0)return[];const o=s.ticks_handle,a=await this.sdk.Pool.getTickDataByIndex(o,i.tick_lower_index),c=await this.sdk.Pool.getTickDataByIndex(o,i.tick_upper_index);return await this.posRewardersAmountInternal(s,i,a,c)}async poolRewardersAmount(e,t){const n=Date.parse(new Date().toString()),r=await this.updatePoolRewarder(t,new E(n)),s=await this.sdk.Resources.getPositionList(e,[t]),i=await this.getPoolLowerAndUpperTicks(r.ticks_handle,s),o=[me,me,me];for(let a=0;a<s.length;a+=1){const c=await this.posRewardersAmountInternal(r,s[a],i[0][a],i[1][a]);for(let u=0;u<3;u+=1)o[u]=o[u].add(c[u].amount_owed)}return o}posRewardersAmountInternal(e,t,n,r){const s=parseInt(t.tick_lower_index,10),i=parseInt(t.tick_upper_index,10),o=Qk(e,n,r,s,i,this.growthGlobal),a=[],c=[];if(o.length>0){const u=ye.subUnderflowU128(o[0],new E(t.reward_growth_inside_0)),d=ye.checkMulShiftRight(new E(t.liquidity),u,64,256);a.push(o[0]),c.push({amount_owed:new E(t.reward_amount_owed_0).add(d),coin_address:e.rewarder_infos[0].coin_name})}if(o.length>1){const u=ye.subUnderflowU128(o[1],new E(t.reward_growth_inside_1)),d=ye.checkMulShiftRight(new E(t.liquidity),u,64,256);a.push(o[1]),c.push({amount_owed:new E(t.reward_amount_owed_1).add(d),coin_address:e.rewarder_infos[1].coin_name})}if(o.length>2){const u=ye.subUnderflowU128(o[2],new E(t.reward_growth_inside_2)),d=ye.checkMulShiftRight(new E(t.liquidity),u,64,256);a.push(o[2]),c.push({amount_owed:new E(t.reward_amount_owed_2).add(d),coin_address:e.rewarder_infos[2].coin_name})}return c}async getPoolLowerAndUpperTicks(e,t){const n=[],r=[];for(const s of t){const i=await this.sdk.Pool.getTickDataByIndex(e,s.tick_lower_index),o=await this.sdk.Pool.getTickDataByIndex(e,s.tick_upper_index);n.push(i),r.push(o)}return[n,r]}collectRewarderTransactionPayload(e){const{modules:t}=this.sdk.sdkOptions.networkOptions,n=[e.coinTypeA,e.coinTypeB,...e.rewarder_coin_types],r=e.rewarder_coin_types.length;let s=0;for(let a=0;a<r;a++)s|=1<<a;for(let a=0;a<3;a++)n[a+2]===void 0&&n.push(e.coinTypeA);const i=new Me;i.setGasBudget(yn);const o=[i.object(e.pool_id),i.object(e.pos_id),i.pure(s.toString()),i.object(Pe)];return i.moveCall({target:`${t.cetus_integrate}::${Vt}::${e.collect_fee?"collect_fee_and_rewards":"collect_rewards"}`,typeArguments:n,arguments:o}),e.collect_fee&&i.moveCall({target:`${t.cetus_integrate}::${Vt}::collect_fee`,typeArguments:n,arguments:[i.object(e.pool_id),i.object(e.pos_id)]}),e.rewarder_coin_types.forEach(a=>{i.moveCall({target:`${t.cetus_integrate}::${Vt}::collect_reward`,typeArguments:[...n,a],arguments:[i.object(e.pool_id),i.object(e.pos_id),i.pure(Pe)]})}),i}};function to(e,t){return{pair:`${e.toUpperCase()}-${t.toUpperCase()}`,reversePair:`${t.toUpperCase()}-${e.toUpperCase()}`}}function kE(e){if(e.length===1)return{maxPrice:e[0],index:0};let t=e[0],n=0;for(let r=0;r<e.length;r+=1)t.lt(e[r])&&(n=r,t=e[r]);return{maxPrice:t,index:n}}var EE=class{constructor(e){we(this,"priceProviders");we(this,"pathProviders");we(this,"coinProviders");we(this,"graph");we(this,"_rates");we(this,"_coinSymbolMapping");we(this,"_coinAddressMapping");we(this,"poolMapping");we(this,"_sdk");this.priceProviders=[],this.pathProviders=[],this.coinProviders=[],this.graph=new jk,this._rates=new Map,this._coinSymbolMapping=new Map,this._coinAddressMapping=new Map,this.poolMapping=new Map,this._sdk=e}get sdk(){return this._sdk}getPoolAddressAndDirection(e,t){const{pair:n,reversePair:r}=to(e,t);let s=this.poolMapping.get(n);if(s!==void 0)return{address:s,direction:!0};if(s=this.poolMapping.get(r),s!==void 0)return{address:s,direction:!1}}async setCoinList(e){e.forEach(t=>{const n={address:t.address,symbol:t.symbol,decimals:t.decimals};this._coinSymbolMapping.set(t.symbol,n),this._coinAddressMapping.set(t.address,n)})}async loadGraph(){for(const e of this.pathProviders){const{paths:t}=e;for(let n=0;n<t.length;n+=1){let r,s;this.graph.getVertexByKey(t[n].base)===void 0?r=new Dd(t[n].base):r=this.graph.getVertexByKey(t[n].base),this.graph.getVertexByKey(t[n].quote)===void 0?s=new Dd(t[n].quote.toUpperCase()):s=this.graph.getVertexByKey(t[n].quote),this.graph.addEdge(new Mk(r,s));const i=this._coinSymbolMapping.get(t[n].base),o=this._coinSymbolMapping.get(t[n].quote);if(i!==void 0&&o!==void 0){const a=to(t[n].base,t[n].quote).pair;this.poolMapping.set(a,t[n].address)}}}return this}addPathProvider(e){return this.pathProviders.push(e),this}addPriceProvider(e){return this.priceProviders.push(e),this}addCoinProvider(e){return this.coinProviders.push(e),this}tokenInfo(e){return this._coinAddressMapping.has(e)?this._coinAddressMapping.get(e):this._coinSymbolMapping.get(e)}async price(e,t){var w,h,y;const n=this.tokenInfo(e),r=this.tokenInfo(t);if(n===void 0||r===void 0)return;const s=this.graph.getVertexByKey(n.symbol),i=this.graph.getVertexByKey(r.symbol),o=this.graph.findAllPath(s,i),a=Array.from(o),c=[];for(const v of a)for(let m=0;m<v.length-1;m+=1){const b=v[m].value.toString(),_=v[m+1].value.toString(),T=(w=this.getPoolAddressAndDirection(b,_))==null?void 0:w.address;T!==void 0&&c.push(T)}await this._updatePoolInfo(c);const u=[],d=[];for(const v of a){const m=this._price(v);d.push(m.nodes),u.push(m.maxPrice)}const l=kE(u),p=[],g=[];for(let v=0;v<a[l.index].length-1;v+=1){const m=a[l.index][v].value.toString(),b=a[l.index][v+1].value.toString(),_=(h=this.getPoolAddressAndDirection(m,b))==null?void 0:h.address,T=(y=this.getPoolAddressAndDirection(m,b))==null?void 0:y.direction;_!==void 0&&T!==void 0&&(p.push(_),g.push(T))}return{maxIndex:l.index,maxPrice:l.maxPrice,nodes:d,pools:p,directions:g}}async _updatePoolInfo(e){for(const t of e){const n=await this._sdk.Resources.getPool(t),r=this.tokenInfo(n.coinTypeA),s=this.tokenInfo(n.coinTypeB),{pair:i}=to(r.symbol,s.symbol),o=ve.sqrtPriceX64ToPrice(new E(n.current_sqrt_price),r.decimals,s.decimals);this._rates.set(i,o)}}_price(e){let t=new on(1);const n=[];for(let r=0;r<e.length-1;r+=1){const s=e[r].value.toString(),i=e[r+1].value.toString();n.push(s),La(s!==void 0&&i!==void 0,"base and quote is undefined");const o=this._directPrice(s,i);console.log("t",o==null?void 0:o.maxPrice.toString()),La(o!==void 0,`[${s}-${i}] temp price is undefined`),t=t.mul(o.maxPrice),console.log("m",t.toString())}return n.push(e[e.length-1].value.toString()),{maxPrice:t,nodes:n}}_directPrice(e,t){const n=[e,t],{pair:r,reversePair:s}=to(e,t);if(this._rates.has(r)){const i=this._rates.get(r);return i===void 0?void 0:{maxPrice:i,nodes:n}}if(this._rates.has(s)){const i=this._rates.get(s);return La(i!==void 0),{maxPrice:new on(1).div(i),nodes:n}}}},BE=class{constructor(e){we(this,"_sdk");we(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async preswap(e){var c;const{modules:t,simulationAccount:n}=this.sdk.sdkOptions.networkOptions,r=new Me,s=[e.coinTypeA,e.coinTypeB],i=[r.pure(e.pool.poolAddress),r.pure(e.a2b),r.pure(e.by_amount_in),r.pure(e.amount)];r.moveCall({target:`${t.cetus_integrate}::${Hg}::calculate_swap_result`,arguments:i,typeArguments:s});const a=(c=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:n.address})).events)==null?void 0:c.filter(u=>Ie(u.type).name==="CalculatedSwapResultEvent");return a.length===0?null:this.transformSwapData(e,a[0].parsedJson.data)}transformSwapData(e,t){const n=ve.sqrtPriceX64ToPrice(new E(e.pool.current_sqrt_price),e.decimalsA,e.decimalsB).toNumber(),r=ve.sqrtPriceX64ToPrice(new E(t.after_sqrt_price),e.decimalsA,e.decimalsB).toNumber(),s=Math.abs(n-r)/n*100;return{estimatedAmountIn:t.amount_in&&t.fee_amount?new E(t.amount_in).add(new E(t.fee_amount)).toString():"",estimatedAmountOut:t.amount_out,estimatedEndSqrtPrice:t.after_sqrt_price,estimatedFeeAmount:t.fee_amount,isExceed:t.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.by_amount_in,priceImpactPct:s}}calculateRates(e){const{currentPool:t}=e,n={coinA:t.coinTypeA,coinB:t.coinTypeB,currentSqrtPrice:new E(t.current_sqrt_price),currentTickIndex:Number(t.current_tick_index),feeGrowthGlobalA:new E(t.fee_growth_global_a),feeGrowthGlobalB:new E(t.fee_growth_global_b),feeProtocolCoinA:new E(t.fee_protocol_coin_a),feeProtocolCoinB:new E(t.fee_protocol_coin_b),feeRate:new E(t.fee_rate),liquidity:new E(t.liquidity),tickIndexes:[],tickSpacing:Number(t.tickSpacing),ticks:[],collection_name:""};let r;e.a2b?r=e.swapTicks.sort((l,p)=>Number(p.index)-Number(l.index)):r=e.swapTicks.sort((l,p)=>Number(l.index)-Number(p.index));const s=hE(e.a2b,e.byAmountIn,e.amount,n,r);let i=!1;e.byAmountIn?i=s.amountIn.lt(e.amount):i=s.amountOut.lt(e.amount);const o=wl.getDefaultSqrtPriceLimit(e.a2b);e.a2b&&s.nextSqrtPrice.lt(o)&&(i=!0),!e.a2b&&s.nextSqrtPrice.gt(o)&&(i=!0);let a=0;s.crossTickNum>6&&s.crossTickNum<40&&(a=22e3*(s.crossTickNum-6)),s.crossTickNum>40&&(i=!0);const c=ve.sqrtPriceX64ToPrice(n.currentSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),u=ve.sqrtPriceX64ToPrice(s.nextSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),d=Math.abs(c-u)/c*100;return{estimatedAmountIn:s.amountIn,estimatedAmountOut:s.amountOut,estimatedEndSqrtPrice:s.nextSqrtPrice,estimatedFeeAmount:s.feeAmount,isExceed:i,extraComputeLimit:a,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn,priceImpactPct:d}}async createSwapTransactionPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=await this._sdk.Resources.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:r,isAdjustCoinB:s}=ml(e);if(e.a2b&&r||!e.a2b&&s)return await qe.buildSwapTransactionForGas(this._sdk,e,n,t)}return qe.buildSwapTransaction(this.sdk,e,n)}},IE=5*60*1e3,no=24*60*60*1e3;function Zd(e){return Date.parse(new Date().toString())+e}var CE=class{constructor(e){we(this,"_sdk");we(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getAllRegisteredTokenList(e=!1){return await this.factchTokenList("",e)}async getOwnerTokenList(e="",t=!1){return await this.factchTokenList(e,t)}async getAllRegisteredPoolList(e=!1){return await this.factchPoolList("",e)}async getOwnerPoolList(e="",t=!1){return await this.factchPoolList(e,t)}async getWarpPoolList(e=!1){return await this.factchWarpPoolList("","",e)}async getOwnerWarpPoolList(e="",t="",n=!1){return await this.factchWarpPoolList(e,t,n)}async getTokenListByCoinTypes(e){const t={},n="getAllRegisteredTokenList",r=this.getCacheData(n);if(r!==null){const i=r;for(const o of e)for(const a of i)if(o===a.address){t[o]=a;continue}}const s=e.filter(i=>t[i]===void 0);for(const i of s){const o=`${i}_metadata`,a=this.getCacheData(o);if(a!==null)t[i]=a;else{const c=await this._sdk.fullClient.getCoinMetadata({coinType:i}),u={name:c.name,symbol:c.symbol,official_symbol:c.symbol,coingecko_id:"",decimals:c.decimals,project_url:"",logo_url:c.iconUrl,address:i};t[i]=u,this.updateCache(o,u,no)}}return t}async factchTokenList(e="",t=!1){var u;const{simulationAccount:n,token:r}=this.sdk.sdkOptions.networkOptions,s="getAllRegisteredTokenList";if(!t){const d=this.getCacheData(s);if(d!==null)return d}const i=e.length>0,o=new Me;o.moveCall({target:`${r.token_deployer}::coin_list::${i?"fetch_full_list":"fetch_all_registered_coin_info"}`,arguments:i?[o.pure(r.config.coin_registry_id),o.pure(e)]:[o.pure(r.config.coin_registry_id)]});const a=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:n.address}),c=[];return(u=a.events)==null||u.forEach(d=>{Ie(d.type).full_address===`${r.token_deployer}::coin_list::FetchCoinListEvent`&&d.parsedJson.full_list.value_list.forEach(p=>{c.push(this.transformData(p,!1))})}),this.updateCache(s,c,no),c}async factchPoolList(e="",t=!1){var p;const{simulationAccount:n,token:r}=this.sdk.sdkOptions.networkOptions,s="getAllRegisteredPoolList";if(!t){const g=this.getCacheData(s);if(g!==null)return g}const i=e.length>0,o=[],a=i?[r.config.pool_registry_id,e]:[r.config.pool_registry_id],c={packageObjectId:r.token_deployer,module:"lp_list",function:i?"fetch_full_list":"fetch_all_registered_coin_info",gasBudget:1e4,typeArguments:o,arguments:a};console.log("payload: ",c);const u=new Me;u.moveCall({target:`${r.token_deployer}::lp_list::${i?"fetch_full_list":"fetch_all_registered_coin_info"}`,arguments:i?[u.pure(r.config.pool_registry_id),u.pure(e)]:[u.pure(r.config.pool_registry_id)]});const d=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:u,sender:n.address}),l=[];return(p=d.events)==null||p.forEach(g=>{Ie(g.type).full_address===`${r.token_deployer}::lp_list::FetchPoolListEvent`&&g.parsedJson.full_list.value_list.forEach(h=>{l.push(this.transformData(h,!0))})}),this.updateCache(s,l,no),l}async factchWarpPoolList(e="",t="",n=!1){const r=await this.factchPoolList(e,n);if(r.length===0)return[];const s=await this.factchTokenList(t,n),i=[];for(const o of r){for(const a of s)a.address===o.coin_a_address&&(o.coinA=a),a.address===o.coin_b_address&&(o.coinB=a);i.push(o)}return i}async getTokenConfigEvent(e=!1){const t=this._sdk.sdkOptions.networkOptions.token.token_deployer,n=`${t}_getTokenConfigEvent`,r=this._cache[n];if(r!==void 0&&r.getCacheData()&&!e)return r.value;const s=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),i=al(s),o=await this._sdk.fullClient.queryEvents({query:{Transaction:i}}),a={coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""};return o.data.length>0&&o.data.forEach(c=>{const u=Ie(c.type);if(u.full_address===`${t}::core::InitRegistryEvent`)switch(u.type_arguments[0]){case`${t}::coin_list::CoinKey`:a.coin_registry_id=c.parsedJson.registry_id;break;case`${t}::lp_list::PoolKey`:a.pool_registry_id=c.parsedJson.registry_id;break}else if(u.full_address===`${t}::core::InitListEvent`)switch(u.type_arguments[0]){case`${t}::coin_list::CoinKey`:a.coin_list_owner=c.parsedJson.list_id;break;case`${t}::lp_list::PoolKey`:a.pool_list_owner=c.parsedJson.list_id;break}}),a.coin_registry_id.length>0&&this.updateCache(n,a,no),a}transformData(e,t){const n={...e};if(t?(n.coin_a_address=Ie(n.coin_a_address).full_address,n.coin_b_address=Ie(n.coin_b_address).full_address):n.address=Ie(n.address).full_address,e.extensions){const r=e.extensions.contents;for(const s of r){const{key:i}=s.fields;let{value:o}=s.fields;if(i==="labels")try{o=JSON.parse(decodeURIComponent(a0.decode(o)))}catch{}n[i]=o}delete n.extensions}return n}updateCache(e,t,n=IE){let r=this._cache[e];r?(r.overdueTime=Zd(n),r.value=t):r=new _l(t,Zd(n)),this._cache[e]=r}getCacheData(e){const t=this._cache[e];return t!==void 0&&t.getCacheData()?t.value:null}},OE=class{constructor(e){we(this,"_fullClient");we(this,"_pool");we(this,"_position");we(this,"_swap");we(this,"_resources");we(this,"_rewarder");we(this,"_router");we(this,"_token");we(this,"_sdkOptions");we(this,"_launchpad");we(this,"_senderAddress","");this._sdkOptions=e,this._fullClient=new Dk(new Pa({fullnode:e.fullRpcUrl,faucet:e.faucetURL})),this._swap=new BE(this),this._resources=new xE(this),this._pool=new vE(this),this._position=new TE(this),this._rewarder=new AE(this),this._router=new EE(this),this._token=new CE(this),this._launchpad=new _E(this)}get senderAddress(){return this._senderAddress}set senderAddress(e){this._senderAddress=e}get Swap(){return this._swap}get fullClient(){return this._fullClient}get Resources(){return this._resources}get sdkOptions(){return this._sdkOptions}get Pool(){return this._pool}get Position(){return this._position}get Rewarder(){return this._rewarder}get Router(){return this._router}get Token(){return this._token}get Launchpad(){return this._launchpad}};function $E(e){const t={fullRpcUrl:localStorage.getItem(`${e}-current-rpc`)||ue[e||"Sui"].rpcUrl,faucetURL:localStorage.getItem(`${e}-current-rpc`)||ue[e||"Sui"].rpcUrl,networkOptions:{simulationAccount:{address:ue[e||"Sui"].simulationAccount},token:{token_deployer:ue[e||"Sui"].TokenDeployer,config:ue[e||"Sui"].tokenConfig},modules:{cetus_clmm:ue[e||"Sui"].cetusClmm,cetus_integrate:ue[e||"Sui"].cetusIntegrate,integer_mate:ue[e||"Sui"].integerMate,swap_partner:ue[e||"Sui"].swapPartner,config:{global_config_id:ue[e||"Sui"].clmmConfig.global_config_id,pools_id:ue[e||"Sui"].clmmConfig.pools_id}}}},n=Jd(new OE(t)),r=tf(),s=uc(()=>r),i=Qd(),o=uc(()=>i);Zg(()=>{s.value.address&&(n.senderAddress=s.value.address)});const{$notify:a}=ri(),c=A=>{const{$notify:I}=ri();I.success({key:A.hash+"loading",icon:be("img",{class:{"notify-icon":!0,"loading-animate":!0},src:o.value.theme=="default"?"/image/img-loading@2x.png":"/sui-image/img-loading.png"}),message:be("div",{class:"notification-title"},[be("span",{innerHTML:A.title},null)]),description:be("div",{class:"notification-title"},[be("div",{class:"notification-text",innerHTML:nn.global.t("newAdd.confirmingTransaction")},null),be("a",{href:`https://explorer.sui.io/transaction/${window.encodeURIComponent(A.hash)}?network=${ue[e||"Sui"].network}`,target:"_blank",innerHTML:nn.global.t("common.viewTransaction")},null)]),duration:0,class:"ant-notification-copy ant-notification-swap"})},u=A=>{a.success({icon:be("svg",{class:{icon:!0},"aria-hidden":!0},[be("use",{"xlink:href":"#icon-icon-change1"})]),message:be("div",{class:"notification-title"},[be("span",{innerHTML:`${A.title} `+nn.global.t("newAdd.success")},null)]),description:be("div",{class:"notification-title"},[be("div",{class:"notification-text",innerHTML:A.desc},null),be("a",{href:`https://explorer.sui.io/transaction/${window.encodeURIComponent(A.hash)}?network=${ue[e||"Sui"].network}`,target:"_blank",innerHTML:nn.global.t("common.viewTransaction")},null)]),duration:4.5,class:"ant-notification-copy ant-notification-swap"})},d=A=>{a.error({icon:be("svg",{class:{icon:!0},"aria-hidden":!0},[be("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:be("div",{class:"notification-title"},[be("span",{innerHTML:`${A} `+nn.global.t("newAdd.failed")},null)]),description:nn.global.t("newAdd.somethingWrong"),duration:4.5,class:"ant-notification-copy ant-notification-error"})},l=async(A,I=!1)=>{var $,M,L;const{$notify:P}=ri();try{let H={};if(A.res)H=A.res;else{const W=await ii(2e3);H=await n.Resources.getSuiTransactionResponse(A.hash)}if(((M=($=H==null?void 0:H.effects)==null?void 0:$.status)==null?void 0:M.status)==="success"){P.close(A.hash+"loading"),u(A);const W={walletAddress:r.address,chainName:"Sui",...A,...H,date:new Date().getTime()+6048e5};if(i.setTransactionList(W),I)if(H.events){const ie=H.events.filter(Q=>Q.type.includes("OpenPositionEvent"));return{status:!0,nftInfo:ie[0]&&((L=ie[0])==null?void 0:L.parsedJson)}}else return{status:!0,nftInfo:H.effects.events};return!0}else{if(H&&H.effects&&H.effects.status&&H.effects.status.status!=="success")return P.close(A.hash+"loading"),d(A.title),!1;setTimeout(()=>l(A),3e3)}}catch{return P.close(A.hash+"loading"),P.error({icon:be("svg",{class:{icon:!0},"aria-hidden":!0},[be("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:be("div",{class:"notification-title"},[be("span",{innerHTML:`${A.title} Failed`},null)]),duration:4.5,description:"Something went wrong",class:"ant-notification-copy ant-notification-error"}),!0}},p=async(A,I=!1)=>{var $,M;await ii(2e3);const P=await n.Resources.getSuiTransactionResponse(A.hash);if(((M=($=P==null?void 0:P.effects)==null?void 0:$.status)==null?void 0:M.status)==="success"){a.close(A.hash+"loading"),u(A);const L={walletAddress:r.address,chainName:"Sui",...A,...P,date:new Date().getTime()+6048e5};i.setTransactionList(L)}},g=async(A,I)=>{var L,H,W,J,ie,Q,fe;const P=s.value.assets[A];if(!P)return[];const $=P.objects.filter(ce=>ce.balance&&ce.balance!=="0"),M=$.reduce((ce,oe)=>Number(ce.balance)<Number(oe.balance)?oe:ce);if(ne(I).lte(ne(M.balance))&&$.length>1)return[M==null?void 0:M.coinObjectId];{const ce=[];if(A==="0x2::sui::SUI"){const oe=$.sort((he,Ee)=>Number(he.balance)-Number(Ee.balance));let Te=ne(0);for(let he=0;he<oe.length;he++){const Ee=oe[he];if(Te.lte(ne(I)))ce.push((W=(H=(L=Ee==null?void 0:Ee.data)==null?void 0:L.fields)==null?void 0:H.id)==null?void 0:W.id),Te=Te.plus(ne(Ee.balance));else break}return ce.length===oe.length&&await w((fe=(Q=(ie=(J=oe[oe.length-1])==null?void 0:J.data)==null?void 0:ie.fields)==null?void 0:Q.id)==null?void 0:fe.id,oe[oe.length-1].balance),ce}else return $.forEach(oe=>{ce.push(oe==null?void 0:oe.coinObjectId)}),ce}},w=async(A,I)=>{var M;const P={kind:"transferSui",data:{suiObjectId:A,gasBudget:1e3,recipient:s.value.address,amount:5e4}},$=new vd;$.moveCall({target:`${ue[e||"Sui"].faucetObjectId}::${info.transactionModule}::faucet`,typeArguments:[],arguments:[$.pure(info.suplyID)]});try{const L=await s.value.currentWallet.signAndExecuteTransactionBlock(P),H=(M=L==null?void 0:L.effects)==null?void 0:M.events;for(let W=0;W<H.length;W++)if(H[W].coinBalanceChange.changeType==="Receive"&&H[W].coinBalanceChange.amount===5e4)return H[W].coinBalanceChange.coinObjectId;return""}catch{}return[]},h=async(A,I,P)=>{var H,W,J,ie,Q,fe,ce,oe,Te,he,Ee,nt,lt,dt,ze,_r,rs,ss,vl,Tl,Sl,xl;const $=s.value.address;let M={};A!=="0x2::sui::SUI"?M={kind:"pay",data:{inputCoins:I,recipients:[$],amounts:[Number(P)],gasBudget:1e5}}:M={kind:"payAllSui",data:{inputCoins:I,recipient:$,gasBudget:1e3}};const L=await s.value.currentWallet.signAndExecuteTransaction(M);if(((W=(H=L==null?void 0:L.effects)==null?void 0:H.status)==null?void 0:W.status)==="success"||((fe=(Q=(ie=(J=L==null?void 0:L.EffectsCert)==null?void 0:J.effects)==null?void 0:ie.effects)==null?void 0:Q.status)==null?void 0:fe.status)==="success")if(A!=="0x2::sui::SUI"){const Ms=((Te=(oe=(ce=L==null?void 0:L.effects)==null?void 0:ce.created[0])==null?void 0:oe.reference)==null?void 0:Te.objectId)||((dt=(lt=(nt=(Ee=(he=L==null?void 0:L.EffectsCert)==null?void 0:he.effects)==null?void 0:Ee.effects)==null?void 0:nt.created[0])==null?void 0:lt.reference)==null?void 0:dt.objectId);if(Ms)return Ms}else{const Ms=((rs=(_r=(ze=L==null?void 0:L.effects)==null?void 0:ze.mutated[0])==null?void 0:_r.reference)==null?void 0:rs.objectId)||((xl=(Sl=(Tl=(vl=(ss=L==null?void 0:L.EffectsCert)==null?void 0:ss.effects)==null?void 0:vl.effects)==null?void 0:Tl.mutated[0])==null?void 0:Sl.reference)==null?void 0:xl.objectId);if(Ms)return Ms}else{d("MergeCoin Error");return}},y=async A=>{try{r.setLoading(!0);const I=await n.Resources.getOwnerCoinAssets(A),P={};return I.forEach($=>{var M,L;if($&&$.coinAddress){const H=$?$.balance.toString():"0",W={...$,balance:H};P[$.coinAddress]={...$,balance:(M=P[$.coinAddress])!=null&&M.balance?ne(H).plus(P[$.coinAddress].balance).toString():H,objects:(L=P[$.coinAddress])!=null&&L.objects?[...P[$.coinAddress].objects,W]:[W]}}}),r.setAssets(P),r.setLoading(!1),P}catch{r.setLoading(!1)}},v=async()=>await n.Token.getAllRegisteredTokenList(),m=async()=>{var A;try{const I=await n.Token.getOwnerWarpPoolList(ue[e||"Sui"].tokenConfig.pool_list_owner,ue[e||"Sui"].tokenConfig.coin_list_owner),$=(await fetch(`${ue[e||"Sui"].api}/v2/sui/swap/count`).then(H=>H.json())).data,M=Object.fromEntries($.pools.map(H=>[H.swap_account,H])),L=[];for(let H=0;H<I.length;H++){const W=I[H];if(!W.coinA)continue;const J=((A=M[W.address])==null?void 0:A.is_forward)===!1;L.push({...W,needReverse:J})}return L}catch{}},b=async(A=[])=>{const I=await n.Resources.getPools(A);if(A.length===0){const P={};return I.forEach($=>{P[$.poolAddress]={...$,rate:ne($.fee_rate).div(Math.pow(10,6)).toString()}}),P}else return I},_=async A=>await n.Resources.getPool(A);return{setTransations:p,showTransitionPending:c,showTransitionSuccess:u,showTransitionError:d,watchTransaction:l,getCoinId:g,mergeCoinObject:h,getAccount:y,getTokenList:v,getLpList:m,getPools:b,getPool:_,mintCoin:A=>{const I=new vd;return I.moveCall({target:`${ue[e||"Sui"].faucetObjectId}::${A.transactionModule}::faucet`,typeArguments:[],arguments:[I.pure(A.suplyID)]}),{transactionBlock:I,options:{showEffects:!0}}},handleTx:A=>{var P,$;let I;return A!=null&&A.digest&&(I={hash:A==null?void 0:A.digest,status:($=(P=A==null?void 0:A.effects)==null?void 0:P.status)==null?void 0:$.status,res:A}),I},TickUtil:ac,TickMath:ve,getNearestTickByTick:cc,getTicks:async A=>{try{return await n.Pool.fetchTicks({pool_id:A.poolAddress,coinTypeA:A.coinTypeA,coinTypeB:A.coinTypeB})}catch{}},getEstPositionAPRWithMulti:async(A,I,P,$)=>await pE(A,I,P,$),getCoinAmountFromLiquidity:A=>{const{pool:I,position:P,roundUp:$}=A,M=Number(P.tick_lower_index),L=Number(P.tick_upper_index),H=ve.tickIndexToSqrtPriceX64(M),W=ve.tickIndexToSqrtPriceX64(L),J=Or.getCoinAmountFromLiquidity(new E(P.liquidity),new E(I.current_sqrt_price),H,W,$),ie=xt(J.coinA.toString(),I.coinA.decimals),Q=xt(J.coinB.toString(),I.coinB.decimals);return{coinaAmount:ie,coinbAmount:Q}},estLiquidityAndcoinAmountFromOneAmounts:A=>{const{tokenA:I,tokenB:P,lowerTick:$,upperTick:M,coinAmount:L,iscoinA:H,roundUp:W,slippage:J,curSqrtPrice:ie}=A,Q=Or.estLiquidityAndcoinAmountFromOneAmounts($,M,L,H,W,J,ie),fe=I.decimals,ce=P.decimals,{tokenMaxA:oe,tokenMaxB:Te,liquidityAmount:he}=Q;return{tokenMaxAOrigin:oe.toString(),tokenMaxBOrigin:Te.toString(),tokenMaxA:xt(oe.toString(),fe),tokenMaxB:xt(Te.toString(),ce),liquidityAmount:he}},getAddLiquidityTransactionPayload:async A=>{const{pool:I,amount:P,fix_amount_a:$,roundUp:M,tick_lower:L,tick_upper:H,index:W,slippage:J}=A,ie=await _(I.poolAddress),Q=$?At(P,I.token_a.decimals):At(P,I.token_b.decimals),fe=ve.sqrtPriceX64ToTickIndex(new E(ie.current_sqrt_price));let ce,oe;if(fe>L&&fe<H){const he=Or.estLiquidityAndcoinAmountFromOneAmounts(L,H,new E(Q.toString()),$,M,J,new E(ie.current_sqrt_price));ce=$?Q.toNumber():he.tokenMaxA.toNumber(),oe=$?he.tokenMaxB.toNumber():Q.toNumber()}else fe>=H?(ce=0,oe=Q.toNumber()):fe<=L&&(ce=Q.toNumber(),oe=0);return{transactionBlock:await n.Position.createAddLiquidityTransactionPayload({coinTypeA:I.token_a.address,coinTypeB:I.token_b.address,pool_id:I.poolAddress,tick_lower:L,tick_upper:H,fix_amount_a:$,amount_a:ce,amount_b:oe,is_open:!W,pos_id:W}),options:{showEffects:!0,showEvents:!0}}},getTickDataFromUrlData:cE,getPriceImpactPct:(A,I,P)=>{const $=ve.sqrtPriceX64ToPrice(new E(A.current_sqrt_price),A.coinA.decimals,A.coinB.decimals).toNumber(),M=P?$:1/$,L=Math.abs(M-Number(I))/Number(I)*100;return Number(Xe(L,2))},preSwap:async A=>{const{pool:I,a2b:P,byAmountIn:$,amount:M}=A,L=I.coinA.decimals,H=I.coinB.decimals,W=I!=null&&I.current_sqrt_price?I:await _(I.address);let J;P&&$||!P&&!$?J=At(M,L):J=At(M,H);const ie=await n.Swap.preswap({pool:W,current_sqrt_price:W.current_sqrt_price,coinTypeA:W.coinTypeA,coinTypeB:W.coinTypeB,decimalsA:L,decimalsB:H,a2b:P,by_amount_in:$,amount:J.toString()});return{...ie,estimatedAmountIn:Lr(xt(ie.estimatedAmountIn.toString(),P?L:H),P?L:H),estimatedAmountOut:Lr(xt(ie.estimatedAmountOut.toString(),P?H:L),P?H:L),priceImpactPct:Xe(ie.priceImpactPct,2)}},getSwapTransactionPayload:async A=>{const{pool:I,a2b:P,byAmountIn:$,amount:M,slippage:L}=A,H=I.poolAddress,W=I.token_a.decimals,J=I.token_b.decimals;let ie;P&&$||!P&&!$?ie=At(M,W):ie=At(M,J);const Q=await n.Swap.preswap({pool:I,current_sqrt_price:I.current_sqrt_price,coinTypeA:I.coinTypeA,coinTypeB:I.coinTypeB,decimalsA:W,decimalsB:J,a2b:P,by_amount_in:$,amount:ie.toString()}),fe=ne(Q.estimatedAmountOut.toString()),ce=ne(Q.estimatedAmountIn.toString()),oe=$?fe.sub(fe.mul(L)):ce.add(ce.mul(L));return{transactionBlock:await n.Swap.createSwapTransactionPayload({pool_id:H,a2b:Q.aToB,by_amount_in:Q.byAmountIn,amount:Q.amount.toString(),amount_limit:Xe(oe.toString(),0)||"",coinTypeA:I.token_a.address,coinTypeB:I.token_b.address}),options:{showEffects:!0}}},getPositionList:async(A,I)=>{const P=Object.values(I).map(M=>M.poolAddress);return await n.Resources.getPositionList(A,P)},getTickDataByIndex:async(A,I)=>await n.Pool.getTickDataByIndex(A,I),getCollectFeesQuote:async A=>{const{pool:I,position:P,tickLowerData:$,tickUpperData:M}=A,L=await _(I.poolAddress),H=bE({clmmpool:L,position:P,tickLower:$,tickUpper:M}),W=xt(H.feeOwedA.toString(),I.token_a.decimals),J=xt(H.feeOwedB.toString(),I.token_b.decimals);return{feeOwedA:Number(W)>99999999999||Number(W)<0?"0":W,feeOwedB:Number(J)>99999999999||Number(J)<0?"0":J}},getPosRewardersAmount:async A=>{const{poolAddress:I,pos:P,positionHandle:$}=A;return await n.Rewarder.posRewardersAmount(I,$,P)},getNftHash:A=>A.pos_object_id,getPositionInfo:async(A,I,P,$="")=>({...await n.Resources.getPosition(A.positions_handle,$),tokenName:P,collectionName:I}),getRemoveLiquidityTransactionPayload:async A=>{const{pool:I,coinTypeA:P,coinTypeB:$,coinTypeC:M,coinTypeD:L,coinTypeE:H,position:W,delta_liquidity:J,rewards_num:ie}=A,Q=await _(I.poolAddress),fe={...I,...Q},ce=Number(W.tick_lower_index),oe=Number(W.tick_upper_index),Te=ve.tickIndexToSqrtPriceX64(ce),he=ve.tickIndexToSqrtPriceX64(oe),Ee=Or.getCoinAmountFromLiquidity(J,new E(fe.current_sqrt_price),Te,he,!0),nt=ne(Ee.coinA.toString()).mul(ne(1-A.slippage)),lt=ne(Ee.coinB.toString()).mul(ne(1-A.slippage));let dt;if(J.toString()===W.liquidity){const ze=[];M&&ze.push(M),L&&ze.push(L),H&&ze.push(H),dt=await n.Position.closePositionTransactionPayload({coinTypeA:P,coinTypeB:$,min_amount_a:Xe(nt.toString(),0),min_amount_b:Xe(lt.toString(),0),rewarder_coin_types:[...ze],pool_id:I.poolAddress,pos_id:A.position.pos_object_id})}else dt=await n.Position.removeLiquidityTransactionPayload({coinTypeA:P,coinTypeB:$,delta_liquidity:J.toString(),min_amount_a:Xe(nt.toString(),0),min_amount_b:Xe(lt.toString(),0),pool_id:I.poolAddress,pos_id:A.position.pos_object_id});return{transactionBlock:dt,options:{showEffects:!0,showEvents:!0}}},getCollectRewarderTransactionPayload:async A=>{const I=[];return A.coinTypeC&&I.push(A.coinTypeC),A.coinTypeD&&I.push(A.coinTypeD),A.coinTypeE&&I.push(A.coinTypeE),{transactionBlock:await n.Rewarder.collectRewarderTransactionPayload({pool_id:A.pool_address,pos_id:A.pos_index,rewarder_coin_types:[...I],coinTypeA:A.coinTypeA,coinTypeB:A.coinTypeB,collect_fee:!1}),options:{showEffects:!0,showEvents:!0}}},getCollectFeeTransactionPayload:async A=>({transactionBlock:await n.Position.collectFeeTransactionPayload({coinTypeA:A.pool.token_a.address,coinTypeB:A.pool.token_b.address,pool_id:A.pool.poolAddress,pos_id:A.position.pos_object_id}),options:{showEffects:!0,showEvents:!0}}),getTokenListByCoinType:async()=>[],getPoolImmutables:async()=>await n.Resources.getPoolImmutables(),estimateLiquidityForCoinA:ti,estimateLiquidityForCoinB:ni,getCreatPoolTransactionPayload:async A=>{const{coinTypeA:I,coinTypeB:P,decimalsA:$,decimalsB:M,amountA:L,amountB:H,minPrice:W,maxPrice:J,fix_amount_a:ie,tick_spacing:Q,slippage:fe,price:ce}=A,oe=ve.priceToSqrtPriceX64(ne(ce),$,M),Te=ve.priceToTickIndex(ne(ce),$,M,Q);let he,Ee;if(W==="0"&&J==="∞")he=ac.getMinIndex(Number(Q)),Ee=ac.getMaxIndex(Number(Q));else{const rs=Number(W)==0?-443630:ve.priceToTickIndex(ne(W),$,M),ss=ve.priceToTickIndex(ne(J),$,M);he=cc(rs,Number(Q)),Ee=cc(ss,Number(Q))}const nt=ie?At(L,$):At(H,M);let lt,dt;ve.tickIndexToSqrtPriceX64(he),ve.tickIndexToSqrtPriceX64(Ee);let ze;Te>he&&Te<Ee?(ze=Or.estLiquidityAndcoinAmountFromOneAmounts(he,Ee,new E(nt.toString()),ie,!0,fe,oe),lt=ie?nt.toString():ze.tokenMaxA.toString(),dt=ie?ze.tokenMaxB.toString():nt.toString()):Te>=Ee?(lt="0",dt=ne(H).mul(ne(Math.pow(10,M))).toString()):Te<=he&&(lt=ne(L).mul(ne(Math.pow(10,$))).toString(),dt="0");const _r=await n.Pool.creatPoolTransactionPayload({tick_spacing:Q,initialize_sqrt_price:oe.toString(),uri:"",fix_amount_a:ie,amount_a:lt,amount_b:dt,tick_lower:he,tick_upper:Ee,coinTypeA:I,coinTypeB:P});return _r.setGasBudget(5e7),{transactionBlock:_r,options:{showEffects:!0,showEvents:!0}}},getTokenListByCoinTypes:async A=>{try{const I=await n.Token.getTokenListByCoinTypes([A]);return Object.values(I)}catch{return[]}},getIsSortedSymbols:(A,I)=>!!bl(bn(A),bn(I)),d:ne}}function Yt(e){let t={};return!e||e==="Aptos"?t=Dw():t=$E(e),{...t}}const Nn="0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",RE=[{base_symbol:`${Nn}::btc::BTC`,price:"175181.584616",quote_symbol:"USD"},{base_symbol:`${Nn}::eth::ETH`,price:"1471.343485",quote_symbol:"USD"},{base_symbol:`${Nn}::usdc::USDC`,price:"0.998772",quote_symbol:"USD"},{base_symbol:`${Nn}::usdt::USDT`,price:"0.949513",quote_symbol:"USD"},{base_symbol:`${Nn}::busd::BUSD`,price:"1",quote_symbol:"USD"},{base_symbol:"0x2::sui::SUI",price:"1",quote_symbol:"USD"}],g3=[{symbol:"USDT",name:"CetusUSDT",num:"200",amount:"200000000",transactionModule:"usdt",address:`${Nn}::usdt::USDT`,suplyID:"0xe1f4bdaa469a0930e7dd6e6f7438ed6a72b2d4085d2f6c20d97213d8f4dd861c",decimals:6},{symbol:"USDC",name:"CetusUSDC",num:"200",amount:"200000000",transactionModule:"usdc",address:`${Nn}::usdc::USDC`,suplyID:"0xf9db65a36b991de2864b27c0b636800236e31087a7299ded025b2068751b744d",decimals:6},{symbol:"ETH",name:"CetusETH",num:"0.1",amount:"100000000",transactionModule:"eth",address:`${Nn}::eth::ETH`,suplyID:"0x010f8ea766c72e793eb540e21fd795fefd05661b6fb6521cc9c7af581178bad5",decimals:8},{symbol:"BTC",name:"CetusBTC",num:"0.01",amount:"10000000",transactionModule:"btc",address:`${Nn}::btc::BTC`,suplyID:"0xdf17a296e80416827b9bab70ca2f84a293fdf967815b365c6c7f7b12141703fb",decimals:8}],y3=Jg("pool",{state:()=>({tokens:[],tokensObj:{},newTokens:[],newTokenObj:{},tokensNameObj:{},pools:[],poolsObj:{},myPositions:[],addressLpTokens:{},addressTokens:{},currentPositionLoading:!1,myPositionsLoading:!0,poolsLoading:!0,RATES:{},currentPositionInfo:{},poolConfigList:[],feeOwedObj:{},rewarderObj:{},chinaTokens:[],chinaTokensObj:{},getPoolInfoSuccess:!1,recommendRangesObj:{},allTokenObj:{},isTokenLoading:!0,poolPriceConfigObj:{},defaultPoolInfo:{}}),actions:{async setPoolsObj(e){this.poolsObj=e},async setChainPoolConfigList(e){this.poolConfigList=e,this.pools=e},async setPoolConfigList(e){const n=await Yt(e).getLpList(),r=[];n.forEach(s=>{var i,o;r.push({...s,token_a:{...s==null?void 0:s.coinA,logoURI:(i=s==null?void 0:s.coinA)==null?void 0:i.logo_url},token_b:{...s==null?void 0:s.coinB,logoURI:(o=s==null?void 0:s.coinB)==null?void 0:o.logo_url},isFarming:s.is_display_rewarder&&(s.rewarder_display1||s.rewarder_display2||s.rewarder_display3),chain:e==="Aptos"?"aptos":"sui"})}),this.poolConfigList=r},async newSetPools1(e,t){this.poolsLoading=!0,this.getPoolInfoSuccess=!1,this.poolsObj={};const n=Yt(t),r=this;e&&e.length>0&&e.forEach(async(s,i)=>{(function(o,a){setTimeout(async function(){const c=await n.getPools([a.address]);r.poolsObj[c[0].poolAddress]={...a,...c[0],fee:c[0].fee_rate/1e6},r.addressLpTokens=r.poolsObj,r.poolsLoading=!1,Object.values(r.poolsObj).length==r.poolConfigList.length&&(r.getPoolInfoSuccess=!0)},1e3*o)})(i,s)})},async getRecommendRanges(e){var n;let t=null;if(e&&e.includes("Sui")?t=await $fetch(`${ue[e].api}/v2/sui/liquidity/recommend_ranges`):t=await $fetch(`${ue.Aptos.api}/v2/liquidity/recommend_ranges`),(n=t==null?void 0:t.data)!=null&&n.list){const r=Object.fromEntries(t.data.list.map((s,i)=>[s.address,s]));this.recommendRangesObj=r,this.poolPriceConfigObj=r}else this.recommendRangesObj={},this.poolPriceConfigObj={}},async newSetPools(e,t){this.poolsLoading=!0,this.getPoolInfoSuccess=!1,this.poolsObj={};const n=Yt(t);if(e&&e.length>0){for(let r=0;r<e.length;r++){const s=e[r],i=await n.getPools([s.address]);this.defaultPoolInfo[i[0].poolAddress]=i[0],this.poolsObj[i[0].poolAddress]={...s,...i[0],fee:Number(i[0].fee_rate)/1e6},this.addressLpTokens=this.poolsObj,this.poolsLoading=!1,await ii(500)}this.getPoolInfoSuccess=!0}},async setSinglePool(e,t,n){const s=await Yt(n).getPool(e.address),i={...e,...s,fee:s.fee_rate/1e6,priceConfigObj:t.recommend_ranges||{},type:t.type||""};this.poolsObj[e.address]=i,this.addressLpTokens[e.address]=i},async setPools(e,t){this.poolsLoading=!0;let n={};t&&t.includes("Sui")?n=await $fetch(`${ue[t].api}/v2/sui/liquidity/recommend_ranges`):n=await $fetch(`${ue.Aptos.api}/v2/liquidity/recommend_ranges`);const r=Object.fromEntries(n.data.list.map((d,l)=>[d.address,d])),i=(e||this.poolConfigList).map(d=>({...d,token_a:d.coinA,token_b:d.coinB,priceConfigObj:r&&r[d.address]&&r[d.address].recommend_ranges,type:r&&r[d.address]&&r[d.address].type}))||[],a=await Yt(t).getPools(),c=[],u={};i.forEach(d=>{const l=a[d.address]||{},p={...d,...l,fee:l.rate*100,tickSpacing:Number(l.tickSpacing)};c.push(p),u[ef(l.poolAddress)]=p}),this.pools=c,this.poolsObj=u,Object.fromEntries(c.map(d=>[d.poolAddress,d])),this.addressLpTokens=u,this.poolsLoading=!1,c.length<=0&&this.setMyPositionsLoading(!1)},async updateCurrentPools(e,t){const n=Yt(t),r=this.poolsObj[e];if(r){let s={};t&&t.includes("Sui")?s=await n.getPool(r.poolAddress):s=await n.getPoolState(r.poolAddress,r.poolType,!1);const i={...this.poolsObj},o={...i[e],...s};i[e]={...o},this.poolsObj=i}},async setTokens(e){const t=[];(await Yt(e).getTokenList()).forEach(s=>{t.push({...s,logoURI:s.logo_url,chain:e.toLowerCase()})}),this.tokens=t,this.tokensObj=Object.fromEntries(t.map((s,i)=>[s.address,s])),this.tokensNameObj=Object.fromEntries(t.map((s,i)=>[s.address,s])),this.newTokenObj=Object.fromEntries(t.map((s,i)=>[s.address,s])),this.isTokenLoading=!1,this.newTokens=t},async setChinaTokens(e){const n=await Yt(e).getTokenListByCoinType(),r=[];n.forEach(s=>{r.push({...s,logoURI:e=="Aptos"?"https://archive.cetus.zone/assets/image/default1.png":"https://archive.cetus.zone/assets/image/default2.png",logo_url:e=="Aptos"?"https://archive.cetus.zone/assets/image/default1.png":"https://archive.cetus.zone/assets/image/default2.png"})}),this.chinaTokens=r,this.chinaTokensObj=Object.fromEntries(r.map((s,i)=>[s.address,s]))},setCurrentPositionLoading(e){this.currentPositionLoading=e},setMyPositionsLoading(e){this.myPositionsLoading=e},async setRates(e){let t={};if(e&&e.includes("Sui"))try{t=await $fetch(`${ue.Sui.api}/v2/sui/price`)}catch{t={data:{prices:RE}}}else t=await $fetch(`${ue.Aptos.api}/v2/price`);const n=t.data.prices||[];this.RATES=Object.fromEntries(n.map(r=>[r.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":r.base_symbol,{...r,base_symbol:r.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":r.base_symbol}]))},async getMyPositons(e,t,n){this.setMyPositionsLoading(!0);const r=Yt(n),s=await r.getPositionList(e,t)||[];s.length<1&&this.setMyPositionsLoading(!1);const i=[];s.forEach(a=>{const c=this.poolsObj[a.pool];let u,d,l,p="",g,w,h,y;if(a.liquidity&&a.liquidity!=="0"&&c){const v={creator:a.creator,collection:a.collection,name:a.name};n==="Aptos"?y=r.getNftHash(v):y=r.getNftHash(a);const m=c.token_a.decimals,b=c.token_b.decimals;l=Lr(r.TickMath.sqrtPriceX64ToPrice(c.current_sqrt_price,m,b).toString(),6),u=r.TickMath.tickIndexToPrice(Number(a.tick_lower_index),m,b).toString(),d=r.TickMath.tickIndexToPrice(Number(a.tick_upper_index),m,b).toString();const _=r.getCoinAmountFromLiquidity({pool:c,position:a,roundUp:!0}),T=_.coinaAmount,x=_.coinbAmount,k=Number(x)+Number(T)*Number(l),B=(Number(l)/k*100).toFixed(0),D=(x/k*100).toFixed(0);c.isPause?p="Closed":Number(l)>=Number(u)&&Number(l)<=Number(d)?p="Active":(Number(l)>Number(d)||Number(l)<Number(u))&&(p="Inactive"),i.push({...c,...a,token_a:{...c.token_a,...this.tokensObj[c.token_a.address],logoURI:this.tokensObj[c.token_a.address].logo_url},token_b:{...c.token_b,...this.tokensObj[c.token_b.address],logoURI:this.tokensObj[c.token_b.address].logo_url},tokenARates:g,tokenBRates:w,amountA:T,amountB:x,fromPercent:B,toPercent:D,amountUSD:h,tokenName:a.tokenName||a.name,currentStatus:p,positionLiquidity:a.liquidity,nftHash:y,currentPrice:Xe(l,12),minPrice:Xe(u,12),maxPrice:Xe(d,12)})}});const o=i.sort((a,c)=>c.amountUSD-a.amountUSD);this.myPositions=o,this.setMyPositionsLoading(!1),this.getPendingFees(o,n),this.getRewarder(o,n)},async setCurrentPositionInfo(e,t,n,r,s=""){const i=Yt(r),o=this.addressLpTokens&&this.addressLpTokens[e],a=await i.getPool(e),c={...o,...a},u=await i.getPositionInfo(c,t,n,s);if(u&&c){let d,l,p,g="",w,h,y,v,m,b,_,T=0,x=0,k;const B={creator:u.pool,collection:u.collectionName,name:u.name};if(r==="Aptos"?k=i.getNftHash(B):k=i.getNftHash(u),c){try{const O=await i.getTickDataByIndex(c.ticks_handle,Number(u.tick_lower_index)),q=await i.getTickDataByIndex(c.ticks_handle,Number(u.tick_upper_index)),z=await i.getCollectFeesQuote({pool:c,position:u,tickLowerData:O,tickUpperData:q});z&&(T=Number(z.feeOwedA),x=Number(z.feeOwedB))}catch{}const D=c.token_a.decimals,U=c.token_b.decimals;p=i.TickMath.sqrtPriceX64ToPrice(c.current_sqrt_price,D,U).toString(),d=i.TickMath.tickIndexToPrice(Number(u.tick_lower_index),D,U).toString(),l=i.TickMath.tickIndexToPrice(Number(u.tick_upper_index),D,U).toString(),w=u.tick_lower_index,h=u.tick_upper_index;const N=i.getCoinAmountFromLiquidity({pool:c,position:u,roundUp:!0});b=N.coinaAmount,_=N.coinbAmount;const G=Number(_)+Number(b)*Number(p),X=(Number(b)*Number(p)/G*100).toFixed(0),le=(Number(_/Number(G))*100).toFixed(0);c.isPause?g="Closed":Number(p)>=Number(d)&&Number(p)<=Number(l)?g="Active":(Number(p)>Number(l)||Number(p)<Number(d))&&(g="Inactive"),this.setCurrentPositionLoading(!1),this.currentPositionInfo={...u,poolInfo:c,token_a:{...c.token_a,...this.tokensObj[c.token_a.address]},token_b:{...c.token_b,...this.tokensObj[c.token_b.address]},current_tick_index:c.current_tick_index,current_sqrt_price:c.current_sqrt_price,tickSpacing:c.tickSpacing,fee:c.fee,poolAddress:c.poolAddress,address:c.address,is_display_rewarder:c.is_display_rewarder,nftHash:k,feeOwedA:T,feeOwedB:x,currentStatus:g,amountA:b,amountB:_,tokenARates:y,tokenBRates:v,amountUSD:m,currentPrice:p,minPrice:Xe(d,12),minTick:w,maxTick:h,maxPrice:Xe(l,12),fromPercent:X,toPercent:le,tokenName:u.tokenName||u.name}}}},async getPendingFees(e,t){var s,i;const n=this.RATES,r=Yt(t);for(let o=0;o<e.length;o++){const a=e[o],c=await r.getPool(a.poolAddress);if(c){const u=await r.getTickDataByIndex(c.ticks_handle,Number(a.tick_lower_index)),d=await r.getTickDataByIndex(c.ticks_handle,Number(a.tick_upper_index)),l=t==="Aptos"?"":a.pos_object_id,p=await r.getPositionInfo(c,a.collection,a.tokenName,l),g={...c,token_a:this.tokensObj&&this.tokensObj[c.coinTypeA]||this.chinaTokensObj&&this.chinaTokensObj[c.coinTypeA],token_b:this.tokensObj&&this.tokensObj[c.coinTypeB]||this.chinaTokensObj&&this.chinaTokensObj[c.coinTypeB]},w=await r.getCollectFeesQuote({pool:g,position:p,tickLowerData:u,tickUpperData:d}),h=[],y=Number(w.feeOwedA),v=Number(w.feeOwedB);let m,b,_;n&&n[g.token_a.address]&&n[g.token_b.address]?(b=y*((s=n[g.token_a.address])==null?void 0:s.price),_=v*((i=n[g.token_b.address])==null?void 0:i.price),m=b+_):m="--",h.push({amount:y,amountUSD:b,...g.token_a,logoURI:g.token_a.logo_url},{amount:v,amountUSD:_,...g.token_b,logoURI:g.token_b.logo_url}),this.feeOwedObj[a.tokenName]={feesResult:h,feeOwed:m},await ii(1e3)}}},async getRewarder(e,t){const n=Yt(t),r=this;for(let s=0;s<e.length;s++)if(e[s].rewarder_infos&&e[s].rewarder_infos.length>0){const i=e[s],o=await n.getTickDataByIndex(i.ticks_handle,Number(i.tick_lower_index)),a=await n.getTickDataByIndex(i.ticks_handle,Number(i.tick_upper_index)),c=await n.getPosRewardersAmount({poolAddress:i.poolAddress,positionName:i.tokenName,tickLowerData:o,tickUpperData:a}),u=[];let d=0;c.forEach((l,p)=>{var g;if(i[`rewarder_display${p+1}`]){const w=r.newTokenObj[l.coin_address].decimals,h=r.newTokenObj[l.coin_address],y=Number(l.amount_owed.toString())>99999999999999?0:Number(l.amount_owed.toString()),v=Xe(y/Math.pow(10,w),w),m=(g=r.RATES[l.coin_address])==null?void 0:g.price,b=Number(v)*m;d+=b,u.push({...l,...h,amount:v,amountUSD:b,amount_owed:l.amount_owed.toString(),rewarder_display:i[`rewarder_display${p+1}`]}),r.rewarderObj[i.tokenName]={pendingRewarderArr:u.filter(_=>_.rewarder_display),pendingRewarderView:Number(Xe(d,2)),pendingRewarder:d}}}),await ii(1e3)}},setAllTokenObj(e){this.allTokenObj=e}}});function b3(e){return new URL(e,import.meta.url).href}export{e1 as A,Iu as B,kn as C,ae as D,wa as H,g3 as S,Yt as a,Lr as b,r3 as c,gc as d,Iw as e,Xe as f,s3 as g,o3 as h,b3 as i,n3 as j,i3 as k,Do as l,e3 as m,c3 as n,W2 as o,z2 as p,te as q,Oa as r,t3 as s,a3 as t,y3 as u,Eh as v,br as w,jt as x,hi as y,Ln as z};
