import{_ as rn}from"./refresh-icon.f6c66ddc.js";import{_ as dn}from"./assets-card.50e807a8.js";import{u as Ue,a as ao,c as Ne,s as ie,e as W,i as Ye,d as le,r as Xe,q as $o,p as So,b as cn,f as ze}from"./pool.154ed6b2.js";import{e as Fe,a as Ze,a1 as Po,a2 as No,r as h,m as N,D as V,q as Te,o as c,f as g,h as o,c as X,x as L,t as K,j as x,v as l,z as ce,u as q,J as Ro,S as Oo,p as Me,k as je,a0 as mn,i as fe,w as re,L as Bo,W as Uo,Q as Fo,F as no,s as _o,B as To,b as Io,l as vn,y as pn,C as fn,a7 as He}from"./entry.f0c17699.js";/* empty css              *//* empty css              */import{u as De,c as pe,a as hn}from"./sha256.747633b4.js";import"./decimal.633e31ee.js";import{i as me}from"./import-icon.de3e6c66.js";import{D as s}from"./decimal.0e8aa3f1.js";import{_ as gn}from"./network-tips.842c18ec.js";import{_ as Cn}from"./coin-select.f55e5a12.js";import{_ as bn}from"./swap-setting.db3772bd.js";/* empty css              */import{_ as wn}from"./token-warning-modal.d4dc38ed.js";import{u as An}from"./swapRouter.0e0eaf80.js";import{_ as yn}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./token-warning.6b123ca1.js";/* empty css              */import"./img-no-Positions_2x.19b47bc2.js";/* empty css              */import"./icon-selected_3x.09e9a6f0.js";const kn=""+globalThis.__publicAssetsURL("sui-image/route-view.png");const Sn=Ze({props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1}},setup(e){const p=Po(No,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),y=h(!1),b=De(),j=N(()=>b),E=N(()=>j.value.slippage),m=N(()=>j.isShowRouterModal);V(()=>e,R=>{},{immediate:!0,deep:!0});const k=Ue(),F=N(()=>k),J=ao("Sui"),G=h(0),_=h([]),I=h({});V(()=>e.suiPreSwapdata,async R=>{var f;if(R&&!Ne(R)){let Z=[];(f=R==null?void 0:R.splitPaths)==null||f.forEach(t=>{t==null||t.basePaths.forEach(async r=>{Z.push(r.label)})});const{splitPaths:C}=R,$=C&&C[0]&&C[0].basePaths;if(C&&C.length==1&&$&&$.length==2){const t=$[0].toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":$[0].toCoin;I.value=F.value.tokensObj[t]||(await J.getTokenListByCoinType[t])[0]}else I.value="";_.value=Array.from(new Set(Z)),G.value=_.value.length}},{immediate:!0});const z=h(0),a=h(0);return V(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,E.value],([R,f,Z,C,$,t])=>{if(R&&f&&Z&&C&&t)if($){const r=new s(f).mul(new s(t/100));a.value=new s(f).sub(r).toString()}else{const r=new s(R).mul(new s(t/100));z.value=new s(R).add(r).toString()}},{immediate:!0}),{sFixD:ie,getCoinIcon:R=>{var f;return(R==null?void 0:R.logoURI)||(R==null?void 0:R.logo_url)||((f=F.value.tokensObj[R==null?void 0:R.address])==null?void 0:f.logo_url)||(j.theme==="default"?me("/image/coins/unknown.png"):me("/image/coins/sui-unknown.png"))},indicator:p,rateChange:y,slippage:E,isShowRouterModal:m,indexStore:b,maximumSold:z,minimumReceived:a,addCommom:W,pathLength:G,sourcesArr:_,coinTypeB:I}}}),ye=e=>(Me("data-v-daa2842b"),e=e(),je(),e),_n={key:0,class:"swap-info"},In={class:"loading-swap"},$n={key:1,class:"swap-rate"},Pn={key:0},Nn={key:0},Rn={key:1},On={key:0},Bn=ye(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Un=ye(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Fn=[Bn,Un],Tn={key:2},Mn={class:"trade-info"},jn={class:"trade-block"},Dn=ye(()=>o("div",{class:"lebal"},"Price Impact",-1)),Ln={key:0,class:"icon","aria-hidden":"true"},En=ye(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Wn=[En],qn={class:"trade-block"},Jn={class:"lebal"},Qn={key:0,class:"text"},Xn={class:"trade-block"},zn=ye(()=>o("div",{class:"lebal"},"Fee",-1)),Hn={key:0,class:"text"},Yn={key:0,class:"trade-block"},Zn=ye(()=>o("div",{class:"lebal"},"Route",-1)),Kn={key:0,class:"text text-box"},Gn=["src"],Vn=["src"],xn={key:1,class:"text text-box"},ea=["src"],oa=["src"],na=ye(()=>o("img",{src:kn,alt:""},null,-1));function aa(e,p,y,b,j,E){var J,G,_,I;const m=Ro,k=Oo,F=Te("image");return e.swapLoading||Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&!e.insufficientLiquidity?(c(),g("div",_n,[o("div",In,[e.swapLoading||e.swapRouterLoading?(c(),X(m,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):L("",!0),e.swapLoading?e.swapLoading?(c(),g("span",Tn,"Best route and price")):L("",!0):(c(),g("div",$n,[e.rateChange?(c(),g("span",Rn,[e.fromCoinAmount&&e.toCoinAmount?(c(),g("span",On,[K(o("img",null,null,512),[[F,e.getCoinIcon(e.toCoin)]]),x(" 1 "+l(e.toCoin.symbol)+" ≈ ",1),K(o("img",null,null,512),[[F,e.getCoinIcon(e.fromCoin)]]),x(l(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+l(e.fromCoin.symbol),1)])):(c(),X(m,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(c(),g("span",Pn,[K(o("img",null,null,512),[[F,e.getCoinIcon(e.fromCoin)]]),x(" 1 "+l(e.fromCoin.symbol)+" ≈ ",1),e.fromCoinAmount&&e.toCoinAmount?(c(),g("span",Nn,[K(o("img",null,null,512),[[F,e.getCoinIcon(e.toCoin)]]),x(l(e.oneToAmount==1/0?0:e.oneToAmount)+" "+l(e.toCoin.symbol),1)])):(c(),X(m,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"right",onClick:p[0]||(p[0]=z=>e.rateChange=!e.rateChange)},Fn)]))]),o("div",Mn,[o("div",jn,[Dn,e.swapRouterLoading?(c(),X(k,{key:1,paragraph:!1,active:""})):(c(),g("div",{key:0,class:ce(["text",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[x(l(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(c(),g("svg",Ln,Wn)):L("",!0)],2))]),o("div",qn,[o("div",Jn,l(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(c(),X(k,{key:1,paragraph:!1,active:""})):(c(),g("div",Qn,l(e.fixedFromCoin?("addCommom"in e?e.addCommom:q(W))(("sFixD"in e?e.sFixD:q(ie))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:q(W))(("sFixD"in e?e.sFixD:q(ie))(e.maximumSold,e.fromCoin.decimals)))+" "+l(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",Xn,[zn,e.swapRouterLoading?(c(),X(k,{key:1,paragraph:!1,active:""})):(c(),g("div",Hn,l(e.suiSwapFee)+" "+l(e.fromCoin.symbol),1))]),e.insufficientLiquidity?L("",!0):(c(),g("div",Yn,[Zn,e.swapRouterLoading?(c(),X(k,{key:1,paragraph:!1,active:""})):(c(),g("div",{key:0,class:"text",onClick:p[1]||(p[1]=z=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[!e.swapRouterLoading&&e.suiPreSwapdata&&e.suiPreSwapdata.splitPaths&&e.suiPreSwapdata.splitPaths.length==1?(c(),g("div",Kn,[o("span",null,l(e.fromCoin.symbol)+" "+l(e.coinTypeB&&((J=e.coinTypeB)!=null&&J.symbol)?`> ${(G=e.coinTypeB)==null?void 0:G.symbol}`:"")+" > "+l(e.toCoin.symbol),1),o("img",{src:e.sourcesArr[0]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Gn),e.sourcesArr[1]?(c(),g("img",{key:0,src:e.sourcesArr[1]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Vn)):L("",!0)])):e.swapRouterLoading?L("",!0):(c(),g("div",xn,[x(l((I=(_=e.suiPreSwapdata)==null?void 0:_.splitPaths)==null?void 0:I.length)+" Streams ",1),e.sourcesArr[0]?(c(),g("img",{key:0,src:e.sourcesArr[0]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,ea)):L("",!0),e.sourcesArr[1]?(c(),g("img",{key:1,src:e.sourcesArr[1]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,oa)):L("",!0)])),na]))]))])])):L("",!0)}const ta=Fe(Sn,[["render",aa],["__scopeId","data-v-daa2842b"]]);async function sa(e,p){var j,E,m;const y=e==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":e,b=`${pe.Sui.api}/v2/sui/coin/kline?coin_address=${y}&interval=day&market=${p}`;try{const k=await $fetch(b);return{price:((E=(j=k==null?void 0:k.data)==null?void 0:j.list)==null?void 0:E.reverse())||[],daily_rate:(m=k==null?void 0:k.data)==null?void 0:m.daily_rate.replace("%","")}}catch{return{price:[],daily_rate:""}}}async function ia(e){try{const{prices:p}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=7&interval=daily`,{headers:{Connection:"keep-alive",Accept:"*/*"}}),b=(await $fetch(`https://api.coingecko.com/api/v3/coins/markets?ids=${e}&vs_currency=usd&price_change_percentage=24h`,{headers:{Connection:"keep-alive",Accept:"*/*"}}))[0].price_change_percentage_24h,j=[];return p.forEach(E=>{j.push({price:new s(E[1]).toString(),timestamp:E[0]})}),{price:j,daily_rate:b}}catch{return{price:[],daily_rate:""}}}const la={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""},market:{type:String,default:""}},setup(e,p){const{$echarts:y}=mn();let b=null,j;const E=h(!0),m=De(),k=N(()=>m),F=N(()=>k.value.chainName),J=N(()=>pe[F.value]),G=Ue(),_=N(()=>G),I=(t,r,B)=>{j={xAxis:{type:"category",boundaryGap:!1,show:!1,data:r},yAxis:{type:"value",show:!1,min:function(A){return A.min-A.min*.1},max:function(A){return A.max+A.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:k.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(A){return`<div class="chart-tip">
              <div>${A&&A[0]&&A[0].name}</div>
              <div>$${le(A&&A[0]&&A[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:k.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:k.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:t,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:k.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},j&&b.clear(),j&&b.setOption(j,!0),b.resize(),E.value=!1},z=h(""),a=h(""),Y=async t=>{var ne,O;const r=[],B=[],{price:A,daily_rate:ae}=F.value==="Aptos"?await ia(t):await sa(t,e.market);z.value=ae,a.value=A&&A.length>1&&A[A.length-1].price,F.value==="Aptos"?A.forEach(Q=>{r.push(Q.price);const u=Xe(Number(Q.timestamp),"MD"),d=Xe(Number(Q.timestamp),"HM");B.push(u+" "+d)}):A.forEach(Q=>{r.push(Q.price);const u=Xe(new s(Q.timestamp).mul(1e3).toNumber(),"MD"),d=Xe(new s(Q.timestamp).mul(1e3).toNumber(),"HM");B.push(u+" "+d)});let ee=document.getElementById(`main${(ne=e.coin)==null?void 0:ne.name}`);b=y.init(ee),I(r,B,(O=e.coin)==null?void 0:O.name)};V(()=>e.id,(t,r)=>{t&&(z.value="",a.value="",setTimeout(()=>{Y(t)},1e3))},{immediate:!0});const R=h(""),f=h(""),Z=h(""),C=h("");return V(()=>[_.value.tokensObj,e.coin],([t,r])=>{var B,A;t&&r&&t[r.address]&&(f.value=((B=t[r.address])==null?void 0:B.labels)&&((A=t[r.address])==null?void 0:A.labels[0]),R.value=t[r.address].name,Z.value=t[r.address].symbol,C.value=t[r.address].address)},{immediate:!0,deep:!0}),V(()=>e.refresh,t=>{t&&Y(e.id)}),{theme:N(()=>k.value.theme),store:m,importIcon:me,fixD:Ye,config:J,price_rate_24h:z,nowPrice:a,coinName:R,coinLabels:f,coinSymbol:Z,address:C,decimalUi:le}}},ua="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAk1BMVEUAAADn2v/m2//r2//v4//n2v/55P/n2v/o3P//+P/m2v/n2f/n2v/n2v/n2v/n2v/n2v/o2//p2//n3f/o3v/n2f/n2v/n2v/n2v/n2v/n2//o2v/q3f/r4f/u3f/n2v/o2v/n2//p3P/o3P/m2v/n2v/n2f/n2v/o2f/n2//r3f/t3P/n2v/m2v/o2v/r3v/m2f/tUDLHAAAAMHRSTlMAl5oyFNMJqSwFhvvr5d7Yr2FGNSD0zb2lkIltOhkOxoJoT0D48aJzWFYlHeB8Wief0nHAAAABSElEQVQ4y52Q53LCMBCEZWK5g0swBpveQknZ93+6rFxAHkSYyf6x9+67JqHLKxOZRzJJbWHStkCn0Fo8pG0XuvJv0dciBjVZb+dZeoxABb38MlbpXeucr5z2QwdUf8vX1h0ByLT9aAeCGlez4Ozw5zoE4nvFBJB0yymUhqp0B2DT5ec0O+YlWlUMJsCqAwJA8jNV1W4RAnuvqepeYwWsOR/AkfM9ji8YjYBTC3wCZyEq1jvKnoCQP8X90j0wF2IGuM2jArjUE8sWAPAmxACwavtDf623XJsBtoqa2zcm4MI8Ag7iNZkBeAcVc8cUOPhPgJjP4I/UzkYgKtWxpQqaAGfMvvUATIUBaOQHAEb2M2CZcj4OnrhJasDYXYVQ9Vpe2LJ/BeWyf4/oAXlC25e9uI0IqswRJulX/BOwXgG2JPCCIPA3sXmM/QK1PTc8LGCPoAAAAABJRU5ErkJggg==",ra="data:image/png;base64,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";const da=e=>(Me("data-v-1fbf26d3"),e=e(),je(),e),ca={class:"token-info"},ma={class:"token-info-padding"},va={class:"token-info-header"},pa={class:"left"},fa=["onerror"],ha={class:"name"},ga={class:"desc"},Ca={key:0},ba={class:"right"},wa={class:"price-info"},Aa={key:0,src:ua,alt:""},ya={key:1,src:ra,alt:""},ka={class:"token-info-footer"},Sa={class:"left"},_a={class:"address"},Ia={key:0,class:"pc-address"},$a={key:1,class:"pc-address"},Pa={class:"h5-address"},Na=da(()=>o("use",{"xlink:href":"#icon-icon-copy1"},null,-1)),Ra=[Na],Oa={class:"right"},Ba=["id"];function Ua(e,p,y,b,j,E){var F;const m=Bo,k=Te("image");return c(),g("div",ca,[o("div",ma,[o("div",va,[o("div",pa,[K(o("img",{onerror:b.theme=="default"?b.importIcon("/image/coins/unknown.png"):b.importIcon("/image/coins/sui-unknown.png")},null,8,fa),[[k,y.coin.logoURI||b.importIcon(`/image/coins/${y.coin.symbol.toLowerCase()}.png`)]]),o("div",null,[o("div",ha,l(b.coinSymbol),1),o("div",ga,[o("span",null,[x(l(b.coinName)+" ",1),b.theme!=="sui"?(c(),g("span",Ca,l(b.coinLabels?`(${b.coinLabels})`:""),1)):L("",!0)])])])]),o("div",ba,[fe(m,{placement:"top","arrow-point-at-center":""},{title:re(()=>[x(l(y.market==="pyth"?"Data source: Pyth Network":"Data source: CoinGecko"),1)]),default:re(()=>[o("div",wa,[y.market==="pyth"?(c(),g("img",Aa)):(c(),g("img",ya)),o("span",null,"$"+l(b.nowPrice?Number(b.nowPrice)<1?b.decimalUi(b.nowPrice,4):b.fixD(b.nowPrice,2):"--"),1),b.price_rate_24h?(c(),g("i",{key:2,class:ce(b.price_rate_24h>0?"up":b.price_rate_24h<0?"down":"up")},l(b.price_rate_24h>0?`+ ${b.fixD(b.price_rate_24h,2)}`:b.price_rate_24h<0?+`${b.fixD(b.price_rate_24h,2)}`:`+${b.fixD(b.price_rate_24h,2)}`)+"%",3)):L("",!0)])]),_:1})])]),o("div",ka,[o("div",Sa,[o("div",_a,[y.coin&&b.address!=="0x2::sui::SUI"?(c(),g("span",Ia,l(y.coin&&y.coin.address.substr(0,13))+" ... "+l(y.coin&&y.coin.address.substr(y.coin.address.length-13,13)),1)):(c(),g("span",$a,l(y.coin&&y.coin.address),1)),o("span",Pa,l(y.coin&&y.coin.address.substr(0,4))+" ... "+l(y.coin&&y.coin.address.substr(y.coin.address.length-4,4)),1),(c(),g("svg",{class:"icon","aria-hidden":"true",onClick:p[0]||(p[0]=J=>b.store.copy(y.coin&&y.coin.address))},Ra))])]),o("div",Oa,[o("div",{id:`main${(F=y.coin)==null?void 0:F.name}`,class:"main"},null,8,Ba)])])])])}const Fa=Fe(la,[["render",Ua],["__scopeId","data-v-1fbf26d3"]]);const Ta=Ze({components:{Modal:Uo},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e){const p=Ue(),y=ao("Sui"),b=N(()=>p);N(()=>{var _,I;return(I=(_=b.value)==null?void 0:_.poolInfo)==null?void 0:I.needReverse});const j=h([]),E=h({});V(()=>[e.suiPreSwapdata,e.fromCoin,e.toCoin],async([_,I,z])=>{if(_&&!Ne(_)){let a=[];_.splitPaths.sort((C,$)=>$.outputAmount-C.outputAmount);for(let C=0;C<_.splitPaths.length;C++){const $=_.splitPaths[C],t={...$,amountIn:new s($.inputAmount).div(new s(Math.pow(10,I.decimals))).toString(),amountOut:new s($.outputAmount).div(new s(Math.pow(10,z.decimals))).toString()};let r=[];for(let B=0;B<$.basePaths.length;B++){const A=$.basePaths[B],ae=A.fromCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":A.fromCoin,ee=A.toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":A.toCoin,ne=b.value.tokensObj[ae]||(await y.getTokenListByCoinType([ae]))[0],O=b.value.tokensObj[ee]||(await y.getTokenListByCoinType([ee]))[0];(A==null?void 0:A.label)=="Deepbook"?r.push({...A,...b.value.routerPoolConfigObj[A.poolAddress],feeRate:new s(A.feeRate).div(new s(Math.pow(10,9))),coin_a:ne,coin_b:O}):r.push({...A,...b.value.routerPoolConfigObj[A.poolAddress],feeRate:new s(A.feeRate).div(new s(Math.pow(10,6)))})}a.push({...t,basePaths:r})}j.value=a;const Y=[];let R=new s(0);a.forEach(C=>{const $=new s(C.percent).gt(0)?new s(C.percent).div(100).mul(100).toString():0,t=ie($,2);R=R.plus(t);const r=t.split(".");Y.push({value:t,int:r[0],decimal:r[1],pathIndex:C.pathIndex})});let f=new s(100).minus(R).toNumber();const Z=Y.sort((C,$)=>Number($.decimal)-Number(C.decimal));if(f)for(let C=0;C<Z.length&&f;C++)Z[C].value=new s(Z[C].value).plus(.01).toString(),f=new s(f).minus(.01).toNumber();E.value=Object.fromEntries(Z.map((C,$)=>[C.pathIndex,C]))}},{immediate:!0});const m=De(),k=N(()=>m),F=_=>{var I;return(_==null?void 0:_.logoURI)||(_==null?void 0:_.logo_url)||((I=b.value.tokensObj[(_==null?void 0:_.address)=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":_==null?void 0:_.address])==null?void 0:I.logo_url)||(k.value.theme==="default"?me("/image/coins/unknown.png"):me("/image/coins/sui-unknown.png"))},J=async _=>{const I=(await y.getTokenListByCoinType([_]))[0];return I&&!Ne(I)?I==null?void 0:I.logo_url:""},G=N(()=>b.value.tokensObj);return{addCommom:W,routerStep:j,getCoinIcon:F,getDeepBookLogo:J,percentObj:E,tokensObj:G,store:k,getExplorerUrl:$o}}}),he=e=>(Me("data-v-c8d6399d"),e=e(),je(),e),Ma=he(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ja={class:"route-top"},Da={class:"token-a"},La={alt:""},Ea={class:"token-num"},Wa={class:"token-symbol"},qa={class:"token-b"},Ja={class:"token-num"},Qa={class:"token-symbol"},Xa={alt:""},za={class:"route-bottom"},Ha=he(()=>o("div",{class:"left-round"},null,-1)),Ya=he(()=>o("div",{class:"right-round"},null,-1)),Za={class:"percent-text"},Ka={class:"amount"},Ga={class:"symbol"},Va={class:"percent-ratio"},xa={class:"percent-text"},et={class:"amount"},ot={class:"symbol"},nt={class:"pool-info-box"},at={key:0,class:"icon","aria-hidden":"true"},tt=he(()=>o("use",{"xlink:href":"#icon-icon_on1"},null,-1)),st=[tt],it={class:"pool-info"},lt={class:"pool-info-top"},ut={class:"token-a-img",alt:""},rt={class:"token-b-img",alt:""},dt={class:"source"},ct=["src"],mt={class:"pool-info-detail"},vt={class:"pool-address"},pt=he(()=>o("span",null,"Pool Address",-1)),ft=["href"],ht=["onClick"],gt=he(()=>o("use",{"xlink:href":"#icon-icon-copy1"},null,-1)),Ct=[gt],bt={key:0,class:"token-info-detail"},wt={alt:""},At={class:"token-name"},yt={class:"token-address"},kt=["onClick"],St=he(()=>o("use",{"xlink:href":"#icon-icon-copy1"},null,-1)),_t=[St],It={class:"token-symbol"},$t={class:"token-info-detail"},Pt={alt:""},Nt={class:"token-name"},Rt={class:"token-address"},Ot=["onClick"],Bt=he(()=>o("use",{"xlink:href":"#icon-icon-copy1"},null,-1)),Ut=[Bt],Ft={class:"token-symbol"};function Tt(e,p,y,b,j,E){const m=Fo("Modal"),k=Te("image");return c(),X(m,{title:"Route",width:"600px",visible:!0,footer:null,onCancel:p[0]||(p[0]=F=>e.$emit("onClose"))},{closeIcon:re(()=>[Ma]),default:re(()=>{var F,J,G,_;return[o("div",ja,[o("div",Da,[K(o("img",La,null,512),[[k,(F=e.fromCoin)==null?void 0:F.logo_url]]),o("span",Ea,l(("addCommom"in e?e.addCommom:q(W))(e.fromCoinAmount)),1),o("span",Wa,l((J=e.fromCoin)==null?void 0:J.symbol),1)]),o("div",qa,[o("span",Ja,l(("addCommom"in e?e.addCommom:q(W))(e.toCoinAmount)),1),o("span",Qa,l((G=e.toCoin)==null?void 0:G.symbol),1),K(o("img",Xa,null,512),[[k,(_=e.toCoin)==null?void 0:_.logo_url]])])]),o("div",za,[Ha,Ya,(c(!0),g(no,null,_o(e.routerStep,(I,z)=>(c(),g("div",{key:z,class:ce(["route-path",z!==0?"route-path-active":""])},[o("div",{class:ce(["percent",z!==0?"percent-active":""])},[o("div",Za,[o("div",Ka,l(("addCommom"in e?e.addCommom:q(W))(I.amountIn)),1),o("div",Ga,l(e.fromCoin.symbol),1),o("span",Va,"("+l(e.percentObj&&e.percentObj[I.pathIndex].value)+"%)",1)]),o("div",xa,[o("div",et,l(("addCommom"in e?e.addCommom:q(W))(I.amountOut)),1),o("div",ot,l(e.toCoin.symbol),1)])],2),o("div",nt,[I.basePaths&&I.basePaths.length>1?(c(),g("svg",at,st)):L("",!0),(c(!0),g(no,null,_o(I.basePaths,(a,Y)=>{var R,f,Z,C,$,t,r,B,A,ae,ee,ne,O,Q,u,d,ke,Re,Le,Ee;return c(),g("div",{key:Y},[o("div",it,[o("div",lt,[K(o("img",ut,null,512),[[k,a.label=="Cetus"?e.getCoinIcon({address:a.fromCoin}):(R=a==null?void 0:a.coin_a)==null?void 0:R.logo_url]]),K(o("img",rt,null,512),[[k,a.label=="Cetus"?e.getCoinIcon({address:a.toCoin}):(f=a==null?void 0:a.coin_b)==null?void 0:f.logo_url]]),o("span",null,l((a==null?void 0:a.feeRate)*100)+"%",1)]),o("div",dt,[o("img",{src:a.label=="Cetus"?"/sui-image/logo_cetus@2x.png":"/sui-image/logo_deepbook@2x.png",alt:""},null,8,ct),o("span",null,l(a.label=="Cetus"?"Cetus":"DeepBook"),1)]),o("div",{class:ce(["pool-info-detail-box",I.basePaths.length==1?"pool-info-detail-box-center":Y==0?"pool-info-detail-box-left":"pool-info-detail-box-right"])},[o("div",mt,[o("div",vt,[pt,o("p",null,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:q($o))("poolAddress",a==null?void 0:a.poolAddress),target:"_blank"},l(a&&((Z=a==null?void 0:a.poolAddress)==null?void 0:Z.substr(0,6)))+" ... "+l(a&&((C=a==null?void 0:a.poolAddress)==null?void 0:C.substr(a.poolAddress.length-6,6))),9,ft),(c(),g("svg",{class:"copy-icon","aria-hidden":"true",onClick:Se=>e.store.copy(a==null?void 0:a.poolAddress)},Ct,8,ht))])]),a.coin_a&&a.coin_a?(c(),g("div",bt,[K(o("img",wt,null,512),[[k,($=a==null?void 0:a.coin_a)==null?void 0:$.logo_url]]),o("div",null,[o("div",null,[o("span",At,l((t=a==null?void 0:a.coin_a)==null?void 0:t.symbol),1),o("p",yt,[o("span",null,l((B=(r=a==null?void 0:a.coin_a)==null?void 0:r.address)==null?void 0:B.substr(0,4))+" ... "+l(a&&((ee=(A=a==null?void 0:a.coin_a)==null?void 0:A.address)==null?void 0:ee.substr(((ae=a==null?void 0:a.coin_a)==null?void 0:ae.address.length)-4,4))),1),(c(),g("svg",{class:"copy-icon","aria-hidden":"true",onClick:Se=>{var ve;return e.store.copy((ve=a==null?void 0:a.coin_a)==null?void 0:ve.address)}},_t,8,kt))])]),o("div",It,l((ne=a==null?void 0:a.coin_a)==null?void 0:ne.name),1)])])):L("",!0),o("div",$t,[K(o("img",Pt,null,512),[[k,(O=a==null?void 0:a.coin_b)==null?void 0:O.logo_url]]),o("div",null,[o("div",null,[o("span",Nt,l((Q=a==null?void 0:a.coin_b)==null?void 0:Q.symbol),1),o("p",Rt,[o("span",null,l((d=(u=a==null?void 0:a.coin_b)==null?void 0:u.address)==null?void 0:d.substr(0,4))+" ... "+l(a&&((Le=(ke=a==null?void 0:a.coin_b)==null?void 0:ke.address)==null?void 0:Le.substr(((Re=a==null?void 0:a.coin_b)==null?void 0:Re.address.length)-4,4))),1),(c(),g("svg",{class:"copy-icon","aria-hidden":"true",onClick:Se=>{var ve;return e.store.copy((ve=a==null?void 0:a.coin_b)==null?void 0:ve.address)}},Ut,8,Ot))])]),o("div",Ft,l((Ee=a==null?void 0:a.coin_b)==null?void 0:Ee.name),1)])])])],2)])])}),128))])],2))),128))])]}),_:1})}const Mt=Fe(Ta,[["render",Tt],["__scopeId","data-v-c8d6399d"]]),jt=Ze({components:{Modal:Uo},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},slippage:{type:String,default:""},impact:{type:Number,required:!1},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!1},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!1},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e,p){const y=Ue(),b=N(()=>y),j=De(),E=N(()=>j),m=a=>{var Y;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((Y=b.value.tokensObj[a==null?void 0:a.address])==null?void 0:Y.logo_url)||(E.value.theme==="default"?me("/image/coins/unknown.png"):me("/image/coins/sui-unknown.png"))},k=h(!1),F=N(()=>E.value.chainName),J=async()=>{p.emit("to-swap")};h([]);const G=h(0),_=h(""),I=h(""),z=N(()=>E.value.slippage);return V(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,z.value],([a,Y,R,f,Z,C])=>{if(a&&Y&&R&&f&&C)if(Z){const $=new s(Y).mul(new s(C/100));I.value=new s(Y).sub($).toString()}else{const $=new s(a).mul(new s(C/100));_.value=new s(a).add($).toString()}},{immediate:!0}),{getCoinIcon:m,addCommom:W,sFixD:ie,rateChange:k,chainName:F,clickNextBtn:J,pathLength:G,maximumSold:_,minimumReceived:I,decimalUi:le}}});const ge=e=>(Me("data-v-ce681136"),e=e(),je(),e),Dt=ge(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Lt={class:"new-swap-contnet"},Et={class:"coin-info"},Wt={class:"from-coin-info"},qt={class:"left"},Jt={class:"coin-amount"},Qt={class:"coin-symbol"},Xt={class:"right"},zt={class:"to-coin-info"},Ht={class:"left"},Yt={class:"coin-amount"},Zt={class:"coin-symbol"},Kt={class:"right"},Gt=ge(()=>o("div",{class:"to-swap-logo"},null,-1)),Vt={class:"coin-rate"},xt={key:0},es={class:"left"},os=ge(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),ns=ge(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),as=[os,ns],ts={key:1},ss={class:"left"},is=ge(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),ls=ge(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),us=[is,ls],rs={class:"bottom"},ds={class:"induction"},cs={class:"item"},ms={class:"induction-text"},vs={class:"induction-value"},ps={class:"item"},fs={class:"induction-text"},hs={class:"induction-value"},gs={class:"item"},Cs={class:"induction-text"},bs={key:0,class:"icon","aria-hidden":"true"},ws=ge(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),As=[ws],ys={class:"item"},ks={class:"induction-text"},Ss={key:0,class:"induction-value"},_s={key:1,class:"induction-value"},Is={key:0,class:"price-updated"},$s=ge(()=>o("span",null,"Price updated",-1));function Ps(e,p,y,b,j,E){const m=To,k=Fo("Modal"),F=Te("image");return c(),X(k,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:p[4]||(p[4]=J=>e.$emit("on-close"))},{closeIcon:re(()=>[Dt]),default:re(()=>[o("div",Lt,[o("div",Et,[o("div",Wt,[o("div",qt,[o("div",Jt,l(e.fromCoinAmount&&("addCommom"in e?e.addCommom:q(W))(e.fromCoinAmount)),1),o("div",Qt,l(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",Xt,[K(o("img",null,null,512),[[F,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),o("div",zt,[o("div",Ht,[o("div",Yt,l(e.toCoinAmount&&("addCommom"in e?e.addCommom:q(W))(e.toCoinAmount)),1),o("div",Zt,l(e.toCoin&&e.toCoin.symbol),1)]),o("div",Kt,[K(o("img",null,null,512),[[F,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),Gt]),o("div",Vt,[e.rateChange?(c(),g("div",ts,[o("div",ss,[K(o("img",null,null,512),[[F,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,"1 "+l(e.toCoin&&e.toCoin.symbol)+" ≈",1),K(o("img",null,null,512),[[F,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,l(("decimalUi"in e?e.decimalUi:q(le))(e.oneFromAmount,e.fromCoin.decimals))+" "+l(e.fromCoin.symbol),1)]),o("div",{class:"right",onClick:p[1]||(p[1]=J=>e.rateChange=!e.rateChange)},us)])):(c(),g("div",xt,[o("div",es,[K(o("img",null,null,512),[[F,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,"1 "+l(e.fromCoin&&e.fromCoin.symbol)+" ≈",1),K(o("img",null,null,512),[[F,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,l(("decimalUi"in e?e.decimalUi:q(le))(e.oneToAmount,e.toCoin.decimals))+" "+l(e.toCoin.symbol),1)]),o("div",{class:"right",onClick:p[0]||(p[0]=J=>e.rateChange=!e.rateChange)},as)]))])]),o("div",rs,[o("div",ds,[o("div",cs,[o("div",ms,l(e.$t("modal.slippageTolerance")),1),o("div",vs,l(e.slippage)+"%",1)]),o("div",ps,[o("div",fs,l(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",hs,l(e.fixedFromCoin?("addCommom"in e?e.addCommom:q(W))(("sFixD"in e?e.sFixD:q(ie))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:q(W))(("sFixD"in e?e.sFixD:q(ie))(e.maximumSold,e.fromCoin.decimals)))+" "+l(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",gs,[o("div",Cs,l(e.$t("common.priceImpact")),1),o("div",{class:ce(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[x(l(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(c(),g("svg",bs,As)):L("",!0)],2)]),o("div",ys,[o("div",ks,l(e.$t("common.fee")),1),e.chainName=="Aptos"?(c(),g("div",Ss,l(e.formatFee)+" "+l(e.fromCoin.symbol)+" ("+l(e.fee*100)+"%) ",1)):(c(),g("div",_s,l(e.fee)+" "+l(e.fromCoin.symbol),1))])])])]),e.isShowAccept?(c(),g("div",Is,[$s,fe(m,{class:"accept-btn",loading:e.swapLoading,onClick:p[2]||(p[2]=J=>e.$emit("accept"))},{default:re(()=>[x("Accept")]),_:1},8,["loading"])])):(c(),X(m,{key:1,class:"big-btn swap-confirm-btn",onClick:p[3]||(p[3]=J=>e.clickNextBtn())},{default:re(()=>[x(l(e.$t("button.confirmSwap")),1)]),_:1}))]),_:1},8,["title"])}const Ns=Fe(jt,[["render",Ps],["__scopeId","data-v-ce681136"]]),Rs=Ze({setup(){const e=Io(),p=Po(No,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:y,locale:b}=vn(),j=De(),E=Ue(),m=N(()=>E);let k=h(!1),F=h(!1),J=h(!1),G=h(!1),_=h(!1),I=h(!1);const z=h("fromCoin"),a=h(""),Y=h(""),R=h(!1),f=h(!0),Z=h(!1),C=h(!1),$=h(!1),t=h(""),r=h(""),B=h(20),A=h(0),ae=h(null),ee=h(!1),ne=N(()=>j.slippage),O=N(()=>j.chainName),Q=N(()=>O.value?ao(O.value):{}),u=h(),d=h(),ke=N(()=>pe&&pe[O.value]&&pe[O.value].hasRouter),Re=N(()=>E.getPoolInfoSuccess),Le=N(()=>{var n;return U.value&&((n=U.value)!=null&&n.is_pause)?"Pool Closed":!u.value||!d.value?y("modal.selectTokenModalTitle"):!Number(t.value)&&!Number(r.value)?y("button.enterAmount"):!ke.value&&!U.value&&Re.value?"Pool Not Found":ke.value&&$e.value?"No Available Route":ee.value?y("button.insufficientLiquidity"):Number(t.value)>Number(se.value)?y("button.insufficientBalance",{name:u.value.symbol}):y("button.swap")}),Ee=n=>{var v,i,w,P;z.value=n,n==="fromCoin"?(a.value=((v=d.value)==null?void 0:v.address)||"",Y.value=((i=u.value)==null?void 0:i.address)||""):(a.value=((w=u.value)==null?void 0:w.address)||"",Y.value=((P=d.value)==null?void 0:P.address)||""),R.value=!0},Se=h({}),ve=h({}),Mo=n=>{z.value==="fromCoin"?(Se.value=n,Ve(n)):(ve.value=n,Ve(n))},jo=n=>{n==="fromCoin"?(f.value=!0,O.value==="Aptos"?t.value=se.value>0?u.value.symbol=="APT"?new s(Number(se.value)).sub(new s(.1)).lt(new s(0))?"0":new s(Number(se.value)).sub(new s(.1)).toString():String(se.value):"":t.value=se.value>0?u.value.symbol=="SUI"?new s(Number(se.value)).sub(new s(.05)).lt(new s(0))?"0":new s(Number(se.value)).sub(new s(.05)).toString():String(se.value):""):(f.value=!1,O.value==="Aptos"?r.value=ue.value>0?d.value.symbol=="APT"?new s(Number(ue.value)).sub(new s(.1)).lt(new s(0))?"0":new s(Number(ue.value)).sub(new s(.1)).toString():String(ue.value):"":r.value=ue.value>0?d.value.symbol=="SUI"?new s(Number(ue.value)).sub(new s(.05)).lt(new s(0))?"0":new s(Number(ue.value)).sub(new s(.05)).toString():String(ue.value):"")},Do=n=>{n==="fromCoin"?(f.value=!0,t.value=se.value>0?ie(new s(Number(se.value)).div(2).toString(),u.value.decimals).toString():""):(f.value=!1,r.value=ue.value>0?ie(new s(Number(ue.value)).div(2).toString(),d.value.decimals).toString():"")};pn(()=>{to()}),fn(()=>{clearInterval(ae.value)});const Ke=N(()=>j),Ge=()=>{!U.value&&!ke.value||(clearInterval(ae.value),E.setPoolConfigList(Ke.value.chainName,Ke.value.filterCoinsObj),A.value=0,F.value=!0,U.value&&E.updateCurrentPools(U.value.poolAddress,O.value),Pe(f.value?t.value:r.value),te.value.address&&Q.value.getAccount(te.value.address),j.getStatsData(O.value,Ke.value.filterCoinsObj),setTimeout(()=>{F.value=!1,to()},1e3))},to=()=>{ae.value=setInterval(()=>{F.value=!1,Z.value||A.value<B.value&&(A.value+=1,A.value===B.value&&(O.value=="Aptos"?(U.value&&U.value.poolAddress&&E.updateCurrentPools(U.value.poolAddress,O.value),Ge()):I.value||Ge(),A.value=0,F.value=!0))},1e3)};V(f,He((n,v)=>{f.value=n},500));const _e=h(!1);V(t,He((n,v)=>{n&&n!==0&&f.value&&(A.value=0,Pe(n)),n==""&&f.value&&(r.value="")},500)),V(r,He((n,v)=>{n&&n!==0&&!f.value&&(A.value=0,Pe(n)),n==""&&!f.value&&(t.value="")},500));const We=h(1e-4),qe=async n=>{let v=n;if(O.value==="Aptos"&&!v.current_sqrt_price&&t.value&&r.value){const i=await Q.value.getPools([v.address]);i&&i[0]&&(v={...n,...i[0],fee:Number(i[0].fee_rate)/1e6})}if(v.current_sqrt_price&&t.value&&r.value){const w=(u.value.address===v.coinA.address&&d.value.address===v.coinB.address?0:1)==0,P=new s(t.value),S=new s(r.value),M=P.sub(P.mul(new s(v.fee))),H=S.div(M);return Q.value.getPriceImpactPct(v,H.toString(),w)}return"--"},so=h(0),io=h(0),lo=h(),Ie=h({}),Lo=async n=>{if(U.value&&!(f.value&&Number(t.value)==0)&&!(!f.value&&Number(r.value)==0))if(u.value&&d.value&&(t.value||r.value)){C.value=!0,$.value=!0,ee.value=!1;const v=u.value.address===U.value.coinA.address&&d.value.address===U.value.coinB.address?0:1;try{let i=await Q.value.preSwap({pool:U.value,a2b:v==0,byAmountIn:f.value,amount:f.value?t.value:r.value});ee.value=i==null?void 0:i.isExceed,lo.value=i==null?void 0:i.estimatedFeeAmount,f.value?(r.value=i.estimatedAmountOut,we.value=(Number(i.estimatedAmountOut)/n).toString(),be.value=(n/Number(i.estimatedAmountOut)).toString()):(t.value=i.estimatedAmountIn,we.value=(n/Number(i.estimatedAmountIn)).toString(),be.value=(Number(i.estimatedAmountIn)/n).toString()),so.value=new s(r.value).div(t.value).toString(),io.value=new s(t.value).div(r.value).toString(),We.value=O.value=="Aptos"?await qe(U.value):await qe(Ie.value||U.value),C.value=!1,$.value=!1}catch{C.value=!1,$.value=!1}}else f.value?r.value="":t.value="",C.value=!1,$.value=!1},Eo=hn(),te=N(()=>Eo),Wo=h({}),be=h(""),we=h(""),se=N(()=>te.value.assets&&u.value&&te.value.assets[u.value.address]?So(te.value.assets[u.value.address].balance,u.value.decimals):0),ue=N(()=>te.value.assets&&d.value&&te.value.assets[d.value.address]?So(te.value.assets[d.value.address].balance,d.value.decimals):0);Io(),V(()=>m.value.tokensObj,async n=>{if(!Ne(n)){const v=e?e.currentRoute.value.query.to:"",i=e?e.currentRoute.value.query.from:"";i?u.value=await Q.value.getTokenBySymbol(n,i):!i&&!u.value&&(u.value=await Q.value.getTokenBySymbol(n,pe[O.value].swapDefaultPair.fromCoin)),v?d.value=await Q.value.getTokenBySymbol(n,v):!v&&!d.value&&(d.value=await Q.value.getTokenBySymbol(n,pe[O.value].swapDefaultPair.toCoin)),!i&&v&&(u.value="")}},{immediate:!0});const U=N(()=>{var n,v,i,w,P;if(u.value&&d.value){let S=null,M={};if(Object.values(m.value.poolConfigList).forEach(T=>{var D,oe,de,Be;(T.coinA.address.toUpperCase()===((D=u.value.address)==null?void 0:D.toUpperCase())&&T.coinB.address.toUpperCase()===((oe=d.value.address)==null?void 0:oe.toUpperCase())||T.coinB.address.toUpperCase()===((de=u.value.address)==null?void 0:de.toUpperCase())&&T.coinA.address.toUpperCase()===((Be=d.value.address)==null?void 0:Be.toUpperCase()))&&(M[T.address]={...T})}),O.value=="Aptos"&&m.value.poolsObj&&!Ne(m.value.poolsObj))for(const T in m.value.poolsObj){const D=m.value.poolsObj[T];(D.token_a.address.toUpperCase()===((n=u.value.address)==null?void 0:n.toUpperCase())&&D.token_b.address.toUpperCase()===((v=d.value.address)==null?void 0:v.toUpperCase())||D.token_b.address.toUpperCase()===((i=u.value.address)==null?void 0:i.toUpperCase())&&D.token_a.address.toUpperCase()===((w=d.value.address)==null?void 0:w.toUpperCase()))&&(M[D.address]={...D})}const H=Object.values(M).sort((T,D)=>T.fee-D.fee);for(let T=0;T<H.length;T++)if(!((P=H[T])!=null&&P.is_pause)){S=H[T];break}return S=Object.values(M).sort((T,D)=>T.fee-D.fee)[0],S&&!Ne(S)?S:null}return null}),uo=h(!0),ro=h(!1),qo=async n=>{n&&O.value=="Aptos"&&(Pe(f.value?t.value:r.value),ro.value=!0,n.coinA.symbol.toLowerCase()===u.value.symbol.toLowerCase()&&n.coinB.symbol.toLowerCase()===d.value.symbol.toLowerCase()?uo.value=!0:uo.value=!1,ee.value=!1)};V(()=>U.value,(n,v)=>{n&&(!v||n.address!==v.address||n.current_sqrt_price!==v.current_sqrt_price)&&qo(n)},{immediate:!0,deep:!0});const Jo=N(()=>m.value.tokensObj&&u.value&&u.value.address&&m.value.tokensObj[u.value.address]&&m.value.tokensObj[u.value.address].logoURI),Qo=N(()=>m.value.tokensObj&&d.value&&d.value.address&&m.value.tokensObj[d.value.address]&&m.value.tokensObj[d.value.address].logoURI),Xo=N(()=>O.value==="Aptos"?m.value.tokensObj&&u.value&&u.value.address&&m.value.tokensObj[u.value.address]&&m.value.tokensObj[u.value.address].coingecko_id||null:m.value.tokensObj&&u.value&&u.value.address||null),zo=N(()=>O.value==="Aptos"?m.value.tokensObj&&d.value&&d.value.address&&m.value.tokensObj[d.value.address]&&m.value.tokensObj[d.value.address].coingecko_id||null:m.value.tokensObj&&d.value&&d.value.address||null),Ho=N(()=>{var n,v,i,w,P,S,M,H,T;return(i=(v=m==null?void 0:m.value)==null?void 0:v.tokensObj[(n=u==null?void 0:u.value)==null?void 0:n.address])!=null&&i.pyth_id&&((S=(P=m==null?void 0:m.value)==null?void 0:P.tokensObj[(w=u==null?void 0:u.value)==null?void 0:w.address])==null?void 0:S.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(T=(H=m==null?void 0:m.value)==null?void 0:H.tokensObj[(M=u==null?void 0:u.value)==null?void 0:M.address])!=null&&T.coingecko_id?"coingecko":null}),Yo=N(()=>{var n,v,i,w,P,S,M,H,T;return(i=(v=m==null?void 0:m.value)==null?void 0:v.tokensObj[(n=d==null?void 0:d.value)==null?void 0:n.address])!=null&&i.pyth_id&&((S=(P=m==null?void 0:m.value)==null?void 0:P.tokensObj[(w=d==null?void 0:d.value)==null?void 0:w.address])==null?void 0:S.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(T=(H=m==null?void 0:m.value)==null?void 0:H.tokensObj[(M=d==null?void 0:d.value)==null?void 0:M.address])!=null&&T.coingecko_id?"coingecko":null}),Zo=N(()=>{var w,P;const n=new s(t.value),v=new s(O.value=="Aptos"?(w=U==null?void 0:U.value)==null?void 0:w.fee:(P=Ie==null?void 0:Ie.value)==null?void 0:P.fee),i=n.mul(v).toString();return Number(i)<1/Math.pow(10,u.value.decimals)?`<${new s(1).div(new s(Math.pow(10,u.value.decimals))).toString()}`:ie(i,u.value.decimals)}),{setIsShowSuccess:Ko,setIsShowRejected:co,setIsShowWaiting:Je,setTransactionDesc:Go,setTransactionTxid:mo}=j,Vo=async()=>{var v,i,w,P,S,M,H,T;I.value=!1,C.value=!0,clearInterval(Oe),window.clearInterval(Oe),mo(""),Go(y("tips.swapping",{from:`${W(t.value)} ${(v=u.value)==null?void 0:v.symbol}`,to:`${W(r.value)} ${(i=d.value)==null?void 0:i.symbol}`})),Je(!0);let n;O.value=="Aptos"&&(n=u.value.address===U.value.token_a.address&&d.value.address===U.value.token_b.address?0:1);try{let D;O.value=="Aptos"?D=await Q.value.getSwapTransactionPayload({pool:U.value,a2b:n==0,byAmountIn:f.value,amount:f.value?t.value:r.value,slippage:Number(ne.value)/100}):D=await oo.value.swapRouterContract.getSwapRouterPayload(Qe.value,Number(ne.value)/100);let oe;if(O.value==="Aptos")oe=await te.value.currentWallet.signAndSubmitTransaction(D);else{const de=await te.value.currentWallet.signAndExecuteTransactionBlock(D);oe=Q.value.handleTx(de)}if(oe&&oe.hash){mo(oe.hash),Je(!1),Ko(!0);const de={title:y("tips.swap"),desc:y("tips.swapSuccessText",{from:`${W(t.value)} ${(w=u.value)==null?void 0:w.symbol}`,to:`${W(r.value)} ${(P=d.value)==null?void 0:P.symbol}`}),hash:oe.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:u.value.address==pe[O.value].currentChainTokenAddress||d.value.address==pe[O.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(S=u.value)==null?void 0:S.address}`,numa:`- ${t.value}`,logoa:m.value.tokensObj&&u.value&&u.value.address&&m.value.tokensObj[u.value.address]&&m.value.tokensObj[u.value.address].logoURI,tokenb:`${(M=d.value)==null?void 0:M.address}`,numb:`+ ${r.value}`,logob:m.value.tokensObj&&d.value&&d.value.address&&m.value.tokensObj[d.value.address]&&m.value.tokensObj[d.value.address].logoURI},text:`Pay ${t.value} ${(H=u.value)==null?void 0:H.symbol} to receive ${r.value} ${(T=d.value)==null?void 0:T.symbol}`};O.value!=="Aptos"&&(de.res=oe.res),Q.value.showTransitionPending(de),await Q.value.watchTransaction(de)&&setTimeout(()=>{O.value=="Aptos"&&E.updateCurrentPools(U.value.poolAddress,O.value),Q.value.getAccount(te.value.address)},1e3)}else Je(!1),co(!0);t.value="",r.value="",C.value=!1}catch{t.value="",r.value="",C.value=!1,Je(!1),co(!0)}},xo=n=>{var v;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((v=m.value.tokensObj[n==null?void 0:n.address])==null?void 0:v.logo_url)||(j.theme==="default"?me("/image/coins/unknown.png"):me("/image/coins/sui-unknown.png"))},vo=h([]);V(()=>[u.value,d.value,m.value.poolConfigList],([n,v,i])=>{if(i&&i.length>0&&n&&v){const w=[];i.forEach(P=>{var S,M,H,T;(P.coinA.address.toUpperCase()===((S=n.address)==null?void 0:S.toUpperCase())&&P.coinB.address.toUpperCase()===((M=v.address)==null?void 0:M.toUpperCase())||P.coinB.address.toUpperCase()===((H=n.address)==null?void 0:H.toUpperCase())&&P.coinA.address.toUpperCase()===((T=v.address)==null?void 0:T.toUpperCase()))&&(P!=null&&P.is_pause||w.push(P.address))}),vo.value=w}},{immediate:!0});const Ve=n=>{const v=localStorage.getItem(n.address);m.value.tokensObj&&m.value.tokensObj[n.address]&&m.value.tokensObj[n.address].isSelfBuilt&&!v?xe.value=!0:(z.value==="fromCoin"?(t.value="",d.value&&n.address.toLowerCase()===(d==null?void 0:d.value.address.toLowerCase())&&(d.value=null),u.value=n):(u.value&&(r.value="",n.address.toLowerCase()===(u==null?void 0:u.value.address.toLowerCase())&&(u.value=null)),d.value=n),po())},xe=h(!1),po=()=>{ve.value={},Se.value={},xe.value=!1},en=N(()=>j.isShowRouterModal),eo=h([]),fo=h(""),on=h(!1),ho=An(),oo=N(()=>ho),$e=h(!1),Qe=h({}),go=h(""),Co=n=>{const{splitPaths:v}=n;let i=new s(0);v.forEach((P,S)=>{const M=P.basePaths[0],H=M.label==="Cetus"?new s(M.feeRate).div(Math.pow(10,6)):new s(M.feeRate).div(Math.pow(10,9)),T=new s(M.inputAmount).div(Math.pow(10,u.value.decimals)).mul(H);if(i=i.add(T),P.basePaths[1]){const D=P.basePaths[1],oe=M.direction?M.currentPrice:new s(1).div(M.currentPrice),de=D.direction?D.currentPrice:new s(1).div(P.basePaths[1].currentPrice),Be=D.label==="Cetus"?new s(D.feeRate).div(Math.pow(10,6)):new s(D.feeRate).div(Math.pow(10,9)),un=new s(D.outputAmount).div(Math.pow(10,d.value.decimals)).mul(Be).div(oe.mul(de));i=i.add(un)}});const w=i.toNumber();go.value=w>0&&w<1e-6?"<0.000001":W(ie(w,u.value.decimals))},bo=(n,v)=>v.minus(n).div(v).mul(100),wo=async n=>{const{splitPaths:v}=n;let i=new s(0);v.forEach((w,P)=>{if(w.basePaths.length===1){const S=w.basePaths[0],M=new s(S.outputAmount).div(Math.pow(10,S.toDecimal)),H=new s(S.inputAmount).div(Math.pow(10,S.fromDecimal)),T=M.div(H),D=S.direction?new s(S.currentPrice):new s(1).div(S.currentPrice);i=i.add(bo(T,D))}else{const S=w.basePaths[0].direction?new s(w.basePaths[0].currentPrice):new s(1).div(w.basePaths[0].currentPrice),M=w.basePaths[1].direction?new s(w.basePaths[1].currentPrice):new s(1).div(w.basePaths[1].currentPrice),H=S.mul(M),T=new s(w.basePaths[1].outputAmount).div(Math.pow(10,w.basePaths[1].toDecimal)),D=new s(w.basePaths[0].inputAmount).div(Math.pow(10,w.basePaths[0].fromDecimal)),oe=T.div(D);i=i.add(bo(oe,H))}}),We.value=Number(ie(i.toNumber(),2))},Ao=async n=>{if(u.value&&d.value&&(Number(t.value)>0||Number(r.value)>0)){(!t.value&&r.value||t.value&&!r.value)&&(C.value=!0),_e.value=!0,$e.value=!1;let v;U.value&&(v=u.value.address===U.value.coinA.address&&d.value.address===U.value.coinB.address?0:1);try{let i;if(f.value){const M=new s(t.value).mul(Math.pow(10,u.value.decimals)).toString();i=new ze(M)}else{const M=new s(r.value).mul(Math.pow(10,d.value.decimals)).toString();i=new ze(M)}const w=Number(ne.value)/100,P=U.value?{poolAddresses:vo.value,coinTypeA:U.value.coin_a_address,coinTypeB:U.value.coin_b_address,decimalsA:U.value.coinA.decimals,decimalsB:U.value.coinB.decimals,a2b:v==0,byAmountIn:f.value,amount:i.toString()}:"",S=await oo.value.swapRouterContract.getSwapRouter(u,d,i,f.value,w,"",U.value?P:"");if(S&&!S.isExceed&&S.splitPaths&&S.splitPaths.length==0){$e.value=!0;return}if(S){if(Qe.value=S,eo.value=S.paths,ee.value=S.isExceed,S.isExceed){f.value?r.value="":t.value="";return}Co(S),f.value?t.value&&(r.value=new s(S.outputAmount).div(new s(Math.pow(10,d.value.decimals))).toString()):r.value&&(t.value=new s(S.inputAmount).div(new s(Math.pow(10,u.value.decimals))).toString()),be.value=W(le(new s(t.value).div(new s(r.value).toString()),u.value.decimals)),we.value=W(le(new s(r.value).div(t.value).toString(),d.value.decimals)),wo(S),C.value=!1,$e.value=!1,_e.value=!1}else C.value=!1,$e.value=!0,_e.value=!1}catch{C.value=!1,_e.value=!1}}else f.value?r.value="":t.value="",C.value=!1,_e.value=!1},Ae=h(!1),yo=async n=>{try{let v;if(f.value){const P=new s(t.value).mul(Math.pow(10,u.value.decimals)).toString();v=new ze(P)}else{const P=new s(r.value).mul(Math.pow(10,d.value.decimals)).toString();v=new ze(P)}const i=Number(ne.value)/100,w=await oo.value.swapRouterContract.getSwapRouter(u,d,v,f.value,i,"");w&&(Qe.value=w,eo.value=w.paths,ee.value=w.isExceed,fo.value=w.amountIn,Co(w),be.value=W(le(new s(t.value).div(new s(r.value).toString()),u.value.decimals)),we.value=W(le(new s(r.value).div(t.value).toString(),d.value.decimals)),wo(w),f.value?r.value!==w.amountOut&&(Ae.value=!0,r.value=w.amountOut):t.value!==w.amountIn&&(Ae.value=!0,t.value=w.amountIn))}catch{}},nn=async n=>{if(u.value&&d.value&&(t.value||r.value)){const v=u.value.address===U.value.coinA.address&&d.value.address===U.value.coinB.address?0:1;try{let i=await Q.value.preSwap({pool:U.value,a2b:v==0,byAmountIn:f.value,amount:f.value?t.value:r.value});ee.value=i==null?void 0:i.isExceed,lo.value=i==null?void 0:i.estimatedFeeAmount,f.value?(we.value=(Number(i.estimatedAmountOut)/i.estimatedAmountIn).toString(),be.value=(i.estimatedAmountIn/Number(i.estimatedAmountOut)).toString()):(we.value=(Number(i.estimatedAmountOut)/Number(i.estimatedAmountIn)).toString(),be.value=(Number(i.estimatedAmountIn)/Number(i.estimatedAmountOut)).toString()),f.value?r.value!==i.estimatedAmountOut&&(Ae.value=!0,r.value=i.estimatedAmountOut):t.value!==i.estimatedAmountIn&&(Ae.value=!0,t.value=i.estimatedAmountIn),We.value=O.value=="Aptos"?await qe(U.value):await qe(Ie.value||U.value),C.value=!1,$.value=!1}catch{C.value=!1,$.value=!1}}else C.value=!1,$.value=!1};let Oe=h(null);V(()=>I.value,n=>{n?Oe.value=setInterval(()=>{O.value=="Aptos"?nn(f.value):yo(f.value)},3e3):(clearInterval(Oe.value),window.clearInterval(Oe.value))},{immediate:!0});const Pe=async n=>{O.value=="Aptos"?Lo(n):Ao()},an=N(()=>ho),tn=N(()=>an.value.isInitRouter);V(()=>tn.value,n=>{n||(A.value=0,Pe(f.value?t.value:r.value))},{immediate:!0}),V(()=>[u.value,d.value],([n,v])=>{if(n&&v&&(A.value=0,Pe(f.value?t.value:r.value)),n||v){const i=`/swap?from=${n==null?void 0:n.address}&to=${v==null?void 0:v.address}`;e.push(i)}},{immediate:!0});function sn(n,v=500){let i=null;return function(...w){clearTimeout(i),i=setTimeout(()=>{n.call(this,...w)},v)}}const ln=sn(ko);function ko(){const n=u.value;u.value=d.value,d.value=n,k.value=!0,f.value=!f.value,f.value?(t.value=r.value,r.value=""):(r.value=t.value,t.value=""),setTimeout(()=>{k.value=!1},300)}return{closeSwapConfirmModal:()=>{I.value=!1,Ae.value=!1},updateAccept:()=>{Ae.value=!1},clickExchange:ko,debounceClickExchange:ln,closeTokenWarning:po,isShowTokenWarning:xe,getTokenSource:Ve,hasPool:ro,getPoolInfoSuccess:Re,halfBtnSelect:Do,formCoinId:Xo,toCoinId:zo,formCoinMarket:Ho,toCoinMarket:Yo,fromCoinUrl:Jo,toCoinUrl:Qo,t:y,indicator:p,wallet:te,currentLpInfo:Wo,fixD:Ye,decimalFormat:cn,impact:We,oneFromAmount:be,oneToAmount:we,importIcon:me,clickRefresh:Ge,refresh:F,change:k,isShowAddress:J,isShowSwapSetting:G,fromCoin:u,toCoin:d,slippage:ne,openCoinSelect:Ee,onCoinSelect:Mo,existingCoins:a,lastSelectCoin:Y,currentCoinKey:z,showCoinSelect:R,fromCoinAmount:t,toCoinAmount:r,maxBtnSelect:jo,fixedFromCoin:f,swapBtnText:Le,toSwap:Vo,loading:Z,swaping:C,autoRefreshTime:B,countdown:A,marketTimer:ae,rateChange:_,isSwapConfirmMpdal:I,fromCoinBlance:se,toCoinBlance:ue,poolInfo:U,chainName:O,swapRouterLoading:_e,formatFee:Zo,calculating:$,currentRate:so,currentRateReverse:io,getCoinIcon:xo,toAddLiquidiPoolInfo:Ie,decimalUi:le,warningToCoin:ve,warningFromCoin:Se,isShowRouterModal:en,toSwapLoading:on,insufficientLiquidity:ee,routerPool:eo,routerTotalAmounts:fo,store:j,suiPreSwapdata:Qe,suiSwapFee:go,addCommom:W,debounce:He,notFoundRouter:$e,getSuiAmountAccept:yo,isShowAccept:Ae,getSuiAmount:Ao}}});const Ce=e=>(Me("data-v-4d4b8501"),e=e(),je(),e),Os={class:"swap-container"},Bs={class:"title"},Us={class:"left"},Fs={class:"right title-right"},Ts=Ce(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Ms={class:"swap-card"},js={class:"card-container"},Ds={class:"card-item"},Ls={class:"card-item"},Es=Ce(()=>o("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),Ws=[Es],qs={key:1,class:"induction"},Js={key:0,class:"exchange-rate-btn"},Qs={key:0},Xs={key:0},zs={key:0},Hs={key:1},Ys={key:0},Zs=Ce(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Ks=Ce(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Gs=[Zs,Ks],Vs={class:"item"},xs={class:"induction-text"},ei={key:0,class:"icon","aria-hidden":"true"},oi=Ce(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),ni=[oi],ai={class:"item"},ti={class:"induction-text"},si={key:0,class:"induction-value"},ii={class:"item"},li={class:"induction-text"},ui={key:0,class:"induction-value"},ri={key:0,class:"icon","aria-hidden":"true"},di=Ce(()=>o("use",{"xlink:href":"#icon-icon-swap"},null,-1)),ci=[di],mi={key:2,class:"token-info-container"},vi={class:"token-info-title"},pi=Ce(()=>o("span",{class:"coingecko"},"Price Reference",-1)),fi=Ce(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1));function hi(e,p,y,b,j,E){var t,r;const m=rn,k=dn,F=ta,J=Ro,G=Oo,_=To,I=gn,z=Cn,a=bn,Y=Bo,R=Fa,f=wn,Z=Mt,C=Ns,$=Te("image");return c(),g("div",Os,[o("div",Bs,[o("div",Us,l(e.$t("menu.swap")),1),o("div",Fs,[o("div",{class:"slippage-icon",onClick:p[0]||(p[0]=B=>e.isShowSwapSetting=!0)},[Ts,o("span",null,l(e.slippage)+"%",1)]),fe(m,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),o("div",Ms,[o("div",js,[o("div",Ds,[fe(k,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":p[1]||(p[1]=B=>e.fromCoinAmount=B),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From",onOnMax:p[2]||(p[2]=B=>e.maxBtnSelect("fromCoin")),onOnHalf:p[3]||(p[3]=B=>e.halfBtnSelect("fromCoin")),onOnInput:p[4]||(p[4]=B=>{e.fromCoinAmount=B,e.fixedFromCoin=!0}),onOnSelect:p[5]||(p[5]=B=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("div",Ls,[fe(k,{modelValue:e.toCoinAmount,"onUpdate:modelValue":p[6]||(p[6]=B=>e.toCoinAmount=B),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",havehalf:!1,onOnInput:p[7]||(p[7]=B=>{e.toCoinAmount=B,e.fixedFromCoin=!1}),onOnSelect:p[8]||(p[8]=B=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("img",{class:ce(e.change?"gang animationex":"gang"),src:yn,alt:""},null,2),o("div",{class:ce(["exchange",e.chainName=="Sui"?"sui-exchange":""]),onClick:p[9]||(p[9]=(...B)=>e.debounceClickExchange&&e.debounceClickExchange(...B))},[(c(),g("svg",{class:ce(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Ws,2))],2)]),e.chainName=="Sui"&&!e.notFoundRouter?(c(),X(F,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.impact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFee,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(c(),g("div",qs,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(c(),g("div",Js,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(c(),g("span",Hs,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(c(),g("span",Ys,[K(o("img",null,null,512),[[$,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),x(" 1 "+l(e.toCoin.symbol)+" ≈ ",1),K(o("img",null,null,512),[[$,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),o("span",null,l(("addCommom"in e?e.addCommom:q(W))(("decimalUi"in e?e.decimalUi:q(le))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),x("  "+l(e.fromCoin.symbol),1)])):(c(),X(J,{key:1,indicator:e.indicator},null,8,["indicator"]))])):L("",!0):(c(),g("span",Qs,[K(o("img",null,null,512),[[$,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),x(" 1 "+l(e.fromCoin.symbol)+" ≈ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(c(),g("span",Xs,[K(o("img",null,null,512),[[$,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),e.calculating?L("",!0):(c(),g("span",zs,l(("addCommom"in e?e.addCommom:q(W))(("decimalUi"in e?e.decimalUi:q(le))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(c(),X(J,{key:1,indicator:e.indicator},null,8,["indicator"])):L("",!0),x("  "+l(e.toCoin.symbol),1)])):(c(),X(J,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"icon-change",onClick:p[10]||(p[10]=B=>e.rateChange=!e.rateChange)},Gs)])):L("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(c(),g(no,{key:1},[o("div",Vs,[o("div",xs,l(e.$t("common.priceImpact")),1),e.swaping?(c(),X(G,{key:1,paragraph:!1,active:""})):(c(),g("div",{key:0,class:ce(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[x(l(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(c(),g("svg",ei,ni)):L("",!0)],2))]),o("div",ai,[o("div",ti,l(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(c(),X(G,{key:1,paragraph:!1,active:""})):(c(),g("div",si,l(e.fixedFromCoin?("addCommom"in e?e.addCommom:q(W))(("fixD"in e?e.fixD:q(Ye))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:q(W))(("fixD"in e?e.fixD:q(Ye))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+l(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",ii,[o("div",li,l(e.$t("common.fee")),1),e.swaping?(c(),X(G,{key:1,paragraph:!1,active:""})):(c(),g("div",ui,l(("addCommom"in e?e.addCommom:q(W))(e.formatFee,e.fromCoin.decimals))+" "+l(e.fromCoin.symbol)+" ("+l(e.chainName=="Aptos"?e.poolInfo.fee*100:((t=e.toAddLiquidiPoolInfo)==null?void 0:t.fee)*100)+"%) ",1))])],64)):L("",!0)])):L("",!0)]),fe(_,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((r=e.poolInfo)==null?void 0:r.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.chainName=="Aptos"?e.swaping:!1,onClick:p[11]||(p[11]=B=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:re(()=>[e.wallet.connected?(c(),g("svg",ri,ci)):L("",!0),o("span",null,l(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),fe(I),e.showCoinSelect?(c(),X(z,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:p[12]||(p[12]=B=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):L("",!0),e.isShowSwapSetting?(c(),X(a,{key:1,onOnClose:p[13]||(p[13]=B=>e.isShowSwapSetting=!1)})):L("",!0),e.chainName&&(e.formCoinMarket||e.toCoinMarket)?(c(),g("div",mi,[o("div",vi,[pi,fe(Y,{placement:"top","arrow-point-at-center":""},{title:re(()=>[x(" The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus. ")]),default:re(()=>[fi]),_:1})]),e.fromCoin&&e.formCoinMarket?(c(),X(R,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):L("",!0),e.toCoin&&e.toCoinMarket?(c(),X(R,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):L("",!0)])):L("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(c(),X(f,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):L("",!0),e.isShowRouterModal?(c(),X(Z,{key:4,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:p[14]||(p[14]=B=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):L("",!0),e.isSwapConfirmMpdal?(c(),X(C,{key:5,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.impact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFee:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFee:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):L("",!0)])}const Ji=Fe(Rs,[["render",hi],["__scopeId","data-v-4d4b8501"]]);export{Ji as default};
