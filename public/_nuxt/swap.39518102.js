import{_ as lo}from"./refresh-icon.30682316.js";import{_ as ro,a as uo}from"./coin-select.278acb13.js";import{a as co,_ as mo}from"./network-tips.c825c9f3.js";import{u as we,i as X,f as P,b as Ae,k as Re,a as vo,s as Ce,c as he,g as pe}from"./import-icon.b48b973f.js";import{a as Me,M as fo,J as Le,f as w,r,i as Se,H as po,o as h,c as V,y as ie,k as o,u as U,t,v as ee,j as y,m as ce,x,B as We,p as ye,q as ke,T as bo,w as H,l as j,L as Co,N as ho,b as go,e as Ao,W as ge,h as Pe,G as wo,z as So}from"./entry.7dbcdae4.js";import{u as Ie,_ as yo,D as p,p as Fe}from"./common.ce6f3df4.js";import{u as qe}from"./wallet.3fc4a512.js";import{d as je}from"./numbers.645284a6.js";/* empty css              *//* empty css              */import"./decimal.4ea13e96.js";/* empty css              *//* empty css              */import"./img-no-Positions_2x.a15f4dca.js";import"./index.59f7738f.js";import"./v4.78edc15a.js";const _e={SUI:{symbol:"SUI",name:"Sui Coin",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::BTC"},sBTC:{symbol:"sBTC",name:"Wrapped BTC",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::BTC"},sETH:{symbol:"sETH",name:"Wrapped Ether",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::ETH"},USDC:{symbol:"USDC",name:"USDC Coin",decimals:6,balance:12e3,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDC"},USDT:{symbol:"USDT",name:"Tether USD",decimals:6,balance:1e4,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDT"}},ko={"USDT-USDC":{symbol:"USDT-USDC",name:"USDT-USDC",decimals:6,coinA:_e.USDT,coinB:_e.USDC,feeDenominator:"10000",feeNumerator:"1",fee:"0.01",address:"0x1ce98d89494e9d3d7935bc3bd5fc714fc2abb99db3f024162552c4ba172f4d28::amm_swap::PoolLiquidityCoin<0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDT,0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDC>"}};function Io(e,a){const d=Object.values(ko).filter(m=>e===m.coinA.symbol&&a===m.coinB.symbol||e===m.coinB.symbol&&a===m.coinA.symbol);return d&&d[0]||null}const No=Me({components:{Modal:fo},props:{fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},impact:{type:Number,required:!0},fee:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},formatFee:{type:String,default:""}},emits:["to-swap","on-close"],setup(e,a){const{t:d,locale:m}=Le(),N=Ie(),$=qe();w(()=>$);const u=w(()=>{const f=Io(e.fromCoin.symbol,e.toCoin.symbol);return Ae(je(e.fromCoinAmount).mul(je(f.fee).div(100)).toString(),e.fromCoin.decimals)}),B=r(N.slippage||.5),I=r(!0),Y=r(!1);function Z(f){I.value=f}const _=async()=>{a.emit("to-swap")},Q=we(),k=w(()=>Q),K=w(()=>k.value.tokensObj&&e.fromCoin.address&&k.value.tokensObj[e.fromCoin.address]&&k.value.tokensObj[e.fromCoin.address].logoURI),M=w(()=>k.value.tokensObj&&e.toCoin.address&&k.value.tokensObj[e.toCoin.address]&&k.value.tokensObj[e.toCoin.address].logoURI);return{fromCoinUrl:K,toCoinUrl:M,t:d,importIcon:X,fixD:P,decimalFormat:Ae,direct:I,changeDirect:Z,rateChange:Y,clickNextBtn:_,slippage:B,liquidityProviderFee:u}}});const Ne=e=>(ye("data-v-ca95abc6"),e=e(),ke(),e),Bo=Ne(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Oo={class:"swap-confirm-container"},To={class:"card-content"},Uo={class:"top"},Do={class:"coin"},$o=["src"],Eo=Ne(()=>o("div",{class:"svg-box"},[o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-swap2"})])],-1)),Ro={class:"coin"},Po=["src"],Fo={class:"bottom"},jo={class:"induction"},_o={class:"item"},Mo={class:"induction-text"},Lo={class:"induction-value induction-value-change"},Wo={key:0},qo={key:1},Qo=Ne(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Ko=[Qo],zo={class:"item"},Ho={class:"induction-text"},Xo={class:"induction-value"},Yo={class:"item"},Zo={class:"induction-text"},Jo={class:"induction-value"},Go={class:"item"},Vo={class:"induction-text"},xo={class:"item"},en={class:"induction-text"},on={class:"induction-value"};function nn(e,a,d,m,N,$){const u=We,B=po("Modal");return h(),V(B,{width:"440px",visible:!0,footer:null,title:e.$t("modal.swapConfirmTitle"),class:"swap-confirm-modal",onCancel:a[2]||(a[2]=I=>e.$emit("on-close"))},{closeIcon:ie(()=>[Bo]),default:ie(()=>[o("div",Oo,[o("div",To,[o("div",Uo,[o("div",Do,[o("img",{src:e.fromCoinUrl||("importIcon"in e?e.importIcon:U(X))(`/image/coins/${e.fromCoin.symbol.toLowerCase()}.png`)},null,8,$o),o("p",null,t(e.fromCoinAmount),1),ee("    "),o("p",null,t(e.fromCoin.symbol),1)]),Eo,o("div",Ro,[o("img",{src:e.toCoinUrl||("importIcon"in e?e.importIcon:U(X))(`/image/coins/${e.toCoin.symbol.toLowerCase()}.png`)},null,8,Po),o("p",null,t(e.toCoinAmount),1),ee("    "),o("p",null,t(e.toCoin.symbol),1)])]),o("div",Fo,[o("div",jo,[o("div",_o,[o("div",Mo,t(e.$t("common.rate")),1),o("div",Lo,[e.rateChange?(h(),y("span",qo," 1 "+t(e.toCoin.symbol)+" ≈ "+t(("fixD"in e?e.fixD:U(P))(Number(e.fromCoinAmount)/Number(e.toCoinAmount),e.toCoin.decimals))+" "+t(e.fromCoin.symbol),1)):(h(),y("span",Wo," 1 "+t(e.fromCoin.symbol)+" ≈ "+t(("fixD"in e?e.fixD:U(P))(Number(e.toCoinAmount)/Number(e.fromCoinAmount),e.toCoin.decimals))+" "+t(e.toCoin.symbol),1)),(h(),y("svg",{class:"icon-change","aria-hidden":"true",onClick:a[0]||(a[0]=I=>e.rateChange=!e.rateChange)},Ko))])]),o("div",zo,[o("div",Ho,t(e.$t("modal.slippageTolerance")),1),o("div",Xo,t(e.slippage)+"%",1)]),o("div",Yo,[o("div",Zo,t(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",Jo,t(e.fixedFromCoin?("fixD"in e?e.fixD:U(P))(e.toCoinAmount-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals):("fixD"in e?e.fixD:U(P))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals))+" "+t(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",Go,[o("div",Vo,t(e.$t("common.priceImpact")),1),o("div",{class:ce(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>1?"impact-w":"impact-e"])},t(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",3)]),o("div",xo,[o("div",en,t(e.$t("common.fee")),1),o("div",on,t(e.formatFee)+" "+t(e.fromCoin.symbol)+" ("+t(e.fee*100)+"%) ",1)])])])])]),x(u,{class:"big-btn swap-confirm-btn",onClick:a[1]||(a[1]=I=>e.clickNextBtn())},{default:ie(()=>[ee(t(e.$t("button.confirmSwap")),1)]),_:1})]),_:1},8,["title"])}const sn=Se(No,[["render",nn],["__scopeId","data-v-ca95abc6"]]);async function an(e){const{prices:a}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=1&interval=hourly`,{headers:{Connection:"keep-alive",Accept:"*/*"}});return a}const tn={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""}},setup(e,a){const{$echarts:d}=bo();let m=null,N;const $=r(!0),u=(A,l,c)=>{N={xAxis:{type:"category",boundaryGap:!1,show:!1,data:l},yAxis:{type:"value",show:!1,min:function(v){return v.min-v.min*.1},max:function(v){return v.max+v.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:k.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(v){return`<div class="chart-tip">
              <div>${v&&v[0]&&v[0].name}</div>
              <div>$${P(v&&v[0]&&v[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:k.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:k.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:A,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:k.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},N&&m.clear(),N&&m.setOption(N,!0),m.resize(),$.value=!1},B=we(),I=w(()=>B),Y=r(""),Z=r(""),_=async A=>{var oe,re;const l=[],c=[],v=await an(A);Y.value=v&&v.length>1&&(v[v.length-1][1]-v[0][1])/v[0][1]*100,Z.value=v&&v.length>1&&v[v.length-1][1],v.forEach(se=>{l.push(se[1]);const D=Re(se[0],"MD"),z=Re(se[0],"HM");c.push(D+" "+z)});let J=document.getElementById(`main${(oe=e.coin)==null?void 0:oe.name}`);m=d.init(J),u(l,c,(re=e.coin)==null?void 0:re.name)},Q=Ie(),k=w(()=>Q),K=w(()=>k.value.chainName),M=w(()=>yo[K.value]);H(()=>e.id,(A,l)=>{A&&setTimeout(()=>{_(A)},1e3)},{immediate:!0});const f=r(""),b=r(""),le=r("");return H(()=>[I.value.tokensObj,e.coin],([A,l])=>{var c,v;A&&l&&A[l.address]&&(b.value=((c=A[l.address])==null?void 0:c.labels)&&((v=A[l.address])==null?void 0:v.labels[0]),f.value=A[l.address].name,le.value=A[l.address].symbol)},{immediate:!0,deep:!0}),H(()=>e.refresh,A=>{A&&_(e.id)}),{store:Q,importIcon:X,fixD:P,config:M,price_rate_24h:Y,nowPrice:Z,coinName:f,coinLabels:b,coinSymbol:le}}};const ln=e=>(ye("data-v-f7d5a1ed"),e=e(),ke(),e),rn={class:"token-info"},un={class:"token-info-padding"},dn={class:"token-info-header"},cn={class:"left"},mn=["src"],vn={class:"name"},fn={class:"desc"},pn={class:"right"},bn={class:"price"},Cn={class:"token-info-footer"},hn={class:"left"},gn={class:"address"},An={class:"pc-address"},wn={class:"h5-address"},Sn=ln(()=>o("use",{"xlink:href":"#icon-icon-copy"},null,-1)),yn=[Sn],kn={class:"right"},In=["id"];function Nn(e,a,d,m,N,$){var u;return h(),y("div",rn,[o("div",un,[o("div",dn,[o("div",cn,[o("img",{src:d.coin.logoURI||m.importIcon(`/image/coins/${d.coin.symbol.toLowerCase()}.png`)},null,8,mn),o("div",null,[o("div",vn,t(m.coinSymbol),1),o("div",fn,[o("span",null,t(m.coinName)+" "+t(m.coinLabels?`(${m.coinLabels})`:""),1)])])]),o("div",pn,[o("div",bn,"$"+t(m.fixD(m.nowPrice,2)),1),m.price_rate_24h?(h(),y("div",{key:0,class:ce(m.price_rate_24h>0?"increase up":m.price_rate_24h<0?"increase down":"increase up")},t(m.price_rate_24h>0?`+ ${m.fixD(m.price_rate_24h,2)}`:m.price_rate_24h<0?+`${m.fixD(m.price_rate_24h,2)}`:`+${m.fixD(m.price_rate_24h,2)}`)+"% ",3)):j("",!0)])]),o("div",Cn,[o("div",hn,[o("div",gn,[o("span",An,t(d.coin&&d.coin.address.substr(0,8))+" ... "+t(d.coin&&d.coin.address.substr(d.coin.address.length-8,8)),1),o("span",wn,t(d.coin&&d.coin.address.substr(0,4))+" ... "+t(d.coin&&d.coin.address.substr(d.coin.address.length-4,4)),1),(h(),y("svg",{class:"icon","aria-hidden":"true",onClick:a[0]||(a[0]=B=>m.store.copy(d.coin&&d.coin.address))},yn))])]),o("div",kn,[o("div",{id:`main${(u=d.coin)==null?void 0:u.name}`,class:"main"},null,8,In)])])])])}const Bn=Se(tn,[["render",Nn],["__scopeId","data-v-f7d5a1ed"]]),On=Me({setup(){const e=Pe(),a=Co(ho,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:d,locale:m}=Le(),N=Ie(),$=we(),u=w(()=>$);let B=r(!1),I=r(!1),Y=r(!1),Z=r(!1),_=r(!1),Q=r(!1);const k=r("fromCoin"),K=r(""),M=r(""),f=r(!1),b=r(!0),le=r(!1),A=r(!1),l=r(""),c=r(""),v=r(20),J=r(0),oe=r(null),re=r(!1),se=w(()=>N.slippage),D=w(()=>N.chainName),z=w(()=>D.value?vo(D.value):{}),n=r(),i=r(),Be=w(()=>$.getPoolInfoSuccess),Qe=w(()=>S.value&&S.value.is_pause?"Pool Closed":!n.value||!i.value?d("modal.selectTokenModalTitle"):!S.value&&Be.value?"Pool Not Found":re.value?d("button.insufficientLiquidity"):!Number(l.value)||Number(l.value)==0||Number(c.value)==0?d("button.enterAmount"):Number(l.value)>Number(E.value)?d("button.insufficientBalance",{name:n.value.symbol}):d("button.swap")),Ke=s=>{var g,C,W,R;k.value=s,s==="fromCoin"?(K.value=((g=i.value)==null?void 0:g.address)||"",M.value=((C=n.value)==null?void 0:C.address)||""):(K.value=((W=n.value)==null?void 0:W.address)||"",M.value=((R=i.value)==null?void 0:R.address)||""),f.value=!0},ze=s=>{l.value="",c.value="",k.value==="fromCoin"?(i.value&&s.address.toLowerCase()===(i==null?void 0:i.value.address.toLowerCase())&&(i.value=null),n.value=s):(n.value&&s.address.toLowerCase()===(n==null?void 0:n.value.address.toLowerCase())&&(n.value=null),i.value=s),f.value=!1},He=s=>{s==="fromCoin"?(b.value=!0,D.value==="Aptos"?l.value=E.value>0?n.value.symbol=="APT"?new p(Number(E.value)).sub(new p(.1)).lt(new p(0))?"0":new p(Number(E.value)).sub(new p(.1)).toString():String(E.value):"":l.value=E.value>0?n.value.symbol=="SUI"?new p(Number(E.value)).sub(new p(1e-4)).lt(new p(0))?"0":new p(Number(E.value)).sub(new p(1e-4)).toString():String(E.value):""):(b.value=!1,D.value==="Aptos"?c.value=F.value>0?i.value.symbol=="APT"?new p(Number(F.value)).sub(new p(.1)).lt(new p(0))?"0":new p(Number(F.value)).sub(new p(.1)).toString():String(F.value):"":c.value=F.value>0?i.value.symbol=="SUI"?new p(Number(F.value)).sub(new p(1e-4)).lt(new p(0))?"0":new p(Number(F.value)).sub(new p(1e-4)).toString():String(F.value):"")},Xe=s=>{s==="fromCoin"?(b.value=!0,l.value=E.value>0?Ce(new p(Number(E.value)).div(2).toString(),n.value.decimals).toString():""):(b.value=!1,c.value=F.value>0?Ce(new p(Number(F.value)).div(2).toString(),i.value.decimals).toString():"")};go(()=>{be()}),Ao(()=>{clearInterval(oe.value)});const Ye=()=>{clearInterval(oe.value),J.value=0,I.value=!0,$.updateCurrentPools(S.value.poolAddress,D.value),ae(b.value?l.value:c.value),N.getStatsData(D.value),setTimeout(()=>{I.value=!1,be()},1e3)},Ze=()=>{const s=n.value;n.value=i.value,i.value=s,B.value=!0,b.value=!b.value,b.value?(l.value=c.value,c.value=""):(c.value=l.value,l.value=""),setTimeout(()=>{B.value=!1},300)},be=()=>{oe.value=setInterval(()=>{I.value=!1,le.value||J.value<v.value&&(J.value+=1,J.value===v.value&&(S.value&&S.value.poolAddress&&$.updateCurrentPools(S.value.poolAddress,D.value),J.value=0,I.value=!0))},1e3)};H(b,ge((s,g)=>{b.value=s},500));const Oe=r(!1);H(l,ge((s,g)=>{s&&b.value&&ae(s),s==""&&b.value&&(c.value="")},500)),H(c,ge((s,g)=>{s&&!b.value&&ae(s),s==""&&!b.value&&(l.value="")},500));const Te=r(1e-4),Je=()=>{if(S.value.current_sqrt_price&&l.value&&c.value){const g=(n.value.address===S.value.coinA.address&&i.value.address===S.value.coinB.address?0:1)==0,C=new p(l.value),W=new p(c.value),R=C.sub(C.mul(new p(S.value.fee)).div(100)),G=W.div(R);return z.value.getPriceImpactPct(S.value,G.toString(),g)}return 1e-4},ae=async s=>{if(S.value)if(n.value&&i.value&&(l.value||c.value)){A.value=!0,Oe.value=!0;const g=n.value.address===S.value.coinA.address&&i.value.address===S.value.coinB.address?0:1;try{const C=await z.value.preSwap({pool:S.value,a2b:g==0,byAmountIn:b.value,amount:b.value?l.value:c.value});re.value=C.isExceed,b.value?(c.value=C.estimatedAmountOut,_.value?me.value=(s/Number(C.estimatedAmountOut)).toString():ve.value=(Number(C.estimatedAmountOut)/s).toString()):(l.value=C.estimatedAmountIn,_.value?me.value=(Number(C.estimatedAmountIn)/s).toString():ve.value=(s/Number(C.estimatedAmountIn)).toString()),Te.value=Je(),A.value=!1}catch{A.value=!1}}else b.value?c.value="":l.value="",A.value=!1},Ge=qe(),L=w(()=>Ge),Ve=r({}),me=r(""),ve=r("");H(B,()=>{me.value="",ve.value="",b.value?ae(l.value):ae(c.value)});const E=w(()=>L.value.assets&&n.value&&L.value.assets[n.value.address]?Fe(L.value.assets[n.value.address].balance,n.value.decimals):0),F=w(()=>L.value.assets&&i.value&&L.value.assets[i.value.address]?Fe(L.value.assets[i.value.address].balance,i.value.decimals):0);Pe(),H(()=>u.value.newTokenObj,s=>{if(!he(s)){const g=e?e.currentRoute.value.query.to:"",C=e?e.currentRoute.value.query.from:"";C?n.value=pe(s,C):n.value=pe(s,N.chainName==="Aptos"?"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T":"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e::usdt::USDT"),g?i.value=pe(s,g):i.value=pe(s,N.chainName==="Aptos"?"0x1::aptos_coin::AptosCoin":"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e::usdc::USDC"),!C&&g&&(n.value="")}},{immediate:!0});const S=w(()=>{var s,g,C,W;if(u.value.tokensObj&&n.value&&i.value){let R=null;const G={};if(Object.values(u.value.poolConfigList).forEach(O=>{var T,ue,te,q;(O.coinA.address.toUpperCase()===((T=n.value.address)==null?void 0:T.toUpperCase())&&O.coinB.address.toUpperCase()===((ue=i.value.address)==null?void 0:ue.toUpperCase())||O.coinB.address.toUpperCase()===((te=n.value.address)==null?void 0:te.toUpperCase())&&O.coinA.address.toUpperCase()===((q=i.value.address)==null?void 0:q.toUpperCase()))&&(G[O.address]={...O})}),u.value.poolsObj&&!he(u.value.poolsObj))for(const O in u.value.poolsObj){const T=u.value.poolsObj[O];(T.token_a.address.toUpperCase()===((s=n.value.address)==null?void 0:s.toUpperCase())&&T.token_b.address.toUpperCase()===((g=i.value.address)==null?void 0:g.toUpperCase())||T.token_b.address.toUpperCase()===((C=n.value.address)==null?void 0:C.toUpperCase())&&T.token_a.address.toUpperCase()===((W=i.value.address)==null?void 0:W.toUpperCase()))&&(G[T.address]={...T})}return R=Object.values(G).sort((O,T)=>O.fee-T.fee)[0],R&&!he(R)?R:null}return null}),Ue=r(!0),De=r(!1),xe=async s=>{s&&(ae(b.value?l.value:c.value),De.value=!0,s.coinA.symbol.toLowerCase()===n.value.symbol.toLowerCase()&&s.coinB.symbol.toLowerCase()===i.value.symbol.toLowerCase()?Ue.value=!0:Ue.value=!1)};H(()=>S.value,(s,g)=>{s&&(!g||s.address!==g.address||s.current_sqrt_price!==g.current_sqrt_price)&&xe(s)},{immediate:!0,deep:!0});const eo=w(()=>u.value.tokensObj&&n.value&&n.value.address&&u.value.tokensObj[n.value.address]&&u.value.tokensObj[n.value.address].logoURI),oo=w(()=>u.value.tokensObj&&i.value&&i.value.address&&u.value.tokensObj[i.value.address]&&u.value.tokensObj[i.value.address].logoURI),no=w(()=>u.value.tokensObj&&n.value&&n.value.address&&u.value.tokensObj[n.value.address]&&u.value.tokensObj[n.value.address].coingecko_id||null),so=w(()=>u.value.tokensObj&&i.value&&i.value.address&&u.value.tokensObj[i.value.address]&&u.value.tokensObj[i.value.address].coingecko_id||null),ao=w(()=>{const s=new p(l.value),g=new p(S.value.fee),C=s.mul(g).toString();return Number(C)<1/Math.pow(10,n.value.decimals)?`<${new p(1).div(new p(Math.pow(10,n.value.decimals))).toString()}`:Ce(C,n.value.decimals)}),{setIsShowSuccess:to,setIsShowRejected:$e,setIsShowWaiting:fe,setTransactionDesc:io,setTransactionTxid:Ee}=N;return{hasPool:De,getPoolInfoSuccess:Be,halfBtnSelect:Xe,formCoinId:no,toCoinId:so,fromCoinUrl:eo,toCoinUrl:oo,t:d,indicator:a,wallet:L,currentLpInfo:Ve,fixD:P,decimalFormat:Ae,impact:Te,oneFromAmount:me,oneToAmount:ve,importIcon:X,clickExchange:Ze,clickRefresh:Ye,refresh:I,change:B,isShowAddress:Y,isShowSwapSetting:Z,fromCoin:n,toCoin:i,slippage:se,openCoinSelect:Ke,onCoinSelect:ze,existingCoins:K,lastSelectCoin:M,currentCoinKey:k,showCoinSelect:f,fromCoinAmount:l,toCoinAmount:c,maxBtnSelect:He,fixedFromCoin:b,swapBtnText:Qe,toSwap:async()=>{var g,C,W,R,G,O,T,ue;Q.value=!1,A.value=!0,Ee(""),io(d("tips.swapping",{from:`${l.value} ${(g=n.value)==null?void 0:g.symbol}`,to:`${c.value} ${(C=i.value)==null?void 0:C.symbol}`})),fe(!0);const s=n.value.address===S.value.token_a.address&&i.value.address===S.value.token_b.address?0:1;try{const te=await z.value.getSwapTransactionPayload({pool:S.value,a2b:s==0,byAmountIn:b.value,amount:b.value?l.value:c.value,slippage:Number(se.value)/100});let q;if(D.value==="Aptos")q=await L.value.currentWallet.signAndSubmitTransaction(te);else{const de=await L.value.currentWallet.signAndExecuteTransactionBlock(te);q=z.value.handleTx(de)}if(q&&q.hash){Ee(q.hash),fe(!1),to(!0);const de={title:d("tips.swap"),desc:d("tips.swapSuccessText",{from:`${l.value} ${(W=n.value)==null?void 0:W.symbol}`,to:`${c.value} ${(R=i.value)==null?void 0:R.symbol}`}),hash:q.hash,tit:"Swap",icon:"icon-icon-swap1",tokenInfo:{tokena:`${(G=n.value)==null?void 0:G.symbol}`,numa:`- ${l.value}`,logoa:u.value.tokensObj&&n.value&&n.value.address&&u.value.tokensObj[n.value.address]&&u.value.tokensObj[n.value.address].logoURI,tokenb:`${(O=i.value)==null?void 0:O.symbol}`,numb:`+ ${c.value}`,logob:u.value.tokensObj&&i.value&&i.value.address&&u.value.tokensObj[i.value.address]&&u.value.tokensObj[i.value.address].logoURI},text:`Pay ${l.value} ${(T=n.value)==null?void 0:T.symbol} to receive ${c.value} ${(ue=i.value)==null?void 0:ue.symbol}`};D.value!=="Aptos"&&(de.res=q.res),z.value.showTransitionPending(de),await z.value.watchTransaction(de)&&setTimeout(()=>{$.updateCurrentPools(S.value.poolAddress,D.value),z.value.getAccount(L.value.address)},1e3)}else fe(!1),$e(!0);l.value="",c.value="",A.value=!1}catch{l.value="",c.value="",A.value=!1,fe(!1),$e(!0)}},loading:le,swaping:A,autoRefreshTime:v,countdown:J,setMarketTimer:be,marketTimer:oe,rateChange:_,isSwapConfirmMpdal:Q,fromCoinBlance:E,toCoinBlance:F,poolInfo:S,chainName:D,swapRouterLoading:Oe,formatFee:ao}}}),Tn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAGCBAMAAAAmlj/IAAAAFVBMVEVHcEwzMzMzMzMyMjI0NDQvLy8zMzOcydXuAAAABnRSTlMAy9hRbBs90ObtAAAAWklEQVRIx2NgYBFLdGBgYBVLS0sMYGBMMg1WE2BwU2VgCEphEDNgYGBOZEgLAMqnMaQxAEEaTBCqBKoBqh1qGAMDWwLDKDVKjVKj1Cg1So1So9QoNdwo6rccATYwqRNK4tkrAAAAAElFTkSuQmCC",Un="data:image/png;base64,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";const ne=e=>(ye("data-v-172c45c8"),e=e(),ke(),e),Dn={class:"swap-container"},$n={class:"title"},En={class:"left"},Rn={class:"right title-right"},Pn=ne(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Fn={class:"swap-card"},jn={class:"card-container"},_n={class:"card-item"},Mn={class:"card-item"},Ln=ne(()=>o("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),Wn=[Ln],qn={key:0,class:"induction"},Qn={key:0,class:"exchange-rate-btn"},Kn={key:0},zn=["src"],Hn={key:0},Xn=["src"],Yn={key:1},Zn={key:0},Jn=["src"],Gn=["src"],Vn=ne(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),xn=[Vn],es={class:"item"},os={class:"induction-text"},ns={key:1},ss={class:"item"},as={class:"induction-text"},ts={class:"induction-value"},is={class:"item"},ls={class:"induction-text"},rs={class:"induction-value"},us={key:0,class:"icon","aria-hidden":"true"},ds=ne(()=>o("use",{"xlink:href":"#icon-icon-swap"},null,-1)),cs=[ds],ms={key:3,class:"token-info-container"},vs={class:"token-info-title"},fs=ne(()=>o("span",{class:"coingecko"},"Ref. CoinGecko",-1)),ps=ne(()=>o("img",{src:Un,alt:""},null,-1)),bs=ne(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1));function Cs(e,a,d,m,N,$){const u=lo,B=ro,I=wo,Y=We,Z=co,_=uo,Q=mo,k=sn,K=So,M=Bn;return h(),y("div",Dn,[o("div",$n,[o("div",En,t(e.$t("menu.swap")),1),o("div",Rn,[o("div",{class:"slippage-icon",onClick:a[0]||(a[0]=f=>e.isShowSwapSetting=!0)},[Pn,o("span",null,t(e.slippage)+"%",1)]),x(u,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),o("div",Fn,[o("div",jn,[o("div",_n,[x(B,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":a[1]||(a[1]=f=>e.fromCoinAmount=f),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From",onOnMax:a[2]||(a[2]=f=>e.maxBtnSelect("fromCoin")),onOnHalf:a[3]||(a[3]=f=>e.halfBtnSelect("fromCoin")),onOnInput:a[4]||(a[4]=f=>{e.fromCoinAmount=f,e.fixedFromCoin=!0}),onOnSelect:a[5]||(a[5]=f=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("div",Mn,[x(B,{modelValue:e.toCoinAmount,"onUpdate:modelValue":a[6]||(a[6]=f=>e.toCoinAmount=f),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",onOnInput:a[7]||(a[7]=f=>{e.toCoinAmount=f,e.fixedFromCoin=!1}),onOnSelect:a[8]||(a[8]=f=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("img",{class:ce(e.change?"gang animationex":"gang"),src:Tn,alt:""},null,2),o("div",{class:"exchange",onClick:a[9]||(a[9]=f=>e.clickExchange())},[(h(),y("svg",{class:ce(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Wn,2))])]),e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(h(),y("div",qn,[e.fromCoinAmount&&e.toCoinAmount?(h(),y("div",Qn,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(h(),y("span",Yn,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(h(),y("span",Zn,[o("img",{src:e.toCoinUrl||("importIcon"in e?e.importIcon:U(X))(`/image/coins/${e.toCoin.symbol.toLowerCase()}.png`)},null,8,Jn),ee(" 1 "+t(e.toCoin.symbol)+" ≈ ",1),o("img",{src:e.fromCoinUrl||("importIcon"in e?e.importIcon:U(X))(`/image/coins/${e.fromCoin.symbol.toLowerCase()}.png`)},null,8,Gn),ee(" "+t(("fixD"in e?e.fixD:U(P))(Number(e.fromCoinAmount)/Number(e.toCoinAmount),e.fromCoin.decimals))+" "+t(e.fromCoin.symbol),1)])):(h(),V(I,{key:1,indicator:e.indicator},null,8,["indicator"]))])):j("",!0):(h(),y("span",Kn,[o("img",{src:e.fromCoinUrl||("importIcon"in e?e.importIcon:U(X))(`/image/coins/${e.fromCoin.symbol.toLowerCase()}.png`)},null,8,zn),ee(" 1 "+t(e.fromCoin.symbol)+" ≈ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(h(),y("span",Hn,[o("img",{src:e.toCoinUrl||("importIcon"in e?e.importIcon:U(X))(`/image/coins/${e.toCoin.symbol.toLowerCase()}.png`)},null,8,Xn),ee(" "+t(("fixD"in e?e.fixD:U(P))(Number(e.toCoinAmount)/Number(e.fromCoinAmount),e.toCoin.decimals))+" "+t(e.toCoin.symbol),1)])):(h(),V(I,{key:1,indicator:e.indicator},null,8,["indicator"]))])),(h(),y("svg",{class:"icon-change","aria-hidden":"true",onClick:a[10]||(a[10]=f=>e.rateChange=!e.rateChange)},xn))])):j("",!0),o("div",es,[o("div",os,t(e.$t("common.priceImpact")),1),e.swaping?(h(),y("div",ns,[x(I,{indicator:e.indicator},null,8,["indicator"])])):(h(),y("div",{key:0,class:ce(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>1?"impact-w":"impact-e"])},t(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",3))]),o("div",ss,[o("div",as,t(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",ts,t(e.fixedFromCoin?("fixD"in e?e.fixD:U(P))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals):("fixD"in e?e.fixD:U(P))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals))+" "+t(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",is,[o("div",ls,t(e.$t("common.fee")),1),o("div",rs,t(e.formatFee)+" "+t(e.fromCoin.symbol)+" ("+t(e.poolInfo.fee*100)+"%) ",1)])])):j("",!0)]),x(Y,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||e.poolInfo.is_pause:!1,class:"big-btn",loading:e.swaping,onClick:a[11]||(a[11]=f=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ie(()=>[e.wallet.connected?(h(),y("svg",us,cs)):j("",!0),o("span",null,t(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),x(Z),e.showCoinSelect?(h(),V(_,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:a[12]||(a[12]=f=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):j("",!0),e.isShowSwapSetting?(h(),V(Q,{key:1,onOnClose:a[13]||(a[13]=f=>e.isShowSwapSetting=!1)})):j("",!0),e.isSwapConfirmMpdal?(h(),V(k,{key:2,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,impact:e.impact,fee:e.poolInfo.fee,"format-fee":e.formatFee,onOnClose:a[14]||(a[14]=f=>e.isSwapConfirmMpdal=!1),onToSwap:e.toSwap},null,8,["fixed-from-coin","from-coin","to-coin","from-coin-amount","to-coin-amount","impact","fee","format-fee","onToSwap"])):j("",!0),e.chainName&&(e.formCoinId||e.toCoinId)?(h(),y("div",ms,[o("div",vs,[fs,ps,x(K,{placement:"top","arrow-point-at-center":""},{title:ie(()=>[ee(" The following price is only an external reference from CoinGecko, which may not reflect actual data on Cetus. ")]),default:ie(()=>[bs]),_:1})]),e.fromCoin&&e.formCoinId?(h(),V(M,{key:0,id:e.formCoinId,coin:e.fromCoin,refresh:e.refresh},null,8,["id","coin","refresh"])):j("",!0),e.toCoin&&e.toCoinId?(h(),V(M,{key:1,id:e.toCoinId,coin:e.toCoin,refresh:e.refresh},null,8,["id","coin","refresh"])):j("",!0)])):j("",!0)])}const Fs=Se(On,[["render",Cs],["__scopeId","data-v-172c45c8"]]);export{Fs as default};
