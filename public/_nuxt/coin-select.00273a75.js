import{_ as te}from"./token-warning.81db9359.js";import{i as g}from"./import-icon.de3e6c66.js";import{a as K,j as ae,u as le,b as P,D as fe,f as he,d as _e,p as ke,B as ge}from"./pool.15a4e554.js";import{a as ie,l as re,m as p,a1 as ye,a2 as de,A as Z,e as ue,o as t,f as r,h as a,c as O,t as c,x as q,u as k,i as j,w as h,s as B,j as z,I as Ce,J as ce,aa as we,S as $e,B as Se,p as me,k as pe,M as Te,r as A,v as Ie,ab as Le,K as H,E as Oe,a3 as je,F as ne,q as se,D as Be,ac as Ne}from"./entry.75df41d6.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{_ as Ae,a as Pe}from"./img-no-Positions_2x.38f02016.js";const De=ie({components:{TokenWarning:te},props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,u){const{t:i,locale:U}=re(),M=K(),v=p(()=>M),y=p(()=>new fe(Number(e.balance)).div(2)),m=ye(de,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function T(){this.$emit("onSelect")}const _=n=>{const f=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(b==null?void 0:b.value)&&(b==null?void 0:b.value)}})?).*$`);n.target.value=n.target.value.replace(f,"$1")},w=ae(),$=p(()=>w),s=le(),d=p(()=>s);let S={};Z(()=>d.value.RATES,n=>{n&&(S=n)},{immediate:!0});const E=p(()=>he(Number(e.inputValue)*Number(S&&S[e.address]&&S[e.address].price),2)),I=p(()=>{var n,f;return d.value.tokensObj&&e.address&&d.value.tokensObj[e.address]&&((n=d.value.tokensObj[e.address])==null?void 0:n.labels)&&((f=d.value.tokensObj[e.address])==null?void 0:f.labels[0])}),b=p(()=>{var n;return d.value.tokensObj&&e.address&&d.value.tokensObj[e.address]&&((n=d.value.tokensObj[e.address])==null?void 0:n.decimals)}),F=p(()=>{var n,f;return e.coinIcon||((f=(n=d==null?void 0:d.value)==null?void 0:n.tokensObj[e.address])==null?void 0:f.logo_url)||(v.value.theme==="default"?g("/image/coins/unknown.png"):g("/image/coins/sui-unknown.png"))}),R=p(()=>d.value.tokensObj);return{theme:p(()=>v.value.theme),currentIcon:F,tokensObj:R,pool:d,halfBalance:y,coinLabels:I,t:i,addCommom:P,store:v,wallet:$,indicator:m,inputChange:_,importIcon:g,selectCoin:T,amountPirce:E,coinDecimals:b}}});const Me=e=>(me("data-v-80d76574"),e=e(),pe(),e),Fe={class:"card"},Re={class:"top"},Ve={key:1,class:"input-div"},ze={key:0},Ee={class:"loading-token"},Ze=["src","onerror"],qe={key:0},Ue=Me(()=>a("use",{"xlink:href":"#icon-icon_on"},null,-1)),We=[Ue],He={class:"bottom"},Ke={key:0,class:"amount-price"},Je={key:1},Ge={class:"top"},Qe={class:"right"},Xe={class:"balance"};function Ye(e,u,i,U,M,v){const y=Ce,m=ce,T=we,_=te,w=$e,$=Se;return t(),r("div",Fe,[a("div",Re,[e.inputDisabled?(t(),r("div",Ve,[e.inputValue?(t(),r("span",ze,c(e.inputValue),1)):(t(),O(m,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(t(),O(y,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:u[0]||(u[0]=s=>e.$emit("onInput",s.target.value)),onFocus:u[1]||(u[1]=s=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),a("div",{class:q(["left",e.hasArrow?"":"nohands"]),onClick:u[2]||(u[2]=s=>e.hasArrow&&!e.pool.isTokenLoading?e.selectCoin():"")},[a("div",Ee,[e.pool.isTokenLoading?(t(),O(T,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):(t(),r("img",{key:1,src:e.currentIcon,onerror:e.theme=="default"?("importIcon"in e?e.importIcon:k(g))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:k(g))("/image/coins/sui-unknown.png")},null,8,Ze)),j(_,{address:e.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),j(w,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:h(()=>[a("div",null,[a("p",null,c(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(t(),r("p",qe,c(e.coinLabels),1)):B("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(t(),r("svg",{key:0,class:q(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},We,2)):B("",!0)],2)]),a("div",He,[e.inputValue&&e.amountPirce!="--"?(t(),r("div",Ke," $"+c(e.amountPirce),1)):(t(),r("div",Je)),a("div",Ge,[a("div",Qe,[z(c(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),a("span",Xe,c(e.wallet.connected?("addCommom"in e?e.addCommom:k(P))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(t(),O($,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:k(P))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:u[3]||(u[3]=s=>e.$emit("onHalf"))},{default:h(()=>[z(c("Half"))]),_:1},8,["disabled"])):B("",!0),e.havemax&&e.wallet.connected?(t(),O($,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:k(P))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:u[4]||(u[4]=s=>e.$emit("onMax"))},{default:h(()=>[z(c(e.$t("button.max")),1)]),_:1},8,["disabled"])):B("",!0)])])])])}const qo=ue(De,[["render",Ye],["__scopeId","data-v-80d76574"]]);const xe=ie({components:{Modal:Te,LoadingOutlined:de},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""},isCreatePoolToCoin:{type:Boolean,default:!1},isCreatePoolFromCoin:{type:Boolean,default:!1}},setup(e,u){const{t:i,locale:U}=re(),M=ae(),v=p(()=>M),y=le(),m=p(()=>y),T=K(),_=p(()=>T),w=p(()=>{var n;return(n=_.value)==null?void 0:n.filterCreatePoolCoin}),$=A([i("tab.all"),i("tab.native"),i("tab.layerZero"),i("tab.wormhole"),i("tab.celer")]),s=A(i("tab.all")),d=A(i("tab.all")),S=K(),E=p(()=>S.chainName),I=A([]),b=A(null);Ie(()=>{});const F=A(!1);Z(s,n=>{n!==i("tab.all")&&(F.value=!1),n==i("tab.all")?d.value=i("tab.all"):n==i("tab.layerZero")?d.value=i("tab.layerZero"):n==i("tab.wormhole")?d.value=i("tab.wormhole"):n==i("tab.celer")?d.value=i("tab.celer"):n==i("tab.native")&&(d.value=i("tab.native")),R(b.value)});const R=async n=>{var G,Q,X,Y,x,ee,oe;let f=[],N=m.value.tokens;if(!(_.value.chainName&&N&&N[0]&&_.value.chainName.toLowerCase().includes((G=N[0])==null?void 0:G.chain))){I.value=[];return}let W=N;if(n&&n.split("::")&&n.split("::").length==3&&E.value=="Sui"){const l=_e("Sui");try{const o=m.value.tokensObj[n]||await l.getTokenBySymbol(m.value.tokens,n);o&&((Q=N.filter(C=>(C==null?void 0:C.address)===(o==null?void 0:o.address)))==null?void 0:Q.length)<1&&(y.setNewTokens({[n]:o}),W=N.concat(o))}catch{}}for(const l of Object.keys(W)){let o=Le(W[l]);const C=v.value.assets[o.address]&&v.value.assets[o.address].balance?ke(v.value.assets&&v.value.assets[o.address].balance,o.decimals):0;e.lastSelectCoin&&o&&o.address===e.lastSelectCoin?o.unusable=!0:o.unusable=!1;const ve=((X=m.value.tokensObj[o.address])==null?void 0:X.labels)&&((Y=m.value.tokensObj[o.address])==null?void 0:Y.labels[0]),be=m.value.tokensObj[o.address]?(x=m.value.tokensObj[o.address])==null?void 0:x.name:o.name;o={...o,balance:C,labels:ve,name:be,sort:o.symbol=="APT"||o.symbol=="SUI"?1:-1},f.push(o)}let V;v.value.address?V=f.sort((l,o)=>o.balance-l.balance):V=f;let L=[];if(n){const l=V.filter(o=>o.symbol.toLowerCase().indexOf(n.toLowerCase())!==-1||o.address.toLowerCase().indexOf(n.toLowerCase())!==-1||o.address.toLowerCase().indexOf(ge(n).full_address.toLowerCase())!==-1);s.value!==i("tab.all")?L=l.filter(C=>s.value==i("tab.native")?!C.labels:C.labels&&C.labels.toLowerCase()==s.value.toLowerCase()):L=l}else s.value!==i("tab.all")?L=V.filter(o=>s.value==i("tab.native")?!o.labels:o.labels&&o.labels.toLowerCase()==s.value.toLowerCase()):L=V;e.isCreatePoolToCoin?I.value=(ee=L.filter(l=>w.value[l==null?void 0:l.address]))==null?void 0:ee.sort((l,o)=>o.sort-l.sort).sort((l,o)=>o.unusable-l.unusable):I.value=L.sort((l,o)=>o.sort-l.sort).sort((l,o)=>o.unusable-l.unusable),e.isCreatePoolFromCoin&&(I.value=(oe=L.filter(l=>!w.value[l==null?void 0:l.address]))==null?void 0:oe.sort((l,o)=>o.sort-l.sort).sort((l,o)=>o.unusable-l.unusable))},J=n=>{n.unusable||(u.emit("onSelect",n),u.emit("onClose"))};return Z(()=>[b.value,F.value],([n,f])=>{R(n)},{immediate:!0}),Z(()=>m.value.tokens,n=>{n&&R(b.value)},{immediate:!0}),{pools:m,t:i,chainName:E,tabList:$,currentTab:s,addCommom:P,tokenList:I,importIcon:g,keyword:b,wallet:v,toSelect:J,store:_,isShowAll:F}}}),eo=""+globalThis.__publicAssetsURL("image/warning@2x.png");const D=e=>(me("data-v-913d1ef5"),e=e(),pe(),e),oo=D(()=>a("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),no={class:"coin-select-modal"},so={class:"search-input"},to=["placeholder"],ao=D(()=>a("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),lo=[ao],io={key:0,class:"tab-list"},ro=["onClick"],uo={class:"item"},co=D(()=>a("div",{class:"line"},null,-1)),mo={class:"coin-list-box"},po={key:0,class:"coin-list"},vo=["onClick"],bo={class:"left"},fo=["src"],ho=["src"],_o={class:"name-box"},ko=D(()=>a("img",{src:eo,alt:""},null,-1)),go={class:"balance-box"},yo={class:"balance"},Co={key:0},wo={key:1},$o={key:2},So={key:3},To=D(()=>a("p",null,null,-1)),Io={key:1,class:"no-data"},Lo={key:0,class:"token-loading"},Oo={key:1,class:"no-data-content"},jo={key:0,src:Ae},Bo={key:1,src:Pe},No=D(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1));function Ao(e,u,i,U,M,v){const y=Be,m=H("loading-outlined"),T=Ne,_=ce,w=H("vue-scroll"),$=H("Modal");return t(),O($,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:u[2]||(u[2]=s=>e.$emit("onClose"))},{closeIcon:h(()=>[oo]),default:h(()=>[a("div",no,[a("div",so,[Oe(a("input",{"onUpdate:modelValue":u[0]||(u[0]=s=>e.keyword=s),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,to),[[je,e.keyword]]),e.keyword?(t(),r("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:u[1]||(u[1]=s=>e.keyword="")},lo)):B("",!0)]),e.chainName!=="Sui"?(t(),r("div",io,[(t(!0),r(ne,null,se(e.tabList,(s,d)=>(t(),r("div",{key:d,class:q(["item-container",e.currentTab==s?"item-container-active item-container":"item-container"]),onClick:S=>e.currentTab=s},[a("div",uo,c(s),1)],10,ro))),128))])):B("",!0),co,a("div",mo,[j(w,null,{default:h(()=>[e.tokenList&&e.tokenList.length>0?(t(),r("ul",po,[(t(!0),r(ne,null,se(e.tokenList,(s,d)=>(t(),r("li",{key:d,class:q(s.unusable?"unusable":""),onClick:S=>e.toSelect(s)},[a("div",bo,[s.isChinaToken?(t(),r("img",{key:1,src:e.store.theme=="default"?("importIcon"in e?e.importIcon:k(g))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:k(g))("/image/coins/sui-unknown.png"),alt:""},null,8,ho)):(t(),r("img",{key:0,src:s.icon||s.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:k(g))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:k(g))("/image/coins/sui-unknown.png"))},null,8,fo)),a("div",_o,[a("span",null,[z(c(s.symbol)+" ",1),s.isSelfBuilt?(t(),O(y,{key:0,placement:"right","arrow-point-at-center":""},{title:h(()=>[a("span",null,c(e.t("newAdd.notCetusTokenList")),1)]),default:h(()=>[ko]),_:1})):B("",!0)]),a("p",null,c(s.name)+" "+c(s.labels?`(${s.labels})`:""),1)])]),a("div",go,[a("div",yo,[e.wallet.loading?(t(),r("div",Co,[j(T,null,{default:h(()=>[j(m)]),_:1})])):s.balance&&e.wallet.connected?(t(),r("div",wo,c(("addCommom"in e?e.addCommom:k(P))(s.balance,s.decimals)),1)):!s.balance&&e.wallet.connected?(t(),r("div",$o,"0")):(t(),r("div",So))]),To])],10,vo))),128))])):(t(),r("div",Io,[e.pools.isTokenLoading?(t(),r("div",Lo,[j(_)])):(t(),r("div",Oo,[e.store.theme=="default"?(t(),r("img",jo)):(t(),r("img",Bo)),a("p",null,c(e.t("newAdd.noTokensFound")),1),a("div",null,[z(c(e.t("newAdd.enterCoinType"))+" ",1),j(y,{placement:"bottom","arrow-point-at-center":""},{title:h(()=>[a("span",null,c(e.t("newAdd.uniqueIdOfCoin")),1)]),default:h(()=>[No]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const Uo=ue(xe,[["render",Ao],["__scopeId","data-v-913d1ef5"]]);export{qo as _,Uo as a};
