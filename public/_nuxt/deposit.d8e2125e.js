import{_ as ko}from"./back.d0138d80.js";import{_ as Co}from"./refresh-icon.a0417008.js";import{a as At,r as _,b as Zn,e as me,w as ae,i as pn,f as St,o as M,h as L,j as m,k as ee,t as A,p as vn,l as gn,D as K,m as ot,q as le,s as Ae,v as Te,I as Ao,S as pi,x as Et,y as er,z as Re,B as tr,A as $t,C as et,E as So,F as No,M as Io,G as vi,H as Jt,J as Mo,K as To,c as Ve,L as $o,N as Po,O as xo,P as Eo,Q as Mr,R as ze,T as Tr,U as $r,V as Pr,W as pt,X as xr,Y as Er,Z as Kt,$ as Rr,a0 as Tn,a1 as Yt,a2 as $n,a3 as Ro,a4 as Lo}from"./entry.f414dbf5.js";import{_ as Fo,a as Bo}from"./coin-select.cd2e0f78.js";import{_ as Oo,a as qo}from"./swap-setting.e7d9759d.js";/* empty css              */import"./index.6e57adf5.js";import{_ as Uo}from"./apr-tab.9d5c56fa.js";import{_ as Do}from"./apr-tips.147e00c7.js";import{_ as gi,a as yi,b as Xo}from"./img-lock_2x.63304ca6.js";import{_ as Ho}from"./status-block.0c5f4586.js";import{_ as wi,a as bi}from"./icon-arrow_2x.db44c7c5.js";import{p as zo}from"./precision.1cd464a0.js";import{_ as Vo,a as Ko}from"./checked.667d8670.js";import"./img-no-Positions_2x.e41c0467.js";import"./index.2793567e.js";import"./coin-pair-name.62062da2.js";const Yo=At({props:{coinIcon:{type:String,default:""},coin:{type:Object,default:()=>({})}},setup(e){const t=_(""),n=_(""),r=_(""),i=Zn(),a=me(()=>i);return ae(()=>[a.value.tokensObj,e.coin],([o,s])=>{var l,u;o&&s&&o[s.address]?(n.value=((l=o[s.address])==null?void 0:l.labels)&&((u=o[s.address])==null?void 0:u.labels[0]),t.value=o[s.address].name,r.value=o[s.address].symbol):(n.value="",t.value="",r.value="")},{immediate:!0,deep:!0}),{importIcon:pn,coinName:t,coinLabels:n,coinSymbol:r}}}),Wo=e=>(vn("data-v-3cb5bffa"),e=e(),gn(),e),Go={class:"coin-block"},jo=["src"],Qo={class:"coin-info"},Jo={class:"symbol"},Zo={key:0,class:"name"},ea=Wo(()=>m("div",null,[m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon_on"})])],-1));function ta(e,t,n,r,i,a){return M(),L("div",Go,[m("div",null,[e.coinIcon?(M(),L("img",{key:0,src:e.coinIcon||e.importIcon(`/image/coins/${e.coinName.toLowerCase()}.png`)},null,8,jo)):ee("",!0),m("div",Qo,[m("div",Jo,A(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinName?(M(),L("div",Zo,A(e.coinName)+" "+A(e.coinLabels?`(${e.coinLabels})`:""),1)):ee("",!0)])]),ea])}const na=St(Yo,[["render",ta],["__scopeId","data-v-3cb5bffa"]]),ra=-443630;function Lr(e,t){const n=ia(e),r=(n-ra)%t;return r>t/2?n-r+t:n-r}const _i=new K("1.0001");function ia(e){return e.log(_i).toDP(0,K.ROUND_HALF_UP).toNumber()}function Fr(e){return _i.pow(e)}const oa=At({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1}},emits:["onInput"],setup(e,t){const n=_(""),r=_("");let i=_(""),a=_("");const o=()=>{if(Number.isNaN(n.value)||!n.value)return;const f=Lr(new K(n.value),u.value.tickSpacing),d=Fr(f+u.value.tickSpacing);if(e.pType=="Min"&&Number(d)>=Number(a.value))return;const g=d;t.emit("onInput",g)},s=()=>{if(Number.isNaN(n.value)||!n.value)return;const f=Lr(new K(n.value),u.value.tickSpacing),d=Fr(f-u.value.tickSpacing),g=d;e.pType=="Max"&&Number(d)<=Number(i.value)||t.emit("onInput",g)},l=f=>{let d=f.replace(/[^\d.]/g,"");const g=/^\d+(\.\d+)?$/;d.split(".").length>2&&!g.exec(d)&&(d=d.substr(0,d.length-1)),r.value=d,(ot(d,6)>0||String(d)=="0")&&t.emit("onInput",String(d))};ae(()=>e.defaultMinPrice,(f,d)=>{f!==d&&(i.value=e.defaultMinPrice)},{immediate:!0}),ae(()=>e.defaultMaxPrice,(f,d)=>{f!==d&&(a.value=e.defaultMaxPrice)},{immediate:!0}),ae(()=>e.inputValue,f=>{if(f&&f!=="0"&&f!=="\u221E"){n.value=f;const g=f.toString().split(".")[1];r.value=f!=="0"&&f!=="\u221E"&&g&&g.length>6?ot(f,6):f}else(f=="0"||f=="\u221E")&&(r.value=f)},{immediate:!0});const u=_({});ae(()=>e.poolInfo,(f,d)=>{f&&(u.value=f)},{immediate:!0});const c=_("");return ae(()=>e.currentPriceTab,f=>{c.value=f},{immediate:!0}),{addPrice:o,minusPrice:s,oValue:r,changeValue:l,isDisabled:c}}});const aa={class:"set-price-item"},sa={class:"title"},la={class:"input-box"},ua={key:0,class:"minus-btn"},ca=["disabled"],fa={key:1,class:"plus-btn"};function da(e,t,n,r,i,a){const o=Ao,s=pi;return M(),L("div",aa,[m("div",sa,A(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),le(s,{loading:e.loading,active:"",paragraph:!1},{default:Ae(()=>[m("div",la,[e.isDisabled=="Custom"?(M(),L("a",ua,[m("div",{class:Te(!e.fromCoin&&!e.toCoin?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:t[0]||(t[0]=(...l)=>e.minusPrice&&e.minusPrice(...l))},null,10,ca)])):ee("",!0),le(o,{id:"pValu",value:e.oValue,"onUpdate:value":t[1]||(t[1]=l=>e.oValue=l),disabled:e.isDisabled!=="Custom",autocomplete:"off",onChange:t[2]||(t[2]=l=>e.changeValue(l.target.value))},null,8,["value","disabled"]),e.isDisabled=="Custom"?(M(),L("a",fa,[m("div",{class:Te(!e.fromCoin&&!e.toCoin?"addDis":"add"),onClick:t[3]||(t[3]=(...l)=>e.addPrice&&e.addPrice(...l))},null,2)])):ee("",!0)])]),_:1},8,["loading"]),m("p",{class:Te(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},A(e.toCoin&&e.toCoin.symbol)+" per "+A(e.fromCoin&&e.fromCoin.symbol),3)])}const Br=St(oa,[["render",da],["__scopeId","data-v-167293e4"]]),ha=At({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1}},setup(e,t){let n=_(""),r=_(""),i=_(),a=_(!1),o=_(!1);const s=_({}),l=Et(),u=me(()=>l);er(()=>{n.value=e.min,r.value=e.max}),ae(()=>e.currentPriceTab,(k,h)=>{k!==h&&(i.value=e.currentPriceTab)},{immediate:!0}),ae(()=>e.min,(k,h)=>{k!==h&&(n.value=k)}),ae(()=>e.max,(k,h)=>{k!==h&&(r.value=k)}),ae(()=>e.poolInfo,(k,h)=>{k&&(s.value=k)},{immediate:!0});const c=k=>{n.value=k,t.emit("onChangeMinPrice",k)},f=k=>{r.value=k,t.emit("onChangeMaxPrice",k)};ae(a,(k,h)=>{k!==h&&t.emit("onChangeFullRange",k)});const d=()=>{n.value=e.defaultMinPrice,r.value=e.defaultMaxPrice,o.value=!1,a.value=!1},g=()=>{o.value=!1,n.value="0",r.value="\u221E"};return ae(a,(k,h)=>{k!==h&&t.emit("onChangeFullRange",k)}),{store:u,changeMinPrice:c,changeMaxPrice:f,importIcon:pn,resetPrice:d,changeShowUnderStand:()=>{a.value=!a.value,a.value?o.value=!0:d(),o.value||(n.value=e.defaultMinPrice,r.value=e.defaultMaxPrice)},showUnderStand:o,minPrice:n,maxPrice:r,understand:g,isRadio:a}}});const ma={class:"set-price"},pa={class:"card-container"},va={key:0,class:"card"},ga=["src"],ya={key:1,class:"understand"},wa={class:"left"},ba={class:"right"};function _a(e,t,n,r,i,a){const o=Br,s=Br,l=tr;return M(),L("div",ma,[m("div",pa,[e.showUnderStand?(M(),L("div",ya,[m("div",wa,[m("p",null,A(e.$t("common.lowerEfficiency")),1),m("p",null,A(e.$t("common.lowerEfficiencyTips")),1)]),m("div",ba,[le(l,{onClick:e.understand},{default:Ae(()=>[Re(A(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(M(),L("div",va,[le(o,{value:e.minPrice,"onUpdate:value":t[0]||(t[0]=u=>e.minPrice=u),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","onOnInput","onAddValue","onDelValue"]),le(s,{value:e.maxPrice,"onUpdate:value":t[1]||(t[1]=u=>e.maxPrice=u),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","onOnInput","onAddValue","onDelValue"]),m("img",{src:e.importIcon("/image/lmg-line@2x.png"),alt:""},null,8,ga)]))])])}const ka=St(ha,[["render",_a],["__scopeId","data-v-c2ba1b54"]]);function Zt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ca(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ki(e){let t,n,r;e.length!==2?(t=Zt,n=(s,l)=>Zt(e(s),l),r=(s,l)=>e(s)-l):(t=e===Zt||e===Ca?e:Aa,n=e,r=e);function i(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<0?u=f+1:c=f}while(u<c)}return u}function a(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function o(s,l,u=0,c=s.length){const f=i(s,l,u,c-1);return f>u&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:o,right:a}}function Aa(){return 0}function Sa(e){return e===null?NaN:+e}const Na=ki(Zt),Ia=Na.right;ki(Sa).center;const Ma=Ia;class Or extends Map{constructor(t,n=Pa){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(qr(this,t))}has(t){return super.has(qr(this,t))}set(t,n){return super.set(Ta(this,t),n)}delete(t){return super.delete($a(this,t))}}function qr({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Ta({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function $a({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Pa(e){return e!==null&&typeof e=="object"?e.valueOf():e}var qn=Math.sqrt(50),Un=Math.sqrt(10),Dn=Math.sqrt(2);function xa(e,t,n){var r,i=-1,a,o,s;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(s=Ci(e,t,n))===0||!isFinite(s))return[];if(s>0){let l=Math.round(e/s),u=Math.round(t/s);for(l*s<e&&++l,u*s>t&&--u,o=new Array(a=u-l+1);++i<a;)o[i]=(l+i)*s}else{s=-s;let l=Math.round(e*s),u=Math.round(t*s);for(l/s<e&&++l,u/s>t&&--u,o=new Array(a=u-l+1);++i<a;)o[i]=(l+i)/s}return r&&o.reverse(),o}function Ci(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=qn?10:a>=Un?5:a>=Dn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=qn?10:a>=Un?5:a>=Dn?2:1)}function Ea(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=qn?i*=10:a>=Un?i*=5:a>=Dn&&(i*=2),t<e?-i:i}function Ra(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function La(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}var Fa={value:()=>{}};function nr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new en(n)}function en(e){this._=e}function Ba(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}en.prototype=nr.prototype={constructor:en,on:function(e,t){var n=this._,r=Ba(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=Oa(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=Ur(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Ur(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new en(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function Oa(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Ur(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Fa,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Xn="http://www.w3.org/1999/xhtml";const Dr={svg:"http://www.w3.org/2000/svg",xhtml:Xn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Dr.hasOwnProperty(t)?{space:Dr[t],local:e}:e}function qa(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Xn&&t.documentElement.namespaceURI===Xn?t.createElement(e):t.createElementNS(n,e)}}function Ua(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ai(e){var t=yn(e);return(t.local?Ua:qa)(t)}function Da(){}function rr(e){return e==null?Da:function(){return this.querySelector(e)}}function Xa(e){typeof e!="function"&&(e=rr(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=new Array(o),l,u,c=0;c<o;++c)(l=a[c])&&(u=e.call(l,l.__data__,c,a))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new Le(r,this._parents)}function Ha(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function za(){return[]}function Si(e){return e==null?za:function(){return this.querySelectorAll(e)}}function Va(e){return function(){return Ha(e.apply(this,arguments))}}function Ka(e){typeof e=="function"?e=Va(e):e=Si(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(r.push(e.call(l,l.__data__,u,o)),i.push(l));return new Le(r,i)}function Ni(e){return function(){return this.matches(e)}}function Ii(e){return function(t){return t.matches(e)}}var Ya=Array.prototype.find;function Wa(e){return function(){return Ya.call(this.children,e)}}function Ga(){return this.firstElementChild}function ja(e){return this.select(e==null?Ga:Wa(typeof e=="function"?e:Ii(e)))}var Qa=Array.prototype.filter;function Ja(){return Array.from(this.children)}function Za(e){return function(){return Qa.call(this.children,e)}}function es(e){return this.selectAll(e==null?Ja:Za(typeof e=="function"?e:Ii(e)))}function ts(e){typeof e!="function"&&(e=Ni(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&s.push(l);return new Le(r,this._parents)}function Mi(e){return new Array(e.length)}function ns(){return new Le(this._enter||this._groups.map(Mi),this._parents)}function on(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}on.prototype={constructor:on,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function rs(e){return function(){return e}}function is(e,t,n,r,i,a){for(var o=0,s,l=t.length,u=a.length;o<u;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new on(e,a[o]);for(;o<l;++o)(s=t[o])&&(i[o]=s)}function os(e,t,n,r,i,a,o){var s,l,u=new Map,c=t.length,f=a.length,d=new Array(c),g;for(s=0;s<c;++s)(l=t[s])&&(d[s]=g=o.call(l,l.__data__,s,t)+"",u.has(g)?i[s]=l:u.set(g,l));for(s=0;s<f;++s)g=o.call(e,a[s],s,a)+"",(l=u.get(g))?(r[s]=l,l.__data__=a[s],u.delete(g)):n[s]=new on(e,a[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(d[s])===l&&(i[s]=l)}function as(e){return e.__data__}function ss(e,t){if(!arguments.length)return Array.from(this,as);var n=t?os:is,r=this._parents,i=this._groups;typeof e!="function"&&(e=rs(e));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=r[u],f=i[u],d=f.length,g=ls(e.call(c,c&&c.__data__,u,r)),$=g.length,k=s[u]=new Array($),h=o[u]=new Array($),S=l[u]=new Array(d);n(c,f,k,h,S,g,t);for(var I=0,v=0,P,y;I<$;++I)if(P=k[I]){for(I>=v&&(v=I+1);!(y=h[v])&&++v<$;);P._next=y||null}}return o=new Le(o,r),o._enter=s,o._exit=l,o}function ls(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function us(){return new Le(this._exit||this._groups.map(Mi),this._parents)}function cs(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function fs(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var u=n[l],c=r[l],f=u.length,d=s[l]=new Array(f),g,$=0;$<f;++$)(g=u[$]||c[$])&&(d[$]=g);for(;l<i;++l)s[l]=n[l];return new Le(s,this._parents)}function ds(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function hs(e){e||(e=ms);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),u,c=0;c<s;++c)(u=o[c])&&(l[c]=u);l.sort(t)}return new Le(i,this._parents).order()}function ms(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ps(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function vs(){return Array.from(this)}function gs(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function ys(){let e=0;for(const t of this)++e;return e}function ws(){return!this.node()}function bs(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function _s(e){return function(){this.removeAttribute(e)}}function ks(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cs(e,t){return function(){this.setAttribute(e,t)}}function As(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ss(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ns(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Is(e,t){var n=yn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?ks:_s:typeof t=="function"?n.local?Ns:Ss:n.local?As:Cs)(n,t))}function Ti(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ms(e){return function(){this.style.removeProperty(e)}}function Ts(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $s(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ps(e,t,n){return arguments.length>1?this.each((t==null?Ms:typeof t=="function"?$s:Ts)(e,t,n==null?"":n)):_t(this.node(),e)}function _t(e,t){return e.style.getPropertyValue(t)||Ti(e).getComputedStyle(e,null).getPropertyValue(t)}function xs(e){return function(){delete this[e]}}function Es(e,t){return function(){this[e]=t}}function Rs(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ls(e,t){return arguments.length>1?this.each((t==null?xs:typeof t=="function"?Rs:Es)(e,t)):this.node()[e]}function $i(e){return e.trim().split(/^|\s+/)}function ir(e){return e.classList||new Pi(e)}function Pi(e){this._node=e,this._names=$i(e.getAttribute("class")||"")}Pi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function xi(e,t){for(var n=ir(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Ei(e,t){for(var n=ir(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Fs(e){return function(){xi(this,e)}}function Bs(e){return function(){Ei(this,e)}}function Os(e,t){return function(){(t.apply(this,arguments)?xi:Ei)(this,e)}}function qs(e,t){var n=$i(e+"");if(arguments.length<2){for(var r=ir(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Os:t?Fs:Bs)(n,t))}function Us(){this.textContent=""}function Ds(e){return function(){this.textContent=e}}function Xs(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Hs(e){return arguments.length?this.each(e==null?Us:(typeof e=="function"?Xs:Ds)(e)):this.node().textContent}function zs(){this.innerHTML=""}function Vs(e){return function(){this.innerHTML=e}}function Ks(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Ys(e){return arguments.length?this.each(e==null?zs:(typeof e=="function"?Ks:Vs)(e)):this.node().innerHTML}function Ws(){this.nextSibling&&this.parentNode.appendChild(this)}function Gs(){return this.each(Ws)}function js(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qs(){return this.each(js)}function Js(e){var t=typeof e=="function"?e:Ai(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Zs(){return null}function el(e,t){var n=typeof e=="function"?e:Ai(e),r=t==null?Zs:typeof t=="function"?t:rr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function tl(){var e=this.parentNode;e&&e.removeChild(this)}function nl(){return this.each(tl)}function rl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function il(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ol(e){return this.select(e?il:rl)}function al(e){return arguments.length?this.property("__data__",e):this.node().__data__}function sl(e){return function(t){e.call(this,t,this.__data__)}}function ll(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ul(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function cl(e,t,n){return function(){var r=this.__on,i,a=sl(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function fl(e,t,n){var r=ll(e+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(i=0,c=s[l];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(s=t?cl:ul,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function Ri(e,t,n){var r=Ti(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function dl(e,t){return function(){return Ri(this,e,t)}}function hl(e,t){return function(){return Ri(this,e,t.apply(this,arguments))}}function ml(e,t){return this.each((typeof t=="function"?hl:dl)(e,t))}function*pl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Li=[null];function Le(e,t){this._groups=e,this._parents=t}function Bt(){return new Le([[document.documentElement]],Li)}function vl(){return this}Le.prototype=Bt.prototype={constructor:Le,select:Xa,selectAll:Ka,selectChild:ja,selectChildren:es,filter:ts,data:ss,enter:ns,exit:us,join:cs,merge:fs,selection:vl,order:ds,sort:hs,call:ps,nodes:vs,node:gs,size:ys,empty:ws,each:bs,attr:Is,style:Ps,property:Ls,classed:qs,text:Hs,html:Ys,raise:Gs,lower:Qs,append:Js,insert:el,remove:nl,clone:ol,datum:al,on:fl,dispatch:ml,[Symbol.iterator]:pl};function Ke(e){return typeof e=="string"?new Le([[document.querySelector(e)]],[document.documentElement]):new Le([[e]],Li)}function gl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Xr(e,t){if(e=gl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Hn={capture:!0,passive:!1};function zn(e){e.preventDefault(),e.stopImmediatePropagation()}function yl(e){var t=e.document.documentElement,n=Ke(e).on("dragstart.drag",zn,Hn);"onselectstart"in t?n.on("selectstart.drag",zn,Hn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function wl(e,t){var n=e.document.documentElement,r=Ke(e).on("dragstart.drag",null);t&&(r.on("click.drag",zn,Hn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function or(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Fi(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ot(){}var Rt=.7,an=1/Rt,bt="\\s*([+-]?\\d+)\\s*",Lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ye="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bl=/^#([0-9a-f]{3,8})$/,_l=new RegExp(`^rgb\\(${bt},${bt},${bt}\\)$`),kl=new RegExp(`^rgb\\(${Ye},${Ye},${Ye}\\)$`),Cl=new RegExp(`^rgba\\(${bt},${bt},${bt},${Lt}\\)$`),Al=new RegExp(`^rgba\\(${Ye},${Ye},${Ye},${Lt}\\)$`),Sl=new RegExp(`^hsl\\(${Lt},${Ye},${Ye}\\)$`),Nl=new RegExp(`^hsla\\(${Lt},${Ye},${Ye},${Lt}\\)$`),Hr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};or(Ot,dt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zr,formatHex:zr,formatHex8:Il,formatHsl:Ml,formatRgb:Vr,toString:Vr});function zr(){return this.rgb().formatHex()}function Il(){return this.rgb().formatHex8()}function Ml(){return Bi(this).formatHsl()}function Vr(){return this.rgb().formatRgb()}function dt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=bl.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Kr(t):n===3?new $e(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Wt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Wt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_l.exec(e))?new $e(t[1],t[2],t[3],1):(t=kl.exec(e))?new $e(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Cl.exec(e))?Wt(t[1],t[2],t[3],t[4]):(t=Al.exec(e))?Wt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Sl.exec(e))?Gr(t[1],t[2]/100,t[3]/100,1):(t=Nl.exec(e))?Gr(t[1],t[2]/100,t[3]/100,t[4]):Hr.hasOwnProperty(e)?Kr(Hr[e]):e==="transparent"?new $e(NaN,NaN,NaN,0):null}function Kr(e){return new $e(e>>16&255,e>>8&255,e&255,1)}function Wt(e,t,n,r){return r<=0&&(e=t=n=NaN),new $e(e,t,n,r)}function Tl(e){return e instanceof Ot||(e=dt(e)),e?(e=e.rgb(),new $e(e.r,e.g,e.b,e.opacity)):new $e}function Vn(e,t,n,r){return arguments.length===1?Tl(e):new $e(e,t,n,r==null?1:r)}function $e(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}or($e,Vn,Fi(Ot,{brighter(e){return e=e==null?an:Math.pow(an,e),new $e(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Rt:Math.pow(Rt,e),new $e(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $e(ft(this.r),ft(this.g),ft(this.b),sn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yr,formatHex:Yr,formatHex8:$l,formatRgb:Wr,toString:Wr}));function Yr(){return`#${ct(this.r)}${ct(this.g)}${ct(this.b)}`}function $l(){return`#${ct(this.r)}${ct(this.g)}${ct(this.b)}${ct((isNaN(this.opacity)?1:this.opacity)*255)}`}function Wr(){const e=sn(this.opacity);return`${e===1?"rgb(":"rgba("}${ft(this.r)}, ${ft(this.g)}, ${ft(this.b)}${e===1?")":`, ${e})`}`}function sn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ft(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ct(e){return e=ft(e),(e<16?"0":"")+e.toString(16)}function Gr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qe(e,t,n,r)}function Bi(e){if(e instanceof qe)return new qe(e.h,e.s,e.l,e.opacity);if(e instanceof Ot||(e=dt(e)),!e)return new qe;if(e instanceof qe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new qe(o,s,l,e.opacity)}function Pl(e,t,n,r){return arguments.length===1?Bi(e):new qe(e,t,n,r==null?1:r)}function qe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}or(qe,Pl,Fi(Ot,{brighter(e){return e=e==null?an:Math.pow(an,e),new qe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rt:Math.pow(Rt,e),new qe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new $e(Pn(e>=240?e-240:e+120,i,r),Pn(e,i,r),Pn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new qe(jr(this.h),Gt(this.s),Gt(this.l),sn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=sn(this.opacity);return`${e===1?"hsl(":"hsla("}${jr(this.h)}, ${Gt(this.s)*100}%, ${Gt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function jr(e){return e=(e||0)%360,e<0?e+360:e}function Gt(e){return Math.max(0,Math.min(1,e||0))}function Pn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ar=e=>()=>e;function xl(e,t){return function(n){return e+n*t}}function El(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Rl(e){return(e=+e)==1?Oi:function(t,n){return n-t?El(t,n,e):ar(isNaN(t)?n:t)}}function Oi(e,t){var n=t-e;return n?xl(e,n):ar(isNaN(e)?t:e)}const ln=function e(t){var n=Rl(t);function r(i,a){var o=n((i=Vn(i)).r,(a=Vn(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=Oi(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function Ll(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Fl(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Bl(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=wn(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function Ol(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Oe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ql(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=wn(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Kn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xn=new RegExp(Kn.source,"g");function Ul(e){return function(){return e}}function Dl(e){return function(t){return e(t)+""}}function qi(e,t){var n=Kn.lastIndex=xn.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Kn.exec(e))&&(i=xn.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:Oe(r,i)})),n=xn.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?Dl(l[0].x):Ul(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function wn(e,t){var n=typeof t,r;return t==null||n==="boolean"?ar(t):(n==="number"?Oe:n==="string"?(r=dt(t))?(t=r,ln):qi:t instanceof dt?ln:t instanceof Date?Ol:Fl(t)?Ll:Array.isArray(t)?Bl:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ql:Oe)(e,t)}function Xl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Qr=180/Math.PI,Yn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ui(e,t,n,r,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Qr,skewX:Math.atan(l)*Qr,scaleX:o,scaleY:s}}var jt;function Hl(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Yn:Ui(t.a,t.b,t.c,t.d,t.e,t.f)}function zl(e){return e==null||(jt||(jt=document.createElementNS("http://www.w3.org/2000/svg","g")),jt.setAttribute("transform",e),!(e=jt.transform.baseVal.consolidate()))?Yn:(e=e.matrix,Ui(e.a,e.b,e.c,e.d,e.e,e.f))}function Di(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,c,f,d,g,$){if(u!==f||c!==d){var k=g.push("translate(",null,t,null,n);$.push({i:k-4,x:Oe(u,f)},{i:k-2,x:Oe(c,d)})}else(f||d)&&g.push("translate("+f+t+d+n)}function o(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Oe(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function s(u,c,f,d){u!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Oe(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,d,g,$){if(u!==f||c!==d){var k=g.push(i(g)+"scale(",null,",",null,")");$.push({i:k-4,x:Oe(u,f)},{i:k-2,x:Oe(c,d)})}else(f!==1||d!==1)&&g.push(i(g)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),a(u.translateX,u.translateY,c.translateX,c.translateY,f,d),o(u.rotate,c.rotate,f,d),s(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(g){for(var $=-1,k=d.length,h;++$<k;)f[(h=d[$]).i]=h.x(g);return f.join("")}}}var Vl=Di(Hl,"px, ","px)","deg)"),Kl=Di(zl,", ",")",")"),kt=0,Pt=0,Tt=0,Xi=1e3,un,xt,cn=0,ht=0,bn=0,Ft=typeof performance=="object"&&performance.now?performance:Date,Hi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function sr(){return ht||(Hi(Yl),ht=Ft.now()+bn)}function Yl(){ht=0}function fn(){this._call=this._time=this._next=null}fn.prototype=zi.prototype={constructor:fn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?sr():+n)+(t==null?0:+t),!this._next&&xt!==this&&(xt?xt._next=this:un=this,xt=this),this._call=e,this._time=n,Wn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wn())}};function zi(e,t,n){var r=new fn;return r.restart(e,t,n),r}function Wl(){sr(),++kt;for(var e=un,t;e;)(t=ht-e._time)>=0&&e._call.call(void 0,t),e=e._next;--kt}function Jr(){ht=(cn=Ft.now())+bn,kt=Pt=0;try{Wl()}finally{kt=0,jl(),ht=0}}function Gl(){var e=Ft.now(),t=e-cn;t>Xi&&(bn-=t,cn=e)}function jl(){for(var e,t=un,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:un=n);xt=e,Wn(r)}function Wn(e){if(!kt){Pt&&(Pt=clearTimeout(Pt));var t=e-ht;t>24?(e<1/0&&(Pt=setTimeout(Jr,e-Ft.now()-bn)),Tt&&(Tt=clearInterval(Tt))):(Tt||(cn=Ft.now(),Tt=setInterval(Gl,Xi)),kt=1,Hi(Jr))}}function Zr(e,t,n){var r=new fn;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Ql=nr("start","end","cancel","interrupt"),Jl=[],Vi=0,ei=1,Gn=2,tn=3,ti=4,jn=5,nn=6;function _n(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Zl(e,n,{name:t,index:r,group:i,on:Ql,tween:Jl,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Vi})}function lr(e,t){var n=Ue(e,t);if(n.state>Vi)throw new Error("too late; already scheduled");return n}function We(e,t){var n=Ue(e,t);if(n.state>tn)throw new Error("too late; already running");return n}function Ue(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Zl(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=zi(a,0,n.time);function a(u){n.state=ei,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,f,d,g;if(n.state!==ei)return l();for(c in r)if(g=r[c],g.name===n.name){if(g.state===tn)return Zr(o);g.state===ti?(g.state=nn,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[c]):+c<t&&(g.state=nn,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[c])}if(Zr(function(){n.state===tn&&(n.state=ti,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Gn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Gn){for(n.state=tn,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=g);i.length=f+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=jn,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===jn&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=nn,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Qn(e,t){var n=e.__transition,r,i,a=!0,o;if(!!n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>Gn&&r.state<jn,r.state=nn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function eu(e){return this.each(function(){Qn(this,e)})}function tu(e,t){var n,r;return function(){var i=We(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function nu(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=We(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function ru(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ue(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?tu:nu)(n,e,t))}function ur(e,t,n){var r=e._id;return e.each(function(){var i=We(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ue(i,r).value[t]}}function Ki(e,t){var n;return(typeof t=="number"?Oe:t instanceof dt?ln:(n=dt(t))?(t=n,ln):qi)(e,t)}function iu(e){return function(){this.removeAttribute(e)}}function ou(e){return function(){this.removeAttributeNS(e.space,e.local)}}function au(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function su(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function lu(e,t,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s)))}}function uu(e,t,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s)))}}function cu(e,t){var n=yn(e),r=n==="transform"?Kl:Ki;return this.attrTween(e,typeof t=="function"?(n.local?uu:lu)(n,r,ur(this,"attr."+e,t)):t==null?(n.local?ou:iu)(n):(n.local?su:au)(n,r,t))}function fu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function du(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function hu(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&du(e,a)),n}return i._value=t,i}function mu(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&fu(e,a)),n}return i._value=t,i}function pu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=yn(e);return this.tween(n,(r.local?hu:mu)(r,t))}function vu(e,t){return function(){lr(this,e).delay=+t.apply(this,arguments)}}function gu(e,t){return t=+t,function(){lr(this,e).delay=t}}function yu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?vu:gu)(t,e)):Ue(this.node(),t).delay}function wu(e,t){return function(){We(this,e).duration=+t.apply(this,arguments)}}function bu(e,t){return t=+t,function(){We(this,e).duration=t}}function _u(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wu:bu)(t,e)):Ue(this.node(),t).duration}function ku(e,t){if(typeof t!="function")throw new Error;return function(){We(this,e).ease=t}}function Cu(e){var t=this._id;return arguments.length?this.each(ku(t,e)):Ue(this.node(),t).ease}function Au(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;We(this,e).ease=n}}function Su(e){if(typeof e!="function")throw new Error;return this.each(Au(this._id,e))}function Nu(e){typeof e!="function"&&(e=Ni(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&s.push(l);return new tt(r,this._parents,this._name,this._id)}function Iu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=t[s],u=n[s],c=l.length,f=o[s]=new Array(c),d,g=0;g<c;++g)(d=l[g]||u[g])&&(f[g]=d);for(;s<r;++s)o[s]=t[s];return new tt(o,this._parents,this._name,this._id)}function Mu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Tu(e,t,n){var r,i,a=Mu(t)?lr:We;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function $u(e,t){var n=this._id;return arguments.length<2?Ue(this.node(),n).on.on(e):this.each(Tu(n,e,t))}function Pu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function xu(){return this.on("end.remove",Pu(this._id))}function Eu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=rr(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],l=s.length,u=a[o]=new Array(l),c,f,d=0;d<l;++d)(c=s[d])&&(f=e.call(c,c.__data__,d,s))&&("__data__"in c&&(f.__data__=c.__data__),u[d]=f,_n(u[d],t,n,d,u,Ue(c,n)));return new tt(a,this._parents,t,n)}function Ru(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Si(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l=r[s],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var d=e.call(c,c.__data__,f,l),g,$=Ue(c,n),k=0,h=d.length;k<h;++k)(g=d[k])&&_n(g,t,n,k,d,$);a.push(d),o.push(c)}return new tt(a,o,t,n)}var Lu=Bt.prototype.constructor;function Fu(){return new Lu(this._groups,this._parents)}function Bu(e,t){var n,r,i;return function(){var a=_t(this,e),o=(this.style.removeProperty(e),_t(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function Yi(e){return function(){this.style.removeProperty(e)}}function Ou(e,t,n){var r,i=n+"",a;return function(){var o=_t(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function qu(e,t,n){var r,i,a;return function(){var o=_t(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),_t(this,e))),o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s))}}function Uu(e,t){var n,r,i,a="style."+t,o="end."+a,s;return function(){var l=We(this,e),u=l.on,c=l.value[a]==null?s||(s=Yi(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(o,i=c),l.on=r}}function Du(e,t,n){var r=(e+="")=="transform"?Vl:Ki;return t==null?this.styleTween(e,Bu(e,r)).on("end.style."+e,Yi(e)):typeof t=="function"?this.styleTween(e,qu(e,r,ur(this,"style."+e,t))).each(Uu(this._id,e)):this.styleTween(e,Ou(e,r,t),n).on("end.style."+e,null)}function Xu(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Hu(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Xu(e,o,n)),r}return a._value=t,a}function zu(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Hu(e,t,n==null?"":n))}function Vu(e){return function(){this.textContent=e}}function Ku(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Yu(e){return this.tween("text",typeof e=="function"?Ku(ur(this,"text",e)):Vu(e==null?"":e+""))}function Wu(e){return function(t){this.textContent=e.call(this,t)}}function Gu(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Wu(i)),t}return r._value=e,r}function ju(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Gu(e))}function Qu(){for(var e=this._name,t=this._id,n=Wi(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)if(l=o[u]){var c=Ue(l,t);_n(l,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new tt(r,this._parents,e,n)}function Ju(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var u=We(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),i===0&&a()})}var Zu=0;function tt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Wi(){return++Zu}var Je=Bt.prototype;tt.prototype={constructor:tt,select:Eu,selectAll:Ru,selectChild:Je.selectChild,selectChildren:Je.selectChildren,filter:Nu,merge:Iu,selection:Fu,transition:Qu,call:Je.call,nodes:Je.nodes,node:Je.node,size:Je.size,empty:Je.empty,each:Je.each,on:$u,attr:cu,attrTween:pu,style:Du,styleTween:zu,text:Yu,textTween:ju,remove:xu,tween:ru,delay:yu,duration:_u,ease:Cu,easeVarying:Su,end:Ju,[Symbol.iterator]:Je[Symbol.iterator]};function ec(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var tc={time:null,delay:0,duration:250,ease:ec};function nc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function rc(e){var t,n;e instanceof tt?(t=e._id,e=e._name):(t=Wi(),(n=tc).time=sr(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&_n(l,e,t,u,o,n||nc(l,t));return new tt(r,this._parents,e,t)}Bt.prototype.interrupt=eu;Bt.prototype.transition=rc;const En=e=>()=>e;function ic(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function oc(e){e.stopImmediatePropagation()}function Rn(e){e.preventDefault(),e.stopImmediatePropagation()}var ni={name:"drag"},Ln={name:"space"},vt={name:"handle"},gt={name:"center"};const{abs:ri,max:ke,min:Ce}=Math;function ii(e){return[+e[0],+e[1]]}function oi(e){return[ii(e[0]),ii(e[1])]}var rn={name:"x",handles:["w","e"].map(dn),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Fn={name:"y",handles:["n","s"].map(dn),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Ze={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ai={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},si={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ac={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},sc={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function dn(e){return{type:e}}function lc(e){return!e.ctrlKey&&!e.button}function uc(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function cc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bn(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function fc(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function dc(){return hc(rn)}function hc(e){var t=uc,n=lc,r=cc,i=!0,a=nr("start","brush","end"),o=6,s;function l(h){var S=h.property("__brush",k).selectAll(".overlay").data([dn("overlay")]);S.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ze.overlay).merge(S).each(function(){var v=Bn(this).extent;Ke(this).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1])}),h.selectAll(".selection").data([dn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ze.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var I=h.selectAll(".handle").data(e.handles,function(v){return v.type});I.exit().remove(),I.enter().append("rect").attr("class",function(v){return"handle handle--"+v.type}).attr("cursor",function(v){return Ze[v.type]}),h.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",$).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(h,S,I){h.tween?h.on("start.brush",function(v){c(this,arguments).beforestart().start(v)}).on("interrupt.brush end.brush",function(v){c(this,arguments).end(v)}).tween("brush",function(){var v=this,P=v.__brush,y=c(v,arguments),E=P.selection,R=e.input(typeof S=="function"?S.apply(this,arguments):S,P.extent),b=wn(E,R);function X(w){P.selection=w===1&&R===null?null:b(w),u.call(v),y.brush()}return E!==null&&R!==null?X:X(1)}):h.each(function(){var v=this,P=arguments,y=v.__brush,E=e.input(typeof S=="function"?S.apply(v,P):S,y.extent),R=c(v,P).beforestart();Qn(v),y.selection=E===null?null:E,u.call(v),R.start(I).brush(I).end(I)})},l.clear=function(h,S){l.move(h,null,S)};function u(){var h=Ke(this),S=Bn(this).selection;S?(h.selectAll(".selection").style("display",null).attr("x",S[0][0]).attr("y",S[0][1]).attr("width",S[1][0]-S[0][0]).attr("height",S[1][1]-S[0][1]),h.selectAll(".handle").style("display",null).attr("x",function(I){return I.type[I.type.length-1]==="e"?S[1][0]-o/2:S[0][0]-o/2}).attr("y",function(I){return I.type[0]==="s"?S[1][1]-o/2:S[0][1]-o/2}).attr("width",function(I){return I.type==="n"||I.type==="s"?S[1][0]-S[0][0]+o:o}).attr("height",function(I){return I.type==="e"||I.type==="w"?S[1][1]-S[0][1]+o:o})):h.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(h,S,I){var v=h.__brush.emitter;return v&&(!I||!v.clean)?v:new f(h,S,I)}function f(h,S,I){this.that=h,this.args=S,this.state=h.__brush,this.active=0,this.clean=I}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(h,S){return this.starting?(this.starting=!1,this.emit("start",h,S)):this.emit("brush",h),this},brush:function(h,S){return this.emit("brush",h,S),this},end:function(h,S){return--this.active===0&&(delete this.state.emitter,this.emit("end",h,S)),this},emit:function(h,S,I){var v=Ke(this.that).datum();a.call(h,this.that,new ic(h,{sourceEvent:S,target:l,selection:e.output(this.state.selection),mode:I,dispatch:a}),v)}};function d(h){if(s&&!h.touches||!n.apply(this,arguments))return;var S=this,I=h.target.__data__.type,v=(i&&h.metaKey?I="overlay":I)==="selection"?ni:i&&h.altKey?gt:vt,P=e===Fn?null:ac[I],y=e===rn?null:sc[I],E=Bn(S),R=E.extent,b=E.selection,X=R[0][0],w,C,te=R[0][1],B,j,Me=R[1][0],ie,oe,ge=R[1][1],F,pe,J=0,Z=0,Fe,Pe=P&&y&&i&&h.shiftKey,xe,Ge,U=Array.from(h.touches||[h],H=>{const T=H.identifier;return H=Xr(H,S),H.point0=H.slice(),H.identifier=T,H});Qn(S);var W=c(S,arguments,!0).beforestart();if(I==="overlay"){b&&(Fe=!0);const H=[U[0],U[1]||U[0]];E.selection=b=[[w=e===Fn?X:Ce(H[0][0],H[1][0]),B=e===rn?te:Ce(H[0][1],H[1][1])],[ie=e===Fn?Me:ke(H[0][0],H[1][0]),F=e===rn?ge:ke(H[0][1],H[1][1])]],U.length>1&&je(h)}else w=b[0][0],B=b[0][1],ie=b[1][0],F=b[1][1];C=w,j=B,oe=ie,pe=F;var Ee=Ke(S).attr("pointer-events","none"),ye=Ee.selectAll(".overlay").attr("cursor",Ze[I]);if(h.touches)W.moved=at,W.ended=qt;else{var be=Ke(h.view).on("mousemove.brush",at,!0).on("mouseup.brush",qt,!0);i&&be.on("keydown.brush",Cn,!0).on("keyup.brush",An,!0),yl(h.view)}u.call(S),W.start(h,v.name);function at(H){for(const T of H.changedTouches||[H])for(const O of U)O.identifier===T.identifier&&(O.cur=Xr(T,S));if(Pe&&!xe&&!Ge&&U.length===1){const T=U[0];ri(T.cur[0]-T[0])>ri(T.cur[1]-T[1])?Ge=!0:xe=!0}for(const T of U)T.cur&&(T[0]=T.cur[0],T[1]=T.cur[1]);Fe=!0,Rn(H),je(H)}function je(H){const T=U[0],O=T.point0;var De;switch(J=T[0]-O[0],Z=T[1]-O[1],v){case Ln:case ni:{P&&(J=ke(X-w,Ce(Me-ie,J)),C=w+J,oe=ie+J),y&&(Z=ke(te-B,Ce(ge-F,Z)),j=B+Z,pe=F+Z);break}case vt:{U[1]?(P&&(C=ke(X,Ce(Me,U[0][0])),oe=ke(X,Ce(Me,U[1][0])),P=1),y&&(j=ke(te,Ce(ge,U[0][1])),pe=ke(te,Ce(ge,U[1][1])),y=1)):(P<0?(J=ke(X-w,Ce(Me-w,J)),C=w+J,oe=ie):P>0&&(J=ke(X-ie,Ce(Me-ie,J)),C=w,oe=ie+J),y<0?(Z=ke(te-B,Ce(ge-B,Z)),j=B+Z,pe=F):y>0&&(Z=ke(te-F,Ce(ge-F,Z)),j=B,pe=F+Z));break}case gt:{P&&(C=ke(X,Ce(Me,w-J*P)),oe=ke(X,Ce(Me,ie+J*P))),y&&(j=ke(te,Ce(ge,B-Z*y)),pe=ke(te,Ce(ge,F+Z*y)));break}}oe<C&&(P*=-1,De=w,w=ie,ie=De,De=C,C=oe,oe=De,I in ai&&ye.attr("cursor",Ze[I=ai[I]])),pe<j&&(y*=-1,De=B,B=F,F=De,De=j,j=pe,pe=De,I in si&&ye.attr("cursor",Ze[I=si[I]])),E.selection&&(b=E.selection),xe&&(C=b[0][0],oe=b[1][0]),Ge&&(j=b[0][1],pe=b[1][1]),(b[0][0]!==C||b[0][1]!==j||b[1][0]!==oe||b[1][1]!==pe)&&(E.selection=[[C,j],[oe,pe]],u.call(S),W.brush(H,v.name))}function qt(H){if(oc(H),H.touches){if(H.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else wl(H.view,Fe),be.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Ee.attr("pointer-events","all"),ye.attr("cursor",Ze.overlay),E.selection&&(b=E.selection),fc(b)&&(E.selection=null,u.call(S)),W.end(H,v.name)}function Cn(H){switch(H.keyCode){case 16:{Pe=P&&y;break}case 18:{v===vt&&(P&&(ie=oe-J*P,w=C+J*P),y&&(F=pe-Z*y,B=j+Z*y),v=gt,je(H));break}case 32:{(v===vt||v===gt)&&(P<0?ie=oe-J:P>0&&(w=C-J),y<0?F=pe-Z:y>0&&(B=j-Z),v=Ln,ye.attr("cursor",Ze.selection),je(H));break}default:return}Rn(H)}function An(H){switch(H.keyCode){case 16:{Pe&&(xe=Ge=Pe=!1,je(H));break}case 18:{v===gt&&(P<0?ie=oe:P>0&&(w=C),y<0?F=pe:y>0&&(B=j),v=vt,je(H));break}case 32:{v===Ln&&(H.altKey?(P&&(ie=oe-J*P,w=C+J*P),y&&(F=pe-Z*y,B=j+Z*y),v=gt):(P<0?ie=oe:P>0&&(w=C),y<0?F=pe:y>0&&(B=j),v=vt),ye.attr("cursor",Ze[I]),je(H));break}default:return}Rn(H)}}function g(h){c(this,arguments).moved(h)}function $(h){c(this,arguments).ended(h)}function k(){var h=this.__brush||{selection:null};return h.extent=oi(t.apply(this,arguments)),h.dim=e,h}return l.extent=function(h){return arguments.length?(t=typeof h=="function"?h:En(oi(h)),l):t},l.filter=function(h){return arguments.length?(n=typeof h=="function"?h:En(!!h),l):n},l.touchable=function(h){return arguments.length?(r=typeof h=="function"?h:En(!!h),l):r},l.handleSize=function(h){return arguments.length?(o=+h,l):o},l.keyModifiers=function(h){return arguments.length?(i=!!h,l):i},l.on=function(){var h=a.on.apply(a,arguments);return h===a?l:h},l}function mc(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function hn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Ct(e){return e=hn(Math.abs(e)),e?e[1]:NaN}function pc(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function vc(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var gc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mn(e){if(!(t=gc.exec(e)))throw new Error("invalid format: "+e);var t;return new cr({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}mn.prototype=cr.prototype;function cr(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}cr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function yc(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Gi;function wc(e,t){var n=hn(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Gi=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+hn(e,Math.max(0,t+a-1))[0]}function li(e,t){var n=hn(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ui={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:mc,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>li(e*100,t),r:li,s:wc,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ci(e){return e}var fi=Array.prototype.map,di=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function bc(e){var t=e.grouping===void 0||e.thousands===void 0?ci:pc(fi.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?ci:vc(fi.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=mn(f);var d=f.fill,g=f.align,$=f.sign,k=f.symbol,h=f.zero,S=f.width,I=f.comma,v=f.precision,P=f.trim,y=f.type;y==="n"?(I=!0,y="g"):ui[y]||(v===void 0&&(v=12),P=!0,y="g"),(h||d==="0"&&g==="=")&&(h=!0,d="0",g="=");var E=k==="$"?n:k==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",R=k==="$"?r:/[%p]/.test(y)?o:"",b=ui[y],X=/[defgprs%]/.test(y);v=v===void 0?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function w(C){var te=E,B=R,j,Me,ie;if(y==="c")B=b(C)+B,C="";else{C=+C;var oe=C<0||1/C<0;if(C=isNaN(C)?l:b(Math.abs(C),v),P&&(C=yc(C)),oe&&+C==0&&$!=="+"&&(oe=!1),te=(oe?$==="("?$:s:$==="-"||$==="("?"":$)+te,B=(y==="s"?di[8+Gi/3]:"")+B+(oe&&$==="("?")":""),X){for(j=-1,Me=C.length;++j<Me;)if(ie=C.charCodeAt(j),48>ie||ie>57){B=(ie===46?i+C.slice(j+1):C.slice(j))+B,C=C.slice(0,j);break}}}I&&!h&&(C=t(C,1/0));var ge=te.length+C.length+B.length,F=ge<S?new Array(S-ge+1).join(d):"";switch(I&&h&&(C=t(F+C,F.length?S-B.length:1/0),F=""),g){case"<":C=te+C+B+F;break;case"=":C=te+F+C+B;break;case"^":C=F.slice(0,ge=F.length>>1)+te+C+B+F.slice(ge);break;default:C=F+te+C+B;break}return a(C)}return w.toString=function(){return f+""},w}function c(f,d){var g=u((f=mn(f),f.type="f",f)),$=Math.max(-8,Math.min(8,Math.floor(Ct(d)/3)))*3,k=Math.pow(10,-$),h=di[8+$/3];return function(S){return g(k*S)+h}}return{format:u,formatPrefix:c}}var Qt,ji,Qi;_c({thousands:",",grouping:[3],currency:["$",""]});function _c(e){return Qt=bc(e),ji=Qt.format,Qi=Qt.formatPrefix,Qt}function kc(e){return Math.max(0,-Ct(Math.abs(e)))}function Cc(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ct(t)/3)))*3-Ct(Math.abs(e)))}function Ac(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ct(t)-Ct(e))+1}function fr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const hi=Symbol("implicit");function Ji(){var e=new Or,t=[],n=[],r=hi;function i(a){let o=e.get(a);if(o===void 0){if(r!==hi)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Or;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Ji(t,n).unknown(r)},fr.apply(i,arguments),i}function Zi(){var e=Ji().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,s=!1,l=0,u=0,c=.5;delete e.unknown;function f(){var d=t().length,g=i<r,$=g?i:r,k=g?r:i;a=(k-$)/Math.max(1,d-l+u*2),s&&(a=Math.floor(a)),$+=(k-$-a*(d-l))*c,o=a*(1-l),s&&($=Math.round($),o=Math.round(o));var h=La(d).map(function(S){return $+a*S});return n(g?h.reverse():h)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,s=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(d){return arguments.length?(s=!!d,f()):s},e.padding=function(d){return arguments.length?(l=Math.min(1,u=+d),f()):l},e.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},e.paddingOuter=function(d){return arguments.length?(u=+d,f()):u},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return Zi(t(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(c)},fr.apply(f(),arguments)}function Sc(e){return function(){return e}}function Nc(e){return+e}var mi=[0,1];function yt(e){return e}function Jn(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Sc(isNaN(t)?NaN:.5)}function Ic(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Mc(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=Jn(i,r),a=n(o,a)):(r=Jn(r,i),a=n(a,o)),function(s){return a(r(s))}}function Tc(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Jn(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(s){var l=Ma(e,s,1,r)-1;return a[l](i[l](s))}}function $c(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Pc(){var e=mi,t=mi,n=wn,r,i,a,o=yt,s,l,u;function c(){var d=Math.min(e.length,t.length);return o!==yt&&(o=Ic(e[0],e[d-1])),s=d>2?Tc:Mc,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?a:(l||(l=s(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((u||(u=s(t,e.map(r),Oe)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,Nc),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Xl,c()},f.clamp=function(d){return arguments.length?(o=d?!0:yt,c()):o!==yt},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(a=d,f):a},function(d,g){return r=d,i=g,c()}}function xc(){return Pc()(yt,yt)}function Ec(e,t,n,r){var i=Ea(e,t,n),a;switch(r=mn(r==null?",f":r),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Cc(i,o))&&(r.precision=a),Qi(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Ac(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=kc(i))&&(r.precision=a-(r.type==="%")*2);break}}return ji(r)}function Rc(e){var t=e.domain;return e.ticks=function(n){var r=t();return xa(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return Ec(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],s=r[a],l,u,c=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);c-- >0;){if(u=Ci(o,s,n),u===l)return r[i]=o,r[a]=s,t(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function eo(){var e=xc();return e.copy=function(){return $c(e,eo())},fr.apply(e,arguments),Rc(e)}function wt(e,t,n){this.k=e,this.x=t,this.y=n}wt.prototype={constructor:wt,scale:function(e){return e===1?this:new wt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new wt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new wt(1,0,0);wt.prototype;function On(e,t,n){const r=new K(10).pow(t-n);return new K(1.0001).pow(e).mul(r)}const Lc=At({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""}},setup(e,t){const n=_(1),r=Et(),i=me(()=>r),a=$t(),{TickMath:o}=a,s=()=>{if(n.value<.015625)return;const g=n.value/2;n.value=g,u(e.poolInfo,g)},l=()=>{if(n.value>32)return;const g=n.value*2;n.value=g,u(e.poolInfo,g)},u=(g,$=1)=>{if(g&&g.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const k=Number(e.poolInfo.current_tick_index);let h=k+100*$,S=k-100*$,I,v;e.maxPrice==="\u221E"?v=0:e.direction?v=o.priceToTickIndex(new K(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):v=o.priceToTickIndex(new K(1/Number(e.minPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals),e.minPrice==="0"?I=0:e.direction?I=o.priceToTickIndex(new K(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):I=o.priceToTickIndex(new K(1/Number(e.maxPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals);let P=0;if(k>=I&&k<=v){const B=k-I,j=v-k;P=Math.max(Math.abs(B),Math.abs(j))}else k<I?P=Math.abs(v-k):P=Math.abs(k-I);h=k+P+100*$,S=k-P-100*$;const y=Number(g.liquidity)/Math.pow(10,6),E=e.tickList,R=[],b=[];let X={};for(let B=0;B<E.length;B++)X=E[B],X.index<=k&&X.index>=S?R.unshift(X):X.index>k&&X.index<=h&&b.push(X);let w=Number(y);for(let B=0;B<R.length;B++)R[B].liquityAmount=w-Number(R[B].liquidityGross.toString()/Math.pow(10,6));let C=Number(y);for(let B=0;B<b.length;B++)b[B].liquityAmount=C-Number(b[B].liquidityGross.toString()/Math.pow(10,6));let te=[];te=[...R.reverse(),{index:k,liquityAmount:Number(y)},...b],e.direction||(te=te.reverse()),f(te,S,h,I,v,k)}};let c=_(!1);er(()=>{document.body.clientWidth<750?c.value=!1:c.value=!0,window.onresize=()=>{document.body.clientWidth<750?c.value=!1:c.value=!0,u(e.poolInfo,n.value)}});const f=(g,$,k,h,S,I)=>{const v={top:30,right:35,bottom:20,left:55};let P,y;c.value?(P=460-v.left-v.right,y=205-v.top-v.bottom):(P=340-v.left-v.right,y=205-v.top-v.bottom);const R=(k-$)/4;let b=[$,$+R,$+2*R,k-R,k];const X=b[0]-(b[1]-b[0])/3,w=b[4]+(b[4]-b[3])/3,C=P/(w-X);Ke("#chart").selectAll("*").remove();const te=Ke("#chart").attr("width",P+v.left+v.right).attr("height",y+v.top+v.bottom).append("g").attr("transform",`translate(${v.left},${v.right})`),B=Ra(g,function(U){return Number(U.liquityAmount)})||0,j=eo().range([0,y]).domain([B,0]);Zi().rangeRound([0,P]).padding(.1),te.append("g").attr("id","barsBox").selectAll("rect").data(g).enter().append("rect").attr("x",function(U,W){return W===0?0:e.direction?Math.abs(g[W-1].index-X)*C:Math.abs(w-g[W-1].index)*C}).attr("y",function(U,W){return W===0?0:e.direction?j(g[W-1].liquityAmount):j(U.liquityAmount)}).attr("width",function(U,W){return W===0&&g.length===1&&U.liquityAmount>0?P:W===0?0:e.direction?Math.abs(U.index-g[W-1].index)*C:Math.abs(g[W-1].index-U.index)*C}).attr("height",function(U,W){return W===0&&g.length===1&&U.liquityAmount>0?y:W===0?0:e.direction?y-j(g[W-1].liquityAmount):y-j(U.liquityAmount)}).attr("fill","#279477").attr("class","bars");const oe=te.append("g");oe.append("line").attr("x1",0).attr("y1",155).attr("x2",P).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const ge=oe.append("g");let F=0;if(e.direction){for(let U=0;U<b.length;U++){const W=et(String(On(b[U],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),On(b[U],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()>1e3?4:6)||"0",Ee=Math.abs(b[U]-X)*C;let ye=0;for(let be=0;be<W.length;be++)W[be]==="1"?ye+=4.02:W[be]==="."?ye+=2.64:W[be]==="7"?ye+=5.48:ye+=6;ge.append("text").text(W).attr("x",Ee-ye/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}F=Math.abs(I-X)*C}else{for(let U=b.length-1;U>=0;U--){const W=et(String(1/On(b[U],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),6)||"0",Ee=Math.abs(b[U]-w)*C;let ye=0;for(let be=0;be<W.length;be++)W[be]==="1"?ye+=4.02:W[be]==="."?ye+=2.64:W[be]==="7"?ye+=5.48:ye+=6;ge.append("text").text(W).attr("x",Ee-ye/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}F=Math.abs(I-w)*C}te.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8").attr("transform","translate("+F+", 0)");const J=te.append("g").attr("id","left-handle"),Z=te.append("g").attr("id","right-handle");i.value.theme=="default"?(J.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),J.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),J.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#68FFD8"),J.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#68FFD8"),Z.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Z.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),Z.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#68FFD8"),Z.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#68FFD8")):(J.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),J.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 20) rotate(180)"),J.append("text").text("Min").attr("fill","#B5B8C2").attr("x",-24).attr("y",14).attr("font-size","12px"),J.append("rect").attr("width",1).attr("height",6).attr("x",-32).attr("y",7).attr("fill","#76C8FF"),J.append("rect").attr("width",1).attr("height",8).attr("x",-30).attr("y",6).attr("fill","#76C8FF"),Z.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Z.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 0)"),Z.append("text").text("Max").attr("fill","#B5B8C2").attr("x",3).attr("y",14).attr("font-size","12px"),Z.append("rect").attr("width",1).attr("height",6).attr("x",31).attr("y",7).attr("fill","#76C8FF"),Z.append("rect").attr("width",1).attr("height",8).attr("x",29).attr("y",6).attr("fill","#76C8FF"));const Fe=dc().extent([[0,0],[P,y]]).handleSize(30).on("end",Ge);let Pe,xe;if(e.direction?(Pe=h<X?-100:Math.abs(h-X)*C,xe=S<X?-100:Math.abs(S-X)*C):(xe=h<X?-100:Math.abs(w-h)*C,Pe=S<X?-100:Math.abs(w-S)*C),e.minPrice==="0"&&(Pe=0),e.maxPrice==="\u221E"&&(xe=P),te.append("g").attr("class","brush").call(Fe).call(Fe.move,[Pe,xe]),xe-10<=Pe){s();return}J.attr("transform","translate("+Pe+", 0)"),Z.attr("transform","translate("+xe+", 0)");function Ge(U){if(!U.sourceEvent||!U.selection||e.currentPriceTab!=="Custom")return;J.attr("transform","translate("+U.selection[0]+", 0)"),Z.attr("transform","translate("+U.selection[1]+", 0)");let W,Ee;e.direction?(W=o.tickIndexToPrice(U.selection[0]/C+X,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),Ee=o.tickIndexToPrice(U.selection[1]/C+X,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()):(W=1/o.tickIndexToPrice(w-U.selection[0]/C,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),Ee=1/o.tickIndexToPrice(w-U.selection[1]/C,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),t.emit("onChangeMinPrice",String(et(String(W),6))),t.emit("onChangeMaxPrice",String(et(String(Ee),6)))}Ke(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C")};_(""),ae(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab],([g,$,k,h])=>{g&&$&&k&&(k=="\u221E"||Number(k)>Number($))&&(h!=="Custom"?(n.value=32,u(g,32)):u(g,n.value))},{immediate:!0});const d=_(!0);return ae(()=>e.chartLoading,(g,$)=>{g!==$&&(d.value=g)},{immediate:!0,deep:!0}),{store:i,loading:d,zoomOut:s,zoomIn:l}}});const Fc=e=>(vn("data-v-a5c67851"),e=e(),gn(),e),Bc={class:"chart-box"},Oc={class:"chart"},qc={class:"zoom"},Uc=Fc(()=>m("svg",{id:"chart"},null,-1));function Dc(e,t,n,r,i,a){return M(),L("div",Bc,[So(m("div",Oc,[m("div",qc,[m("div",{class:"amplification",onClick:t[0]||(t[0]=(...o)=>e.zoomOut&&e.zoomOut(...o))}),m("div",{class:"narrow",onClick:t[1]||(t[1]=(...o)=>e.zoomIn&&e.zoomIn(...o))})]),Uc],512),[[No,!e.loading]])])}const Xc=St(Lc,[["render",Dc],["__scopeId","data-v-a5c67851"]]),Hc=At({components:{Modal:Io},props:{},setup(){const e=_({}),t=Et(),n=me(()=>t),r=me(()=>n.value.chainName),i=me(()=>Mo[r.value]);let a=_(!0);const o=Zn(),s=me(()=>o),l=vi();return ae(()=>s.value.currentPositionInfo,u=>{u&&(e.value=u)}),{addCommom:Jt,router:l,pools:s,positionInfo:e,decimalFormat:et,rateChange:a,config:i,importIcon:pn,store:n}}});const kn=e=>(vn("data-v-4f1083fb"),e=e(),gn(),e),zc=kn(()=>m("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Vc={class:"rejected-container"},Kc={class:"coin-pair"},Yc=kn(()=>m("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Wc=[Yc],Gc=["href"],jc=kn(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-jump"})],-1)),Qc=[jc],Jc={class:"coin-pair"},Zc=["src"],ef=["src"],tf={class:"fee"},nf={class:"status"},rf={class:"min-and-max"},of={key:0},af={class:"text"},sf={key:0,src:wi,alt:""},lf={key:1,src:bi,alt:""},uf={class:"text"},cf={key:1},ff={class:"text"},df={key:0,src:wi,alt:""},hf={key:1,src:bi,alt:""},mf={class:"text"},pf=kn(()=>m("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),vf=[pf];function gf(e,t,n,r,i,a){const o=pi,s=Ho,l=tr,u=To("Modal");return M(),Ve(u,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:t[3]||(t[3]=c=>e.$emit("onClose"))},{closeIcon:Ae(()=>[zc]),default:Ae(()=>[m("div",Vc,[le(o,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ae(()=>[m("div",Kc,[Re(A(e.positionInfo.tokenName)+" ",1),(M(),L("svg",{class:"icon","aria-hidden":"true",onClick:t[0]||(t[0]=c=>e.store.copy(e.positionInfo.nftHash))},Wc)),m("a",{href:`https://explorer.aptoslabs.com/token/${e.positionInfo.nftHash}/0?network=${e.config.network}`,target:"_blank"},Qc,8,Gc)])]),_:1},8,["loading"]),m("div",{class:Te(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[le(o,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ae(()=>[m("div",Jc,[m("div",null,[m("img",{src:e.fromCoinUrl||e.positionInfo.token_a.logoURI||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,Zc),m("img",{src:e.toCoinUrl||e.positionInfo.token_b.logoURI||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,ef)]),m("span",null,A(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" - "+A(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)]),m("div",tf,A(e.$t("common.fee"))+" "+A(e.positionInfo.fee)+"%",1)]),_:1},8,["loading"])],2),m("div",nf,[le(s,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),le(o,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ae(()=>[m("div",rf,[e.rateChange?(M(),L("div",of,[m("div",af,A(e.addCommom(e.decimalFormat(String(e.positionInfo&&e.positionInfo.minPrice),6),6)),1),e.store.theme=="default"?(M(),L("img",sf)):(M(),L("img",lf)),m("div",uf,A(e.positionInfo&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.addCommom(e.decimalFormat(String(e.positionInfo&&e.positionInfo.maxPrice),6),6))+" "+A(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol)+" per "+A(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol),1)])):(M(),L("div",cf,[m("div",ff,A(e.addCommom(e.decimalFormat(String(1/Number(e.positionInfo&&e.positionInfo.maxPrice)),6),6)),1),e.store.theme=="default"?(M(),L("img",df)):(M(),L("img",hf)),m("div",mf,A(e.positionInfo&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.addCommom(e.decimalFormat(String(1/Number(e.positionInfo&&e.positionInfo.minPrice)),6),6))+" "+A(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" per "+A(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)])),(M(),L("svg",{class:"icon-change","aria-hidden":"true",onClick:t[1]||(t[1]=c=>e.rateChange=!e.rateChange)},vf))])]),_:1},8,["loading"])]),le(l,{onClick:t[2]||(t[2]=c=>e.router.push(`/position-detail/1?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}`))},{default:Ae(()=>[Re(A(e.$t("newAdd.viewDetail")),1)]),_:1})]),_:1},8,["title"])}const yf=St(Hc,[["render",gf],["__scopeId","data-v-4f1083fb"]]),wf=At({setup(){const{t:e,locale:t}=$o(),n=Po(),r=me(()=>n),i=Et(),a=_(20),o=_(0),s=_(null),l=_(!1),u=_(!1),c=_(!1),f=_(!1),d=_("fromCoin"),g=_(""),$=_(""),k=_(!1),h=_(!0),S=_(!1),I=_(!1),v=_(!0),P=_(!1),y=_(""),E=_(""),R=_(""),b=_(""),X=_(""),w=_(""),C=_(!1),te=_(!1),B=_(!1);_(!1);const j=_("0.01% "+e("common.feeTier")),Me=_(0),ie=_(!0),oe=_(!1),ge=_([]),F=_(""),pe=_(7),J=_("Estimated APR"),Z=_([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),Fe=_(!0),Pe=p=>{pe.value=p.num},xe=()=>{Fe.value=!Fe.value},Ge=_([]),U=()=>{o.value=0,I.value=!0,Dt.updateCurrentPools(x.value.poolAddress),setTimeout(()=>{I.value=!1},1e3),Mt()},W=me(()=>Number(R.value)>Number(b.value)),Ee=p=>{S.value=p,R.value="0",b.value="\u221E"},ye=p=>{switch(p){case .01:return"Best for very stable pairs.";case .05:return"Best for stable pairs.";case .3:return"Best for most pairs.";case 1:return"Best for exotic pairs."}},be=me(()=>{if(ve.value.newTokenObj&&T.value&&O.value){const p=Object.values(ve.value.pools).filter(q=>{var z,Y,G,Q;return q.token_a.address.toUpperCase()===((z=T.value.address)==null?void 0:z.toUpperCase())&&q.token_b.address.toUpperCase()===((Y=O.value.address)==null?void 0:Y.toUpperCase())||q.token_b.address.toUpperCase()===((G=T.value.address)==null?void 0:G.toUpperCase())&&q.token_a.address.toUpperCase()===((Q=O.value.address)==null?void 0:Q.toUpperCase())}),N=[];return p.forEach(q=>{N.push({label:q.fee+"% "+e("common.feeTier"),title:q.fee+"% fee",address:q.address,fee:q.fee,text:ye(q.fee)})}),N}}),at=me(()=>i.slippage),je=me(()=>!T.value||!O.value),qt=me(()=>x.value&&x.value.is_pause?"Pool Closed":je.value?e("newAdd.invalidPair"):x.value?Number(y.value)>Number(nt.value)?e("button.insufficientBalance",{name:T.value.symbol}):Number(E.value)>Number(rt.value)?e("button.insufficientBalance",{name:O.value.symbol}):P.value?e("modal.selectTokenModalTitle"):b.value!=="\u221E"&&Number(R.value)>=Number(b.value)?e("newAdd.invalidRange"):!Number(y.value)&&!Number(E.value)?e("button.enterAmount"):e("button.addLiquidity"):e("button.poolNotFound")),Cn=Et(),An=me(()=>Cn),H=vi(),T=_(),O=_();er(()=>{dr(),document.body.clientWidth<750?Fe.value=!1:Fe.value=!0}),xo(()=>{clearInterval(s.value)});const De=p=>{R.value=p},to=p=>{b.value=p},no=()=>{ie.value=!0;const p=T.value;if(T.value=O.value,O.value=p,h.value=!h.value,y.value=E.value,ie.value=!1,R.value!==""&&b.value!==""&&R.value!=="0"&&b.value!=="\u221E"){const N=R.value,q=b.value;(!oe.value||!h.value)&&(R.value=String(1/Number(q)),b.value=String(1/Number(N)));const z=X.value,Y=w.value;X.value=String(1/Number(Y)),w.value=String(1/Number(z)),In({key:F.value,...gr.value[F.value]}),oe.value=!1}};ae([R,b],([p],[N])=>{x.value&&go(x.value),Mt(),x.value&&b.value!=="\u221E"&&Number(R.value)>=Number(b.value)?B.value=!0:B.value=!1});const ro=p=>{var N,q,z,Y;d.value=p,p==="fromCoin"?(g.value=((N=O.value)==null?void 0:N.address)||"",$.value=((q=T.value)==null?void 0:q.address)||""):(g.value=((z=T.value)==null?void 0:z.address)||"",$.value=((Y=O.value)==null?void 0:Y.address)||""),k.value=!0},io=p=>{P.value=!1,d.value==="fromCoin"?(O.value&&p.address.toLowerCase()===(O==null?void 0:O.value.address.toLowerCase())&&(O.value=null),T.value=p):(T.value&&p.address.toLowerCase()===(T==null?void 0:T.value.address.toLowerCase())&&(T.value=null),O.value=p),k.value=!1},oo=p=>{p==="fromCoin"?(v.value=!0,y.value=nt.value>0?T.value.symbol=="APT"?new K(Number(nt.value)).sub(new K(.1)).lt(new K(0))?"0":new K(Number(nt.value)).sub(new K(.1)).toString():String(nt.value):""):(v.value=!1,E.value=rt.value>0?O.value.symbol=="APT"?new K(Number(rt.value)).sub(new K(.1)).lt(new K(0))?"0":new K(Number(rt.value)).sub(new K(.1)).toString():String(rt.value):"")},ao=p=>{p==="fromCoin"?(v.value=!0,y.value=nt.value>0?Mr(new K(Number(nt.value)).div(2).toString(),T.value.decimals).toString():""):(v.value=!1,E.value=rt.value>0?Mr(new K(Number(rt.value)).div(2).toString(),O.value.decimals).toString():"")},dr=()=>{s.value=setInterval(()=>{u.value||o.value<a.value&&(o.value+=1,o.value===a.value&&(x.value.poolAddress&&Dt.updateCurrentPools(x.value.poolAddress),o.value=0))},1e3)};ae(y,(p,N)=>{p==""&&v.value&&(E.value=""),p&&v.value&&Mt()}),ae(E,(p,N)=>{p==""&&!v.value&&(y.value=""),p&&!v.value&&Mt()});const so=()=>{T.value=null,O.value=null,R.value="0",b.value="0",y.value="",E.value="",P.value=!0,j.value="",C.value=!1,Se.value=!0,Ne.value=!0,ie.value=!1},hr=_(!1),{setIsShowSuccess:mr,setIsShowRejected:pr,setIsShowWaiting:Ut,setTransactionDesc:lo,setTransactionTxid:vr,setPositiomNum:uo}=i,Be=Eo(),Dt=Zn(),ve=me(()=>Dt);ae(()=>ve.value.newTokenObj,p=>{Er(p)||(Be&&Be.query&&Be.query.tokena?T.value=Kt(p,Be.query.tokena):T.value=Kt(p,"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT"),Be&&Be.query&&Be.query.tokenb?O.value=Kt(p,Be.query.tokenb):O.value=Kt(p,"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDC"))},{immediate:!0});const Nt=_({}),Se=_(!1),Ne=_(!1),Sn=_(),Nn=_(),Qe=$t(),It=_(),Xt=_(),Ht=_(""),zt=_(""),Mt=async()=>{var Ie,_e;if(!x.value||!y.value&&!E.value&&!R.value&&!b.value)return;const{TickUtil:p,TickMath:N,getNearestTickByTick:q}=$t(),z=x.value.token_a.decimals,Y=x.value.token_b.decimals;let G,Q,V,D,ce,ne,fe,ue;const de=x.value.current_tick_index,we=x.value.priceConfigObj;let re;if(x.value.token_a.address.toLowerCase()===T.value.address.toLowerCase()&&x.value.token_b.address.toLowerCase()===O.value.address.toLowerCase()?re=!0:re=!1,R.value==="0"&&b.value==="\u221E"?(V=p.getMinIndex(x.value.tickSpacing),D=p.getMaxIndex(x.value.tickSpacing),ce=N.tickIndexToSqrtPriceX64(V),ne=N.tickIndexToSqrtPriceX64(D)):F.value=="Custom"?(re?(G=Number(R.value),Q=Number(b.value)):(G=1/Number(b.value),Q=1/Number(R.value)),fe=N.priceToTickIndex(new K(G),z,Y),ue=N.priceToTickIndex(new K(Q),z,Y),V=q(fe,x.value.tickSpacing),D=q(ue,x.value.tickSpacing),ce=N.priceToSqrtPriceX64(new K(G),z,Y),ne=N.priceToSqrtPriceX64(new K(Q),z,Y)):(V=we[F.value].lower,D=we[F.value].upper,ce=N.tickIndexToSqrtPriceX64(V),ne=N.tickIndexToSqrtPriceX64(D)),b.value!=="\u221E"&&V>=D){Se.value=!0,y.value="",Ne.value=!0,E.value="";return}if(b.value==="\u221E"||de>V&&de<D){Se.value=!1,Ne.value=!1;let se;if(y.value||E.value){if(v.value){const He=new K(y.value).mul(Math.pow(10,T.value.decimals)).toString();se=new ze(He)}else{const He=new K(E.value).mul(Math.pow(10,O.value.decimals)).toString();se=new ze(He)}const{liquidityAmount:he,tokenMaxA:it,tokenMaxB:Xe,tokenMaxAOrigin:lt,tokenMaxBOrigin:ut}=Qe.estLiquidityAndcoinAmountFromOneAmounts({tokenA:x.value.token_a,tokenB:x.value.token_b,lowerTick:V,upperTick:D,coinAmount:se,iscoinA:re?v.value:!v.value,roundUp:!0,slippage:Number(at.value)/100,curSqrtPrice:new ze(x.value.current_sqrt_price)});Nt.value={liquidityAmount:he,tokenMaxA:it,tokenMaxB:Xe,tokenMaxAOrigin:lt,tokenMaxBOrigin:ut},re?v.value?E.value=Number(Xe)>0?Xe:"":y.value=Number(it)>0?it:"":v.value?E.value=it:y.value=Xe}}else if(de>=D){if(re?y.value="":E.value="",Se.value=re,Ne.value=!re,y.value||E.value){let se;if(re){const he=new K(E.value).mul(Math.pow(10,(Ie=O.value)==null?void 0:Ie.decimals)).toString();se=new ze(he),Nt.value={liquidityAmount:Tr(ce,ne,se),tokenMaxA:0,tokenMaxB:E.value}}else{const he=new K(y.value).mul(Math.pow(10,(_e=T.value)==null?void 0:_e.decimals)).toString();se=new ze(he),Nt.value={liquidityAmount:Tr(ce,ne,se),tokenMaxA:0,tokenMaxB:y.value}}}}else if(de<=V){if(Se.value=!re,Ne.value=re,re?E.value="":y.value="",y.value||E.value){let se;if(re){const he=new K(y.value).mul(Math.pow(10,T.value.decimals)).toString();se=new ze(he),Nt.value={liquidityAmount:$r(ce,ne,se),tokenMaxA:y.value,tokenMaxB:0}}else{const he=new K(E.value).mul(Math.pow(10,O.value.decimals)).toString();se=new ze(he),Nt.value={liquidityAmount:$r(ce,ne,se),tokenMaxA:E.value,tokenMaxB:0}}}}else Se.value=!0,y.value="",Ne.value=!0,E.value=""},Vt=_(0);ae(()=>Be.query,p=>{p&&p.fee&&(Vt.value=p.fee)},{immediate:!0});const x=me(()=>{var N,q,z,Y,G;const p=(N=Be==null?void 0:Be.query)==null?void 0:N.fee;if(ve.value.newTokenObj&&T.value&&O.value&&p){let Q=null;for(const V in ve.value.poolsObj){const D=ve.value.poolsObj[V];(D.token_a.address.toUpperCase()===((q=T.value.address)==null?void 0:q.toUpperCase())&&D.token_b.address.toUpperCase()===((z=O.value.address)==null?void 0:z.toUpperCase())&&D.fee==Vt.value*100||D.token_b.address.toUpperCase()===((Y=T.value.address)==null?void 0:Y.toUpperCase())&&D.token_a.address.toUpperCase()===((G=O.value.address)==null?void 0:G.toUpperCase())&&D.fee==Vt.value*100)&&(Q=D)}return Q&&!Er(Q)?Q:null}return null}),gr=_({}),co=async(p,N)=>{if(p){const{TickMath:q,getNearestTickByTick:z}=$t();N&&(ie.value=!0),p.token_a.address.toLowerCase()===T.value.address.toLowerCase()&&p.token_b.address.toLowerCase()===O.value.address.toLowerCase()?h.value=!0:h.value=!1,oe.value=!0;const Y=p.token_a.decimals,G=p.token_b.decimals;Se.value=!1,Ne.value=!1,j.value=p.fee+"% "+e("common.feeTier");const Q=p.current_tick_index;It.value=et(q.sqrtPriceX64ToPrice(p.current_sqrt_price,Y,G).toString(),6),Xt.value=et(String(1/It.value),6);const V=await Qe.getTicks(p);if(ge.value=Qe.getTickDataFromUrlData(V),N){let D=p.priceConfigObj;const ce=Q-Number(x.value.type=="unstable"?x.value.tickSpacing*2:x.value.tickSpacing*3),ne=Q+Number(x.value.type=="unstable"?x.value.tickSpacing*2:x.value.tickSpacing*3);D["Full Range"]={lower:-443630,upper:443630},D.Custom={lower:ce,upper:ne};const fe=[];for(let ue in D)fe.push({...D[ue],key:ue});if(Ge.value=fe,p.type=="stable"?F.value="suggested":F.value="passive",gr.value=D,In({key:F.value,...D[F.value]}),h.value){const ue=D[F.value].lower,de=D[F.value].upper,we=q.tickIndexToPrice(ue,Y,G).toString(),re=q.tickIndexToPrice(de,Y,G).toString();X.value=String(we),R.value=String(we),w.value=String(re),b.value=String(re)}else{const ue=D[F.value].lower,de=D[F.value].upper,we=q.tickIndexToPrice(ue,Y,G).toString(),re=q.tickIndexToPrice(de,Y,G).toString();X.value=String(1/Number(re)),R.value=String(1/Number(re)),w.value=String(1/Number(we)),b.value=String(1/Number(we))}}ie.value=!1}},yr=_();ae(()=>ve.value.RATES,p=>{p&&(yr.value=p)},{immediate:!0}),ae(()=>[x.value,R.value,b.value],([p,N,q])=>{p?fo():p&&yr?(Ht.value="--",zt.value="--"):(Ht.value="",zt.value="")});const fo=async()=>{if(!R.value&&!b.value)return;const{TickUtil:p,TickMath:N,getNearestTickByTick:q}=$t(),z=x.value.token_a.decimals,Y=x.value.token_b.decimals;let G,Q,V,D,ce,ne,fe,ue=1,de=1;const we=x.value.current_tick_index,re=x.value.priceConfigObj;if(x.value.token_a.address.toLowerCase()===T.value.address.toLowerCase()&&x.value.token_b.address.toLowerCase()===O.value.address.toLowerCase()?fe=!0:fe=!1,R.value==="0"&&b.value==="\u221E"?(V=p.getMinIndex(x.value.tickSpacing),D=p.getMaxIndex(x.value.tickSpacing),N.tickIndexToSqrtPriceX64(V),N.tickIndexToSqrtPriceX64(D)):F.value=="Custom"?(fe?(G=Number(R.value),Q=Number(b.value)):(G=1/Number(b.value),Q=1/Number(R.value)),ce=N.priceToTickIndex(new K(G),z,Y),ne=N.priceToTickIndex(new K(Q),z,Y),V=q(ce,x.value.tickSpacing),D=q(ne,x.value.tickSpacing),N.priceToSqrtPriceX64(new K(G),z,Y),N.priceToSqrtPriceX64(new K(Q),z,Y)):(V=re[F.value].lower,D=re[F.value].upper,N.tickIndexToSqrtPriceX64(V),N.tickIndexToSqrtPriceX64(D)),b.value==="\u221E"||we>V&&we<D){let Xe;if(v.value){const He=new K(1).mul(Math.pow(10,T.value.decimals)).toString();Xe=new ze(He)}else{const He=new K(1).mul(Math.pow(10,O.value.decimals)).toString();Xe=new ze(He)}const{tokenMaxA:lt,tokenMaxB:ut}=await Qe.estLiquidityAndcoinAmountFromOneAmounts({tokenA:x.value.token_a,tokenB:x.value.token_b,lowerTick:V,upperTick:D,coinAmount:Xe,iscoinA:fe?v.value:!v.value,roundUp:!0,slippage:Number(at.value)/100,curSqrtPrice:new ze(x.value.current_sqrt_price)});fe?v.value?de=Number(ut)>0?ut:"":ue=Number(lt)>0?lt:"":v.value?de=lt:ue=ut}else we>=D?fe?(de=1,ue=0):(ue=1,de=0):we<=V&&(fe?(de=0,ue=1):(de=1,ue=0));const Ie=ue?Number(ue):0,_e=de?Number(de):0,se=_e+Number(fe?Ie*It.value:Ie*Xt.value),he=((fe?It.value*Ie:Xt.value*Ie)/se*100).toFixed(0),it=(_e/se*100).toFixed(0);Ht.value=he,zt.value=it};ae(()=>x.value,(p,N)=>{p?(!N||p.poolAddress!==N.poolAddress||p.current_sqrt_price!==N.current_sqrt_price)&&co(p,!N||p.poolAddress!==N.poolAddress):(R.value="0",b.value="0",y.value="",E.value="",j.value="",C.value=!1,Se.value=!1,Ne.value=!1)},{immediate:!0,deep:!0});const nt=me(()=>r.value.assets&&T.value&&r.value.assets[T.value.address]?Rr(r.value.assets[T.value.address].balance,T.value.decimals):0),rt=me(()=>r.value.assets&&O.value&&r.value.assets[O.value.address]?Rr(r.value.assets[O.value.address].balance,O.value.decimals):0),ho=async()=>{var ne,fe,ue,de,we,re;hr.value=!1,ve.value.currentPositionInfo={},vr(""),lo(e("tips.increaseLiquiditySuccess",{from:Se.value?"":`${y.value} ${(ne=T.value)==null?void 0:ne.symbol}`,and:!Se.value&&!Ne.value?"and":"",to:Ne.value?"":`${E.value} ${(fe=O.value)==null?void 0:fe.symbol}`})),Ut(!0);const p=h.value?v.value:!v.value,N=x.value.priceConfigObj;let q,z,Y,G,Q,V;const D=x.value.token_a.decimals,ce=x.value.token_b.decimals;R.value==="0"&&b.value==="\u221E"?(Y=Pr.getMinIndex(x.value.tickSpacing),G=Pr.getMaxIndex(x.value.tickSpacing)):F.value=="Custom"?(h.value?(q=Number(R.value),z=Number(b.value)):(q=1/Number(b.value),z=1/Number(R.value)),Q=pt.priceToTickIndex(new K(q),D,ce),V=pt.priceToTickIndex(new K(z),D,ce),Y=xr(Q,x.value.tickSpacing),G=xr(V,x.value.tickSpacing)):(Y=N[F.value].lower,G=N[F.value].upper);try{const Ie=await Qe.getAddLiquidityTransactionPayload({pool:{poolAddress:x.value.poolAddress,token_a:x.value.token_a,token_b:x.value.token_b},amount:v.value?y.value:E.value,fix_amount_a:p,tick_lower:Y,tick_upper:G,index:0,slippage:Number(at.value)/100,roundUp:!0});let _e;if(_e=await r.value.currentWallet.signAndSubmitTransaction(Ie),_e&&_e.hash){vr(_e.hash),Ut(!1),mr(!0);const se={title:e("button.addLiquidity"),desc:e("tips.addLiquiditySuccessText",{from:Se.value?"":`${y.value} ${(ue=T.value)==null?void 0:ue.symbol}`,and:!Se.value&&!Ne.value?"and":"",to:Ne.value?"":`${E.value} ${(de=O.value)==null?void 0:de.symbol}`}),hash:_e.hash,tit:`Opened Position: ${x.value.symbol}`,text:`Deopsit ${Se.value?"":`${y.value} ${(we=T.value)==null?void 0:we.symbol}`} ${!Se.value&&!Ne.value?"and":""} ${Ne.value?"":`${E.value} ${(re=O.value)==null?void 0:re.symbol}`}`};Qe.showTransitionPending(se);const he=await Qe.watchTransaction(se,!0);he.status&&(mr(!1),ve.value.setCurrentPositionLoading(!0),ve.value.setCurrentPositionInfo(he.nftInfo[0].data.id.creator,he.nftInfo[0].data.id.collection,he.nftInfo[0].data.name),l.value=!0,setTimeout(()=>{Dt.updateCurrentPools(x.value.poolAddress),Qe.getAccount(r.value.address)},1e3)),uo()}else Ut(!1),pr(!0);y.value="",E.value=""}catch{y.value="",E.value="",Ut(!1),pr(!0)}},mo=p=>{switch(p){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"Full Range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"Custom":return e("newAdd.customTips")}},po=p=>{switch(p){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"Full Range":return e("newAdd.fullRange");case"Custom":return e("newAdd.custom")}},In=p=>{F.value=p.key;const N=x.value.token_a.decimals,q=x.value.token_b.decimals,{lower:z,upper:Y}=p,G=pt.tickIndexToPrice(z,N,q).toString(),Q=pt.tickIndexToPrice(Y,N,q).toString();if(p.key=="Full Range"){Sn.value=z,Nn.value=Y,Ee(!0);return}h.value?(X.value=String(G),R.value=String(G),w.value=String(Q),b.value=String(Q),Sn.value=z,Nn.value=Y):(X.value=String(1/Number(Q)),R.value=String(1/Number(Q)),w.value=String(1/Number(G)),b.value=String(1/Number(G)),Sn.value=pt.priceToTickIndex(new K(1/Number(Q)),N,q),Nn.value=pt.priceToTickIndex(new K(1/Number(G)),N,q)),Mt()},wr=_(""),br=_(""),_r=_(""),Mn=me(()=>i),vo=(p,N)=>p&&N?ot(zo.plus(Tn(p),Tn(N)),2)+"%":p,kr=p=>{let N=0;return p&&p.forEach(q=>{N+=Tn(String(q))}),String(ot(String(N),2))},Cr=_([]),Ar=_([]),Sr=_(""),Nr=_("");ae(()=>[Mn.value.newTopPoolsObj,x.value,ve.value.newTokenObj],async([p,N,q])=>{if(p&&N&&p[N.poolAddress]&&q){const z=p[N.poolAddress];wr.value=z&&z.apr_7day,Nr.value=kr(z&&z.rewarder_apr),Sr.value=vo(z&&z.apr_7day,z&&kr(z.rewarder_apr)),br.value=Jt(z.tvl_in_usd,2),_r.value=Jt(z.vol_in_usd_24h,2);const Y=N&&N.rewarder_infos||[],G=[];Y.forEach((V,D)=>{const ce=q[V.coinAddress].decimals,ne=et(V.emissionsEveryDay/Math.pow(10,ce),4),fe=et(Number(ne)*ve.value.RATES[V.coinAddress].price,4);G.push({...V,logoUrl:q[V.coinAddress].logoURI,day:ne,dayUSD:fe,symbol:q[V.coinAddress].symbol,rewarder_display:N&&N[`rewarder_display${D+1}`]?N[`rewarder_display${D+1}`]:!1})}),Cr.value=G.filter(V=>V.rewarder_display);const Q=[];G.forEach((V,D)=>{Q.push({...V,symbol:q[V.coinAddress].symbol,rewarderApr:z.rewarder_apr[D]})}),Ar.value=Q.filter(V=>V.rewarder_display)}},{immediate:!0,deep:!0});const Ir=_({}),go=async p=>{let N;p.token_a.address.toLowerCase()===T.value.address.toLowerCase()&&p.token_b.address.toLowerCase()===O.value.address.toLowerCase()?N=!0:N=!1;const q=N?Number(R.value):b.value=="\u221E"?1/2**50:1/Number(b.value),z=isNaN(Number(b.value))||b.value=="\u221E"?2**50:N?Number(b.value):1/Number(R.value);let Y=[];Y=Object.fromEntries(Mn.value.addressHistTokens[p.poolAddress].data.map(He=>[He.key,He.value]));const G=Number(Number(Y.before_7_d_contract_price_lowest)),Q=Number(Number(Y.before_7_d_contract_price_highest)),V=ve.value.newTokenObj,D=await Qe.getEstPositionAPRWithMulti(q,z,G,Q),ce=Number(D.toString()),ne=Mn.value.newTopPoolsObj[p.poolAddress],fe=ne.apr_7day?Number(ne.apr_7day.substring(0,ne.apr_7day.length-1)):0,ue=ne.rewarder_apr[0]?Number(ne.rewarder_apr[0].substring(0,ne.rewarder_apr[0].length-1)):0,de=ne.rewarder_apr[1]?Number(ne.rewarder_apr[1].substring(0,ne.rewarder_apr[1].length-1)):0,we=ne.rewarder_apr[2]?Number(ne.rewarder_apr[2].substring(0,ne.rewarder_apr[2].length-1)):0,re=Number(ce*fe),Ie=Number(ce*ue),_e=Number(ce*de),se=Number(ce*we),he=re+(p.rewarder_display1?Ie:0)+(p.rewarder_display2?_e:0)+(p.rewarder_display3?se:0),it=p.rewarder_infos[0]?V[p.rewarder_infos[0].coinAddress].symbol:"--",Xe=p.rewarder_infos[1]?V[p.rewarder_infos[1].coinAddress].symbol:"--",lt=p.rewarder_infos[2]?V[p.rewarder_infos[2].coinAddress].symbol:"--",ut={aprFee:re==1/0||isNaN(re)?0:re,rewardAprList:[{rewarder_name:it,rewarder_apr:Ie==1/0||isNaN(Ie)?0:Ie,styleName:"one",rewarder_display:p.rewarder_display1},{rewarder_name:Xe,rewarder_apr:_e==1/0||isNaN(_e)?0:_e,styleName:"two",rewarder_display:p.rewarder_display2},{rewarder_name:lt,rewarder_apr:se==1/0||isNaN(se)?0:se,styleName:"three",rewarder_display:p.rewarder_display2}],aprPercentageTotal:he==1/0||isNaN(he)||he===0?0:he,aprPercentage:ot(re/he,2),is_display_rewarder:p.is_display_rewarder};Ir.value=ut},yo=me(()=>ve.value.newTokenObj&&T.value.address&&ve.value.newTokenObj[T.value.address]&&ve.value.newTokenObj[T.value.address].logoURI),wo=me(()=>ve.value.newTokenObj&&O.value.address&&ve.value.newTokenObj[O.value.address]&&ve.value.newTokenObj[O.value.address].logoURI),bo=p=>{j.value=p.label,Vt.value=p.fee/100};let st={};ae(()=>ve.value.RATES,p=>{p&&(st=p)},{immediate:!0});const _o=me(()=>new K(ot(Number(y.value)*Number(st&&st[T.value.address]&&st[T.value.address].price),2)).plus(ot(Number(E.value)*Number(st&&st[O.value.address]&&st[O.value.address].price),2)));return{fixD:ot,totalAmount:_o,halfBtnSelect:ao,selectFee:bo,isViewDetail:l,addCommom:Jt,fromCoinUrl:yo,toCoinUrl:wo,t:e,wallet:r,toAdd:ho,chartLoading:ie,currentTick:Me,tickList:ge,poolInfo:x,storeIndex:An,importIcon:pn,refresh:I,addLiquidityBtnText:qt,slippage:at,isShowSwapSetting:c,autoRefreshTime:a,countdown:o,setMarketTimer:dr,marketTimer:s,loading:u,fromCoin:T,toCoin:O,openCoinSelect:ro,onCoinSelect:io,existingCoins:g,lastSelectCoin:$,currentCoinKey:d,showCoinSelect:k,fromCoinAmount:y,toCoinAmount:E,maxBtnSelect:oo,fixedFromCoin:v,isShowLiquidityModal:hr,direct:h,toggle:no,edit:C,inputValue:j,feeTierList:be,minPrice:R,maxPrice:b,invalidPriceRange:W,defaultMinPrice:X,defaultMaxPrice:w,priceRangeChangeMin:De,priceRangeChangeMax:to,toFullRange:Ee,unilateral:f,clearAll:so,clickClear:P,positionError:B,positionTips:te,router:H,clickRefresh:U,fromCoinBlance:nt,toCoinBlance:rt,showToCoinLock:Ne,showFromCoinLock:Se,currentPriceReverse:Xt,currentPrice:It,getPirceText:mo,currentPriceTab:F,currentPriceTabList:Ge,getPirceKey:po,priceTab:In,apr:wr,liquidityTvl:br,vol24:_r,fromCoinRatio:Ht,toCoinRatio:zt,aprRewardsParameter:pe,aprRewardsDateList:Z,aprTab:Pe,reviseValue:xe,label:Fe,aprTitle:J,rewarderInfo:Cr,rewarderArr:Ar,rewardApr:Sr,aprPercentageObj:Ir,rewardAprList:Nr}}}),bf="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAJFBMVEVHcEwlW04mW04oXlEmW04SHx4jR0B2/9wQFBMVJyVk17szaV2jJaSaAAAABHRSTlMA8K8m/cUwkQAAAL5JREFUSMdjYMAKmBWFDBgIAUMXF2GCilQy2pyQ+Swu2EBHhyNIkgnIdMCjyCUUCMJgilxDMUFKRpsblBmCU9EUFxdPgooiU9ymElSEBEYVDR1FkaumElYUVp46qmjAFTGruE0lqMgQkaGnpYFAdvk2MJ2JpEgFUTQsL0cGVUiKRKCFDLGKiLKOKIdTGASjSYWWiogqMEYL1lFFWJoRTgYEFU0Bt6QIKEoBt6SwN43QWlJEKSKx4UZ+ExDUmAQAo9rc9CAs4WAAAAAASUVORK5CYII=",_f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAeUExURUdwTANNcARNcAdKcgEdMQRNcBM8V3bI/2Gq2ihWdudYHvAAAAAEdFJOUwDwryb9xTCRAAAAuklEQVRIx2NgwAqYFYUMGAgBw9BQYYKKVFPcgpD5rKHYgItLIEiSCcgMwKMIiFxcXGGKQlwwQWqKWxiU6YpTEdCEEIKKXFLDXAgrQjJ0VNHQUdRBhCK38pRRRQOuiFk1jLAiQ0SGdksDgczyaWA6BUmRKqJoaC9HBhVIikShhQyxioiyjiiHUxgEo0mFloqIKjBGC9ZRRViaEUEGBBW5gltSBBSFgltS2JtGaC0pohSR2HAjvwkIakwCANqYbmgtLE7YAAAAAElFTkSuQmCC",kf=""+new URL("img-no-data_2x.e925467a.png",import.meta.url).href,Cf=""+new URL("img-no-data_2x.8bc9afa2.png",import.meta.url).href;const mt=e=>(vn("data-v-bc6ac164"),e=e(),gn(),e),Af={class:"pools-container"},Sf={class:"title"},Nf={class:"left"},If={class:"right title-right"},Mf=mt(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Tf={class:"content"},$f={class:"content-left"},Pf={class:"content-left-bg"},xf={class:"content-left-title"},Ef={class:"coin-select"},Rf={class:"pool-fee-header"},Lf={key:0,class:"fee-container"},Ff=["onClick"],Bf={key:0,src:Vo,alt:""},Of={key:1,src:Ko,alt:""},qf={class:"deposit-title"},Uf={class:"card-container"},Df={class:"card-item"},Xf={key:0,class:"unilateral"},Hf={key:0,src:gi,alt:""},zf={key:1,src:yi,alt:""},Vf={key:2},Kf={class:"card-item"},Yf={key:0,class:"unilateral"},Wf={key:0,src:gi,alt:""},Gf={key:1,src:yi,alt:""},jf={key:2},Qf={key:0,class:"deposit-ratio"},Jf={class:"lebal"},Zf=mt(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-information"})],-1)),ed={class:"text"},td={key:1,class:"deposit-ratio totalAmount"},nd={class:"lebal"},rd={class:"text"},id=mt(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-add"})],-1)),od={class:"pc-network"},ad={class:"content-right"},sd={class:"content-right-title"},ld=mt(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-information"})],-1)),ud={key:0,class:"price-tab"},cd=["onClick"],fd={key:1,class:"current-price"},dd={key:0,class:"coin"},hd={key:1,class:"coin"},md={key:2,class:"toggle"},pd=["src"],vd=["src"],gd={key:3,class:"position-tips"},yd=["src"],wd={class:"tips"},bd={key:4,class:"position-tips"},_d=["src"],kd={class:"error"},Cd={class:"d3-chart-box"},Ad={key:0},Sd={key:0,class:"noDataImg",src:kf},Nd={key:1,class:"noDataImg",src:Cf},Id={key:2,class:"not-select-mask"},Md={key:0,class:"pool-info"},Td=mt(()=>m("use",{"xlink:href":"#icon-icon_on"},null,-1)),$d=[Td],Pd={key:0,class:"info-block-container"},xd={class:"info-block"},Ed={class:"leabl"},Rd={class:"text"},Ld={class:"apr-hover-content"},Fd={class:"info-block"},Bd={class:"leabl"},Od={class:"text"},qd={class:"info-block"},Ud={class:"leabl"},Dd={class:"text"},Xd={class:"info-block"},Hd={class:"leabl"},zd={class:"text"},Vd={key:1,class:"pool-rewards-info"},Kd={class:"rewards-list-all"},Yd=mt(()=>m("div",{class:"icon-sign"},null,-1)),Wd=["src"],Gd={class:"rewards-value"},jd=mt(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-add"})],-1)),Qd={class:"h5-network"};function Jd(e,t){var I,v,P,y,E,R,b,X;const n=ko,r=Co,i=na,a=Fo,o=Ro,s=tr,l=qo,u=ka,c=Xc,f=Lo,d=Uo,g=Do,$=Bo,k=Oo,h=Xo,S=yf;return M(),L("div",Af,[le(n),m("div",Sf,[m("div",Nf,[m("span",null,A(e.$t("common.concentratedLiquidity")),1)]),m("div",If,[m("span",{class:"clear",onClick:t[0]||(t[0]=(...w)=>e.clearAll&&e.clearAll(...w))},A(e.$t("common.clearAll")),1),m("div",{class:"slippage-icon",onClick:t[1]||(t[1]=w=>e.isShowSwapSetting=!0)},[Mf,m("span",null,A(e.slippage)+"%",1)]),le(r,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:t[2]||(t[2]=w=>e.clickRefresh())},null,8,["loading","auto-refresh-time","countdown"])])]),m("div",Tf,[m("div",$f,[m("div",Pf,[m("div",xf,A(e.$t("common.selectPool")),1),m("div",Ef,[le(i,{"coin-icon":e.fromCoin?e.fromCoin.logoURI:"","coin-name":e.fromCoin&&e.fromCoin.symbol,coin:e.fromCoin,onClick:t[3]||(t[3]=w=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),le(i,{"coin-icon":e.toCoin?e.toCoin.logoURI:"","coin-name":e.toCoin&&e.toCoin.symbol,coin:e.toCoin,onClick:t[4]||(t[4]=w=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),m("div",{class:Te(["pool-fee",e.edit?"pool-fee-edit":""])},[m("div",Rf,[m("span",{class:Te(e.clickClear||!e.poolInfo?"fee-span":"")},A(e.clickClear||!e.poolInfo?"Fee tier":e.inputValue),3),ee("",!0)]),e.edit?(M(),L("div",Lf,[(M(!0),L(Yt,null,$n(e.feeTierList,(w,C)=>(M(),L("div",{key:C,class:Te(e.inputValue.includes(w.label)?"fee-item fee-item-active":"fee-item"),onClick:te=>e.selectFee(w)},[m("p",null,A(w.title),1),m("span",null,A(w.text),1),e.storeIndex.theme=="default"?(M(),L("img",Bf)):(M(),L("img",Of))],10,Ff))),128))])):ee("",!0)],2),m("div",qf,A(e.$t("newAdd.depositAmounts")),1),m("div",Uf,[m("div",Df,[le(a,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[6]||(t[6]=w=>e.fromCoinAmount=w),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[7]||(t[7]=w=>e.maxBtnSelect("fromCoin")),onOnHalf:t[8]||(t[8]=w=>e.halfBtnSelect("fromCoin")),onOnInput:t[9]||(t[9]=w=>{e.fromCoinAmount=w,e.fixedFromCoin=!0}),onOnSelect:t[10]||(t[10]=w=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock||!e.poolInfo?(M(),L("div",Xf,[m("div",null,[e.storeIndex.theme=="default"?(M(),L("img",Hf)):(M(),L("img",zf)),e.fromCoin&&e.toCoin&&e.poolInfo?(M(),L("p",Vf,A(e.$t("tips.marketprice")),1)):ee("",!0)])])):ee("",!0)]),m("div",Kf,[le(a,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[11]||(t[11]=w=>e.toCoinAmount=w),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[12]||(t[12]=w=>e.maxBtnSelect("toCoin")),onOnHalf:t[13]||(t[13]=w=>e.halfBtnSelect("toCoin")),onOnInput:t[14]||(t[14]=w=>{e.toCoinAmount=w,e.fixedFromCoin=!1}),onOnSelect:t[15]||(t[15]=w=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock||!e.poolInfo?(M(),L("div",Yf,[m("div",null,[e.storeIndex.theme=="default"?(M(),L("img",Wf)):(M(),L("img",Gf)),e.fromCoin&&e.toCoin&&e.poolInfo?(M(),L("p",jf,A(e.$t("tips.marketprice")),1)):ee("",!0)])])):ee("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(M(),L("img",{key:0,class:"add",src:bf,alt:"",onClick:t[16]||(t[16]=(...w)=>e.toggle&&e.toggle(...w))})):ee("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(M(),L("img",{key:1,class:"add",src:_f,alt:"",onClick:t[17]||(t[17]=(...w)=>e.toggle&&e.toggle(...w))})):ee("",!0)]),e.poolInfo?(M(),L("div",Qf,[m("div",Jf,[Re(A(e.$t("newAdd.depositRatio"))+" ",1),le(o,{placement:"bottom","arrow-point-at-center":""},{title:Ae(()=>[m("span",null,A(e.$t("newAdd.depositRatioTips")),1)]),default:Ae(()=>[Zf]),_:1})]),m("div",ed,A(e.fromCoinRatio!=="--"?e.fromCoinRatio+"%":"--")+" "+A(e.fromCoinRatio!=="--"?e.fromCoin&&e.fromCoin.symbol:"")+" / "+A(e.toCoinRatio!=="--"?e.toCoinRatio+"%":"--")+" "+A(e.toCoinRatio!=="--"?e.toCoin&&e.toCoin.symbol:""),1)])):ee("",!0),e.fromCoinAmount&&e.toCoinAmount?(M(),L("div",td,[m("div",nd,A(e.$t("newAdd.totalAmount")),1),m("div",rd," $"+A(e.fixD(e.totalAmount,2)),1)])):ee("",!0)]),le(s,{disabled:e.wallet.connected?!e.fromCoinAmount&&!e.toCoinAmount||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||Number(e.toCoinAmount)>Number(e.toCoinBlance)||e.addLiquidityBtnText!==e.$t("button.addLiquidity")||e.poolInfo.is_pause:!1,class:"big-btn",onClick:t[18]||(t[18]=w=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:Ae(()=>[id,m("span",null,A(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),m("div",od,[le(l)])]),m("div",ad,[m("div",sd,[Re(A(e.$t("newAdd.selectRange"))+" ",1),le(o,{placement:"bottom","arrow-point-at-center":""},{title:Ae(()=>[m("span",null,A(e.$t("newAdd.selectRangeTips")),1)]),default:Ae(()=>[ld]),_:1})]),m("div",{class:Te(e.clickClear||!e.fromCoin||!e.toCoin||!e.poolInfo?"content-right-bg content-right-bg-height":"content-right-bg")},[e.poolInfo?(M(),L("div",ud,[(M(!0),L(Yt,null,$n(e.currentPriceTabList,w=>(M(),L("div",{key:w,class:Te(["price-item",{"price-item-active":w.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:C=>e.priceTab(w)},[le(o,{placement:"bottom","arrow-point-at-center":""},{title:Ae(()=>[m("span",null,A(e.getPirceText(w.key)),1)]),default:Ae(()=>[Re(" "+A(e.getPirceKey(w.key)),1)]),_:2},1024)],10,cd))),128))])):ee("",!0),e.poolInfo?(M(),L("div",fd,[e.fromCoin&&e.toCoin&&e.direct?(M(),L("div",dd,[m("span",null,A(e.$t("common.currentPrice")),1),Re(" "+A(e.addCommom(e.currentPrice,6))+" "+A((I=e.toCoin)==null?void 0:I.symbol)+" per "+A((v=e.fromCoin)==null?void 0:v.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(M(),L("div",hd,[m("span",null,A(e.$t("common.currentPrice")),1),Re(" "+A(e.addCommom(e.currentPriceReverse,6))+" "+A((P=e.toCoin)==null?void 0:P.symbol)+" per "+A((y=e.fromCoin)==null?void 0:y.symbol),1)])):ee("",!0),e.fromCoin&&e.toCoin?(M(),L("div",md,[m("div",{class:Te(e.direct?"item active-item":"item"),onClick:t[19]||(t[19]=w=>e.direct?"":e.toggle())},[m("img",{src:e.direct?e.fromCoin.logoURI:e.toCoin.logoURI,alt:""},null,8,pd),Re(" "+A(e.direct?(E=e.fromCoin)==null?void 0:E.symbol:(R=e.toCoin)==null?void 0:R.symbol),1)],2),m("div",{class:Te(e.direct?"item ":"item active-item"),onClick:t[20]||(t[20]=w=>e.direct?e.toggle():"")},[m("img",{src:e.direct?e.toCoin.logoURI:e.fromCoin.logoURI,alt:""},null,8,vd),Re(" "+A(e.direct?(b=e.toCoin)==null?void 0:b.symbol:(X=e.fromCoin)==null?void 0:X.symbol),1)],2)])):ee("",!0)])):ee("",!0),e.poolInfo?(M(),Ve(u,{key:2,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):ee("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(M(),L("div",gd,[m("img",{src:e.importIcon("/image/icon-tips@2x.png"),alt:""},null,8,yd),m("p",wd,A(e.$t("tips.positionTips")),1)])):ee("",!0),e.positionError&&!e.clickClear&&e.poolInfo?(M(),L("div",bd,[m("img",{src:e.importIcon("/image/icon-tips-error@2x.png"),alt:""},null,8,_d),m("p",kd,A(e.$t("tips.positionError")),1)])):ee("",!0),m("div",Cd,[(e.clickClear||!e.poolInfo)&&!e.chartLoading?(M(),L("div",Ad,[e.storeIndex.theme=="default"?(M(),L("img",Sd)):(M(),L("img",Nd)),m("p",null,A(e.$t("newAdd.positionAppear")),1)])):ee("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(M(),Ve(c,{key:1,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","onOnChangeMinPrice","onOnChangeMaxPrice"])):ee("",!0),e.currentPriceTab!=="Custom"?(M(),L("div",Id)):ee("",!0),e.chartLoading?(M(),Ve(f,{key:3})):ee("",!0)]),e.poolInfo&&Number(e.minPrice)<Number(e.maxPrice)||e.maxPrice=="\u221E"?(M(),Ve(d,{key:5,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"apr-percentage-obj":e.aprPercentageObj,"name-tab":"deposit",onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","apr-percentage-obj","onAprTab"])):ee("",!0)],2),e.poolInfo?(M(),L("div",Md,[e.apr?(M(),L(Yt,{key:0},[m("div",{class:Te(e.label?"pool-info-border pool-info-title":"pool-info-title")},[Re(A(e.$t("newAdd.poolInfo"))+" ",1),(M(),L("svg",{class:Te(e.label?"show-icon icon":"icon"),"aria-hidden":"true",onClick:t[21]||(t[21]=w=>e.reviseValue())},$d,2))],2),e.label?(M(),L("div",Pd,[m("div",xd,[m("div",Ed,A(e.$t("common.apr")),1),m("div",Rd,[Re(A(e.poolInfo.is_display_rewarder?e.addCommom(e.rewardApr.substring(0,e.rewardApr.length-1),2):e.addCommom(e.apr.substring(0,e.apr.length-1),2))+"% ",1),m("div",Ld,[le(g,{"l-item":{apr:e.apr,aprTotal:e.rewardApr,rewarder_apr:e.rewardAprList,is_display_rewarder:e.poolInfo.is_display_rewarder},"rewarder-info":e.rewarderArr},null,8,["l-item","rewarder-info"])])])]),m("div",Fd,[m("div",Bd,A(e.$t("common.liquidity")),1),m("div",Od,"$"+A(e.liquidityTvl),1)]),m("div",qd,[m("div",Ud,A(e.$t("common.volume24h")),1),m("div",Dd,"$"+A(e.vol24),1)]),m("div",Xd,[m("div",Hd,A(e.$t("newAdd.tickSpacing")),1),m("div",zd,A(e.poolInfo&&e.poolInfo.tick_spacing),1)])])):ee("",!0),e.poolInfo.is_display_rewarder&&e.label&&e.rewarderInfo&&e.rewarderInfo.length>0?(M(),L("div",Vd,[Re(A("Farming Bonus")+" "),m("div",Kd,[(M(!0),L(Yt,null,$n(e.rewarderInfo,w=>(M(),L("div",{key:w,class:Te(["rewards-list",w.day==0?"rewards-none":""])},[Yd,m("img",{src:w.logoUrl,alt:""},null,8,Wd),m("div",Gd,[m("p",null,A(w.day)+" "+A(w.symbol)+" / "+A(e.$t("newAdd.day"))+" ",1)])],2))),128))])])):ee("",!0)],64)):(M(),Ve(f,{key:1}))])):ee("",!0)])]),le(s,{disabled:e.wallet.connected?!e.fromCoinAmount&&!e.toCoinAmount||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||Number(e.toCoinAmount)>Number(e.toCoinBlance)||e.poolInfo.is_pause:!1,class:"big-btn h5-btn",onClick:t[22]||(t[22]=w=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:Ae(()=>[jd,m("span",null,A(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),m("div",Qd,[le(l)]),e.showCoinSelect?(M(),Ve($,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:t[23]||(t[23]=w=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):ee("",!0),e.isShowSwapSetting?(M(),Ve(k,{key:1,onOnClose:t[24]||(t[24]=w=>e.isShowSwapSetting=!1)})):ee("",!0),e.isShowLiquidityModal?(M(),Ve(h,{key:2,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"pool-info":e.poolInfo,onToAdd:e.toAdd,onOnClose:t[25]||(t[25]=w=>e.isShowLiquidityModal=!1)},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","min-price","max-price","current-price","current-price-reverse","pool-info","onToAdd"])):ee("",!0),e.isViewDetail?(M(),Ve(S,{key:3,onOnClose:t[26]||(t[26]=w=>e.isViewDetail=!1)})):ee("",!0)])}const vh=St(wf,[["render",Jd],["__scopeId","data-v-bc6ac164"]]);export{vh as default};
