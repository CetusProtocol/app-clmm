import{_ as co}from"./back.c88bb64f.js";import{_ as fo}from"./refresh-icon.5ec9cd78.js";import{a as vt,i as un,b as gt,o as M,e as E,f as m,h as ee,t as S,p as cn,j as fn,D as G,r as k,w as oe,k as At,l as re,m as ye,q as Se,I as ho,S as rr,s as St,v as le,x as Kn,y as Ae,B as Yn,z as Ht,A as We,C as mo,E as po,M as vo,F as or,G as ar,H as sr,J as go,K as yo,c as Ye,L as wo,N as bo,O as _o,P as ko,Q as Co,R as je,T as yi,U as wi,V as bi,W as st,X as _i,Y as ki,Z as Ot,$ as Ci,a0 as An,a1 as qt,a2 as Sn,a3 as Ao,a4 as So}from"./entry.68f44eae.js";import{_ as Io,a as Mo}from"./coin-select.1cb549a6.js";import{_ as $o}from"./network-tips.93487373.js";/* empty css              */import"./index.b7e7dbe4.js";import{_ as No}from"./apr-tips.8a5c904c.js";import{_ as To}from"./swap-setting.df0995fb.js";import{_ as lr,a as ur,b as Po}from"./img-lock_2x.e236182c.js";import{_ as xo}from"./status-block.91ed07a0.js";import{_ as cr,a as fr}from"./icon-arrow_2x.db44c7c5.js";import{p as Eo}from"./precision.1cd464a0.js";import{_ as Ro,a as Fo}from"./checked.667d8670.js";import"./img-no-Positions_2x.3a4bda32.js";import"./coin-pair-name.bebe9826.js";const Lo=vt({props:{coinName:{type:String,default:""},coinIcon:{type:String,default:""},coin:{type:Object,default:()=>({})}},setup(){return{importIcon:un}}}),Bo=e=>(cn("data-v-5befbffc"),e=e(),fn(),e),Uo={class:"coin-block"},Oo=["src"],qo={class:"coin-info"},Do={class:"symbol"},Xo={class:"name"},zo=Bo(()=>m("div",null,[m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon_on"})])],-1));function Vo(e,t,n,i,r,a){var o;return M(),E("div",Uo,[m("div",null,[e.coinIcon?(M(),E("img",{key:0,src:e.coinIcon||e.importIcon(`/image/coins/${e.coinName.toLowerCase()}.png`)},null,8,Oo)):ee("",!0),m("div",qo,[m("div",Do,S(e.coinName?e.coinName:e.$t("modal.selectTokenModalTitle")),1),m("div",Xo,S((o=e.coin)==null?void 0:o.name),1)])]),zo])}const Ho=gt(Lo,[["render",Vo],["__scopeId","data-v-5befbffc"]]),Ko=-443630;function Ai(e,t){const n=Yo(e),i=(n-Ko)%t;return i>t/2?n-i+t:n-i}const dr=new G("1.0001");function Yo(e){return e.log(dr).toDP(0,G.ROUND_HALF_UP).toNumber()}function Si(e){return dr.pow(e)}const Wo=vt({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object},currentPriceTab:{type:String},loading:{type:Boolean,default:!1}},emits:["onInput"],setup(e,t){const n=k(""),i=k("");let r=k(""),a=k("");const o=()=>{if(Number.isNaN(n.value)||!n.value)return;const f=Ai(new G(n.value),l.value.tickSpacing),d=Si(f+l.value.tickSpacing);if(e.pType=="Min"&&Number(d)>=Number(a.value))return;const p=d;t.emit("onInput",p)},s=()=>{if(Number.isNaN(n.value)||!n.value)return;const f=Ai(new G(n.value),l.value.tickSpacing),d=Si(f-l.value.tickSpacing),p=d;e.pType=="Max"&&Number(d)<=Number(r.value)||t.emit("onInput",p)},u=f=>{let d=f.replace(/[^\d.]/g,"");const p=/^\d+(\.\d+)?$/;d.split(".").length>2&&!p.exec(d)&&(d=d.substr(0,d.length-1)),i.value=d,At(d,6)>0&&t.emit("onInput",String(d))};oe(()=>e.defaultMinPrice,(f,d)=>{f!==d&&(r.value=e.defaultMinPrice)},{immediate:!0}),oe(()=>e.defaultMaxPrice,(f,d)=>{f!==d&&(a.value=e.defaultMaxPrice)},{immediate:!0}),oe(()=>e.inputValue,f=>{if(f&&f!=="0"&&f!=="\u221E"){n.value=f;const p=f.toString().split(".")[1];i.value=f!=="0"&&f!=="\u221E"&&p&&p.length>6?At(f,6):f}else(f=="0"||f=="\u221E")&&(i.value=f)},{immediate:!0});const l=k({});oe(()=>e.poolInfo,(f,d)=>{f&&(l.value=f)},{immediate:!0});const c=k("");return oe(()=>e.currentPriceTab,f=>{c.value=f},{immediate:!0}),{addPrice:o,minusPrice:s,oValue:i,changeValue:u,isDisabled:c}}});const Go={class:"set-price-item"},Qo={class:"title"},Jo={class:"input-box"},jo={key:0,class:"minus-btn"},Zo=["disabled"],ea={key:1,class:"plus-btn"};function ta(e,t,n,i,r,a){const o=ho,s=rr;return M(),E("div",Go,[m("div",Qo,S(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),re(s,{loading:e.loading,active:"",paragraph:!1},{default:ye(()=>[m("div",Jo,[e.isDisabled=="Custom"?(M(),E("a",jo,[m("div",{class:Se(!e.fromCoin&&!e.toCoin?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:t[0]||(t[0]=(...u)=>e.minusPrice&&e.minusPrice(...u))},null,10,Zo)])):ee("",!0),re(o,{id:"pValu",value:e.oValue,"onUpdate:value":t[1]||(t[1]=u=>e.oValue=u),disabled:e.isDisabled!=="Custom",autocomplete:"off",onChange:t[2]||(t[2]=u=>e.changeValue(u.target.value))},null,8,["value","disabled"]),e.isDisabled=="Custom"?(M(),E("a",ea,[m("div",{class:Se(!e.fromCoin&&!e.toCoin?"addDis":"add"),onClick:t[3]||(t[3]=(...u)=>e.addPrice&&e.addPrice(...u))},null,2)])):ee("",!0)])]),_:1},8,["loading"]),m("p",{class:Se(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},S(e.toCoin&&e.toCoin.symbol)+" per "+S(e.fromCoin&&e.fromCoin.symbol),3)])}const Ii=gt(Wo,[["render",ta],["__scopeId","data-v-a39f5669"]]),na=vt({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object},currentPriceTab:{type:String},loading:{type:Boolean,default:!1}},setup(e,t){let n=k(""),i=k(""),r=k(),a=k(!1),o=k(!1);const s=k({}),u=St(),l=le(()=>u);Kn(()=>{n.value=e.min,i.value=e.max}),oe(()=>e.currentPriceTab,(b,h)=>{b!==h&&(r.value=e.currentPriceTab)},{immediate:!0}),oe(()=>e.min,(b,h)=>{b!==h&&(n.value=b)}),oe(()=>e.max,(b,h)=>{b!==h&&(i.value=b)}),oe(()=>e.poolInfo,(b,h)=>{b&&(s.value=b)},{immediate:!0});const c=b=>{n.value=b,t.emit("onChangeMinPrice",b)},f=b=>{i.value=b,t.emit("onChangeMaxPrice",b)};oe(a,(b,h)=>{b!==h&&t.emit("onChangeFullRange",b)});const d=()=>{n.value=e.defaultMinPrice,i.value=e.defaultMaxPrice,o.value=!1,a.value=!1},p=()=>{o.value=!1,n.value="0",i.value="\u221E"};return oe(a,(b,h)=>{b!==h&&t.emit("onChangeFullRange",b)}),{store:l,changeMinPrice:c,changeMaxPrice:f,importIcon:un,resetPrice:d,changeShowUnderStand:()=>{a.value=!a.value,a.value?o.value=!0:d(),o.value||(n.value=e.defaultMinPrice,i.value=e.defaultMaxPrice)},showUnderStand:o,minPrice:n,maxPrice:i,understand:p,isRadio:a,poolInfo:s,currentPriceTab:r}}});const ia={class:"set-price"},ra={class:"card-container"},oa={key:0,class:"card"},aa=["src"],sa={key:1,class:"understand"},la={class:"left"},ua={class:"right"};function ca(e,t,n,i,r,a){const o=Ii,s=Ii,u=Yn;return M(),E("div",ia,[m("div",ra,[e.showUnderStand?(M(),E("div",sa,[m("div",la,[m("p",null,S(e.$t("common.lowerEfficiency")),1),m("p",null,S(e.$t("common.lowerEfficiencyTips")),1)]),m("div",ua,[re(u,{onClick:e.understand},{default:ye(()=>[Ae(S(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(M(),E("div",oa,[re(o,{value:e.minPrice,"onUpdate:value":t[0]||(t[0]=l=>e.minPrice=l),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","onOnInput","onAddValue","onDelValue"]),re(s,{value:e.maxPrice,"onUpdate:value":t[1]||(t[1]=l=>e.maxPrice=l),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","onOnInput","onAddValue","onDelValue"]),m("img",{src:e.importIcon("/image/lmg-line@2x.png"),alt:""},null,8,aa)]))])])}const fa=gt(na,[["render",ca],["__scopeId","data-v-61d59451"]]);function Kt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function da(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hr(e){let t,n,i;e.length!==2?(t=Kt,n=(s,u)=>Kt(e(s),u),i=(s,u)=>e(s)-u):(t=e===Kt||e===da?e:ha,n=e,i=e);function r(s,u,l=0,c=s.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(s[f],u)<0?l=f+1:c=f}while(l<c)}return l}function a(s,u,l=0,c=s.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(s[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(s,u,l=0,c=s.length){const f=r(s,u,l,c-1);return f>l&&i(s[f-1],u)>-i(s[f],u)?f-1:f}return{left:r,center:o,right:a}}function ha(){return 0}function ma(e){return e===null?NaN:+e}const pa=hr(Kt),va=pa.right;hr(ma).center;const ga=va;class Mi extends Map{constructor(t,n=ba){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get($i(this,t))}has(t){return super.has($i(this,t))}set(t,n){return super.set(ya(this,t),n)}delete(t){return super.delete(wa(this,t))}}function $i({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function ya({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function wa({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function ba(e){return e!==null&&typeof e=="object"?e.valueOf():e}const _a=Math.sqrt(50),ka=Math.sqrt(10),Ca=Math.sqrt(2);function Jt(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),o=a>=_a?10:a>=ka?5:a>=Ca?2:1;let s,u,l;return r<0?(l=Math.pow(10,-r)/o,s=Math.round(e*l),u=Math.round(t*l),s/l<e&&++s,u/l>t&&--u,l=-l):(l=Math.pow(10,r)*o,s=Math.round(e/l),u=Math.round(t/l),s*l<e&&++s,u*l>t&&--u),u<s&&.5<=n&&n<2?Jt(e,t,n*2):[s,u,l]}function Aa(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,o]=i?Jt(t,e,n):Jt(e,t,n);if(!(a>=r))return[];const s=a-r+1,u=new Array(s);if(i)if(o<0)for(let l=0;l<s;++l)u[l]=(a-l)/-o;else for(let l=0;l<s;++l)u[l]=(a-l)*o;else if(o<0)for(let l=0;l<s;++l)u[l]=(r+l)/-o;else for(let l=0;l<s;++l)u[l]=(r+l)*o;return u}function Rn(e,t,n){return t=+t,e=+e,n=+n,Jt(e,t,n)[2]}function Sa(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?Rn(t,e,n):Rn(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Ia(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function Ma(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}var $a={value:()=>{}};function Wn(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Yt(n)}function Yt(e){this._=e}function Na(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Yt.prototype=Wn.prototype={constructor:Yt,on:function(e,t){var n=this._,i=Na(e+"",n),r,a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((r=(e=i[a]).type)&&(r=Ta(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(r=(e=i[a]).type)n[r]=Ni(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Ni(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Yt(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function Ta(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Ni(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=$a,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Fn="http://www.w3.org/1999/xhtml";const Ti={svg:"http://www.w3.org/2000/svg",xhtml:Fn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ti.hasOwnProperty(t)?{space:Ti[t],local:e}:e}function Pa(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Fn&&t.documentElement.namespaceURI===Fn?t.createElement(e):t.createElementNS(n,e)}}function xa(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function mr(e){var t=dn(e);return(t.local?xa:Pa)(t)}function Ea(){}function Gn(e){return e==null?Ea:function(){return this.querySelector(e)}}function Ra(e){typeof e!="function"&&(e=Gn(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a=t[r],o=a.length,s=i[r]=new Array(o),u,l,c=0;c<o;++c)(u=a[c])&&(l=e.call(u,u.__data__,c,a))&&("__data__"in u&&(l.__data__=u.__data__),s[c]=l);return new Te(i,this._parents)}function Fa(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function La(){return[]}function pr(e){return e==null?La:function(){return this.querySelectorAll(e)}}function Ba(e){return function(){return Fa(e.apply(this,arguments))}}function Ua(e){typeof e=="function"?e=Ba(e):e=pr(e);for(var t=this._groups,n=t.length,i=[],r=[],a=0;a<n;++a)for(var o=t[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&(i.push(e.call(u,u.__data__,l,o)),r.push(u));return new Te(i,r)}function vr(e){return function(){return this.matches(e)}}function gr(e){return function(t){return t.matches(e)}}var Oa=Array.prototype.find;function qa(e){return function(){return Oa.call(this.children,e)}}function Da(){return this.firstElementChild}function Xa(e){return this.select(e==null?Da:qa(typeof e=="function"?e:gr(e)))}var za=Array.prototype.filter;function Va(){return Array.from(this.children)}function Ha(e){return function(){return za.call(this.children,e)}}function Ka(e){return this.selectAll(e==null?Va:Ha(typeof e=="function"?e:gr(e)))}function Ya(e){typeof e!="function"&&(e=vr(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a=t[r],o=a.length,s=i[r]=[],u,l=0;l<o;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&s.push(u);return new Te(i,this._parents)}function yr(e){return new Array(e.length)}function Wa(){return new Te(this._enter||this._groups.map(yr),this._parents)}function jt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}jt.prototype={constructor:jt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ga(e){return function(){return e}}function Qa(e,t,n,i,r,a){for(var o=0,s,u=t.length,l=a.length;o<l;++o)(s=t[o])?(s.__data__=a[o],i[o]=s):n[o]=new jt(e,a[o]);for(;o<u;++o)(s=t[o])&&(r[o]=s)}function Ja(e,t,n,i,r,a,o){var s,u,l=new Map,c=t.length,f=a.length,d=new Array(c),p;for(s=0;s<c;++s)(u=t[s])&&(d[s]=p=o.call(u,u.__data__,s,t)+"",l.has(p)?r[s]=u:l.set(p,u));for(s=0;s<f;++s)p=o.call(e,a[s],s,a)+"",(u=l.get(p))?(i[s]=u,u.__data__=a[s],l.delete(p)):n[s]=new jt(e,a[s]);for(s=0;s<c;++s)(u=t[s])&&l.get(d[s])===u&&(r[s]=u)}function ja(e){return e.__data__}function Za(e,t){if(!arguments.length)return Array.from(this,ja);var n=t?Ja:Qa,i=this._parents,r=this._groups;typeof e!="function"&&(e=Ga(e));for(var a=r.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var c=i[l],f=r[l],d=f.length,p=es(e.call(c,c&&c.__data__,l,i)),$=p.length,b=s[l]=new Array($),h=o[l]=new Array($),A=u[l]=new Array(d);n(c,f,b,h,A,p,t);for(var I=0,v=0,N,w;I<$;++I)if(N=b[I]){for(I>=v&&(v=I+1);!(w=h[v])&&++v<$;);N._next=w||null}}return o=new Te(o,i),o._enter=s,o._exit=u,o}function es(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ts(){return new Te(this._exit||this._groups.map(yr),this._parents)}function ns(e,t,n){var i=this.enter(),r=this,a=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?a.remove():n(a),i&&r?i.merge(r).order():r}function is(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,a=i.length,o=Math.min(r,a),s=new Array(r),u=0;u<o;++u)for(var l=n[u],c=i[u],f=l.length,d=s[u]=new Array(f),p,$=0;$<f;++$)(p=l[$]||c[$])&&(d[$]=p);for(;u<r;++u)s[u]=n[u];return new Te(s,this._parents)}function rs(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,a=i[r],o;--r>=0;)(o=i[r])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function os(e){e||(e=as);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var o=n[a],s=o.length,u=r[a]=new Array(s),l,c=0;c<s;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Te(r,this._parents).order()}function as(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ss(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ls(){return Array.from(this)}function us(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null}function cs(){let e=0;for(const t of this)++e;return e}function fs(){return!this.node()}function ds(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],a=0,o=r.length,s;a<o;++a)(s=r[a])&&e.call(s,s.__data__,a,r);return this}function hs(e){return function(){this.removeAttribute(e)}}function ms(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ps(e,t){return function(){this.setAttribute(e,t)}}function vs(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function gs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ys(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ws(e,t){var n=dn(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?ms:hs:typeof t=="function"?n.local?ys:gs:n.local?vs:ps)(n,t))}function wr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function bs(e){return function(){this.style.removeProperty(e)}}function _s(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ks(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Cs(e,t,n){return arguments.length>1?this.each((t==null?bs:typeof t=="function"?ks:_s)(e,t,n==null?"":n)):ht(this.node(),e)}function ht(e,t){return e.style.getPropertyValue(t)||wr(e).getComputedStyle(e,null).getPropertyValue(t)}function As(e){return function(){delete this[e]}}function Ss(e,t){return function(){this[e]=t}}function Is(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ms(e,t){return arguments.length>1?this.each((t==null?As:typeof t=="function"?Is:Ss)(e,t)):this.node()[e]}function br(e){return e.trim().split(/^|\s+/)}function Qn(e){return e.classList||new _r(e)}function _r(e){this._node=e,this._names=br(e.getAttribute("class")||"")}_r.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function kr(e,t){for(var n=Qn(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Cr(e,t){for(var n=Qn(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function $s(e){return function(){kr(this,e)}}function Ns(e){return function(){Cr(this,e)}}function Ts(e,t){return function(){(t.apply(this,arguments)?kr:Cr)(this,e)}}function Ps(e,t){var n=br(e+"");if(arguments.length<2){for(var i=Qn(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Ts:t?$s:Ns)(n,t))}function xs(){this.textContent=""}function Es(e){return function(){this.textContent=e}}function Rs(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Fs(e){return arguments.length?this.each(e==null?xs:(typeof e=="function"?Rs:Es)(e)):this.node().textContent}function Ls(){this.innerHTML=""}function Bs(e){return function(){this.innerHTML=e}}function Us(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Os(e){return arguments.length?this.each(e==null?Ls:(typeof e=="function"?Us:Bs)(e)):this.node().innerHTML}function qs(){this.nextSibling&&this.parentNode.appendChild(this)}function Ds(){return this.each(qs)}function Xs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zs(){return this.each(Xs)}function Vs(e){var t=typeof e=="function"?e:mr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Hs(){return null}function Ks(e,t){var n=typeof e=="function"?e:mr(e),i=t==null?Hs:typeof t=="function"?t:Gn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Ys(){var e=this.parentNode;e&&e.removeChild(this)}function Ws(){return this.each(Ys)}function Gs(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Qs(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Js(e){return this.select(e?Qs:Gs)}function js(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Zs(e){return function(t){e.call(this,t,this.__data__)}}function el(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function tl(e){return function(){var t=this.__on;if(!!t){for(var n=0,i=-1,r=t.length,a;n<r;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++i]=a;++i?t.length=i:delete this.__on}}}function nl(e,t,n){return function(){var i=this.__on,r,a=Zs(t);if(i){for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=t;return}}this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(r):this.__on=[r]}}function il(e,t,n){var i=el(e+""),r,a=i.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,c;u<l;++u)for(r=0,c=s[u];r<a;++r)if((o=i[r]).type===c.type&&o.name===c.name)return c.value}return}for(s=t?nl:tl,r=0;r<a;++r)this.each(s(i[r],t,n));return this}function Ar(e,t,n){var i=wr(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function rl(e,t){return function(){return Ar(this,e,t)}}function ol(e,t){return function(){return Ar(this,e,t.apply(this,arguments))}}function al(e,t){return this.each((typeof t=="function"?ol:rl)(e,t))}function*sl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,a=i.length,o;r<a;++r)(o=i[r])&&(yield o)}var Sr=[null];function Te(e,t){this._groups=e,this._parents=t}function Nt(){return new Te([[document.documentElement]],Sr)}function ll(){return this}Te.prototype=Nt.prototype={constructor:Te,select:Ra,selectAll:Ua,selectChild:Xa,selectChildren:Ka,filter:Ya,data:Za,enter:Wa,exit:ts,join:ns,merge:is,selection:ll,order:rs,sort:os,call:ss,nodes:ls,node:us,size:cs,empty:fs,each:ds,attr:ws,style:Cs,property:Ms,classed:Ps,text:Fs,html:Os,raise:Ds,lower:zs,append:Vs,insert:Ks,remove:Ws,clone:Js,datum:js,on:il,dispatch:al,[Symbol.iterator]:sl};function qe(e){return typeof e=="string"?new Te([[document.querySelector(e)]],[document.documentElement]):new Te([[e]],Sr)}function ul(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Pi(e,t){if(e=ul(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ln={capture:!0,passive:!1};function Bn(e){e.preventDefault(),e.stopImmediatePropagation()}function cl(e){var t=e.document.documentElement,n=qe(e).on("dragstart.drag",Bn,Ln);"onselectstart"in t?n.on("selectstart.drag",Bn,Ln):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function fl(e,t){var n=e.document.documentElement,i=qe(e).on("dragstart.drag",null);t&&(i.on("click.drag",Bn,Ln),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Jn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ir(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Tt(){}var It=.7,Zt=1/It,dt="\\s*([+-]?\\d+)\\s*",Mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",De="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dl=/^#([0-9a-f]{3,8})$/,hl=new RegExp(`^rgb\\(${dt},${dt},${dt}\\)$`),ml=new RegExp(`^rgb\\(${De},${De},${De}\\)$`),pl=new RegExp(`^rgba\\(${dt},${dt},${dt},${Mt}\\)$`),vl=new RegExp(`^rgba\\(${De},${De},${De},${Mt}\\)$`),gl=new RegExp(`^hsl\\(${Mt},${De},${De}\\)$`),yl=new RegExp(`^hsla\\(${Mt},${De},${De},${Mt}\\)$`),xi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Jn(Tt,tt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ei,formatHex:Ei,formatHex8:wl,formatHsl:bl,formatRgb:Ri,toString:Ri});function Ei(){return this.rgb().formatHex()}function wl(){return this.rgb().formatHex8()}function bl(){return Mr(this).formatHsl()}function Ri(){return this.rgb().formatRgb()}function tt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=dl.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Fi(t):n===3?new Ie(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Dt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Dt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hl.exec(e))?new Ie(t[1],t[2],t[3],1):(t=ml.exec(e))?new Ie(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pl.exec(e))?Dt(t[1],t[2],t[3],t[4]):(t=vl.exec(e))?Dt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gl.exec(e))?Ui(t[1],t[2]/100,t[3]/100,1):(t=yl.exec(e))?Ui(t[1],t[2]/100,t[3]/100,t[4]):xi.hasOwnProperty(e)?Fi(xi[e]):e==="transparent"?new Ie(NaN,NaN,NaN,0):null}function Fi(e){return new Ie(e>>16&255,e>>8&255,e&255,1)}function Dt(e,t,n,i){return i<=0&&(e=t=n=NaN),new Ie(e,t,n,i)}function _l(e){return e instanceof Tt||(e=tt(e)),e?(e=e.rgb(),new Ie(e.r,e.g,e.b,e.opacity)):new Ie}function Un(e,t,n,i){return arguments.length===1?_l(e):new Ie(e,t,n,i==null?1:i)}function Ie(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Jn(Ie,Un,Ir(Tt,{brighter(e){return e=e==null?Zt:Math.pow(Zt,e),new Ie(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?It:Math.pow(It,e),new Ie(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ie(et(this.r),et(this.g),et(this.b),en(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Li,formatHex:Li,formatHex8:kl,formatRgb:Bi,toString:Bi}));function Li(){return`#${Ze(this.r)}${Ze(this.g)}${Ze(this.b)}`}function kl(){return`#${Ze(this.r)}${Ze(this.g)}${Ze(this.b)}${Ze((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bi(){const e=en(this.opacity);return`${e===1?"rgb(":"rgba("}${et(this.r)}, ${et(this.g)}, ${et(this.b)}${e===1?")":`, ${e})`}`}function en(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function et(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ze(e){return e=et(e),(e<16?"0":"")+e.toString(16)}function Ui(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Le(e,t,n,i)}function Mr(e){if(e instanceof Le)return new Le(e.h,e.s,e.l,e.opacity);if(e instanceof Tt||(e=tt(e)),!e)return new Le;if(e instanceof Le)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),o=NaN,s=a-r,u=(a+r)/2;return s?(t===a?o=(n-i)/s+(n<i)*6:n===a?o=(i-t)/s+2:o=(t-n)/s+4,s/=u<.5?a+r:2-a-r,o*=60):s=u>0&&u<1?0:o,new Le(o,s,u,e.opacity)}function Cl(e,t,n,i){return arguments.length===1?Mr(e):new Le(e,t,n,i==null?1:i)}function Le(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Jn(Le,Cl,Ir(Tt,{brighter(e){return e=e==null?Zt:Math.pow(Zt,e),new Le(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?It:Math.pow(It,e),new Le(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Ie(In(e>=240?e-240:e+120,r,i),In(e,r,i),In(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Le(Oi(this.h),Xt(this.s),Xt(this.l),en(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=en(this.opacity);return`${e===1?"hsl(":"hsla("}${Oi(this.h)}, ${Xt(this.s)*100}%, ${Xt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Oi(e){return e=(e||0)%360,e<0?e+360:e}function Xt(e){return Math.max(0,Math.min(1,e||0))}function In(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const jn=e=>()=>e;function Al(e,t){return function(n){return e+n*t}}function Sl(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Il(e){return(e=+e)==1?$r:function(t,n){return n-t?Sl(t,n,e):jn(isNaN(t)?n:t)}}function $r(e,t){var n=t-e;return n?Al(e,n):jn(isNaN(e)?t:e)}const tn=function e(t){var n=Il(t);function i(r,a){var o=n((r=Un(r)).r,(a=Un(a)).r),s=n(r.g,a.g),u=n(r.b,a.b),l=$r(r.opacity,a.opacity);return function(c){return r.r=o(c),r.g=s(c),r.b=u(c),r.opacity=l(c),r+""}}return i.gamma=e,i}(1);function Ml(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function $l(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Nl(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),o;for(o=0;o<i;++o)r[o]=hn(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(s){for(o=0;o<i;++o)a[o]=r[o](s);return a}}function Tl(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Fe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Pl(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=hn(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var On=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mn=new RegExp(On.source,"g");function xl(e){return function(){return e}}function El(e){return function(t){return e(t)+""}}function Nr(e,t){var n=On.lastIndex=Mn.lastIndex=0,i,r,a,o=-1,s=[],u=[];for(e=e+"",t=t+"";(i=On.exec(e))&&(r=Mn.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(i=i[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Fe(i,r)})),n=Mn.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?El(u[0].x):xl(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)s[(f=u[c]).i]=f.x(l);return s.join("")})}function hn(e,t){var n=typeof t,i;return t==null||n==="boolean"?jn(t):(n==="number"?Fe:n==="string"?(i=tt(t))?(t=i,tn):Nr:t instanceof tt?tn:t instanceof Date?Tl:$l(t)?Ml:Array.isArray(t)?Nl:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Pl:Fe)(e,t)}function Rl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var qi=180/Math.PI,qn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Tr(e,t,n,i,r,a){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*i)&&(n-=e*u,i-=t*u),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,u/=s),e*i<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*qi,skewX:Math.atan(u)*qi,scaleX:o,scaleY:s}}var zt;function Fl(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?qn:Tr(t.a,t.b,t.c,t.d,t.e,t.f)}function Ll(e){return e==null||(zt||(zt=document.createElementNS("http://www.w3.org/2000/svg","g")),zt.setAttribute("transform",e),!(e=zt.transform.baseVal.consolidate()))?qn:(e=e.matrix,Tr(e.a,e.b,e.c,e.d,e.e,e.f))}function Pr(e,t,n,i){function r(l){return l.length?l.pop()+" ":""}function a(l,c,f,d,p,$){if(l!==f||c!==d){var b=p.push("translate(",null,t,null,n);$.push({i:b-4,x:Fe(l,f)},{i:b-2,x:Fe(c,d)})}else(f||d)&&p.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(r(f)+"rotate(",null,i)-2,x:Fe(l,c)})):c&&f.push(r(f)+"rotate("+c+i)}function s(l,c,f,d){l!==c?d.push({i:f.push(r(f)+"skewX(",null,i)-2,x:Fe(l,c)}):c&&f.push(r(f)+"skewX("+c+i)}function u(l,c,f,d,p,$){if(l!==f||c!==d){var b=p.push(r(p)+"scale(",null,",",null,")");$.push({i:b-4,x:Fe(l,f)},{i:b-2,x:Fe(c,d)})}else(f!==1||d!==1)&&p.push(r(p)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),s(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(p){for(var $=-1,b=d.length,h;++$<b;)f[(h=d[$]).i]=h.x(p);return f.join("")}}}var Bl=Pr(Fl,"px, ","px)","deg)"),Ul=Pr(Ll,", ",")",")"),mt=0,kt=0,_t=0,xr=1e3,nn,Ct,rn=0,nt=0,mn=0,$t=typeof performance=="object"&&performance.now?performance:Date,Er=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Zn(){return nt||(Er(Ol),nt=$t.now()+mn)}function Ol(){nt=0}function on(){this._call=this._time=this._next=null}on.prototype=Rr.prototype={constructor:on,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Zn():+n)+(t==null?0:+t),!this._next&&Ct!==this&&(Ct?Ct._next=this:nn=this,Ct=this),this._call=e,this._time=n,Dn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dn())}};function Rr(e,t,n){var i=new on;return i.restart(e,t,n),i}function ql(){Zn(),++mt;for(var e=nn,t;e;)(t=nt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--mt}function Di(){nt=(rn=$t.now())+mn,mt=kt=0;try{ql()}finally{mt=0,Xl(),nt=0}}function Dl(){var e=$t.now(),t=e-rn;t>xr&&(mn-=t,rn=e)}function Xl(){for(var e,t=nn,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:nn=n);Ct=e,Dn(i)}function Dn(e){if(!mt){kt&&(kt=clearTimeout(kt));var t=e-nt;t>24?(e<1/0&&(kt=setTimeout(Di,e-$t.now()-mn)),_t&&(_t=clearInterval(_t))):(_t||(rn=$t.now(),_t=setInterval(Dl,xr)),mt=1,Er(Di))}}function Xi(e,t,n){var i=new on;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var zl=Wn("start","end","cancel","interrupt"),Vl=[],Fr=0,zi=1,Xn=2,Wt=3,Vi=4,zn=5,Gt=6;function pn(e,t,n,i,r,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Hl(e,n,{name:t,index:i,group:r,on:zl,tween:Vl,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Fr})}function ei(e,t){var n=Be(e,t);if(n.state>Fr)throw new Error("too late; already scheduled");return n}function Xe(e,t){var n=Be(e,t);if(n.state>Wt)throw new Error("too late; already running");return n}function Be(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Hl(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=Rr(a,0,n.time);function a(l){n.state=zi,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,p;if(n.state!==zi)return u();for(c in i)if(p=i[c],p.name===n.name){if(p.state===Wt)return Xi(o);p.state===Vi?(p.state=Gt,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete i[c]):+c<t&&(p.state=Gt,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete i[c])}if(Xi(function(){n.state===Wt&&(n.state=Vi,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Xn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Xn){for(n.state=Wt,r=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=p);r.length=f+1}}function s(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=zn,1),f=-1,d=r.length;++f<d;)r[f].call(e,c);n.state===zn&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Gt,n.timer.stop(),delete i[t];for(var l in i)return;delete e.__transition}}function Vn(e,t){var n=e.__transition,i,r,a=!0,o;if(!!n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){a=!1;continue}r=i.state>Xn&&i.state<zn,i.state=Gt,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}a&&delete e.__transition}}function Kl(e){return this.each(function(){Vn(this,e)})}function Yl(e,t){var n,i;return function(){var r=Xe(this,e),a=r.tween;if(a!==n){i=n=a;for(var o=0,s=i.length;o<s;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function Wl(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var a=Xe(this,e),o=a.tween;if(o!==i){r=(i=o).slice();for(var s={name:t,value:n},u=0,l=r.length;u<l;++u)if(r[u].name===t){r[u]=s;break}u===l&&r.push(s)}a.tween=r}}function Gl(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Be(this.node(),n).tween,r=0,a=i.length,o;r<a;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((t==null?Yl:Wl)(n,e,t))}function ti(e,t,n){var i=e._id;return e.each(function(){var r=Xe(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Be(r,i).value[t]}}function Lr(e,t){var n;return(typeof t=="number"?Fe:t instanceof tt?tn:(n=tt(t))?(t=n,tn):Nr)(e,t)}function Ql(e){return function(){this.removeAttribute(e)}}function Jl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jl(e,t,n){var i,r=n+"",a;return function(){var o=this.getAttribute(e);return o===r?null:o===i?a:a=t(i=o,n)}}function Zl(e,t,n){var i,r=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===i?a:a=t(i=o,n)}}function eu(e,t,n){var i,r,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=s+"",o===u?null:o===i&&u===r?a:(r=u,a=t(i=o,s)))}}function tu(e,t,n){var i,r,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=s+"",o===u?null:o===i&&u===r?a:(r=u,a=t(i=o,s)))}}function nu(e,t){var n=dn(e),i=n==="transform"?Ul:Lr;return this.attrTween(e,typeof t=="function"?(n.local?tu:eu)(n,i,ti(this,"attr."+e,t)):t==null?(n.local?Jl:Ql)(n):(n.local?Zl:jl)(n,i,t))}function iu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ru(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ou(e,t){var n,i;function r(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&ru(e,a)),n}return r._value=t,r}function au(e,t){var n,i;function r(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&iu(e,a)),n}return r._value=t,r}function su(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=dn(e);return this.tween(n,(i.local?ou:au)(i,t))}function lu(e,t){return function(){ei(this,e).delay=+t.apply(this,arguments)}}function uu(e,t){return t=+t,function(){ei(this,e).delay=t}}function cu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?lu:uu)(t,e)):Be(this.node(),t).delay}function fu(e,t){return function(){Xe(this,e).duration=+t.apply(this,arguments)}}function du(e,t){return t=+t,function(){Xe(this,e).duration=t}}function hu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fu:du)(t,e)):Be(this.node(),t).duration}function mu(e,t){if(typeof t!="function")throw new Error;return function(){Xe(this,e).ease=t}}function pu(e){var t=this._id;return arguments.length?this.each(mu(t,e)):Be(this.node(),t).ease}function vu(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Xe(this,e).ease=n}}function gu(e){if(typeof e!="function")throw new Error;return this.each(vu(this._id,e))}function yu(e){typeof e!="function"&&(e=vr(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a=t[r],o=a.length,s=i[r]=[],u,l=0;l<o;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&s.push(u);return new Ge(i,this._parents,this._name,this._id)}function wu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var u=t[s],l=n[s],c=u.length,f=o[s]=new Array(c),d,p=0;p<c;++p)(d=u[p]||l[p])&&(f[p]=d);for(;s<i;++s)o[s]=t[s];return new Ge(o,this._parents,this._name,this._id)}function bu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function _u(e,t,n){var i,r,a=bu(t)?ei:Xe;return function(){var o=a(this,e),s=o.on;s!==i&&(r=(i=s).copy()).on(t,n),o.on=r}}function ku(e,t){var n=this._id;return arguments.length<2?Be(this.node(),n).on.on(e):this.each(_u(n,e,t))}function Cu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Au(){return this.on("end.remove",Cu(this._id))}function Su(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Gn(e));for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o)for(var s=i[o],u=s.length,l=a[o]=new Array(u),c,f,d=0;d<u;++d)(c=s[d])&&(f=e.call(c,c.__data__,d,s))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,pn(l[d],t,n,d,l,Be(c,n)));return new Ge(a,this._parents,t,n)}function Iu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=pr(e));for(var i=this._groups,r=i.length,a=[],o=[],s=0;s<r;++s)for(var u=i[s],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),p,$=Be(c,n),b=0,h=d.length;b<h;++b)(p=d[b])&&pn(p,t,n,b,d,$);a.push(d),o.push(c)}return new Ge(a,o,t,n)}var Mu=Nt.prototype.constructor;function $u(){return new Mu(this._groups,this._parents)}function Nu(e,t){var n,i,r;return function(){var a=ht(this,e),o=(this.style.removeProperty(e),ht(this,e));return a===o?null:a===n&&o===i?r:r=t(n=a,i=o)}}function Br(e){return function(){this.style.removeProperty(e)}}function Tu(e,t,n){var i,r=n+"",a;return function(){var o=ht(this,e);return o===r?null:o===i?a:a=t(i=o,n)}}function Pu(e,t,n){var i,r,a;return function(){var o=ht(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),ht(this,e))),o===u?null:o===i&&u===r?a:(r=u,a=t(i=o,s))}}function xu(e,t){var n,i,r,a="style."+t,o="end."+a,s;return function(){var u=Xe(this,e),l=u.on,c=u.value[a]==null?s||(s=Br(t)):void 0;(l!==n||r!==c)&&(i=(n=l).copy()).on(o,r=c),u.on=i}}function Eu(e,t,n){var i=(e+="")=="transform"?Bl:Lr;return t==null?this.styleTween(e,Nu(e,i)).on("end.style."+e,Br(e)):typeof t=="function"?this.styleTween(e,Pu(e,i,ti(this,"style."+e,t))).each(xu(this._id,e)):this.styleTween(e,Tu(e,i,t),n).on("end.style."+e,null)}function Ru(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Fu(e,t,n){var i,r;function a(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&Ru(e,o,n)),i}return a._value=t,a}function Lu(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Fu(e,t,n==null?"":n))}function Bu(e){return function(){this.textContent=e}}function Uu(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Ou(e){return this.tween("text",typeof e=="function"?Uu(ti(this,"text",e)):Bu(e==null?"":e+""))}function qu(e){return function(t){this.textContent=e.call(this,t)}}function Du(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&qu(r)),t}return i._value=e,i}function Xu(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Du(e))}function zu(){for(var e=this._name,t=this._id,n=Ur(),i=this._groups,r=i.length,a=0;a<r;++a)for(var o=i[a],s=o.length,u,l=0;l<s;++l)if(u=o[l]){var c=Be(u,t);pn(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ge(i,this._parents,e,n)}function Vu(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--r===0&&a()}};n.each(function(){var l=Xe(this,i),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),l.on=t}),r===0&&a()})}var Hu=0;function Ge(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Ur(){return++Hu}var He=Nt.prototype;Ge.prototype={constructor:Ge,select:Su,selectAll:Iu,selectChild:He.selectChild,selectChildren:He.selectChildren,filter:yu,merge:wu,selection:$u,transition:zu,call:He.call,nodes:He.nodes,node:He.node,size:He.size,empty:He.empty,each:He.each,on:ku,attr:nu,attrTween:su,style:Eu,styleTween:Lu,text:Ou,textTween:Xu,remove:Au,tween:Gl,delay:cu,duration:hu,ease:pu,easeVarying:gu,end:Vu,[Symbol.iterator]:He[Symbol.iterator]};function Ku(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Yu={time:null,delay:0,duration:250,ease:Ku};function Wu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Gu(e){var t,n;e instanceof Ge?(t=e._id,e=e._name):(t=Ur(),(n=Yu).time=Zn(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var o=i[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&pn(u,e,t,l,o,n||Wu(u,t));return new Ge(i,this._parents,e,t)}Nt.prototype.interrupt=Kl;Nt.prototype.transition=Gu;const $n=e=>()=>e;function Qu(e,{sourceEvent:t,target:n,selection:i,mode:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function Ju(e){e.stopImmediatePropagation()}function Nn(e){e.preventDefault(),e.stopImmediatePropagation()}var Hi={name:"drag"},Tn={name:"space"},lt={name:"handle"},ut={name:"center"};const{abs:Ki,max:ve,min:ge}=Math;function Yi(e){return[+e[0],+e[1]]}function Wi(e){return[Yi(e[0]),Yi(e[1])]}var Qt={name:"x",handles:["w","e"].map(an),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Pn={name:"y",handles:["n","s"].map(an),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Ke={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Gi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Qi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ju={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Zu={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function an(e){return{type:e}}function ec(e){return!e.ctrlKey&&!e.button}function tc(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function nc(){return navigator.maxTouchPoints||"ontouchstart"in this}function xn(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function ic(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function rc(){return oc(Qt)}function oc(e){var t=tc,n=ec,i=nc,r=!0,a=Wn("start","brush","end"),o=6,s;function u(h){var A=h.property("__brush",b).selectAll(".overlay").data([an("overlay")]);A.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ke.overlay).merge(A).each(function(){var v=xn(this).extent;qe(this).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1])}),h.selectAll(".selection").data([an("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ke.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var I=h.selectAll(".handle").data(e.handles,function(v){return v.type});I.exit().remove(),I.enter().append("rect").attr("class",function(v){return"handle handle--"+v.type}).attr("cursor",function(v){return Ke[v.type]}),h.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(i).on("touchstart.brush",d).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",$).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(h,A,I){h.tween?h.on("start.brush",function(v){c(this,arguments).beforestart().start(v)}).on("interrupt.brush end.brush",function(v){c(this,arguments).end(v)}).tween("brush",function(){var v=this,N=v.__brush,w=c(v,arguments),P=N.selection,F=e.input(typeof A=="function"?A.apply(this,arguments):A,N.extent),C=hn(P,F);function U(O){N.selection=O===1&&F===null?null:C(O),l.call(v),w.brush()}return P!==null&&F!==null?U:U(1)}):h.each(function(){var v=this,N=arguments,w=v.__brush,P=e.input(typeof A=="function"?A.apply(v,N):A,w.extent),F=c(v,N).beforestart();Vn(v),w.selection=P===null?null:P,l.call(v),F.start(I).brush(I).end(I)})},u.clear=function(h,A){u.move(h,null,A)};function l(){var h=qe(this),A=xn(this).selection;A?(h.selectAll(".selection").style("display",null).attr("x",A[0][0]).attr("y",A[0][1]).attr("width",A[1][0]-A[0][0]).attr("height",A[1][1]-A[0][1]),h.selectAll(".handle").style("display",null).attr("x",function(I){return I.type[I.type.length-1]==="e"?A[1][0]-o/2:A[0][0]-o/2}).attr("y",function(I){return I.type[0]==="s"?A[1][1]-o/2:A[0][1]-o/2}).attr("width",function(I){return I.type==="n"||I.type==="s"?A[1][0]-A[0][0]+o:o}).attr("height",function(I){return I.type==="e"||I.type==="w"?A[1][1]-A[0][1]+o:o})):h.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(h,A,I){var v=h.__brush.emitter;return v&&(!I||!v.clean)?v:new f(h,A,I)}function f(h,A,I){this.that=h,this.args=A,this.state=h.__brush,this.active=0,this.clean=I}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(h,A){return this.starting?(this.starting=!1,this.emit("start",h,A)):this.emit("brush",h),this},brush:function(h,A){return this.emit("brush",h,A),this},end:function(h,A){return--this.active===0&&(delete this.state.emitter,this.emit("end",h,A)),this},emit:function(h,A,I){var v=qe(this.that).datum();a.call(h,this.that,new Qu(h,{sourceEvent:A,target:u,selection:e.output(this.state.selection),mode:I,dispatch:a}),v)}};function d(h){if(s&&!h.touches||!n.apply(this,arguments))return;var A=this,I=h.target.__data__.type,v=(r&&h.metaKey?I="overlay":I)==="selection"?Hi:r&&h.altKey?ut:lt,N=e===Pn?null:ju[I],w=e===Qt?null:Zu[I],P=xn(A),F=P.extent,C=P.selection,U=F[0][0],O,_,Q=F[0][1],g,V,we=F[1][0],Z,te,ue=F[1][1],R,se,J=0,j=0,Ue,Me=N&&w&&r&&h.shiftKey,$e,ze,B=Array.from(h.touches||[h],X=>{const T=X.identifier;return X=Pi(X,A),X.point0=X.slice(),X.identifier=T,X});Vn(A);var H=c(A,arguments,!0).beforestart();if(I==="overlay"){C&&(Ue=!0);const X=[B[0],B[1]||B[0]];P.selection=C=[[O=e===Pn?U:ge(X[0][0],X[1][0]),g=e===Qt?Q:ge(X[0][1],X[1][1])],[Z=e===Pn?we:ve(X[0][0],X[1][0]),R=e===Qt?ue:ve(X[0][1],X[1][1])]],B.length>1&&Ve(h)}else O=C[0][0],g=C[0][1],Z=C[1][0],R=C[1][1];_=O,V=g,te=Z,se=R;var Ne=qe(A).attr("pointer-events","none"),ce=Ne.selectAll(".overlay").attr("cursor",Ke[I]);if(h.touches)H.moved=rt,H.ended=Pt;else{var me=qe(h.view).on("mousemove.brush",rt,!0).on("mouseup.brush",Pt,!0);r&&me.on("keydown.brush",gn,!0).on("keyup.brush",yn,!0),cl(h.view)}l.call(A),H.start(h,v.name);function rt(X){for(const T of X.changedTouches||[X])for(const D of B)D.identifier===T.identifier&&(D.cur=Pi(T,A));if(Me&&!$e&&!ze&&B.length===1){const T=B[0];Ki(T.cur[0]-T[0])>Ki(T.cur[1]-T[1])?ze=!0:$e=!0}for(const T of B)T.cur&&(T[0]=T.cur[0],T[1]=T.cur[1]);Ue=!0,Nn(X),Ve(X)}function Ve(X){const T=B[0],D=T.point0;var Oe;switch(J=T[0]-D[0],j=T[1]-D[1],v){case Tn:case Hi:{N&&(J=ve(U-O,ge(we-Z,J)),_=O+J,te=Z+J),w&&(j=ve(Q-g,ge(ue-R,j)),V=g+j,se=R+j);break}case lt:{B[1]?(N&&(_=ve(U,ge(we,B[0][0])),te=ve(U,ge(we,B[1][0])),N=1),w&&(V=ve(Q,ge(ue,B[0][1])),se=ve(Q,ge(ue,B[1][1])),w=1)):(N<0?(J=ve(U-O,ge(we-O,J)),_=O+J,te=Z):N>0&&(J=ve(U-Z,ge(we-Z,J)),_=O,te=Z+J),w<0?(j=ve(Q-g,ge(ue-g,j)),V=g+j,se=R):w>0&&(j=ve(Q-R,ge(ue-R,j)),V=g,se=R+j));break}case ut:{N&&(_=ve(U,ge(we,O-J*N)),te=ve(U,ge(we,Z+J*N))),w&&(V=ve(Q,ge(ue,g-j*w)),se=ve(Q,ge(ue,R+j*w)));break}}te<_&&(N*=-1,Oe=O,O=Z,Z=Oe,Oe=_,_=te,te=Oe,I in Gi&&ce.attr("cursor",Ke[I=Gi[I]])),se<V&&(w*=-1,Oe=g,g=R,R=Oe,Oe=V,V=se,se=Oe,I in Qi&&ce.attr("cursor",Ke[I=Qi[I]])),P.selection&&(C=P.selection),$e&&(_=C[0][0],te=C[1][0]),ze&&(V=C[0][1],se=C[1][1]),(C[0][0]!==_||C[0][1]!==V||C[1][0]!==te||C[1][1]!==se)&&(P.selection=[[_,V],[te,se]],l.call(A),H.brush(X,v.name))}function Pt(X){if(Ju(X),X.touches){if(X.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else fl(X.view,Ue),me.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Ne.attr("pointer-events","all"),ce.attr("cursor",Ke.overlay),P.selection&&(C=P.selection),ic(C)&&(P.selection=null,l.call(A)),H.end(X,v.name)}function gn(X){switch(X.keyCode){case 16:{Me=N&&w;break}case 18:{v===lt&&(N&&(Z=te-J*N,O=_+J*N),w&&(R=se-j*w,g=V+j*w),v=ut,Ve(X));break}case 32:{(v===lt||v===ut)&&(N<0?Z=te-J:N>0&&(O=_-J),w<0?R=se-j:w>0&&(g=V-j),v=Tn,ce.attr("cursor",Ke.selection),Ve(X));break}default:return}Nn(X)}function yn(X){switch(X.keyCode){case 16:{Me&&($e=ze=Me=!1,Ve(X));break}case 18:{v===ut&&(N<0?Z=te:N>0&&(O=_),w<0?R=se:w>0&&(g=V),v=lt,Ve(X));break}case 32:{v===Tn&&(X.altKey?(N&&(Z=te-J*N,O=_+J*N),w&&(R=se-j*w,g=V+j*w),v=ut):(N<0?Z=te:N>0&&(O=_),w<0?R=se:w>0&&(g=V),v=lt),ce.attr("cursor",Ke[I]),Ve(X));break}default:return}Nn(X)}}function p(h){c(this,arguments).moved(h)}function $(h){c(this,arguments).ended(h)}function b(){var h=this.__brush||{selection:null};return h.extent=Wi(t.apply(this,arguments)),h.dim=e,h}return u.extent=function(h){return arguments.length?(t=typeof h=="function"?h:$n(Wi(h)),u):t},u.filter=function(h){return arguments.length?(n=typeof h=="function"?h:$n(!!h),u):n},u.touchable=function(h){return arguments.length?(i=typeof h=="function"?h:$n(!!h),u):i},u.handleSize=function(h){return arguments.length?(o=+h,u):o},u.keyModifiers=function(h){return arguments.length?(r=!!h,u):r},u.on=function(){var h=a.on.apply(a,arguments);return h===a?u:h},u}function ac(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function sn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function pt(e){return e=sn(Math.abs(e)),e?e[1]:NaN}function sc(e,t){return function(n,i){for(var r=n.length,a=[],o=0,s=e[0],u=0;r>0&&s>0&&(u+s+1>i&&(s=Math.max(1,i-u)),a.push(n.substring(r-=s,r+s)),!((u+=s+1)>i));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function lc(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var uc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ln(e){if(!(t=uc.exec(e)))throw new Error("invalid format: "+e);var t;return new ni({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ln.prototype=ni.prototype;function ni(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ni.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cc(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var Or;function fc(e,t){var n=sn(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(Or=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+sn(e,Math.max(0,t+a-1))[0]}function Ji(e,t){var n=sn(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const ji={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ac,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ji(e*100,t),r:Ji,s:fc,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Zi(e){return e}var er=Array.prototype.map,tr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function dc(e){var t=e.grouping===void 0||e.thousands===void 0?Zi:sc(er.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Zi:lc(er.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=ln(f);var d=f.fill,p=f.align,$=f.sign,b=f.symbol,h=f.zero,A=f.width,I=f.comma,v=f.precision,N=f.trim,w=f.type;w==="n"?(I=!0,w="g"):ji[w]||(v===void 0&&(v=12),N=!0,w="g"),(h||d==="0"&&p==="=")&&(h=!0,d="0",p="=");var P=b==="$"?n:b==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",F=b==="$"?i:/[%p]/.test(w)?o:"",C=ji[w],U=/[defgprs%]/.test(w);v=v===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function O(_){var Q=P,g=F,V,we,Z;if(w==="c")g=C(_)+g,_="";else{_=+_;var te=_<0||1/_<0;if(_=isNaN(_)?u:C(Math.abs(_),v),N&&(_=cc(_)),te&&+_==0&&$!=="+"&&(te=!1),Q=(te?$==="("?$:s:$==="-"||$==="("?"":$)+Q,g=(w==="s"?tr[8+Or/3]:"")+g+(te&&$==="("?")":""),U){for(V=-1,we=_.length;++V<we;)if(Z=_.charCodeAt(V),48>Z||Z>57){g=(Z===46?r+_.slice(V+1):_.slice(V))+g,_=_.slice(0,V);break}}}I&&!h&&(_=t(_,1/0));var ue=Q.length+_.length+g.length,R=ue<A?new Array(A-ue+1).join(d):"";switch(I&&h&&(_=t(R+_,R.length?A-g.length:1/0),R=""),p){case"<":_=Q+_+g+R;break;case"=":_=Q+R+_+g;break;case"^":_=R.slice(0,ue=R.length>>1)+Q+_+g+R.slice(ue);break;default:_=R+Q+_+g;break}return a(_)}return O.toString=function(){return f+""},O}function c(f,d){var p=l((f=ln(f),f.type="f",f)),$=Math.max(-8,Math.min(8,Math.floor(pt(d)/3)))*3,b=Math.pow(10,-$),h=tr[8+$/3];return function(A){return p(b*A)+h}}return{format:l,formatPrefix:c}}var Vt,qr,Dr;hc({thousands:",",grouping:[3],currency:["$",""]});function hc(e){return Vt=dc(e),qr=Vt.format,Dr=Vt.formatPrefix,Vt}function mc(e){return Math.max(0,-pt(Math.abs(e)))}function pc(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pt(t)/3)))*3-pt(Math.abs(e)))}function vc(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,pt(t)-pt(e))+1}function ii(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const nr=Symbol("implicit");function Xr(){var e=new Mi,t=[],n=[],i=nr;function r(a){let o=e.get(a);if(o===void 0){if(i!==nr)return i;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Mi;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return Xr(t,n).unknown(i)},ii.apply(r,arguments),r}function zr(){var e=Xr().unknown(void 0),t=e.domain,n=e.range,i=0,r=1,a,o,s=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,p=r<i,$=p?r:i,b=p?i:r;a=(b-$)/Math.max(1,d-u+l*2),s&&(a=Math.floor(a)),$+=(b-$-a*(d-u))*c,o=a*(1-u),s&&($=Math.round($),o=Math.round(o));var h=Ma(d).map(function(A){return $+a*A});return n(p?h.reverse():h)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([i,r]=d,i=+i,r=+r,f()):[i,r]},e.rangeRound=function(d){return[i,r]=d,i=+i,r=+r,s=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(d){return arguments.length?(s=!!d,f()):s},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return zr(t(),[i,r]).round(s).paddingInner(u).paddingOuter(l).align(c)},ii.apply(f(),arguments)}function gc(e){return function(){return e}}function yc(e){return+e}var ir=[0,1];function ct(e){return e}function Hn(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:gc(isNaN(t)?NaN:.5)}function wc(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function bc(e,t,n){var i=e[0],r=e[1],a=t[0],o=t[1];return r<i?(i=Hn(r,i),a=n(o,a)):(i=Hn(i,r),a=n(a,o)),function(s){return a(i(s))}}function _c(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=Hn(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(s){var u=ga(e,s,1,i)-1;return a[u](r[u](s))}}function kc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Cc(){var e=ir,t=ir,n=hn,i,r,a,o=ct,s,u,l;function c(){var d=Math.min(e.length,t.length);return o!==ct&&(o=wc(e[0],e[d-1])),s=d>2?_c:bc,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?a:(u||(u=s(e.map(i),t,n)))(i(o(d)))}return f.invert=function(d){return o(r((l||(l=s(t,e.map(i),Fe)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,yc),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Rl,c()},f.clamp=function(d){return arguments.length?(o=d?!0:ct,c()):o!==ct},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(a=d,f):a},function(d,p){return i=d,r=p,c()}}function Ac(){return Cc()(ct,ct)}function Sc(e,t,n,i){var r=Sa(e,t,n),a;switch(i=ln(i==null?",f":i),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=pc(r,o))&&(i.precision=a),Dr(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=vc(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=mc(r))&&(i.precision=a-(i.type==="%")*2);break}}return qr(i)}function Ic(e){var t=e.domain;return e.ticks=function(n){var i=t();return Aa(i[0],i[i.length-1],n==null?10:n)},e.tickFormat=function(n,i){var r=t();return Sc(r[0],r[r.length-1],n==null?10:n,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,o=i[r],s=i[a],u,l,c=10;for(s<o&&(l=o,o=s,s=l,l=r,r=a,a=l);c-- >0;){if(l=Rn(o,s,n),l===u)return i[r]=o,i[a]=s,t(i);if(l>0)o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l;else if(l<0)o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l;else break;u=l}return e},e}function Vr(){var e=Ac();return e.copy=function(){return kc(e,Vr())},ii.apply(e,arguments),Ic(e)}function ft(e,t,n){this.k=e,this.x=t,this.y=n}ft.prototype={constructor:ft,scale:function(e){return e===1?this:new ft(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ft(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new ft(1,0,0);ft.prototype;function En(e,t,n){const i=new G(10).pow(t-n);return new G(1.0001).pow(e).mul(i)}const Mc=vt({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String}},setup(e,t){const n=k(1),i=St(),r=le(()=>i),a=Ht(),{TickMath:o}=a,s=()=>{if(n.value<.015625)return;const p=n.value/2;n.value=p,l(e.poolInfo,p)},u=()=>{if(n.value>32)return;const p=n.value*2;n.value=p,l(e.poolInfo,p)},l=(p,$=1)=>{if(p&&p.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const b=Number(e.poolInfo.current_tick_index);let h=b+100*$,A=b-100*$,I,v;e.maxPrice==="\u221E"?v=0:e.direction?v=o.priceToTickIndex(new G(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):v=o.priceToTickIndex(new G(1/Number(e.minPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals),e.minPrice==="0"?I=0:e.direction?I=o.priceToTickIndex(new G(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):I=o.priceToTickIndex(new G(1/Number(e.maxPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals);let N=0;if(b>=I&&b<=v){const g=b-I,V=v-b;N=Math.max(Math.abs(g),Math.abs(V))}else b<I?N=Math.abs(v-b):N=Math.abs(b-I);h=b+N+100*$,A=b-N-100*$;const w=Number(p.liquidity)/Math.pow(10,6),P=e.tickList,F=[],C=[];let U={};for(let g=0;g<P.length;g++)U=P[g],U.index<=b&&U.index>=A?F.unshift(U):U.index>b&&U.index<=h&&C.push(U);let O=Number(w);for(let g=0;g<F.length;g++)F[g].liquityAmount=O-Number(F[g].liquidityGross.toString()/Math.pow(10,6));let _=Number(w);for(let g=0;g<C.length;g++)C[g].liquityAmount=_-Number(C[g].liquidityGross.toString()/Math.pow(10,6));let Q=[];Q=[...F.reverse(),{index:b,liquityAmount:Number(w)},...C],e.direction||(Q=Q.reverse()),f(Q,A,h,I,v,b)}};let c=k(!1);Kn(()=>{document.body.clientWidth<750?c.value=!1:c.value=!0,window.onresize=()=>{document.body.clientWidth<750?c.value=!1:c.value=!0,l(e.poolInfo,n.value)}});const f=(p,$,b,h,A,I)=>{const v={top:30,right:35,bottom:20,left:55};let N,w;c.value?(N=460-v.left-v.right,w=205-v.top-v.bottom):(N=340-v.left-v.right,w=205-v.top-v.bottom);const F=(b-$)/4;let C=[$,$+F,$+2*F,b-F,b];const U=C[0]-(C[1]-C[0])/3,O=C[4]+(C[4]-C[3])/3,_=N/(O-U);qe("#chart").selectAll("*").remove();const Q=qe("#chart").attr("width",N+v.left+v.right).attr("height",w+v.top+v.bottom).append("g").attr("transform",`translate(${v.left},${v.right})`),g=Ia(p,function(B){return Number(B.liquityAmount)})||0,V=Vr().range([0,w]).domain([g,0]);zr().rangeRound([0,N]).padding(.1),Q.append("g").attr("id","barsBox").selectAll("rect").data(p).enter().append("rect").attr("x",function(B,H){return H===0?0:e.direction?Math.abs(p[H-1].index-U)*_:Math.abs(O-p[H-1].index)*_}).attr("y",function(B,H){return H===0?0:e.direction?V(p[H-1].liquityAmount):V(B.liquityAmount)}).attr("width",function(B,H){return H===0&&p.length===1&&B.liquityAmount>0?N:H===0?0:e.direction?Math.abs(B.index-p[H-1].index)*_:Math.abs(p[H-1].index-B.index)*_}).attr("height",function(B,H){return H===0&&p.length===1&&B.liquityAmount>0?w:H===0?0:e.direction?w-V(p[H-1].liquityAmount):w-V(B.liquityAmount)}).attr("fill","#279477").attr("class","bars");const te=Q.append("g");te.append("line").attr("x1",0).attr("y1",155).attr("x2",N).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const ue=te.append("g");let R=0;if(e.direction){for(let B=0;B<C.length;B++){const H=We(String(En(C[B],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),En(C[B],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()>1e3?4:6)||"0",Ne=Math.abs(C[B]-U)*_;let ce=0;for(let me=0;me<H.length;me++)H[me]==="1"?ce+=4.02:H[me]==="."?ce+=2.64:H[me]==="7"?ce+=5.48:ce+=6;ue.append("text").text(H).attr("x",Ne-ce/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}R=Math.abs(I-U)*_}else{for(let B=C.length-1;B>=0;B--){const H=We(String(1/En(C[B],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),6)||"0",Ne=Math.abs(C[B]-O)*_;let ce=0;for(let me=0;me<H.length;me++)H[me]==="1"?ce+=4.02:H[me]==="."?ce+=2.64:H[me]==="7"?ce+=5.48:ce+=6;ue.append("text").text(H).attr("x",Ne-ce/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}R=Math.abs(I-O)*_}Q.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8").attr("transform","translate("+R+", 0)");const J=Q.append("g").attr("id","left-handle"),j=Q.append("g").attr("id","right-handle");r.value.theme=="default"?(J.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),J.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),J.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#68FFD8"),J.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#68FFD8"),j.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),j.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),j.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#68FFD8"),j.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#68FFD8")):(J.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),J.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 20) rotate(180)"),J.append("text").text("Min").attr("fill","#B5B8C2").attr("x",-24).attr("y",14).attr("font-size","12px"),J.append("rect").attr("width",1).attr("height",6).attr("x",-32).attr("y",7).attr("fill","#76C8FF"),J.append("rect").attr("width",1).attr("height",8).attr("x",-30).attr("y",6).attr("fill","#76C8FF"),j.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),j.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 0)"),j.append("text").text("Max").attr("fill","#B5B8C2").attr("x",3).attr("y",14).attr("font-size","12px"),j.append("rect").attr("width",1).attr("height",6).attr("x",31).attr("y",7).attr("fill","#76C8FF"),j.append("rect").attr("width",1).attr("height",8).attr("x",29).attr("y",6).attr("fill","#76C8FF"));const Ue=rc().extent([[0,0],[N,w]]).handleSize(30).on("end",ze);let Me,$e;if(e.direction?(Me=h<U?-100:Math.abs(h-U)*_,$e=A<U?-100:Math.abs(A-U)*_):($e=h<U?-100:Math.abs(O-h)*_,Me=A<U?-100:Math.abs(O-A)*_),e.minPrice==="0"&&(Me=0),e.maxPrice==="\u221E"&&($e=N),Q.append("g").attr("class","brush").call(Ue).call(Ue.move,[Me,$e]),$e-10<=Me){s();return}J.attr("transform","translate("+Me+", 0)"),j.attr("transform","translate("+$e+", 0)");function ze(B){if(!B.sourceEvent||!B.selection||e.currentPriceTab!=="Custom")return;J.attr("transform","translate("+B.selection[0]+", 0)"),j.attr("transform","translate("+B.selection[1]+", 0)");let H,Ne;e.direction?(H=o.tickIndexToPrice(B.selection[0]/_+U,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),Ne=o.tickIndexToPrice(B.selection[1]/_+U,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()):(H=1/o.tickIndexToPrice(O-B.selection[0]/_,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),Ne=1/o.tickIndexToPrice(O-B.selection[1]/_,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),t.emit("onChangeMinPrice",String(We(String(H),6))),t.emit("onChangeMaxPrice",String(We(String(Ne),6)))}qe(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C")};k(""),oe(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab],([p,$,b,h])=>{p&&$&&b&&(h!=="Custom"?(n.value=32,l(p,32)):l(p,n.value))},{immediate:!0});const d=k(!0);return oe(()=>e.chartLoading,(p,$)=>{p!==$&&(d.value=p)},{immediate:!0,deep:!0}),{store:r,loading:d,zoomOut:s,zoomIn:u}}});const $c=e=>(cn("data-v-e9b1cd00"),e=e(),fn(),e),Nc={class:"chart-box"},Tc={class:"chart"},Pc={class:"zoom"},xc=$c(()=>m("svg",{id:"chart"},null,-1));function Ec(e,t,n,i,r,a){return M(),E("div",Nc,[mo(m("div",Tc,[m("div",Pc,[m("div",{class:"amplification",onClick:t[0]||(t[0]=(...o)=>e.zoomOut&&e.zoomOut(...o))}),m("div",{class:"narrow",onClick:t[1]||(t[1]=(...o)=>e.zoomIn&&e.zoomIn(...o))})]),xc],512),[[po,!e.loading]])])}const Rc=gt(Mc,[["render",Ec],["__scopeId","data-v-e9b1cd00"]]),Fc=vt({components:{Modal:vo},props:{},setup(){const e=k({}),t=St(),n=le(()=>t),i=le(()=>n.value.chainName),r=le(()=>go[i.value]);let a=k(!0);const o=or(),s=le(()=>o),u=ar();return oe(()=>s.value.currentPositionInfo,l=>{l&&(e.value=l)}),{addCommom:sr,router:u,pools:s,positionInfo:e,decimalFormat:We,rateChange:a,config:r,importIcon:un,store:n}}});const vn=e=>(cn("data-v-8c4e0879"),e=e(),fn(),e),Lc=vn(()=>m("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Bc={class:"rejected-container"},Uc={class:"coin-pair"},Oc=vn(()=>m("use",{"xlink:href":"#icon-icon-copy"},null,-1)),qc=[Oc],Dc=["href"],Xc=vn(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-jump"})],-1)),zc=[Xc],Vc={class:"coin-pair"},Hc=["src"],Kc=["src"],Yc={class:"fee"},Wc={class:"status"},Gc={class:"min-and-max"},Qc={key:0},Jc={class:"text"},jc={key:0,src:cr,alt:""},Zc={key:1,src:fr,alt:""},ef={class:"text"},tf={key:1},nf={class:"text"},rf={key:0,src:cr,alt:""},of={key:1,src:fr,alt:""},af={class:"text"},sf=vn(()=>m("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),lf=[sf];function uf(e,t,n,i,r,a){const o=rr,s=xo,u=Yn,l=yo("Modal");return M(),Ye(l,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:t[3]||(t[3]=c=>e.$emit("onClose"))},{closeIcon:ye(()=>[Lc]),default:ye(()=>[m("div",Bc,[re(o,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:ye(()=>[m("div",Uc,[Ae(S(e.positionInfo.tokenName)+" ",1),(M(),E("svg",{class:"icon","aria-hidden":"true",onClick:t[0]||(t[0]=c=>e.store.copy(e.positionInfo.nftHash))},qc)),m("a",{href:`https://explorer.aptoslabs.com/token/${e.positionInfo.nftHash}/0?network=${e.config.network}`,target:"_blank"},zc,8,Dc)])]),_:1},8,["loading"]),m("div",{class:Se(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[re(o,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:ye(()=>[m("div",Vc,[m("div",null,[m("img",{src:e.fromCoinUrl||e.positionInfo.token_a.logoURI||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,Hc),m("img",{src:e.toCoinUrl||e.positionInfo.token_b.logoURI||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,Kc)]),m("span",null,S(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" - "+S(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)]),m("div",Yc,S(e.$t("common.fee"))+" "+S(e.positionInfo.fee)+"%",1)]),_:1},8,["loading"])],2),m("div",Wc,[re(s,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),re(o,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:ye(()=>[m("div",Gc,[e.rateChange?(M(),E("div",Qc,[m("div",Jc,S(e.addCommom(e.decimalFormat(String(e.positionInfo&&e.positionInfo.minPrice),6))),1),e.store.theme=="default"?(M(),E("img",jc)):(M(),E("img",Zc)),m("div",ef,S(e.positionInfo&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.addCommom(e.decimalFormat(String(e.positionInfo&&e.positionInfo.maxPrice),6)))+" "+S(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol)+" per "+S(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol),1)])):(M(),E("div",tf,[m("div",nf,S(e.addCommom(e.decimalFormat(String(1/Number(e.positionInfo&&e.positionInfo.maxPrice)),6))),1),e.store.theme=="default"?(M(),E("img",rf)):(M(),E("img",of)),m("div",af,S(e.positionInfo&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.addCommom(e.decimalFormat(String(1/Number(e.positionInfo&&e.positionInfo.minPrice)),6)))+" "+S(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" per "+S(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)])),(M(),E("svg",{class:"icon-change","aria-hidden":"true",onClick:t[1]||(t[1]=c=>e.rateChange=!e.rateChange)},lf))])]),_:1},8,["loading"])]),re(u,{onClick:t[2]||(t[2]=c=>e.router.push(`/position-detail/1?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}`))},{default:ye(()=>[Ae(S(e.$t("newAdd.viewDetail")),1)]),_:1})]),_:1},8,["title"])}const cf=gt(Fc,[["render",uf],["__scopeId","data-v-8c4e0879"]]),ff=vt({setup(){const{t:e,locale:t}=wo(),n=bo(),i=le(()=>n),r=St(),a=k(20),o=k(0),s=k(null),u=k(!1),l=k(!1),c=k(!1),f=k(!1),d=k("fromCoin"),p=k(""),$=k(""),b=k(!1),h=k(!0),A=k(!1),I=k(!1),v=k(!0),N=k(!1),w=k(""),P=k(""),F=k(""),C=k(""),U=k(""),O=k(""),_=k(!1),Q=k(!1),g=k(!1);k(!1);const V=k("0.01% "+e("common.feeTier")),we=k(0),Z=k(!0),te=k(!1),ue=k([]),R=k(""),se=k(7),J=k("Estimated APR"),j=k([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),Ue=k(!0),Me=y=>{se.value=y.num},$e=()=>{Ue.value=!Ue.value},ze=k([]),B=()=>{o.value=0,I.value=!0,Et.updateCurrentPools(q.value.poolAddress),setTimeout(()=>{I.value=!1},1e3),wt()},H=le(()=>Number(F.value)>Number(C.value)),Ne=y=>{A.value=y,F.value="0",C.value="\u221E"},ce=y=>{switch(y){case .01:return"Best for very stable pairs.";case .05:return"Best for stable pairs.";case .3:return"Best for most pairs.";case 1:return"Best for exotic pairs."}},me=le(()=>{if(fe.value.newTokenObj&&T.value&&D.value){const y=Object.values(fe.value.pools).filter(L=>{var z,Y,W,ne;return L.token_a.address.toUpperCase()===((z=T.value.address)==null?void 0:z.toUpperCase())&&L.token_b.address.toUpperCase()===((Y=D.value.address)==null?void 0:Y.toUpperCase())||L.token_b.address.toUpperCase()===((W=T.value.address)==null?void 0:W.toUpperCase())&&L.token_a.address.toUpperCase()===((ne=D.value.address)==null?void 0:ne.toUpperCase())}),x=[];return y.forEach(L=>{x.push({label:L.fee+"% "+e("common.feeTier"),title:L.fee+"% fee",address:L.address,fee:L.fee,text:ce(L.fee)})}),x}}),rt=le(()=>r.slippage),Ve=le(()=>!T.value||!D.value),Pt=le(()=>q.value&&q.value.is_pause?"Pool Closed":Ve.value?e("newAdd.invalidPair"):q.value?Number(w.value)>Number(ot.value)?e("button.insufficientBalance",{name:T.value.symbol}):Number(P.value)>Number(at.value)?e("button.insufficientBalance",{name:D.value.symbol}):N.value?e("modal.selectTokenModalTitle"):C.value!=="\u221E"&&Number(F.value)>=Number(C.value)?e("newAdd.invalidRange"):!Number(w.value)&&!Number(P.value)?e("button.enterAmount"):e("button.addLiquidity"):e("button.poolNotFound")),gn=St(),yn=le(()=>gn),X=ar(),T=k(),D=k();Kn(()=>{ri()}),_o(()=>{clearInterval(s.value)});const Oe=y=>{F.value=y},Hr=y=>{C.value=y},Kr=()=>{Z.value=!0;const y=T.value;if(T.value=D.value,D.value=y,h.value=!h.value,w.value=P.value,Z.value=!1,F.value!==""&&C.value!==""&&F.value!=="0"&&C.value!=="\u221E"){const x=F.value,L=C.value;(!te.value||!h.value)&&(F.value=String(1/Number(L)),C.value=String(1/Number(x)));const z=U.value,Y=O.value;U.value=String(1/Number(Y)),O.value=String(1/Number(z)),kn({key:R.value,...ci.value[R.value]}),te.value=!1}};oe([F,C],([y],[x])=>{wt(),q.value&&C.value!=="\u221E"&&Number(F.value)>=Number(C.value)?g.value=!0:g.value=!1});const Yr=y=>{var x,L,z,Y;d.value=y,y==="fromCoin"?(p.value=((x=D.value)==null?void 0:x.address)||"",$.value=((L=T.value)==null?void 0:L.address)||""):(p.value=((z=T.value)==null?void 0:z.address)||"",$.value=((Y=D.value)==null?void 0:Y.address)||""),b.value=!0},Wr=y=>{N.value=!1,d.value==="fromCoin"?(D.value&&y.address.toLowerCase()===(D==null?void 0:D.value.address.toLowerCase())&&(D.value=null),T.value=y):(T.value&&y.address.toLowerCase()===(T==null?void 0:T.value.address.toLowerCase())&&(T.value=null),D.value=y),b.value=!1},Gr=y=>{y==="fromCoin"?(v.value=!0,w.value=ot.value>0?T.value.symbol=="APT"?new G(Number(ot.value)).sub(new G(.1)).lt(new G(0))?"0":new G(Number(ot.value)).sub(new G(.1)).toString():String(ot.value):""):(v.value=!1,P.value=at.value>0?D.value.symbol=="APT"?new G(Number(at.value)).sub(new G(.1)).lt(new G(0))?"0":new G(Number(at.value)).sub(new G(.1)).toString():String(at.value):"")},ri=()=>{s.value=setInterval(()=>{l.value||o.value<a.value&&(o.value+=1,o.value===a.value&&(q.value.poolAddress&&Et.updateCurrentPools(q.value.poolAddress),o.value=0))},1e3)};oe(w,(y,x)=>{y==""&&v.value&&(P.value=""),y&&v.value&&wt()}),oe(P,(y,x)=>{y==""&&!v.value&&(w.value=""),y&&!v.value&&wt()});const Qr=()=>{T.value=null,D.value=null,F.value="0",C.value="0",w.value="",P.value="",N.value=!0,V.value="",_.value=!1,be.value=!0,_e.value=!0,Z.value=!1},oi=k(!1);ko();const{setIsShowSuccess:ai,setIsShowRejected:si,setIsShowWaiting:xt,setTransactionDesc:Jr,setTransactionTxid:li,setPositiomNum:jr}=r,Pe=Co(),Et=or(),fe=le(()=>Et);oe(()=>fe.value.newTokenObj,y=>{ki(y)||(Pe&&Pe.query&&Pe.query.tokena?T.value=Ot(y,Pe.query.tokena):T.value=Ot(y,"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT"),Pe&&Pe.query&&Pe.query.tokenb?D.value=Ot(y,Pe.query.tokenb):D.value=Ot(y,"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDC"))},{immediate:!0});const yt=k({}),be=k(!1),_e=k(!1),wn=k(),bn=k(),Je=Ht(),_n=k(),ui=k(),Rt=k(""),Ft=k(""),wt=async()=>{var bt,Qe;if(!q.value||!w.value&&!P.value&&!F.value&&!C.value)return;const{TickUtil:y,TickMath:x,getNearestTickByTick:L}=Ht(),z=q.value.token_a.decimals,Y=q.value.token_b.decimals;let W,ne,ie,K,he,de,xe,ke;const Ee=q.value.current_tick_index,Re=q.value.priceConfigObj;let ae;if(q.value.token_a.address.toLowerCase()===T.value.address.toLowerCase()&&q.value.token_b.address.toLowerCase()===D.value.address.toLowerCase()?ae=!0:ae=!1,F.value==="0"&&C.value==="\u221E"?(ie=y.getMinIndex(q.value.tickSpacing),K=y.getMaxIndex(q.value.tickSpacing),he=x.tickIndexToSqrtPriceX64(ie),de=x.tickIndexToSqrtPriceX64(K)):R.value=="Custom"?(ae?(W=Number(F.value),ne=Number(C.value)):(W=1/Number(C.value),ne=1/Number(F.value)),xe=x.priceToTickIndex(new G(W),z,Y),ke=x.priceToTickIndex(new G(ne),z,Y),ie=L(xe,q.value.tickSpacing),K=L(ke,q.value.tickSpacing),he=x.priceToSqrtPriceX64(new G(W),z,Y),de=x.priceToSqrtPriceX64(new G(ne),z,Y)):(ie=Re[R.value].lower,K=Re[R.value].upper,he=x.tickIndexToSqrtPriceX64(ie),de=x.tickIndexToSqrtPriceX64(K)),C.value!=="\u221E"&&ie>=K){be.value=!0,w.value="",_e.value=!0,P.value="";return}if(C.value==="\u221E"||Ee>ie&&Ee<K){be.value=!1,_e.value=!1;let pe;if(w.value||P.value){if(v.value){const Cn=new G(w.value).mul(Math.pow(10,T.value.decimals)).toString();pe=new je(Cn)}else{const Cn=new G(P.value).mul(Math.pow(10,D.value.decimals)).toString();pe=new je(Cn)}const{liquidityAmount:Ce,tokenMaxA:Bt,tokenMaxB:Ut,tokenMaxAOrigin:lo,tokenMaxBOrigin:uo}=Je.estLiquidityAndcoinAmountFromOneAmounts({tokenA:q.value.token_a,tokenB:q.value.token_b,lowerTick:ie,upperTick:K,coinAmount:pe,iscoinA:ae?v.value:!v.value,roundUp:!0,slippage:Number(rt.value)/100,curSqrtPrice:new je(q.value.current_sqrt_price)});yt.value={liquidityAmount:Ce,tokenMaxA:Bt,tokenMaxB:Ut,tokenMaxAOrigin:lo,tokenMaxBOrigin:uo},ae?v.value?P.value=Number(Ut)>0?Ut:"":w.value=Number(Bt)>0?Bt:"":v.value?P.value=Bt:w.value=Ut}}else if(Ee>=K){if(ae?w.value="":P.value="",be.value=ae,_e.value=!ae,w.value||P.value){let pe;if(ae){const Ce=new G(P.value).mul(Math.pow(10,(bt=D.value)==null?void 0:bt.decimals)).toString();pe=new je(Ce),yt.value={liquidityAmount:yi(he,de,pe),tokenMaxA:0,tokenMaxB:P.value}}else{const Ce=new G(w.value).mul(Math.pow(10,(Qe=T.value)==null?void 0:Qe.decimals)).toString();pe=new je(Ce),yt.value={liquidityAmount:yi(he,de,pe),tokenMaxA:0,tokenMaxB:w.value}}}}else if(Ee<=ie){if(be.value=!ae,_e.value=ae,ae?P.value="":w.value="",w.value||P.value){let pe;if(ae){const Ce=new G(w.value).mul(Math.pow(10,T.value.decimals)).toString();pe=new je(Ce),yt.value={liquidityAmount:wi(he,de,pe),tokenMaxA:w.value,tokenMaxB:0}}else{const Ce=new G(P.value).mul(Math.pow(10,D.value.decimals)).toString();pe=new je(Ce),yt.value={liquidityAmount:wi(he,de,pe),tokenMaxA:P.value,tokenMaxB:0}}}}else be.value=!0,w.value="",_e.value=!0,P.value=""},Lt=k(0);oe(()=>Pe.query,y=>{y&&y.fee&&(Lt.value=y.fee)},{immediate:!0});const q=le(()=>{var x,L,z,Y,W;const y=(x=Pe==null?void 0:Pe.query)==null?void 0:x.fee;if(fe.value.newTokenObj&&T.value&&D.value&&y){let ne=null;for(const ie in fe.value.poolsObj){const K=fe.value.poolsObj[ie];(K.token_a.address.toUpperCase()===((L=T.value.address)==null?void 0:L.toUpperCase())&&K.token_b.address.toUpperCase()===((z=D.value.address)==null?void 0:z.toUpperCase())&&K.fee==Lt.value*100||K.token_b.address.toUpperCase()===((Y=T.value.address)==null?void 0:Y.toUpperCase())&&K.token_a.address.toUpperCase()===((W=D.value.address)==null?void 0:W.toUpperCase())&&K.fee==Lt.value*100)&&(ne=K)}return ne&&!ki(ne)?ne:null}return null}),ci=k({}),Zr=async(y,x)=>{if(y){const{TickMath:L,getNearestTickByTick:z}=Ht();x&&(Z.value=!0),y.token_a.address.toLowerCase()===T.value.address.toLowerCase()&&y.token_b.address.toLowerCase()===D.value.address.toLowerCase()?h.value=!0:h.value=!1,te.value=!0;const Y=y.token_a.decimals,W=y.token_b.decimals;be.value=!1,_e.value=!1,V.value=y.fee+"% "+e("common.feeTier");const ne=y.current_tick_index;_n.value=We(L.sqrtPriceX64ToPrice(y.current_sqrt_price,Y,W).toString(),6),ui.value=We(String(1/_n.value),6);const ie=await Je.getTicks(y);if(ue.value=Je.getTickDataFromUrlData(ie),x){let K=y.priceConfigObj;const he=ne-Number(q.value=="unstable"?q.value.tickSpacing*2:q.value.tickSpacing*3),de=ne+Number(q.value=="unstable"?q.value.tickSpacing*2:q.value.tickSpacing*3);K["Full Range"]={lower:-443630,upper:443630},K.Custom={lower:he,upper:de};const xe=[];for(let ke in K)xe.push({...K[ke],key:ke});if(ze.value=xe,y.type=="stable"?R.value="suggested":R.value="passive",ci.value=K,kn({key:R.value,...K[R.value]}),h.value){const ke=K[R.value].lower,Ee=K[R.value].upper,Re=L.tickIndexToPrice(ke,Y,W).toString(),ae=L.tickIndexToPrice(Ee,Y,W).toString();U.value=String(Re),F.value=String(Re),O.value=String(ae),C.value=String(ae)}else{const ke=K[R.value].lower,Ee=K[R.value].upper,Re=L.tickIndexToPrice(ke,Y,W).toString(),ae=L.tickIndexToPrice(Ee,Y,W).toString();U.value=String(1/Number(ae)),F.value=String(1/Number(ae)),O.value=String(1/Number(Re)),C.value=String(1/Number(Re))}}Z.value=!1}},fi=k();oe(()=>fe.value.RATES,y=>{y&&(fi.value=y)},{immediate:!0}),oe(()=>[q.value,w.value,P.value,fi.value,R.value],([y,x,L,z])=>{var Y,W;if(y&&(L||x)&&z&&z[y.token_a.name.toUpperCase()]&&z[y.token_b.name.toUpperCase()]){const ne=x?Number(x):0,ie=L?Number(L):0,K=ne*((Y=z[y.token_a.name.toUpperCase()])==null?void 0:Y.price),he=ie*((W=z[y.token_b.name.toUpperCase()])==null?void 0:W.price),de=K+he,xe=(K/de*100).toFixed(0),ke=(he/de*100).toFixed(0);Rt.value=xe,Ft.value=ke}else y&&z?(Rt.value="--",Ft.value="--"):(Rt.value="",Ft.value="")}),oe(()=>q.value,(y,x)=>{y?(!x||y.poolAddress!==x.poolAddress||y.current_sqrt_price!==x.current_sqrt_price)&&Zr(y,!x||y.poolAddress!==x.poolAddress):(F.value="0",C.value="0",w.value="",P.value="",V.value="",_.value=!1,be.value=!1,_e.value=!1)},{immediate:!0,deep:!0});const ot=le(()=>i.value.assets&&T.value&&i.value.assets[T.value.address]?Ci(i.value.assets[T.value.address].balance,T.value.decimals):0),at=le(()=>i.value.assets&&D.value&&i.value.assets[D.value.address]?Ci(i.value.assets[D.value.address].balance,D.value.decimals):0),eo=async()=>{var de,xe,ke,Ee,Re,ae;oi.value=!1,fe.value.currentPositionInfo={},li(""),Jr(e("tips.increaseLiquiditySuccess",{from:be.value?"":`${w.value} ${(de=T.value)==null?void 0:de.symbol}`,and:!be.value&&!_e.value?"and":"",to:_e.value?"":`${P.value} ${(xe=D.value)==null?void 0:xe.symbol}`})),xt(!0);const y=h.value?v.value:!v.value,x=q.value.priceConfigObj;let L,z,Y,W,ne,ie;const K=q.value.token_a.decimals,he=q.value.token_b.decimals;F.value==="0"&&C.value==="\u221E"?(Y=bi.getMinIndex(q.value.tickSpacing),W=bi.getMaxIndex(q.value.tickSpacing)):R.value=="Custom"?(h.value?(L=Number(F.value),z=Number(C.value)):(L=1/Number(C.value),z=1/Number(F.value)),ne=st.priceToTickIndex(new G(L),K,he),ie=st.priceToTickIndex(new G(z),K,he),Y=_i(ne,q.value.tickSpacing),W=_i(ie,q.value.tickSpacing)):(Y=x[R.value].lower,W=x[R.value].upper);try{const bt=await Je.getAddLiquidityTransactionPayload({pool:{poolAddress:q.value.poolAddress,token_a:q.value.token_a,token_b:q.value.token_b},amount:v.value?w.value:P.value,fix_amount_a:y,tick_lower:Y,tick_upper:W,index:0,slippage:Number(rt.value)/100,roundUp:!0});let Qe;if(Qe=await i.value.currentWallet.signAndSubmitTransaction(bt),Qe&&Qe.hash){li(Qe.hash),xt(!1),ai(!0);const pe={title:e("button.addLiquidity"),desc:e("tips.addLiquiditySuccessText",{from:be.value?"":`${w.value} ${(ke=T.value)==null?void 0:ke.symbol}`,and:!be.value&&!_e.value?"and":"",to:_e.value?"":`${P.value} ${(Ee=D.value)==null?void 0:Ee.symbol}`}),hash:Qe.hash,tit:`Opened Position: ${q.value.symbol}`,text:`Deopsit ${be.value?"":`${w.value} ${(Re=T.value)==null?void 0:Re.symbol}`} ${!be.value&&!_e.value?"and":""} ${_e.value?"":`${P.value} ${(ae=D.value)==null?void 0:ae.symbol}`}`};Je.showTransitionPending(pe);const Ce=await Je.watchTransaction(pe,!0);Ce.status&&(ai(!1),fe.value.setCurrentPositionLoading(!0),fe.value.setCurrentPositionInfo(Ce.nftInfo[0].data.id.creator,Ce.nftInfo[0].data.id.collection,Ce.nftInfo[0].data.name),u.value=!0,setTimeout(()=>{Et.updateCurrentPools(q.value.poolAddress),Je.getAccount(i.value.address)},1e3)),jr()}else xt(!1),si(!0);w.value="",P.value=""}catch{w.value="",P.value="",xt(!1),si(!0)}},to=y=>{switch(y){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"Full Range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"Custom":return e("newAdd.customTips")}},no=y=>{switch(y){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"Full Range":return e("newAdd.fullRange");case"Custom":return e("newAdd.custom")}},kn=y=>{R.value=y.key;const x=q.value.token_a.decimals,L=q.value.token_b.decimals,{lower:z,upper:Y}=y,W=st.tickIndexToPrice(z,x,L).toString(),ne=st.tickIndexToPrice(Y,x,L).toString();if(y.key=="Full Range"){wn.value=z,bn.value=Y,Ne(!0);return}h.value?(U.value=String(W),F.value=String(W),O.value=String(ne),C.value=String(ne),wn.value=z,bn.value=Y):(U.value=String(1/Number(ne)),F.value=String(1/Number(ne)),O.value=String(1/Number(W)),C.value=String(1/Number(W)),wn.value=st.priceToTickIndex(new G(1/Number(ne)),x,L),bn.value=st.priceToTickIndex(new G(1/Number(W)),x,L)),wt()},di=k(""),hi=k(""),mi=k(""),io=le(()=>r),ro=y=>{let x=0;return y&&y.forEach(L=>{x+=An(String(L))}),String(x)},pi=k([]),vi=k([]),gi=k(""),oo=(y,x)=>y&&x?At(Eo.plus(An(y),An(x)),2):y;oe(()=>[io.value.newTopPoolsObj,q.value,fe.value.newTokenObj],([y,x,L])=>{if(y&&x&&y[x.poolAddress]&&L){const z=y[x.poolAddress];di.value=z&&z.apr_7day,gi.value=oo(z&&z.apr_7day,z&&ro(z.rewarder_apr))+"%",hi.value=At(z.tvl_in_usd,2),mi.value=At(z.vol_in_usd_24h,2);const Y=x&&x.rewarder_infos||[],W=[];Y.forEach((ie,K)=>{const he=L[ie.coinAddress].decimals,de=We(ie.emissionsEveryDay/Math.pow(10,he),4),xe=We(Number(de)*fe.value.RATES[L[ie.coinAddress].name.toUpperCase()].price,4);W.push({...ie,logoUrl:L[ie.coinAddress].logoURI,day:de,dayUSD:xe,symbol:L[ie.coinAddress].symbol})}),pi.value=W;const ne=[];W.forEach((ie,K)=>{ne.push({...ie,symbol:L[ie.coinAddress].symbol,rewarderApr:z.rewarder_apr[K]})}),vi.value=ne}},{immediate:!0,deep:!0});const ao=le(()=>fe.value.newTokenObj&&T.value.address&&fe.value.newTokenObj[T.value.address]&&fe.value.newTokenObj[T.value.address].logoURI),so=le(()=>fe.value.newTokenObj&&D.value.address&&fe.value.newTokenObj[D.value.address]&&fe.value.newTokenObj[D.value.address].logoURI);return{selectFee:y=>{V.value=y.label,Lt.value=y.fee/100},isViewDetail:u,addCommom:sr,fromCoinUrl:ao,toCoinUrl:so,t:e,wallet:i,toAdd:eo,chartLoading:Z,currentTick:we,tickList:ue,poolInfo:q,storeIndex:yn,importIcon:un,refresh:I,addLiquidityBtnText:Pt,slippage:rt,isShowSwapSetting:c,autoRefreshTime:a,countdown:o,setMarketTimer:ri,marketTimer:s,loading:l,fromCoin:T,toCoin:D,openCoinSelect:Yr,onCoinSelect:Wr,existingCoins:p,lastSelectCoin:$,currentCoinKey:d,showCoinSelect:b,fromCoinAmount:w,toCoinAmount:P,maxBtnSelect:Gr,fixedFromCoin:v,isShowLiquidityModal:oi,direct:h,toggle:Kr,edit:_,inputValue:V,feeTierList:me,minPrice:F,maxPrice:C,invalidPriceRange:H,defaultMinPrice:U,defaultMaxPrice:O,priceRangeChangeMin:Oe,priceRangeChangeMax:Hr,toFullRange:Ne,unilateral:f,clearAll:Qr,clickClear:N,positionError:g,positionTips:Q,router:X,clickRefresh:B,fromCoinBlance:ot,toCoinBlance:at,showToCoinLock:_e,showFromCoinLock:be,currentPriceReverse:ui,currentPrice:_n,getPirceText:to,currentPriceTab:R,currentPriceTabList:ze,getPirceKey:no,priceTab:kn,apr:di,liquidityTvl:hi,vol24:mi,fromCoinRatio:Rt,toCoinRatio:Ft,aprRewardsParameter:se,aprRewardsDateList:j,aprTab:Me,reviseValue:$e,label:Ue,aprTitle:J,rewarderInfo:pi,rewarderArr:vi,rewardApr:gi}}}),df="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAJFBMVEVHcEwlW04mW04oXlEmW04SHx4jR0B2/9wQFBMVJyVk17szaV2jJaSaAAAABHRSTlMA8K8m/cUwkQAAAL5JREFUSMdjYMAKmBWFDBgIAUMXF2GCilQy2pyQ+Swu2EBHhyNIkgnIdMCjyCUUCMJgilxDMUFKRpsblBmCU9EUFxdPgooiU9ymElSEBEYVDR1FkaumElYUVp46qmjAFTGruE0lqMgQkaGnpYFAdvk2MJ2JpEgFUTQsL0cGVUiKRKCFDLGKiLKOKIdTGASjSYWWiogqMEYL1lFFWJoRTgYEFU0Bt6QIKEoBt6SwN43QWlJEKSKx4UZ+ExDUmAQAo9rc9CAs4WAAAAAASUVORK5CYII=",hf="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAeUExURUdwTANNcARNcAdKcgEdMQRNcBM8V3bI/2Gq2ihWdudYHvAAAAAEdFJOUwDwryb9xTCRAAAAuklEQVRIx2NgwAqYFYUMGAgBw9BQYYKKVFPcgpD5rKHYgItLIEiSCcgMwKMIiFxcXGGKQlwwQWqKWxiU6YpTEdCEEIKKXFLDXAgrQjJ0VNHQUdRBhCK38pRRRQOuiFk1jLAiQ0SGdksDgczyaWA6BUmRKqJoaC9HBhVIikShhQyxioiyjiiHUxgEo0mFloqIKjBGC9ZRRViaEUEGBBW5gltSBBSFgltS2JtGaC0pohSR2HAjvwkIakwCANqYbmgtLE7YAAAAAElFTkSuQmCC",mf=""+new URL("img-no-data_2x.e925467a.png",import.meta.url).href,pf=""+new URL("img-no-data_2x.8bc9afa2.png",import.meta.url).href;const it=e=>(cn("data-v-bf3dd6d1"),e=e(),fn(),e),vf={class:"pools-container"},gf={class:"title"},yf={class:"left"},wf={class:"right title-right"},bf=it(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),_f={class:"content"},kf={class:"content-left"},Cf={class:"content-left-bg"},Af={class:"content-left-title"},Sf={class:"coin-select"},If={class:"pool-fee-header"},Mf={key:0,class:"fee-container"},$f=["onClick"],Nf={key:0,src:Ro,alt:""},Tf={key:1,src:Fo,alt:""},Pf={class:"deposit-title"},xf={class:"card-container"},Ef={class:"card-item"},Rf={key:0,class:"unilateral"},Ff={key:0,src:lr,alt:""},Lf={key:1,src:ur,alt:""},Bf={key:2},Uf={class:"card-item"},Of={key:0,class:"unilateral"},qf={key:0,src:lr,alt:""},Df={key:1,src:ur,alt:""},Xf={key:2},zf={key:0,class:"deposit-ratio"},Vf={class:"lebal"},Hf=it(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-information"})],-1)),Kf={class:"text"},Yf=it(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-add"})],-1)),Wf={class:"pc-network"},Gf={class:"content-right"},Qf={class:"content-right-title"},Jf=it(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-information"})],-1)),jf={key:0,class:"price-tab"},Zf=["onClick"],ed={key:1,class:"current-price"},td={key:0,class:"coin"},nd={key:1,class:"coin"},id={key:2,class:"toggle"},rd=["src"],od=["src"],ad={key:3,class:"position-tips"},sd=["src"],ld={class:"tips"},ud={key:4,class:"position-tips"},cd=["src"],fd={class:"error"},dd={class:"d3-chart-box"},hd={key:0},md={key:0,class:"noDataImg",src:mf},pd={key:1,class:"noDataImg",src:pf},vd={key:2,class:"not-select-mask"},gd={key:0,class:"pool-info"},yd=it(()=>m("use",{"xlink:href":"#icon-icon_on"},null,-1)),wd=[yd],bd={key:0,class:"info-block-container"},_d={class:"info-block"},kd={class:"leabl"},Cd={class:"text"},Ad={class:"apr-hover-content"},Sd={class:"info-block"},Id={class:"leabl"},Md={class:"text"},$d={class:"info-block"},Nd={class:"leabl"},Td={class:"text"},Pd={class:"info-block"},xd={class:"leabl"},Ed={class:"text"},Rd={key:1,class:"pool-rewards-info"},Fd={class:"rewards-list-all"},Ld=it(()=>m("div",{class:"icon-sign"},null,-1)),Bd=["src"],Ud={class:"rewards-value"},Od=it(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-add"})],-1)),qd={class:"h5-network"};function Dd(e,t,n,i,r,a){var w,P,F,C,U,O,_,Q;const o=co,s=fo,u=Ho,l=Io,c=Ao,f=Yn,d=$o,p=fa,$=Rc,b=So,h=No,A=Mo,I=To,v=Po,N=cf;return M(),E("div",vf,[re(o),m("div",gf,[m("div",yf,[m("span",null,S(e.$t("common.concentratedLiquidity")),1)]),m("div",wf,[m("span",{class:"clear",onClick:t[0]||(t[0]=(...g)=>e.clearAll&&e.clearAll(...g))},S(e.$t("common.clearAll")),1),m("div",{class:"slippage-icon",onClick:t[1]||(t[1]=g=>e.isShowSwapSetting=!0)},[bf,m("span",null,S(e.slippage)+"%",1)]),re(s,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:t[2]||(t[2]=g=>e.clickRefresh())},null,8,["loading","auto-refresh-time","countdown"])])]),m("div",_f,[m("div",kf,[m("div",Cf,[m("div",Af,S(e.$t("common.selectPool")),1),m("div",Sf,[re(u,{"coin-icon":e.fromCoin?e.fromCoin.logoURI:"","coin-name":e.fromCoin&&e.fromCoin.symbol,coin:e.fromCoin,onClick:t[3]||(t[3]=g=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),re(u,{"coin-icon":e.toCoin?e.toCoin.logoURI:"","coin-name":e.toCoin&&e.toCoin.symbol,coin:e.toCoin,onClick:t[4]||(t[4]=g=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),m("div",{class:Se(["pool-fee",e.edit?"pool-fee-edit":""])},[m("div",If,[m("span",{class:Se(e.clickClear||!e.poolInfo?"fee-span":"")},S(e.clickClear||!e.poolInfo?"Fee tier":e.inputValue),3),ee("",!0)]),e.edit?(M(),E("div",Mf,[(M(!0),E(qt,null,Sn(e.feeTierList,(g,V)=>(M(),E("div",{key:V,class:Se(e.inputValue.includes(g.label)?"fee-item fee-item-active":"fee-item"),onClick:we=>e.selectFee(g)},[m("p",null,S(g.title),1),m("span",null,S(g.text),1),e.storeIndex.theme=="default"?(M(),E("img",Nf)):(M(),E("img",Tf))],10,$f))),128))])):ee("",!0)],2),m("div",Pf,S(e.$t("newAdd.depositAmounts")),1),m("div",xf,[m("div",Ef,[re(l,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[6]||(t[6]=g=>e.fromCoinAmount=g),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[7]||(t[7]=g=>e.maxBtnSelect("fromCoin")),onOnInput:t[8]||(t[8]=g=>{e.fromCoinAmount=g,e.fixedFromCoin=!0}),onOnSelect:t[9]||(t[9]=g=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock||!e.poolInfo?(M(),E("div",Rf,[m("div",null,[e.storeIndex.theme=="default"?(M(),E("img",Ff)):(M(),E("img",Lf)),e.fromCoin&&e.toCoin&&e.poolInfo?(M(),E("p",Bf,S(e.$t("tips.marketprice")),1)):ee("",!0)])])):ee("",!0)]),m("div",Uf,[re(l,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[10]||(t[10]=g=>e.toCoinAmount=g),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[11]||(t[11]=g=>e.maxBtnSelect("toCoin")),onOnInput:t[12]||(t[12]=g=>{e.toCoinAmount=g,e.fixedFromCoin=!1}),onOnSelect:t[13]||(t[13]=g=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock||!e.poolInfo?(M(),E("div",Of,[m("div",null,[e.storeIndex.theme=="default"?(M(),E("img",qf)):(M(),E("img",Df)),e.fromCoin&&e.toCoin&&e.poolInfo?(M(),E("p",Xf,S(e.$t("tips.marketprice")),1)):ee("",!0)])])):ee("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(M(),E("img",{key:0,class:"add",src:df,alt:"",onClick:t[14]||(t[14]=(...g)=>e.toggle&&e.toggle(...g))})):ee("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(M(),E("img",{key:1,class:"add",src:hf,alt:"",onClick:t[15]||(t[15]=(...g)=>e.toggle&&e.toggle(...g))})):ee("",!0)]),e.poolInfo?(M(),E("div",zf,[m("div",Vf,[Ae(S(e.$t("newAdd.depositRatio"))+" ",1),re(c,{placement:"bottom","arrow-point-at-center":""},{title:ye(()=>[m("span",null,S(e.$t("newAdd.depositRatioTips")),1)]),default:ye(()=>[Hf]),_:1})]),m("div",Kf,S(e.fromCoinRatio!=="--"?e.fromCoinRatio+"%":"--")+" "+S(e.fromCoinRatio!=="--"?e.fromCoin&&e.fromCoin.symbol:"")+" / "+S(e.toCoinRatio!=="--"?e.toCoinRatio+"%":"--")+" "+S(e.toCoinRatio!=="--"?e.toCoin&&e.toCoin.symbol:""),1)])):ee("",!0)]),re(f,{disabled:e.wallet.connected?!e.fromCoinAmount&&!e.toCoinAmount||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||Number(e.toCoinAmount)>Number(e.toCoinBlance)||e.addLiquidityBtnText!==e.$t("button.addLiquidity")||e.poolInfo.is_pause:!1,class:"big-btn",onClick:t[16]||(t[16]=g=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ye(()=>[Yf,m("span",null,S(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),m("div",Wf,[re(d)])]),m("div",Gf,[m("div",Qf,[Ae(S(e.$t("newAdd.selectRange"))+" ",1),re(c,{placement:"bottom","arrow-point-at-center":""},{title:ye(()=>[m("span",null,S(e.$t("newAdd.selectRangeTips")),1)]),default:ye(()=>[Jf]),_:1})]),m("div",{class:Se(e.clickClear||!e.fromCoin||!e.toCoin||!e.poolInfo?"content-right-bg content-right-bg-height":"content-right-bg")},[e.poolInfo?(M(),E("div",jf,[(M(!0),E(qt,null,Sn(e.currentPriceTabList,g=>(M(),E("div",{key:g,class:Se(["price-item",{"price-item-active":g.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:V=>e.priceTab(g)},[re(c,{placement:"bottom","arrow-point-at-center":""},{title:ye(()=>[m("span",null,S(e.getPirceText(g.key)),1)]),default:ye(()=>[Ae(" "+S(e.getPirceKey(g.key)),1)]),_:2},1024)],10,Zf))),128))])):ee("",!0),e.poolInfo?(M(),E("div",ed,[e.fromCoin&&e.toCoin&&e.direct?(M(),E("div",td,[m("span",null,S(e.$t("common.currentPrice")),1),Ae(" "+S(e.addCommom(e.currentPrice))+" "+S((w=e.toCoin)==null?void 0:w.symbol)+" per "+S((P=e.fromCoin)==null?void 0:P.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(M(),E("div",nd,[m("span",null,S(e.$t("common.currentPrice")),1),Ae(" "+S(e.addCommom(e.currentPriceReverse))+" "+S((F=e.toCoin)==null?void 0:F.symbol)+" per "+S((C=e.fromCoin)==null?void 0:C.symbol),1)])):ee("",!0),e.fromCoin&&e.toCoin?(M(),E("div",id,[m("div",{class:Se(e.direct?"item active-item":"item"),onClick:t[17]||(t[17]=g=>e.direct?"":e.toggle())},[m("img",{src:e.direct?e.fromCoin.logoURI:e.toCoin.logoURI,alt:""},null,8,rd),Ae(" "+S(e.direct?(U=e.fromCoin)==null?void 0:U.symbol:(O=e.toCoin)==null?void 0:O.symbol),1)],2),m("div",{class:Se(e.direct?"item ":"item active-item"),onClick:t[18]||(t[18]=g=>e.direct?e.toggle():"")},[m("img",{src:e.direct?e.toCoin.logoURI:e.fromCoin.logoURI,alt:""},null,8,od),Ae(" "+S(e.direct?(_=e.toCoin)==null?void 0:_.symbol:(Q=e.fromCoin)==null?void 0:Q.symbol),1)],2)])):ee("",!0)])):ee("",!0),e.poolInfo?(M(),Ye(p,{key:2,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):ee("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(M(),E("div",ad,[m("img",{src:e.importIcon("/image/icon-tips@2x.png"),alt:""},null,8,sd),m("p",ld,S(e.$t("tips.positionTips")),1)])):ee("",!0),e.positionError&&!e.clickClear&&e.poolInfo?(M(),E("div",ud,[m("img",{src:e.importIcon("/image/icon-tips-error@2x.png"),alt:""},null,8,cd),m("p",fd,S(e.$t("tips.positionError")),1)])):ee("",!0),m("div",dd,[(e.clickClear||!e.poolInfo)&&!e.chartLoading?(M(),E("div",hd,[e.storeIndex.theme=="default"?(M(),E("img",md)):(M(),E("img",pd)),m("p",null,S(e.$t("newAdd.positionAppear")),1)])):ee("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(M(),Ye($,{key:1,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","onOnChangeMinPrice","onOnChangeMaxPrice"])):ee("",!0),e.currentPriceTab!=="Custom"?(M(),E("div",vd)):ee("",!0),e.chartLoading?(M(),Ye(b,{key:3})):ee("",!0)])],2),e.poolInfo?(M(),E("div",gd,[e.apr&&e.liquidityTvl&&e.vol24?(M(),E(qt,{key:0},[m("div",{class:Se(e.label?"pool-info-border pool-info-title":"pool-info-title")},[Ae(S(e.$t("newAdd.poolInfo"))+" ",1),(M(),E("svg",{class:Se(e.label?"show-icon icon":"icon"),"aria-hidden":"true",onClick:t[19]||(t[19]=g=>e.reviseValue())},wd,2))],2),e.label?(M(),E("div",bd,[m("div",_d,[m("div",kd,S(e.$t("common.apr")),1),m("div",Cd,[Ae(S(e.poolInfo.is_display_rewarder?e.rewardApr:e.apr)+" ",1),m("div",Ad,[re(h,{class:Se(e.isShow?"showHover apr-hover-con":"noHover apr-hover-con"),"l-item":{apr:e.apr,aprTotal:e.rewardApr,is_display_rewarder:e.poolInfo.is_display_rewarder},"rewarder-info":e.rewarderArr},null,8,["class","l-item","rewarder-info"])])])]),m("div",Sd,[m("div",Id,S(e.$t("common.liquidity")),1),m("div",Md,"$ "+S(e.liquidityTvl),1)]),m("div",$d,[m("div",Nd,S(e.$t("common.volume24h")),1),m("div",Td,"$ "+S(e.vol24),1)]),m("div",Pd,[m("div",xd,S(e.$t("newAdd.tickSpacing")),1),m("div",Ed,S(e.poolInfo&&e.poolInfo.tick_spacing),1)])])):ee("",!0),e.poolInfo.is_display_rewarder&&e.label&&e.rewarderInfo&&e.rewarderInfo.length>0?(M(),E("div",Rd,[Ae(" Rewards "),m("div",Fd,[(M(!0),E(qt,null,Sn(e.rewarderInfo,g=>(M(),E("div",{key:g,class:"rewards-list"},[Ld,m("img",{src:g.logoUrl,alt:""},null,8,Bd),m("div",Ud,[m("p",null,[Ae(S(g.symbol)+" ",1),m("span",null,S(g.day)+" "+S(g.symbol)+" per day",1)])])]))),128))])])):ee("",!0)],64)):(M(),Ye(b,{key:1}))])):ee("",!0)])]),re(f,{disabled:e.wallet.connected?!e.fromCoinAmount&&!e.toCoinAmount||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||Number(e.toCoinAmount)>Number(e.toCoinBlance)||e.poolInfo.is_pause:!1,class:"big-btn h5-btn",onClick:t[20]||(t[20]=g=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ye(()=>[Od,m("span",null,S(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),m("div",qd,[re(d)]),e.showCoinSelect?(M(),Ye(A,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:t[21]||(t[21]=g=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):ee("",!0),e.isShowSwapSetting?(M(),Ye(I,{key:1,onOnClose:t[22]||(t[22]=g=>e.isShowSwapSetting=!1)})):ee("",!0),e.isShowLiquidityModal?(M(),Ye(v,{key:2,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"pool-info":e.poolInfo,onToAdd:e.toAdd,onOnClose:t[23]||(t[23]=g=>e.isShowLiquidityModal=!1)},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","min-price","max-price","current-price","current-price-reverse","pool-info","onToAdd"])):ee("",!0),e.isViewDetail?(M(),Ye(N,{key:3,onOnClose:t[24]||(t[24]=g=>e.isViewDetail=!1)})):ee("",!0)])}const oh=gt(ff,[["render",Dd],["__scopeId","data-v-bf3dd6d1"]]);export{oh as default};
