import{_ as io}from"./status-block.efc28dcb.js";import{a as M,u as X,l as P,i as U,g as B,h as v,c as Y}from"./import-icon.080103e6.js";import{a as V,J as Z,r as F,f as c,i as H,o as l,j as p,k as n,x as y,y as $,t as s,m as L,l as O,u as a,S as to,p as J,q as z,w as D,h as ao,c as x,v as q,O as lo,B as oo,M as ro,H as mo}from"./entry.89e1e41e.js";/* empty css              */import{_ as no,a as eo}from"./icon-arrow_2x.45808d19.js";import{_ as so}from"./c-switch.e73389d7.js";import{u as uo}from"./notifi.efb94f1e.js";const po=V({props:{positionInfo:{type:Object,required:!0,default:()=>({})}},setup(o){const{t:f}=Z();let b=F(!1),S=F(!0);const g=M(),_=X(),e=c(()=>_);console.log(o.positionInfo,"===>props.positionInfo");const r=c(()=>{var i,d,k,h,w,N,A,j;if(Y(o.positionInfo))return" --";{const T=o.positionInfo.amountA*((d=e.value.RATES[(i=o.positionInfo)==null?void 0:i.token_a.address])==null?void 0:d.price),E=o.positionInfo.amountB*((h=e.value.RATES[(k=o.positionInfo)==null?void 0:k.token_b.address])==null?void 0:h.price);return(N=e.value.RATES[(w=o.positionInfo)==null?void 0:w.token_a.address])!=null&&N.price&&((j=e.value.RATES[(A=o.positionInfo)==null?void 0:A.token_b.address])!=null&&j.price)?T+E:" --"}}),m=c(()=>{var i,d,k,h;return(d=e.value.RATES[(i=o.positionInfo)==null?void 0:i.token_a.name.toUpperCase()])!=null&&d.price&&r.value!=="--"?(o.positionInfo.amountA*((h=e.value.RATES[(k=o.positionInfo)==null?void 0:k.token_a.name.toUpperCase()])==null?void 0:h.price)/r.value*100).toFixed(0):" --"}),I=c(()=>{var i,d,k,h;return(d=e.value.RATES[(i=o.positionInfo)==null?void 0:i.token_b.name.toUpperCase()])!=null&&d.price&&r.value!=="--"?(o.positionInfo.amountB*((h=e.value.RATES[(k=o.positionInfo)==null?void 0:k.token_b.name.toUpperCase()])==null?void 0:h.price)/r.value*100).toFixed(0):" --"}),t=c(()=>e.value.allTokenObj&&o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.address&&e.value.allTokenObj[o.positionInfo.token_a.address]&&e.value.allTokenObj[o.positionInfo.token_a.address].logoURI),u=c(()=>e.value.allTokenObj&&o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.address&&e.value.allTokenObj[o.positionInfo.token_b.address]&&e.value.allTokenObj[o.positionInfo.token_b.address].logoURI),C=c(()=>{var i,d;return(d=(i=o.positionInfo)==null?void 0:i.poolInfo)==null?void 0:d.needReverse});return{fromPercent:I,toPercent:m,amountUSD:r,showNum:P,t:f,importIcon:U,indexStore:g,rateChange:S,decimalFormat:B,fromCoinUrl:t,toCoinUrl:u,pools:e,addCommom:v,isPc:b,needReverse:C,getCoinIcon:i=>{var d;return(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((d=e.value.tokensObj[i==null?void 0:i.address])==null?void 0:d.logo_url)||(g.theme==="default"?U("/image/coins/unknown.png"):U("/image/coins/sui-unknown.png"))}}}});const fo=o=>(J("data-v-ef60e18d"),o=o(),z(),o),co={key:0,class:"position-card"},Io={key:0,class:"coin-pair"},ko=["src"],ho=["src"],vo={key:1,class:"coin-pair"},bo=["src"],go=["src"],_o={class:"fee"},Co={class:"right"},So={key:0,class:"status"},yo={class:"min-and-max"},$o={key:0},wo={class:"text"},Uo={key:0,src:no,alt:""},Oo={key:1,src:eo,alt:""},Ro={class:"text"},Po={key:1},No={class:"text"},Ao={key:0,src:no,alt:""},jo={key:1,src:eo,alt:""},Bo={class:"text"},To=fo(()=>n("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Eo=[To],Fo={class:"liquidity"},Do={class:"label"},Lo={class:"value"},qo={class:"item"},Mo=["src"],Vo={class:"rate"},Ho={class:"item"},Jo=["src"],zo={class:"rate"};function Go(o,f,b,S,g,_){const e=to,r=io;return o.positionInfo?(l(),p("div",co,[n("div",{class:L(["left",`position-status-${o.positionInfo&&o.positionInfo.currentStatus&&o.positionInfo.currentStatus.toLowerCase()}`])},[y(e,{class:"left-skeleton",loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:$(()=>[o.needReverse?(l(),p("div",vo,[n("div",null,[n("img",{src:o.toCoinUrl||o.getCoinIcon(o.positionInfo.token_b)},null,8,bo),n("img",{src:o.fromCoinUrl||o.getCoinIcon(o.positionInfo.token_a)},null,8,go)]),n("span",null,s(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol)+" - "+s(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)])):(l(),p("div",Io,[n("div",null,[n("img",{src:o.fromCoinUrl||o.getCoinIcon(o.positionInfo.token_a)},null,8,ko),n("img",{src:o.toCoinUrl||o.getCoinIcon(o.positionInfo.token_b)},null,8,ho)]),n("span",null,s(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" - "+s(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)])),n("div",_o,s(o.$t("common.fee"))+" "+s(o.positionInfo.fee*100)+"%",1)]),_:1},8,["loading"])],2),n("div",Co,[o.pools.currentPositionLoading?O("",!0):(l(),p("div",So,[y(r,{"current-status":o.positionInfo.currentStatus||"","block-name":"detail"},null,8,["current-status"])])),y(e,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:$(()=>[n("div",yo,[(o.needReverse?!o.rateChange:o.rateChange)?(l(),p("div",$o,[n("div",wo,s(("addCommom"in o?o.addCommom:a(v))(("decimalFormat"in o?o.decimalFormat:a(B))(String(o.positionInfo.minPrice),6),6)),1),o.indexStore.theme=="default"?(l(),p("img",Uo)):(l(),p("img",Oo)),n("div",Ro,s(o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("∞")>-1||o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in o?o.addCommom:a(v))(("decimalFormat"in o?o.decimalFormat:a(B))(String(o.positionInfo.maxPrice),6),6))+" "+s(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol)+" per "+s(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)])):(l(),p("div",Po,[n("div",No,s(("addCommom"in o?o.addCommom:a(v))(("decimalFormat"in o?o.decimalFormat:a(B))(String(1/Number(o.positionInfo.maxPrice)),6),6)),1),o.indexStore.theme=="default"?(l(),p("img",Ao)):(l(),p("img",jo)),n("div",Bo,s(o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("∞")>-1||o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in o?o.addCommom:a(v))(("decimalFormat"in o?o.decimalFormat:a(B))(String(1/Number(o.positionInfo.minPrice)),6),6))+" "+s(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" per "+s(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)])),(l(),p("svg",{class:"icon-change","aria-hidden":"true",onClick:f[0]||(f[0]=m=>o.rateChange=!o.rateChange)},Eo))])]),_:1},8,["loading"]),n("div",Fo,[y(e,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:$(()=>[n("div",Do,s(o.$t("common.liquidity")),1),n("div",Lo," $"+s(o.amountUSD=="--"?"--":Number(o.amountUSD)==0?0:Number(o.amountUSD)<.01?"<0.01":("addCommom"in o?o.addCommom:a(v))(o.amountUSD,2)),1)]),_:1},8,["loading"])]),n("div",{class:L(o.needReverse?"token-num reverse":"token-num")},[y(e,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:$(()=>{var m,I,t,u,C,R,i,d,k,h,w,N,A,j,T,E,G,K,Q,W;return[n("div",qo,[n("div",null,[n("img",{src:o.fromCoinUrl||o.getCoinIcon((m=o.positionInfo)==null?void 0:m.token_a)},null,8,Mo),n("p",null,s(("showNum"in o?o.showNum:a(P))((I=o.positionInfo)==null?void 0:I.amountA,(u=(t=o.positionInfo)==null?void 0:t.token_a)==null?void 0:u.decimals)),1),n("span",null,s((R=(C=o.positionInfo)==null?void 0:C.token_a)==null?void 0:R.symbol)+" "+s((d=(i=o.positionInfo)==null?void 0:i.token_a)!=null&&d.labels&&((h=(k=o.positionInfo)==null?void 0:k.token_a)!=null&&h.labels[0])?`(${o.positionInfo.token_a.labels[0]})`:""),1)]),n("div",Vo,s(("addCommom"in o?o.addCommom:a(v))(o.positionInfo.fromPercent,0))+"% ",1)]),n("div",Ho,[n("div",null,[n("img",{src:o.toCoinUrl||o.getCoinIcon((w=o.positionInfo)==null?void 0:w.token_b)},null,8,Jo),n("p",null,s(("showNum"in o?o.showNum:a(P))((N=o.positionInfo)==null?void 0:N.amountB,(j=(A=o.positionInfo)==null?void 0:A.token_b)==null?void 0:j.decimals)),1),n("span",null,s((E=(T=o.positionInfo)==null?void 0:T.token_b)==null?void 0:E.symbol)+" "+s((K=(G=o.positionInfo)==null?void 0:G.token_b)!=null&&K.labels&&((W=(Q=o.positionInfo)==null?void 0:Q.token_b)!=null&&W.labels[0])?`(${o.positionInfo.token_b.labels[0]})`:""),1)]),n("div",zo,s(("addCommom"in o?o.addCommom:a(v))(o.positionInfo.toPercent,0))+"%",1)])]}),_:1},8,["loading"])],2)])])):O("",!0)}const bn=H(po,[["render",Go],["__scopeId","data-v-ef60e18d"]]),Ko=V({components:{CSwitch:so},props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const f=uo(),b=c(()=>f),S=c(()=>b.value.status),g=M();D(()=>[b.value.targetGroups],t=>{console.log("0327###watch###newTargetGoups###",t)},{immediate:!0});const _=F(!1);D(()=>S.value,t=>{t=="authenticated",_.value=!1},{immediate:!0});const e=F(!1),r=async()=>{e.value=!e.value;const t={pool_address:o.positionInfo.poolAddress,position_index:o.positionInfo.index},u=o.positionInfo.nftHash;await f.subscribePosition(t,u,e.value)},m=t=>{const u=t.sources;e.value=u.some(C=>JSON.parse(C.blockchainAddress).pool_address==o.positionInfo.poolAddress&&Number(JSON.parse(C.blockchainAddress).position_index)==Number(o.positionInfo.index))},I=ao();return console.log(I.currentRoute.value.query.token,"===>rouyter"),D(()=>[b.value.sourceGroups,o.positionInfo],([t,u])=>{var C,R,i;console.log(t,"==>newSourceGroups169"),console.log(u,"===>positionInfo170"),e.value=!1,t&&t.length>0&&t[0]&&u&&!Y(u)&&((i=(R=(C=I==null?void 0:I.currentRoute)==null?void 0:C.value)==null?void 0:R.query)==null?void 0:i.token)==(u==null?void 0:u.name)&&(console.log("触发"),console.log(t,"==>newSourceGroups"),console.log(u,"===>positionInfo"),m(t[0]))},{immediate:!0,deep:!0}),{importIcon:U,isShowSetUp:_,changeSwitch:r,checked:e,notifiStatus:S,store:g}}});const Qo=o=>(J("data-v-7a8bd083"),o=o(),z(),o),Wo={class:"range-alerts"},Xo={class:"range-alerts-top"},Yo={class:"title"},Zo=Qo(()=>n("div",{class:"title-all"},[n("span",{class:"Range"},"Range Alerts")],-1)),xo={key:1,class:"h5-switch-box"},on={class:"range-alerts-bottom"},nn={key:0,class:"pc-switch-box"};function en(o,f,b,S,g,_){const e=oo,r=so;return l(),p("div",Wo,[n("div",Xo,[n("div",Yo,[Zo,o.isShowSetUp||o.notifiStatus!=="authenticated"?(l(),x(e,{key:0,class:"range-alerts-button",onClick:f[0]||(f[0]=lo(m=>o.store.setIsShowNotifi(!0),["stop"]))},{default:$(()=>[q(" Set up ")]),_:1})):O("",!0),!o.isShowSetUp&&o.notifiStatus=="authenticated"?(l(),p("div",xo,[y(r,{checked:o.checked,disabled:o.notifiStatus!=="authenticated",onChange:o.changeSwitch},null,8,["checked","disabled","onChange"])])):O("",!0)])]),n("div",on,[q(" Receive alerts via Telegram, SMS, or email when this position goes out of range. "),!o.isShowSetUp&&o.notifiStatus=="authenticated"?(l(),p("div",nn,[y(r,{checked:o.checked,disabled:o.notifiStatus!=="authenticated",onChange:o.changeSwitch},null,8,["checked","disabled","onChange"])])):O("",!0)])])}const gn=H(Ko,[["render",en],["__scopeId","data-v-7a8bd083"]]),sn=V({components:{Modal:ro},props:{positionInfo:{type:Object,required:!0},isLoading:{type:Boolean,required:!0},needReverse:{type:Boolean,required:!1}},setup(o,f){const{t:b,locale:S}=Z(),g=M(),{copy:_}=g,e=()=>{f.emit("toClaim")},r=X(),m=c(()=>r),I=c(()=>m.value.tokensObj&&o.positionInfo.token_a.address&&m.value.tokensObj[o.positionInfo.token_a.address]&&m.value.tokensObj[o.positionInfo.token_a.address].logoURI),t=c(()=>m.value.tokensObj&&o.positionInfo.token_b.address&&m.value.tokensObj[o.positionInfo.token_b.address]&&m.value.tokensObj[o.positionInfo.token_b.address].logoURI);return{showNum:P,fromCoinUrl:I,toCoinUrl:t,toClaim:e,t:b,addCommom:v,importIcon:U,store:g,copy:_}}});const tn=o=>(J("data-v-0d5910fb"),o=o(),z(),o),an=tn(()=>n("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ln={key:0,class:"pc-claim"},dn=["src"],rn={key:1,class:"pc-claim"},mn=["src"];function un(o,f,b,S,g,_){const e=oo,r=mo("Modal");return l(),x(r,{visible:!0,class:"claim-fees",centered:"",closable:!0,title:o.$t("modal.claimFees"),width:"400px",footer:null,onCancel:f[0]||(f[0]=m=>o.$emit("onClose"))},{closeIcon:$(()=>[an]),default:$(()=>[n("div",{class:L(o.needReverse?"claim-container reverse":"claim-container")},[o.positionInfo&&o.positionInfo.token_a.symbol?(l(),p("div",ln,[n("img",{src:o.fromCoinUrl||("importIcon"in o?o.importIcon:a(U))(`/image/coins/${o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,dn),n("span",null,s(("showNum"in o?o.showNum:a(P))(o.positionInfo.feeOwedA,o.positionInfo.token_a.decimals))+" "+s(o.positionInfo.token_a.symbol),1)])):O("",!0),o.positionInfo&&o.positionInfo.token_b.symbol?(l(),p("div",rn,[n("img",{src:o.toCoinUrl||("importIcon"in o?o.importIcon:a(U))(`/image/coins/${o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,mn),n("span",null,s(("showNum"in o?o.showNum:a(P))(o.positionInfo.feeOwedB,o.positionInfo.token_b.decimals))+" "+s(o.positionInfo.token_b.symbol),1)])):O("",!0)],2),y(e,{class:"big-btn claim-btn",disabled:o.isLoading||("addCommom"in o?o.addCommom:a(v))(o.positionInfo.feeOwedA,o.positionInfo.token_a.decimals)==0&&("addCommom"in o?o.addCommom:a(v))(o.positionInfo.feeOwedB,o.positionInfo.token_b.decimals)==0||o.positionInfo.poolInfo.is_pause,onClick:o.toClaim},{default:$(()=>[q(s(o.$t("common.claim")),1)]),_:1},8,["disabled","onClick"])]),_:1},8,["title"])}const _n=H(sn,[["render",un],["__scopeId","data-v-0d5910fb"]]);export{bn as _,gn as a,_n as b};
