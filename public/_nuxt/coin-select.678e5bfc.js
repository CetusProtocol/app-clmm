import{_ as ne}from"./token-warning.a2daa492.js";import{i as y}from"./import-icon.de3e6c66.js";import{a as K,j as oe,u as te,h as B,D as pe,f as ve,b as be,p as he}from"./pool.0863905e.js";import{a as se,l as ae,m as h,a1 as _e,a2 as le,A as E,e as ie,o as s,f as l,h as t,c as T,t as m,x as Z,u as g,i as O,w as f,s as j,j as z,I as ke,J as re,a9 as fe,S as ge,B as ye,p as de,k as ue,M as we,r as A,v as $e,aa as Ce,K as H,E as Se,a3 as Ie,F as x,q as ee,D as Le,ab as Te}from"./entry.859f98b2.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{_ as Oe,a as je}from"./img-no-Positions_2x.ea414b20.js";const Ne=se({components:{TokenWarning:ne},props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,r){const{t:a,locale:q}=ae(),M=K(),_=h(()=>M),w=h(()=>new pe(Number(e.balance)).div(2)),p=_e(le,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function I(){this.$emit("onSelect")}const $=u=>{const b=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(k==null?void 0:k.value)&&(k==null?void 0:k.value)}})?).*$`);u.target.value=u.target.value.replace(b,"$1")},L=oe(),v=h(()=>L),o=te(),d=h(()=>o);let C={};E(()=>d.value.RATES,u=>{u&&(C=u)},{immediate:!0});const P=h(()=>ve(Number(e.inputValue)*Number(C&&C[e.address]&&C[e.address].price),2)),N=h(()=>{var u,b;return d.value.tokensObj&&e.address&&d.value.tokensObj[e.address]&&((u=d.value.tokensObj[e.address])==null?void 0:u.labels)&&((b=d.value.tokensObj[e.address])==null?void 0:b.labels[0])}),k=h(()=>{var u;return d.value.tokensObj&&e.address&&d.value.tokensObj[e.address]&&((u=d.value.tokensObj[e.address])==null?void 0:u.decimals)}),R=h(()=>{var u,b;return e.coinIcon||((b=(u=d==null?void 0:d.value)==null?void 0:u.tokensObj[e.address])==null?void 0:b.logo_url)||(_.value.theme==="default"?y("/image/coins/unknown.png"):y("/image/coins/sui-unknown.png"))}),U=h(()=>d.value.tokensObj);return{theme:h(()=>_.value.theme),currentIcon:R,tokensObj:U,pool:d,halfBalance:w,coinLabels:N,t:a,addCommom:B,store:_,wallet:v,indicator:p,inputChange:$,importIcon:y,selectCoin:I,amountPirce:P,coinDecimals:k}}});const Ae=e=>(de("data-v-80d76574"),e=e(),ue(),e),Be={class:"card"},De={class:"top"},Me={key:1,class:"input-div"},Pe={key:0},Re={class:"loading-token"},Ve=["src","onerror"],Fe={key:0},ze=Ae(()=>t("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ee=[ze],Ze={class:"bottom"},qe={key:0,class:"amount-price"},Ue={key:1},We={class:"top"},He={class:"right"},Ke={class:"balance"};function Je(e,r,a,q,M,_){const w=ke,p=re,I=fe,$=ne,L=ge,v=ye;return s(),l("div",Be,[t("div",De,[e.inputDisabled?(s(),l("div",Me,[e.inputValue?(s(),l("span",Pe,m(e.inputValue),1)):(s(),T(p,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(s(),T(w,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:r[0]||(r[0]=o=>e.$emit("onInput",o.target.value)),onFocus:r[1]||(r[1]=o=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),t("div",{class:Z(["left",e.hasArrow?"":"nohands"]),onClick:r[2]||(r[2]=o=>e.hasArrow&&!e.pool.isTokenLoading?e.selectCoin():"")},[t("div",Re,[e.pool.isTokenLoading?(s(),T(I,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):(s(),l("img",{key:1,src:e.currentIcon,onerror:e.theme=="default"?("importIcon"in e?e.importIcon:g(y))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(y))("/image/coins/sui-unknown.png")},null,8,Ve)),O($,{address:e.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),O(L,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:f(()=>[t("div",null,[t("p",null,m(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(s(),l("p",Fe,m(e.coinLabels),1)):j("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(s(),l("svg",{key:0,class:Z(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},Ee,2)):j("",!0)],2)]),t("div",Ze,[e.inputValue&&e.amountPirce!="--"?(s(),l("div",qe," $"+m(e.amountPirce),1)):(s(),l("div",Ue)),t("div",We,[t("div",He,[z(m(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),t("span",Ke,m(e.wallet.connected?("addCommom"in e?e.addCommom:g(B))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(s(),T(v,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:g(B))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:r[3]||(r[3]=o=>e.$emit("onHalf"))},{default:f(()=>[z(m("Half"))]),_:1},8,["disabled"])):j("",!0),e.havemax&&e.wallet.connected?(s(),T(v,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:g(B))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:r[4]||(r[4]=o=>e.$emit("onMax"))},{default:f(()=>[z(m(e.$t("button.max")),1)]),_:1},8,["disabled"])):j("",!0)])])])])}const Vn=ie(Ne,[["render",Je],["__scopeId","data-v-80d76574"]]);const Ge=se({components:{Modal:we,LoadingOutlined:le},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""}},setup(e,r){const{t:a,locale:q}=ae(),M=oe(),_=h(()=>M),w=te(),p=h(()=>w),I=K(),$=h(()=>I),L=A([a("tab.all"),a("tab.native"),a("tab.layerZero"),a("tab.wormhole"),a("tab.celer")]),v=A(a("tab.all")),o=A(a("tab.all")),d=K(),C=h(()=>d.chainName),P=A([]),N=A(null);$e(()=>{});const k=A(!1);E(v,i=>{i!==a("tab.all")&&(k.value=!1),i==a("tab.all")?o.value=a("tab.all"):i==a("tab.layerZero")?o.value=a("tab.layerZero"):i==a("tab.wormhole")?o.value=a("tab.wormhole"):i==a("tab.celer")?o.value=a("tab.celer"):i==a("tab.native")&&(o.value=a("tab.native")),R(N.value)});const R=async i=>{var J,G,Q,X,Y;let u=[],b=p.value.tokens;if(!($.value.chainName&&b&&b[0]&&$.value.chainName.toLowerCase().includes((J=b[0])==null?void 0:J.chain))){P.value=[];return}let W=b;if(i&&i.split("::")&&i.split("::").length==3&&C.value=="Sui"){const c=be("Sui");try{const n=p.value.tokensObj[i]||await c.getTokenBySymbol(p.value.tokens,i);n&&((G=b.filter(S=>(S==null?void 0:S.address)===(n==null?void 0:n.address)))==null?void 0:G.length)<1&&(w.setNewTokens({[i]:n}),W=b.concat(n))}catch{}}for(const c of Object.keys(W)){let n=Ce(W[c]);const S=_.value.assets[n.address]&&_.value.assets[n.address].balance?he(_.value.assets&&_.value.assets[n.address].balance,n.decimals):0;e.lastSelectCoin&&n&&n.address===e.lastSelectCoin?n.unusable=!0:n.unusable=!1;const ce=((Q=p.value.tokensObj[n.address])==null?void 0:Q.labels)&&((X=p.value.tokensObj[n.address])==null?void 0:X.labels[0]),me=p.value.tokensObj[n.address]?(Y=p.value.tokensObj[n.address])==null?void 0:Y.name:n.name;n={...n,balance:S,labels:ce,name:me,sort:n.symbol=="APT"||n.symbol=="SUI"?1:-1},u.push(n)}let V;_.value.address?V=u.sort((c,n)=>n.coin_priority>c.coin_priority?1:-1).sort((c,n)=>n.balance-c.balance):V=u.sort((c,n)=>n.coin_priority>c.coin_priority?1:-1);let F=[];if(i){const c=V.filter(n=>n.symbol.toLowerCase().indexOf(i.toLowerCase())!==-1||n.address.toLowerCase().indexOf(i.toLowerCase())!==-1);v.value!==a("tab.all")?F=c.filter(S=>v.value==a("tab.native")?!S.labels:S.labels&&S.labels.toLowerCase()==v.value.toLowerCase()):F=c}else v.value!==a("tab.all")?F=V.filter(n=>v.value==a("tab.native")?!n.labels:n.labels&&n.labels.toLowerCase()==v.value.toLowerCase()):F=V;P.value=F.sort((c,n)=>n.sort-c.sort).sort((c,n)=>n.unusable-c.unusable)},U=i=>{r.emit("onSelect",i),r.emit("onClose")};return E(()=>[N.value,k.value],([i,u])=>{R(i)},{immediate:!0}),E(()=>p.value.tokens,i=>{i&&R(N.value)},{immediate:!0}),{pools:p,t:a,chainName:C,tabList:L,currentTab:v,addCommom:B,tokenList:P,importIcon:y,keyword:N,wallet:_,toSelect:U,store:$,isShowAll:k}}}),Qe=""+globalThis.__publicAssetsURL("image/warning@2x.png");const D=e=>(de("data-v-20cbdee5"),e=e(),ue(),e),Xe=D(()=>t("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ye={class:"coin-select-modal"},xe={class:"search-input"},en=["placeholder"],nn=D(()=>t("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),on=[nn],tn={key:0,class:"tab-list"},sn=["onClick"],an={class:"item"},ln=D(()=>t("div",{class:"line"},null,-1)),rn={class:"coin-list-box"},dn={key:0,class:"coin-list"},un=["onClick"],cn={class:"left"},mn=["src"],pn=["src"],vn={class:"name-box"},bn=D(()=>t("img",{src:Qe,alt:""},null,-1)),hn={class:"balance-box"},_n={class:"balance"},kn={key:0},fn={key:1},gn={key:2},yn=D(()=>t("p",null,null,-1)),wn={key:1,class:"no-data"},$n={key:0,class:"token-loading"},Cn={key:1,class:"no-data-content"},Sn={key:0,src:Oe},In={key:1,src:je},Ln=D(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-information"})],-1));function Tn(e,r,a,q,M,_){const w=Le,p=H("loading-outlined"),I=Te,$=re,L=H("vue-scroll"),v=H("Modal");return s(),T(v,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:r[2]||(r[2]=o=>e.$emit("onClose"))},{closeIcon:f(()=>[Xe]),default:f(()=>[t("div",Ye,[t("div",xe,[Se(t("input",{"onUpdate:modelValue":r[0]||(r[0]=o=>e.keyword=o),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,en),[[Ie,e.keyword]]),e.keyword?(s(),l("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:r[1]||(r[1]=o=>e.keyword="")},on)):j("",!0)]),e.chainName!=="Sui"?(s(),l("div",tn,[(s(!0),l(x,null,ee(e.tabList,(o,d)=>(s(),l("div",{key:d,class:Z(["item-container",e.currentTab==o?"item-container-active item-container":"item-container"]),onClick:C=>e.currentTab=o},[t("div",an,m(o),1)],10,sn))),128))])):j("",!0),ln,t("div",rn,[O(L,null,{default:f(()=>[e.tokenList&&e.tokenList.length>0?(s(),l("ul",dn,[(s(!0),l(x,null,ee(e.tokenList,(o,d)=>(s(),l("li",{key:d,class:Z(o.unusable?"unusable":""),onClick:C=>e.toSelect(o)},[t("div",cn,[o.isChinaToken?(s(),l("img",{key:1,src:e.store.theme=="default"?("importIcon"in e?e.importIcon:g(y))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(y))("/image/coins/sui-unknown.png"),alt:""},null,8,pn)):(s(),l("img",{key:0,src:o.icon||o.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:g(y))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(y))("/image/coins/sui-unknown.png"))},null,8,mn)),t("div",vn,[t("span",null,[z(m(o.symbol)+" ",1),o.isSelfBuilt?(s(),T(w,{key:0,placement:"right","arrow-point-at-center":""},{title:f(()=>[t("span",null,m(e.t("newAdd.notCetusTokenList")),1)]),default:f(()=>[bn]),_:1})):j("",!0)]),t("p",null,m(o.name)+" "+m(o.labels?`(${o.labels})`:""),1)])]),t("div",hn,[t("div",_n,[e.wallet.loading?(s(),l("div",kn,[O(I,null,{default:f(()=>[O(p)]),_:1})])):o.balance&&e.wallet.connected?(s(),l("div",fn,m(("addCommom"in e?e.addCommom:g(B))(o.balance,o.decimals)),1)):(s(),l("div",gn,"0"))]),yn])],10,un))),128))])):(s(),l("div",wn,[e.pools.isTokenLoading?(s(),l("div",$n,[O($)])):(s(),l("div",Cn,[e.store.theme=="default"?(s(),l("img",Sn)):(s(),l("img",In)),t("p",null,m(e.t("newAdd.noTokensFound")),1),t("div",null,[z(m(e.t("newAdd.enterCoinType"))+" ",1),O(w,{placement:"bottom","arrow-point-at-center":""},{title:f(()=>[t("span",null,m(e.t("newAdd.uniqueIdOfCoin")),1)]),default:f(()=>[Ln]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const Fn=ie(Ge,[["render",Tn],["__scopeId","data-v-20cbdee5"]]);export{Vn as _,Fn as a};
