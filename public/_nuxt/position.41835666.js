import{_ as Ee}from"./upgrade-select-input.c3ce3226.js";import{_ as Fe}from"./upgrade-loading.c8c61430.js";import{_ as Ve}from"./status-block.404de548.js";import{g as me,a as He,u as $e,s as Ge,j as ue,e as u,i as qe,b as Me,c as pe,d as c,D as We}from"./pool.db0a93d7.js";import{a as be,l as ge,m as v,e as Ie,o as r,f as i,h as s,i as H,u as n,v as t,c as Re,w as ke,x as g,j as J,z as x,N as ze,p as we,k as ye,b as Ue,r as f,D as Y,y as Ce,q as Je,t as F,F as W,s as z,S as Ke,C as Ze,O as Qe,U as Xe,L as _e,B as Ye}from"./entry.c54e8603.js";/* empty css              */import{u as fe,c as Ne,a as xe}from"./sha256.08c47c44.js";/* empty css              */import{i as ne}from"./import-icon.de3e6c66.js";import{_ as Ae}from"./icon-arrow_2x.948aedb2.js";import{_ as Se}from"./icon-arrow_2x.4ffddb8e.js";import{u as es}from"./notifi.4adb468a.js";import{_ as Pe}from"./icon_on_2x.5e96733d.js";import{_ as ss,a as os}from"./img-no-Positions_2x.a2f620c6.js";import{_ as as,a as ns}from"./img-connect-wallet_2x.be0c9db0.js";import"./coin-select.56206d4c.js";/* empty css              *//* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";import"./useWhale.67e1771e.js";import"./index.0bfe35b7.js";const ts=be({props:{pItem:{type:Object,required:!0},currentStatus:{type:String,required:!0},rewarderInfo:{type:Number,required:!0},aprAmount:{type:Number,required:!0}},setup(e){const{t:b}=ge(),j=fe(),C=v(()=>j),w=v(()=>C.value.chainName),T=v(()=>Ne[w.value]);return{getExplorerUrl:me,store:C,config:T,t:b}}});const Oe=e=>(we("data-v-4530e4e6"),e=e(),ye(),e),rs={class:"status-block-box"},is={key:0,class:"owner-addres"},ds=["href"],ls=["href"],ms={class:"copy-link"},us=Oe(()=>s("use",{"xlink:href":"#icon-icon-copy"},null,-1)),ps=["href"],cs=Oe(()=>s("svg",{class:"icon","aria-hidden":"true"},[J(" > "),s("use",{"xlink:href":"#icon-icon-link"})],-1)),vs=[cs];function hs(e,b,j,C,w,T){const y=Ve,p=ze;return r(),i("div",{class:x(["upgrade-position-status",`position-status-${e.pItem.currentStatus.toLowerCase()}`])},[s("div",rs,[H(y,{class:"status-block","current-status":e.pItem.currentStatus||"","is-pause":e.pItem.is_pause,"apr-amount":e.aprAmount,"block-name":"position"},null,8,["current-status","is-pause","apr-amount"])]),e.pItem.tokenName?(r(),i("div",is,[e.pItem.tokenName.length<=24?(r(),i("a",{key:0,href:("getExplorerUrl"in e?e.getExplorerUrl:n(me))("nftAddress",e.pItem.nftHash),target:"_blank"},t(e.pItem.tokenName.split("|")[1]),9,ds)):(r(),Re(p,{key:1,placement:"bottom","arrow-point-at-center":""},{title:ke(()=>[s("span",null,t(e.pItem.tokenName),1)]),default:ke(()=>[s("a",{target:"_blank",href:("getExplorerUrl"in e?e.getExplorerUrl:n(me))("nftAddress",e.pItem.nftHash)},t(e.pItem.tokenName.substr(0,4))+" ... "+t(e.pItem.tokenName.substr(e.pItem.tokenName.length-4,4)),9,ls)]),_:1}))])):g("",!0),s("div",ms,[(r(),i("svg",{class:"icon","aria-hidden":"true",onClick:b[0]||(b[0]=h=>e.store.copy(e.pItem.nftHash))},[J(" > "),us])),e.pItem.tokenName.length<=24?(r(),i("a",{key:0,href:("getExplorerUrl"in e?e.getExplorerUrl:n(me))("nftAddress",e.pItem.nftHash),target:"_blank"},vs,8,ps)):g("",!0)])],2)}const ks=Ie(ts,[["render",hs],["__scopeId","data-v-4530e4e6"]]),bs=be({props:{pItem:{type:Object,required:!0}},setup(e){const{t:b}=ge(),j=Ue(),C=fe(),w=v(()=>C),T=v(()=>w.value.chainName?He(w.value.chainName):{}),y=$e(),p=v(()=>y),h=()=>{y.setPositionDetailCurrentTab("increase"),w.value.chainName==="Aptos"?j.push(`/new-position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`):j.push(`/new-position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}&pos=${e.pItem.pos_object_id}`)},N=v(()=>p.value.allTokenObj&&e.pItem.token_a.address&&p.value.allTokenObj[e.pItem.token_a.address]&&p.value.allTokenObj[e.pItem.token_a.address].logo_url),o=v(()=>p.value.allTokenObj&&e.pItem.token_b.address&&p.value.allTokenObj[e.pItem.token_b.address]&&p.value.allTokenObj[e.pItem.token_b.address].logo_url),V=v(()=>p.value.feeOwedObj[e.pItem.tokenName]&&p.value.feeOwedObj[e.pItem.tokenName].feeOwed),L=v(()=>p.value.feeOwedObj[e.pItem.tokenName]&&p.value.feeOwedObj[e.pItem.tokenName].feesResult),ee=v(()=>p.value.rewarderObj[e.pItem.tokenName]&&p.value.rewarderObj[e.pItem.tokenName].pendingRewarder),M=v(()=>p.value.rewarderObj[e.pItem.tokenName]&&p.value.rewarderObj[e.pItem.tokenName].pendingRewarderView),se=v(()=>p.value.rewarderObj[e.pItem.tokenName]&&p.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr),K=f(0),ce=f();Y(()=>p.value.RATES,m=>{m&&(ce.value=m)},{immediate:!0});const te=m=>{var A;return(m==null?void 0:m.logoURI)||(m==null?void 0:m.logo_url)||((A=p.value.tokensObj[m==null?void 0:m.address])==null?void 0:A.logo_url)||(w.value.theme==="default"?ne("/image/coins/unknown.png"):ne("/image/coins/sui-unknown.png"))},ve=v(()=>p.value.tokensObj);Ce(()=>{B(e.pItem),re(e.pItem.minPrice,e.pItem.maxPrice)});const oe=f("--"),re=(m,A)=>{m!=="0"&&A!=="∞"?oe.value=Ge(1/(1-Number((m/A)**.25)),2)+"x":oe.value=1},G=f(30),I=f(null),B=async m=>{var k,$,R;const A=Number(e.pItem.minPrice),Z=isNaN(Number(e.pItem.maxPrice))||e.pItem.maxPrice=="∞"?2**50:Number(e.pItem.maxPrice);let S=[];S=w.value&&w.value.addressHistTokens&&w.value.addressHistTokens[m.poolAddress]&&w.value.addressHistTokens[m.poolAddress].data&&w.value.addressHistTokens[m.poolAddress].data.length>0&&Object.fromEntries(w.value.addressHistTokens[m.poolAddress].data.map(U=>[U.key,U.value]));const P=Number(Number(G.value==7?S.before_7_d_contract_price_lowest:G.value==24?S.before_24_h_contract_price_lowest:S.before_30_d_contract_price_lowest)),O=Number(Number(G.value==7?S.before_7_d_contract_price_highest:G.value==24?S.before_24_h_contract_price_highest:S.before_30_d_contract_price_highest)),_=p.value.tokensObj,Q=await T.value.getEstPositionAPRWithMulti(A,Z,P,O),d=Number(Q.toString()),a=w.value.newTopPoolsObj[m.poolAddress];let l;if(a){G.value==7?l=a.apr_7day?Number(a.apr_7day.substring(0,a.apr_7day.length-1)):0:G.value==24?l=a.apr_24h?Number(a.apr_24h.substring(0,a.apr_24h.length-1)):0:l=a.apr_30day?Number(a.apr_30day.substring(0,a.apr_30day.length-1)):0;const U=a.rewarder_apr[0]?Number(a.rewarder_apr[0].substring(0,a.rewarder_apr[0].length-1)):0,q=a.rewarder_apr[1]?Number(a.rewarder_apr[1].substring(0,a.rewarder_apr[1].length-1)):0,X=a.rewarder_apr[2]?Number(a.rewarder_apr[2].substring(0,a.rewarder_apr[2].length-1)):0,E=Number(d*l),ie=Number(d*U),de=Number(d*q),le=Number(d*X),ae=E+(m.rewarder_display1?ie:0)+(m.rewarder_display2?de:0)+(m.rewarder_display3?le:0),je=m.rewarder_infos[0]?(k=_[m.rewarder_infos[0].coinAddress])==null?void 0:k.symbol:"--",Te=m.rewarder_infos[1]?($=_[m.rewarder_infos[1].coinAddress])==null?void 0:$.symbol:"--",Le=m.rewarder_infos[2]?(R=_[m.rewarder_infos[2].coinAddress])==null?void 0:R.symbol:"--",Be={aprFee:E==1/0||isNaN(E)?0:E,rewardAprList:[{rewarder_name:je,rewarder_apr:ie==1/0||isNaN(ie)?0:ie,styleName:"one",rewarder_display:m.rewarder_display1},{rewarder_name:Te,rewarder_apr:de==1/0||isNaN(de)?0:de,styleName:"two",rewarder_display:m.rewarder_display2},{rewarder_name:Le,rewarder_apr:le==1/0||isNaN(le)?0:le,styleName:"three",rewarder_display:m.rewarder_display2}],aprPercentageTotal:ae==1/0||isNaN(ae)||ae===0?0:ae,aprPercentage:ue(E/ae,2),is_display_rewarder:m.is_display_rewarder};I.value=Be}};return{aprNum:v(()=>{var m,A,Z,S,P,O,_,Q,d,a,l,k;return I.value?I.value.is_display_rewarder?(m=I.value)!=null&&m.aprPercentageTotal?((A=I.value)==null?void 0:A.aprPercentageTotal)>1e4?">10,000":((Z=I.value)==null?void 0:Z.aprPercentageTotal)<.01&&((S=I.value)==null?void 0:S.aprPercentageTotal)>0?"<0.01":u((P=I.value)==null?void 0:P.aprPercentageTotal,2):(O=I.value)!=null&&O.rewardAprList?"0":"--":(_=I.value)!=null&&_.aprFee?((Q=I.value)==null?void 0:Q.aprFee)>1e4?">10,000":((d=I.value)==null?void 0:d.aprFee)<.01&&((a=I.value)==null?void 0:a.aprFee)>0?"<0.01":u((l=I.value)==null?void 0:l.aprFee,2):(k=I.value)!=null&&k.rewardAprList?"0":"--":"--"}),lever:oe,tokensObj:ve,showNum:qe,fromCoinUrl:N,toCoinUrl:o,decimalFormat:Me,clickDetails:h,t:b,addCommom:u,importIcon:ne,router:j,store:w,pendingRewarder:ee,pendingFees:V,pendingRewarderArr:se,pendingFeesArr:L,checkNullObj:pe,fixD:ue,decimalUi:c,pendingRewarderView:M,aprAmount:K,getCoinIcon:te,Decimal:We}}});const D=e=>(we("data-v-3b1002c8"),e=e(),ye(),e),gs={class:"upgrade-position-item"},Is={class:"card-content"},ws={class:"left"},ys={class:"top card-header"},fs={class:"token-item"},_s={class:"item"},$s={key:0,class:"token-warning"},Rs={key:0},Us={class:"item"},Cs={key:0,class:"token-warning"},Ns={key:0},As={class:"card-header-right"},Ss={key:0,class:"item"},Ps=D(()=>s("span",null,"Leverage",-1)),Os={class:"item"},Ds=D(()=>s("span",null,"Estimated APR",-1)),js=D(()=>s("div",{class:"more-img"},null,-1)),Ts={class:"bottom"},Ls={class:"info-block-container"},Bs={class:"info-block"},Es=D(()=>s("div",{class:"leabl"},"Fee Tier",-1)),Fs={class:"text"},Vs={class:"info-block"},Hs=D(()=>s("div",{class:"leabl"},"Price Range",-1)),Gs={class:"text"},qs={class:"min-and-max"},Ms={class:"left-text"},Ws={class:"text"},zs={class:"hover-text"},Js={key:0,src:Ae,alt:""},Ks={key:1,src:Se,alt:""},Zs={class:"right-text"},Qs={class:"text"},Xs={class:"hover-text"},Ys={class:"leabl"},xs={class:"text"},eo={key:0,class:"hover-rewarder"},so={class:"rewarder-info"},oo={class:"left-rewarder"},ao={alt:""},no={class:"right-rewarder"},to={class:"amount"},ro={key:0,class:"amount-usd"},io={key:1,class:"amount-usd"},lo={class:"rewarder-info"},mo={class:"left-rewarder"},uo={alt:""},po={class:"right-rewarder"},co={class:"amount"},vo={key:0,class:"amount-usd"},ho={key:1,class:"amount-usd"},ko={class:"leabl"},bo={key:0,class:"text"},go={key:1,class:"text"},Io={key:2,class:"text"},wo={key:3,class:"hover-rewarder"},yo={class:"left-rewarder"},fo={alt:""},_o={class:"right-rewarder"},$o={class:"amount"},Ro={class:"amount-usd"},Uo={class:"leabl"},Co={key:0,class:"text"},No={key:1,class:"text"},Ao={key:2,class:"hover-rewarder"},So={class:"left-rewarder"},Po={alt:""},Oo={class:"right-rewarder"},Do={class:"amount"},jo={class:"amount-usd"},To={class:"h5-bottom"},Lo={class:"item"},Bo=D(()=>s("span",null,"Leverage",-1)),Eo={class:"item"},Fo=D(()=>s("span",null,"Estimated APR",-1)),Vo=D(()=>s("div",{class:"more-img"},null,-1)),Ho={class:"info"},Go={class:"info-item"},qo=D(()=>s("div",{class:"left"},"Fee Tier",-1)),Mo={class:"right"},Wo={class:"info-item range-item"},zo={class:"left"},Jo={class:"right"},Ko={class:"min-and-max"},Zo={class:"text"},Qo={key:0,src:Ae,alt:""},Xo={key:1,src:Se,alt:""},Yo={class:"text"},xo={class:"info-item"},ea=D(()=>s("div",{class:"left"},"Liquidity",-1)),sa={class:"right"},oa={key:0,class:"hover-rewarder"},aa={class:"rewarder-info"},na={class:"left-rewarder"},ta={alt:""},ra={class:"right-rewarder"},ia={class:"amount"},da={key:0,class:"amount-usd"},la={key:1,class:"amount-usd"},ma={class:"rewarder-info"},ua={class:"left-rewarder"},pa={alt:""},ca={class:"right-rewarder"},va={class:"amount"},ha={key:0,class:"amount-usd"},ka={key:1,class:"amount-usd"},ba={class:"info-item"},ga=D(()=>s("div",{class:"left"},"Pending Fees",-1)),Ia={key:0,class:"right"},wa={key:1,class:"right"},ya={key:2,class:"right"},fa={key:3,class:"hover-rewarder"},_a={class:"left-rewarder"},$a={alt:""},Ra={class:"right-rewarder"},Ua={class:"amount"},Ca={class:"amount-usd"},Na={key:0,class:"info-item"},Aa={class:"left"},Sa={key:0,class:"right"},Pa={key:1,class:"right"},Oa={key:2,class:"hover-rewarder"},Da={class:"left-rewarder"},ja={alt:""},Ta={class:"right-rewarder"},La={class:"amount"},Ba={class:"amount-usd"};function Ea(e,b,j,C,w,T){var N;const y=ks,p=Ke,h=Je("image");return r(),i("div",gs,[s("div",Is,[s("div",ws,[H(y,{"p-item":e.pItem,"current-status":((N=e.pItem)==null?void 0:N.currentStatus)||"","rewarder-info":e.pendingRewarder,"apr-amount":e.aprAmount},null,8,["p-item","current-status","rewarder-info","apr-amount"])]),s("div",{class:"right",onClick:b[0]||(b[0]=(...o)=>e.clickDetails&&e.clickDetails(...o))},[s("div",ys,[s("div",fs,[s("div",_s,[s("div",null,[F(s("img",null,null,512),[[h,(e.pItem.needReverse?e.toCoinUrl:e.fromCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt)?(r(),i("div",$s)):g("",!0),s("span",null,t(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("p",null,[J(t(e.pItem.needReverse?e.pItem.token_b.name:e.pItem.token_a.name)+" ",1),e.store.theme=="default"?(r(),i("span",Rs,t(e.pItem.needReverse?e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:"":e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:""),1)):g("",!0)])]),s("div",Us,[s("div",null,[F(s("img",null,null,512),[[h,(e.pItem.needReverse?e.fromCoinUrl:e.toCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt)?(r(),i("div",Cs)):g("",!0),s("span",null,t(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("p",null,[J(t(e.pItem.needReverse?e.pItem.token_a.name:e.pItem.token_b.name)+" ",1),e.store.theme=="default"?(r(),i("span",Ns,t(e.pItem.needReverse?e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:"":e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:""),1)):g("",!0)])])]),s("div",As,[e.pItem.minPrice!=="0"&&e.pItem.maxPrice!=="∞"?(r(),i("div",Ss,[s("p",null,t(e.lever),1),Ps])):g("",!0),s("div",Os,[s("p",null,t(e.aprNum)+"%",1),Ds]),js])]),s("div",Ts,[s("div",Ls,[s("div",Bs,[Es,s("div",Fs,t(e.pItem.fee*100)+"%",1)]),s("div",Vs,[Hs,s("div",Gs,[s("div",qs,[s("div",Ms,[s("div",Ws,t(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.minPrice,6))),1),s("div",zs,t(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.minPrice,6))),1)]),e.store.theme=="default"?(r(),i("img",Js)):(r(),i("img",Ks)),s("div",Zs,[s("div",Qs,t((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.maxPrice,6))),1),s("div",Xs,t((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.maxPrice,6))),1)]),s("span",null,t(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+t(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)])])]),s("div",{class:x(["info-block cursor-block",e.pItem.amountUSD=="--"||Number(e.pItem.amountUSD)==0?"block-none":""])},[s("div",Ys,t(e.$t("common.liquidity")),1),s("div",xs," $"+t(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:n(u))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(r(),i("div",eo,[s("div",so,[s("div",oo,[F(s("img",ao,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,t(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",no,[s("div",to,t(e.pItem.needReverse?("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.amountB,e.pItem.token_b.decimals)):("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.amountA,e.pItem.token_a.decimals))),1),e.pItem.needReverse?(r(),i("div",io,t(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:n(ue))(e.pItem.tokenBRates,2):"<$0.01"),1)):(r(),i("div",ro,t(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:n(ue))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",lo,[s("div",mo,[F(s("img",uo,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,t(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",po,[s("div",co,t(e.pItem.needReverse?("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.amountA,e.pItem.token_a.decimals)):("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.amountB,e.pItem.token_b.decimals))),1),e.pItem.needReverse?(r(),i("div",ho,t(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.tokenARates,2)):"<$0.01"),1)):(r(),i("div",vo,t(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.tokenBRates,2)):"<$0.01"),1))])])])):g("",!0)],2),s("div",{class:x(["info-block cursor-block",e.pendingFees==0?"block-none":""])},[s("div",ko,t(e.$t("newAdd.pendingFees")),1),e.pendingFees==="--"?(r(),i("div",bo,"$ --")):isNaN(e.pendingFees)?(r(),i("div",Io,[H(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(r(),i("div",go,t(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:n(u))(e.pendingFees,2)),1)),e.pendingFees>0?(r(),i("div",wo,[(r(!0),i(W,null,z(e.pendingFeesArr,o=>(r(),i("div",{key:o,class:"rewarder-info"},[s("div",yo,[F(s("img",fo,null,512),[[h,e.getCoinIcon(o)]]),s("span",null,t(o.symbol),1)]),s("div",_o,[s("div",$o,t(Number(o.amount)==0?0:Number(o.amount)>1e-6?("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(o.amount,o.decimals),o.decimals):"<0.000001"),1),s("div",Ro,t(Number(o.amountUSD)==0?"$0":Number(o.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:n(u))(o.amountUSD,2):"<$0.01"),1)])]))),128))])):g("",!0)],2),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:n(pe))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(r(),i("div",{key:0,class:x(["info-block cursor-block",e.pendingRewarder==0?"block-none":""])},[s("div",Uo,t(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(r(),i("div",Co," $"+t(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(r(),i("div",No,[H(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(r(),i("div",Ao,[(r(!0),i(W,null,z(e.pendingRewarderArr,o=>(r(),i("div",{key:o,class:"rewarder-info"},[s("div",So,[F(s("img",Po,null,512),[[h,o.logoURI]]),s("span",null,t(o.symbol),1)]),s("div",Oo,[s("div",Do,t(("decimalUi"in e?e.decimalUi:n(c))(o.amount,o.decimals)),1),s("div",jo,t(Number(o.amountUSD)==0?"$0":Number(o.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:n(u))(o.amountUSD,2):"<$0.01"),1)])]))),128))])):g("",!0)],2)):g("",!0)])])])]),s("div",To,[s("div",{class:"card-header-right",onClick:b[1]||(b[1]=(...o)=>e.clickDetails&&e.clickDetails(...o))},[s("div",Lo,[s("p",null,t(e.lever),1),Bo]),s("div",Eo,[s("p",null,t(e.aprNum)+"%",1),Fo]),Vo]),s("div",Ho,[s("div",Go,[qo,s("div",Mo,t(e.pItem.fee*100)+"%",1)]),s("div",Wo,[s("div",zo,[J("Price Range ("),s("span",null,t(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+t(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol)+")",1)]),s("div",Jo,[s("div",Ko,[s("div",Zo,t(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.minPrice,6))),1),e.store.theme=="default"?(r(),i("img",Qo)):(r(),i("img",Xo)),s("div",Yo,t((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.maxPrice,6))),1)])])]),s("div",xo,[ea,s("div",sa," $"+t(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:n(u))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(r(),i("div",oa,[s("div",aa,[s("div",na,[F(s("img",ta,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,t(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",ra,[s("div",ia,t(e.pItem.needReverse?("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.amountB,e.pItem.token_b.decimals)):("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.amountA,e.pItem.token_a.decimals))),1),e.pItem.needReverse?(r(),i("div",la,t(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:n(u))(e.pItem.tokenBRates,2):"<$0.01"),1)):(r(),i("div",da,t(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:n(u))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",ma,[s("div",ua,[F(s("img",pa,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,t(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",ca,[s("div",va,t(e.pItem.needReverse?("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.amountA,e.pItem.token_a.decimals)):("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.amountB,e.pItem.token_b.decimals))),1),e.pItem.needReverse?(r(),i("div",ka,t(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.tokenARates,2)):"<$0.01"),1)):(r(),i("div",ha,t(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(e.pItem.tokenBRates,2)):"<$0.01"),1))])])])):g("",!0)]),s("div",ba,[ga,e.pendingFees==="--"?(r(),i("div",Ia,"$ --")):isNaN(e.pendingFees)?(r(),i("div",ya,[H(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(r(),i("div",wa,t(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:n(u))(e.pendingFees,2)),1)),e.pendingFees>0?(r(),i("div",fa,[(r(!0),i(W,null,z(e.pendingFeesArr,o=>(r(),i("div",{key:o,class:"rewarder-info"},[s("div",_a,[F(s("img",$a,null,512),[[h,e.getCoinIcon(o)]]),s("span",null,t(o.symbol),1)]),s("div",Ra,[s("div",Ua,t(Number(o.amount)==0?0:Number(o.amount)>1e-6?("addCommom"in e?e.addCommom:n(u))(("decimalUi"in e?e.decimalUi:n(c))(o.amount,o.decimals),o.decimals):"<0.000001"),1),s("div",Ca,t(Number(o.amountUSD)==0?"$0":Number(o.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:n(u))(o.amountUSD,2):"<$0.01"),1)])]))),128))])):g("",!0)]),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:n(pe))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(r(),i("div",Na,[s("div",Aa,t(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(r(),i("div",Sa," $"+t(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(r(),i("div",Pa,[H(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(r(),i("div",Oa,[(r(!0),i(W,null,z(e.pendingRewarderArr,o=>(r(),i("div",{key:o,class:"rewarder-info"},[s("div",Da,[F(s("img",ja,null,512),[[h,o.logoURI]]),s("span",null,t(o.symbol),1)]),s("div",Ta,[s("div",La,t(("decimalUi"in e?e.decimalUi:n(c))(o.amount,o.decimals)),1),s("div",Ba,t(Number(o.amountUSD)==0?"$0":Number(o.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:n(u))(o.amountUSD,2):"<$0.01"),1)])]))),128))])):g("",!0)])):g("",!0)])])])}const Fa=Ie(bs,[["render",Ea],["__scopeId","data-v-3b1002c8"]]),Va=be({setup(){const e=f(!1),{t:b}=ge(),j=f(["position"]),C=Ue(),w=f(""),T=fe(),y=v(()=>T),p=v(()=>y.value.chainName?Ne[y.value.chainName]:{});let h=f([]);const N=$e(),o=v(()=>N),V=xe(),L=v(()=>V),ee=f(!1),M=f(b("tab.all")),se=f([b("tab.layerZero"),b("tab.wormhole"),b("tab.celer")]),K=f(!0),ce=f("TVL"),te=()=>{e.value=!0,h.value=[],L.value.address&&N.getMyPositons(L.value.address,o.value.poolsObj,y.value.chainName),setTimeout(()=>{e.value=!1},1e3)},ve=v(()=>{const d=Array.from(new Set(o.value.poolConfigList.flatMap(a=>!a.category||a.category==""?"All":a.category)));return d.length<=1?[]:d}),oe=d=>{o.value.setCurrentPoolTab(d)};Y(()=>y.value.isRefresh,d=>{var a;d&&((a=C==null?void 0:C.currentRoute)==null?void 0:a.value.name.split("-")[1])=="position"&&te()}),Ce(()=>{h.value=[],document.addEventListener("click",()=>{ee.value=!1}),N.setMyPositionsLoading(!0)}),Ze(()=>{document.addEventListener("click",()=>{ee.value=!1})}),Qe(()=>{L.value.connected||(h.value=[])});const re=()=>{e.value=!0;let d=[];o.value.myPositions.forEach(a=>{var U,q,X,E;let l,k;const $=a.amountA*((U=o.value.RATES[a.token_a.address])==null?void 0:U.price),R=a.amountB*((q=o.value.RATES[a.token_b.address])==null?void 0:q.price);(X=o.value.RATES[a.token_a.address])!=null&&X.price&&((E=o.value.RATES[a.token_b.address])!=null&&E.price)?(l=$+R,k=$+R):(l=" --",k=0),(o.value.currentPoolTab=="All"&&(a.category==""||!a.category)||o.value.currentPoolTab!=="All"&&a.category==o.value.currentPoolTab)&&d.push({...a,amountUSD:l,amountUSDOrigin:k,tokenARates:$,tokenBRates:R})}),M.value!="All"?K.value?(h.value=d.sort((a,l)=>Number(l.amountUSDOrigin)-Number(a.amountUSDOrigin)),e.value=!1):(h.value=d.sort((a,l)=>Number(a.amountUSDOrigin)-Number(l.amountUSDOrigin)),e.value=!1):K.value?(h.value=d.sort((a,l)=>l.amountUSDOrigin-a.amountUSDOrigin),e.value=!1):(h.value=d.sort((a,l)=>a.amountUSDOrigin-l.amountUSDOrigin),e.value=!1)};Y(()=>[o.value.myPositions,o.value.RATES],([d,a])=>{d&&a&&re()},{immediate:!0}),Y(()=>[L.value.address,o.value.poolConfigList,o.value.poolsObj,y.value.chainName],([d,a,l,k])=>{var $,R,U;d&&a&&a.length>0&&k&&(k!=null&&k.toLowerCase().includes(($=a[0])==null?void 0:$.chain))&&!pe(l)&&(k==="Aptos"?a.length===Object.values(l).length:(U=(R=Object.values(l)[0])==null?void 0:R.chain)!=null&&U.includes("sui"))&&N.getMyPositons(L.value.address,l,k)},{immediate:!0,deep:!0}),Y(()=>[M.value,K.value,o.value.currentPoolTab],([d])=>{re()});const G=d=>{const a=[];se.value.forEach((l,k)=>{l==d?a[k]=M.value:a[k]=l}),se.value=a,M.value=d},I=es(),B=v(()=>I),he=v(()=>N),m=async d=>{await I.getSourceGroups();const a=B.value.sourceGroups&&B.value.sourceGroups.length>0&&B.value.sourceGroups[0]&&B.value.sourceGroups[0].sources||[];for(let l=0;l<a.length;l++){const{pool_address:k,position_index:$}=JSON.parse(a[l].blockchainAddress);let R=!1,U;for(let q=0;q<d.length;q++){const{poolAddress:X,index:E}=d[q];k==X&&Number(E)==Number($)&&(R=!0),U={pool_address:k,position_index:$}}R||await I.subscribePosition(U,"",!1,!1)}},A=async()=>{await I.getSourceGroups();const d=B.value.sourceGroups&&B.value.sourceGroups.length>0&&B.value.sourceGroups[0]&&B.value.sourceGroups[0].sources||[];for(let a=0;a<d.length;a++){const{pool_address:l,position_index:k}=JSON.parse(d[a].blockchainAddress),{name:$}=d[a],R={pool_address:l,position_index:k};await I.subscribePosition(R,$,!1,!1)}},Z=v(()=>he.value.myPositionsLoading);Y(()=>he.value.myPositions,(d,a)=>{p.value.hasNotifi&&(d&&d.length>0&&a&&a.length!==d.length?m(d):d&&d.length==0&&!Z.value&&A())},{immediate:!0});const S=d=>{var a;return(d==null?void 0:d.logoURI)||(d==null?void 0:d.logo_url)||((a=o.value.tokensObj[d==null?void 0:d.address])==null?void 0:a.logo_url)||(y.value.theme==="default"?ne("/image/coins/unknown.png"):ne("/image/coins/sui-unknown.png"))},P=f(null),O=v(()=>P.value&&P.value.firstToken?P.value.firstToken:null),_=v(()=>P.value&&P.value.lastToken?P.value.lastToken:null),Q=v(()=>{let d=[];d=h.value;const a=d.filter((l,k)=>O.value&&_.value?l.coinA.symbol==O.value.symbol&&l.coinB.symbol==_.value.symbol||l.coinA.symbol==_.value.symbol&&l.coinB.symbol==O.value.symbol:O.value?l.coinA.symbol.toLowerCase().includes(O.value.symbol.toLowerCase())||l.coinB.symbol.toLowerCase().includes(O.value.symbol.toLowerCase()):_.value?l.coinA.symbol.toLowerCase().includes(_.value.symbol.toLowerCase())||l.coinB.symbol.toLowerCase().includes(_.value.symbol.toLowerCase()):d);return o.value.myPositionsLoading||T.setPositiomAmount(a.length),a});return Xe(()=>{T.setPositiomAmount("--")}),{tabArr:ve,changeTab:oe,showList:Q,childTokenSelectRef:P,firstToken:O,lastToken:_,getCoinIcon:S,changeSortLabel:G,label:ee,labelList:se,labelValue:M,select:K,selectValue:ce,t:b,pools:o,store:y,wallet:L,list:h,clickRefresh:te,refresh:e,current:j,router:C,searchKey:w}}});const De=e=>(we("data-v-d82af439"),e=e(),ye(),e),Ha={class:"upgrade-position-list-container"},Ga={class:"content-top"},qa={class:"content-top-left"},Ma={key:0,class:"tag-list"},Wa=["onClick"],za={class:"content-top-right"},Ja={class:"value"},Ka=De(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),Za=[Ka],Qa={key:0,class:"select-item"},Xa=["onClick"],Ya={class:"search-select-box"},xa=De(()=>s("span",null,"TVL",-1)),en={key:0,src:Pe,alt:""},sn={key:1,class:"fan-img",src:Pe,alt:""},on={key:0,class:"upgrade-loading"},an={key:1,class:"position-list"},nn={key:2,class:"no-data"},tn={key:0,src:ss,alt:""},rn={key:1,src:os,alt:""},dn={key:3,class:"no-data"},ln={key:0,src:as,alt:""},mn={key:1,src:ns,alt:""};function un(e,b,j,C,w,T){const y=Ee,p=Fe,h=Fa,N=Ye;return r(),i("div",Ha,[s("div",Ga,[s("div",qa,[e.tabArr.length>1?(r(),i("div",Ma,[(r(!0),i(W,null,z(e.tabArr,(o,V)=>(r(),i("div",{key:V,class:x(["tag-item",o==e.pools.currentPoolTab?`tag-active tab-num-${e.tabArr.length}`:`tab-num-${e.tabArr.length}`]),onClick:L=>e.changeTab(o)},t(o),11,Wa))),128))])):g("",!0),H(y,{ref:"childTokenSelectRef"},null,512)]),s("div",za,[e.store.theme=="default"?(r(),i("div",{key:0,class:"search-label",onClick:b[0]||(b[0]=_e(o=>e.label=!e.label,["stop"]))},[s("span",null,t(e.$t("newAdd.label")),1),s("div",Ja,t(e.labelValue),1),(r(),i("svg",{"aria-hidden":"true",class:x(e.label?"show-icon icon":"icon")},Za,2)),e.label?(r(),i("div",Qa,[(r(!0),i(W,null,z(e.labelList,(o,V)=>(r(),i("div",{key:V,class:"select-menu-item",onClick:L=>e.changeSortLabel(o)},t(o),9,Xa))),128))])):g("",!0)])):g("",!0),s("div",Ya,[s("div",{class:"search-select",onClick:b[1]||(b[1]=_e(o=>e.select=!e.select,["stop"]))},[J(t(e.$t("newAdd.sortBy"))+" ",1),s("div",null,[xa,e.select?(r(),i("img",en)):(r(),i("img",sn))])])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(r(),i("div",on,[H(p,{loading:e.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):g("",!0),e.showList&&e.showList.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(r(),i("div",an,[(r(!0),i(W,null,z(e.showList,(o,V)=>(r(),Re(h,{key:V,"p-item":o},null,8,["p-item"]))),128))])):g("",!0),e.showList&&e.showList.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(r(),i("div",nn,[e.store.theme=="default"?(r(),i("img",tn)):(r(),i("img",rn)),s("span",null,t(e.$t("common.noLiquidityPositions")),1)])):g("",!0),e.wallet.connected?g("",!0):(r(),i("div",dn,[e.store.theme=="default"?(r(),i("img",ln)):(r(),i("img",mn)),H(N,{class:"connect-wallet",onClick:b[2]||(b[2]=o=>e.wallet.setIsShowWalletModal(!0))},{default:ke(()=>[J(t(e.$t("button.connectWallet")),1)]),_:1})]))])}const Dn=Ie(Va,[["render",un],["__scopeId","data-v-d82af439"]]);export{Dn as default};
