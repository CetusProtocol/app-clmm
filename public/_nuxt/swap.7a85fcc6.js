import{_ as rn}from"./refresh-icon.628d5692.js";import{_ as dn}from"./assets-card.22fd8bbc.js";import{u as Me,b as to,c as Se,s as ae,a as q,l as Ye,d as ue,w as Xe,g as Io,p as So,i as cn,e as ze}from"./pool.894b5f1d.js";import{e as Te,a as Ge,D as Po,L as No,r as h,l as N,q as ne,s as Ue,o as r,f as g,h as o,c as H,x as F,t as ee,j as K,v as u,C as de,F as Ze,u as Q,S as Ro,O as Oo,p as Fe,k as je,a4 as mn,i as he,w as ce,R as Bo,M as Mo,z as To,G as _o,B as Uo,b as $o,y as vn,J as fn,N as pn,E as He}from"./entry.1d58a270.js";/* empty css              *//* empty css              */import{c as pe,u as Ee,a as hn}from"./sha256.22518486.js";import"./decimal.633e31ee.js";import{i as ve}from"./import-icon.de3e6c66.js";import{D as i}from"./decimal.0e8aa3f1.js";import{_ as gn}from"./network-tips.f720fb98.js";import{_ as Cn}from"./coin-select.2cb985cf.js";import{_ as bn}from"./swap-setting.406cc772.js";/* empty css              */import{_ as wn}from"./token-warning-modal.9f226189.js";import{u as kn}from"./swapRouter.0af75ed4.js";import{_ as yn}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./token-warning.41c2e424.js";/* empty css              */import"./img-no-Positions_2x.4b138a03.js";/* empty css              */import"./icon-selected_3x.09e9a6f0.js";async function An(e,p){var j,W,m;const S=e==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":e,w=`${pe.Sui.api}/v2/sui/coin/kline?coin_address=${S}&interval=day&market=${p}`;try{const $=await $fetch(w);return{price:((W=(j=$==null?void 0:$.data)==null?void 0:j.list)==null?void 0:W.reverse())||[],daily_rate:(m=$==null?void 0:$.data)==null?void 0:m.daily_rate.replace("%","")}}catch{return{price:[],daily_rate:""}}}async function Sn(e){try{const{prices:p}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=7&interval=daily`,{headers:{Connection:"keep-alive",Accept:"*/*"}}),w=(await $fetch(`https://api.coingecko.com/api/v3/coins/markets?ids=${e}&vs_currency=usd&price_change_percentage=24h`,{headers:{Connection:"keep-alive",Accept:"*/*"}}))[0].price_change_percentage_24h,j=[];return p.forEach(W=>{j.push({price:new i(W[1]).toString(),timestamp:W[0]})}),{price:j,daily_rate:w}}catch{return{price:[],daily_rate:""}}}const _n=""+globalThis.__publicAssetsURL("sui-image/route-view.png");const $n=Ge({props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1}},setup(e){const p=Po(No,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),S=h(!1),w=Ee(),j=N(()=>w),W=N(()=>j.value.slippage),m=N(()=>j.isShowRouterModal);ne(()=>e,n=>{},{immediate:!0,deep:!0});const $=Me(),C=N(()=>$),X=to("Sui"),x=h(0),P=h([]),R=h({});ne(()=>e.suiPreSwapdata,async n=>{var s;if(n&&!Se(n)){let y=[];(s=n==null?void 0:n.splitPaths)==null||s.forEach(E=>{E==null||E.basePaths.forEach(async z=>{y.push(z.label)})});const{splitPaths:f}=n,J=f&&f[0]&&f[0].basePaths;if(f&&f.length==1&&J&&J.length==2){const E=J[0].toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":J[0].toCoin;R.value=C.value.tokensObj[E]||(await X.getTokenListByCoinType[E])[0]}else R.value="";P.value=Array.from(new Set(y)),x.value=P.value.length}},{immediate:!0});const Y=h(0),a=h(0);ne(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,W.value],([n,s,y,f,J,E])=>{if(n&&s&&y&&f&&E)if(J){const z=new i(s).mul(new i(E/100));a.value=new i(s).sub(z).toString()}else{const z=new i(n).mul(new i(E/100));Y.value=new i(n).add(z).toString()}},{immediate:!0});const Z=n=>{var s;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((s=C.value.tokensObj[n==null?void 0:n.address])==null?void 0:s.logo_url)||(j.theme==="default"?ve("/image/coins/unknown.png"):ve("/image/coins/sui-unknown.png"))},oe=N(()=>{var n,s,y,f,J,E,z,_,D;return(y=(s=C==null?void 0:C.value)==null?void 0:s.tokensObj[(n=e.fromCoin)==null?void 0:n.address])!=null&&y.pyth_id&&((E=(J=C==null?void 0:C.value)==null?void 0:J.tokensObj[(f=e.fromCoin)==null?void 0:f.address])==null?void 0:E.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(D=(_=C==null?void 0:C.value)==null?void 0:_.tokensObj[(z=e.fromCoin)==null?void 0:z.address])!=null&&D.coingecko_id?"coingecko":null}),b=N(()=>{var n,s,y,f,J,E,z,_,D;return(y=(s=C==null?void 0:C.value)==null?void 0:s.tokensObj[(n=e.toCoin)==null?void 0:n.address])!=null&&y.pyth_id&&((E=(J=C==null?void 0:C.value)==null?void 0:J.tokensObj[(f=e.toCoin)==null?void 0:f.address])==null?void 0:E.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(D=(_=C==null?void 0:C.value)==null?void 0:_.tokensObj[(z=e.toCoin)==null?void 0:z.address])!=null&&D.coingecko_id?"coingecko":null}),V=h(""),A=async()=>{const n=C.value.tokenExternalPriceObj[e.fromCoin.address],s=C.value.tokenExternalPriceObj[e.toCoin.address];if(n&&s){const y=new i(n).div(new i(s)),f=new i(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(y).div(y).mul(100);let J=Math.abs(ae(f,2));y.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?V.value="":V.value=f>0&&f<=.01?"0.01":J}else V.value=""},M=n=>{if(n<5)return"color-s";if(n>=5&&n<10)return"color-w";if(n>=10)return"color-e"};return ne(()=>[e.oneToAmount,C.value.tokenExternalPriceObj],([n,s])=>{n&&s&&!Se(s)&&A()},{immediate:!0,deep:!0}),{sFixD:ae,getCoinIcon:Z,indicator:p,rateChange:S,slippage:W,isShowRouterModal:m,indexStore:w,maximumSold:Y,minimumReceived:a,addCommom:q,pathLength:x,sourcesArr:P,coinTypeB:R,priceExangeRate:V,getTextColor:M,formCoinMarket:oe,toCoinMarket:b}}}),se=e=>(Fe("data-v-aa177fde"),e=e(),je(),e),In={key:0,class:"swap-info"},Pn={class:"loading-swap"},Nn={key:1,class:"swap-rate"},Rn={key:0},On={key:0,class:"after-amount"},Bn={key:1},Mn={key:0,class:"after-amount"},Tn=se(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Un=se(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Fn=[Tn,Un],jn={key:2,class:"swap-exchange-rate"},En={class:"swap-exchange-rate-content"},Dn={key:0},Ln=["href"],Wn=se(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),qn=[Wn],Jn={key:1},Qn=["href"],Xn=se(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),zn=[Xn],Hn={key:0},Yn=["href"],Zn=se(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),Gn=[Zn],Kn={key:1},Vn=["href"],xn=se(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),et=[xn],ot={key:2},nt=["href"],tt=se(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),at=[tt],st={key:3},it=["href"],lt=se(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),ut=[lt],rt={key:3},dt={class:"trade-info"},ct={class:"trade-block"},mt=se(()=>o("div",{class:"lebal"},"Price Impact",-1)),vt={key:0,class:"icon","aria-hidden":"true"},ft=se(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),pt=[ft],ht={class:"trade-block"},gt={class:"lebal"},Ct={key:0,class:"text"},bt={class:"trade-block"},wt=se(()=>o("div",{class:"lebal"},"Fee",-1)),kt={key:0,class:"text"},yt={key:0,class:"trade-block"},At=se(()=>o("div",{class:"lebal"},"Route",-1)),St={key:0,class:"text text-box"},_t=["src"],$t=["src"],It={key:1,class:"text text-box"},Pt=["src"],Nt=["src"],Rt=se(()=>o("img",{src:_n,alt:""},null,-1));function Ot(e,p,S,w,j,W){var X,x,P,R;const m=Ro,$=Oo,C=Ue("image");return e.swapLoading||Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&!e.insufficientLiquidity?(r(),g("div",In,[o("div",Pn,[e.swapLoading||e.swapRouterLoading?(r(),H(m,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):F("",!0),e.swapLoading?F("",!0):(r(),g("div",Nn,[e.rateChange?(r(),g("span",Bn,[e.fromCoinAmount&&e.toCoinAmount?(r(),g("span",Mn,[ee(o("img",null,null,512),[[C,e.getCoinIcon(e.toCoin)]]),K(" 1 "+u(e.toCoin.symbol)+" ≈ ",1),ee(o("img",null,null,512),[[C,e.getCoinIcon(e.fromCoin)]]),K(u(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+u(e.fromCoin.symbol),1)])):(r(),H(m,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(r(),g("span",Rn,[ee(o("img",null,null,512),[[C,e.getCoinIcon(e.fromCoin)]]),K(" 1 "+u(e.fromCoin.symbol)+" ≈ ",1),e.fromCoinAmount&&e.toCoinAmount?(r(),g("span",On,[ee(o("img",null,null,512),[[C,e.getCoinIcon(e.toCoin)]]),K(u(e.oneToAmount==1/0?0:e.oneToAmount)+" "+u(e.toCoin.symbol),1)])):(r(),H(m,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"right",onClick:p[0]||(p[0]=Y=>e.rateChange=!e.rateChange)},Fn)])),!e.swapLoading&&e.priceExangeRate!==""&&e.priceExangeRate>10?(r(),g("div",jn,[o("div",En,[o("p",null,[o("span",{class:de(e.getTextColor(e.priceExangeRate))},"Within ~"+u(e.priceExangeRate)+"% of",3)]),e.formCoinMarket=="pyth"&&e.toCoinMarket=="pyth"?(r(),g("span",Dn,[K("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}&ids[]=${e.toCoin.pyth_id}`,target:"_blank"},qn,8,Ln)])):e.formCoinMarket=="coingecko"&&e.toCoinMarket=="coingecko"?(r(),g("span",Jn,[K("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id},${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},zn,8,Qn)])):e.formCoinMarket!==e.toCoinMarket?(r(),g(Ze,{key:2},[e.formCoinMarket=="pyth"?(r(),g("span",Hn,[K("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}`,target:"_blank"},Gn,8,Yn)])):e.formCoinMarket=="coingecko"?(r(),g("span",Kn,[K("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},et,8,Vn)])):F("",!0),e.toCoinMarket=="coingecko"?(r(),g("span",ot,[K("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},at,8,nt)])):e.toCoinMarket=="pyth"?(r(),g("span",st,[K("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.toCoin.pyth_id}`,target:"_blank"},ut,8,it)])):F("",!0)],64)):F("",!0)])])):e.swapLoading?(r(),g("span",rt,"Best route and price")):F("",!0)]),o("div",dt,[o("div",ct,[mt,e.swapRouterLoading?(r(),H($,{key:1,paragraph:!1,active:""})):(r(),g("div",{key:0,class:de(["text",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[K(u(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(r(),g("svg",vt,pt)):F("",!0)],2))]),o("div",ht,[o("div",gt,u(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(r(),H($,{key:1,paragraph:!1,active:""})):(r(),g("div",Ct,u(e.fixedFromCoin?("addCommom"in e?e.addCommom:Q(q))(("sFixD"in e?e.sFixD:Q(ae))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:Q(q))(("sFixD"in e?e.sFixD:Q(ae))(e.maximumSold,e.fromCoin.decimals)))+" "+u(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",bt,[wt,e.swapRouterLoading?(r(),H($,{key:1,paragraph:!1,active:""})):(r(),g("div",kt,u(e.suiSwapFee)+" "+u(e.fromCoin.symbol),1))]),e.insufficientLiquidity?F("",!0):(r(),g("div",yt,[At,e.swapRouterLoading?(r(),H($,{key:1,paragraph:!1,active:""})):(r(),g("div",{key:0,class:"text",onClick:p[1]||(p[1]=Y=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[!e.swapRouterLoading&&e.suiPreSwapdata&&e.suiPreSwapdata.splitPaths&&e.suiPreSwapdata.splitPaths.length==1?(r(),g("div",St,[o("span",null,u(e.fromCoin.symbol)+" "+u(e.coinTypeB&&((X=e.coinTypeB)!=null&&X.symbol)?`> ${(x=e.coinTypeB)==null?void 0:x.symbol}`:"")+" > "+u(e.toCoin.symbol),1),o("img",{src:e.sourcesArr[0]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,_t),e.sourcesArr[1]?(r(),g("img",{key:0,src:e.sourcesArr[1]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,$t)):F("",!0)])):e.swapRouterLoading?F("",!0):(r(),g("div",It,[K(u((R=(P=e.suiPreSwapdata)==null?void 0:P.splitPaths)==null?void 0:R.length)+" Streams ",1),e.sourcesArr[0]?(r(),g("img",{key:0,src:e.sourcesArr[0]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Pt)):F("",!0),e.sourcesArr[1]?(r(),g("img",{key:1,src:e.sourcesArr[1]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Nt)):F("",!0)])),Rt]))]))])])):F("",!0)}const Bt=Te($n,[["render",Ot],["__scopeId","data-v-aa177fde"]]),Mt={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""},market:{type:String,default:""}},setup(e,p){const{$echarts:S}=mn();let w=null,j;const W=h(!0),m=Ee(),$=N(()=>m),C=N(()=>$.value.chainName),X=N(()=>pe[C.value]),x=Me(),P=N(()=>x),R=(n,s,y)=>{j={xAxis:{type:"category",boundaryGap:!1,show:!1,data:s},yAxis:{type:"value",show:!1,min:function(f){return f.min-f.min*.1},max:function(f){return f.max+f.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:$.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(f){return`<div class="chart-tip">
              <div>${f&&f[0]&&f[0].name}</div>
              <div>$${ue(f&&f[0]&&f[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:$.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:$.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:n,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:$.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},j&&w.clear(),j&&w.setOption(j,!0),w.resize(),W.value=!1},Y=h(""),a=h(""),Z=async n=>{var z,_;const s=[],y=[],{price:f,daily_rate:J}=C.value==="Aptos"?await Sn(n):await An(n,e.market);C.value=="Sui"&&x.setTokenExternalPrice(e.coin.address,f[f.length-1].price),Y.value=J,a.value=f&&f.length>1&&f[f.length-1].price,C.value==="Aptos"?f.forEach(D=>{s.push(D.price);const d=Xe(Number(D.timestamp),"MD"),c=Xe(Number(D.timestamp),"HM");y.push(d+" "+c)}):f.forEach(D=>{s.push(D.price);const d=Xe(new i(D.timestamp).mul(1e3).toNumber(),"MD"),c=Xe(new i(D.timestamp).mul(1e3).toNumber(),"HM");y.push(d+" "+c)});let E=document.getElementById(`main${(z=e.coin)==null?void 0:z.name}`);w=S.init(E),R(s,y,(_=e.coin)==null?void 0:_.name)};ne(()=>e.id,(n,s)=>{n&&(Y.value="",a.value="",setTimeout(()=>{Z(n)},1e3))},{immediate:!0});const oe=h(""),b=h(""),V=h(""),A=h("");return ne(()=>[P.value.tokensObj,e.coin],([n,s])=>{var y,f;n&&s&&n[s.address]&&(b.value=((y=n[s.address])==null?void 0:y.labels)&&((f=n[s.address])==null?void 0:f.labels[0]),oe.value=n[s.address].name,V.value=n[s.address].symbol,A.value=n[s.address].address)},{immediate:!0,deep:!0}),ne(()=>e.refresh,n=>{n&&Z(e.id)}),{theme:N(()=>$.value.theme),store:m,importIcon:ve,fixD:Ye,config:X,price_rate_24h:Y,nowPrice:a,coinName:oe,coinLabels:b,coinSymbol:V,address:A,decimalUi:ue}}},Tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAk1BMVEUAAADn2v/m2//r2//v4//n2v/55P/n2v/o3P//+P/m2v/n2f/n2v/n2v/n2v/n2v/n2v/o2//p2//n3f/o3v/n2f/n2v/n2v/n2v/n2v/n2//o2v/q3f/r4f/u3f/n2v/o2v/n2//p3P/o3P/m2v/n2v/n2f/n2v/o2f/n2//r3f/t3P/n2v/m2v/o2v/r3v/m2f/tUDLHAAAAMHRSTlMAl5oyFNMJqSwFhvvr5d7Yr2FGNSD0zb2lkIltOhkOxoJoT0D48aJzWFYlHeB8Wief0nHAAAABSElEQVQ4y52Q53LCMBCEZWK5g0swBpveQknZ93+6rFxAHkSYyf6x9+67JqHLKxOZRzJJbWHStkCn0Fo8pG0XuvJv0dciBjVZb+dZeoxABb38MlbpXeucr5z2QwdUf8vX1h0ByLT9aAeCGlez4Ozw5zoE4nvFBJB0yymUhqp0B2DT5ec0O+YlWlUMJsCqAwJA8jNV1W4RAnuvqepeYwWsOR/AkfM9ji8YjYBTC3wCZyEq1jvKnoCQP8X90j0wF2IGuM2jArjUE8sWAPAmxACwavtDf623XJsBtoqa2zcm4MI8Ag7iNZkBeAcVc8cUOPhPgJjP4I/UzkYgKtWxpQqaAGfMvvUATIUBaOQHAEb2M2CZcj4OnrhJasDYXYVQ9Vpe2LJ/BeWyf4/oAXlC25e9uI0IqswRJulX/BOwXgG2JPCCIPA3sXmM/QK1PTc8LGCPoAAAAABJRU5ErkJggg==",Ut="data:image/png;base64,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";const Ft=e=>(Fe("data-v-cab5b536"),e=e(),je(),e),jt={class:"token-info"},Et={class:"token-info-padding"},Dt={class:"token-info-header"},Lt={class:"left"},Wt=["onerror"],qt={class:"name"},Jt={class:"desc"},Qt={key:0},Xt={class:"right"},zt={class:"price-info"},Ht={key:0,src:Tt,alt:""},Yt={key:1,src:Ut,alt:""},Zt={class:"token-info-footer"},Gt={class:"left"},Kt={class:"address"},Vt={key:0,class:"pc-address"},xt={key:1,class:"pc-address"},ea={class:"h5-address"},oa=Ft(()=>o("use",{"xlink:href":"#icon-icon-copy1"},null,-1)),na=[oa],ta={class:"right"},aa=["id"];function sa(e,p,S,w,j,W){var C;const m=Bo,$=Ue("image");return r(),g("div",jt,[o("div",Et,[o("div",Dt,[o("div",Lt,[ee(o("img",{onerror:w.theme=="default"?w.importIcon("/image/coins/unknown.png"):w.importIcon("/image/coins/sui-unknown.png")},null,8,Wt),[[$,S.coin.logoURI||w.importIcon(`/image/coins/${S.coin.symbol.toLowerCase()}.png`)]]),o("div",null,[o("div",qt,u(w.coinSymbol),1),o("div",Jt,[o("span",null,[K(u(w.coinName)+" ",1),w.theme!=="sui"?(r(),g("span",Qt,u(w.coinLabels?`(${w.coinLabels})`:""),1)):F("",!0)])])])]),o("div",Xt,[he(m,{placement:"top","arrow-point-at-center":""},{title:ce(()=>[K(u(S.market==="pyth"?"Data source: Pyth Network":"Data source: CoinGecko"),1)]),default:ce(()=>[o("div",zt,[S.market==="pyth"?(r(),g("img",Ht)):(r(),g("img",Yt)),o("span",null,"$"+u(w.nowPrice?Number(w.nowPrice)<1?w.decimalUi(w.nowPrice,4):w.fixD(w.nowPrice,2):"--"),1),w.price_rate_24h?(r(),g("i",{key:2,class:de(w.price_rate_24h>0?"up":w.price_rate_24h<0?"down":"up")},u(w.price_rate_24h>0?`+ ${w.fixD(w.price_rate_24h,2)}`:w.price_rate_24h<0?+`${w.fixD(w.price_rate_24h,2)}`:`+${w.fixD(w.price_rate_24h,2)}`)+"%",3)):F("",!0)])]),_:1})])]),o("div",Zt,[o("div",Gt,[o("div",Kt,[S.coin&&w.address!=="0x2::sui::SUI"?(r(),g("span",Vt,u(S.coin&&S.coin.address.substr(0,13))+" ... "+u(S.coin&&S.coin.address.substr(S.coin.address.length-13,13)),1)):(r(),g("span",xt,u(S.coin&&S.coin.address),1)),o("span",ea,u(S.coin&&S.coin.address.substr(0,4))+" ... "+u(S.coin&&S.coin.address.substr(S.coin.address.length-4,4)),1),(r(),g("svg",{class:"icon","aria-hidden":"true",onClick:p[0]||(p[0]=X=>w.store.copy(S.coin&&S.coin.address))},na))])]),o("div",ta,[o("div",{id:`main${(C=S.coin)==null?void 0:C.name}`,class:"main"},null,8,aa)])])])])}const ia=Te(Mt,[["render",sa],["__scopeId","data-v-cab5b536"]]);const la=Ge({components:{Modal:Mo},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e){const p=Me(),S=to("Sui"),w=N(()=>p);N(()=>{var P,R;return(R=(P=w.value)==null?void 0:P.poolInfo)==null?void 0:R.needReverse});const j=h([]),W=h({});ne(()=>[e.suiPreSwapdata,e.fromCoin,e.toCoin],async([P,R,Y])=>{if(P&&!Se(P)){let a=[];P.splitPaths.sort((A,M)=>M.outputAmount-A.outputAmount);for(let A=0;A<P.splitPaths.length;A++){const M=P.splitPaths[A],n={...M,amountIn:new i(M.inputAmount).div(new i(Math.pow(10,R.decimals))).toString(),amountOut:new i(M.outputAmount).div(new i(Math.pow(10,Y.decimals))).toString()};let s=[];for(let y=0;y<M.basePaths.length;y++){const f=M.basePaths[y],J=f.fromCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":f.fromCoin,E=f.toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":f.toCoin,z=w.value.tokensObj[J]||(await S.getTokenListByCoinType([J]))[0],_=w.value.tokensObj[E]||(await S.getTokenListByCoinType([E]))[0];(f==null?void 0:f.label)=="Deepbook"?s.push({...f,...w.value.routerPoolConfigObj[f.poolAddress],feeRate:new i(f.feeRate).div(new i(Math.pow(10,9))),coin_a:z,coin_b:_}):s.push({...f,...w.value.routerPoolConfigObj[f.poolAddress],feeRate:new i(f.feeRate).div(new i(Math.pow(10,6)))})}a.push({...n,basePaths:s})}j.value=a;const Z=[];let oe=new i(0);a.forEach(A=>{const M=new i(A.percent).gt(0)?new i(A.percent).div(100).mul(100).toString():0,n=ae(M,2);oe=oe.plus(n);const s=n.split(".");Z.push({value:n,int:s[0],decimal:s[1],pathIndex:A.pathIndex})});let b=new i(100).minus(oe).toNumber();const V=Z.sort((A,M)=>Number(M.decimal)-Number(A.decimal));if(b)for(let A=0;A<V.length&&b;A++)V[A].value=new i(V[A].value).plus(.01).toString(),b=new i(b).minus(.01).toNumber();W.value=Object.fromEntries(V.map((A,M)=>[A.pathIndex,A]))}},{immediate:!0});const m=Ee(),$=N(()=>m),C=P=>{var R;return(P==null?void 0:P.logoURI)||(P==null?void 0:P.logo_url)||((R=w.value.tokensObj[(P==null?void 0:P.address)=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":P==null?void 0:P.address])==null?void 0:R.logo_url)||($.value.theme==="default"?ve("/image/coins/unknown.png"):ve("/image/coins/sui-unknown.png"))},X=async P=>{const R=(await S.getTokenListByCoinType([P]))[0];return R&&!Se(R)?R==null?void 0:R.logo_url:""},x=N(()=>w.value.tokensObj);return{addCommom:q,routerStep:j,getCoinIcon:C,getDeepBookLogo:X,percentObj:W,tokensObj:x,store:$,getExplorerUrl:Io}}}),ge=e=>(Fe("data-v-c8d6399d"),e=e(),je(),e),ua=ge(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ra={class:"route-top"},da={class:"token-a"},ca={alt:""},ma={class:"token-num"},va={class:"token-symbol"},fa={class:"token-b"},pa={class:"token-num"},ha={class:"token-symbol"},ga={alt:""},Ca={class:"route-bottom"},ba=ge(()=>o("div",{class:"left-round"},null,-1)),wa=ge(()=>o("div",{class:"right-round"},null,-1)),ka={class:"percent-text"},ya={class:"amount"},Aa={class:"symbol"},Sa={class:"percent-ratio"},_a={class:"percent-text"},$a={class:"amount"},Ia={class:"symbol"},Pa={class:"pool-info-box"},Na={key:0,class:"icon","aria-hidden":"true"},Ra=ge(()=>o("use",{"xlink:href":"#icon-icon_on1"},null,-1)),Oa=[Ra],Ba={class:"pool-info"},Ma={class:"pool-info-top"},Ta={class:"token-a-img",alt:""},Ua={class:"token-b-img",alt:""},Fa={class:"source"},ja=["src"],Ea={class:"pool-info-detail"},Da={class:"pool-address"},La=ge(()=>o("span",null,"Pool Address",-1)),Wa=["href"],qa=["onClick"],Ja=ge(()=>o("use",{"xlink:href":"#icon-icon-copy1"},null,-1)),Qa=[Ja],Xa={key:0,class:"token-info-detail"},za={alt:""},Ha={class:"token-name"},Ya={class:"token-address"},Za=["onClick"],Ga=ge(()=>o("use",{"xlink:href":"#icon-icon-copy1"},null,-1)),Ka=[Ga],Va={class:"token-symbol"},xa={class:"token-info-detail"},es={alt:""},os={class:"token-name"},ns={class:"token-address"},ts=["onClick"],as=ge(()=>o("use",{"xlink:href":"#icon-icon-copy1"},null,-1)),ss=[as],is={class:"token-symbol"};function ls(e,p,S,w,j,W){const m=To("Modal"),$=Ue("image");return r(),H(m,{title:"Route",width:"600px",visible:!0,footer:null,onCancel:p[0]||(p[0]=C=>e.$emit("onClose"))},{closeIcon:ce(()=>[ua]),default:ce(()=>{var C,X,x,P;return[o("div",ra,[o("div",da,[ee(o("img",ca,null,512),[[$,(C=e.fromCoin)==null?void 0:C.logo_url]]),o("span",ma,u(("addCommom"in e?e.addCommom:Q(q))(e.fromCoinAmount)),1),o("span",va,u((X=e.fromCoin)==null?void 0:X.symbol),1)]),o("div",fa,[o("span",pa,u(("addCommom"in e?e.addCommom:Q(q))(e.toCoinAmount)),1),o("span",ha,u((x=e.toCoin)==null?void 0:x.symbol),1),ee(o("img",ga,null,512),[[$,(P=e.toCoin)==null?void 0:P.logo_url]])])]),o("div",Ca,[ba,wa,(r(!0),g(Ze,null,_o(e.routerStep,(R,Y)=>(r(),g("div",{key:Y,class:de(["route-path",Y!==0?"route-path-active":""])},[o("div",{class:de(["percent",Y!==0?"percent-active":""])},[o("div",ka,[o("div",ya,u(("addCommom"in e?e.addCommom:Q(q))(R.amountIn)),1),o("div",Aa,u(e.fromCoin.symbol),1),o("span",Sa,"("+u(e.percentObj&&e.percentObj[R.pathIndex].value)+"%)",1)]),o("div",_a,[o("div",$a,u(("addCommom"in e?e.addCommom:Q(q))(R.amountOut)),1),o("div",Ia,u(e.toCoin.symbol),1)])],2),o("div",Pa,[R.basePaths&&R.basePaths.length>1?(r(),g("svg",Na,Oa)):F("",!0),(r(!0),g(Ze,null,_o(R.basePaths,(a,Z)=>{var oe,b,V,A,M,n,s,y,f,J,E,z,_,D,d,c,_e,Re,De,Le;return r(),g("div",{key:Z},[o("div",Ba,[o("div",Ma,[ee(o("img",Ta,null,512),[[$,a.label=="Cetus"?e.getCoinIcon({address:a.fromCoin}):(oe=a==null?void 0:a.coin_a)==null?void 0:oe.logo_url]]),ee(o("img",Ua,null,512),[[$,a.label=="Cetus"?e.getCoinIcon({address:a.toCoin}):(b=a==null?void 0:a.coin_b)==null?void 0:b.logo_url]]),o("span",null,u((a==null?void 0:a.feeRate)*100)+"%",1)]),o("div",Fa,[o("img",{src:a.label=="Cetus"?"/sui-image/logo_cetus@2x.png":"/sui-image/logo_deepbook@2x.png",alt:""},null,8,ja),o("span",null,u(a.label=="Cetus"?"Cetus":"DeepBook"),1)]),o("div",{class:de(["pool-info-detail-box",R.basePaths.length==1?"pool-info-detail-box-center":Z==0?"pool-info-detail-box-left":"pool-info-detail-box-right"])},[o("div",Ea,[o("div",Da,[La,o("p",null,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:Q(Io))("poolAddress",a==null?void 0:a.poolAddress),target:"_blank"},u(a&&((V=a==null?void 0:a.poolAddress)==null?void 0:V.substr(0,6)))+" ... "+u(a&&((A=a==null?void 0:a.poolAddress)==null?void 0:A.substr(a.poolAddress.length-6,6))),9,Wa),(r(),g("svg",{class:"copy-icon","aria-hidden":"true",onClick:$e=>e.store.copy(a==null?void 0:a.poolAddress)},Qa,8,qa))])]),a.coin_a&&a.coin_a?(r(),g("div",Xa,[ee(o("img",za,null,512),[[$,(M=a==null?void 0:a.coin_a)==null?void 0:M.logo_url]]),o("div",null,[o("div",null,[o("span",Ha,u((n=a==null?void 0:a.coin_a)==null?void 0:n.symbol),1),o("p",Ya,[o("span",null,u((y=(s=a==null?void 0:a.coin_a)==null?void 0:s.address)==null?void 0:y.substr(0,4))+" ... "+u(a&&((E=(f=a==null?void 0:a.coin_a)==null?void 0:f.address)==null?void 0:E.substr(((J=a==null?void 0:a.coin_a)==null?void 0:J.address.length)-4,4))),1),(r(),g("svg",{class:"copy-icon","aria-hidden":"true",onClick:$e=>{var fe;return e.store.copy((fe=a==null?void 0:a.coin_a)==null?void 0:fe.address)}},Ka,8,Za))])]),o("div",Va,u((z=a==null?void 0:a.coin_a)==null?void 0:z.name),1)])])):F("",!0),o("div",xa,[ee(o("img",es,null,512),[[$,(_=a==null?void 0:a.coin_b)==null?void 0:_.logo_url]]),o("div",null,[o("div",null,[o("span",os,u((D=a==null?void 0:a.coin_b)==null?void 0:D.symbol),1),o("p",ns,[o("span",null,u((c=(d=a==null?void 0:a.coin_b)==null?void 0:d.address)==null?void 0:c.substr(0,4))+" ... "+u(a&&((De=(_e=a==null?void 0:a.coin_b)==null?void 0:_e.address)==null?void 0:De.substr(((Re=a==null?void 0:a.coin_b)==null?void 0:Re.address.length)-4,4))),1),(r(),g("svg",{class:"copy-icon","aria-hidden":"true",onClick:$e=>{var fe;return e.store.copy((fe=a==null?void 0:a.coin_b)==null?void 0:fe.address)}},ss,8,ts))])]),o("div",is,u((Le=a==null?void 0:a.coin_b)==null?void 0:Le.name),1)])])])],2)])])}),128))])],2))),128))])]}),_:1})}const us=Te(la,[["render",ls],["__scopeId","data-v-c8d6399d"]]),rs=Ge({components:{Modal:Mo},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},slippage:{type:String,default:""},impact:{type:Number,required:!1},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!1},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!1},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e,p){const S=Me(),w=N(()=>S),j=Ee(),W=N(()=>j),m=a=>{var Z;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((Z=w.value.tokensObj[a==null?void 0:a.address])==null?void 0:Z.logo_url)||(W.value.theme==="default"?ve("/image/coins/unknown.png"):ve("/image/coins/sui-unknown.png"))},$=h(!1),C=N(()=>W.value.chainName),X=async()=>{p.emit("to-swap")};h([]);const x=h(0),P=h(""),R=h(""),Y=N(()=>W.value.slippage);return ne(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,Y.value],([a,Z,oe,b,V,A])=>{if(a&&Z&&oe&&b&&A)if(V){const M=new i(Z).mul(new i(A/100));R.value=new i(Z).sub(M).toString()}else{const M=new i(a).mul(new i(A/100));P.value=new i(a).add(M).toString()}},{immediate:!0}),{getCoinIcon:m,addCommom:q,sFixD:ae,rateChange:$,chainName:C,clickNextBtn:X,pathLength:x,maximumSold:P,minimumReceived:R,decimalUi:ue}}});const Ce=e=>(Fe("data-v-ce681136"),e=e(),je(),e),ds=Ce(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),cs={class:"new-swap-contnet"},ms={class:"coin-info"},vs={class:"from-coin-info"},fs={class:"left"},ps={class:"coin-amount"},hs={class:"coin-symbol"},gs={class:"right"},Cs={class:"to-coin-info"},bs={class:"left"},ws={class:"coin-amount"},ks={class:"coin-symbol"},ys={class:"right"},As=Ce(()=>o("div",{class:"to-swap-logo"},null,-1)),Ss={class:"coin-rate"},_s={key:0},$s={class:"left"},Is=Ce(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Ps=Ce(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Ns=[Is,Ps],Rs={key:1},Os={class:"left"},Bs=Ce(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Ms=Ce(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Ts=[Bs,Ms],Us={class:"bottom"},Fs={class:"induction"},js={class:"item"},Es={class:"induction-text"},Ds={class:"induction-value"},Ls={class:"item"},Ws={class:"induction-text"},qs={class:"induction-value"},Js={class:"item"},Qs={class:"induction-text"},Xs={key:0,class:"icon","aria-hidden":"true"},zs=Ce(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Hs=[zs],Ys={class:"item"},Zs={class:"induction-text"},Gs={key:0,class:"induction-value"},Ks={key:1,class:"induction-value"},Vs={key:0,class:"price-updated"},xs=Ce(()=>o("span",null,"Price updated",-1));function ei(e,p,S,w,j,W){const m=Uo,$=To("Modal"),C=Ue("image");return r(),H($,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:p[4]||(p[4]=X=>e.$emit("on-close"))},{closeIcon:ce(()=>[ds]),default:ce(()=>[o("div",cs,[o("div",ms,[o("div",vs,[o("div",fs,[o("div",ps,u(e.fromCoinAmount&&("addCommom"in e?e.addCommom:Q(q))(e.fromCoinAmount)),1),o("div",hs,u(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",gs,[ee(o("img",null,null,512),[[C,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),o("div",Cs,[o("div",bs,[o("div",ws,u(e.toCoinAmount&&("addCommom"in e?e.addCommom:Q(q))(e.toCoinAmount)),1),o("div",ks,u(e.toCoin&&e.toCoin.symbol),1)]),o("div",ys,[ee(o("img",null,null,512),[[C,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),As]),o("div",Ss,[e.rateChange?(r(),g("div",Rs,[o("div",Os,[ee(o("img",null,null,512),[[C,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,"1 "+u(e.toCoin&&e.toCoin.symbol)+" ≈",1),ee(o("img",null,null,512),[[C,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,u(("decimalUi"in e?e.decimalUi:Q(ue))(e.oneFromAmount,e.fromCoin.decimals))+" "+u(e.fromCoin.symbol),1)]),o("div",{class:"right",onClick:p[1]||(p[1]=X=>e.rateChange=!e.rateChange)},Ts)])):(r(),g("div",_s,[o("div",$s,[ee(o("img",null,null,512),[[C,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,"1 "+u(e.fromCoin&&e.fromCoin.symbol)+" ≈",1),ee(o("img",null,null,512),[[C,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,u(("decimalUi"in e?e.decimalUi:Q(ue))(e.oneToAmount,e.toCoin.decimals))+" "+u(e.toCoin.symbol),1)]),o("div",{class:"right",onClick:p[0]||(p[0]=X=>e.rateChange=!e.rateChange)},Ns)]))])]),o("div",Us,[o("div",Fs,[o("div",js,[o("div",Es,u(e.$t("modal.slippageTolerance")),1),o("div",Ds,u(e.slippage)+"%",1)]),o("div",Ls,[o("div",Ws,u(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",qs,u(e.fixedFromCoin?("addCommom"in e?e.addCommom:Q(q))(("sFixD"in e?e.sFixD:Q(ae))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:Q(q))(("sFixD"in e?e.sFixD:Q(ae))(e.maximumSold,e.fromCoin.decimals)))+" "+u(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",Js,[o("div",Qs,u(e.$t("common.priceImpact")),1),o("div",{class:de(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[K(u(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(r(),g("svg",Xs,Hs)):F("",!0)],2)]),o("div",Ys,[o("div",Zs,u(e.$t("common.fee")),1),e.chainName=="Aptos"?(r(),g("div",Gs,u(e.formatFee)+" "+u(e.fromCoin.symbol)+" ("+u(e.fee*100)+"%) ",1)):(r(),g("div",Ks,u(e.fee)+" "+u(e.fromCoin.symbol),1))])])])]),e.isShowAccept?(r(),g("div",Vs,[xs,he(m,{class:"accept-btn",loading:e.swapLoading,onClick:p[2]||(p[2]=X=>e.$emit("accept"))},{default:ce(()=>[K("Accept")]),_:1},8,["loading"])])):(r(),H(m,{key:1,class:"big-btn swap-confirm-btn",onClick:p[3]||(p[3]=X=>e.clickNextBtn())},{default:ce(()=>[K(u(e.$t("button.confirmSwap")),1)]),_:1}))]),_:1},8,["title"])}const oi=Te(rs,[["render",ei],["__scopeId","data-v-ce681136"]]),ni=Ge({setup(){const e=$o(),p=Po(No,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:S,locale:w}=vn(),j=Ee(),W=Me(),m=N(()=>W);let $=h(!1),C=h(!1),X=h(!1),x=h(!1),P=h(!1),R=h(!1);const Y=h("fromCoin"),a=h(""),Z=h(""),oe=h(!1),b=h(!0),V=h(!1),A=h(!1),M=h(!1),n=h(""),s=h(""),y=h(20),f=h(0),J=h(null),E=h(!1),z=N(()=>j.slippage),_=N(()=>j.chainName),D=N(()=>_.value?to(_.value):{}),d=h(),c=h(),_e=N(()=>pe&&pe[_.value]&&pe[_.value].hasRouter),Re=N(()=>W.getPoolInfoSuccess),De=N(()=>{var t;return B.value&&((t=B.value)!=null&&t.is_pause)?"Pool Closed":!d.value||!c.value?S("modal.selectTokenModalTitle"):!Number(n.value)&&!Number(s.value)?S("button.enterAmount"):!_e.value&&!B.value&&Re.value?"Pool Not Found":_e.value&&ye.value?"No Available Route":E.value?S("button.insufficientLiquidity"):Number(n.value)>Number(le.value)?S("button.insufficientBalance",{name:d.value.symbol}):S("button.swap")}),Le=t=>{var v,l,k,O;Y.value=t,t==="fromCoin"?(a.value=((v=c.value)==null?void 0:v.address)||"",Z.value=((l=d.value)==null?void 0:l.address)||""):(a.value=((k=d.value)==null?void 0:k.address)||"",Z.value=((O=c.value)==null?void 0:O.address)||""),oe.value=!0},$e=h({}),fe=h({}),Fo=t=>{Y.value==="fromCoin"?($e.value=t,xe(t)):(fe.value=t,xe(t))},jo=t=>{t==="fromCoin"?(b.value=!0,_.value==="Aptos"?n.value=le.value>0?d.value.symbol=="APT"?new i(Number(le.value)).sub(new i(.1)).lt(new i(0))?"0":new i(Number(le.value)).sub(new i(.1)).toString():String(le.value):"":n.value=le.value>0?d.value.symbol=="SUI"?new i(Number(le.value)).sub(new i(.05)).lt(new i(0))?"0":new i(Number(le.value)).sub(new i(.05)).toString():String(le.value):""):(b.value=!1,_.value==="Aptos"?s.value=re.value>0?c.value.symbol=="APT"?new i(Number(re.value)).sub(new i(.1)).lt(new i(0))?"0":new i(Number(re.value)).sub(new i(.1)).toString():String(re.value):"":s.value=re.value>0?c.value.symbol=="SUI"?new i(Number(re.value)).sub(new i(.05)).lt(new i(0))?"0":new i(Number(re.value)).sub(new i(.05)).toString():String(re.value):"")},Eo=t=>{t==="fromCoin"?(b.value=!0,n.value=le.value>0?ae(new i(Number(le.value)).div(2).toString(),d.value.decimals).toString():""):(b.value=!1,s.value=re.value>0?ae(new i(Number(re.value)).div(2).toString(),c.value.decimals).toString():"")};fn(()=>{ao()}),pn(()=>{clearInterval(J.value)});const Ke=N(()=>j),Ve=()=>{!B.value&&!_e.value||(clearInterval(J.value),W.setPoolConfigList(Ke.value.chainName,Ke.value.filterCoinsObj),f.value=0,C.value=!0,B.value&&W.updateCurrentPools(B.value.poolAddress,_.value),Ne(b.value?n.value:s.value),ie.value.address&&D.value.getAccount(ie.value.address),j.getStatsData(_.value,Ke.value.filterCoinsObj),setTimeout(()=>{C.value=!1,ao()},1e3))},ao=()=>{J.value=setInterval(()=>{C.value=!1,V.value||f.value<y.value&&(f.value+=1,f.value===y.value&&(_.value=="Aptos"?(B.value&&B.value.poolAddress&&W.updateCurrentPools(B.value.poolAddress,_.value),Ve()):R.value||Ve(),f.value=0,C.value=!0))},1e3)};ne(b,He((t,v)=>{b.value=t},500));const Ie=h(!1);ne(n,He((t,v)=>{t&&t!==0&&b.value&&(f.value=0,Ne(t)),t==""&&b.value&&(s.value="")},500)),ne(s,He((t,v)=>{t&&t!==0&&!b.value&&(f.value=0,Ne(t)),t==""&&!b.value&&(n.value="")},500));const We=h(1e-4),qe=async t=>{let v=t;if(_.value==="Aptos"&&!v.current_sqrt_price&&n.value&&s.value){const l=await D.value.getPools([v.address]);l&&l[0]&&(v={...t,...l[0],fee:Number(l[0].fee_rate)/1e6})}if(v.current_sqrt_price&&n.value&&s.value){const k=(d.value.address===v.coinA.address&&c.value.address===v.coinB.address?0:1)==0,O=new i(n.value),I=new i(s.value),U=O.sub(O.mul(new i(v.fee))),G=I.div(U);return D.value.getPriceImpactPct(v,G.toString(),k)}return"--"},so=h(0),io=h(0),lo=h(),Pe=h({}),Do=async t=>{if(B.value&&!(b.value&&Number(n.value)==0)&&!(!b.value&&Number(s.value)==0))if(d.value&&c.value&&(n.value||s.value)){A.value=!0,M.value=!0,E.value=!1;const v=d.value.address===B.value.coinA.address&&c.value.address===B.value.coinB.address?0:1;try{let l=await D.value.preSwap({pool:B.value,a2b:v==0,byAmountIn:b.value,amount:b.value?n.value:s.value});E.value=l==null?void 0:l.isExceed,lo.value=l==null?void 0:l.estimatedFeeAmount,b.value?(s.value=l.estimatedAmountOut,ke.value=(Number(l.estimatedAmountOut)/t).toString(),we.value=(t/Number(l.estimatedAmountOut)).toString()):(n.value=l.estimatedAmountIn,ke.value=(t/Number(l.estimatedAmountIn)).toString(),we.value=(Number(l.estimatedAmountIn)/t).toString()),so.value=new i(s.value).div(n.value).toString(),io.value=new i(n.value).div(s.value).toString(),We.value=_.value=="Aptos"?await qe(B.value):await qe(Pe.value||B.value),A.value=!1,M.value=!1}catch{A.value=!1,M.value=!1}}else b.value?s.value="":n.value="",A.value=!1,M.value=!1},Lo=hn(),ie=N(()=>Lo),Wo=h({}),we=h(""),ke=h(""),le=N(()=>ie.value.assets&&d.value&&ie.value.assets[d.value.address]?So(ie.value.assets[d.value.address].balance,d.value.decimals):0),re=N(()=>ie.value.assets&&c.value&&ie.value.assets[c.value.address]?So(ie.value.assets[c.value.address].balance,c.value.decimals):0);$o(),ne(()=>m.value.tokensObj,async t=>{if(!Se(t)){const v=e?e.currentRoute.value.query.to:"",l=e?e.currentRoute.value.query.from:"";l?d.value=await D.value.getTokenBySymbol(t,l):!l&&!d.value&&(d.value=await D.value.getTokenBySymbol(t,pe[_.value].swapDefaultPair.fromCoin)),v?c.value=await D.value.getTokenBySymbol(t,v):!v&&!c.value&&(c.value=await D.value.getTokenBySymbol(t,pe[_.value].swapDefaultPair.toCoin)),!l&&v&&(d.value="")}},{immediate:!0});const B=N(()=>{var t,v,l,k,O;if(d.value&&c.value){let I=null,U={};if(Object.values(m.value.poolConfigList).forEach(T=>{var L,te,me,Be;(T.coinA.address.toUpperCase()===((L=d.value.address)==null?void 0:L.toUpperCase())&&T.coinB.address.toUpperCase()===((te=c.value.address)==null?void 0:te.toUpperCase())||T.coinB.address.toUpperCase()===((me=d.value.address)==null?void 0:me.toUpperCase())&&T.coinA.address.toUpperCase()===((Be=c.value.address)==null?void 0:Be.toUpperCase()))&&(U[T.address]={...T})}),_.value=="Aptos"&&m.value.poolsObj&&!Se(m.value.poolsObj))for(const T in m.value.poolsObj){const L=m.value.poolsObj[T];(L.token_a.address.toUpperCase()===((t=d.value.address)==null?void 0:t.toUpperCase())&&L.token_b.address.toUpperCase()===((v=c.value.address)==null?void 0:v.toUpperCase())||L.token_b.address.toUpperCase()===((l=d.value.address)==null?void 0:l.toUpperCase())&&L.token_a.address.toUpperCase()===((k=c.value.address)==null?void 0:k.toUpperCase()))&&(U[L.address]={...L})}const G=Object.values(U).sort((T,L)=>T.fee-L.fee);for(let T=0;T<G.length;T++)if(!((O=G[T])!=null&&O.is_pause)){I=G[T];break}return I=Object.values(U).sort((T,L)=>T.fee-L.fee)[0],I&&!Se(I)?I:null}return null}),uo=h(!0),ro=h(!1),qo=async t=>{t&&_.value=="Aptos"&&(Ne(b.value?n.value:s.value),ro.value=!0,t.coinA.symbol.toLowerCase()===d.value.symbol.toLowerCase()&&t.coinB.symbol.toLowerCase()===c.value.symbol.toLowerCase()?uo.value=!0:uo.value=!1,E.value=!1)};ne(()=>B.value,(t,v)=>{t&&(!v||t.address!==v.address||t.current_sqrt_price!==v.current_sqrt_price)&&qo(t)},{immediate:!0,deep:!0});const Jo=N(()=>m.value.tokensObj&&d.value&&d.value.address&&m.value.tokensObj[d.value.address]&&m.value.tokensObj[d.value.address].logoURI),Qo=N(()=>m.value.tokensObj&&c.value&&c.value.address&&m.value.tokensObj[c.value.address]&&m.value.tokensObj[c.value.address].logoURI),Xo=N(()=>_.value==="Aptos"?m.value.tokensObj&&d.value&&d.value.address&&m.value.tokensObj[d.value.address]&&m.value.tokensObj[d.value.address].coingecko_id||null:m.value.tokensObj&&d.value&&d.value.address||null),zo=N(()=>_.value==="Aptos"?m.value.tokensObj&&c.value&&c.value.address&&m.value.tokensObj[c.value.address]&&m.value.tokensObj[c.value.address].coingecko_id||null:m.value.tokensObj&&c.value&&c.value.address||null),Ho=N(()=>{var t,v,l,k,O,I,U,G,T;return(l=(v=m==null?void 0:m.value)==null?void 0:v.tokensObj[(t=d==null?void 0:d.value)==null?void 0:t.address])!=null&&l.pyth_id&&((I=(O=m==null?void 0:m.value)==null?void 0:O.tokensObj[(k=d==null?void 0:d.value)==null?void 0:k.address])==null?void 0:I.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(T=(G=m==null?void 0:m.value)==null?void 0:G.tokensObj[(U=d==null?void 0:d.value)==null?void 0:U.address])!=null&&T.coingecko_id?"coingecko":null}),Yo=N(()=>{var t,v,l,k,O,I,U,G,T;return(l=(v=m==null?void 0:m.value)==null?void 0:v.tokensObj[(t=c==null?void 0:c.value)==null?void 0:t.address])!=null&&l.pyth_id&&((I=(O=m==null?void 0:m.value)==null?void 0:O.tokensObj[(k=c==null?void 0:c.value)==null?void 0:k.address])==null?void 0:I.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(T=(G=m==null?void 0:m.value)==null?void 0:G.tokensObj[(U=c==null?void 0:c.value)==null?void 0:U.address])!=null&&T.coingecko_id?"coingecko":null}),Zo=N(()=>{var k,O;const t=new i(n.value),v=new i(_.value=="Aptos"?(k=B==null?void 0:B.value)==null?void 0:k.fee:(O=Pe==null?void 0:Pe.value)==null?void 0:O.fee),l=t.mul(v).toString();return Number(l)<1/Math.pow(10,d.value.decimals)?`<${new i(1).div(new i(Math.pow(10,d.value.decimals))).toString()}`:ae(l,d.value.decimals)}),{setIsShowSuccess:Go,setIsShowRejected:co,setIsShowWaiting:Je,setTransactionDesc:Ko,setTransactionTxid:mo}=j,Vo=async()=>{var v,l,k,O,I,U,G,T;R.value=!1,A.value=!0,clearInterval(Oe),window.clearInterval(Oe),mo(""),Ko(S("tips.swapping",{from:`${q(n.value)} ${(v=d.value)==null?void 0:v.symbol}`,to:`${q(s.value)} ${(l=c.value)==null?void 0:l.symbol}`})),Je(!0);let t;_.value=="Aptos"&&(t=d.value.address===B.value.token_a.address&&c.value.address===B.value.token_b.address?0:1);try{let L;_.value=="Aptos"?L=await D.value.getSwapTransactionPayload({pool:B.value,a2b:t==0,byAmountIn:b.value,amount:b.value?n.value:s.value,slippage:Number(z.value)/100}):L=await no.value.swapRouterContract.getSwapRouterPayload(Qe.value,Number(z.value)/100);let te;if(_.value==="Aptos")te=await ie.value.currentWallet.signAndSubmitTransaction(L);else{const me=await ie.value.currentWallet.signAndExecuteTransactionBlock(L);te=D.value.handleTx(me)}if(te&&te.hash){mo(te.hash),Je(!1),Go(!0);const me={title:S("tips.swap"),desc:S("tips.swapSuccessText",{from:`${q(n.value)} ${(k=d.value)==null?void 0:k.symbol}`,to:`${q(s.value)} ${(O=c.value)==null?void 0:O.symbol}`}),hash:te.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:d.value.address==pe[_.value].currentChainTokenAddress||c.value.address==pe[_.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(I=d.value)==null?void 0:I.address}`,numa:`- ${n.value}`,logoa:m.value.tokensObj&&d.value&&d.value.address&&m.value.tokensObj[d.value.address]&&m.value.tokensObj[d.value.address].logoURI,tokenb:`${(U=c.value)==null?void 0:U.address}`,numb:`+ ${s.value}`,logob:m.value.tokensObj&&c.value&&c.value.address&&m.value.tokensObj[c.value.address]&&m.value.tokensObj[c.value.address].logoURI},text:`Pay ${n.value} ${(G=d.value)==null?void 0:G.symbol} to receive ${s.value} ${(T=c.value)==null?void 0:T.symbol}`};_.value!=="Aptos"&&(me.res=te.res),D.value.showTransitionPending(me),await D.value.watchTransaction(me)&&setTimeout(()=>{_.value=="Aptos"&&W.updateCurrentPools(B.value.poolAddress,_.value),D.value.getAccount(ie.value.address)},1e3)}else Je(!1),co(!0);n.value="",s.value="",A.value=!1}catch{n.value="",s.value="",A.value=!1,Je(!1),co(!0)}},xo=t=>{var v;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((v=m.value.tokensObj[t==null?void 0:t.address])==null?void 0:v.logo_url)||(j.theme==="default"?ve("/image/coins/unknown.png"):ve("/image/coins/sui-unknown.png"))},vo=h([]);ne(()=>[d.value,c.value,m.value.poolConfigList],([t,v,l])=>{if(l&&l.length>0&&t&&v){const k=[];l.forEach(O=>{var I,U,G,T;(O.coinA.address.toUpperCase()===((I=t.address)==null?void 0:I.toUpperCase())&&O.coinB.address.toUpperCase()===((U=v.address)==null?void 0:U.toUpperCase())||O.coinB.address.toUpperCase()===((G=t.address)==null?void 0:G.toUpperCase())&&O.coinA.address.toUpperCase()===((T=v.address)==null?void 0:T.toUpperCase()))&&(O!=null&&O.is_pause||k.push(O.address))}),vo.value=k}},{immediate:!0});const xe=t=>{const v=localStorage.getItem(t.address);m.value.tokensObj&&m.value.tokensObj[t.address]&&m.value.tokensObj[t.address].isSelfBuilt&&!v?eo.value=!0:(Y.value==="fromCoin"?(n.value="",c.value&&t.address.toLowerCase()===(c==null?void 0:c.value.address.toLowerCase())&&(c.value=null),d.value=t):(d.value&&(s.value="",t.address.toLowerCase()===(d==null?void 0:d.value.address.toLowerCase())&&(d.value=null)),c.value=t),fo())},eo=h(!1),fo=()=>{fe.value={},$e.value={},eo.value=!1},en=N(()=>j.isShowRouterModal),oo=h([]),po=h(""),on=h(!1),ho=kn(),no=N(()=>ho),ye=h(!1),Qe=h({}),go=h(""),Co=t=>{const{splitPaths:v}=t;let l=new i(0);v.forEach((O,I)=>{const U=O.basePaths[0],G=U.label==="Cetus"?new i(U.feeRate).div(Math.pow(10,6)):new i(U.feeRate).div(Math.pow(10,9)),T=new i(U.inputAmount).div(Math.pow(10,d.value.decimals)).mul(G);if(l=l.add(T),O.basePaths[1]){const L=O.basePaths[1],te=U.direction?U.currentPrice:new i(1).div(U.currentPrice),me=L.direction?L.currentPrice:new i(1).div(O.basePaths[1].currentPrice),Be=L.label==="Cetus"?new i(L.feeRate).div(Math.pow(10,6)):new i(L.feeRate).div(Math.pow(10,9)),un=new i(L.outputAmount).div(Math.pow(10,c.value.decimals)).mul(Be).div(te.mul(me));l=l.add(un)}});const k=l.toNumber();go.value=k>0&&k<1e-6?"<0.000001":q(ae(k,d.value.decimals))},bo=(t,v)=>v.minus(t).div(v).mul(100),wo=async t=>{const{splitPaths:v}=t;let l=new i(0);v.forEach((k,O)=>{if(k.basePaths.length===1){const I=k.basePaths[0],U=new i(I.outputAmount).div(Math.pow(10,I.toDecimal)),G=new i(I.inputAmount).div(Math.pow(10,I.fromDecimal)),T=U.div(G),L=I.direction?new i(I.currentPrice):new i(1).div(I.currentPrice);l=l.add(bo(T,L))}else{const I=k.basePaths[0].direction?new i(k.basePaths[0].currentPrice):new i(1).div(k.basePaths[0].currentPrice),U=k.basePaths[1].direction?new i(k.basePaths[1].currentPrice):new i(1).div(k.basePaths[1].currentPrice),G=I.mul(U),T=new i(k.basePaths[1].outputAmount).div(Math.pow(10,k.basePaths[1].toDecimal)),L=new i(k.basePaths[0].inputAmount).div(Math.pow(10,k.basePaths[0].fromDecimal)),te=T.div(L);l=l.add(bo(te,G))}}),We.value=Number(ae(l.toNumber(),2))},ko=async t=>{if(d.value&&c.value&&(Number(n.value)>0||Number(s.value)>0)){(!n.value&&s.value||n.value&&!s.value)&&(A.value=!0),Ie.value=!0,ye.value=!1;let v;B.value&&(v=d.value.address===B.value.coinA.address&&c.value.address===B.value.coinB.address?0:1);try{let l;if(b.value){const U=new i(n.value).mul(Math.pow(10,d.value.decimals)).toString();l=new ze(U)}else{const U=new i(s.value).mul(Math.pow(10,c.value.decimals)).toString();l=new ze(U)}const k=Number(z.value)/100,O=B.value?{poolAddresses:vo.value,coinTypeA:B.value.coin_a_address,coinTypeB:B.value.coin_b_address,decimalsA:B.value.coinA.decimals,decimalsB:B.value.coinB.decimals,a2b:v==0,byAmountIn:b.value,amount:l.toString()}:"",I=await no.value.swapRouterContract.getSwapRouter(d,c,l,b.value,k,"",B.value?O:"");if(I&&!I.isExceed&&I.splitPaths&&I.splitPaths.length==0){ye.value=!0;return}if(I){if(Qe.value=I,oo.value=I.paths,E.value=I.isExceed,I.isExceed){A.value=!1,ye.value=!1,b.value?s.value="":n.value="";return}Co(I),b.value?n.value&&(s.value=new i(I.outputAmount).div(new i(Math.pow(10,c.value.decimals))).toString()):s.value&&(n.value=new i(I.inputAmount).div(new i(Math.pow(10,d.value.decimals))).toString()),we.value=q(ue(new i(n.value).div(new i(s.value).toString()),d.value.decimals)),ke.value=q(ue(new i(s.value).div(n.value).toString(),c.value.decimals)),wo(I),A.value=!1,ye.value=!1,Ie.value=!1}else A.value=!1,ye.value=!0,Ie.value=!1}catch{A.value=!1,Ie.value=!1}}else b.value?s.value="":n.value="",A.value=!1,Ie.value=!1},Ae=h(!1),yo=async t=>{try{let v;if(b.value){const O=new i(n.value).mul(Math.pow(10,d.value.decimals)).toString();v=new ze(O)}else{const O=new i(s.value).mul(Math.pow(10,c.value.decimals)).toString();v=new ze(O)}const l=Number(z.value)/100,k=await no.value.swapRouterContract.getSwapRouter(d,c,v,b.value,l,"");k&&(Qe.value=k,oo.value=k.paths,E.value=k.isExceed,po.value=k.amountIn,Co(k),we.value=q(ue(new i(n.value).div(new i(s.value).toString()),d.value.decimals)),ke.value=q(ue(new i(s.value).div(n.value).toString(),c.value.decimals)),wo(k),b.value?s.value!==k.amountOut&&(Ae.value=!0,s.value=k.amountOut):n.value!==k.amountIn&&(Ae.value=!0,n.value=k.amountIn))}catch{}},nn=async t=>{if(d.value&&c.value&&(n.value||s.value)){const v=d.value.address===B.value.coinA.address&&c.value.address===B.value.coinB.address?0:1;try{let l=await D.value.preSwap({pool:B.value,a2b:v==0,byAmountIn:b.value,amount:b.value?n.value:s.value});E.value=l==null?void 0:l.isExceed,lo.value=l==null?void 0:l.estimatedFeeAmount,b.value?(ke.value=(Number(l.estimatedAmountOut)/l.estimatedAmountIn).toString(),we.value=(l.estimatedAmountIn/Number(l.estimatedAmountOut)).toString()):(ke.value=(Number(l.estimatedAmountOut)/Number(l.estimatedAmountIn)).toString(),we.value=(Number(l.estimatedAmountIn)/Number(l.estimatedAmountOut)).toString()),b.value?s.value!==l.estimatedAmountOut&&(Ae.value=!0,s.value=l.estimatedAmountOut):n.value!==l.estimatedAmountIn&&(Ae.value=!0,n.value=l.estimatedAmountIn),We.value=_.value=="Aptos"?await qe(B.value):await qe(Pe.value||B.value),A.value=!1,M.value=!1}catch{A.value=!1,M.value=!1}}else A.value=!1,M.value=!1};let Oe=h(null);ne(()=>R.value,t=>{t?Oe.value=setInterval(()=>{_.value=="Aptos"?nn(b.value):yo(b.value)},3e3):(clearInterval(Oe.value),window.clearInterval(Oe.value))},{immediate:!0});const Ne=async t=>{_.value=="Aptos"?Do(t):ko()},tn=N(()=>ho),an=N(()=>tn.value.isInitRouter);ne(()=>an.value,t=>{t||(f.value=0,Ne(b.value?n.value:s.value))},{immediate:!0}),ne(()=>[d.value,c.value],([t,v])=>{if(t&&v&&(f.value=0,Ne(b.value?n.value:s.value)),t||v){const l=`/swap?from=${t==null?void 0:t.address}&to=${v==null?void 0:v.address}`;e.push(l)}},{immediate:!0});function sn(t,v=500){let l=null;return function(...k){clearTimeout(l),l=setTimeout(()=>{t.call(this,...k)},v)}}const ln=sn(Ao);function Ao(){const t=d.value;d.value=c.value,c.value=t,$.value=!0,b.value=!b.value,b.value?(n.value=s.value,s.value=""):(s.value=n.value,n.value=""),setTimeout(()=>{$.value=!1},300)}return{closeSwapConfirmModal:()=>{R.value=!1,Ae.value=!1},updateAccept:()=>{Ae.value=!1},clickExchange:Ao,debounceClickExchange:ln,closeTokenWarning:fo,isShowTokenWarning:eo,getTokenSource:xe,hasPool:ro,getPoolInfoSuccess:Re,halfBtnSelect:Eo,formCoinId:Xo,toCoinId:zo,formCoinMarket:Ho,toCoinMarket:Yo,fromCoinUrl:Jo,toCoinUrl:Qo,t:S,indicator:p,wallet:ie,currentLpInfo:Wo,fixD:Ye,decimalFormat:cn,impact:We,oneFromAmount:we,oneToAmount:ke,importIcon:ve,clickRefresh:Ve,refresh:C,change:$,isShowAddress:X,isShowSwapSetting:x,fromCoin:d,toCoin:c,slippage:z,openCoinSelect:Le,onCoinSelect:Fo,existingCoins:a,lastSelectCoin:Z,currentCoinKey:Y,showCoinSelect:oe,fromCoinAmount:n,toCoinAmount:s,maxBtnSelect:jo,fixedFromCoin:b,swapBtnText:De,toSwap:Vo,loading:V,swaping:A,autoRefreshTime:y,countdown:f,marketTimer:J,rateChange:P,isSwapConfirmMpdal:R,fromCoinBlance:le,toCoinBlance:re,poolInfo:B,chainName:_,swapRouterLoading:Ie,formatFee:Zo,calculating:M,currentRate:so,currentRateReverse:io,getCoinIcon:xo,toAddLiquidiPoolInfo:Pe,decimalUi:ue,warningToCoin:fe,warningFromCoin:$e,isShowRouterModal:en,toSwapLoading:on,insufficientLiquidity:E,routerPool:oo,routerTotalAmounts:po,store:j,suiPreSwapdata:Qe,suiSwapFee:go,addCommom:q,debounce:He,notFoundRouter:ye,getSuiAmountAccept:yo,isShowAccept:Ae,getSuiAmount:ko}}});const be=e=>(Fe("data-v-ffe93f03"),e=e(),je(),e),ti={class:"swap-container"},ai={class:"title"},si={class:"left"},ii={class:"right title-right"},li=be(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),ui={class:"swap-card"},ri={class:"card-container"},di={class:"card-item"},ci={class:"card-item"},mi=be(()=>o("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),vi=[mi],fi={key:1,class:"induction"},pi={key:0,class:"exchange-rate-btn"},hi={key:0},gi={key:0},Ci={key:0},bi={key:1},wi={key:0},ki=be(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),yi=be(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Ai=[ki,yi],Si={class:"item"},_i={class:"induction-text"},$i={key:0,class:"icon","aria-hidden":"true"},Ii=be(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Pi=[Ii],Ni={class:"item"},Ri={class:"induction-text"},Oi={key:0,class:"induction-value"},Bi={class:"item"},Mi={class:"induction-text"},Ti={key:0,class:"induction-value"},Ui={key:0,class:"icon","aria-hidden":"true"},Fi=be(()=>o("use",{"xlink:href":"#icon-icon-swap"},null,-1)),ji=[Fi],Ei={key:2,class:"token-info-container"},Di={class:"token-info-title"},Li=be(()=>o("span",{class:"coingecko"},"Price Reference",-1)),Wi=be(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1));function qi(e,p,S,w,j,W){var n,s;const m=rn,$=dn,C=Bt,X=Ro,x=Oo,P=Uo,R=gn,Y=Cn,a=bn,Z=Bo,oe=ia,b=wn,V=us,A=oi,M=Ue("image");return r(),g("div",ti,[o("div",ai,[o("div",si,u(e.$t("menu.swap")),1),o("div",ii,[o("div",{class:"slippage-icon",onClick:p[0]||(p[0]=y=>e.isShowSwapSetting=!0)},[li,o("span",null,u(e.slippage)+"%",1)]),he(m,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),o("div",ui,[o("div",ri,[o("div",di,[he($,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":p[1]||(p[1]=y=>e.fromCoinAmount=y),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From",onOnMax:p[2]||(p[2]=y=>e.maxBtnSelect("fromCoin")),onOnHalf:p[3]||(p[3]=y=>e.halfBtnSelect("fromCoin")),onOnInput:p[4]||(p[4]=y=>{e.fromCoinAmount=y,e.fixedFromCoin=!0}),onOnSelect:p[5]||(p[5]=y=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("div",ci,[he($,{modelValue:e.toCoinAmount,"onUpdate:modelValue":p[6]||(p[6]=y=>e.toCoinAmount=y),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",havehalf:!1,onOnInput:p[7]||(p[7]=y=>{e.toCoinAmount=y,e.fixedFromCoin=!1}),onOnSelect:p[8]||(p[8]=y=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("img",{class:de(e.change?"gang animationex":"gang"),src:yn,alt:""},null,2),o("div",{class:de(["exchange",e.chainName=="Sui"?"sui-exchange":""]),onClick:p[9]||(p[9]=(...y)=>e.debounceClickExchange&&e.debounceClickExchange(...y))},[(r(),g("svg",{class:de(e.change?"icon animationex":"icon"),"aria-hidden":"true"},vi,2))],2)]),e.chainName=="Sui"&&!e.notFoundRouter?(r(),H(C,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.impact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFee,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(r(),g("div",fi,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(r(),g("div",pi,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(r(),g("span",bi,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(r(),g("span",wi,[ee(o("img",null,null,512),[[M,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),K(" 1 "+u(e.toCoin.symbol)+" ≈ ",1),ee(o("img",null,null,512),[[M,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),o("span",null,u(("addCommom"in e?e.addCommom:Q(q))(("decimalUi"in e?e.decimalUi:Q(ue))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),K("  "+u(e.fromCoin.symbol),1)])):(r(),H(X,{key:1,indicator:e.indicator},null,8,["indicator"]))])):F("",!0):(r(),g("span",hi,[ee(o("img",null,null,512),[[M,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),K(" 1 "+u(e.fromCoin.symbol)+" ≈ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(r(),g("span",gi,[ee(o("img",null,null,512),[[M,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),e.calculating?F("",!0):(r(),g("span",Ci,u(("addCommom"in e?e.addCommom:Q(q))(("decimalUi"in e?e.decimalUi:Q(ue))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(r(),H(X,{key:1,indicator:e.indicator},null,8,["indicator"])):F("",!0),K("  "+u(e.toCoin.symbol),1)])):(r(),H(X,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"icon-change",onClick:p[10]||(p[10]=y=>e.rateChange=!e.rateChange)},Ai)])):F("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(r(),g(Ze,{key:1},[o("div",Si,[o("div",_i,u(e.$t("common.priceImpact")),1),e.swaping?(r(),H(x,{key:1,paragraph:!1,active:""})):(r(),g("div",{key:0,class:de(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[K(u(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(r(),g("svg",$i,Pi)):F("",!0)],2))]),o("div",Ni,[o("div",Ri,u(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(r(),H(x,{key:1,paragraph:!1,active:""})):(r(),g("div",Oi,u(e.fixedFromCoin?("addCommom"in e?e.addCommom:Q(q))(("fixD"in e?e.fixD:Q(Ye))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:Q(q))(("fixD"in e?e.fixD:Q(Ye))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+u(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",Bi,[o("div",Mi,u(e.$t("common.fee")),1),e.swaping?(r(),H(x,{key:1,paragraph:!1,active:""})):(r(),g("div",Ti,u(("addCommom"in e?e.addCommom:Q(q))(e.formatFee,e.fromCoin.decimals))+" "+u(e.fromCoin.symbol)+" ("+u(e.chainName=="Aptos"?e.poolInfo.fee*100:((n=e.toAddLiquidiPoolInfo)==null?void 0:n.fee)*100)+"%) ",1))])],64)):F("",!0)])):F("",!0)]),he(P,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((s=e.poolInfo)==null?void 0:s.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.chainName=="Aptos"?e.swaping:!1,onClick:p[11]||(p[11]=y=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ce(()=>[e.wallet.connected?(r(),g("svg",Ui,ji)):F("",!0),o("span",null,u(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),he(R),e.showCoinSelect?(r(),H(Y,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:p[12]||(p[12]=y=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):F("",!0),e.isShowSwapSetting?(r(),H(a,{key:1,onOnClose:p[13]||(p[13]=y=>e.isShowSwapSetting=!1)})):F("",!0),e.chainName&&(e.formCoinMarket||e.toCoinMarket)?(r(),g("div",Ei,[o("div",Di,[Li,he(Z,{placement:"top","arrow-point-at-center":""},{title:ce(()=>[K(" The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus. ")]),default:ce(()=>[Wi]),_:1})]),e.fromCoin&&e.formCoinMarket?(r(),H(oe,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):F("",!0),e.toCoin&&e.toCoinMarket?(r(),H(oe,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):F("",!0)])):F("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(r(),H(b,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):F("",!0),e.isShowRouterModal?(r(),H(V,{key:4,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:p[14]||(p[14]=y=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):F("",!0),e.isSwapConfirmMpdal?(r(),H(A,{key:5,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.impact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFee:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFee:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):F("",!0)])}const pl=Te(ni,[["render",qi],["__scopeId","data-v-ffe93f03"]]);export{pl as default};
