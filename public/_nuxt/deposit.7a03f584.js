import{_ as Io}from"./back.786db6fc.js";import{_ as xo}from"./refresh-icon.66d892d7.js";import{a as At,r as _,b as Zn,e as me,w as ce,i as vn,f as St,o as T,h as L,j as p,k as ne,t as S,p as gn,l as yn,D as V,m as gt,q as ue,s as Ae,v as $e,I as Eo,S as Si,x as Et,y as er,z as Le,B as tr,A as Pt,C as nt,E as Ro,F as Lo,M as Fo,G as Ni,H as Zt,J as Bo,K as Oo,c as Ye,L as Uo,N as qo,O as Do,P as Xo,Q as Or,R as Re,T as Ur,U as qr,V as Dr,W as mt,X as Xr,Y as Hr,Z as Yt,$ as zr,a0 as $n,a1 as Wt,a2 as Pn,a3 as Ho,a4 as zo}from"./entry.5c9c1586.js";import{_ as Vo,a as Ko}from"./coin-select.bdea377d.js";import{_ as Yo,a as Wo}from"./swap-setting.353de724.js";/* empty css              */import"./index.d14ca98c.js";import{_ as Go}from"./apr-tab.8becb923.js";import{_ as jo}from"./apr-tips.a5125220.js";import{_ as Mi,a as Ti,b as Qo}from"./img-lock_2x.d9319188.js";import{_ as Jo}from"./status-block.cb16912c.js";import{_ as $i,a as Pi}from"./icon-arrow_2x.db44c7c5.js";import{p as Zo}from"./precision.1cd464a0.js";import{_ as ea,a as ta}from"./checked.667d8670.js";import"./img-no-Positions_2x.e41c0467.js";import"./index.ee7fa36a.js";import"./coin-pair-name.50a2a76b.js";const na=At({props:{coinIcon:{type:String,default:""},coin:{type:Object,default:()=>({})}},setup(e){const t=_(""),n=_(""),r=_(""),i=Zn(),a=me(()=>i);return ce(()=>[a.value.tokensObj,e.coin],([o,s])=>{var l,u;o&&s&&o[s.address]?(n.value=((l=o[s.address])==null?void 0:l.labels)&&((u=o[s.address])==null?void 0:u.labels[0]),t.value=o[s.address].name,r.value=o[s.address].symbol):(n.value="",t.value="",r.value="")},{immediate:!0,deep:!0}),{importIcon:vn,coinName:t,coinLabels:n,coinSymbol:r}}}),ra=e=>(gn("data-v-08f9de78"),e=e(),yn(),e),ia={class:"coin-block"},oa=["src"],aa={class:"coin-info"},sa={class:"symbol"},la={class:"name"},ua=ra(()=>p("div",null,[p("svg",{class:"icon","aria-hidden":"true"},[p("use",{"xlink:href":"#icon-icon_on"})])],-1));function ca(e,t,n,r,i,a){return T(),L("div",ia,[p("div",null,[e.coinIcon?(T(),L("img",{key:0,src:e.coinIcon||e.importIcon(`/image/coins/${e.coinName.toLowerCase()}.png`)},null,8,oa)):ne("",!0),p("div",aa,[p("div",sa,S(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),p("div",la,S(e.coinName)+" "+S(e.coinLabels?`(${e.coinLabels})`:""),1)])]),ua])}const fa=St(na,[["render",ca],["__scopeId","data-v-08f9de78"]]),da=-443630;function Vr(e,t){const n=ha(e),r=(n-da)%t;return r>t/2?n-r+t:n-r}const Ii=new V("1.0001");function ha(e){return e.log(Ii).toDP(0,V.ROUND_HALF_UP).toNumber()}function Kr(e){return Ii.pow(e)}const ma=At({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1}},emits:["onInput"],setup(e,t){const n=_(""),r=_("");let i=_(""),a=_("");const o=()=>{if(Number.isNaN(n.value)||!n.value)return;const f=Vr(new V(n.value),u.value.tickSpacing),h=Kr(f+u.value.tickSpacing);if(e.pType=="Min"&&Number(h)>=Number(a.value))return;const g=h;t.emit("onInput",g)},s=()=>{if(Number.isNaN(n.value)||!n.value)return;const f=Vr(new V(n.value),u.value.tickSpacing),h=Kr(f-u.value.tickSpacing),g=h;e.pType=="Max"&&Number(h)<=Number(i.value)||t.emit("onInput",g)},l=f=>{let h=f.replace(/[^\d.]/g,"");const g=/^\d+(\.\d+)?$/;h.split(".").length>2&&!g.exec(h)&&(h=h.substr(0,h.length-1)),r.value=h,(gt(h,6)>0||String(h)=="0")&&t.emit("onInput",String(h))};ce(()=>e.defaultMinPrice,(f,h)=>{f!==h&&(i.value=e.defaultMinPrice)},{immediate:!0}),ce(()=>e.defaultMaxPrice,(f,h)=>{f!==h&&(a.value=e.defaultMaxPrice)},{immediate:!0}),ce(()=>e.inputValue,f=>{if(f&&f!=="0"&&f!=="\u221E"){n.value=f;const g=f.toString().split(".")[1];r.value=f!=="0"&&f!=="\u221E"&&g&&g.length>6?gt(f,6):f}else(f=="0"||f=="\u221E")&&(r.value=f)},{immediate:!0});const u=_({});ce(()=>e.poolInfo,(f,h)=>{f&&(u.value=f)},{immediate:!0});const c=_("");return ce(()=>e.currentPriceTab,f=>{c.value=f},{immediate:!0}),{addPrice:o,minusPrice:s,oValue:r,changeValue:l,isDisabled:c}}});const pa={class:"set-price-item"},va={class:"title"},ga={class:"input-box"},ya={key:0,class:"minus-btn"},wa=["disabled"],ba={key:1,class:"plus-btn"};function _a(e,t,n,r,i,a){const o=Eo,s=Si;return T(),L("div",pa,[p("div",va,S(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),ue(s,{loading:e.loading,active:"",paragraph:!1},{default:Ae(()=>[p("div",ga,[e.isDisabled=="Custom"?(T(),L("a",ya,[p("div",{class:$e(!e.fromCoin&&!e.toCoin?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:t[0]||(t[0]=(...l)=>e.minusPrice&&e.minusPrice(...l))},null,10,wa)])):ne("",!0),ue(o,{id:"pValu",value:e.oValue,"onUpdate:value":t[1]||(t[1]=l=>e.oValue=l),disabled:e.isDisabled!=="Custom",autocomplete:"off",onChange:t[2]||(t[2]=l=>e.changeValue(l.target.value))},null,8,["value","disabled"]),e.isDisabled=="Custom"?(T(),L("a",ba,[p("div",{class:$e(!e.fromCoin&&!e.toCoin?"addDis":"add"),onClick:t[3]||(t[3]=(...l)=>e.addPrice&&e.addPrice(...l))},null,2)])):ne("",!0)])]),_:1},8,["loading"]),p("p",{class:$e(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},S(e.toCoin&&e.toCoin.symbol)+" per "+S(e.fromCoin&&e.fromCoin.symbol),3)])}const Yr=St(ma,[["render",_a],["__scopeId","data-v-167293e4"]]),ka=At({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1}},setup(e,t){let n=_(""),r=_(""),i=_(),a=_(!1),o=_(!1);const s=_({}),l=Et(),u=me(()=>l);er(()=>{n.value=e.min,r.value=e.max}),ce(()=>e.currentPriceTab,(k,m)=>{k!==m&&(i.value=e.currentPriceTab)},{immediate:!0}),ce(()=>e.min,(k,m)=>{k!==m&&(n.value=k)}),ce(()=>e.max,(k,m)=>{k!==m&&(r.value=k)}),ce(()=>e.poolInfo,(k,m)=>{k&&(s.value=k)},{immediate:!0});const c=k=>{n.value=k,t.emit("onChangeMinPrice",k)},f=k=>{r.value=k,t.emit("onChangeMaxPrice",k)};ce(a,(k,m)=>{k!==m&&t.emit("onChangeFullRange",k)});const h=()=>{n.value=e.defaultMinPrice,r.value=e.defaultMaxPrice,o.value=!1,a.value=!1},g=()=>{o.value=!1,n.value="0",r.value="\u221E"};return ce(a,(k,m)=>{k!==m&&t.emit("onChangeFullRange",k)}),{store:u,changeMinPrice:c,changeMaxPrice:f,importIcon:vn,resetPrice:h,changeShowUnderStand:()=>{a.value=!a.value,a.value?o.value=!0:h(),o.value||(n.value=e.defaultMinPrice,r.value=e.defaultMaxPrice)},showUnderStand:o,minPrice:n,maxPrice:r,understand:g,isRadio:a}}});const Ca={class:"set-price"},Aa={class:"card-container"},Sa={key:0,class:"card"},Na=["src"],Ma={key:1,class:"understand"},Ta={class:"left"},$a={class:"right"};function Pa(e,t,n,r,i,a){const o=Yr,s=Yr,l=tr;return T(),L("div",Ca,[p("div",Aa,[e.showUnderStand?(T(),L("div",Ma,[p("div",Ta,[p("p",null,S(e.$t("common.lowerEfficiency")),1),p("p",null,S(e.$t("common.lowerEfficiencyTips")),1)]),p("div",$a,[ue(l,{onClick:e.understand},{default:Ae(()=>[Le(S(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(T(),L("div",Sa,[ue(o,{value:e.minPrice,"onUpdate:value":t[0]||(t[0]=u=>e.minPrice=u),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","onOnInput","onAddValue","onDelValue"]),ue(s,{value:e.maxPrice,"onUpdate:value":t[1]||(t[1]=u=>e.maxPrice=u),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","onOnInput","onAddValue","onDelValue"]),p("img",{src:e.importIcon("/image/lmg-line@2x.png"),alt:""},null,8,Na)]))])])}const Ia=St(ka,[["render",Pa],["__scopeId","data-v-c2ba1b54"]]);function en(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function xa(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xi(e){let t,n,r;e.length!==2?(t=en,n=(s,l)=>en(e(s),l),r=(s,l)=>e(s)-l):(t=e===en||e===xa?e:Ea,n=e,r=e);function i(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<0?u=f+1:c=f}while(u<c)}return u}function a(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function o(s,l,u=0,c=s.length){const f=i(s,l,u,c-1);return f>u&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:o,right:a}}function Ea(){return 0}function Ra(e){return e===null?NaN:+e}const La=xi(en),Fa=La.right;xi(Ra).center;const Ba=Fa;class Wr extends Map{constructor(t,n=qa){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Gr(this,t))}has(t){return super.has(Gr(this,t))}set(t,n){return super.set(Oa(this,t),n)}delete(t){return super.delete(Ua(this,t))}}function Gr({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Oa({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Ua({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function qa(e){return e!==null&&typeof e=="object"?e.valueOf():e}var Un=Math.sqrt(50),qn=Math.sqrt(10),Dn=Math.sqrt(2);function Da(e,t,n){var r,i=-1,a,o,s;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(s=Ei(e,t,n))===0||!isFinite(s))return[];if(s>0){let l=Math.round(e/s),u=Math.round(t/s);for(l*s<e&&++l,u*s>t&&--u,o=new Array(a=u-l+1);++i<a;)o[i]=(l+i)*s}else{s=-s;let l=Math.round(e*s),u=Math.round(t*s);for(l/s<e&&++l,u/s>t&&--u,o=new Array(a=u-l+1);++i<a;)o[i]=(l+i)/s}return r&&o.reverse(),o}function Ei(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Un?10:a>=qn?5:a>=Dn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Un?10:a>=qn?5:a>=Dn?2:1)}function Xa(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Un?i*=10:a>=qn?i*=5:a>=Dn&&(i*=2),t<e?-i:i}function Ha(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function za(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}var Va={value:()=>{}};function nr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new tn(n)}function tn(e){this._=e}function Ka(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}tn.prototype=nr.prototype={constructor:tn,on:function(e,t){var n=this._,r=Ka(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=Ya(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=jr(n[i],e.name,t);else if(t==null)for(i in n)n[i]=jr(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new tn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function Ya(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function jr(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Va,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Xn="http://www.w3.org/1999/xhtml";const Qr={svg:"http://www.w3.org/2000/svg",xhtml:Xn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Qr.hasOwnProperty(t)?{space:Qr[t],local:e}:e}function Wa(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Xn&&t.documentElement.namespaceURI===Xn?t.createElement(e):t.createElementNS(n,e)}}function Ga(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ri(e){var t=wn(e);return(t.local?Ga:Wa)(t)}function ja(){}function rr(e){return e==null?ja:function(){return this.querySelector(e)}}function Qa(e){typeof e!="function"&&(e=rr(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=new Array(o),l,u,c=0;c<o;++c)(l=a[c])&&(u=e.call(l,l.__data__,c,a))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new Fe(r,this._parents)}function Ja(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Za(){return[]}function Li(e){return e==null?Za:function(){return this.querySelectorAll(e)}}function es(e){return function(){return Ja(e.apply(this,arguments))}}function ts(e){typeof e=="function"?e=es(e):e=Li(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(r.push(e.call(l,l.__data__,u,o)),i.push(l));return new Fe(r,i)}function Fi(e){return function(){return this.matches(e)}}function Bi(e){return function(t){return t.matches(e)}}var ns=Array.prototype.find;function rs(e){return function(){return ns.call(this.children,e)}}function is(){return this.firstElementChild}function os(e){return this.select(e==null?is:rs(typeof e=="function"?e:Bi(e)))}var as=Array.prototype.filter;function ss(){return Array.from(this.children)}function ls(e){return function(){return as.call(this.children,e)}}function us(e){return this.selectAll(e==null?ss:ls(typeof e=="function"?e:Bi(e)))}function cs(e){typeof e!="function"&&(e=Fi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&s.push(l);return new Fe(r,this._parents)}function Oi(e){return new Array(e.length)}function fs(){return new Fe(this._enter||this._groups.map(Oi),this._parents)}function an(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}an.prototype={constructor:an,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ds(e){return function(){return e}}function hs(e,t,n,r,i,a){for(var o=0,s,l=t.length,u=a.length;o<u;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new an(e,a[o]);for(;o<l;++o)(s=t[o])&&(i[o]=s)}function ms(e,t,n,r,i,a,o){var s,l,u=new Map,c=t.length,f=a.length,h=new Array(c),g;for(s=0;s<c;++s)(l=t[s])&&(h[s]=g=o.call(l,l.__data__,s,t)+"",u.has(g)?i[s]=l:u.set(g,l));for(s=0;s<f;++s)g=o.call(e,a[s],s,a)+"",(l=u.get(g))?(r[s]=l,l.__data__=a[s],u.delete(g)):n[s]=new an(e,a[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(h[s])===l&&(i[s]=l)}function ps(e){return e.__data__}function vs(e,t){if(!arguments.length)return Array.from(this,ps);var n=t?ms:hs,r=this._parents,i=this._groups;typeof e!="function"&&(e=ds(e));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=r[u],f=i[u],h=f.length,g=gs(e.call(c,c&&c.__data__,u,r)),$=g.length,k=s[u]=new Array($),m=o[u]=new Array($),A=l[u]=new Array(h);n(c,f,k,m,A,g,t);for(var M=0,v=0,I,y;M<$;++M)if(I=k[M]){for(M>=v&&(v=M+1);!(y=m[v])&&++v<$;);I._next=y||null}}return o=new Fe(o,r),o._enter=s,o._exit=l,o}function gs(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ys(){return new Fe(this._exit||this._groups.map(Oi),this._parents)}function ws(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function bs(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var u=n[l],c=r[l],f=u.length,h=s[l]=new Array(f),g,$=0;$<f;++$)(g=u[$]||c[$])&&(h[$]=g);for(;l<i;++l)s[l]=n[l];return new Fe(s,this._parents)}function _s(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function ks(e){e||(e=Cs);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),u,c=0;c<s;++c)(u=o[c])&&(l[c]=u);l.sort(t)}return new Fe(i,this._parents).order()}function Cs(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function As(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ss(){return Array.from(this)}function Ns(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Ms(){let e=0;for(const t of this)++e;return e}function Ts(){return!this.node()}function $s(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function Ps(e){return function(){this.removeAttribute(e)}}function Is(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xs(e,t){return function(){this.setAttribute(e,t)}}function Es(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Rs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ls(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Fs(e,t){var n=wn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Is:Ps:typeof t=="function"?n.local?Ls:Rs:n.local?Es:xs)(n,t))}function Ui(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Bs(e){return function(){this.style.removeProperty(e)}}function Os(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Us(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function qs(e,t,n){return arguments.length>1?this.each((t==null?Bs:typeof t=="function"?Us:Os)(e,t,n==null?"":n)):_t(this.node(),e)}function _t(e,t){return e.style.getPropertyValue(t)||Ui(e).getComputedStyle(e,null).getPropertyValue(t)}function Ds(e){return function(){delete this[e]}}function Xs(e,t){return function(){this[e]=t}}function Hs(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function zs(e,t){return arguments.length>1?this.each((t==null?Ds:typeof t=="function"?Hs:Xs)(e,t)):this.node()[e]}function qi(e){return e.trim().split(/^|\s+/)}function ir(e){return e.classList||new Di(e)}function Di(e){this._node=e,this._names=qi(e.getAttribute("class")||"")}Di.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Xi(e,t){for(var n=ir(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Hi(e,t){for(var n=ir(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Vs(e){return function(){Xi(this,e)}}function Ks(e){return function(){Hi(this,e)}}function Ys(e,t){return function(){(t.apply(this,arguments)?Xi:Hi)(this,e)}}function Ws(e,t){var n=qi(e+"");if(arguments.length<2){for(var r=ir(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Ys:t?Vs:Ks)(n,t))}function Gs(){this.textContent=""}function js(e){return function(){this.textContent=e}}function Qs(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Js(e){return arguments.length?this.each(e==null?Gs:(typeof e=="function"?Qs:js)(e)):this.node().textContent}function Zs(){this.innerHTML=""}function el(e){return function(){this.innerHTML=e}}function tl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function nl(e){return arguments.length?this.each(e==null?Zs:(typeof e=="function"?tl:el)(e)):this.node().innerHTML}function rl(){this.nextSibling&&this.parentNode.appendChild(this)}function il(){return this.each(rl)}function ol(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function al(){return this.each(ol)}function sl(e){var t=typeof e=="function"?e:Ri(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ll(){return null}function ul(e,t){var n=typeof e=="function"?e:Ri(e),r=t==null?ll:typeof t=="function"?t:rr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function cl(){var e=this.parentNode;e&&e.removeChild(this)}function fl(){return this.each(cl)}function dl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function hl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ml(e){return this.select(e?hl:dl)}function pl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function vl(e){return function(t){e.call(this,t,this.__data__)}}function gl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function yl(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function wl(e,t,n){return function(){var r=this.__on,i,a=vl(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function bl(e,t,n){var r=gl(e+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(i=0,c=s[l];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(s=t?wl:yl,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function zi(e,t,n){var r=Ui(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function _l(e,t){return function(){return zi(this,e,t)}}function kl(e,t){return function(){return zi(this,e,t.apply(this,arguments))}}function Cl(e,t){return this.each((typeof t=="function"?kl:_l)(e,t))}function*Al(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Vi=[null];function Fe(e,t){this._groups=e,this._parents=t}function Bt(){return new Fe([[document.documentElement]],Vi)}function Sl(){return this}Fe.prototype=Bt.prototype={constructor:Fe,select:Qa,selectAll:ts,selectChild:os,selectChildren:us,filter:cs,data:vs,enter:fs,exit:ys,join:ws,merge:bs,selection:Sl,order:_s,sort:ks,call:As,nodes:Ss,node:Ns,size:Ms,empty:Ts,each:$s,attr:Fs,style:qs,property:zs,classed:Ws,text:Js,html:nl,raise:il,lower:al,append:sl,insert:ul,remove:fl,clone:ml,datum:pl,on:bl,dispatch:Cl,[Symbol.iterator]:Al};function We(e){return typeof e=="string"?new Fe([[document.querySelector(e)]],[document.documentElement]):new Fe([[e]],Vi)}function Nl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Jr(e,t){if(e=Nl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Hn={capture:!0,passive:!1};function zn(e){e.preventDefault(),e.stopImmediatePropagation()}function Ml(e){var t=e.document.documentElement,n=We(e).on("dragstart.drag",zn,Hn);"onselectstart"in t?n.on("selectstart.drag",zn,Hn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Tl(e,t){var n=e.document.documentElement,r=We(e).on("dragstart.drag",null);t&&(r.on("click.drag",zn,Hn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function or(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ki(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ot(){}var Rt=.7,sn=1/Rt,bt="\\s*([+-]?\\d+)\\s*",Lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$l=/^#([0-9a-f]{3,8})$/,Pl=new RegExp(`^rgb\\(${bt},${bt},${bt}\\)$`),Il=new RegExp(`^rgb\\(${Ge},${Ge},${Ge}\\)$`),xl=new RegExp(`^rgba\\(${bt},${bt},${bt},${Lt}\\)$`),El=new RegExp(`^rgba\\(${Ge},${Ge},${Ge},${Lt}\\)$`),Rl=new RegExp(`^hsl\\(${Lt},${Ge},${Ge}\\)$`),Ll=new RegExp(`^hsla\\(${Lt},${Ge},${Ge},${Lt}\\)$`),Zr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};or(Ot,ft,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ei,formatHex:ei,formatHex8:Fl,formatHsl:Bl,formatRgb:ti,toString:ti});function ei(){return this.rgb().formatHex()}function Fl(){return this.rgb().formatHex8()}function Bl(){return Yi(this).formatHsl()}function ti(){return this.rgb().formatRgb()}function ft(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$l.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ni(t):n===3?new Pe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Gt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Gt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Pl.exec(e))?new Pe(t[1],t[2],t[3],1):(t=Il.exec(e))?new Pe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=xl.exec(e))?Gt(t[1],t[2],t[3],t[4]):(t=El.exec(e))?Gt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Rl.exec(e))?oi(t[1],t[2]/100,t[3]/100,1):(t=Ll.exec(e))?oi(t[1],t[2]/100,t[3]/100,t[4]):Zr.hasOwnProperty(e)?ni(Zr[e]):e==="transparent"?new Pe(NaN,NaN,NaN,0):null}function ni(e){return new Pe(e>>16&255,e>>8&255,e&255,1)}function Gt(e,t,n,r){return r<=0&&(e=t=n=NaN),new Pe(e,t,n,r)}function Ol(e){return e instanceof Ot||(e=ft(e)),e?(e=e.rgb(),new Pe(e.r,e.g,e.b,e.opacity)):new Pe}function Vn(e,t,n,r){return arguments.length===1?Ol(e):new Pe(e,t,n,r==null?1:r)}function Pe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}or(Pe,Vn,Ki(Ot,{brighter(e){return e=e==null?sn:Math.pow(sn,e),new Pe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Rt:Math.pow(Rt,e),new Pe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pe(ct(this.r),ct(this.g),ct(this.b),ln(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ri,formatHex:ri,formatHex8:Ul,formatRgb:ii,toString:ii}));function ri(){return`#${ut(this.r)}${ut(this.g)}${ut(this.b)}`}function Ul(){return`#${ut(this.r)}${ut(this.g)}${ut(this.b)}${ut((isNaN(this.opacity)?1:this.opacity)*255)}`}function ii(){const e=ln(this.opacity);return`${e===1?"rgb(":"rgba("}${ct(this.r)}, ${ct(this.g)}, ${ct(this.b)}${e===1?")":`, ${e})`}`}function ln(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ct(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ut(e){return e=ct(e),(e<16?"0":"")+e.toString(16)}function oi(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ze(e,t,n,r)}function Yi(e){if(e instanceof ze)return new ze(e.h,e.s,e.l,e.opacity);if(e instanceof Ot||(e=ft(e)),!e)return new ze;if(e instanceof ze)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new ze(o,s,l,e.opacity)}function ql(e,t,n,r){return arguments.length===1?Yi(e):new ze(e,t,n,r==null?1:r)}function ze(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}or(ze,ql,Ki(Ot,{brighter(e){return e=e==null?sn:Math.pow(sn,e),new ze(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rt:Math.pow(Rt,e),new ze(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Pe(In(e>=240?e-240:e+120,i,r),In(e,i,r),In(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ze(ai(this.h),jt(this.s),jt(this.l),ln(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ln(this.opacity);return`${e===1?"hsl(":"hsla("}${ai(this.h)}, ${jt(this.s)*100}%, ${jt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ai(e){return e=(e||0)%360,e<0?e+360:e}function jt(e){return Math.max(0,Math.min(1,e||0))}function In(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ar=e=>()=>e;function Dl(e,t){return function(n){return e+n*t}}function Xl(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Hl(e){return(e=+e)==1?Wi:function(t,n){return n-t?Xl(t,n,e):ar(isNaN(t)?n:t)}}function Wi(e,t){var n=t-e;return n?Dl(e,n):ar(isNaN(e)?t:e)}const un=function e(t){var n=Hl(t);function r(i,a){var o=n((i=Vn(i)).r,(a=Vn(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=Wi(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function zl(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Vl(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Kl(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=bn(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function Yl(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function He(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Wl(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=bn(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Kn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xn=new RegExp(Kn.source,"g");function Gl(e){return function(){return e}}function jl(e){return function(t){return e(t)+""}}function Gi(e,t){var n=Kn.lastIndex=xn.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Kn.exec(e))&&(i=xn.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:He(r,i)})),n=xn.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?jl(l[0].x):Gl(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function bn(e,t){var n=typeof t,r;return t==null||n==="boolean"?ar(t):(n==="number"?He:n==="string"?(r=ft(t))?(t=r,un):Gi:t instanceof ft?un:t instanceof Date?Yl:Vl(t)?zl:Array.isArray(t)?Kl:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Wl:He)(e,t)}function Ql(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var si=180/Math.PI,Yn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ji(e,t,n,r,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*si,skewX:Math.atan(l)*si,scaleX:o,scaleY:s}}var Qt;function Jl(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Yn:ji(t.a,t.b,t.c,t.d,t.e,t.f)}function Zl(e){return e==null||(Qt||(Qt=document.createElementNS("http://www.w3.org/2000/svg","g")),Qt.setAttribute("transform",e),!(e=Qt.transform.baseVal.consolidate()))?Yn:(e=e.matrix,ji(e.a,e.b,e.c,e.d,e.e,e.f))}function Qi(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,c,f,h,g,$){if(u!==f||c!==h){var k=g.push("translate(",null,t,null,n);$.push({i:k-4,x:He(u,f)},{i:k-2,x:He(c,h)})}else(f||h)&&g.push("translate("+f+t+h+n)}function o(u,c,f,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:He(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function s(u,c,f,h){u!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:He(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,h,g,$){if(u!==f||c!==h){var k=g.push(i(g)+"scale(",null,",",null,")");$.push({i:k-4,x:He(u,f)},{i:k-2,x:He(c,h)})}else(f!==1||h!==1)&&g.push(i(g)+"scale("+f+","+h+")")}return function(u,c){var f=[],h=[];return u=e(u),c=e(c),a(u.translateX,u.translateY,c.translateX,c.translateY,f,h),o(u.rotate,c.rotate,f,h),s(u.skewX,c.skewX,f,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,h),u=c=null,function(g){for(var $=-1,k=h.length,m;++$<k;)f[(m=h[$]).i]=m.x(g);return f.join("")}}}var eu=Qi(Jl,"px, ","px)","deg)"),tu=Qi(Zl,", ",")",")"),kt=0,It=0,$t=0,Ji=1e3,cn,xt,fn=0,dt=0,_n=0,Ft=typeof performance=="object"&&performance.now?performance:Date,Zi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function sr(){return dt||(Zi(nu),dt=Ft.now()+_n)}function nu(){dt=0}function dn(){this._call=this._time=this._next=null}dn.prototype=eo.prototype={constructor:dn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?sr():+n)+(t==null?0:+t),!this._next&&xt!==this&&(xt?xt._next=this:cn=this,xt=this),this._call=e,this._time=n,Wn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wn())}};function eo(e,t,n){var r=new dn;return r.restart(e,t,n),r}function ru(){sr(),++kt;for(var e=cn,t;e;)(t=dt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--kt}function li(){dt=(fn=Ft.now())+_n,kt=It=0;try{ru()}finally{kt=0,ou(),dt=0}}function iu(){var e=Ft.now(),t=e-fn;t>Ji&&(_n-=t,fn=e)}function ou(){for(var e,t=cn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:cn=n);xt=e,Wn(r)}function Wn(e){if(!kt){It&&(It=clearTimeout(It));var t=e-dt;t>24?(e<1/0&&(It=setTimeout(li,e-Ft.now()-_n)),$t&&($t=clearInterval($t))):($t||(fn=Ft.now(),$t=setInterval(iu,Ji)),kt=1,Zi(li))}}function ui(e,t,n){var r=new dn;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var au=nr("start","end","cancel","interrupt"),su=[],to=0,ci=1,Gn=2,nn=3,fi=4,jn=5,rn=6;function kn(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;lu(e,n,{name:t,index:r,group:i,on:au,tween:su,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:to})}function lr(e,t){var n=Ve(e,t);if(n.state>to)throw new Error("too late; already scheduled");return n}function je(e,t){var n=Ve(e,t);if(n.state>nn)throw new Error("too late; already running");return n}function Ve(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function lu(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=eo(a,0,n.time);function a(u){n.state=ci,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,f,h,g;if(n.state!==ci)return l();for(c in r)if(g=r[c],g.name===n.name){if(g.state===nn)return ui(o);g.state===fi?(g.state=rn,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[c]):+c<t&&(g.state=rn,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[c])}if(ui(function(){n.state===nn&&(n.state=fi,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Gn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Gn){for(n.state=nn,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=g);i.length=f+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=jn,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===jn&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=rn,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Qn(e,t){var n=e.__transition,r,i,a=!0,o;if(!!n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>Gn&&r.state<jn,r.state=rn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function uu(e){return this.each(function(){Qn(this,e)})}function cu(e,t){var n,r;return function(){var i=je(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function fu(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=je(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function du(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ve(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?cu:fu)(n,e,t))}function ur(e,t,n){var r=e._id;return e.each(function(){var i=je(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ve(i,r).value[t]}}function no(e,t){var n;return(typeof t=="number"?He:t instanceof ft?un:(n=ft(t))?(t=n,un):Gi)(e,t)}function hu(e){return function(){this.removeAttribute(e)}}function mu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pu(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function vu(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function gu(e,t,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s)))}}function yu(e,t,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s)))}}function wu(e,t){var n=wn(e),r=n==="transform"?tu:no;return this.attrTween(e,typeof t=="function"?(n.local?yu:gu)(n,r,ur(this,"attr."+e,t)):t==null?(n.local?mu:hu)(n):(n.local?vu:pu)(n,r,t))}function bu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function _u(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ku(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&_u(e,a)),n}return i._value=t,i}function Cu(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&bu(e,a)),n}return i._value=t,i}function Au(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=wn(e);return this.tween(n,(r.local?ku:Cu)(r,t))}function Su(e,t){return function(){lr(this,e).delay=+t.apply(this,arguments)}}function Nu(e,t){return t=+t,function(){lr(this,e).delay=t}}function Mu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Su:Nu)(t,e)):Ve(this.node(),t).delay}function Tu(e,t){return function(){je(this,e).duration=+t.apply(this,arguments)}}function $u(e,t){return t=+t,function(){je(this,e).duration=t}}function Pu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Tu:$u)(t,e)):Ve(this.node(),t).duration}function Iu(e,t){if(typeof t!="function")throw new Error;return function(){je(this,e).ease=t}}function xu(e){var t=this._id;return arguments.length?this.each(Iu(t,e)):Ve(this.node(),t).ease}function Eu(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;je(this,e).ease=n}}function Ru(e){if(typeof e!="function")throw new Error;return this.each(Eu(this._id,e))}function Lu(e){typeof e!="function"&&(e=Fi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&s.push(l);return new rt(r,this._parents,this._name,this._id)}function Fu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=t[s],u=n[s],c=l.length,f=o[s]=new Array(c),h,g=0;g<c;++g)(h=l[g]||u[g])&&(f[g]=h);for(;s<r;++s)o[s]=t[s];return new rt(o,this._parents,this._name,this._id)}function Bu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ou(e,t,n){var r,i,a=Bu(t)?lr:je;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function Uu(e,t){var n=this._id;return arguments.length<2?Ve(this.node(),n).on.on(e):this.each(Ou(n,e,t))}function qu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Du(){return this.on("end.remove",qu(this._id))}function Xu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=rr(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],l=s.length,u=a[o]=new Array(l),c,f,h=0;h<l;++h)(c=s[h])&&(f=e.call(c,c.__data__,h,s))&&("__data__"in c&&(f.__data__=c.__data__),u[h]=f,kn(u[h],t,n,h,u,Ve(c,n)));return new rt(a,this._parents,t,n)}function Hu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Li(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l=r[s],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var h=e.call(c,c.__data__,f,l),g,$=Ve(c,n),k=0,m=h.length;k<m;++k)(g=h[k])&&kn(g,t,n,k,h,$);a.push(h),o.push(c)}return new rt(a,o,t,n)}var zu=Bt.prototype.constructor;function Vu(){return new zu(this._groups,this._parents)}function Ku(e,t){var n,r,i;return function(){var a=_t(this,e),o=(this.style.removeProperty(e),_t(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function ro(e){return function(){this.style.removeProperty(e)}}function Yu(e,t,n){var r,i=n+"",a;return function(){var o=_t(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function Wu(e,t,n){var r,i,a;return function(){var o=_t(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),_t(this,e))),o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s))}}function Gu(e,t){var n,r,i,a="style."+t,o="end."+a,s;return function(){var l=je(this,e),u=l.on,c=l.value[a]==null?s||(s=ro(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(o,i=c),l.on=r}}function ju(e,t,n){var r=(e+="")=="transform"?eu:no;return t==null?this.styleTween(e,Ku(e,r)).on("end.style."+e,ro(e)):typeof t=="function"?this.styleTween(e,Wu(e,r,ur(this,"style."+e,t))).each(Gu(this._id,e)):this.styleTween(e,Yu(e,r,t),n).on("end.style."+e,null)}function Qu(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ju(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Qu(e,o,n)),r}return a._value=t,a}function Zu(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Ju(e,t,n==null?"":n))}function ec(e){return function(){this.textContent=e}}function tc(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function nc(e){return this.tween("text",typeof e=="function"?tc(ur(this,"text",e)):ec(e==null?"":e+""))}function rc(e){return function(t){this.textContent=e.call(this,t)}}function ic(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&rc(i)),t}return r._value=e,r}function oc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ic(e))}function ac(){for(var e=this._name,t=this._id,n=io(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)if(l=o[u]){var c=Ve(l,t);kn(l,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new rt(r,this._parents,e,n)}function sc(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var u=je(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),i===0&&a()})}var lc=0;function rt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function io(){return++lc}var et=Bt.prototype;rt.prototype={constructor:rt,select:Xu,selectAll:Hu,selectChild:et.selectChild,selectChildren:et.selectChildren,filter:Lu,merge:Fu,selection:Vu,transition:ac,call:et.call,nodes:et.nodes,node:et.node,size:et.size,empty:et.empty,each:et.each,on:Uu,attr:wu,attrTween:Au,style:ju,styleTween:Zu,text:nc,textTween:oc,remove:Du,tween:du,delay:Mu,duration:Pu,ease:xu,easeVarying:Ru,end:sc,[Symbol.iterator]:et[Symbol.iterator]};function uc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var cc={time:null,delay:0,duration:250,ease:uc};function fc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function dc(e){var t,n;e instanceof rt?(t=e._id,e=e._name):(t=io(),(n=cc).time=sr(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&kn(l,e,t,u,o,n||fc(l,t));return new rt(r,this._parents,e,t)}Bt.prototype.interrupt=uu;Bt.prototype.transition=dc;const En=e=>()=>e;function hc(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function mc(e){e.stopImmediatePropagation()}function Rn(e){e.preventDefault(),e.stopImmediatePropagation()}var di={name:"drag"},Ln={name:"space"},pt={name:"handle"},vt={name:"center"};const{abs:hi,max:ke,min:Ce}=Math;function mi(e){return[+e[0],+e[1]]}function pi(e){return[mi(e[0]),mi(e[1])]}var on={name:"x",handles:["w","e"].map(hn),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Fn={name:"y",handles:["n","s"].map(hn),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},tt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},vi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},gi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},pc={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},vc={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function hn(e){return{type:e}}function gc(e){return!e.ctrlKey&&!e.button}function yc(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function wc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bn(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function bc(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function _c(){return kc(on)}function kc(e){var t=yc,n=gc,r=wc,i=!0,a=nr("start","brush","end"),o=6,s;function l(m){var A=m.property("__brush",k).selectAll(".overlay").data([hn("overlay")]);A.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",tt.overlay).merge(A).each(function(){var v=Bn(this).extent;We(this).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1])}),m.selectAll(".selection").data([hn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",tt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var M=m.selectAll(".handle").data(e.handles,function(v){return v.type});M.exit().remove(),M.enter().append("rect").attr("class",function(v){return"handle handle--"+v.type}).attr("cursor",function(v){return tt[v.type]}),m.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",$).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(m,A,M){m.tween?m.on("start.brush",function(v){c(this,arguments).beforestart().start(v)}).on("interrupt.brush end.brush",function(v){c(this,arguments).end(v)}).tween("brush",function(){var v=this,I=v.__brush,y=c(v,arguments),R=I.selection,E=e.input(typeof A=="function"?A.apply(this,arguments):A,I.extent),b=bn(R,E);function H(w){I.selection=w===1&&E===null?null:b(w),u.call(v),y.brush()}return R!==null&&E!==null?H:H(1)}):m.each(function(){var v=this,I=arguments,y=v.__brush,R=e.input(typeof A=="function"?A.apply(v,I):A,y.extent),E=c(v,I).beforestart();Qn(v),y.selection=R===null?null:R,u.call(v),E.start(M).brush(M).end(M)})},l.clear=function(m,A){l.move(m,null,A)};function u(){var m=We(this),A=Bn(this).selection;A?(m.selectAll(".selection").style("display",null).attr("x",A[0][0]).attr("y",A[0][1]).attr("width",A[1][0]-A[0][0]).attr("height",A[1][1]-A[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(M){return M.type[M.type.length-1]==="e"?A[1][0]-o/2:A[0][0]-o/2}).attr("y",function(M){return M.type[0]==="s"?A[1][1]-o/2:A[0][1]-o/2}).attr("width",function(M){return M.type==="n"||M.type==="s"?A[1][0]-A[0][0]+o:o}).attr("height",function(M){return M.type==="e"||M.type==="w"?A[1][1]-A[0][1]+o:o})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(m,A,M){var v=m.__brush.emitter;return v&&(!M||!v.clean)?v:new f(m,A,M)}function f(m,A,M){this.that=m,this.args=A,this.state=m.__brush,this.active=0,this.clean=M}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,A){return this.starting?(this.starting=!1,this.emit("start",m,A)):this.emit("brush",m),this},brush:function(m,A){return this.emit("brush",m,A),this},end:function(m,A){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,A)),this},emit:function(m,A,M){var v=We(this.that).datum();a.call(m,this.that,new hc(m,{sourceEvent:A,target:l,selection:e.output(this.state.selection),mode:M,dispatch:a}),v)}};function h(m){if(s&&!m.touches||!n.apply(this,arguments))return;var A=this,M=m.target.__data__.type,v=(i&&m.metaKey?M="overlay":M)==="selection"?di:i&&m.altKey?vt:pt,I=e===Fn?null:pc[M],y=e===on?null:vc[M],R=Bn(A),E=R.extent,b=R.selection,H=E[0][0],w,C,te=E[0][1],B,j,Me=E[1][0],re,oe,ve=E[1][1],F,de,Z=0,ee=0,Be,Ie=I&&y&&i&&m.shiftKey,xe,Qe,q=Array.from(m.touches||[m],z=>{const P=z.identifier;return z=Jr(z,A),z.point0=z.slice(),z.identifier=P,z});Qn(A);var W=c(A,arguments,!0).beforestart();if(M==="overlay"){b&&(Be=!0);const z=[q[0],q[1]||q[0]];R.selection=b=[[w=e===Fn?H:Ce(z[0][0],z[1][0]),B=e===on?te:Ce(z[0][1],z[1][1])],[re=e===Fn?Me:ke(z[0][0],z[1][0]),F=e===on?ve:ke(z[0][1],z[1][1])]],q.length>1&&Je(m)}else w=b[0][0],B=b[0][1],re=b[1][0],F=b[1][1];C=w,j=B,oe=re,de=F;var Ee=We(A).attr("pointer-events","none"),ge=Ee.selectAll(".overlay").attr("cursor",tt[M]);if(m.touches)W.moved=at,W.ended=Ut;else{var _e=We(m.view).on("mousemove.brush",at,!0).on("mouseup.brush",Ut,!0);i&&_e.on("keydown.brush",An,!0).on("keyup.brush",Sn,!0),Ml(m.view)}u.call(A),W.start(m,v.name);function at(z){for(const P of z.changedTouches||[z])for(const D of q)D.identifier===P.identifier&&(D.cur=Jr(P,A));if(Ie&&!xe&&!Qe&&q.length===1){const P=q[0];hi(P.cur[0]-P[0])>hi(P.cur[1]-P[1])?Qe=!0:xe=!0}for(const P of q)P.cur&&(P[0]=P.cur[0],P[1]=P.cur[1]);Be=!0,Rn(z),Je(z)}function Je(z){const P=q[0],D=P.point0;var Ke;switch(Z=P[0]-D[0],ee=P[1]-D[1],v){case Ln:case di:{I&&(Z=ke(H-w,Ce(Me-re,Z)),C=w+Z,oe=re+Z),y&&(ee=ke(te-B,Ce(ve-F,ee)),j=B+ee,de=F+ee);break}case pt:{q[1]?(I&&(C=ke(H,Ce(Me,q[0][0])),oe=ke(H,Ce(Me,q[1][0])),I=1),y&&(j=ke(te,Ce(ve,q[0][1])),de=ke(te,Ce(ve,q[1][1])),y=1)):(I<0?(Z=ke(H-w,Ce(Me-w,Z)),C=w+Z,oe=re):I>0&&(Z=ke(H-re,Ce(Me-re,Z)),C=w,oe=re+Z),y<0?(ee=ke(te-B,Ce(ve-B,ee)),j=B+ee,de=F):y>0&&(ee=ke(te-F,Ce(ve-F,ee)),j=B,de=F+ee));break}case vt:{I&&(C=ke(H,Ce(Me,w-Z*I)),oe=ke(H,Ce(Me,re+Z*I))),y&&(j=ke(te,Ce(ve,B-ee*y)),de=ke(te,Ce(ve,F+ee*y)));break}}oe<C&&(I*=-1,Ke=w,w=re,re=Ke,Ke=C,C=oe,oe=Ke,M in vi&&ge.attr("cursor",tt[M=vi[M]])),de<j&&(y*=-1,Ke=B,B=F,F=Ke,Ke=j,j=de,de=Ke,M in gi&&ge.attr("cursor",tt[M=gi[M]])),R.selection&&(b=R.selection),xe&&(C=b[0][0],oe=b[1][0]),Qe&&(j=b[0][1],de=b[1][1]),(b[0][0]!==C||b[0][1]!==j||b[1][0]!==oe||b[1][1]!==de)&&(R.selection=[[C,j],[oe,de]],u.call(A),W.brush(z,v.name))}function Ut(z){if(mc(z),z.touches){if(z.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else Tl(z.view,Be),_e.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Ee.attr("pointer-events","all"),ge.attr("cursor",tt.overlay),R.selection&&(b=R.selection),bc(b)&&(R.selection=null,u.call(A)),W.end(z,v.name)}function An(z){switch(z.keyCode){case 16:{Ie=I&&y;break}case 18:{v===pt&&(I&&(re=oe-Z*I,w=C+Z*I),y&&(F=de-ee*y,B=j+ee*y),v=vt,Je(z));break}case 32:{(v===pt||v===vt)&&(I<0?re=oe-Z:I>0&&(w=C-Z),y<0?F=de-ee:y>0&&(B=j-ee),v=Ln,ge.attr("cursor",tt.selection),Je(z));break}default:return}Rn(z)}function Sn(z){switch(z.keyCode){case 16:{Ie&&(xe=Qe=Ie=!1,Je(z));break}case 18:{v===vt&&(I<0?re=oe:I>0&&(w=C),y<0?F=de:y>0&&(B=j),v=pt,Je(z));break}case 32:{v===Ln&&(z.altKey?(I&&(re=oe-Z*I,w=C+Z*I),y&&(F=de-ee*y,B=j+ee*y),v=vt):(I<0?re=oe:I>0&&(w=C),y<0?F=de:y>0&&(B=j),v=pt),ge.attr("cursor",tt[M]),Je(z));break}default:return}Rn(z)}}function g(m){c(this,arguments).moved(m)}function $(m){c(this,arguments).ended(m)}function k(){var m=this.__brush||{selection:null};return m.extent=pi(t.apply(this,arguments)),m.dim=e,m}return l.extent=function(m){return arguments.length?(t=typeof m=="function"?m:En(pi(m)),l):t},l.filter=function(m){return arguments.length?(n=typeof m=="function"?m:En(!!m),l):n},l.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:En(!!m),l):r},l.handleSize=function(m){return arguments.length?(o=+m,l):o},l.keyModifiers=function(m){return arguments.length?(i=!!m,l):i},l.on=function(){var m=a.on.apply(a,arguments);return m===a?l:m},l}function Cc(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function mn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Ct(e){return e=mn(Math.abs(e)),e?e[1]:NaN}function Ac(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function Sc(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Nc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function pn(e){if(!(t=Nc.exec(e)))throw new Error("invalid format: "+e);var t;return new cr({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}pn.prototype=cr.prototype;function cr(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}cr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Mc(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var oo;function Tc(e,t){var n=mn(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(oo=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+mn(e,Math.max(0,t+a-1))[0]}function yi(e,t){var n=mn(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const wi={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Cc,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>yi(e*100,t),r:yi,s:Tc,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function bi(e){return e}var _i=Array.prototype.map,ki=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function $c(e){var t=e.grouping===void 0||e.thousands===void 0?bi:Ac(_i.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?bi:Sc(_i.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=pn(f);var h=f.fill,g=f.align,$=f.sign,k=f.symbol,m=f.zero,A=f.width,M=f.comma,v=f.precision,I=f.trim,y=f.type;y==="n"?(M=!0,y="g"):wi[y]||(v===void 0&&(v=12),I=!0,y="g"),(m||h==="0"&&g==="=")&&(m=!0,h="0",g="=");var R=k==="$"?n:k==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",E=k==="$"?r:/[%p]/.test(y)?o:"",b=wi[y],H=/[defgprs%]/.test(y);v=v===void 0?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function w(C){var te=R,B=E,j,Me,re;if(y==="c")B=b(C)+B,C="";else{C=+C;var oe=C<0||1/C<0;if(C=isNaN(C)?l:b(Math.abs(C),v),I&&(C=Mc(C)),oe&&+C==0&&$!=="+"&&(oe=!1),te=(oe?$==="("?$:s:$==="-"||$==="("?"":$)+te,B=(y==="s"?ki[8+oo/3]:"")+B+(oe&&$==="("?")":""),H){for(j=-1,Me=C.length;++j<Me;)if(re=C.charCodeAt(j),48>re||re>57){B=(re===46?i+C.slice(j+1):C.slice(j))+B,C=C.slice(0,j);break}}}M&&!m&&(C=t(C,1/0));var ve=te.length+C.length+B.length,F=ve<A?new Array(A-ve+1).join(h):"";switch(M&&m&&(C=t(F+C,F.length?A-B.length:1/0),F=""),g){case"<":C=te+C+B+F;break;case"=":C=te+F+C+B;break;case"^":C=F.slice(0,ve=F.length>>1)+te+C+B+F.slice(ve);break;default:C=F+te+C+B;break}return a(C)}return w.toString=function(){return f+""},w}function c(f,h){var g=u((f=pn(f),f.type="f",f)),$=Math.max(-8,Math.min(8,Math.floor(Ct(h)/3)))*3,k=Math.pow(10,-$),m=ki[8+$/3];return function(A){return g(k*A)+m}}return{format:u,formatPrefix:c}}var Jt,ao,so;Pc({thousands:",",grouping:[3],currency:["$",""]});function Pc(e){return Jt=$c(e),ao=Jt.format,so=Jt.formatPrefix,Jt}function Ic(e){return Math.max(0,-Ct(Math.abs(e)))}function xc(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ct(t)/3)))*3-Ct(Math.abs(e)))}function Ec(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ct(t)-Ct(e))+1}function fr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Ci=Symbol("implicit");function lo(){var e=new Wr,t=[],n=[],r=Ci;function i(a){let o=e.get(a);if(o===void 0){if(r!==Ci)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Wr;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return lo(t,n).unknown(r)},fr.apply(i,arguments),i}function uo(){var e=lo().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,s=!1,l=0,u=0,c=.5;delete e.unknown;function f(){var h=t().length,g=i<r,$=g?i:r,k=g?r:i;a=(k-$)/Math.max(1,h-l+u*2),s&&(a=Math.floor(a)),$+=(k-$-a*(h-l))*c,o=a*(1-l),s&&($=Math.round($),o=Math.round(o));var m=za(h).map(function(A){return $+a*A});return n(g?m.reverse():m)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(h){return arguments.length?(s=!!h,f()):s},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},e.copy=function(){return uo(t(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(c)},fr.apply(f(),arguments)}function Rc(e){return function(){return e}}function Lc(e){return+e}var Ai=[0,1];function yt(e){return e}function Jn(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Rc(isNaN(t)?NaN:.5)}function Fc(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Bc(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=Jn(i,r),a=n(o,a)):(r=Jn(r,i),a=n(a,o)),function(s){return a(r(s))}}function Oc(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Jn(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(s){var l=Ba(e,s,1,r)-1;return a[l](i[l](s))}}function Uc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function qc(){var e=Ai,t=Ai,n=bn,r,i,a,o=yt,s,l,u;function c(){var h=Math.min(e.length,t.length);return o!==yt&&(o=Fc(e[0],e[h-1])),s=h>2?Oc:Bc,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(l||(l=s(e.map(r),t,n)))(r(o(h)))}return f.invert=function(h){return o(i((u||(u=s(t,e.map(r),He)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Lc),c()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=Ql,c()},f.clamp=function(h){return arguments.length?(o=h?!0:yt,c()):o!==yt},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,g){return r=h,i=g,c()}}function Dc(){return qc()(yt,yt)}function Xc(e,t,n,r){var i=Xa(e,t,n),a;switch(r=pn(r==null?",f":r),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=xc(i,o))&&(r.precision=a),so(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Ec(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Ic(i))&&(r.precision=a-(r.type==="%")*2);break}}return ao(r)}function Hc(e){var t=e.domain;return e.ticks=function(n){var r=t();return Da(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return Xc(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],s=r[a],l,u,c=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);c-- >0;){if(u=Ei(o,s,n),u===l)return r[i]=o,r[a]=s,t(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function co(){var e=Dc();return e.copy=function(){return Uc(e,co())},fr.apply(e,arguments),Hc(e)}function wt(e,t,n){this.k=e,this.x=t,this.y=n}wt.prototype={constructor:wt,scale:function(e){return e===1?this:new wt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new wt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new wt(1,0,0);wt.prototype;function On(e,t,n){const r=new V(10).pow(t-n);return new V(1.0001).pow(e).mul(r)}const zc=At({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""}},setup(e,t){const n=_(1),r=Et(),i=me(()=>r),a=Pt(),{TickMath:o}=a,s=()=>{if(n.value<.015625)return;const g=n.value/2;n.value=g,u(e.poolInfo,g)},l=()=>{if(n.value>32)return;const g=n.value*2;n.value=g,u(e.poolInfo,g)},u=(g,$=1)=>{if(g&&g.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const k=Number(e.poolInfo.current_tick_index);let m=k+100*$,A=k-100*$,M,v;e.maxPrice==="\u221E"?v=0:e.direction?v=o.priceToTickIndex(new V(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):v=o.priceToTickIndex(new V(1/Number(e.minPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals),e.minPrice==="0"?M=0:e.direction?M=o.priceToTickIndex(new V(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):M=o.priceToTickIndex(new V(1/Number(e.maxPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals);let I=0;if(k>=M&&k<=v){const B=k-M,j=v-k;I=Math.max(Math.abs(B),Math.abs(j))}else k<M?I=Math.abs(v-k):I=Math.abs(k-M);m=k+I+100*$,A=k-I-100*$;const y=Number(g.liquidity)/Math.pow(10,6),R=e.tickList,E=[],b=[];let H={};for(let B=0;B<R.length;B++)H=R[B],H.index<=k&&H.index>=A?E.unshift(H):H.index>k&&H.index<=m&&b.push(H);let w=Number(y);for(let B=0;B<E.length;B++)E[B].liquityAmount=w-Number(E[B].liquidityGross.toString()/Math.pow(10,6));let C=Number(y);for(let B=0;B<b.length;B++)b[B].liquityAmount=C-Number(b[B].liquidityGross.toString()/Math.pow(10,6));let te=[];te=[...E.reverse(),{index:k,liquityAmount:Number(y)},...b],e.direction||(te=te.reverse()),f(te,A,m,M,v,k)}};let c=_(!1);er(()=>{document.body.clientWidth<750?c.value=!1:c.value=!0,window.onresize=()=>{document.body.clientWidth<750?c.value=!1:c.value=!0,u(e.poolInfo,n.value)}});const f=(g,$,k,m,A,M)=>{const v={top:30,right:35,bottom:20,left:55};let I,y;c.value?(I=460-v.left-v.right,y=205-v.top-v.bottom):(I=340-v.left-v.right,y=205-v.top-v.bottom);const E=(k-$)/4;let b=[$,$+E,$+2*E,k-E,k];const H=b[0]-(b[1]-b[0])/3,w=b[4]+(b[4]-b[3])/3,C=I/(w-H);We("#chart").selectAll("*").remove();const te=We("#chart").attr("width",I+v.left+v.right).attr("height",y+v.top+v.bottom).append("g").attr("transform",`translate(${v.left},${v.right})`),B=Ha(g,function(q){return Number(q.liquityAmount)})||0,j=co().range([0,y]).domain([B,0]);uo().rangeRound([0,I]).padding(.1),te.append("g").attr("id","barsBox").selectAll("rect").data(g).enter().append("rect").attr("x",function(q,W){return W===0?0:e.direction?Math.abs(g[W-1].index-H)*C:Math.abs(w-g[W-1].index)*C}).attr("y",function(q,W){return W===0?0:e.direction?j(g[W-1].liquityAmount):j(q.liquityAmount)}).attr("width",function(q,W){return W===0&&g.length===1&&q.liquityAmount>0?I:W===0?0:e.direction?Math.abs(q.index-g[W-1].index)*C:Math.abs(g[W-1].index-q.index)*C}).attr("height",function(q,W){return W===0&&g.length===1&&q.liquityAmount>0?y:W===0?0:e.direction?y-j(g[W-1].liquityAmount):y-j(q.liquityAmount)}).attr("fill","#279477").attr("class","bars");const oe=te.append("g");oe.append("line").attr("x1",0).attr("y1",155).attr("x2",I).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const ve=oe.append("g");let F=0;if(e.direction){for(let q=0;q<b.length;q++){const W=nt(String(On(b[q],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),On(b[q],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()>1e3?4:6)||"0",Ee=Math.abs(b[q]-H)*C;let ge=0;for(let _e=0;_e<W.length;_e++)W[_e]==="1"?ge+=4.02:W[_e]==="."?ge+=2.64:W[_e]==="7"?ge+=5.48:ge+=6;ve.append("text").text(W).attr("x",Ee-ge/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}F=Math.abs(M-H)*C}else{for(let q=b.length-1;q>=0;q--){const W=nt(String(1/On(b[q],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),6)||"0",Ee=Math.abs(b[q]-w)*C;let ge=0;for(let _e=0;_e<W.length;_e++)W[_e]==="1"?ge+=4.02:W[_e]==="."?ge+=2.64:W[_e]==="7"?ge+=5.48:ge+=6;ve.append("text").text(W).attr("x",Ee-ge/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}F=Math.abs(M-w)*C}te.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8").attr("transform","translate("+F+", 0)");const Z=te.append("g").attr("id","left-handle"),ee=te.append("g").attr("id","right-handle");i.value.theme=="default"?(Z.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Z.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),Z.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#68FFD8"),Z.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#68FFD8"),ee.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),ee.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),ee.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#68FFD8"),ee.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#68FFD8")):(Z.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Z.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 20) rotate(180)"),Z.append("text").text("Min").attr("fill","#B5B8C2").attr("x",-24).attr("y",14).attr("font-size","12px"),Z.append("rect").attr("width",1).attr("height",6).attr("x",-32).attr("y",7).attr("fill","#76C8FF"),Z.append("rect").attr("width",1).attr("height",8).attr("x",-30).attr("y",6).attr("fill","#76C8FF"),ee.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),ee.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 0)"),ee.append("text").text("Max").attr("fill","#B5B8C2").attr("x",3).attr("y",14).attr("font-size","12px"),ee.append("rect").attr("width",1).attr("height",6).attr("x",31).attr("y",7).attr("fill","#76C8FF"),ee.append("rect").attr("width",1).attr("height",8).attr("x",29).attr("y",6).attr("fill","#76C8FF"));const Be=_c().extent([[0,0],[I,y]]).handleSize(30).on("end",Qe);let Ie,xe;if(e.direction?(Ie=m<H?-100:Math.abs(m-H)*C,xe=A<H?-100:Math.abs(A-H)*C):(xe=m<H?-100:Math.abs(w-m)*C,Ie=A<H?-100:Math.abs(w-A)*C),e.minPrice==="0"&&(Ie=0),e.maxPrice==="\u221E"&&(xe=I),te.append("g").attr("class","brush").call(Be).call(Be.move,[Ie,xe]),xe-10<=Ie){s();return}Z.attr("transform","translate("+Ie+", 0)"),ee.attr("transform","translate("+xe+", 0)");function Qe(q){if(!q.sourceEvent||!q.selection||e.currentPriceTab!=="Custom")return;Z.attr("transform","translate("+q.selection[0]+", 0)"),ee.attr("transform","translate("+q.selection[1]+", 0)");let W,Ee;e.direction?(W=o.tickIndexToPrice(q.selection[0]/C+H,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),Ee=o.tickIndexToPrice(q.selection[1]/C+H,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()):(W=1/o.tickIndexToPrice(w-q.selection[0]/C,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),Ee=1/o.tickIndexToPrice(w-q.selection[1]/C,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),t.emit("onChangeMinPrice",String(nt(String(W),6))),t.emit("onChangeMaxPrice",String(nt(String(Ee),6)))}We(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C")};_(""),ce(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab],([g,$,k,m])=>{g&&$&&k&&(k=="\u221E"||Number(k)>Number($))&&(m!=="Custom"?(n.value=32,u(g,32)):u(g,n.value))},{immediate:!0});const h=_(!0);return ce(()=>e.chartLoading,(g,$)=>{g!==$&&(h.value=g)},{immediate:!0,deep:!0}),{store:i,loading:h,zoomOut:s,zoomIn:l}}});const Vc=e=>(gn("data-v-a5c67851"),e=e(),yn(),e),Kc={class:"chart-box"},Yc={class:"chart"},Wc={class:"zoom"},Gc=Vc(()=>p("svg",{id:"chart"},null,-1));function jc(e,t,n,r,i,a){return T(),L("div",Kc,[Ro(p("div",Yc,[p("div",Wc,[p("div",{class:"amplification",onClick:t[0]||(t[0]=(...o)=>e.zoomOut&&e.zoomOut(...o))}),p("div",{class:"narrow",onClick:t[1]||(t[1]=(...o)=>e.zoomIn&&e.zoomIn(...o))})]),Gc],512),[[Lo,!e.loading]])])}const Qc=St(zc,[["render",jc],["__scopeId","data-v-a5c67851"]]),Jc=At({components:{Modal:Fo},props:{},setup(){const e=_({}),t=Et(),n=me(()=>t),r=me(()=>n.value.chainName),i=me(()=>Bo[r.value]);let a=_(!0);const o=Zn(),s=me(()=>o),l=Ni();return ce(()=>s.value.currentPositionInfo,u=>{u&&(e.value=u)}),{addCommom:Zt,router:l,pools:s,positionInfo:e,decimalFormat:nt,rateChange:a,config:i,importIcon:vn,store:n}}});const Cn=e=>(gn("data-v-4f1083fb"),e=e(),yn(),e),Zc=Cn(()=>p("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[p("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ef={class:"rejected-container"},tf={class:"coin-pair"},nf=Cn(()=>p("use",{"xlink:href":"#icon-icon-copy"},null,-1)),rf=[nf],of=["href"],af=Cn(()=>p("svg",{class:"icon","aria-hidden":"true"},[p("use",{"xlink:href":"#icon-icon-jump"})],-1)),sf=[af],lf={class:"coin-pair"},uf=["src"],cf=["src"],ff={class:"fee"},df={class:"status"},hf={class:"min-and-max"},mf={key:0},pf={class:"text"},vf={key:0,src:$i,alt:""},gf={key:1,src:Pi,alt:""},yf={class:"text"},wf={key:1},bf={class:"text"},_f={key:0,src:$i,alt:""},kf={key:1,src:Pi,alt:""},Cf={class:"text"},Af=Cn(()=>p("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Sf=[Af];function Nf(e,t,n,r,i,a){const o=Si,s=Jo,l=tr,u=Oo("Modal");return T(),Ye(u,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:t[3]||(t[3]=c=>e.$emit("onClose"))},{closeIcon:Ae(()=>[Zc]),default:Ae(()=>[p("div",ef,[ue(o,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ae(()=>[p("div",tf,[Le(S(e.positionInfo.tokenName)+" ",1),(T(),L("svg",{class:"icon","aria-hidden":"true",onClick:t[0]||(t[0]=c=>e.store.copy(e.positionInfo.nftHash))},rf)),p("a",{href:`https://explorer.aptoslabs.com/token/${e.positionInfo.nftHash}/0?network=${e.config.network}`,target:"_blank"},sf,8,of)])]),_:1},8,["loading"]),p("div",{class:$e(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[ue(o,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ae(()=>[p("div",lf,[p("div",null,[p("img",{src:e.fromCoinUrl||e.positionInfo.token_a.logoURI||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,uf),p("img",{src:e.toCoinUrl||e.positionInfo.token_b.logoURI||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,cf)]),p("span",null,S(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" - "+S(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)]),p("div",ff,S(e.$t("common.fee"))+" "+S(e.positionInfo.fee)+"%",1)]),_:1},8,["loading"])],2),p("div",df,[ue(s,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),ue(o,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ae(()=>[p("div",hf,[e.rateChange?(T(),L("div",mf,[p("div",pf,S(e.addCommom(e.decimalFormat(String(e.positionInfo&&e.positionInfo.minPrice),6),6)),1),e.store.theme=="default"?(T(),L("img",vf)):(T(),L("img",gf)),p("div",yf,S(e.positionInfo&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.addCommom(e.decimalFormat(String(e.positionInfo&&e.positionInfo.maxPrice),6),6))+" "+S(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol)+" per "+S(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol),1)])):(T(),L("div",wf,[p("div",bf,S(e.addCommom(e.decimalFormat(String(1/Number(e.positionInfo&&e.positionInfo.maxPrice)),6),6)),1),e.store.theme=="default"?(T(),L("img",_f)):(T(),L("img",kf)),p("div",Cf,S(e.positionInfo&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.addCommom(e.decimalFormat(String(1/Number(e.positionInfo&&e.positionInfo.minPrice)),6),6))+" "+S(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" per "+S(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)])),(T(),L("svg",{class:"icon-change","aria-hidden":"true",onClick:t[1]||(t[1]=c=>e.rateChange=!e.rateChange)},Sf))])]),_:1},8,["loading"])]),ue(l,{onClick:t[2]||(t[2]=c=>e.router.push(`/position-detail/1?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}`))},{default:Ae(()=>[Le(S(e.$t("newAdd.viewDetail")),1)]),_:1})]),_:1},8,["title"])}const Mf=St(Jc,[["render",Nf],["__scopeId","data-v-4f1083fb"]]),Tf=At({setup(){const{t:e,locale:t}=Uo(),n=qo(),r=me(()=>n),i=Et(),a=_(20),o=_(0),s=_(null),l=_(!1),u=_(!1),c=_(!1),f=_(!1),h=_("fromCoin"),g=_(""),$=_(""),k=_(!1),m=_(!0),A=_(!1),M=_(!1),v=_(!0),I=_(!1),y=_(""),R=_(""),E=_(""),b=_(""),H=_(""),w=_(""),C=_(!1),te=_(!1),B=_(!1);_(!1);const j=_("0.01% "+e("common.feeTier")),Me=_(0),re=_(!0),oe=_(!1),ve=_([]),F=_(""),de=_(7),Z=_("Estimated APR"),ee=_([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),Be=_(!0),Ie=d=>{de.value=d.num},xe=()=>{Be.value=!Be.value},Qe=_([]),q=()=>{o.value=0,M.value=!0,Dt.updateCurrentPools(x.value.poolAddress),setTimeout(()=>{M.value=!1},1e3),Tt()},W=me(()=>Number(E.value)>Number(b.value)),Ee=d=>{A.value=d,E.value="0",b.value="\u221E"},ge=d=>{switch(d){case .01:return"Best for very stable pairs.";case .05:return"Best for stable pairs.";case .3:return"Best for most pairs.";case 1:return"Best for exotic pairs."}},_e=me(()=>{if(ye.value.newTokenObj&&P.value&&D.value){const d=Object.values(ye.value.pools).filter(O=>{var X,K,G,Q;return O.token_a.address.toUpperCase()===((X=P.value.address)==null?void 0:X.toUpperCase())&&O.token_b.address.toUpperCase()===((K=D.value.address)==null?void 0:K.toUpperCase())||O.token_b.address.toUpperCase()===((G=P.value.address)==null?void 0:G.toUpperCase())&&O.token_a.address.toUpperCase()===((Q=D.value.address)==null?void 0:Q.toUpperCase())}),N=[];return d.forEach(O=>{N.push({label:O.fee+"% "+e("common.feeTier"),title:O.fee+"% fee",address:O.address,fee:O.fee,text:ge(O.fee)})}),N}}),at=me(()=>i.slippage),Je=me(()=>!P.value||!D.value),Ut=me(()=>x.value&&x.value.is_pause?"Pool Closed":Je.value?e("newAdd.invalidPair"):x.value?Number(y.value)>Number(it.value)?e("button.insufficientBalance",{name:P.value.symbol}):Number(R.value)>Number(ot.value)?e("button.insufficientBalance",{name:D.value.symbol}):I.value?e("modal.selectTokenModalTitle"):b.value!=="\u221E"&&Number(E.value)>=Number(b.value)?e("newAdd.invalidRange"):!Number(y.value)&&!Number(R.value)?e("button.enterAmount"):e("button.addLiquidity"):e("button.poolNotFound")),An=Et(),Sn=me(()=>An),z=Ni(),P=_(),D=_();er(()=>{dr(),document.body.clientWidth<750?Be.value=!1:Be.value=!0}),Do(()=>{clearInterval(s.value)});const Ke=d=>{E.value=d},fo=d=>{b.value=d},ho=()=>{re.value=!0;const d=P.value;if(P.value=D.value,D.value=d,m.value=!m.value,y.value=R.value,re.value=!1,E.value!==""&&b.value!==""&&E.value!=="0"&&b.value!=="\u221E"){const N=E.value,O=b.value;(!oe.value||!m.value)&&(E.value=String(1/Number(O)),b.value=String(1/Number(N)));const X=H.value,K=w.value;H.value=String(1/Number(K)),w.value=String(1/Number(X)),Tn({key:F.value,...gr.value[F.value]}),oe.value=!1}};ce([E,b],([d],[N])=>{x.value&&Mo(x.value),Tt(),x.value&&b.value!=="\u221E"&&Number(E.value)>=Number(b.value)?B.value=!0:B.value=!1});const mo=d=>{var N,O,X,K;h.value=d,d==="fromCoin"?(g.value=((N=D.value)==null?void 0:N.address)||"",$.value=((O=P.value)==null?void 0:O.address)||""):(g.value=((X=P.value)==null?void 0:X.address)||"",$.value=((K=D.value)==null?void 0:K.address)||""),k.value=!0},po=d=>{I.value=!1,h.value==="fromCoin"?(D.value&&d.address.toLowerCase()===(D==null?void 0:D.value.address.toLowerCase())&&(D.value=null),P.value=d):(P.value&&d.address.toLowerCase()===(P==null?void 0:P.value.address.toLowerCase())&&(P.value=null),D.value=d),k.value=!1},vo=d=>{d==="fromCoin"?(v.value=!0,y.value=it.value>0?P.value.symbol=="APT"?new V(Number(it.value)).sub(new V(.1)).lt(new V(0))?"0":new V(Number(it.value)).sub(new V(.1)).toString():String(it.value):""):(v.value=!1,R.value=ot.value>0?D.value.symbol=="APT"?new V(Number(ot.value)).sub(new V(.1)).lt(new V(0))?"0":new V(Number(ot.value)).sub(new V(.1)).toString():String(ot.value):"")},go=d=>{d==="fromCoin"?(v.value=!0,y.value=it.value>0?Or(new V(Number(it.value)).div(2).toString(),P.value.decimals).toString():""):(v.value=!1,R.value=ot.value>0?Or(new V(Number(ot.value)).div(2).toString(),D.value.decimals).toString():"")},dr=()=>{s.value=setInterval(()=>{u.value||o.value<a.value&&(o.value+=1,o.value===a.value&&(x.value.poolAddress&&Dt.updateCurrentPools(x.value.poolAddress),o.value=0))},1e3)};ce(y,(d,N)=>{d==""&&v.value&&(R.value=""),d&&v.value&&Tt()}),ce(R,(d,N)=>{d==""&&!v.value&&(y.value=""),d&&!v.value&&Tt()});const yo=()=>{P.value=null,D.value=null,E.value="0",b.value="0",y.value="",R.value="",I.value=!0,j.value="",C.value=!1,Se.value=!0,Ne.value=!0,re.value=!1},hr=_(!1),{setIsShowSuccess:mr,setIsShowRejected:pr,setIsShowWaiting:qt,setTransactionDesc:wo,setTransactionTxid:vr,setPositiomNum:bo}=i,Oe=Xo(),Dt=Zn(),ye=me(()=>Dt);ce(()=>ye.value.newTokenObj,d=>{Hr(d)||(Oe&&Oe.query&&Oe.query.tokena?P.value=Yt(d,Oe.query.tokena):P.value=Yt(d,"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT"),Oe&&Oe.query&&Oe.query.tokenb?D.value=Yt(d,Oe.query.tokenb):D.value=Yt(d,"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDC"))},{immediate:!0});const Nt=_({}),Se=_(!1),Ne=_(!1),Nn=_(),Mn=_(),De=Pt(),Mt=_(),Xt=_(),Ht=_(""),zt=_(""),Tt=async()=>{var qe,be;if(!x.value||!y.value&&!R.value&&!E.value&&!b.value)return;const{TickUtil:d,TickMath:N,getNearestTickByTick:O}=Pt(),X=x.value.token_a.decimals,K=x.value.token_b.decimals;let G,Q,Y,U,ie,pe,se,J;const fe=x.value.current_tick_index,we=x.value.priceConfigObj;let ae;if(x.value.token_a.address.toLowerCase()===P.value.address.toLowerCase()&&x.value.token_b.address.toLowerCase()===D.value.address.toLowerCase()?ae=!0:ae=!1,E.value==="0"&&b.value==="\u221E"?(Y=d.getMinIndex(x.value.tickSpacing),U=d.getMaxIndex(x.value.tickSpacing),ie=N.tickIndexToSqrtPriceX64(Y),pe=N.tickIndexToSqrtPriceX64(U)):F.value=="Custom"?(ae?(G=Number(E.value),Q=Number(b.value)):(G=1/Number(b.value),Q=1/Number(E.value)),se=N.priceToTickIndex(new V(G),X,K),J=N.priceToTickIndex(new V(Q),X,K),Y=O(se,x.value.tickSpacing),U=O(J,x.value.tickSpacing),ie=N.priceToSqrtPriceX64(new V(G),X,K),pe=N.priceToSqrtPriceX64(new V(Q),X,K)):(Y=we[F.value].lower,U=we[F.value].upper,ie=N.tickIndexToSqrtPriceX64(Y),pe=N.tickIndexToSqrtPriceX64(U)),b.value!=="\u221E"&&Y>=U){Se.value=!0,y.value="",Ne.value=!0,R.value="";return}if(b.value==="\u221E"||fe>Y&&fe<U){Se.value=!1,Ne.value=!1;let le;if(y.value||R.value){if(v.value){const Ze=new V(y.value).mul(Math.pow(10,P.value.decimals)).toString();le=new Re(Ze)}else{const Ze=new V(R.value).mul(Math.pow(10,D.value.decimals)).toString();le=new Re(Ze)}const{liquidityAmount:he,tokenMaxA:Xe,tokenMaxB:Te,tokenMaxAOrigin:st,tokenMaxBOrigin:lt}=De.estLiquidityAndcoinAmountFromOneAmounts({tokenA:x.value.token_a,tokenB:x.value.token_b,lowerTick:Y,upperTick:U,coinAmount:le,iscoinA:ae?v.value:!v.value,roundUp:!0,slippage:Number(at.value)/100,curSqrtPrice:new Re(x.value.current_sqrt_price)});Nt.value={liquidityAmount:he,tokenMaxA:Xe,tokenMaxB:Te,tokenMaxAOrigin:st,tokenMaxBOrigin:lt},ae?v.value?R.value=Number(Te)>0?Te:"":y.value=Number(Xe)>0?Xe:"":v.value?R.value=Xe:y.value=Te}}else if(fe>=U){if(ae?y.value="":R.value="",Se.value=ae,Ne.value=!ae,y.value||R.value){let le;if(ae){const he=new V(R.value).mul(Math.pow(10,(qe=D.value)==null?void 0:qe.decimals)).toString();le=new Re(he),Nt.value={liquidityAmount:Ur(ie,pe,le),tokenMaxA:0,tokenMaxB:R.value}}else{const he=new V(y.value).mul(Math.pow(10,(be=P.value)==null?void 0:be.decimals)).toString();le=new Re(he),Nt.value={liquidityAmount:Ur(ie,pe,le),tokenMaxA:0,tokenMaxB:y.value}}}}else if(fe<=Y){if(Se.value=!ae,Ne.value=ae,ae?R.value="":y.value="",y.value||R.value){let le;if(ae){const he=new V(y.value).mul(Math.pow(10,P.value.decimals)).toString();le=new Re(he),Nt.value={liquidityAmount:qr(ie,pe,le),tokenMaxA:y.value,tokenMaxB:0}}else{const he=new V(R.value).mul(Math.pow(10,D.value.decimals)).toString();le=new Re(he),Nt.value={liquidityAmount:qr(ie,pe,le),tokenMaxA:R.value,tokenMaxB:0}}}}else Se.value=!0,y.value="",Ne.value=!0,R.value=""},Vt=_(0);ce(()=>Oe.query,d=>{d&&d.fee&&(Vt.value=d.fee)},{immediate:!0});const x=me(()=>{var N,O,X,K,G;const d=(N=Oe==null?void 0:Oe.query)==null?void 0:N.fee;if(ye.value.newTokenObj&&P.value&&D.value&&d){let Q=null;for(const Y in ye.value.poolsObj){const U=ye.value.poolsObj[Y];(U.token_a.address.toUpperCase()===((O=P.value.address)==null?void 0:O.toUpperCase())&&U.token_b.address.toUpperCase()===((X=D.value.address)==null?void 0:X.toUpperCase())&&U.fee==Vt.value*100||U.token_b.address.toUpperCase()===((K=P.value.address)==null?void 0:K.toUpperCase())&&U.token_a.address.toUpperCase()===((G=D.value.address)==null?void 0:G.toUpperCase())&&U.fee==Vt.value*100)&&(Q=U)}return Q&&!Hr(Q)?Q:null}return null}),gr=_({}),_o=async(d,N)=>{if(d){const{TickMath:O,getNearestTickByTick:X}=Pt();N&&(re.value=!0),d.token_a.address.toLowerCase()===P.value.address.toLowerCase()&&d.token_b.address.toLowerCase()===D.value.address.toLowerCase()?m.value=!0:m.value=!1,oe.value=!0;const K=d.token_a.decimals,G=d.token_b.decimals;Se.value=!1,Ne.value=!1,j.value=d.fee+"% "+e("common.feeTier");const Q=d.current_tick_index;Mt.value=nt(O.sqrtPriceX64ToPrice(d.current_sqrt_price,K,G).toString(),6),Xt.value=nt(String(1/Mt.value),6);const Y=await De.getTicks(d);if(ve.value=De.getTickDataFromUrlData(Y),N){let U=d.priceConfigObj;const ie=Q-Number(x.value.type=="unstable"?x.value.tickSpacing*2:x.value.tickSpacing*3),pe=Q+Number(x.value.type=="unstable"?x.value.tickSpacing*2:x.value.tickSpacing*3);U["Full Range"]={lower:-443630,upper:443630},U.Custom={lower:ie,upper:pe};const se=[];for(let J in U)se.push({...U[J],key:J});if(Qe.value=se,d.type=="stable"?F.value="suggested":F.value="passive",gr.value=U,Tn({key:F.value,...U[F.value]}),m.value){const J=U[F.value].lower,fe=U[F.value].upper,we=O.tickIndexToPrice(J,K,G).toString(),ae=O.tickIndexToPrice(fe,K,G).toString();H.value=String(we),E.value=String(we),w.value=String(ae),b.value=String(ae)}else{const J=U[F.value].lower,fe=U[F.value].upper,we=O.tickIndexToPrice(J,K,G).toString(),ae=O.tickIndexToPrice(fe,K,G).toString();H.value=String(1/Number(ae)),E.value=String(1/Number(ae)),w.value=String(1/Number(we)),b.value=String(1/Number(we))}}re.value=!1}},Ue=_();ce(()=>ye.value.RATES,d=>{d&&(Ue.value=d)},{immediate:!0}),ce(()=>[x.value,E.value,b.value,Ue.value],([d,N,O,X])=>{d&&X&&X[d.token_a.name.toUpperCase()]&&X[d.token_b.name.toUpperCase()]?ko():d&&X?(Ht.value="--",zt.value="--"):(Ht.value="",zt.value="")});const ko=async()=>{if(!E.value&&!b.value)return;const{TickUtil:d,TickMath:N,getNearestTickByTick:O}=Pt(),X=x.value.token_a.decimals,K=x.value.token_b.decimals;let G,Q,Y,U,ie,pe,se,J=1,fe=1;const we=x.value.current_tick_index,ae=x.value.priceConfigObj;if(x.value.token_a.address.toLowerCase()===P.value.address.toLowerCase()&&x.value.token_b.address.toLowerCase()===D.value.address.toLowerCase()?se=!0:se=!1,E.value==="0"&&b.value==="\u221E"?(Y=d.getMinIndex(x.value.tickSpacing),U=d.getMaxIndex(x.value.tickSpacing),N.tickIndexToSqrtPriceX64(Y),N.tickIndexToSqrtPriceX64(U)):F.value=="Custom"?(se?(G=Number(E.value),Q=Number(b.value)):(G=1/Number(b.value),Q=1/Number(E.value)),ie=N.priceToTickIndex(new V(G),X,K),pe=N.priceToTickIndex(new V(Q),X,K),Y=O(ie,x.value.tickSpacing),U=O(pe,x.value.tickSpacing),N.priceToSqrtPriceX64(new V(G),X,K),N.priceToSqrtPriceX64(new V(Q),X,K)):(Y=ae[F.value].lower,U=ae[F.value].upper,N.tickIndexToSqrtPriceX64(Y),N.tickIndexToSqrtPriceX64(U)),b.value==="\u221E"||we>Y&&we<U){let Te;if(v.value){const Ze=new V(1).mul(Math.pow(10,P.value.decimals)).toString();Te=new Re(Ze)}else{const Ze=new V(1).mul(Math.pow(10,D.value.decimals)).toString();Te=new Re(Ze)}const{tokenMaxA:st,tokenMaxB:lt}=await De.estLiquidityAndcoinAmountFromOneAmounts({tokenA:x.value.token_a,tokenB:x.value.token_b,lowerTick:Y,upperTick:U,coinAmount:Te,iscoinA:se?v.value:!v.value,roundUp:!0,slippage:Number(at.value)/100,curSqrtPrice:new Re(x.value.current_sqrt_price)});se?v.value?fe=Number(lt)>0?lt:"":J=Number(st)>0?st:"":v.value?fe=st:J=lt}else we>=U?se?(fe=1,J=0):(J=1,fe=0):we<=Y&&(se?(fe=0,J=1):(fe=1,J=0));const qe=J?Number(J):0,be=fe?Number(fe):0,le=be+Number(se?qe*Mt.value:qe*Xt.value),he=((se?Mt.value*qe:Xt.value*qe)/le*100).toFixed(0),Xe=(be/le*100).toFixed(0);Ht.value=he,zt.value=Xe};ce(()=>x.value,(d,N)=>{d?(!N||d.poolAddress!==N.poolAddress||d.current_sqrt_price!==N.current_sqrt_price)&&_o(d,!N||d.poolAddress!==N.poolAddress):(E.value="0",b.value="0",y.value="",R.value="",j.value="",C.value=!1,Se.value=!1,Ne.value=!1)},{immediate:!0,deep:!0});const it=me(()=>r.value.assets&&P.value&&r.value.assets[P.value.address]?zr(r.value.assets[P.value.address].balance,P.value.decimals):0),ot=me(()=>r.value.assets&&D.value&&r.value.assets[D.value.address]?zr(r.value.assets[D.value.address].balance,D.value.decimals):0),Co=async()=>{var pe,se,J,fe,we,ae;hr.value=!1,ye.value.currentPositionInfo={},vr(""),wo(e("tips.increaseLiquiditySuccess",{from:Se.value?"":`${y.value} ${(pe=P.value)==null?void 0:pe.symbol}`,and:!Se.value&&!Ne.value?"and":"",to:Ne.value?"":`${R.value} ${(se=D.value)==null?void 0:se.symbol}`})),qt(!0);const d=m.value?v.value:!v.value,N=x.value.priceConfigObj;let O,X,K,G,Q,Y;const U=x.value.token_a.decimals,ie=x.value.token_b.decimals;E.value==="0"&&b.value==="\u221E"?(K=Dr.getMinIndex(x.value.tickSpacing),G=Dr.getMaxIndex(x.value.tickSpacing)):F.value=="Custom"?(m.value?(O=Number(E.value),X=Number(b.value)):(O=1/Number(b.value),X=1/Number(E.value)),Q=mt.priceToTickIndex(new V(O),U,ie),Y=mt.priceToTickIndex(new V(X),U,ie),K=Xr(Q,x.value.tickSpacing),G=Xr(Y,x.value.tickSpacing)):(K=N[F.value].lower,G=N[F.value].upper);try{const qe=await De.getAddLiquidityTransactionPayload({pool:{poolAddress:x.value.poolAddress,token_a:x.value.token_a,token_b:x.value.token_b},amount:v.value?y.value:R.value,fix_amount_a:d,tick_lower:K,tick_upper:G,index:0,slippage:Number(at.value)/100,roundUp:!0});let be;if(be=await r.value.currentWallet.signAndSubmitTransaction(qe),be&&be.hash){vr(be.hash),qt(!1),mr(!0);const le={title:e("button.addLiquidity"),desc:e("tips.addLiquiditySuccessText",{from:Se.value?"":`${y.value} ${(J=P.value)==null?void 0:J.symbol}`,and:!Se.value&&!Ne.value?"and":"",to:Ne.value?"":`${R.value} ${(fe=D.value)==null?void 0:fe.symbol}`}),hash:be.hash,tit:`Opened Position: ${x.value.symbol}`,text:`Deopsit ${Se.value?"":`${y.value} ${(we=P.value)==null?void 0:we.symbol}`} ${!Se.value&&!Ne.value?"and":""} ${Ne.value?"":`${R.value} ${(ae=D.value)==null?void 0:ae.symbol}`}`};De.showTransitionPending(le);const he=await De.watchTransaction(le,!0);he.status&&(mr(!1),ye.value.setCurrentPositionLoading(!0),ye.value.setCurrentPositionInfo(he.nftInfo[0].data.id.creator,he.nftInfo[0].data.id.collection,he.nftInfo[0].data.name),l.value=!0,setTimeout(()=>{Dt.updateCurrentPools(x.value.poolAddress),De.getAccount(r.value.address)},1e3)),bo()}else qt(!1),pr(!0);y.value="",R.value=""}catch{y.value="",R.value="",qt(!1),pr(!0)}},Ao=d=>{switch(d){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"Full Range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"Custom":return e("newAdd.customTips")}},So=d=>{switch(d){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"Full Range":return e("newAdd.fullRange");case"Custom":return e("newAdd.custom")}},Tn=d=>{F.value=d.key;const N=x.value.token_a.decimals,O=x.value.token_b.decimals,{lower:X,upper:K}=d,G=mt.tickIndexToPrice(X,N,O).toString(),Q=mt.tickIndexToPrice(K,N,O).toString();if(d.key=="Full Range"){Nn.value=X,Mn.value=K,Ee(!0);return}m.value?(H.value=String(G),E.value=String(G),w.value=String(Q),b.value=String(Q),Nn.value=X,Mn.value=K):(H.value=String(1/Number(Q)),E.value=String(1/Number(Q)),w.value=String(1/Number(G)),b.value=String(1/Number(G)),Nn.value=mt.priceToTickIndex(new V(1/Number(Q)),N,O),Mn.value=mt.priceToTickIndex(new V(1/Number(G)),N,O)),Tt()},yr=_(""),wr=_(""),br=_(""),Kt=me(()=>i),No=(d,N)=>d&&N?gt(Zo.plus($n(d),$n(N)),2)+"%":d,_r=d=>{let N=0;return d&&d.forEach(O=>{N+=$n(String(O))}),String(gt(String(N),2))},kr=_([]),Cr=_([]),Ar=_(""),Sr=_("");ce(()=>[Kt.value.newTopPoolsObj,x.value,ye.value.newTokenObj],async([d,N,O])=>{if(d&&N&&d[N.poolAddress]&&O){const X=d[N.poolAddress];yr.value=X&&X.apr_7day,Sr.value=_r(X&&X.rewarder_apr),Ar.value=No(X&&X.apr_7day,X&&_r(X.rewarder_apr)),wr.value=Zt(X.tvl_in_usd,2),br.value=Zt(X.vol_in_usd_24h,2);const K=N&&N.rewarder_infos||[],G=[];K.forEach((Y,U)=>{const ie=O[Y.coinAddress].decimals,pe=nt(Y.emissionsEveryDay/Math.pow(10,ie),4),se=nt(Number(pe)*ye.value.RATES[Y.coinAddress].price,4);G.push({...Y,logoUrl:O[Y.coinAddress].logoURI,day:pe,dayUSD:se,symbol:O[Y.coinAddress].symbol,rewarder_display:N&&N[`rewarder_display${U+1}`]?N[`rewarder_display${U+1}`]:!1})}),kr.value=G.filter(Y=>Y.rewarder_display);const Q=[];G.forEach((Y,U)=>{Q.push({...Y,symbol:O[Y.coinAddress].symbol,rewarderApr:X.rewarder_apr[U]})}),Cr.value=Q.filter(Y=>Y.rewarder_display)}},{immediate:!0,deep:!0});const Nr=_({}),Mo=async d=>{var Mr,Tr,$r,Pr,Ir,xr,Er,Rr,Lr,Fr;let N;d.token_a.address.toLowerCase()===P.value.address.toLowerCase()&&d.token_b.address.toLowerCase()===D.value.address.toLowerCase()?N=!0:N=!1,Number(d.token_a.decimals),Number(d.token_b.decimals);const O=N?Number(E.value):b.value=="\u221E"?1/2**50:1/Number(b.value),X=isNaN(Number(b.value))||b.value=="\u221E"?2**50:N?Number(b.value):1/Number(E.value);let K=[];K=Object.fromEntries(Kt.value.addressHistTokens[d.poolAddress].data.map(Br=>[Br.key,Br.value]));const G=Number(Number(K.before_7_d_contract_price_lowest)),Q=Number(Number(K.before_7_d_contract_price_highest));new Re(d.current_sqrt_price),new Re(d.liquidity);const Y=await De.getTicks(d);De.getTickDataFromUrlData(Y),Number(d.fee_rate);const U=Kt.value.newTopPoolsObj[d.address]||[];new Re(Number(gt(U?Number(U==null?void 0:U.vol_in_usd):0,2))),(Mr=Ue.value[d.token_a.name.toUpperCase()])!=null&&Mr.price||((Tr=Ue.value[d.token_a.address])==null||Tr.price),($r=Ue.value[d.token_b.name.toUpperCase()])!=null&&$r.price||((Pr=Ue.value[d.token_b.address])==null||Pr.price);const ie=ye.value.newTokenObj;d.rewarder_infos[0]&&ie[d.rewarder_infos[0].coinAddress].decimals,d.rewarder_infos[1]&&ie[d.rewarder_infos[1].coinAddress].decimals,d.rewarder_infos[2]&&ie[d.rewarder_infos[2].coinAddress].decimals,d.rewarder_infos[0]&&String(d.rewarder_infos[0].emissionsEveryDay),d.rewarder_infos[1]&&String(d.rewarder_infos[1].emissionsEveryDay),d.rewarder_infos[2]&&String(d.rewarder_infos[2].emissionsEveryDay),d.rewarder_infos[0]&&((Ir=Ue.value[ie[d.rewarder_infos[0].coinAddress].name.toUpperCase()])!=null&&Ir.price||((xr=Ue.value[ie[d.rewarder_infos[0].coinAddress].address])==null||xr.price)),d.rewarder_infos[1]&&((Er=Ue.value[ie[d.rewarder_infos[1].coinAddress].name.toUpperCase()])!=null&&Er.price||((Rr=Ue.value[ie[d.rewarder_infos[1].coinAddress].address])==null||Rr.price)),d.rewarder_infos[2]&&((Lr=Ue.value[ie[d.rewarder_infos[2].coinAddress].name.toUpperCase()])!=null&&Lr.price||((Fr=Ue.value[ie[d.rewarder_infos[2].coinAddress].address])==null||Fr.price));const pe=await De.getEstPositionAPRWithMulti(O,X,G,Q),se=Number(pe.toString()),J=Kt.value.newTopPoolsObj[d.poolAddress],fe=J.apr_7day?Number(J.apr_7day.substring(0,J.apr_7day.length-1)):0,we=J.rewarder_apr[0]?Number(J.rewarder_apr[0].substring(0,J.rewarder_apr[0].length-1)):0,ae=J.rewarder_apr[1]?Number(J.rewarder_apr[1].substring(0,J.rewarder_apr[1].length-1)):0,qe=J.rewarder_apr[2]?Number(J.rewarder_apr[2].substring(0,J.rewarder_apr[2].length-1)):0,be=Number(se*fe),le=Number(se*we),he=Number(se*ae),Xe=Number(se*qe),Te=be+(d.rewarder_display1?le:0)+(d.rewarder_display2?he:0)+(d.rewarder_display3?Xe:0),st=d.rewarder_infos[0]?ie[d.rewarder_infos[0].coinAddress].symbol:"--",lt=d.rewarder_infos[1]?ie[d.rewarder_infos[1].coinAddress].symbol:"--",Ze=d.rewarder_infos[2]?ie[d.rewarder_infos[2].coinAddress].symbol:"--",Po={aprFee:be==1/0||isNaN(be)?0:be,rewardAprList:[{rewarder_name:st,rewarder_apr:le==1/0||isNaN(le)?0:le,styleName:"one",rewarder_display:d.rewarder_display1},{rewarder_name:lt,rewarder_apr:he==1/0||isNaN(he)?0:he,styleName:"two",rewarder_display:d.rewarder_display2},{rewarder_name:Ze,rewarder_apr:Xe==1/0||isNaN(Xe)?0:Xe,styleName:"three",rewarder_display:d.rewarder_display2}],aprPercentageTotal:Te==1/0||isNaN(Te)||Te===0?0:Te,aprPercentage:gt(be/Te,2),is_display_rewarder:d.is_display_rewarder};Nr.value=Po},To=me(()=>ye.value.newTokenObj&&P.value.address&&ye.value.newTokenObj[P.value.address]&&ye.value.newTokenObj[P.value.address].logoURI),$o=me(()=>ye.value.newTokenObj&&D.value.address&&ye.value.newTokenObj[D.value.address]&&ye.value.newTokenObj[D.value.address].logoURI);return{halfBtnSelect:go,selectFee:d=>{j.value=d.label,Vt.value=d.fee/100},isViewDetail:l,addCommom:Zt,fromCoinUrl:To,toCoinUrl:$o,t:e,wallet:r,toAdd:Co,chartLoading:re,currentTick:Me,tickList:ve,poolInfo:x,storeIndex:Sn,importIcon:vn,refresh:M,addLiquidityBtnText:Ut,slippage:at,isShowSwapSetting:c,autoRefreshTime:a,countdown:o,setMarketTimer:dr,marketTimer:s,loading:u,fromCoin:P,toCoin:D,openCoinSelect:mo,onCoinSelect:po,existingCoins:g,lastSelectCoin:$,currentCoinKey:h,showCoinSelect:k,fromCoinAmount:y,toCoinAmount:R,maxBtnSelect:vo,fixedFromCoin:v,isShowLiquidityModal:hr,direct:m,toggle:ho,edit:C,inputValue:j,feeTierList:_e,minPrice:E,maxPrice:b,invalidPriceRange:W,defaultMinPrice:H,defaultMaxPrice:w,priceRangeChangeMin:Ke,priceRangeChangeMax:fo,toFullRange:Ee,unilateral:f,clearAll:yo,clickClear:I,positionError:B,positionTips:te,router:z,clickRefresh:q,fromCoinBlance:it,toCoinBlance:ot,showToCoinLock:Ne,showFromCoinLock:Se,currentPriceReverse:Xt,currentPrice:Mt,getPirceText:Ao,currentPriceTab:F,currentPriceTabList:Qe,getPirceKey:So,priceTab:Tn,apr:yr,liquidityTvl:wr,vol24:br,fromCoinRatio:Ht,toCoinRatio:zt,aprRewardsParameter:de,aprRewardsDateList:ee,aprTab:Ie,reviseValue:xe,label:Be,aprTitle:Z,rewarderInfo:kr,rewarderArr:Cr,rewardApr:Ar,aprPercentageObj:Nr,rewardAprList:Sr}}}),$f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAJFBMVEVHcEwlW04mW04oXlEmW04SHx4jR0B2/9wQFBMVJyVk17szaV2jJaSaAAAABHRSTlMA8K8m/cUwkQAAAL5JREFUSMdjYMAKmBWFDBgIAUMXF2GCilQy2pyQ+Swu2EBHhyNIkgnIdMCjyCUUCMJgilxDMUFKRpsblBmCU9EUFxdPgooiU9ymElSEBEYVDR1FkaumElYUVp46qmjAFTGruE0lqMgQkaGnpYFAdvk2MJ2JpEgFUTQsL0cGVUiKRKCFDLGKiLKOKIdTGASjSYWWiogqMEYL1lFFWJoRTgYEFU0Bt6QIKEoBt6SwN43QWlJEKSKx4UZ+ExDUmAQAo9rc9CAs4WAAAAAASUVORK5CYII=",Pf="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAeUExURUdwTANNcARNcAdKcgEdMQRNcBM8V3bI/2Gq2ihWdudYHvAAAAAEdFJOUwDwryb9xTCRAAAAuklEQVRIx2NgwAqYFYUMGAgBw9BQYYKKVFPcgpD5rKHYgItLIEiSCcgMwKMIiFxcXGGKQlwwQWqKWxiU6YpTEdCEEIKKXFLDXAgrQjJ0VNHQUdRBhCK38pRRRQOuiFk1jLAiQ0SGdksDgczyaWA6BUmRKqJoaC9HBhVIikShhQyxioiyjiiHUxgEo0mFloqIKjBGC9ZRRViaEUEGBBW5gltSBBSFgltS2JtGaC0pohSR2HAjvwkIakwCANqYbmgtLE7YAAAAAElFTkSuQmCC",If=""+new URL("img-no-data_2x.e925467a.png",import.meta.url).href,xf=""+new URL("img-no-data_2x.8bc9afa2.png",import.meta.url).href;const ht=e=>(gn("data-v-62fadb59"),e=e(),yn(),e),Ef={class:"pools-container"},Rf={class:"title"},Lf={class:"left"},Ff={class:"right title-right"},Bf=ht(()=>p("svg",{class:"icon","aria-hidden":"true"},[p("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Of={class:"content"},Uf={class:"content-left"},qf={class:"content-left-bg"},Df={class:"content-left-title"},Xf={class:"coin-select"},Hf={class:"pool-fee-header"},zf={key:0,class:"fee-container"},Vf=["onClick"],Kf={key:0,src:ea,alt:""},Yf={key:1,src:ta,alt:""},Wf={class:"deposit-title"},Gf={class:"card-container"},jf={class:"card-item"},Qf={key:0,class:"unilateral"},Jf={key:0,src:Mi,alt:""},Zf={key:1,src:Ti,alt:""},ed={key:2},td={class:"card-item"},nd={key:0,class:"unilateral"},rd={key:0,src:Mi,alt:""},id={key:1,src:Ti,alt:""},od={key:2},ad={key:0,class:"deposit-ratio"},sd={class:"lebal"},ld=ht(()=>p("svg",{class:"icon","aria-hidden":"true"},[p("use",{"xlink:href":"#icon-icon-information"})],-1)),ud={class:"text"},cd=ht(()=>p("svg",{class:"icon","aria-hidden":"true"},[p("use",{"xlink:href":"#icon-icon-add"})],-1)),fd={class:"pc-network"},dd={class:"content-right"},hd={class:"content-right-title"},md=ht(()=>p("svg",{class:"icon","aria-hidden":"true"},[p("use",{"xlink:href":"#icon-icon-information"})],-1)),pd={key:0,class:"price-tab"},vd=["onClick"],gd={key:1,class:"current-price"},yd={key:0,class:"coin"},wd={key:1,class:"coin"},bd={key:2,class:"toggle"},_d=["src"],kd=["src"],Cd={key:3,class:"position-tips"},Ad=["src"],Sd={class:"tips"},Nd={key:4,class:"position-tips"},Md=["src"],Td={class:"error"},$d={class:"d3-chart-box"},Pd={key:0},Id={key:0,class:"noDataImg",src:If},xd={key:1,class:"noDataImg",src:xf},Ed={key:2,class:"not-select-mask"},Rd={key:0,class:"pool-info"},Ld=ht(()=>p("use",{"xlink:href":"#icon-icon_on"},null,-1)),Fd=[Ld],Bd={key:0,class:"info-block-container"},Od={class:"info-block"},Ud={class:"leabl"},qd={class:"text"},Dd={class:"apr-hover-content"},Xd={class:"info-block"},Hd={class:"leabl"},zd={class:"text"},Vd={class:"info-block"},Kd={class:"leabl"},Yd={class:"text"},Wd={class:"info-block"},Gd={class:"leabl"},jd={class:"text"},Qd={key:1,class:"pool-rewards-info"},Jd={class:"rewards-list-all"},Zd=ht(()=>p("div",{class:"icon-sign"},null,-1)),eh=["src"],th={class:"rewards-value"},nh=ht(()=>p("svg",{class:"icon","aria-hidden":"true"},[p("use",{"xlink:href":"#icon-icon-add"})],-1)),rh={class:"h5-network"};function ih(e,t){var M,v,I,y,R,E,b,H;const n=Io,r=xo,i=fa,a=Vo,o=Ho,s=tr,l=Wo,u=Ia,c=Qc,f=zo,h=Go,g=jo,$=Ko,k=Yo,m=Qo,A=Mf;return T(),L("div",Ef,[ue(n),p("div",Rf,[p("div",Lf,[p("span",null,S(e.$t("common.concentratedLiquidity")),1)]),p("div",Ff,[p("span",{class:"clear",onClick:t[0]||(t[0]=(...w)=>e.clearAll&&e.clearAll(...w))},S(e.$t("common.clearAll")),1),p("div",{class:"slippage-icon",onClick:t[1]||(t[1]=w=>e.isShowSwapSetting=!0)},[Bf,p("span",null,S(e.slippage)+"%",1)]),ue(r,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:t[2]||(t[2]=w=>e.clickRefresh())},null,8,["loading","auto-refresh-time","countdown"])])]),p("div",Of,[p("div",Uf,[p("div",qf,[p("div",Df,S(e.$t("common.selectPool")),1),p("div",Xf,[ue(i,{"coin-icon":e.fromCoin?e.fromCoin.logoURI:"","coin-name":e.fromCoin&&e.fromCoin.symbol,coin:e.fromCoin,onClick:t[3]||(t[3]=w=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),ue(i,{"coin-icon":e.toCoin?e.toCoin.logoURI:"","coin-name":e.toCoin&&e.toCoin.symbol,coin:e.toCoin,onClick:t[4]||(t[4]=w=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),p("div",{class:$e(["pool-fee",e.edit?"pool-fee-edit":""])},[p("div",Hf,[p("span",{class:$e(e.clickClear||!e.poolInfo?"fee-span":"")},S(e.clickClear||!e.poolInfo?"Fee tier":e.inputValue),3),ne("",!0)]),e.edit?(T(),L("div",zf,[(T(!0),L(Wt,null,Pn(e.feeTierList,(w,C)=>(T(),L("div",{key:C,class:$e(e.inputValue.includes(w.label)?"fee-item fee-item-active":"fee-item"),onClick:te=>e.selectFee(w)},[p("p",null,S(w.title),1),p("span",null,S(w.text),1),e.storeIndex.theme=="default"?(T(),L("img",Kf)):(T(),L("img",Yf))],10,Vf))),128))])):ne("",!0)],2),p("div",Wf,S(e.$t("newAdd.depositAmounts")),1),p("div",Gf,[p("div",jf,[ue(a,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[6]||(t[6]=w=>e.fromCoinAmount=w),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[7]||(t[7]=w=>e.maxBtnSelect("fromCoin")),onOnHalf:t[8]||(t[8]=w=>e.halfBtnSelect("fromCoin")),onOnInput:t[9]||(t[9]=w=>{e.fromCoinAmount=w,e.fixedFromCoin=!0}),onOnSelect:t[10]||(t[10]=w=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock||!e.poolInfo?(T(),L("div",Qf,[p("div",null,[e.storeIndex.theme=="default"?(T(),L("img",Jf)):(T(),L("img",Zf)),e.fromCoin&&e.toCoin&&e.poolInfo?(T(),L("p",ed,S(e.$t("tips.marketprice")),1)):ne("",!0)])])):ne("",!0)]),p("div",td,[ue(a,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[11]||(t[11]=w=>e.toCoinAmount=w),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[12]||(t[12]=w=>e.maxBtnSelect("toCoin")),onOnHalf:t[13]||(t[13]=w=>e.halfBtnSelect("toCoin")),onOnInput:t[14]||(t[14]=w=>{e.toCoinAmount=w,e.fixedFromCoin=!1}),onOnSelect:t[15]||(t[15]=w=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock||!e.poolInfo?(T(),L("div",nd,[p("div",null,[e.storeIndex.theme=="default"?(T(),L("img",rd)):(T(),L("img",id)),e.fromCoin&&e.toCoin&&e.poolInfo?(T(),L("p",od,S(e.$t("tips.marketprice")),1)):ne("",!0)])])):ne("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(T(),L("img",{key:0,class:"add",src:$f,alt:"",onClick:t[16]||(t[16]=(...w)=>e.toggle&&e.toggle(...w))})):ne("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(T(),L("img",{key:1,class:"add",src:Pf,alt:"",onClick:t[17]||(t[17]=(...w)=>e.toggle&&e.toggle(...w))})):ne("",!0)]),e.poolInfo?(T(),L("div",ad,[p("div",sd,[Le(S(e.$t("newAdd.depositRatio"))+" ",1),ue(o,{placement:"bottom","arrow-point-at-center":""},{title:Ae(()=>[p("span",null,S(e.$t("newAdd.depositRatioTips")),1)]),default:Ae(()=>[ld]),_:1})]),p("div",ud,S(e.fromCoinRatio!=="--"?e.fromCoinRatio+"%":"--")+" "+S(e.fromCoinRatio!=="--"?e.fromCoin&&e.fromCoin.symbol:"")+" / "+S(e.toCoinRatio!=="--"?e.toCoinRatio+"%":"--")+" "+S(e.toCoinRatio!=="--"?e.toCoin&&e.toCoin.symbol:""),1)])):ne("",!0)]),ue(s,{disabled:e.wallet.connected?!e.fromCoinAmount&&!e.toCoinAmount||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||Number(e.toCoinAmount)>Number(e.toCoinBlance)||e.addLiquidityBtnText!==e.$t("button.addLiquidity")||e.poolInfo.is_pause:!1,class:"big-btn",onClick:t[18]||(t[18]=w=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:Ae(()=>[cd,p("span",null,S(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),p("div",fd,[ue(l)])]),p("div",dd,[p("div",hd,[Le(S(e.$t("newAdd.selectRange"))+" ",1),ue(o,{placement:"bottom","arrow-point-at-center":""},{title:Ae(()=>[p("span",null,S(e.$t("newAdd.selectRangeTips")),1)]),default:Ae(()=>[md]),_:1})]),p("div",{class:$e(e.clickClear||!e.fromCoin||!e.toCoin||!e.poolInfo?"content-right-bg content-right-bg-height":"content-right-bg")},[e.poolInfo?(T(),L("div",pd,[(T(!0),L(Wt,null,Pn(e.currentPriceTabList,w=>(T(),L("div",{key:w,class:$e(["price-item",{"price-item-active":w.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:C=>e.priceTab(w)},[ue(o,{placement:"bottom","arrow-point-at-center":""},{title:Ae(()=>[p("span",null,S(e.getPirceText(w.key)),1)]),default:Ae(()=>[Le(" "+S(e.getPirceKey(w.key)),1)]),_:2},1024)],10,vd))),128))])):ne("",!0),e.poolInfo?(T(),L("div",gd,[e.fromCoin&&e.toCoin&&e.direct?(T(),L("div",yd,[p("span",null,S(e.$t("common.currentPrice")),1),Le(" "+S(e.addCommom(e.currentPrice,6))+" "+S((M=e.toCoin)==null?void 0:M.symbol)+" per "+S((v=e.fromCoin)==null?void 0:v.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(T(),L("div",wd,[p("span",null,S(e.$t("common.currentPrice")),1),Le(" "+S(e.addCommom(e.currentPriceReverse,6))+" "+S((I=e.toCoin)==null?void 0:I.symbol)+" per "+S((y=e.fromCoin)==null?void 0:y.symbol),1)])):ne("",!0),e.fromCoin&&e.toCoin?(T(),L("div",bd,[p("div",{class:$e(e.direct?"item active-item":"item"),onClick:t[19]||(t[19]=w=>e.direct?"":e.toggle())},[p("img",{src:e.direct?e.fromCoin.logoURI:e.toCoin.logoURI,alt:""},null,8,_d),Le(" "+S(e.direct?(R=e.fromCoin)==null?void 0:R.symbol:(E=e.toCoin)==null?void 0:E.symbol),1)],2),p("div",{class:$e(e.direct?"item ":"item active-item"),onClick:t[20]||(t[20]=w=>e.direct?e.toggle():"")},[p("img",{src:e.direct?e.toCoin.logoURI:e.fromCoin.logoURI,alt:""},null,8,kd),Le(" "+S(e.direct?(b=e.toCoin)==null?void 0:b.symbol:(H=e.fromCoin)==null?void 0:H.symbol),1)],2)])):ne("",!0)])):ne("",!0),e.poolInfo?(T(),Ye(u,{key:2,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):ne("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(T(),L("div",Cd,[p("img",{src:e.importIcon("/image/icon-tips@2x.png"),alt:""},null,8,Ad),p("p",Sd,S(e.$t("tips.positionTips")),1)])):ne("",!0),e.positionError&&!e.clickClear&&e.poolInfo?(T(),L("div",Nd,[p("img",{src:e.importIcon("/image/icon-tips-error@2x.png"),alt:""},null,8,Md),p("p",Td,S(e.$t("tips.positionError")),1)])):ne("",!0),p("div",$d,[(e.clickClear||!e.poolInfo)&&!e.chartLoading?(T(),L("div",Pd,[e.storeIndex.theme=="default"?(T(),L("img",Id)):(T(),L("img",xd)),p("p",null,S(e.$t("newAdd.positionAppear")),1)])):ne("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(T(),Ye(c,{key:1,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","onOnChangeMinPrice","onOnChangeMaxPrice"])):ne("",!0),e.currentPriceTab!=="Custom"?(T(),L("div",Ed)):ne("",!0),e.chartLoading?(T(),Ye(f,{key:3})):ne("",!0)]),e.poolInfo&&Number(e.minPrice)<Number(e.maxPrice)||e.maxPrice=="\u221E"?(T(),Ye(h,{key:5,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"apr-percentage-obj":e.aprPercentageObj,"name-tab":"deposit",onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","apr-percentage-obj","onAprTab"])):ne("",!0)],2),e.poolInfo?(T(),L("div",Rd,[e.apr?(T(),L(Wt,{key:0},[p("div",{class:$e(e.label?"pool-info-border pool-info-title":"pool-info-title")},[Le(S(e.$t("newAdd.poolInfo"))+" ",1),(T(),L("svg",{class:$e(e.label?"show-icon icon":"icon"),"aria-hidden":"true",onClick:t[21]||(t[21]=w=>e.reviseValue())},Fd,2))],2),e.label?(T(),L("div",Bd,[p("div",Od,[p("div",Ud,S(e.$t("common.apr")),1),p("div",qd,[Le(S(e.poolInfo.is_display_rewarder?e.addCommom(e.rewardApr.substring(0,e.rewardApr.length-1),2):e.addCommom(e.apr.substring(0,e.apr.length-1),2))+"% ",1),p("div",Dd,[ue(g,{"l-item":{apr:e.apr,aprTotal:e.rewardApr,rewarder_apr:e.rewardAprList,is_display_rewarder:e.poolInfo.is_display_rewarder},"rewarder-info":e.rewarderArr},null,8,["l-item","rewarder-info"])])])]),p("div",Xd,[p("div",Hd,S(e.$t("common.liquidity")),1),p("div",zd,"$"+S(e.liquidityTvl),1)]),p("div",Vd,[p("div",Kd,S(e.$t("common.volume24h")),1),p("div",Yd,"$"+S(e.vol24),1)]),p("div",Wd,[p("div",Gd,S(e.$t("newAdd.tickSpacing")),1),p("div",jd,S(e.poolInfo&&e.poolInfo.tick_spacing),1)])])):ne("",!0),e.poolInfo.is_display_rewarder&&e.label&&e.rewarderInfo&&e.rewarderInfo.length>0?(T(),L("div",Qd,[Le(S("Farming Bonus")+" "),p("div",Jd,[(T(!0),L(Wt,null,Pn(e.rewarderInfo,w=>(T(),L("div",{key:w,class:$e(["rewards-list",w.day==0?"rewards-none":""])},[Zd,p("img",{src:w.logoUrl,alt:""},null,8,eh),p("div",th,[p("p",null,S(w.day)+" "+S(w.symbol)+" / "+S(e.$t("newAdd.day"))+" ",1)])],2))),128))])])):ne("",!0)],64)):(T(),Ye(f,{key:1}))])):ne("",!0)])]),ue(s,{disabled:e.wallet.connected?!e.fromCoinAmount&&!e.toCoinAmount||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||Number(e.toCoinAmount)>Number(e.toCoinBlance)||e.poolInfo.is_pause:!1,class:"big-btn h5-btn",onClick:t[22]||(t[22]=w=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:Ae(()=>[nh,p("span",null,S(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),p("div",rh,[ue(l)]),e.showCoinSelect?(T(),Ye($,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:t[23]||(t[23]=w=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):ne("",!0),e.isShowSwapSetting?(T(),Ye(k,{key:1,onOnClose:t[24]||(t[24]=w=>e.isShowSwapSetting=!1)})):ne("",!0),e.isShowLiquidityModal?(T(),Ye(m,{key:2,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"pool-info":e.poolInfo,onToAdd:e.toAdd,onOnClose:t[25]||(t[25]=w=>e.isShowLiquidityModal=!1)},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","min-price","max-price","current-price","current-price-reverse","pool-info","onToAdd"])):ne("",!0),e.isViewDetail?(T(),Ye(A,{key:3,onOnClose:t[26]||(t[26]=w=>e.isViewDetail=!1)})):ne("",!0)])}const Ch=St(Tf,[["render",ih],["__scopeId","data-v-62fadb59"]]);export{Ch as default};
